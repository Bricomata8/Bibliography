/*
LENS UI
5.16.0
Tue Mar 26 02:07:59 UTC 2019
*/
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=319)})([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(331);__webpack_require__(38);__webpack_require__(360);var _clipboardPolyfill=__webpack_require__(118);var _clipboardPolyfill2=_interopRequireDefault(_clipboardPolyfill);var _smoothscroll=__webpack_require__(62);var _smoothscroll2=_interopRequireDefault(_smoothscroll);var _SearchTour=__webpack_require__(362);var _SearchTour2=_interopRequireDefault(_SearchTour);var _NewSearchTour=__webpack_require__(363);var _NewSearchTour2=_interopRequireDefault(_NewSearchTour);var _urlQueryHelpers=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalStorageService=__webpack_require__(7);var app=window.angular.module("lens-ui",["ui.router","ngResource","lens-coins","lens-patent-family"]);var configDeps=["$compileProvider","$sceDelegateProvider","$locationProvider"];app.config([].concat(configDeps,[function($compileProvider,$sceDelegateProvider,$locationProvider){$locationProvider.hashPrefix("");if(!window.UI_CONFIG.hashRouting&&window.history.pushState){$locationProvider.html5Mode({enabled:true,requireBase:false,rewriteLinks:false})}$compileProvider.commentDirectivesEnabled(false);$compileProvider.cssClassDirectivesEnabled(false);$sceDelegateProvider.resourceUrlWhitelist(["self",window.UI_CONFIG.assetLocation+"/templates/**",window.UI_CONFIG.institutionDataLocation+"/public/**"])}]));var templates=__webpack_require__(364);var deps=["$rootScope","$templateCache","SettingsService","ScholarService"];app.run([].concat(deps,[function($rootScope,$templateCache,SettingsService,ScholarService){$rootScope.isAnon=window.UI_CONFIG.isAnon;$rootScope.user=window.UI_CONFIG.user;$rootScope.assetLocation=window.UI_CONFIG.assetLocation;$rootScope.institutionDataLocation=window.UI_CONFIG.institutionDataLocation;$rootScope.structuredSearchTips="ss-tips";$rootScope.stringify=function(v){return JSON.stringify(v)};$rootScope.userProfilePictureUrl=function(key){return"https://s3-us-west-2.amazonaws.com/static.lens.org/"+key};templates.forEach(function(item){$templateCache.put(item.name,item.content)});if($rootScope.assetLocation.includes&&($rootScope.assetLocation.includes("LENSUI-DEVELOP")||$rootScope.assetLocation.includes("LENSUI-FEAT"))){var components=$rootScope.assetLocation.split("LENSUI-DEVELOP/");$rootScope.buildNumber="Build "+components[1]}$rootScope.template=function(s){return $rootScope.assetLocation+"/templates/"+s+".html"};$rootScope.message=function(k){return window.messages.prop(k)};SettingsService.fetch().then(function(settings){$rootScope.settings=settings});var storage=new LocalStorageService;$rootScope.releaseNotesModalVersion="5.15.0";$rootScope.hideTip=storage.get("hideTip")||{};$rootScope.ignoreTip=function(k){$rootScope.hideTip=storage.get("hideTip")||{};$rootScope.hideTip[k]=true;storage.set("hideTip",$rootScope.hideTip)};$rootScope.closeReleaseNotesModal=function(){$rootScope.ignoreTip($rootScope.releaseNotesModalVersion)};$rootScope.editNote=function(note){$rootScope.noteExplorer.note=note};$rootScope.addNote=function(note){$rootScope.noteExplorer.note=note};$rootScope.resetNoteExplorer=function(){return $rootScope.noteExplorer={}};$rootScope.resetNoteExplorer();$rootScope.dismissRegistrationWidget=function(){storage.set("ignoreRegistrationWidget",true);$rootScope.ignoreRegistrationWidget=true};$rootScope.ignoreRegistrationWidget=storage.get("ignoreRegistrationWidget");$rootScope.sideTabsView=$.cookie("SIDE_TAB_VIEW")||"st-filters";$rootScope.setSideTabsView=function(k){if(k==="st-collapse"){if($rootScope.sideTabsView==="st-collapse"){k="st-filters";var previous=$.cookie("PREVIOUS_SIDE_TAB_VIEW");$rootScope.sideTabsView=previous==="st-collapse"?"st-filters":previous}else{$rootScope.sideTabsView=k}}else{$.cookie("PREVIOUS_SIDE_TAB_VIEW",k,{path:"/"});$rootScope.sideTabsView=k}$.cookie("SIDE_TAB_VIEW",k,{path:"/"});$rootScope.$broadcast("SIDE_TAB_CHANGED")};window.searchTour=function(){window.scrollTo(0,0);(0,_urlQueryHelpers.setParam)("preview",true);$rootScope.setSideTabsView("st-filters");$rootScope.$apply();setTimeout(_SearchTour2.default,200)};$rootScope.newSearchTour=function(){setTimeout(_NewSearchTour2.default,200)};$.vent.on("setSideTabsView",function(k){$rootScope.setSideTabsView(k);$rootScope.$apply()});window.trySearchTour=function(){var path=window.location.pathname;var oneTimeTour=storage.get("oneTimeTour");var params=$.deparam(window.location.search)||{};if(!oneTimeTour&&!params.dashboardId&&(path.indexOf("/lens/search")>=0||path.indexOf("/lens/scholar/search")>=0)){setTimeout(function(){window.searchTour();storage.set("oneTimeTour",true)},3e3)}};window.trySearchTour();$rootScope.filterMapEmpty=function(map){return _.keys(map).filter(function(k){return map[k]}).length>0};var resize=_.debounce(function(){var width=window.innerWidth;$rootScope.breakpoints={isMobile:width<768,isTablet:width>768&&width<992,isDesktop:width>1200,isLowResDeskTop:width>1200&&width<1320,isHighResDesktop:width>1600};$rootScope.$digest()},50);$(window).resize(resize);var reset=function reset(){localStorage.clear();sessionStorage.clear();alert("All local cache and settings cleared");window.location.reload()};$rootScope.reset=reset;window.reset=reset;$rootScope.hideQueryDetails=storage.get("hideQueryDetails");$rootScope.toggleQueryDetails=function(){$rootScope.hideQueryDetails=!$rootScope.hideQueryDetails;storage.set("hideQueryDetails",$rootScope.hideQueryDetails)};$rootScope.scrollToTop=function(){var el=document.getElementById("menu");(0,_smoothscroll2.default)(el)};$rootScope.facebookShareUrl=function(){return"https://www.facebook.com/sharer/sharer.php?u="+window.encodeURIComponent($rootScope.shareUrl())};$rootScope.linkedInShareUrl=function(){var search=$.param({mini:true,url:$rootScope.shareUrl(),title:"Lens.org",summary:""});return"https://www.linkedin.com/shareArticle?"+search};$rootScope.emailShareUrl=function(){return"mailto:?&subject=Lens.org&body="+window.encodeURIComponent($rootScope.shareUrl())};$rootScope.shareUrl=function(){return window.location.href};$rootScope.copyShareUrl=function(){_clipboardPolyfill2.default.writeText($rootScope.shareUrl());$rootScope.shareUrlCopied=true}}]));exports.default=app},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=__webpack_require__(2);var hof_1=__webpack_require__(5);var coreservices_1=__webpack_require__(11);var w=typeof window==="undefined"?{}:window;var angular=w.angular||{};exports.fromJson=angular.fromJson||JSON.parse.bind(JSON);exports.toJson=angular.toJson||JSON.stringify.bind(JSON);exports.copy=angular.copy||_copy;exports.forEach=angular.forEach||_forEach;exports.extend=Object.assign||_extend;exports.equals=angular.equals||_equals;function identity(x){return x}exports.identity=identity;function noop(){}exports.noop=noop;function createProxyFunctions(source,target,bind,fnNames,latebind){if(latebind===void 0){latebind=false}var bindFunction=function(fnName){return source()[fnName].bind(bind())};var makeLateRebindFn=function(fnName){return function lateRebindFunction(){target[fnName]=bindFunction(fnName);return target[fnName].apply(null,arguments)}};fnNames=fnNames||Object.keys(source());return fnNames.reduce(function(acc,name){acc[name]=latebind?makeLateRebindFn(name):bindFunction(name);return acc},target)}exports.createProxyFunctions=createProxyFunctions;exports.inherit=function(parent,extra){return exports.extend(Object.create(parent),extra)};var restArgs=function(args,idx){if(idx===void 0){idx=0}return Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(args,idx))};exports.inArray=hof_1.curry(_inArray);function _inArray(array,obj){return array.indexOf(obj)!==-1}exports._inArray=_inArray;exports.removeFrom=hof_1.curry(_removeFrom);function _removeFrom(array,obj){var idx=array.indexOf(obj);if(idx>=0)array.splice(idx,1);return array}exports._removeFrom=_removeFrom;exports.pushTo=hof_1.curry(_pushTo);function _pushTo(arr,val){return arr.push(val),val}exports._pushTo=_pushTo;exports.deregAll=function(functions){return functions.slice().forEach(function(fn){typeof fn==="function"&&fn();exports.removeFrom(functions,fn)})};function defaults(opts){var defaultsList=[];for(var _i=1;_i<arguments.length;_i++){defaultsList[_i-1]=arguments[_i]}var _defaultsList=defaultsList.concat({}).reverse();var defaultVals=exports.extend.apply(null,_defaultsList);return exports.extend({},defaultVals,pick(opts||{},Object.keys(defaultVals)))}exports.defaults=defaults;exports.mergeR=function(memo,item){return exports.extend(memo,item)};function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}exports.ancestors=ancestors;function pick(obj,propNames){var objCopy={};for(var prop_1 in obj){if(propNames.indexOf(prop_1)!==-1){objCopy[prop_1]=obj[prop_1]}}return objCopy}exports.pick=pick;function omit(obj,propNames){return Object.keys(obj).filter(hof_1.not(exports.inArray(propNames))).reduce(function(acc,key){return acc[key]=obj[key],acc},{})}exports.omit=omit;function pluck(collection,propName){return map(collection,hof_1.prop(propName))}exports.pluck=pluck;function filter(collection,callback){var arr=predicates_1.isArray(collection),result=arr?[]:{};var accept=arr?function(x){return result.push(x)}:function(x,key){return result[key]=x};exports.forEach(collection,function(item,i){if(callback(item,i))accept(item,i)});return result}exports.filter=filter;function find(collection,callback){var result;exports.forEach(collection,function(item,i){if(result)return;if(callback(item,i))result=item});return result}exports.find=find;exports.mapObj=map;function map(collection,callback){var result=predicates_1.isArray(collection)?[]:{};exports.forEach(collection,function(item,i){return result[i]=callback(item,i)});return result}exports.map=map;exports.values=function(obj){return Object.keys(obj).map(function(key){return obj[key]})};exports.allTrueR=function(memo,elem){return memo&&elem};exports.anyTrueR=function(memo,elem){return memo||elem};exports.unnestR=function(memo,elem){return memo.concat(elem)};exports.flattenR=function(memo,elem){return predicates_1.isArray(elem)?memo.concat(elem.reduce(exports.flattenR,[])):pushR(memo,elem)};function pushR(arr,obj){arr.push(obj);return arr}exports.pushR=pushR;exports.uniqR=function(acc,token){return exports.inArray(acc,token)?acc:pushR(acc,token)};exports.unnest=function(arr){return arr.reduce(exports.unnestR,[])};exports.flatten=function(arr){return arr.reduce(exports.flattenR,[])};exports.assertPredicate=assertFn;exports.assertMap=assertFn;function assertFn(predicateOrMap,errMsg){if(errMsg===void 0){errMsg="assert failure"}return function(obj){var result=predicateOrMap(obj);if(!result){throw new Error(predicates_1.isFunction(errMsg)?errMsg(obj):errMsg)}return result}}exports.assertFn=assertFn;exports.pairs=function(obj){return Object.keys(obj).map(function(key){return[key,obj[key]]})};function arrayTuples(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(args.length===0)return[];var maxArrayLen=args.reduce(function(min,arr){return Math.min(arr.length,min)},9007199254740991);var i,result=[];for(i=0;i<maxArrayLen;i++){switch(args.length){case 1:result.push([args[0][i]]);break;case 2:result.push([args[0][i],args[1][i]]);break;case 3:result.push([args[0][i],args[1][i],args[2][i]]);break;case 4:result.push([args[0][i],args[1][i],args[2][i],args[3][i]]);break;default:result.push(args.map(function(array){return array[i]}));break}}return result}exports.arrayTuples=arrayTuples;function applyPairs(memo,keyValTuple){var key,value;if(predicates_1.isArray(keyValTuple))key=keyValTuple[0],value=keyValTuple[1];if(!predicates_1.isString(key))throw new Error("invalid parameters to applyPairs");memo[key]=value;return memo}exports.applyPairs=applyPairs;function tail(arr){return arr.length&&arr[arr.length-1]||undefined}exports.tail=tail;function _copy(src,dest){if(dest)Object.keys(dest).forEach(function(key){return delete dest[key]});if(!dest)dest={};return exports.extend(dest,src)}function _forEach(obj,cb,_this){if(predicates_1.isArray(obj))return obj.forEach(cb,_this);Object.keys(obj).forEach(function(key){return cb(obj[key],key)})}function _extend(toObj){for(var i=1;i<arguments.length;i++){var obj=arguments[i];if(!obj)continue;var keys=Object.keys(obj);for(var j=0;j<keys.length;j++){toObj[keys[j]]=obj[keys[j]]}}return toObj}exports._extend=_extend;function _equals(o1,o2){if(o1===o2)return true;if(o1===null||o2===null)return false;if(o1!==o1&&o2!==o2)return true;var t1=typeof o1,t2=typeof o2;if(t1!==t2||t1!=="object")return false;var tup=[o1,o2];if(hof_1.all(predicates_1.isArray)(tup))return _arraysEq(o1,o2);if(hof_1.all(predicates_1.isDate)(tup))return o1.getTime()===o2.getTime();if(hof_1.all(predicates_1.isRegExp)(tup))return o1.toString()===o2.toString();if(hof_1.all(predicates_1.isFunction)(tup))return true;var predicates=[predicates_1.isFunction,predicates_1.isArray,predicates_1.isDate,predicates_1.isRegExp];if(predicates.map(hof_1.any).reduce(function(b,fn){return b||!!fn(tup)},false))return false;var key,keys={};for(key in o1){if(!_equals(o1[key],o2[key]))return false;keys[key]=true}for(key in o2){if(!keys[key])return false}return true}function _arraysEq(a1,a2){if(a1.length!==a2.length)return false;return arrayTuples(a1,a2).reduce(function(b,t){return b&&_equals(t[0],t[1])},true)}exports.sortBy=function(propFn,checkFn){if(checkFn===void 0){checkFn=hof_1.val(true)}return function(a,b){return checkFn(a)&&checkFn(b)?propFn(a)-propFn(b):0}};exports.composeSort=function(){var sortFns=[];for(var _i=0;_i<arguments.length;_i++){sortFns[_i]=arguments[_i]}return function composedSort(a,b){return sortFns.reduce(function(prev,fn){return prev||fn(a,b)},0)}};exports.silenceUncaughtInPromise=function(promise){return promise.catch(function(e){return 0})&&promise};exports.silentRejection=function(error){return exports.silenceUncaughtInPromise(coreservices_1.services.$q.reject(error))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hof_1=__webpack_require__(5);var stateObject_1=__webpack_require__(144);var toStr=Object.prototype.toString;var tis=function(t){return function(x){return typeof x===t}};exports.isUndefined=tis("undefined");exports.isDefined=hof_1.not(exports.isUndefined);exports.isNull=function(o){return o===null};exports.isNullOrUndefined=hof_1.or(exports.isNull,exports.isUndefined);exports.isFunction=tis("function");exports.isNumber=tis("number");exports.isString=tis("string");exports.isObject=function(x){return x!==null&&typeof x==="object"};exports.isArray=Array.isArray;exports.isDate=function(x){return toStr.call(x)==="[object Date]"};exports.isRegExp=function(x){return toStr.call(x)==="[object RegExp]"};exports.isState=stateObject_1.StateObject.isState;function isInjectable(val){if(exports.isArray(val)&&val.length){var head=val.slice(0,-1),tail=val.slice(-1);return!(head.filter(hof_1.not(exports.isString)).length||tail.filter(hof_1.not(exports.isFunction)).length)}return exports.isFunction(val)}exports.isInjectable=isInjectable;exports.isPromise=hof_1.and(exports.isObject,hof_1.pipe(hof_1.prop("then"),exports.isFunction))},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(44);var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(52);function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function curry(fn){var initial_args=[].slice.apply(arguments,[1]);var func_args_length=fn.length;function curried(args){if(args.length>=func_args_length)return fn.apply(null,args);return function(){return curried(args.concat([].slice.apply(arguments)))}}return curried(initial_args)}exports.curry=curry;function compose(){var args=arguments;var start=args.length-1;return function(){var i=start,result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}}exports.compose=compose;function pipe(){var funcs=[];for(var _i=0;_i<arguments.length;_i++){funcs[_i]=arguments[_i]}return compose.apply(null,[].slice.call(arguments).reverse())}exports.pipe=pipe;exports.prop=function(name){return function(obj){return obj&&obj[name]}};exports.propEq=curry(function(name,val,obj){return obj&&obj[name]===val});exports.parse=function(name){return pipe.apply(null,name.split(".").map(exports.prop))};exports.not=function(fn){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return!fn.apply(null,args)}};function and(fn1,fn2){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return fn1.apply(null,args)&&fn2.apply(null,args)}}exports.and=and;function or(fn1,fn2){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return fn1.apply(null,args)||fn2.apply(null,args)}}exports.or=or;exports.all=function(fn1){return function(arr){return arr.reduce(function(b,x){return b&&!!fn1(x)},true)}};exports.any=function(fn1){return function(arr){return arr.reduce(function(b,x){return b||!!fn1(x)},false)}};exports.is=function(ctor){return function(obj){return obj!=null&&obj.constructor===ctor||obj instanceof ctor}};exports.eq=function(val){return function(other){return val===other}};exports.val=function(v){return function(){return v}};function invoke(fnName,args){return function(obj){return obj[fnName].apply(obj,args)}}exports.invoke=invoke;function pattern(struct){return function(x){for(var i=0;i<struct.length;i++){if(struct[i][0](x))return struct[i][1](x)}}}exports.pattern=pattern},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var version=__webpack_require__(33).trim();var LocalStorageService=function(){function LocalStorageService(prefix,useVersion){_classCallCheck(this,LocalStorageService);if(useVersion){prefix=version+":"+prefix}this.prefix=prefix;this.store={};this.withPrefix=function(key){if(this.prefix){key=this.prefix+"."+key}return key}}_createClass(LocalStorageService,[{key:"get",value:function get(k){k=this.withPrefix(k);try{return JSON.parse(window.localStorage.getItem(k))}catch(e){return this.store[k]}}},{key:"set",value:function set(k,v){k=this.withPrefix(k);try{return window.localStorage.setItem(k,JSON.stringify(v))}catch(e){this.store[k]=v}}},{key:"remove",value:function remove(k){k=this.withPrefix(k);try{return window.localStorage.removeItem(k)}catch(e){delete this.store[k]}}}]);return LocalStorageService}();module.exports=LocalStorageService},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(72),getValue=__webpack_require__(75);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var timeout=null;var DEFAULT_OPTS={position:"top-right",appendTo:".jgrowl-container",theme:"jGrowl-notification",life:2500,closeDuration:0,openDuration:0};module.exports=function(){function _class(){_classCallCheck(this,_class);var target=$(".jgrowl-container");if(!target.length){$("body").prepend($('<div class="jgrowl-container"></div>'))}}_createClass(_class,[{key:"notify",value:function notify(message){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};opts=_.extend(_.clone(DEFAULT_OPTS),opts);$.jGrowl(message,opts);$(".jGrowl").addClass("animated slideInDown");$(".jGrowl").removeClass("slideOutUp");clearTimeout(timeout);timeout=setTimeout(function(){$(".jGrowl").removeClass("slideInDown");$(".jGrowl").addClass("animated slideOutUp")},opts.life)}},{key:"info",value:function info(message){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.notify(message,_.extend(opts,{themeState:"info"}))}},{key:"success",value:function success(message){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.notify(message,_.extend(opts,{themeState:"success"}))}},{key:"warning",value:function warning(message){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.notify(message,_.extend(opts,{themeState:"warning"}))}},{key:"error",value:function error(message){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.notify(message,_.extend(opts,{themeState:"error"}))}}]);return _class}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.notImplemented=function(fnname){return function(){throw new Error(fnname+"(): No coreservices implementation for UI-Router is loaded.")}};var services={$q:undefined,$injector:undefined};exports.services=services},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),getRawTag=__webpack_require__(64),objectToString=__webpack_require__(65);var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},function(module,exports,__webpack_require__){var root=__webpack_require__(3);var Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8);var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(24);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(86);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var getParam=exports.getParam=function getParam(k){var params=$.deparam(window.location.search);return params[k]||params["?"+k]};var _updateSearchParams=exports._updateSearchParams=function _updateSearchParams(k,v){var search=window.location.search.slice(1);var params=$.deparam(search);params[k]=v;return $.param(params,true)};var setParam=exports.setParam=function setParam(k,v,forceReload){var search=_updateSearchParams(k,v);if(history.replaceState&&!forceReload){var url=window.location.pathname+"?"+search;window.history.replaceState({path:url},"",url)}else{window.location.search=search}}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isObjectLike=__webpack_require__(20);var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},function(module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(92));__export(__webpack_require__(332));__export(__webpack_require__(333));__export(__webpack_require__(334));__export(__webpack_require__(335));__export(__webpack_require__(345));__export(__webpack_require__(346));__export(__webpack_require__(347));__export(__webpack_require__(232));__export(__webpack_require__(227));__export(__webpack_require__(348));__export(__webpack_require__(351))},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(80),listCacheDelete=__webpack_require__(81),listCacheGet=__webpack_require__(82),listCacheHas=__webpack_require__(83),listCacheSet=__webpack_require__(84);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},function(module,exports,__webpack_require__){"use strict";var tmp={AG:{name:"Antigua and Barbuda",iso3:"ATG"},DZ:{name:"Algeria",iso3:"DZA"},AZ:{name:"Azerbaijan",iso3:"AZE"},AL:{name:"Albania",iso3:"ALB"},AM:{name:"Armenia",iso3:"ARM"},AO:{name:"Angola",iso3:"AGO"},AS:{name:"American Samoa",iso3:"ASM"},AR:{name:"Argentina",iso3:"ARG"},AU:{name:"Australia",iso3:"AUS"},BH:{name:"Bahrain",iso3:"BHR"},BB:{name:"Barbados",iso3:"BRB"},BM:{name:"Bermuda",iso3:"BMU"},BS:{name:"Bahamas",iso3:"BHS"},BD:{name:"Bangladesh",iso3:"BGD"},BZ:{name:"Belize",iso3:"BLZ"},BA:{name:"Bosnia and Herzegovina",iso3:"BIH"},BO:{name:"Bolivia",iso3:"BOL"},MM:{name:"Burma",iso3:"MMR"},BJ:{name:"Benin",iso3:"BEN"},SB:{name:"Solomon Islands",iso3:"SLB"},BR:{name:"Brazil",iso3:"BRA"},BG:{name:"Bulgaria",iso3:"BGR"},BN:{name:"Brunei Darussalam",iso3:"BRN"},CA:{name:"Canada",iso3:"CAN"},KH:{name:"Cambodia",iso3:"KHM"},LK:{name:"Sri Lanka",iso3:"LKA"},CG:{name:"Congo",iso3:"COG"},CD:{name:"Democratic Republic of the Congo",iso3:"COD"},BI:{name:"Burundi",iso3:"BDI"},CN:{name:"China",iso3:"CHN"},AF:{name:"Afghanistan",iso3:"AFG"},BT:{name:"Bhutan",iso3:"BTN"},CL:{name:"Chile",iso3:"CHL"},KY:{name:"Cayman Islands",iso3:"CYM"},CM:{name:"Cameroon",iso3:"CMR"},TD:{name:"Chad",iso3:"TCD"},KM:{name:"Comoros",iso3:"COM"},CO:{name:"Colombia",iso3:"COL"},CR:{name:"Costa Rica",iso3:"CRI"},CF:{name:"Central African Republic",iso3:"CAF"},CU:{name:"Cuba",iso3:"CUB"},CV:{name:"Cape Verde",iso3:"CPV"},CK:{name:"Cook Islands",iso3:"COK"},CY:{name:"Cyprus",iso3:"CYP"},DK:{name:"Denmark",iso3:"DNK"},DJ:{name:"Djibouti",iso3:"DJI"},DM:{name:"Dominica",iso3:"DMA"},DO:{name:"Dominican Republic",iso3:"DOM"},EC:{name:"Ecuador",iso3:"ECU"},EG:{name:"Egypt",iso3:"EGY"},IE:{name:"Ireland",iso3:"IRL"},GQ:{name:"Equatorial Guinea",iso3:"GNQ"},EE:{name:"Estonia",iso3:"EST"},ER:{name:"Eritrea",iso3:"ERI"},SV:{name:"El Salvador",iso3:"SLV"},ET:{name:"Ethiopia",iso3:"ETH"},AT:{name:"Austria",iso3:"AUT"},CZ:{name:"Czech Republic",iso3:"CZE"},GF:{name:"French Guiana",iso3:"GUF"},FI:{name:"Finland",iso3:"FIN"},FJ:{name:"Fiji",iso3:"FJI"},FK:{name:"Falkland Islands (Malvinas)",iso3:"FLK"},FM:{name:"Micronesia, Federated States of",iso3:"FSM"},PF:{name:"French Polynesia",iso3:"PYF"},FR:{name:"France",iso3:"FRA"},GM:{name:"Gambia",iso3:"GMB"},GA:{name:"Gabon",iso3:"GAB"},GE:{name:"Georgia",iso3:"GEO"},GH:{name:"Ghana",iso3:"GHA"},GD:{name:"Grenada",iso3:"GRD"},GL:{name:"Greenland",iso3:"GRL"},DE:{name:"Germany",iso3:"DEU"},GU:{name:"Guam",iso3:"GUM"},GR:{name:"Greece",iso3:"GRC"},GT:{name:"Guatemala",iso3:"GTM"},GN:{name:"Guinea",iso3:"GIN"},GY:{name:"Guyana",iso3:"GUY"},HT:{name:"Haiti",iso3:"HTI"},HN:{name:"Honduras",iso3:"HND"},HR:{name:"Croatia",iso3:"HRV"},HU:{name:"Hungary",iso3:"HUN"},IS:{name:"Iceland",iso3:"ISL"},IN:{name:"India",iso3:"IND"},IR:{name:"Iran (Islamic Republic of)",iso3:"IRN"},IL:{name:"Israel",iso3:"ISR"},IT:{name:"Italy",iso3:"ITA"},CI:{name:"Cote d'Ivoire",iso3:"CIV"},IQ:{name:"Iraq",iso3:"IRQ"},JP:{name:"Japan",iso3:"JPN"},JM:{name:"Jamaica",iso3:"JAM"},JO:{name:"Jordan",iso3:"JOR"},KE:{name:"Kenya",iso3:"KEN"},KG:{name:"Kyrgyzstan",iso3:"KGZ"},KP:{name:"Korea, Democratic People's Republic of",iso3:"PRK"},KI:{name:"Kiribati",iso3:"KIR"},KR:{name:"Korea, Republic of",iso3:"KOR"},KW:{name:"Kuwait",iso3:"KWT"},KZ:{name:"Kazakhstan",iso3:"KAZ"},LA:{name:"Lao People's Democratic Republic",iso3:"LAO"},LB:{name:"Lebanon",iso3:"LBN"},LV:{name:"Latvia",iso3:"LVA"},BY:{name:"Belarus",iso3:"BLR"},LT:{name:"Lithuania",iso3:"LTU"},LR:{name:"Liberia",iso3:"LBR"},SK:{name:"Slovakia",iso3:"SVK"},LI:{name:"Liechtenstein",iso3:"LIE"},LY:{name:"Libyan Arab Jamahiriya",iso3:"LBY"},MG:{name:"Madagascar",iso3:"MDG"},MQ:{name:"Martinique",iso3:"MTQ"},MN:{name:"Mongolia",iso3:"MNG"},MS:{name:"Montserrat",iso3:"MSR"},MK:{name:"The former Yugoslav Republic of Macedonia",iso3:"MKD"},ML:{name:"Mali",iso3:"MLI"},MA:{name:"Morocco",iso3:"MAR"},MU:{name:"Mauritius",iso3:"MUS"},MR:{name:"Mauritania",iso3:"MRT"},MT:{name:"Malta",iso3:"MLT"},OM:{name:"Oman",iso3:"OMN"},MV:{name:"Maldives",iso3:"MDV"},MX:{name:"Mexico",iso3:"MEX"},MY:{name:"Malaysia",iso3:"MYS"},MZ:{name:"Mozambique",iso3:"MOZ"},MW:{name:"Malawi",iso3:"MWI"},NC:{name:"New Caledonia",iso3:"NCL"},NU:{name:"Niue",iso3:"NIU"},NE:{name:"Niger",iso3:"NER"},AW:{name:"Aruba",iso3:"ABW"},AI:{name:"Anguilla",iso3:"AIA"},BE:{name:"Belgium",iso3:"BEL"},HK:{name:"Hong Kong",iso3:"HKG"},MP:{name:"Northern Mariana Islands",iso3:"MNP"},FO:{name:"Faroe Islands",iso3:"FRO"},AD:{name:"Andorra",iso3:"AND"},GI:{name:"Gibraltar",iso3:"GIB"},IM:{name:"Isle of Man",iso3:"IMN"},LU:{name:"Luxembourg",iso3:"LUX"},MO:{name:"Macau",iso3:"MAC"},MC:{name:"Monaco",iso3:"MCO"},PS:{name:"Palestine",iso3:"PSE"},ME:{name:"Montenegro",iso3:"MNE"},YT:{name:"Mayotte",iso3:"MYT"},AX:{name:"�land Islands",iso3:"ALA"},NF:{name:"Norfolk Island",iso3:"NFK"},CC:{name:"Cocos (Keeling) Islands",iso3:"CCK"},AQ:{name:"Antarctica",iso3:"ATA"},BV:{name:"Bouvet Island",iso3:"BVT"},TF:{name:"French Southern and Antarctic Lands",iso3:"ATF"},HM:{name:"Heard Island and McDonald Islands",iso3:"HMD"},IO:{name:"British Indian Ocean Territory",iso3:"IOT"},CX:{name:"Christmas Island",iso3:"CXR"},UM:{name:"United States Minor Outlying Islands",iso3:"UMI"},VU:{name:"Vanuatu",iso3:"VUT"},NG:{name:"Nigeria",iso3:"NGA"},NL:{name:"Netherlands",iso3:"NLD"},NO:{name:"Norway",iso3:"NOR"},NP:{name:"Nepal",iso3:"NPL"},NR:{name:"Nauru",iso3:"NRU"},SR:{name:"Suriname",iso3:"SUR"},NI:{name:"Nicaragua",iso3:"NIC"},NZ:{name:"New Zealand",iso3:"NZL"},PY:{name:"Paraguay",iso3:"PRY"},PE:{name:"Peru",iso3:"PER"},PK:{name:"Pakistan",iso3:"PAK"},PL:{name:"Poland",iso3:"POL"},PA:{name:"Panama",iso3:"PAN"},PT:{name:"Portugal",iso3:"PRT"},PG:{name:"Papua New Guinea",iso3:"PNG"},GW:{name:"Guinea-Bissau",iso3:"GNB"},QA:{name:"Qatar",iso3:"QAT"},RE:{name:"Reunion",iso3:"REU"},RO:{name:"Romania",iso3:"ROU"},MD:{name:"Republic of Moldova",iso3:"MDA"},PH:{name:"Philippines",iso3:"PHL"},PR:{name:"Puerto Rico",iso3:"PRI"},RU:{name:"Russia",iso3:"RUS"},RW:{name:"Rwanda",iso3:"RWA"},SA:{name:"Saudi Arabia",iso3:"SAU"},KN:{name:"Saint Kitts and Nevis",iso3:"KNA"},SC:{name:"Seychelles",iso3:"SYC"},ZA:{name:"South Africa",iso3:"ZAF"},LS:{name:"Lesotho",iso3:"LSO"},BW:{name:"Botswana",iso3:"BWA"},SN:{name:"Senegal",iso3:"SEN"},SI:{name:"Slovenia",iso3:"SVN"},SL:{name:"Sierra Leone",iso3:"SLE"},SG:{name:"Singapore",iso3:"SGP"},SO:{name:"Somalia",iso3:"SOM"},ES:{name:"Spain",iso3:"ESP"},LC:{name:"Saint Lucia",iso3:"LCA"},SD:{name:"Sudan",iso3:"SDN"},SE:{name:"Sweden",iso3:"SWE"},SY:{name:"Syrian Arab Republic",iso3:"SYR"},CH:{name:"Switzerland",iso3:"CHE"},TT:{name:"Trinidad and Tobago",iso3:"TTO"},TH:{name:"Thailand",iso3:"THA"},TJ:{name:"Tajikistan",iso3:"TJK"},TK:{name:"Tokelau",iso3:"TKL"},TO:{name:"Tonga",iso3:"TON"},TG:{name:"Togo",iso3:"TGO"},ST:{name:"Sao Tome and Principe",iso3:"STP"},TN:{name:"Tunisia",iso3:"TUN"},TR:{name:"Turkey",iso3:"TUR"},TV:{name:"Tuvalu",iso3:"TUV"},TM:{name:"Turkmenistan",iso3:"TKM"},TZ:{name:"United Republic of Tanzania",iso3:"TZA"},UG:{name:"Uganda",iso3:"UGA"},GB:{name:"United Kingdom",iso3:"GBR"},UA:{name:"Ukraine",iso3:"UKR"},US:{name:"United States",alias:"United States of America",iso3:"USA"},BF:{name:"Burkina Faso",iso3:"BFA"},UY:{name:"Uruguay",iso3:"URY"},UZ:{name:"Uzbekistan",iso3:"UZB"},VC:{name:"Saint Vincent and the Grenadines",iso3:"VCT"},VE:{name:"Venezuela",iso3:"VEN"},VG:{name:"British Virgin Islands",iso3:"VGB"},VN:{name:"Viet Nam",iso3:"VNM"},VI:{name:"United States Virgin Islands",iso3:"VIR"},NA:{name:"Namibia",iso3:"NAM"},WF:{name:"Wallis and Futuna Islands",iso3:"WLF"},WS:{name:"Samoa",iso3:"WSM"},SZ:{name:"Swaziland",iso3:"SWZ"},YE:{name:"Yemen",iso3:"YEM"},ZM:{name:"Zambia",iso3:"ZMB"},ZW:{name:"Zimbabwe",iso3:"ZWE"},ID:{name:"Indonesia",iso3:"IDN"},GP:{name:"Guadeloupe",iso3:"GLP"},AN:{name:"Netherlands Antilles",iso3:"ANT"},AE:{name:"United Arab Emirates",iso3:"ARE"},TL:{name:"Timor-Leste",iso3:"TLS"},PN:{name:"Pitcairn Islands",iso3:"PCN"},PW:{name:"Palau",iso3:"PLW"},MH:{name:"Marshall Islands",iso3:"MHL"},PM:{name:"Saint Pierre and Miquelon",iso3:"SPM"},SH:{name:"Saint Helena",iso3:"SHN"},SM:{name:"San Marino",iso3:"SMR"},TC:{name:"Turks and Caicos Islands",iso3:"TCA"},EH:{name:"Western Sahara",iso3:"ESH"},RS:{name:"Serbia",iso3:"SRB"},VA:{name:"Holy See (Vatican City)",iso3:"VAT"},SJ:{name:"Svalbard",iso3:"SJM"},MF:{name:"Saint Martin",iso3:"MAF"},BL:{name:"Saint Barthelemy",iso3:"BLM"},GG:{name:"Guernsey",iso3:"GGY"},JE:{name:"Jersey",iso3:"JEY"},GS:{name:"South Georgia South Sandwich Islands",iso3:"SGS"},TW:{name:"Taiwan",iso3:"TWN"}};Object.keys(tmp).forEach(function(code){tmp[code].code=code});module.exports=window.iso_countries=tmp;window.jur_mapping={AP:{name:"ARIPO Patents",z:10,countries:["BW","GH","GM","KE","LS","MW","MZ","NA","SL","TZ","UG","ZM","ZW"]},CS:{name:"Czechoslovakia",countries:["CZ"]},DD:{name:"German Democratic Republic",countries:["DE"]},EA:{name:"Eurasian Patents",z:20,countries:["AM","AZ","BY","KG","KZ","MD","RU","TJ","TM"]},EP:{name:"European Patents",z:15,countries:["AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MC","MK","MT","NL","NO","PL","PT","RO","SE","SI","SK","SM","SZ","TR"]},GC:{name:"GCC Patents",z:25,countries:["BH","KW","OM","QA","SA","AE"]},OA:{name:"OAPI Patents",z:5,countries:["BF","BJ","CF","CG","CI","CM","GA","GN","GQ","GW","ML","MR","NE","SN","TD"]},SU:{name:"Soviet Union",countries:["RU"]},WO:{name:"WO - WIPO",z:0,countries:["AE","AG","AL","AM","AO","AT","AU","AZ","BA","BB","BE","BF","BG","BH","BJ","BR","BW","BZ","CA","CF","CG","CH","CI","CL","CM","CN","CO","CR","CU","CY","CZ","DE","DK","DM","DO","DZ","EC","EE","EG","ES","FI","FR","GA","GB","GD","GE","GH","GM","GN","GQ","GR","GT","GW","HN","HR","HU","ID","IE","IL","IN","IS","IT","JP","KE","KG","KM","KN","KP","KR","KZ","LA","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MK","ML","MN","MR","MT","MW","MX","MY","MZ","NA","NE","NG","NI","NL","NO","NZ","OM","PE","PG","PH","PL","PT","RO","RS","RU","SC","SD","SE","SG","SI","SK","SL","SM","SN","ST","SV","SY","SZ","TD","TG","TH","TJ","TM","TN","TR","TT","TZ","UA","UG","US","UZ","VC","VN","ZA","ZM","ZW"]},YU:{name:"Yugoslavia/Serbia and Montenegro",countries:["RS","ME"]}}},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(19);var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({defaults:{maxWidth:1200,maxHeight:800,minWidth:300,fitToView:true,closeClick:false,openEffect:"none",closeEffect:"none"},initialize:function initialize(opts){this.dialogOpts=_.extend({},this.defaults,opts)},render:function render(content,onOpen){var view=this;var onOpenFn=onOpen||function(){};var afterShow=!_.isUndefined(this.dialogOpts.afterShow)?this.dialogOpts.afterShow:function(){window.initTooltips(this.$el)};var yesButton=this.dialogOpts.yesButton;var afterYesClose=this.dialogOpts.afterYesClose;var noButton=this.dialogOpts.noButton;var otherButtons=view.dialogOpts.otherButtons||[];var beforeShow=function beforeShow(){var $x=$(this.inner);view.$el=$x;if(!_.isUndefined(yesButton)){var $apply=$x.find(".apply").show();$apply.text(yesButton.text);$apply.on("click",function(e){if(yesButton.onClick){if(_.isUndefined(yesButton.validate)){doYes()}else if(!_.isUndefined(yesButton.validate)&&yesButton.validate(e,$($.fancybox.inner))){doYes()}}function doYes(){yesButton.onClick(e,$($.fancybox.inner));$.fancybox.close();if(!_.isUndefined(afterYesClose)){afterYesClose()}}})}if(!_.isUndefined(noButton)){var cancel=$x.find(".cancel").show();cancel.text(noButton.text);cancel.on("click",function(e){if(noButton.onClick)noButton.onClick(e,$($.fancybox.inner));$.fancybox.close()})}otherButtons.forEach(function(btn){var button=$('<button style="margin-left: .5em;" class="btn btn-sm"></button>');$x.find(".apply").after(button);button.text(btn.text);button.on("click",function(e){$.fancybox.close();if(btn.onClick)btn.onClick(e,$($.fancybox.inner))})});$x.on("keydown",function(e){if(e.which===$.ui.keyCode.ESCAPE){$.fancybox.close()}});onOpenFn($x)};$.fancybox(_.extend({},this.dialogOpts,{beforeShow:beforeShow,content:ich["fancyboxTemplate"]({content:$("<div></div>").append($(content)).html(),title:this.dialogOpts.title}),title:undefined,afterShow:afterShow}))},remove:function remove(){}})},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(97),baseKeys=__webpack_require__(158),isArrayLike=__webpack_require__(31);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=keys},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(32),baseAssignValue=__webpack_require__(42);function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}module.exports=copyObject},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8),root=__webpack_require__(3);var Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(45),isLength=__webpack_require__(59);function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(42),eq=__webpack_require__(24);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},function(module,exports){module.exports="5.16.0\n"},function(module,exports,__webpack_require__){var isArray=__webpack_require__(6),isKey=__webpack_require__(43),stringToPath=__webpack_require__(66),toString=__webpack_require__(90);function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(69),mapCacheDelete=__webpack_require__(85),mapCacheGet=__webpack_require__(87),mapCacheHas=__webpack_require__(88),mapCacheSet=__webpack_require__(89);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=__webpack_require__(2);var rejectFactory_1=__webpack_require__(93);var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var transition_1=__webpack_require__(113);var resolvable_1=__webpack_require__(95);function maxLength(max,str){if(str.length<=max)return str;return str.substr(0,max-3)+"..."}exports.maxLength=maxLength;function padString(length,str){while(str.length<length)str+=" ";return str}exports.padString=padString;function kebobString(camelCase){return camelCase.replace(/^([A-Z])/,function($1){return $1.toLowerCase()}).replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}exports.kebobString=kebobString;function _toJson(obj){return JSON.stringify(obj)}function _fromJson(json){return predicates_1.isString(json)?JSON.parse(json):json}function promiseToString(p){return"Promise("+JSON.stringify(p)+")"}function functionToString(fn){var fnStr=fnToString(fn);var namedFunctionMatch=fnStr.match(/^(function [^ ]+\([^)]*\))/);var toStr=namedFunctionMatch?namedFunctionMatch[1]:fnStr;var fnName=fn["name"]||"";if(fnName&&toStr.match(/function \(/)){return"function "+fnName+toStr.substr(9)}return toStr}exports.functionToString=functionToString;function fnToString(fn){var _fn=predicates_1.isArray(fn)?fn.slice(-1)[0]:fn;return _fn&&_fn.toString()||"undefined"}exports.fnToString=fnToString;var stringifyPatternFn=null;var stringifyPattern=function(value){var isRejection=rejectFactory_1.Rejection.isRejectionPromise;stringifyPatternFn=stringifyPatternFn||hof_1.pattern([[hof_1.not(predicates_1.isDefined),hof_1.val("undefined")],[predicates_1.isNull,hof_1.val("null")],[predicates_1.isPromise,hof_1.val("[Promise]")],[isRejection,function(x){return x._transitionRejection.toString()}],[hof_1.is(rejectFactory_1.Rejection),hof_1.invoke("toString")],[hof_1.is(transition_1.Transition),hof_1.invoke("toString")],[hof_1.is(resolvable_1.Resolvable),hof_1.invoke("toString")],[predicates_1.isInjectable,functionToString],[hof_1.val(true),common_1.identity]]);return stringifyPatternFn(value)};function stringify(o){var seen=[];function format(val){if(predicates_1.isObject(val)){if(seen.indexOf(val)!==-1)return"[circular ref]";seen.push(val)}return stringifyPattern(val)}return JSON.stringify(o,function(key,val){return format(val)}).replace(/\\"/g,'"')}exports.stringify=stringify;exports.beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);if(idx===-1)return[str,""];return[str.substr(0,idx),str.substr(idx+1)]}};function splitOnDelim(delim){var re=new RegExp("("+delim+")","g");return function(str){return str.split(re).filter(common_1.identity)}}exports.splitOnDelim=splitOnDelim;function joinNeighborsR(acc,x){if(predicates_1.isString(common_1.tail(acc))&&predicates_1.isString(x))return acc.slice(0,-1).concat(common_1.tail(acc)+x);return common_1.pushR(acc,x)}exports.joinNeighborsR=joinNeighborsR},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(2);var strings_1=__webpack_require__(36);function uiViewString(uiview){if(!uiview)return"ui-view (defunct)";var state=uiview.creationContext?uiview.creationContext.name||"(root)":"(none)";return"[ui-view#"+uiview.id+" "+uiview.$type+":"+uiview.fqn+" ("+uiview.name+"@"+state+")]"}var viewConfigString=function(viewConfig){var view=viewConfig.viewDecl;var state=view.$context.name||"(root)";return"[View#"+viewConfig.$id+" from '"+state+"' state]: target ui-view: '"+view.$uiViewName+"@"+view.$uiViewContextAnchor+"'"};function normalizedCat(input){return predicates_1.isNumber(input)?Category[input]:Category[Category[input]]}var Category;(function(Category){Category[Category["RESOLVE"]=0]="RESOLVE";Category[Category["TRANSITION"]=1]="TRANSITION";Category[Category["HOOK"]=2]="HOOK";Category[Category["UIVIEW"]=3]="UIVIEW";Category[Category["VIEWCONFIG"]=4]="VIEWCONFIG"})(Category=exports.Category||(exports.Category={}));var _tid=hof_1.parse("$id");var _rid=hof_1.parse("router.$id");var transLbl=function(trans){return"Transition #"+_tid(trans)+"-"+_rid(trans)};var Trace=function(){function Trace(){this._enabled={};this.approximateDigests=0}Trace.prototype._set=function(enabled,categories){var _this=this;if(!categories.length){categories=Object.keys(Category).map(function(k){return parseInt(k,10)}).filter(function(k){return!isNaN(k)}).map(function(key){return Category[key]})}categories.map(normalizedCat).forEach(function(category){return _this._enabled[category]=enabled})};Trace.prototype.enable=function(){var categories=[];for(var _i=0;_i<arguments.length;_i++){categories[_i]=arguments[_i]}this._set(true,categories)};Trace.prototype.disable=function(){var categories=[];for(var _i=0;_i<arguments.length;_i++){categories[_i]=arguments[_i]}this._set(false,categories)};Trace.prototype.enabled=function(category){return!!this._enabled[normalizedCat(category)]};Trace.prototype.traceTransitionStart=function(trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": Started  -> "+strings_1.stringify(trans))};Trace.prototype.traceTransitionIgnored=function(trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": Ignored  <> "+strings_1.stringify(trans))};Trace.prototype.traceHookInvocation=function(step,trans,options){if(!this.enabled(Category.HOOK))return;var event=hof_1.parse("traceData.hookType")(options)||"internal",context=hof_1.parse("traceData.context.state.name")(options)||hof_1.parse("traceData.context")(options)||"unknown",name=strings_1.functionToString(step.registeredHook.callback);console.log(transLbl(trans)+":   Hook -> "+event+" context: "+context+", "+strings_1.maxLength(200,name))};Trace.prototype.traceHookResult=function(hookResult,trans,transitionOptions){if(!this.enabled(Category.HOOK))return;console.log(transLbl(trans)+":   <- Hook returned: "+strings_1.maxLength(200,strings_1.stringify(hookResult)))};Trace.prototype.traceResolvePath=function(path,when,trans){if(!this.enabled(Category.RESOLVE))return;console.log(transLbl(trans)+":         Resolving "+path+" ("+when+")")};Trace.prototype.traceResolvableResolved=function(resolvable,trans){if(!this.enabled(Category.RESOLVE))return;console.log(transLbl(trans)+":               <- Resolved  "+resolvable+" to: "+strings_1.maxLength(200,strings_1.stringify(resolvable.data)))};Trace.prototype.traceError=function(reason,trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": <- Rejected "+strings_1.stringify(trans)+", reason: "+reason)};Trace.prototype.traceSuccess=function(finalState,trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": <- Success  "+strings_1.stringify(trans)+", final state: "+finalState.name)};Trace.prototype.traceUIViewEvent=function(event,viewData,extra){if(extra===void 0){extra=""}if(!this.enabled(Category.UIVIEW))return;console.log("ui-view: "+strings_1.padString(30,event)+" "+uiViewString(viewData)+extra)};Trace.prototype.traceUIViewConfigUpdated=function(viewData,context){if(!this.enabled(Category.UIVIEW))return;this.traceUIViewEvent("Updating",viewData," with ViewConfig from context='"+context+"'")};Trace.prototype.traceUIViewFill=function(viewData,html){if(!this.enabled(Category.UIVIEW))return;this.traceUIViewEvent("Fill",viewData," with: "+strings_1.maxLength(200,html))};Trace.prototype.traceViewSync=function(pairs){if(!this.enabled(Category.VIEWCONFIG))return;var mapping=pairs.map(function(_a){var uiViewData=_a[0],config=_a[1];var uiView=uiViewData.$type+":"+uiViewData.fqn;var view=config&&config.viewDecl.$context.name+": "+config.viewDecl.$name+" ("+config.viewDecl.$type+")";return{"ui-view fqn":uiView,"state: view name":view}}).sort(function(a,b){return a["ui-view fqn"].localeCompare(b["ui-view fqn"])});console.table(mapping)};Trace.prototype.traceViewServiceEvent=function(event,viewConfig){if(!this.enabled(Category.VIEWCONFIG))return;console.log("VIEWCONFIG: "+event+" "+viewConfigString(viewConfig))};Trace.prototype.traceViewServiceUIViewEvent=function(event,viewData){if(!this.enabled(Category.VIEWCONFIG))return;console.log("VIEWCONFIG: "+event+" "+uiViewString(viewData))};return Trace}();exports.Trace=Trace;var trace=new Trace;exports.trace=trace},function(module,exports){module.exports=d3},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},function(module,exports){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype},function(module,exports,__webpack_require__){"use strict";module.exports=function(name){var file=window.encodeURIComponent(name.toUpperCase().replace(/[,&'().]/g,"").replace(/-/g," ").replace(/[\s]+/g," "));return window.UI_CONFIG.institutionDataLocation+"/public/logos/"+file+".png"}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(61);function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},function(module,exports,__webpack_require__){var isArray=__webpack_require__(6),isSymbol=__webpack_require__(19);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}module.exports=isKey},function(module,exports,__webpack_require__){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(exports,__webpack_require__(51))},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isObject=__webpack_require__(9);var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},function(module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var TargetState=function(){function TargetState(_identifier,_definition,_params,_options){if(_options===void 0){_options={}}this._identifier=_identifier;this._definition=_definition;this._options=_options;this._params=_params||{}}TargetState.prototype.name=function(){return this._definition&&this._definition.name||this._identifier};TargetState.prototype.identifier=function(){return this._identifier};TargetState.prototype.params=function(){return this._params};TargetState.prototype.$state=function(){return this._definition};TargetState.prototype.state=function(){return this._definition&&this._definition.self};TargetState.prototype.options=function(){return this._options};TargetState.prototype.exists=function(){return!!(this._definition&&this._definition.self)};TargetState.prototype.valid=function(){return!this.error()};TargetState.prototype.error=function(){var base=this.options().relative;if(!this._definition&&!!base){var stateName=base.name?base.name:base;return"Could not resolve '"+this.name()+"' from state '"+stateName+"'"}if(!this._definition)return"No such state '"+this.name()+"'";if(!this._definition.self)return"State '"+this.name()+"' has an invalid definition"};TargetState.prototype.toString=function(){return"'"+this.name()+"'"+common_1.toJson(this.params())};TargetState.isDef=function(obj){return obj&&obj.state&&(predicates_1.isString(obj.state)||predicates_1.isString(obj.state.name))};return TargetState}();exports.TargetState=TargetState},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(122),stubArray=__webpack_require__(102);var objectProto=Object.prototype;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};module.exports=getSymbols},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(126);function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}module.exports=cloneArrayBuffer},function(module,exports,__webpack_require__){"use strict";module.exports=["#cc3233","#cc8732","#bccc32","#68cc32","#32cc51","#32cca5","#329ecc","#3249cc","#7032cc","#c432cc"]},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){var castPath=__webpack_require__(34),toKey=__webpack_require__(25);function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}module.exports=baseGet},function(module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ng_from_import=__webpack_require__(217);var ng_from_global=angular;exports.ng=ng_from_import&&ng_from_import.module?ng_from_import:ng_from_global},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var TransitionHookPhase;(function(TransitionHookPhase){TransitionHookPhase[TransitionHookPhase["CREATE"]=0]="CREATE";TransitionHookPhase[TransitionHookPhase["BEFORE"]=1]="BEFORE";TransitionHookPhase[TransitionHookPhase["RUN"]=2]="RUN";TransitionHookPhase[TransitionHookPhase["SUCCESS"]=3]="SUCCESS";TransitionHookPhase[TransitionHookPhase["ERROR"]=4]="ERROR"})(TransitionHookPhase=exports.TransitionHookPhase||(exports.TransitionHookPhase={}));var TransitionHookScope;(function(TransitionHookScope){TransitionHookScope[TransitionHookScope["TRANSITION"]=0]="TRANSITION";TransitionHookScope[TransitionHookScope["STATE"]=1]="STATE"})(TransitionHookScope=exports.TransitionHookScope||(exports.TransitionHookScope={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(2);var coreservices_1=__webpack_require__(11);var paramType_1=__webpack_require__(148);var hasOwn=Object.prototype.hasOwnProperty;var isShorthand=function(cfg){return["value","type","squash","array","dynamic"].filter(hasOwn.bind(cfg||{})).length===0};var DefType;(function(DefType){DefType[DefType["PATH"]=0]="PATH";DefType[DefType["SEARCH"]=1]="SEARCH";DefType[DefType["CONFIG"]=2]="CONFIG"})(DefType=exports.DefType||(exports.DefType={}));function unwrapShorthand(cfg){cfg=isShorthand(cfg)&&{value:cfg}||cfg;getStaticDefaultValue["__cacheable"]=true;function getStaticDefaultValue(){return cfg.value}return common_1.extend(cfg,{$$fn:predicates_1.isInjectable(cfg.value)?cfg.value:getStaticDefaultValue})}function getType(cfg,urlType,location,id,paramTypes){if(cfg.type&&urlType&&urlType.name!=="string")throw new Error("Param '"+id+"' has two type configurations.");if(cfg.type&&urlType&&urlType.name==="string"&&paramTypes.type(cfg.type))return paramTypes.type(cfg.type);if(urlType)return urlType;if(!cfg.type){var type=location===DefType.CONFIG?"any":location===DefType.PATH?"path":location===DefType.SEARCH?"query":"string";return paramTypes.type(type)}return cfg.type instanceof paramType_1.ParamType?cfg.type:paramTypes.type(cfg.type)}function getSquashPolicy(config,isOptional,defaultPolicy){var squash=config.squash;if(!isOptional||squash===false)return false;if(!predicates_1.isDefined(squash)||squash==null)return defaultPolicy;if(squash===true||predicates_1.isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];replace=predicates_1.isArray(config.replace)?config.replace:[];if(predicates_1.isString(squash))replace.push({from:squash,to:undefined});configuredKeys=common_1.map(replace,hof_1.prop("from"));return common_1.filter(defaultPolicy,function(item){return configuredKeys.indexOf(item.from)===-1}).concat(replace)}var Param=function(){function Param(id,type,config,location,urlMatcherFactory){config=unwrapShorthand(config);type=getType(config,type,location,id,urlMatcherFactory.paramTypes);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,location===DefType.SEARCH):type;var isOptional=config.value!==undefined||location===DefType.SEARCH;var dynamic=predicates_1.isDefined(config.dynamic)?!!config.dynamic:!!type.dynamic;var raw=predicates_1.isDefined(config.raw)?!!config.raw:!!type.raw;var squash=getSquashPolicy(config,isOptional,urlMatcherFactory.defaultSquashPolicy());var replace=getReplace(config,arrayMode,isOptional,squash);var inherit=predicates_1.isDefined(config.inherit)?!!config.inherit:!!type.inherit;function getArrayMode(){var arrayDefaults={array:location===DefType.SEARCH?"auto":false};var arrayParamNomenclature=id.match(/\[\]$/)?{array:true}:{};return common_1.extend(arrayDefaults,arrayParamNomenclature,config).array}common_1.extend(this,{id:id,type:type,location:location,isOptional:isOptional,dynamic:dynamic,raw:raw,squash:squash,replace:replace,inherit:inherit,array:arrayMode,config:config})}Param.prototype.isDefaultValue=function(value){return this.isOptional&&this.type.equals(this.value(),value)};Param.prototype.value=function(value){var _this=this;var getDefaultValue=function(){if(_this._defaultValueCache)return _this._defaultValueCache.defaultValue;if(!coreservices_1.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=coreservices_1.services.$injector.invoke(_this.config.$$fn);if(defaultValue!==null&&defaultValue!==undefined&&!_this.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+_this.id+"' is not an instance of ParamType ("+_this.type.name+")");if(_this.config.$$fn["__cacheable"]){_this._defaultValueCache={defaultValue:defaultValue}}return defaultValue};var replaceSpecialValues=function(val){for(var _i=0,_a=_this.replace;_i<_a.length;_i++){var tuple=_a[_i];if(tuple.from===val)return tuple.to}return val};value=replaceSpecialValues(value);return predicates_1.isUndefined(value)?getDefaultValue():this.type.$normalize(value)};Param.prototype.isSearch=function(){return this.location===DefType.SEARCH};Param.prototype.validates=function(value){if((predicates_1.isUndefined(value)||value===null)&&this.isOptional)return true;var normalized=this.type.$normalize(value);if(!this.type.is(normalized))return false;var encoded=this.type.encode(normalized);return!(predicates_1.isString(encoded)&&!this.type.pattern.exec(encoded))};Param.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"};Param.values=function(params,values){if(values===void 0){values={}}var paramValues={};for(var _i=0,params_1=params;_i<params_1.length;_i++){var param=params_1[_i];paramValues[param.id]=param.value(values[param.id])}return paramValues};Param.changed=function(params,values1,values2){if(values1===void 0){values1={}}if(values2===void 0){values2={}}return params.filter(function(param){return!param.type.equals(values1[param.id],values2[param.id])})};Param.equals=function(params,values1,values2){if(values1===void 0){values1={}}if(values2===void 0){values2={}}return Param.changed(params,values1,values2).length===0};Param.validates=function(params,values){if(values===void 0){values={}}return params.map(function(param){return param.validates(values[param.id])}).reduce(common_1.allTrueR,true)};return Param}();exports.Param=Param},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={"author.display_name.keyword":{terms:{field:"author.display_name.keyword"}},"source.title":{terms:{field:"source.title.keyword"}},"author.affiliation.grid.address.country_code":{terms:{field:"author.affiliation.grid.address.country_code",size:100}},"source.asjc_subject":{terms:{field:"source.asjc_subject.keyword",size:20}},"mesh_term.mesh_heading":{terms:{field:"mesh_term.mesh_heading",size:20}},"chemical.substance_name":{terms:{field:"chemical.substance_name.keyword"}},citation_id_type:{terms:{field:"citation_id_type"}},field_of_study:{terms:{field:"field_of_study"}},"conference.name":{terms:{field:"conference.name.keyword"}},"author.affiliation.name.keyword":{terms:{field:"author.affiliation.name.keyword"}},keyword:{terms:{field:"keyword",size:20}},publication_type:{terms:{field:"publication_type"}},"funding.organisation.keyword":{terms:{field:"funding.organisation.keyword"}},dates:{date_histogram:{field:"date_published_sort",interval:"year",min_doc_count:1,format:"yyyy"}},"open_access.colour":{terms:{field:"open_access.colour",size:20}},"open_access.license":{terms:{field:"open_access.license",size:20}},is_open_access:{terms:{field:"is_open_access"}}}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(3),stubFalse=__webpack_require__(155);var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer}).call(exports,__webpack_require__(28)(module))},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},function(module,exports){module.exports=[{key:"lens_id",camelKey:"lensId",excludedAnalysis:true,label:"Lens Id",example:"186-488-232-022-055",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"title",camelKey:"title",label:"Title",example:'"Fidget Spinner"',definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"type",camelKey:"docType",label:"Document Type",example:'"Granted Patent"',definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"abstract",camelKey:"abstract",excludedAnalysis:true,label:"Abstract",example:'"Super Conductor"',definition:"Searches the patent abstract text",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"has_full_text",camelKey:"hasFullText",label:"Has Full Text",example:"true",definition:"Indicates if the full text is available for the patent document",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:true,excludedTips:false},{key:"full_text",camelKey:"fullText",excludedAnalysis:true,label:"Full Text",example:"robot",definition:"Searches the full text of the patent",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"claims",camelKey:"claims",excludedAnalysis:true,label:"Claims",example:"semiconductor",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"applicant",camelKey:"applicants",label:"Applicants",example:'"Smith David"',definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"owner",camelKey:"owners",excludedAnalysis:true,label:"Owners (US)",example:'"Sony Ltd"',definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"inventor",camelKey:"inventors",excludedAnalysis:true,label:"Inventors",example:"Sally",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"earliest_priority_date",camelKey:"earliestPriorityDate",label:"Earliest Priority Date",example:"20090522",definition:"",caseSensitive:"",filterGroup:"Date Range",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"filing_date",camelKey:"filingDate",label:"Filing Date",example:"20090522",definition:"",caseSensitive:"",filterGroup:"Date Range",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"pub_date",camelKey:"publicationDate",label:"Publication Date",example:"20090522",definition:"",caseSensitive:"",filterGroup:"Date Range",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"pub_year",camelKey:"pubYear",excludedAnalysis:true,label:"Publications By Year",example:"2018",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"jurisdiction",camelKey:"jurisdiction",label:"Jurisdiction",example:"US",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"kind",camelKey:"kindCode",label:"Kind",example:"A1",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"pub_key",camelKey:"publicationKey",label:"Pub Key",example:"US_2013_0227762_A1",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"pub_num",camelKey:"pubNum",excludedAnalysis:true,label:"Pub Num",example:'"2013/0227762"',definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"family_jurisdiction",camelKey:"familyJurisdiction",excludedAnalysis:true,label:"Family Jurisdiction",example:"(US OR EP)",definition:"",caseSensitive:"",filterGroup:"Jurisdiction",filterTooltip:"",group:"Family","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"family_of_pub_key",camelKey:"familyKeys",excludedAnalysis:true,label:"Family Of Pub Key",example:"US_6408520_B1",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Family","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"family_size",camelKey:"familySize",label:"Family Size",example:"[4 TO 6]",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Family","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"simple_family_publication_key",camelKey:"simpleFamilyKeys",excludedAnalysis:true,label:"Simple Family Keys",example:"US",definition:"",caseSensitive:"",filterGroup:"Jurisdiction",filterTooltip:"",group:"Family","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"simple_family_of_pub_key",camelKey:"simpleFamilyOfPubKey",excludedAnalysis:true,label:"Simple Family Of Pub Key",example:"US_6408520_B1",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Family","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"simple_family_size",camelKey:"simpleFamilySize",label:"Simple Family Size",example:"3",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Family","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"classification_cpc",camelKey:"cpcClassifications",excludedAnalysis:true,label:"CPC Classifications",example:"H01L2924/00",definition:"CPC patent classification codes",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Classification","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"classification_ipcr",camelKey:"ipcrClassifications",excludedAnalysis:true,label:"IPCR Classifications",example:"H01L21/768",definition:"IPCR patent classification codes",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Classification","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"classification_nat",camelKey:"natClassifications",excludedAnalysis:true,label:"US Classifications",example:"221/220",definition:"US patent classification codes",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Classification","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"citation_id",camelKey:"externalCitationsIds",excludedAnalysis:true,label:"Citation ID",example:"10.1038/nature03090",definition:"The external identifier(s) for cited scholarly works (DOI, PubMed ID, PubMed Central ID or Microsoft Aacademic ID)",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"cited_by_patent_count",camelKey:"citedByPatentCount",label:"Cited By Patent Count",example:"5",definition:"Number of patents documents citing a patent",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"cites_patent_count",camelKey:"citesPatentCount",excludedAnalysis:true,label:"Cites Patent Count",example:"5",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"cites_patent_publication_key",camelKey:"citesPatentKeys",excludedAnalysis:true,label:"Cites Patent Pub Key",example:"US_7128866_B1",definition:"Patent documents citing US_7128866_B1",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"citing_orcid_works",camelKey:"citingOrcidWorks",excludedAnalysis:true,label:"Citing Orcid Works",example:"",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"non_patent_citation",camelKey:"nonPatentCitations",excludedAnalysis:true,label:"Non Patent Citation",example:'"journal of medicininal chemistry"',definition:"The original non patent citation string",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"npl_lens_id",camelKey:"nplLensId",excludedAnalysis:true,label:"NPL Lens ID",example:"6592954449518",definition:"Non-Patent Literature Lens ID (i.e. Scholarly Work)",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:true,excludedTips:false},{key:"non_patent_citation_count",camelKey:"nonPatentCitationCount",label:"Cites Scholarly Works Count",example:"13",definition:"The number of scholalry works cited by a patent",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"seq_exists",camelKey:"seqExists",label:"Sequence Exists",example:"true",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Sequences","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"sequence_type",camelKey:"sequenceType",excludedAnalysis:true,label:"Sequence Type",example:"N",definition:"The type of sequence e.g. N - nucleotide, P - peptide",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Sequences","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"sequence_count",camelKey:"seqCount",label:"Sequence Count",example:"[2 TO 3]",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Sequences","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"sequence_length",camelKey:"sequenceLength",excludedAnalysis:true,label:"Sequence Length",example:"[1 TO 100]",definition:"",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Sequences","group tooltip":"",type:"PATENT",excludedSearch:false,excludedTips:false},{key:"lens_id",camelKey:"",label:"Lens Id",example:"186-488-232-022-055",definition:"Every document in the Lens has a unique 15-digit identifier called a Lens ID",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"title",camelKey:"",label:"Title",example:'"Fidget Spinner"',definition:"Title of the scholarly work",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"abstract",camelKey:"",label:"Abstract",example:'"Super Conductor"',definition:"Searches the scholarly work abstract text",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"fulltext",camelKey:"",label:"Full Text",example:"Malaria",definition:"Searches the full test of the scholarly work",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"date_published",camelKey:"",label:"Date Published",example:"2009-05-22",definition:"Date of publication",fieldType:"date",caseSensitive:"",filterGroup:"Date Range",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"year_published",camelKey:"",label:"Year Published",example:"1999",definition:"Year of publication",fieldType:"integer",caseSensitive:"",filterGroup:"Date Range",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"publication_type",camelKey:"",label:"Publication Type",example:'"journal article"',definition:"Publication Type (eg. Journal Article, Conference Proceedings, Book, etc.)",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Publication Type",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"publication_supplementary_type",camelKey:"",label:"Publication Supplementary Type",example:"Review",definition:"Supplementary publication type",fieldType:"keyword",caseSensitive:"",filterGroup:"Publication Type",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"citation_id_type",camelKey:"",label:"External ID Type",example:'"doi"',definition:'The type(s) of extrenal identifiers for the scholarly work record (e.g. Crossref: "doi", Microsoft Academic: "magid", PubMed: "pmid", PubMed Central: "pmcid", CORE: "core")',fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Data Source",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"citation_id",camelKey:"",label:"External ID",example:"10.1143/jjap.42.1517",definition:"The external identifier(s) for a scholarly work (DOI, PubMed ID, PubMed Central ID, Microsoft Aacademic ID or CORE)",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"issue",camelKey:"",label:"Issue",example:"3",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"volume",camelKey:"",label:"Volume",example:"86",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"end_page",camelKey:"",label:"End Page",example:"",definition:"",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"start_page",camelKey:"",label:"Start Page",example:"",definition:"",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"has_abstract",camelKey:"",label:"Has Abstract",example:"",definition:"",fieldType:"boolean",caseSensitive:"",filterGroup:"Flags",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"has_affiliation",camelKey:"",label:"Has Affiliation",example:"",definition:"",fieldType:"boolean",caseSensitive:"",filterGroup:"Flags",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"has_conflicting_metadata",camelKey:"",label:"Has Conflicting Metadata",example:"",definition:"",fieldType:"boolean",caseSensitive:"",filterGroup:"Flags",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"has_keyword",camelKey:"",label:"Has Keyword",example:"",definition:"",fieldType:"boolean",caseSensitive:"",filterGroup:"Flags",filterTooltip:"",group:"General","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"author.display_name",camelKey:"",label:"Author Display Name",example:'"David Smith"',definition:"The author's full name (first name, middle name/initial, last name)",fieldType:"text",caseSensitive:"FALSE",filterGroup:"Authors",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"author.display_name.keyword",camelKey:"",label:"Author Display Name",example:'"David Smith"',definition:"The author's full name (first name, middle name/initial, last name)",fieldType:"keyword",caseSensitive:"",filterGroup:"Authors",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"author.first_name",camelKey:"",label:"Author First Name",example:"David",definition:"The author's first name",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"author.last_name",camelKey:"",label:"Author Last Name",example:"Smith",definition:"The author's last name",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"author.initials",camelKey:"",label:"Author Initials",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"author.collective_name",camelKey:"",label:"Author Collective Name",example:"",definition:"",fieldType:"text",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"author.affiliation.name",camelKey:"",label:"Author Affiliation Name",example:'"School of Engineering and Applied Sciences, Harvard University"',definition:"The author's affiliated institution and address",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"author.normalised_name",camelKey:"",label:"Author Normalised Name",example:"",definition:"",fieldType:"text",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Authors","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"reference.id",camelKey:"",label:"Cites",example:"6592954449518",definition:"The numeric Lens ID of a scholalry work cited in the reference list of other scholarly works.",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"reference_count",camelKey:"",label:"Reference count",example:"29",definition:"The number of works in the reference list of a scholarly work",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"referenced_by_count",camelKey:"",label:"Citing Scholarly Works",example:"",definition:"The number of scholarly works that cite this scholarly work",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"referenced_by_patent.lens_id",camelKey:"",label:"Referenced By Patent Lens Id",example:"049-552-240-321-916",definition:"Scholarly works that are cited by a given patent(s).",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"referenced_by_patent_count",camelKey:"",label:"Citing Patents",example:"135",definition:"The number of patents that cite a scholarly work",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"crossref_reference_count",camelKey:"",label:"CrossRef Reference Count",example:"32",definition:"",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"crossref_referenced_by_count",camelKey:"",label:"CrossRef Referenced-By Count",example:"75",definition:"The number of citing works in CrossRef",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"is_referenced_by_patent",camelKey:"",label:"Is Referenced By Patent",example:"true",definition:"Indicates if the scholarly work has been cited by a patent document.",fieldType:"boolean",caseSensitive:"TRUE",filterGroup:"Flags",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"reference.text",camelKey:"",label:"Reference Text",example:'"N Engl J Med. 2004 Aug 26;351(9):893-901"',definition:"The the original text string in the references",fieldType:"text",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"referenced_by_patent.lens_id_num",camelKey:"",label:"Referenced By Patent Lens Id Num",example:"18648823202205",definition:"Scholarly works that are cited by a given patent(s). Uses the numeric value of Lens ID (see https://support.lens.org/help-resources/basic-help/the-lens-id/)",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"referenced_by_patent_hash",camelKey:"",label:"Referenced By Patent Hash",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Citations","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"source.title",camelKey:"",label:"Source Title",example:'"Journal of Molecular Biology"',definition:"The name of source publication in which the scholarly work appears e.g. Journal name, Book title, Confernce proceedings, etc.",fieldType:"text",caseSensitive:"FALSE",filterGroup:"Source",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"source.publisher",camelKey:"",label:"Source Publisher",example:'"Academic Press Inc."',definition:"The publisher of the source publication",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"source.publisher.keyword",camelKey:"",label:"Source Publisher",example:'"Academic Press Inc."',definition:"The publisher of the source publication",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"source.country",camelKey:"",label:"Source Country",example:'"United States"',definition:"The publisher's country",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"source.asjc_code",camelKey:"",label:"Source ASJC Code",example:"2105",definition:"The All Science Journal Classification (ASJC) code",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"source.issn",camelKey:"",label:"Source Issn",example:'"00222836"',definition:"The International Standard Serial Number of the source publication, without hyphenation",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"source.nlmid",camelKey:"",label:"Source Nlmid",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"source.ssid",camelKey:"",label:"Source Ssid",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"source.type",camelKey:"",label:"Source Type",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Source","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"field_of_study",camelKey:"",label:"Field of Study",example:"Medicine",definition:"Microsoft Academic determines Field of study based on machine learning parsing of all accessible text in a record",fieldType:"keyword",caseSensitive:"FALSE",filterGroup:"Subject Matter",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"has_field_of_study",camelKey:"",label:"Has Field of Study",example:"true",definition:"Flags if the scholarly work has a Field of Study",fieldType:"boolean",caseSensitive:"TRUE",filterGroup:"Flags",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"source.asjc_subject",camelKey:"",label:"Subject",example:'"Molecular Biology"',definition:"Subject is derived from journals descriptions in Crossref metadata based on the Science Journal Classification Codes",fieldType:"text",caseSensitive:"FALSE",filterGroup:"Subject Matter",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"keyword",camelKey:"",label:"Keyword",example:"Malaria",definition:"",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Subject Matter",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"chemical.mesh_ui",camelKey:"",label:"Chemical Mesh ID",example:"D000953",definition:"",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"chemical.registry_number",camelKey:"",label:"Chemical Registry Number",example:"2461-62-3",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"chemical.substance_name",camelKey:"",label:"Chemical Substance Name",example:"Calcium",definition:"Name of the chemical substance. Substance reflects the chemical field listed in PubMed records",fieldType:"text",caseSensitive:"FALSE",filterGroup:"Subject Matter",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"has_chemical",camelKey:"",label:"Has Chemical",example:"true",definition:"Indicates if the scholarly work has an associated chemical substance ",fieldType:"boolean",caseSensitive:"TRUE",filterGroup:"Flags",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"mesh_term.mesh_heading",camelKey:"",label:"MeSH Heading",example:'"Amino Acid Sequence"',definition:"MeSH terms are the National Library of Medicine’s controlled vocabulary or medical subject headings assigned to PubMed entries. NB MeSH Headings are case sensitive e.g. Calcium not calcium.",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Subject Matter",filterTooltip:"",group:"Subject Matter","group tooltip":"The Medical Subject Headings are assigned to PubMed entries by the National Library of Medicine at NIH",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"mesh_term.mesh_ui",camelKey:"",label:"Mesh Term Mesh ID",example:"D000595",definition:"MeSH term unique identifier. MeSH terms are the National Library of Medicine’s controlled vocabulary or subject heading list.",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Subject Matter","group tooltip":"The Medical Subject Headings are assigned to PubMed entries by the National Library of Medicine at NIH",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"has_mesh_term",camelKey:"",label:"Has Mesh Term",example:"",definition:"",fieldType:"boolean",caseSensitive:"",filterGroup:"Flags",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"mesh_term.qualifier_name",camelKey:"",label:"Mesh Term Qualifier Name",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"mesh_term.qualifier_ui",camelKey:"",label:"Mesh Term Qualifier ID",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Subject Matter","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"author.affiliation.name.keyword",camelKey:"",label:"Institution Name",example:'"Harvard University"',definition:"The institution associated with the author affiliations.",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Institutions",filterTooltip:"",group:"Institutions","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"author.affiliation.grid.address.country_code",camelKey:"",label:"Institution Country/Region",example:"US",definition:"The alpha-2 country code of the author's institution (see https://www.iso.org/obp/ui/#search for a list of codes)",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Institutions",filterTooltip:"",group:"Institutions","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"funding.country",camelKey:"",label:"Funding Country",example:'"United Kingdom"',definition:"The country of the funding body",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"funding.funding_id",camelKey:"",label:"Funding Id",example:"MC_U117532072",definition:"The funder's project identifier",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"funding.funding_name",camelKey:"",label:"Funding Project Name",example:'"NIH 5 T32 GM08349"',definition:"The funder's project name",fieldType:"text",caseSensitive:"FALSE",filterGroup:"Funding",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"funding.organisation",camelKey:"",label:"Funding Organisation",example:'"Medical Research Council"',definition:"Name of the funding organisation",fieldType:"text",caseSensitive:"FALSE",filterGroup:"",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"has_funding",camelKey:"",label:"Has Funding",example:"true",definition:"Indicates if the scholarly work has funding information",fieldType:"boolean",caseSensitive:"TRUE",filterGroup:"Flags",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"funding.organisation.keyword",camelKey:"",label:"Funding",example:'"National Science Foundation"',definition:"",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Funding",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"funding.organisation_id",camelKey:"",label:"Funding Organisation Id",example:"",definition:"",fieldType:"keyword",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Funding","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"conference.name",camelKey:"",label:"Conference Name",example:'"International Electron Devices Meeting"',definition:"The name of the conference",fieldType:"text",caseSensitive:"FALSE",filterGroup:"Conference Name",filterTooltip:"",group:"Conferences","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"conference.instance",camelKey:"",label:"Conference Instance",example:'"CHI 1985"',definition:"The conference instance or edition",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Conferences","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"conference.location",camelKey:"",label:"Conference Location",example:'"Lihue, Kauai, HA, USA"',definition:"The location of the conference",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Conferences","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"conference.date",camelKey:"",label:"Conference Date",example:"1999-04-14",definition:"The date of the conference",fieldType:"date",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Conferences","group tooltip":"",type:"SCHOLAR",excludedSearch:true,excludedTips:false},{key:"conference.year",camelKey:"",label:"Conference Year",example:"2016",definition:"The year the conference was held",fieldType:"integer",caseSensitive:"",filterGroup:"",filterTooltip:"",group:"Conferences","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"clinical_trial.registry",camelKey:"",label:"Clinical Trial Registry",example:"10.18810/clinical-trials-gov",definition:"The clinical trial registry",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Clinical Trials","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"clinical_trial.trial_id",camelKey:"",label:"Clinical Trial Id",example:"nct00483808",definition:"The clinical trial identifier",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Clinical Trials","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"has_clinical_trial",camelKey:"",label:"Has Clinical Trial",example:"true",definition:"Indicates if the scholarly work has clinical trial information",fieldType:"boolean",caseSensitive:"TRUE",filterGroup:"Flags",filterTooltip:"",group:"Clinical Trials","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"is_open_access",camelKey:"",label:"Open Access",example:"true",definition:"Flags if the scholarly work has is Open Access",fieldType:"boolean",caseSensitive:"TRUE",filterGroup:"",filterTooltip:"",group:"Open Access","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"open_access.colour",camelKey:"",label:"Open Access Colour",example:"gold",definition:"The Open Access colour category",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Open Access",filterTooltip:"",group:"Open Access","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false},{key:"open_access.license",camelKey:"",label:"Open Access License",example:"cc-by",definition:"The Open Access license type",fieldType:"keyword",caseSensitive:"TRUE",filterGroup:"Open Access",filterTooltip:"",group:"Open Access","group tooltip":"",type:"SCHOLAR",excludedSearch:false,excludedTips:false}]},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8);var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(root,smoothScroll){"use strict";if(true){!(__WEBPACK_AMD_DEFINE_FACTORY__=smoothScroll,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports==="object"&&typeof module==="object"){module.exports=smoothScroll()}else{root.smoothScroll=smoothScroll()}})(this,function(){"use strict";if(typeof window!=="object")return;if(document.querySelectorAll===void 0||window.pageYOffset===void 0||history.pushState===void 0){return}var getTop=function(element,start){if(element.nodeName==="HTML")return-start;return element.getBoundingClientRect().top+start};var easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1};var position=function(start,end,elapsed,duration){if(elapsed>duration)return end;return start+(end-start)*easeInOutCubic(elapsed/duration)};var smoothScroll=function(el,duration,callback,context){duration=duration||500;context=context||window;var start=context.scrollTop||window.pageYOffset;if(typeof el==="number"){var end=parseInt(el)}else{var end=getTop(el,start)}var clock=Date.now();var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){window.setTimeout(fn,15)};var step=function(){var elapsed=Date.now()-clock;if(context!==window){context.scrollTop=position(start,end,elapsed,duration)}else{window.scroll(0,position(start,end,elapsed,duration))}if(elapsed>duration){if(typeof callback==="function"){callback(el)}}else{requestAnimationFrame(step)}};step()};var linkHandler=function(ev){ev.preventDefault();if(location.hash!==this.hash)window.history.pushState(null,null,this.hash);var node=document.getElementById(this.hash.substring(1));if(!node)return;smoothScroll(node,500,function(el){location.replace("#"+el.id)})};document.addEventListener("DOMContentLoaded",function(){var internal=document.querySelectorAll('a[href^="#"]:not([href="#"])'),a;for(var i=internal.length;a=internal[--i];){a.addEventListener("click",linkHandler,false)}});return smoothScroll})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.Model.extend({url:function url(){if(this.isNew())return"/lens/service/query";return"/lens/service/query/"+this.id},tag:function tag(tags){if(this.isNew())throw Error("Dont try to save tags before saving the query!");var ctx=this;return $.ajax({type:"POST",url:ctx.url()+"/tag",data:"tag="+tags})}})},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(67);var reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(68);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}module.exports=memoizeCapped},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(35);var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},function(module,exports,__webpack_require__){var Hash=__webpack_require__(70),ListCache=__webpack_require__(22),Map=__webpack_require__(30);function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(71),hashDelete=__webpack_require__(76),hashGet=__webpack_require__(77),hashHas=__webpack_require__(78),hashSet=__webpack_require__(79);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(45),isMasked=__webpack_require__(73),isObject=__webpack_require__(9),toSource=__webpack_require__(46);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(74);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(3);var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(14);var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},function(module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(15);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},function(module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(16);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(91);function toString(value){return value==null?"":baseToString(value)}module.exports=toString},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),arrayMap=__webpack_require__(53),isArray=__webpack_require__(6),isSymbol=__webpack_require__(19);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(1));__export(__webpack_require__(11));__export(__webpack_require__(112));__export(__webpack_require__(5));__export(__webpack_require__(2));__export(__webpack_require__(145));__export(__webpack_require__(36));__export(__webpack_require__(37))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var strings_1=__webpack_require__(36);var hof_1=__webpack_require__(5);var RejectType;(function(RejectType){RejectType[RejectType["SUPERSEDED"]=2]="SUPERSEDED";RejectType[RejectType["ABORTED"]=3]="ABORTED";RejectType[RejectType["INVALID"]=4]="INVALID";RejectType[RejectType["IGNORED"]=5]="IGNORED";RejectType[RejectType["ERROR"]=6]="ERROR"})(RejectType=exports.RejectType||(exports.RejectType={}));var id=0;var Rejection=function(){function Rejection(type,message,detail){this.$id=id++;this.type=type;this.message=message;this.detail=detail}Rejection.prototype.toString=function(){var detailString=function(d){return d&&d.toString!==Object.prototype.toString?d.toString():strings_1.stringify(d)};var detail=detailString(this.detail);var _a=this,$id=_a.$id,type=_a.type,message=_a.message;return"Transition Rejection($id: "+$id+" type: "+type+", message: "+message+", detail: "+detail+")"};Rejection.prototype.toPromise=function(){return common_1.extend(common_1.silentRejection(this),{_transitionRejection:this})};Rejection.isRejectionPromise=function(obj){return obj&&typeof obj.then==="function"&&hof_1.is(Rejection)(obj._transitionRejection)};Rejection.superseded=function(detail,options){var message="The transition has been superseded by a different transition";var rejection=new Rejection(RejectType.SUPERSEDED,message,detail);if(options&&options.redirected){rejection.redirected=true}return rejection};Rejection.redirected=function(detail){return Rejection.superseded(detail,{redirected:true})};Rejection.invalid=function(detail){var message="This transition is invalid";return new Rejection(RejectType.INVALID,message,detail)};Rejection.ignored=function(detail){var message="The transition was ignored";return new Rejection(RejectType.IGNORED,message,detail)};Rejection.aborted=function(detail){var message="The transition has been aborted";return new Rejection(RejectType.ABORTED,message,detail)};Rejection.errored=function(detail){var message="The transition errored";return new Rejection(RejectType.ERROR,message,detail)};Rejection.normalize=function(detail){return hof_1.is(Rejection)(detail)?detail:Rejection.errored(detail)};return Rejection}();exports.Rejection=Rejection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var interface_1=__webpack_require__(55);var common_1=__webpack_require__(1);var strings_1=__webpack_require__(36);var predicates_1=__webpack_require__(2);var hof_1=__webpack_require__(5);var trace_1=__webpack_require__(37);var coreservices_1=__webpack_require__(11);var rejectFactory_1=__webpack_require__(93);var targetState_1=__webpack_require__(47);var defaultOptions={current:common_1.noop,transition:null,traceData:{},bind:null};var TransitionHook=function(){function TransitionHook(transition,stateContext,registeredHook,options){var _this=this;this.transition=transition;this.stateContext=stateContext;this.registeredHook=registeredHook;this.options=options;this.isSuperseded=function(){return _this.type.hookPhase===interface_1.TransitionHookPhase.RUN&&!_this.options.transition.isActive()};this.options=common_1.defaults(options,defaultOptions);this.type=registeredHook.eventType}TransitionHook.prototype.logError=function(err){this.transition.router.stateService.defaultErrorHandler()(err)};TransitionHook.prototype.invokeHook=function(){var _this=this;var hook=this.registeredHook;if(hook._deregistered)return;var notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;var options=this.options;trace_1.trace.traceHookInvocation(this,this.transition,options);var invokeCallback=function(){return hook.callback.call(options.bind,_this.transition,_this.stateContext)};var normalizeErr=function(err){return rejectFactory_1.Rejection.normalize(err).toPromise()};var handleError=function(err){return hook.eventType.getErrorHandler(_this)(err)};var handleResult=function(result){return hook.eventType.getResultHandler(_this)(result)};try{var result=invokeCallback();if(!this.type.synchronous&&predicates_1.isPromise(result)){return result.catch(normalizeErr).then(handleResult,handleError)}else{return handleResult(result)}}catch(err){return handleError(rejectFactory_1.Rejection.normalize(err))}};TransitionHook.prototype.handleHookResult=function(result){var _this=this;var notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;if(predicates_1.isPromise(result)){return result.then(function(val){return _this.handleHookResult(val)})}trace_1.trace.traceHookResult(result,this.transition,this.options);if(result===false){return rejectFactory_1.Rejection.aborted("Hook aborted transition").toPromise()}var isTargetState=hof_1.is(targetState_1.TargetState);if(isTargetState(result)){return rejectFactory_1.Rejection.redirected(result).toPromise()}};TransitionHook.prototype.getNotCurrentRejection=function(){var router=this.transition.router;if(router._disposed){return rejectFactory_1.Rejection.aborted("UIRouter instance #"+router.$id+" has been stopped (disposed)").toPromise()}if(this.transition._aborted){return rejectFactory_1.Rejection.aborted().toPromise()}if(this.isSuperseded()){return rejectFactory_1.Rejection.superseded(this.options.current()).toPromise()}};TransitionHook.prototype.toString=function(){var _a=this,options=_a.options,registeredHook=_a.registeredHook;var event=hof_1.parse("traceData.hookType")(options)||"internal",context=hof_1.parse("traceData.context.state.name")(options)||hof_1.parse("traceData.context")(options)||"unknown",name=strings_1.fnToString(registeredHook.callback);return event+" context: "+context+", "+strings_1.maxLength(200,name)};TransitionHook.chain=function(hooks,waitFor){var createHookChainR=function(prev,nextHook){return prev.then(function(){return nextHook.invokeHook()})};return hooks.reduce(createHookChainR,waitFor||coreservices_1.services.$q.when())};TransitionHook.invokeHooks=function(hooks,doneCallback){for(var idx=0;idx<hooks.length;idx++){var hookResult=hooks[idx].invokeHook();if(predicates_1.isPromise(hookResult)){var remainingHooks=hooks.slice(idx+1);return TransitionHook.chain(remainingHooks,hookResult).then(doneCallback)}}return doneCallback()};TransitionHook.runAllHooks=function(hooks){hooks.forEach(function(hook){return hook.invokeHook()})};TransitionHook.HANDLE_RESULT=function(hook){return function(result){return hook.handleHookResult(result)}};TransitionHook.LOG_REJECTED_RESULT=function(hook){return function(result){predicates_1.isPromise(result)&&result.catch(function(err){return hook.logError(rejectFactory_1.Rejection.normalize(err))});return undefined}};TransitionHook.LOG_ERROR=function(hook){return function(error){return hook.logError(error)}};TransitionHook.REJECT_ERROR=function(hook){return function(error){return common_1.silentRejection(error)}};TransitionHook.THROW_ERROR=function(hook){return function(error){throw error}};return TransitionHook}();exports.TransitionHook=TransitionHook},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var coreservices_1=__webpack_require__(11);var trace_1=__webpack_require__(37);var strings_1=__webpack_require__(36);var predicates_1=__webpack_require__(2);var common_2=__webpack_require__(92);exports.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var Resolvable=function(){function Resolvable(arg1,resolveFn,deps,policy,data){this.resolved=false;this.promise=undefined;if(arg1 instanceof Resolvable){common_1.extend(this,arg1)}else if(predicates_1.isFunction(resolveFn)){if(common_2.isNullOrUndefined(arg1))throw new Error("new Resolvable(): token argument is required");if(!predicates_1.isFunction(resolveFn))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=arg1;this.policy=policy;this.resolveFn=resolveFn;this.deps=deps||[];this.data=data;this.resolved=data!==undefined;this.promise=this.resolved?coreservices_1.services.$q.when(this.data):undefined}else if(predicates_1.isObject(arg1)&&arg1.token&&predicates_1.isFunction(arg1.resolveFn)){var literal=arg1;return new Resolvable(literal.token,literal.resolveFn,literal.deps,literal.policy,literal.data)}}Resolvable.prototype.getPolicy=function(state){var thisPolicy=this.policy||{};var statePolicy=state&&state.resolvePolicy||{};return{when:thisPolicy.when||statePolicy.when||exports.defaultResolvePolicy.when,async:thisPolicy.async||statePolicy.async||exports.defaultResolvePolicy.async}};Resolvable.prototype.resolve=function(resolveContext,trans){var _this=this;var $q=coreservices_1.services.$q;var getResolvableDependencies=function(){return $q.all(resolveContext.getDependencies(_this).map(function(resolvable){return resolvable.get(resolveContext,trans)}))};var invokeResolveFn=function(resolvedDeps){return _this.resolveFn.apply(null,resolvedDeps)};var waitForRx=function(observable$){var cached=observable$.cache(1);return cached.take(1).toPromise().then(function(){return cached})};var node=resolveContext.findNode(this);var state=node&&node.state;var maybeWaitForRx=this.getPolicy(state).async==="RXWAIT"?waitForRx:common_1.identity;var applyResolvedValue=function(resolvedValue){_this.data=resolvedValue;_this.resolved=true;trace_1.trace.traceResolvableResolved(_this,trans);return _this.data};return this.promise=$q.when().then(getResolvableDependencies).then(invokeResolveFn).then(maybeWaitForRx).then(applyResolvedValue)};Resolvable.prototype.get=function(resolveContext,trans){return this.promise||this.resolve(resolveContext,trans)};Resolvable.prototype.toString=function(){return"Resolvable(token: "+strings_1.stringify(this.token)+", requires: ["+this.deps.map(strings_1.stringify)+"])"};Resolvable.prototype.clone=function(){return new Resolvable(this)};Resolvable.fromData=function(token,data){return new Resolvable(token,function(){return data},null,null,data)};return Resolvable}();exports.Resolvable=Resolvable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var index_1=__webpack_require__(92);var common_1=__webpack_require__(1);var beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);if(idx===-1)return[str,""];return[str.substr(0,idx),str.substr(idx+1)]}};exports.splitHash=beforeAfterSubstr("#");exports.splitQuery=beforeAfterSubstr("?");exports.splitEqual=beforeAfterSubstr("=");exports.trimHashVal=function(str){return str?str.replace(/^#/,""):""};exports.keyValsToObjectR=function(accum,_a){var key=_a[0],val=_a[1];if(!accum.hasOwnProperty(key)){accum[key]=val}else if(index_1.isArray(accum[key])){accum[key].push(val)}else{accum[key]=[accum[key],val]}return accum};exports.getParams=function(queryString){return queryString.split("&").filter(common_1.identity).map(exports.splitEqual).reduce(exports.keyValsToObjectR,{})};function parseUrl(url){var orEmptyString=function(x){return x||""};var _a=exports.splitHash(url).map(orEmptyString),beforehash=_a[0],hash=_a[1];var _b=exports.splitQuery(beforehash).map(orEmptyString),path=_b[0],search=_b[1];return{path:path,search:search,hash:hash,url:url}}exports.parseUrl=parseUrl;exports.buildUrl=function(loc){var path=loc.path();var searchObject=loc.search();var hash=loc.hash();var search=Object.keys(searchObject).map(function(key){var param=searchObject[key];var vals=index_1.isArray(param)?param:[param];return vals.map(function(val){return key+"="+val})}).reduce(common_1.unnestR,[]).join("&");return path+(search?"?"+search:"")+(hash?"#"+hash:"")};function locationPluginFactory(name,isHtml5,serviceClass,configurationClass){return function(router){var service=router.locationService=new serviceClass(router);var configuration=router.locationConfig=new configurationClass(router,isHtml5);function dispose(router){router.dispose(service);router.dispose(configuration)}return{name:name,service:service,configuration:configuration,dispose:dispose}}}exports.locationPluginFactory=locationPluginFactory},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(153),isArguments=__webpack_require__(123),isArray=__webpack_require__(6),isBuffer=__webpack_require__(58),isIndex=__webpack_require__(39),isTypedArray=__webpack_require__(124);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}module.exports=arrayLikeKeys},function(module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(22),stackClear=__webpack_require__(161),stackDelete=__webpack_require__(162),stackGet=__webpack_require__(163),stackHas=__webpack_require__(164),stackSet=__webpack_require__(165);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(101),isArray=__webpack_require__(6);function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}module.exports=baseGetAllKeys},function(module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},function(module,exports){function stubArray(){return[]}module.exports=stubArray},function(module,exports){function identity(value){return value}module.exports=identity},function(module,exports,__webpack_require__){var baseSet=__webpack_require__(176);function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(97),baseKeysIn=__webpack_require__(182),isArrayLike=__webpack_require__(31);function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}module.exports=keysIn},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(101),getPrototype=__webpack_require__(107),getSymbols=__webpack_require__(48),stubArray=__webpack_require__(102);var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};module.exports=getSymbolsIn},function(module,exports,__webpack_require__){var overArg=__webpack_require__(98);var getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports){function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}module.exports=arrayReduce},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({defaults:{submitOnEnter:true,maxWidth:1200,maxHeight:800,minWidth:300,fitToView:true,closeClick:false,openEffect:"none",closeEffect:"none"},initialize:function initialize(opts){this.dialogOpts=_.extend({},this.defaults,opts)},render:function render(content,focusOn){var onApply=this.dialogOpts.onApply;var useRedactor=this.dialogOpts.useRedactor!==false;var submitOnEnter=this.dialogOpts.submitOnEnter;var validate=function validate($dialog){var title=$dialog.find("#title").val()||$dialog.find("#name").val();if($.trim(title)===""){$dialog.find(".titleError").show();console.warn("EditDialog validate could not find #name or #title with value");return false}if($.trim(title).length>256){$dialog.find(".titleTooLongError").show();return false}$dialog.find(".error").hide();return true};var beforeShow=function beforeShow(){var $dialog=$(this.inner);$dialog.find(".apply").text(messages.prop("common.action.save")).show().on("click",function(e){if(validate($dialog)){$.when(onApply(e,$dialog)).done($.fancybox.close)}});$dialog.find(".cancel").text(messages.prop("common.action.cancel")).show().on("click",function(e){$.fancybox.close()});if(useRedactor){$dialog.find("#text").redactor(window.RedactorSettings)}else{$("#text").wrap('<div class="textarea"></div>')}$dialog.on("keydown",function(e){if(e.which===$.ui.keyCode.ESCAPE){$.fancybox.close()}if(submitOnEnter&&e.target.type==="text"&&e.keyCode===13&&validate($dialog)){$.when(onApply(e,$dialog)).done($.fancybox.close)}});if(focusOn){setTimeout(function(){$dialog.find(focusOn).focus()},0)}};$.fancybox(_.extend({},this.dialogOpts,{beforeShow:beforeShow,afterShow:function afterShow(){$(this.inner).on("submit","form",function(e){e.preventDefault()})},content:ich["fancyboxTemplate"]({content:$("<div></div>").append($(content)).html(),title:this.dialogOpts.title}),title:undefined}))},remove:function remove(){}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({events:{"submit .filter-form":"submitFilter","keyup .filter-form input":"filter","click #clearFilter":"clearFilter"},initialize:function initialize(opts){this.$el=$(opts.el);this.collection=opts.collection;this.ViewConstuctor=opts.viewConstructor;this.allowFiltering=true;if(opts.allowFiltering===false){this.$el.find(".filter-form").hide();this.allowFiltering=false}_.bindAll(this,"addOne");this.render=_.debounce(this._render,10);this.listenTo(this.collection,"add reset",this.render);this.collection.on("remove reset",this.emptyChecker,this);var that=this;this.collection.fetch().done(function(){that.$("#loadingRow").remove();that.emptyChecker();var hash=$.deparam(document.location.hash.substring(1));if(hash&&hash.filter){that.$("#filter").val(hash.filter);that.filter()}})},_render:function _render(){this.$("#listTable .div-table-body").empty();this.collection.each(this.addOne);if(this.allowFiltering){this.filter()}},submitFilter:function submitFilter(e){e.preventDefault();this.filter();return false},filter:function filter(){var term="";if(this.$("#filter").length){term=this.$("#filter").val().toLowerCase()}document.location.hash="#filter="+term;this.$(".div-table-body .div-table-row").removeClass("hidden");this.$('.div-table-body .div-table-row:not(:Contains("'+term+'"))').addClass("hidden");this.filterNotification()},filterNotification:function filterNotification(){$("#filteredRow").remove();var c=this.$(".div-table-row.hidden").length;if(c>0){this.$("#listTable").after(ich["filteredTemplate"]({count:c}))}},clearFilter:function clearFilter(){this.$("#filter").val("");this.filter()},emptyChecker:function emptyChecker(){if(this.collection.isEmpty()){this.$("#listTable").after(ich["emptyTemplate"]())}},addOne:function addOne(model){this.$("#missingRow").remove();var view=new this.ViewConstuctor({model:model}).render();if(!this.allowFiltering){model.set("hidden",false)}this.$("#listTable .div-table-body").append(view.$el);model.on("remove",view.remove,view)}})},function(module,exports){module.exports=function(n,options){options=options||{};var d=options.delimiter||",";var s=options.separator||".";n=n.toString().split(".");n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+d);return n.join(s)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Glob=function(){function Glob(text){this.text=text;this.glob=text.split(".");var regexpString=this.text.split(".").map(function(seg){if(seg==="**")return"(?:|(?:\\.[^.]*)*)";if(seg==="*")return"\\.[^.]*";return"\\."+seg}).join("");this.regexp=new RegExp("^"+regexpString+"$")}Glob.prototype.matches=function(name){return this.regexp.test("."+name)};Glob.is=function(text){return!!/[!,*]+/.exec(text)};Glob.fromString=function(text){return Glob.is(text)?new Glob(text):null};return Glob}();exports.Glob=Glob},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var trace_1=__webpack_require__(37);var coreservices_1=__webpack_require__(11);var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var hof_1=__webpack_require__(5);var interface_1=__webpack_require__(55);var transitionHook_1=__webpack_require__(94);var hookRegistry_1=__webpack_require__(146);var hookBuilder_1=__webpack_require__(218);var pathFactory_1=__webpack_require__(114);var targetState_1=__webpack_require__(47);var param_1=__webpack_require__(56);var resolvable_1=__webpack_require__(95);var resolveContext_1=__webpack_require__(115);var stateSelf=hof_1.prop("self");var Transition=function(){function Transition(fromPath,targetState,router){var _this=this;this._deferred=coreservices_1.services.$q.defer();this.promise=this._deferred.promise;this._registeredHooks={};this._hookBuilder=new hookBuilder_1.HookBuilder(this);this.isActive=function(){return _this.router.globals.transition===_this};this.router=router;this._targetState=targetState;if(!targetState.valid()){throw new Error(targetState.error())}this._options=common_1.extend({current:hof_1.val(this)},targetState.options());this.$id=router.transitionService._transitionCount++;var toPath=pathFactory_1.PathUtils.buildToPath(fromPath,targetState);this._treeChanges=pathFactory_1.PathUtils.treeChanges(fromPath,toPath,this._options.reloadState);this.createTransitionHookRegFns();var onCreateHooks=this._hookBuilder.buildHooksForPhase(interface_1.TransitionHookPhase.CREATE);transitionHook_1.TransitionHook.invokeHooks(onCreateHooks,function(){return null});this.applyViewConfigs(router)}Transition.prototype.onBefore=function(criteria,callback,options){return};Transition.prototype.onStart=function(criteria,callback,options){return};Transition.prototype.onExit=function(criteria,callback,options){return};Transition.prototype.onRetain=function(criteria,callback,options){return};Transition.prototype.onEnter=function(criteria,callback,options){return};Transition.prototype.onFinish=function(criteria,callback,options){return};Transition.prototype.onSuccess=function(criteria,callback,options){return};Transition.prototype.onError=function(criteria,callback,options){return};Transition.prototype.createTransitionHookRegFns=function(){var _this=this;this.router.transitionService._pluginapi._getEvents().filter(function(type){return type.hookPhase!==interface_1.TransitionHookPhase.CREATE}).forEach(function(type){return hookRegistry_1.makeEvent(_this,_this.router.transitionService,type)})};Transition.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]};Transition.prototype.applyViewConfigs=function(router){var enteringStates=this._treeChanges.entering.map(function(node){return node.state});pathFactory_1.PathUtils.applyViewConfigs(router.transitionService.$view,this._treeChanges.to,enteringStates)};Transition.prototype.$from=function(){return common_1.tail(this._treeChanges.from).state};Transition.prototype.$to=function(){return common_1.tail(this._treeChanges.to).state};Transition.prototype.from=function(){return this.$from().self};Transition.prototype.to=function(){return this.$to().self};Transition.prototype.targetState=function(){return this._targetState};Transition.prototype.is=function(compare){if(compare instanceof Transition){return this.is({to:compare.$to().name,from:compare.$from().name})}return!(compare.to&&!hookRegistry_1.matchState(this.$to(),compare.to)||compare.from&&!hookRegistry_1.matchState(this.$from(),compare.from))};Transition.prototype.params=function(pathname){if(pathname===void 0){pathname="to"}return Object.freeze(this._treeChanges[pathname].map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))};Transition.prototype.injector=function(state,pathName){if(pathName===void 0){pathName="to"}var path=this._treeChanges[pathName];if(state)path=pathFactory_1.PathUtils.subPath(path,function(node){return node.state===state||node.state.name===state});return new resolveContext_1.ResolveContext(path).injector()};Transition.prototype.getResolveTokens=function(pathname){if(pathname===void 0){pathname="to"}return new resolveContext_1.ResolveContext(this._treeChanges[pathname]).getTokens()};Transition.prototype.addResolvable=function(resolvable,state){if(state===void 0){state=""}resolvable=hof_1.is(resolvable_1.Resolvable)(resolvable)?resolvable:new resolvable_1.Resolvable(resolvable);var stateName=typeof state==="string"?state:state.name;var topath=this._treeChanges.to;var targetNode=common_1.find(topath,function(node){return node.state.name===stateName});var resolveContext=new resolveContext_1.ResolveContext(topath);resolveContext.addResolvables([resolvable],targetNode.state)};Transition.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null};Transition.prototype.originalTransition=function(){var rf=this.redirectedFrom();return rf&&rf.originalTransition()||this};Transition.prototype.options=function(){return this._options};Transition.prototype.entering=function(){return common_1.map(this._treeChanges.entering,hof_1.prop("state")).map(stateSelf)};Transition.prototype.exiting=function(){return common_1.map(this._treeChanges.exiting,hof_1.prop("state")).map(stateSelf).reverse()};Transition.prototype.retained=function(){return common_1.map(this._treeChanges.retained,hof_1.prop("state")).map(stateSelf)};Transition.prototype.views=function(pathname,state){if(pathname===void 0){pathname="entering"}var path=this._treeChanges[pathname];path=!state?path:path.filter(hof_1.propEq("state",state));return path.map(hof_1.prop("views")).filter(common_1.identity).reduce(common_1.unnestR,[])};Transition.prototype.treeChanges=function(pathname){return pathname?this._treeChanges[pathname]:this._treeChanges};Transition.prototype.redirect=function(targetState){var redirects=1,trans=this;while((trans=trans.redirectedFrom())!=null){if(++redirects>20)throw new Error("Too many consecutive Transition redirects (20+)")}var redirectOpts={redirectedFrom:this,source:"redirect"};if(this.options().source==="url"&&targetState.options().location!==false){redirectOpts.location="replace"}var newOptions=common_1.extend({},this.options(),targetState.options(),redirectOpts);targetState=new targetState_1.TargetState(targetState.identifier(),targetState.$state(),targetState.params(),newOptions);var newTransition=this.router.transitionService.create(this._treeChanges.from,targetState);var originalEnteringNodes=this._treeChanges.entering;var redirectEnteringNodes=newTransition._treeChanges.entering;var nodeIsReloading=function(reloadState){return function(node){return reloadState&&node.state.includes[reloadState.name]}};var matchingEnteringNodes=pathFactory_1.PathUtils.matching(redirectEnteringNodes,originalEnteringNodes,pathFactory_1.PathUtils.nonDynamicParams).filter(hof_1.not(nodeIsReloading(targetState.options().reloadState)));matchingEnteringNodes.forEach(function(node,idx){node.resolvables=originalEnteringNodes[idx].resolvables});return newTransition};Transition.prototype._changedParams=function(){var tc=this._treeChanges;if(this._options.reload)return undefined;if(tc.exiting.length||tc.entering.length)return undefined;if(tc.to.length!==tc.from.length)return undefined;var pathsDiffer=common_1.arrayTuples(tc.to,tc.from).map(function(tuple){return tuple[0].state!==tuple[1].state}).reduce(common_1.anyTrueR,false);if(pathsDiffer)return undefined;var nodeSchemas=tc.to.map(function(node){return node.paramSchema});var _a=[tc.to,tc.from].map(function(path){return path.map(function(x){return x.paramValues})}),toValues=_a[0],fromValues=_a[1];var tuples=common_1.arrayTuples(nodeSchemas,toValues,fromValues);return tuples.map(function(_a){var schema=_a[0],toVals=_a[1],fromVals=_a[2];return param_1.Param.changed(schema,toVals,fromVals)}).reduce(common_1.unnestR,[])};Transition.prototype.dynamic=function(){var changes=this._changedParams();return!changes?false:changes.map(function(x){return x.dynamic}).reduce(common_1.anyTrueR,false)};Transition.prototype.ignored=function(){return!!this._ignoredReason()};Transition.prototype._ignoredReason=function(){var pending=this.router.globals.transition;var reloadState=this._options.reloadState;var same=function(pathA,pathB){if(pathA.length!==pathB.length)return false;var matching=pathFactory_1.PathUtils.matching(pathA,pathB);return pathA.length===matching.filter(function(node){return!reloadState||!node.state.includes[reloadState.name]}).length};var newTC=this.treeChanges();var pendTC=pending&&pending.treeChanges();if(pendTC&&same(pendTC.to,newTC.to)&&same(pendTC.exiting,newTC.exiting))return"SameAsPending";if(newTC.exiting.length===0&&newTC.entering.length===0&&same(newTC.from,newTC.to))return"SameAsCurrent"};Transition.prototype.run=function(){var _this=this;var runAllHooks=transitionHook_1.TransitionHook.runAllHooks;var getHooksFor=function(phase){return _this._hookBuilder.buildHooksForPhase(phase)};var transitionSuccess=function(){trace_1.trace.traceSuccess(_this.$to(),_this);_this.success=true;_this._deferred.resolve(_this.to());runAllHooks(getHooksFor(interface_1.TransitionHookPhase.SUCCESS))};var transitionError=function(reason){trace_1.trace.traceError(reason,_this);_this.success=false;_this._deferred.reject(reason);_this._error=reason;runAllHooks(getHooksFor(interface_1.TransitionHookPhase.ERROR))};var runTransition=function(){var allRunHooks=getHooksFor(interface_1.TransitionHookPhase.RUN);var done=function(){return coreservices_1.services.$q.when(undefined)};return transitionHook_1.TransitionHook.invokeHooks(allRunHooks,done)};var startTransition=function(){var globals=_this.router.globals;globals.lastStartedTransitionId=_this.$id;globals.transition=_this;globals.transitionHistory.enqueue(_this);trace_1.trace.traceTransitionStart(_this);return coreservices_1.services.$q.when(undefined)};var allBeforeHooks=getHooksFor(interface_1.TransitionHookPhase.BEFORE);transitionHook_1.TransitionHook.invokeHooks(allBeforeHooks,startTransition).then(runTransition).then(transitionSuccess,transitionError);return this.promise};Transition.prototype.valid=function(){return!this.error()||this.success!==undefined};Transition.prototype.abort=function(){if(predicates_1.isUndefined(this.success)){this._aborted=true}};Transition.prototype.error=function(){var state=this.$to();if(state.self.abstract)return"Cannot transition to abstract state '"+state.name+"'";var paramDefs=state.parameters(),values=this.params();var invalidParams=paramDefs.filter(function(param){return!param.validates(values[param.id])});if(invalidParams.length){return"Param values not valid for state '"+state.name+"'. Invalid params: [ "+invalidParams.map(function(param){return param.id}).join(", ")+" ]"}if(this.success===false)return this._error};Transition.prototype.toString=function(){var fromStateOrName=this.from();var toStateOrName=this.to();var avoidEmptyHash=function(params){return params["#"]!==null&&params["#"]!==undefined?params:common_1.omit(params,["#"])};var id=this.$id,from=predicates_1.isObject(fromStateOrName)?fromStateOrName.name:fromStateOrName,fromParams=common_1.toJson(avoidEmptyHash(this._treeChanges.from.map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))),toValid=this.valid()?"":"(X) ",to=predicates_1.isObject(toStateOrName)?toStateOrName.name:toStateOrName,toParams=common_1.toJson(avoidEmptyHash(this.params()));return"Transition#"+id+"( '"+from+"'"+fromParams+" -> "+toValid+"'"+to+"'"+toParams+" )"};Transition.diToken=Transition;return Transition}();exports.Transition=Transition},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var targetState_1=__webpack_require__(47);var pathNode_1=__webpack_require__(147);var PathUtils=function(){function PathUtils(){}PathUtils.makeTargetState=function(path){var state=common_1.tail(path).state;return new targetState_1.TargetState(state,state,path.map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))};PathUtils.buildPath=function(targetState){var toParams=targetState.params();return targetState.$state().path.map(function(state){return new pathNode_1.PathNode(state).applyRawParams(toParams)})};PathUtils.buildToPath=function(fromPath,targetState){var toPath=PathUtils.buildPath(targetState);if(targetState.options().inherit){return PathUtils.inheritParams(fromPath,toPath,Object.keys(targetState.params()))}return toPath};PathUtils.applyViewConfigs=function($view,path,states){path.filter(function(node){return common_1.inArray(states,node.state)}).forEach(function(node){var viewDecls=common_1.values(node.state.views||{});var subPath=PathUtils.subPath(path,function(n){return n===node});var viewConfigs=viewDecls.map(function(view){return $view.createViewConfig(subPath,view)});node.views=viewConfigs.reduce(common_1.unnestR,[])})};PathUtils.inheritParams=function(fromPath,toPath,toKeys){if(toKeys===void 0){toKeys=[]}function nodeParamVals(path,state){var node=common_1.find(path,hof_1.propEq("state",state));return common_1.extend({},node&&node.paramValues)}var noInherit=fromPath.map(function(node){return node.paramSchema}).reduce(common_1.unnestR,[]).filter(function(param){return!param.inherit}).map(hof_1.prop("id"));function makeInheritedParamsNode(toNode){var toParamVals=common_1.extend({},toNode&&toNode.paramValues);var incomingParamVals=common_1.pick(toParamVals,toKeys);toParamVals=common_1.omit(toParamVals,toKeys);var fromParamVals=common_1.omit(nodeParamVals(fromPath,toNode.state)||{},noInherit);var ownParamVals=common_1.extend(toParamVals,fromParamVals,incomingParamVals);return new pathNode_1.PathNode(toNode.state).applyRawParams(ownParamVals)}return toPath.map(makeInheritedParamsNode)};PathUtils.treeChanges=function(fromPath,toPath,reloadState){var keep=0,max=Math.min(fromPath.length,toPath.length);var nodesMatch=function(node1,node2){return node1.equals(node2,PathUtils.nonDynamicParams)};while(keep<max&&fromPath[keep].state!==reloadState&&nodesMatch(fromPath[keep],toPath[keep])){keep++}function applyToParams(retainedNode,idx){var cloned=pathNode_1.PathNode.clone(retainedNode);cloned.paramValues=toPath[idx].paramValues;return cloned}var from,retained,exiting,entering,to;from=fromPath;retained=from.slice(0,keep);exiting=from.slice(keep);var retainedWithToParams=retained.map(applyToParams);entering=toPath.slice(keep);to=retainedWithToParams.concat(entering);return{from:from,to:to,retained:retained,exiting:exiting,entering:entering}};PathUtils.matching=function(pathA,pathB,paramsFn){var done=false;var tuples=common_1.arrayTuples(pathA,pathB);return tuples.reduce(function(matching,_a){var nodeA=_a[0],nodeB=_a[1];done=done||!nodeA.equals(nodeB,paramsFn);return done?matching:matching.concat(nodeA)},[])};PathUtils.equals=function(pathA,pathB,paramsFn){return pathA.length===pathB.length&&PathUtils.matching(pathA,pathB,paramsFn).length===pathA.length};PathUtils.subPath=function(path,predicate){var node=common_1.find(path,predicate);var elementIdx=path.indexOf(node);return elementIdx===-1?undefined:path.slice(0,elementIdx+1)};PathUtils.nonDynamicParams=function(node){return node.state.parameters({inherit:false}).filter(function(param){return!param.dynamic})};PathUtils.paramValues=function(path){return path.reduce(function(acc,node){return common_1.extend(acc,node.paramValues)},{})};return PathUtils}();exports.PathUtils=PathUtils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var trace_1=__webpack_require__(37);var coreservices_1=__webpack_require__(11);var interface_1=__webpack_require__(219);var resolvable_1=__webpack_require__(95);var pathFactory_1=__webpack_require__(114);var strings_1=__webpack_require__(36);var when=interface_1.resolvePolicies.when;var ALL_WHENS=[when.EAGER,when.LAZY];var EAGER_WHENS=[when.EAGER];exports.NATIVE_INJECTOR_TOKEN="Native Injector";var ResolveContext=function(){function ResolveContext(_path){this._path=_path}ResolveContext.prototype.getTokens=function(){return this._path.reduce(function(acc,node){return acc.concat(node.resolvables.map(function(r){return r.token}))},[]).reduce(common_1.uniqR,[])};ResolveContext.prototype.getResolvable=function(token){var matching=this._path.map(function(node){return node.resolvables}).reduce(common_1.unnestR,[]).filter(function(r){return r.token===token});return common_1.tail(matching)};ResolveContext.prototype.getPolicy=function(resolvable){var node=this.findNode(resolvable);return resolvable.getPolicy(node.state)};ResolveContext.prototype.subContext=function(state){return new ResolveContext(pathFactory_1.PathUtils.subPath(this._path,function(node){return node.state===state}))};ResolveContext.prototype.addResolvables=function(newResolvables,state){var node=common_1.find(this._path,hof_1.propEq("state",state));var keys=newResolvables.map(function(r){return r.token});node.resolvables=node.resolvables.filter(function(r){return keys.indexOf(r.token)===-1}).concat(newResolvables)};ResolveContext.prototype.resolvePath=function(when,trans){var _this=this;if(when===void 0){when="LAZY"}var whenOption=common_1.inArray(ALL_WHENS,when)?when:"LAZY";var matchedWhens=whenOption===interface_1.resolvePolicies.when.EAGER?EAGER_WHENS:ALL_WHENS;trace_1.trace.traceResolvePath(this._path,when,trans);var matchesPolicy=function(acceptedVals,whenOrAsync){return function(resolvable){return common_1.inArray(acceptedVals,_this.getPolicy(resolvable)[whenOrAsync])}};var promises=this._path.reduce(function(acc,node){var nodeResolvables=node.resolvables.filter(matchesPolicy(matchedWhens,"when"));var nowait=nodeResolvables.filter(matchesPolicy(["NOWAIT"],"async"));var wait=nodeResolvables.filter(hof_1.not(matchesPolicy(["NOWAIT"],"async")));var subContext=_this.subContext(node.state);var getResult=function(r){return r.get(subContext,trans).then(function(value){return{token:r.token,value:value}})};nowait.forEach(getResult);return acc.concat(wait.map(getResult))},[]);return coreservices_1.services.$q.all(promises)};ResolveContext.prototype.injector=function(){return this._injector||(this._injector=new UIInjectorImpl(this))};ResolveContext.prototype.findNode=function(resolvable){return common_1.find(this._path,function(node){return common_1.inArray(node.resolvables,resolvable)})};ResolveContext.prototype.getDependencies=function(resolvable){var _this=this;var node=this.findNode(resolvable);var subPath=pathFactory_1.PathUtils.subPath(this._path,function(x){return x===node})||this._path;var availableResolvables=subPath.reduce(function(acc,node){return acc.concat(node.resolvables)},[]).filter(function(res){return res!==resolvable});var getDependency=function(token){var matching=availableResolvables.filter(function(r){return r.token===token});if(matching.length)return common_1.tail(matching);var fromInjector=_this.injector().getNative(token);if(!fromInjector){throw new Error("Could not find Dependency Injection token: "+strings_1.stringify(token))}return new resolvable_1.Resolvable(token,function(){return fromInjector},[],fromInjector)};return resolvable.deps.map(getDependency)};return ResolveContext}();exports.ResolveContext=ResolveContext;var UIInjectorImpl=function(){function UIInjectorImpl(context){this.context=context;this.native=this.get(exports.NATIVE_INJECTOR_TOKEN)||coreservices_1.services.$injector}UIInjectorImpl.prototype.get=function(token){var resolvable=this.context.getResolvable(token);if(resolvable){if(this.context.getPolicy(resolvable).async==="NOWAIT"){return resolvable.get(this.context)}if(!resolvable.resolved){throw new Error("Resolvable async .get() not complete:"+strings_1.stringify(resolvable.token))}return resolvable.data}return this.native&&this.native.get(token)};UIInjectorImpl.prototype.getAsync=function(token){var resolvable=this.context.getResolvable(token);if(resolvable)return resolvable.get(this.context);return coreservices_1.services.$q.when(this.native.get(token))};UIInjectorImpl.prototype.getNative=function(token){return this.native&&this.native.get(token)};return UIInjectorImpl}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(2);var param_1=__webpack_require__(56);var strings_1=__webpack_require__(36);function quoteRegExp(string,param){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!param)return result;switch(param.squash){case false:surroundPattern=["(",")"+(param.isOptional?"?":"")];break;case true:result=result.replace(/\/$/,"");surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+param.squash+"|",")?"];break}return result+surroundPattern[0]+param.type.pattern.source+surroundPattern[1]}var memoizeTo=function(obj,prop,fn){return obj[prop]=obj[prop]||fn()};var splitOnSlash=strings_1.splitOnDelim("/");var UrlMatcher=function(){function UrlMatcher(pattern,paramTypes,paramFactory,config){var _this=this;this.config=config;this._cache={path:[this]};this._children=[];this._params=[];this._segments=[];this._compiled=[];this.pattern=pattern;this.config=common_1.defaults(this.config,{params:{},strict:true,caseInsensitive:false,paramMap:common_1.identity});var placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,last=0,m,patterns=[];var checkParamErrors=function(id){if(!UrlMatcher.nameValidator.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(common_1.find(_this._params,hof_1.propEq("id",id)))throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'")};var matchDetails=function(m,isSearch){var id=m[2]||m[3];var regexp=isSearch?m[4]:m[4]||(m[1]==="*"?"[\\s\\S]*":null);var makeRegexpType=function(regexp){return common_1.inherit(paramTypes.type(isSearch?"query":"path"),{pattern:new RegExp(regexp,_this.config.caseInsensitive?"i":undefined)})};return{id:id,regexp:regexp,cfg:_this.config.params[id],segment:pattern.substring(last,m.index),type:!regexp?null:paramTypes.type(regexp)||makeRegexpType(regexp)}};var p,segment;while(m=placeholder.exec(pattern)){p=matchDetails(m,false);if(p.segment.indexOf("?")>=0)break;checkParamErrors(p.id);this._params.push(paramFactory.fromPath(p.id,p.type,this.config.paramMap(p.cfg,false)));this._segments.push(p.segment);patterns.push([p.segment,common_1.tail(this._params)]);last=placeholder.lastIndex}segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=segment.substring(i);segment=segment.substring(0,i);if(search.length>0){last=0;while(m=searchPlaceholder.exec(search)){p=matchDetails(m,true);checkParamErrors(p.id);this._params.push(paramFactory.fromSearch(p.id,p.type,this.config.paramMap(p.cfg,true)));last=placeholder.lastIndex}}}this._segments.push(segment);this._compiled=patterns.map(function(pattern){return quoteRegExp.apply(null,pattern)}).concat(quoteRegExp(segment))}UrlMatcher.prototype.append=function(url){this._children.push(url);url._cache={path:this._cache.path.concat(url),parent:this,pattern:null};return url};UrlMatcher.prototype.isRoot=function(){return this._cache.path[0]===this};UrlMatcher.prototype.toString=function(){return this.pattern};UrlMatcher.prototype.exec=function(path,search,hash,options){var _this=this;if(search===void 0){search={}}if(options===void 0){options={}}var match=memoizeTo(this._cache,"pattern",function(){return new RegExp(["^",common_1.unnest(_this._cache.path.map(hof_1.prop("_compiled"))).join(""),_this.config.strict===false?"/?":"","$"].join(""),_this.config.caseInsensitive?"i":undefined)}).exec(path);if(!match)return null;var allParams=this.parameters(),pathParams=allParams.filter(function(param){return!param.isSearch()}),searchParams=allParams.filter(function(param){return param.isSearch()}),nPathSegments=this._cache.path.map(function(urlm){return urlm._segments.length-1}).reduce(function(a,x){return a+x}),values={};if(nPathSegments!==match.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");function decodePathArray(string){var reverseString=function(str){return str.split("").reverse().join("")};var unquoteDashes=function(str){return str.replace(/\\-/g,"-")};var split=reverseString(string).split(/-(?!\\)/);var allReversed=common_1.map(split,reverseString);return common_1.map(allReversed,unquoteDashes).reverse()}for(var i=0;i<nPathSegments;i++){var param=pathParams[i];var value=match[i+1];for(var j=0;j<param.replace.length;j++){if(param.replace[j].from===value)value=param.replace[j].to}if(value&&param.array===true)value=decodePathArray(value);if(predicates_1.isDefined(value))value=param.type.decode(value);values[param.id]=param.value(value)}searchParams.forEach(function(param){var value=search[param.id];for(var j=0;j<param.replace.length;j++){if(param.replace[j].from===value)value=param.replace[j].to}if(predicates_1.isDefined(value))value=param.type.decode(value);values[param.id]=param.value(value)});if(hash)values["#"]=hash;return values};UrlMatcher.prototype.parameters=function(opts){if(opts===void 0){opts={}}if(opts.inherit===false)return this._params;return common_1.unnest(this._cache.path.map(function(matcher){return matcher._params}))};UrlMatcher.prototype.parameter=function(id,opts){var _this=this;if(opts===void 0){opts={}}var findParam=function(){for(var _i=0,_a=_this._params;_i<_a.length;_i++){var param=_a[_i];if(param.id===id)return param}};var parent=this._cache.parent;return findParam()||opts.inherit!==false&&parent&&parent.parameter(id,opts)||null};UrlMatcher.prototype.validates=function(params){var validParamVal=function(param,val){return!param||param.validates(val)};params=params||{};var paramSchema=this.parameters().filter(function(paramDef){return params.hasOwnProperty(paramDef.id)});return paramSchema.map(function(paramDef){return validParamVal(paramDef,params[paramDef.id])}).reduce(common_1.allTrueR,true)};UrlMatcher.prototype.format=function(values){if(values===void 0){values={}}var urlMatchers=this._cache.path;var pathSegmentsAndParams=urlMatchers.map(UrlMatcher.pathSegmentsAndParams).reduce(common_1.unnestR,[]).map(function(x){return predicates_1.isString(x)?x:getDetails(x)});var queryParams=urlMatchers.map(UrlMatcher.queryParams).reduce(common_1.unnestR,[]).map(getDetails);var isInvalid=function(param){return param.isValid===false};if(pathSegmentsAndParams.concat(queryParams).filter(isInvalid).length){return null}function getDetails(param){var value=param.value(values[param.id]);var isValid=param.validates(value);var isDefaultValue=param.isDefaultValue(value);var squash=isDefaultValue?param.squash:false;var encoded=param.type.encode(value);return{param:param,value:value,isValid:isValid,isDefaultValue:isDefaultValue,squash:squash,encoded:encoded}}var pathString=pathSegmentsAndParams.reduce(function(acc,x){if(predicates_1.isString(x))return acc+x;var squash=x.squash,encoded=x.encoded,param=x.param;if(squash===true)return acc.match(/\/$/)?acc.slice(0,-1):acc;if(predicates_1.isString(squash))return acc+squash;if(squash!==false)return acc;if(encoded==null)return acc;if(predicates_1.isArray(encoded))return acc+common_1.map(encoded,UrlMatcher.encodeDashes).join("-");if(param.raw)return acc+encoded;return acc+encodeURIComponent(encoded)},"");var queryString=queryParams.map(function(paramDetails){var param=paramDetails.param,squash=paramDetails.squash,encoded=paramDetails.encoded,isDefaultValue=paramDetails.isDefaultValue;if(encoded==null||isDefaultValue&&squash!==false)return;if(!predicates_1.isArray(encoded))encoded=[encoded];if(encoded.length===0)return;if(!param.raw)encoded=common_1.map(encoded,encodeURIComponent);return encoded.map(function(val){return param.id+"="+val})}).filter(common_1.identity).reduce(common_1.unnestR,[]).join("&");return pathString+(queryString?"?"+queryString:"")+(values["#"]?"#"+values["#"]:"")};UrlMatcher.encodeDashes=function(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})};UrlMatcher.pathSegmentsAndParams=function(matcher){var staticSegments=matcher._segments;var pathParams=matcher._params.filter(function(p){return p.location===param_1.DefType.PATH});return common_1.arrayTuples(staticSegments,pathParams.concat(undefined)).reduce(common_1.unnestR,[]).filter(function(x){return x!==""&&predicates_1.isDefined(x)})};UrlMatcher.queryParams=function(matcher){return matcher._params.filter(function(p){return p.location===param_1.DefType.SEARCH})};UrlMatcher.compare=function(a,b){var segments=function(matcher){return matcher._cache.segments=matcher._cache.segments||matcher._cache.path.map(UrlMatcher.pathSegmentsAndParams).reduce(common_1.unnestR,[]).reduce(strings_1.joinNeighborsR,[]).map(function(x){return predicates_1.isString(x)?splitOnSlash(x):x}).reduce(common_1.unnestR,[])};var weights=function(matcher){return matcher._cache.weights=matcher._cache.weights||segments(matcher).map(function(segment){if(segment==="/")return 1;if(predicates_1.isString(segment))return 2;if(segment instanceof param_1.Param)return 3})};var cmp,i,pairs=common_1.arrayTuples(weights(a),weights(b));for(i=0;i<pairs.length;i++){cmp=pairs[i][0]-pairs[i][1];if(cmp!==0)return cmp}return 0};UrlMatcher.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;return UrlMatcher}();exports.UrlMatcher=UrlMatcher},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var utils_1=__webpack_require__(96);var predicates_1=__webpack_require__(2);var common_1=__webpack_require__(1);var BaseLocationServices=function(){function BaseLocationServices(router,fireAfterUpdate){var _this=this;this.fireAfterUpdate=fireAfterUpdate;this._listener=function(evt){return _this._listeners.forEach(function(cb){return cb(evt)})};this._listeners=[];this.hash=function(){return utils_1.parseUrl(_this._get()).hash};this.path=function(){return utils_1.parseUrl(_this._get()).path};this.search=function(){return utils_1.getParams(utils_1.parseUrl(_this._get()).search)};this._location=window&&window.location;this._history=window&&window.history}BaseLocationServices.prototype.url=function(url,replace){if(replace===void 0){replace=true}if(predicates_1.isDefined(url)&&url!==this._get()){this._set(null,null,url,replace);if(this.fireAfterUpdate){var evt_1=common_1.extend(new Event("locationchange"),{url:url});this._listeners.forEach(function(cb){return cb(evt_1)})}}return utils_1.buildUrl(this)};BaseLocationServices.prototype.onChange=function(cb){var _this=this;this._listeners.push(cb);return function(){return common_1.removeFrom(_this._listeners,cb)}};BaseLocationServices.prototype.dispose=function(router){common_1.deregAll(this._listeners)};return BaseLocationServices}();exports.BaseLocationServices=BaseLocationServices},function(module,exports,__webpack_require__){!function(t,e){true?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.clipboard=e():t.clipboard=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t,e,n){y("listener called"),t.success=!0,e.forEach(function(e,r){n.clipboardData.setData(r,e),r===_&&n.clipboardData.getData(r)!=e&&(y("setting text/plain failed"),t.success=!1)}),n.preventDefault()}function o(t){var e=new x,n=r.bind(this,e,t);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return e.success}function i(t,e){c(t);var n=o(e);return a(),n}function u(t){var e=document.createElement("div");e.setAttribute("style","-webkit-user-select: text !important"),e.textContent="temporary element",document.body.appendChild(e);var n=i(e,t);return document.body.removeChild(e),n}function s(t){y("copyTextUsingDOM");var e=document.createElement("div");e.setAttribute("style","-webkit-user-select: text !important");var n=e;e.attachShadow&&(y("Using shadow DOM."),n=e.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=t,n.appendChild(r),document.body.appendChild(e),c(r);var o=document.execCommand("copy");return a(),document.body.removeChild(e),o}function c(t){var e=document.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}function a(){document.getSelection().removeAllRanges()}function l(t){var e=new v.DT;return e.setData(_,t),e}function f(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function d(t){var e=t.getData(_);if(void 0!==e)return window.clipboardData.setData("Text",e);throw"No `text/plain` value was specified."}function p(){return new m(function(t,e){var n=window.clipboardData.getData("Text");""===n?e(new Error("Empty clipboard or could not read plain text from clipboard")):t(n)})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(1),v=n(5),m="undefined"==typeof Promise?h.Promise:Promise,y=function(t){},w=!0,b=function(){(console.warn||console.log).call(arguments)},g=b.bind(console,"[clipboard-polyfill]"),_="text/plain",T=function(){function t(){}return t.setDebugLog=function(t){y=t},t.suppressWarnings=function(){w=!1,v.suppressDTWarnings()},t.write=function(t){return w&&!t.getData(_)&&g("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),new m(function(e,n){if(f())return void(d(t)?e():n(new Error("Copying failed, possibly because the user rejected it.")));if(o(t))return y("regular execCopy worked"),void e();if(navigator.userAgent.indexOf("Edge")>-1)return y('UA "Edge" => assuming success'),void e();if(i(document.body,t))return y("copyUsingTempSelection worked"),void e();if(u(t))return y("copyUsingTempElem worked"),void e();var r=t.getData(_);if(void 0!==r&&s(r))return y("copyTextUsingDOM worked"),void e();n(new Error("Copy command failed."))})},t.writeText=function(t){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(t);var e=new v.DT;return e.setData(_,t),this.write(e)},t.read=function(){return new m(function(t,e){if(f())return void p().then(function(e){return t(l(e))},e);e("Read is not supported in your browser.")})},t.readText=function(){return navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText():f()?p():new m(function(t,e){e("Read is not supported in your browser.")})},t.DT=v.DT,t}();e.default=T;var x=function(){function t(){this.success=!1}return t}();t.exports=T},function(t,e,n){(function(e,r){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function o(t){return"function"==typeof t}function i(t){G=t}function u(t){H=t}function s(){return void 0!==B?function(){B(a)}:c()}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<z;t+=2){(0,Z[t])(Z[t+1]),Z[t]=void 0,Z[t+1]=void 0}z=0}function l(t,e){var n=arguments,r=this,o=new this.constructor(d);void 0===o[tt]&&M(o);var i=r._state;return i?function(){var t=n[i-1];H(function(){return j(i,o,t,r._result)})}():D(r,o,t,e),o}function f(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(d);return g(n,t),n}function d(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(t){return ot.error=t,ot}}function m(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function y(t,e,n){H(function(t){var r=!1,o=m(n,e,function(n){r||(r=!0,e!==n?g(t,n):T(t,n))},function(e){r||(r=!0,x(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,x(t,o))},t)}function w(t,e){e._state===nt?T(t,e._result):e._state===rt?x(t,e._result):D(e,void 0,function(e){return g(t,e)},function(e){return x(t,e)})}function b(t,e,n){e.constructor===t.constructor&&n===l&&e.constructor.resolve===f?w(t,e):n===ot?(x(t,ot.error),ot.error=null):void 0===n?T(t,e):o(n)?y(t,e,n):T(t,e)}function g(e,n){e===n?x(e,p()):t(n)?b(e,n,v(n)):T(e,n)}function _(t){t._onerror&&t._onerror(t._result),A(t)}function T(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&H(A,t))}function x(t,e){t._state===et&&(t._state=rt,t._result=e,H(_,t))}function D(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&H(A,t)}function A(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,u=0;u<e.length;u+=3)r=e[u],o=e[u+n],r?j(n,r,o,i):o(i);t._subscribers.length=0}}function E(){this.error=null}function C(t,e){try{return t(e)}catch(t){return it.error=t,it}}function j(t,e,n,r){var i=o(n),u=void 0,s=void 0,c=void 0,a=void 0;if(i){if(u=C(n,r),u===it?(a=!0,s=u.error,u.error=null):c=!0,e===u)return void x(e,h())}else u=r,c=!0;e._state!==et||(i&&c?g(e,u):a?x(e,s):t===nt?T(e,u):t===rt&&x(e,u))}function O(t,e){try{e(function(e){g(t,e)},function(e){x(t,e)})}catch(e){x(t,e)}}function S(){return ut++}function M(t){t[tt]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function P(t,e){this._instanceConstructor=t,this.promise=new t(d),this.promise[tt]||M(this.promise),q(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&T(this.promise,this._result))):x(this.promise,k())}function k(){return new Error("Array Methods must be provided an Array")}function L(t){return new P(this,t).promise}function U(t){var e=this;return new e(q(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function R(t){var e=this,n=new e(d);return x(n,t),n}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(t){this[tt]=S(),this._result=this._state=void 0,this._subscribers=[],d!==t&&("function"!=typeof t&&W(),this instanceof N?O(this,t):F())}function Y(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=N}var K=void 0;K=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var q=K,z=0,B=void 0,G=void 0,H=function(t,e){Z[z]=t,Z[z+1]=e,2===(z+=2)&&(G?G(a):$())},I="undefined"!=typeof window?window:void 0,J=I||{},Q=J.MutationObserver||J.WebKitMutationObserver,V="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),$=void 0;$=V?function(){return function(){return e.nextTick(a)}}():Q?function(){var t=0,e=new Q(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():X?function(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}():void 0===I?function(){try{var t=n(4);return B=t.runOnLoop||t.runOnContext,s()}catch(t){return c()}}():c();var tt=Math.random().toString(36).substring(16),et=void 0,nt=1,rt=2,ot=new E,it=new E,ut=0;return P.prototype._enumerate=function(t){for(var e=0;this._state===et&&e<t.length;e++)this._eachEntry(t[e],e)},P.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===f){var o=v(t);if(o===l&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===N){var i=new n(d);b(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},P.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?x(r,n):this._result[e]=n),0===this._remaining&&T(r,this._result)},P.prototype._willSettleAt=function(t,e){var n=this;D(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},N.all=L,N.race=U,N.resolve=f,N.reject=R,N._setScheduler=i,N._setAsap=u,N._asap=H,N.prototype={constructor:N,then:l,catch:function(t){return this.then(null,t)}},N.polyfill=Y,N.Promise=N,N})}).call(e,n(2),n(3))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function u(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!v){var t=o(u);v=!0;for(var e=h.length;e;){for(p=h,h=[];++m<e;)p&&p[m].run();m=-1,e=h.length}p=null,v=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var l,f,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,h=[],v=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new c(t,e)),1!==h.length||v||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=a,d.addListener=a,d.once=a,d.off=a,d.removeListener=a,d.removeAllListeners=a,d.emit=a,d.prependListener=a,d.prependOnceListener=a,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){},function(t,e,n){"use strict";function r(){s=!1}Object.defineProperty(e,"__esModule",{value:!0});var o=["text/plain","text/html"],i=function(){(console.warn||console.log).call(arguments)},u=i.bind(console,"[clipboard-polyfill]"),s=!0;e.suppressDTWarnings=r;var c=function(){function t(){this.m={}}return t.prototype.setData=function(t,e){s&&-1===o.indexOf(t)&&u("Unknown data type: "+t,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[t]=e},t.prototype.getData=function(t){return this.m[t]},t.prototype.forEach=function(t){for(var e in this.m)t(this.m[e],e)},t}();e.DT=c}])})},function(module,exports,__webpack_require__){"use strict";var IsoCountries=__webpack_require__(23);var IsoCountriesNameLookup={};Object.keys(IsoCountries).forEach(function(k){var _IsoCountries$k=IsoCountries[k],name=_IsoCountries$k.name,alias=_IsoCountries$k.alias;IsoCountriesNameLookup[name]=k;IsoCountriesNameLookup[alias]=k});module.exports=IsoCountriesNameLookup},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var LocalStorageService=__webpack_require__(7);var ClassificationService=function(){function ClassificationService(opts){_classCallCheck(this,ClassificationService);opts=opts||{};this.API_BASE_URL=opts.url||window.UI_CONFIG.patclassApiBaseUrl;if(opts.cache===true){if(!(opts.storage instanceof LocalStorageService)){throw new Error("To enable cache you must supply an instance of LocalStorageService")}this.storage=opts.storage;this.blankCache={children:{},search:{},suggest:{}};this.cache=this.storage.get("cache")||this.blankCache}}_createClass(ClassificationService,[{key:"_checkCache",value:function _checkCache(bucket,type,key){if(this.cache&&this.cache[bucket][type]){if(this.cache[bucket][type][key]){return this.cache[bucket][type][key]}}return null}},{key:"_updateCache",value:function _updateCache(bucket,type,key,value){if(this.cache){if(!this.cache[bucket][type]){this.cache[bucket][type]={}}this.cache[bucket][type][key]=value;this.storage.set("cache",this.cache)}}},{key:"_invoke",value:function _invoke(type,endpoint,data){var method=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"GET";return $.ajax({method:method,url:this.API_BASE_URL+"/"+type+"/"+endpoint,contentType:"application/json",dataType:"json",data:data})}},{key:"suggest",value:function suggest(type,prefix){var _this=this;var cached=this._checkCache("suggest",type,prefix);if(cached){var d=new $.Deferred;return d.resolve(cached)}return this._invoke(type,"suggest",{prefix:prefix,num:10}).then(function(response){_this._updateCache("suggest",type,prefix,response);return response})}},{key:"search",value:function search(type,term,prefix,symbol){if(!term){return}var data={q:term,stem:true};if(prefix)data.prefix=prefix;if(symbol)data.symbol=symbol;return this._invoke(type,"search",data)}},{key:"ancestorsAndSelf",value:function ancestorsAndSelf(type,symbol){var _this2=this;var cached=this._checkCache("search",type,symbol);if(cached){return cached}return this._invoke(type,"ancestorsAndSelf",{format:"text",symbol:symbol}).then(function(items){_this2._updateCache("search",type,symbol,items);return items})}},{key:"bulkAncestorsAndSelf",value:function bulkAncestorsAndSelf(type,symbols){var data=JSON.stringify({format:"text",symbols:symbols});return this._invoke(type,"bulkAncestorsAndSelf",data,"POST")}},{key:"getChildren",value:function getChildren(type,id){var _this3=this;var cached=this._checkCache("children",type,id);if(cached){return cached}var data={format:"text",grandchildCounts:true};if(id){data.parentId=id}else if(type==="USPC"){var d=new $.Deferred;return d.resolve([])}return this._invoke(type,"children",data).then(function(items){_this3._updateCache("children",type,id,items);return items})}},{key:"clearCache",value:function clearCache(){this.storage.set("cache",this.blankCache)}}]);return ClassificationService}();module.exports=ClassificationService},function(module,exports,__webpack_require__){"use strict";var _aggs=__webpack_require__(57);var _aggs2=_interopRequireDefault(_aggs);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var elasticFilterToCheckedFilter=function elasticFilterToCheckedFilter(filterArray,checkedValue,filterMap){filterArray.forEach(function(filter){Object.keys(filter.terms).forEach(function(k){var field=k;if(!_.isObject(_aggs2.default[k])){field=Object.keys(_aggs2.default).find(function(a){return _aggs2.default[a].terms&&_aggs2.default[a].terms.field===k})}field=field||k;filterMap[field]=filterMap[field]||{};filter.terms[k].forEach(function(v){filterMap[field][v]=checkedValue})})})};module.exports={toElastic:function toElastic(term,filterMap){var filter=[];var must=[];var must_not=[];Object.keys(filterMap).forEach(function(k){var value=filterMap[k];var fieldName=(0,_get3.default)(_aggs2.default[k],"terms.field")||k;if(_.isObject(value)){_.keys(value).filter(function(v){var include=filterMap[k][v];var input=include?filter:must_not;var existing=input.filter(function(clause){return clause.terms&&clause.terms[fieldName]});if(existing.length){existing[0].terms[fieldName].push(v)}else{input.push({terms:_defineProperty({},fieldName,[v])})}})}else{filter.push({terms:_defineProperty({},fieldName,[value])})}});if(term){var query_string={query:term,fields:["title","abstract","fulltext","default"],default_operator:"and"};must.push({query_string:query_string})}return{bool:{must:must,must_not:must_not,filter:filter}}},fromElastic:function fromElastic(elastic){var filterMap={};elasticFilterToCheckedFilter(elastic.bool.filter,true,filterMap);elasticFilterToCheckedFilter(elastic.bool.must_not,false,filterMap);var term=(0,_get3.default)(elastic,"bool.must[0].query_string.query")||"";return{term:term,filterMap:filterMap}}}},function(module,exports){function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}module.exports=arrayFilter},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(154),isObjectLike=__webpack_require__(20);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(156),baseUnary=__webpack_require__(125),nodeUtil=__webpack_require__(157);var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},function(module,exports,__webpack_require__){var root=__webpack_require__(3);var Uint8Array=root.Uint8Array;module.exports=Uint8Array},function(module,exports){function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}module.exports=mapToArray},function(module,exports){function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}module.exports=setToArray},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(100),getSymbols=__webpack_require__(48),keys=__webpack_require__(27);function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}module.exports=getAllKeys},function(module,exports,__webpack_require__){var DataView=__webpack_require__(166),Map=__webpack_require__(30),Promise=__webpack_require__(167),Set=__webpack_require__(168),WeakMap=__webpack_require__(169),baseGetTag=__webpack_require__(12),toSource=__webpack_require__(46);var mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]";var dataViewTag="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}module.exports=getTag},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _OpenAccessAliases=__webpack_require__(132);var _OpenAccessAliases2=_interopRequireDefault(_OpenAccessAliases);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var toTitleCase=function toTitleCase(s){return s.split(" ").map(function(s){return s[0].toUpperCase()+s.slice(1)}).join(" ")};var IsoCountries=__webpack_require__(23);exports.default={"author.affiliation.grid.address.country_code":function authorAffiliationGridAddressCountry_code(k){if(IsoCountries[k]){return IsoCountries[k].name}return k},is_open_access:function is_open_access(k){if(k===1||k==="1"||k===true||k==="true"){return"Open Access"}return"Non-OA"},citation_id_type:function citation_id_type(k){var map={doi:"Crossref",pmid:"PubMed",pmcid:"PubMed Central",core:"Core",magid:"Microsoft Academic"};return map[k]},keyword:toTitleCase,publication_type:toTitleCase,"open_access.license":function open_accessLicense(k){var alias=_OpenAccessAliases2.default[k];if(alias&&alias.abbreviation){return alias.abbreviation}else if(alias){return alias.label}return k}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={unknown:{label:"Unknown",abbreviation:""},missing:{label:"Missing",abbreviation:""},"cc-by":{label:"Attribution",abbreviation:"CC BY"},"cc-by-nc-nd":{label:"Attribution-NonCommercial-NoDerivs",abbreviation:"CC BY-NC-ND"},"cc-by-nc":{label:"Attribution- NonCommercial",abbreviation:"CC BY-NC"},"cc-by-nc-sa":{label:"Attribution-NonCommercial-ShareAlike",abbreviation:"CC BY-NC-SA"},"cc-by-sa":{label:"Attribution-ShareAlike",abbreviation:"CC BY-SA"},cc0:{label:"No Rights Reserved",abbreviation:"CC0"},"cc-by-nd":{label:"Attribution- NoDerivs",abbreviation:"CC BY-ND"},"implied-oa":{label:"Implied OA",abbreviation:""},"elsevier-specific: oa user license":{label:"Elsevier User License ",abbreviation:""},"publisher-specific":{label:"Publisher-Specific",abbreviation:""},pd:{label:"Public Domain",abbreviation:""}}},function(module,exports,__webpack_require__){"use strict";var green="#78bd4c";var purple="#9c5ee1";var pink="#ce68d1";var yellow="#f4c901";var orange="#e28604";var blue="#0094d3";var lime="#c9d41b";var darkBlue="#6278d8";var teal="#0e9ca6";var fields={open_access:{icon:"open-access",prefix:"is_",colour:green,label:"Open Access",tooltip:"Open Access",pill:true},referenced_by_patent:{icon:"quote-left",prefix:"is_",colour:teal,label:"Patents",tooltip:"Cited by Patent",pill:true},referenced_by_scholarly:{prefix:"is_",label:"Cited by Scholarly",tooltip:"Cited by Scholarly Works",pill:false},abstract:{icon:"file-text-o",colour:blue,label:"Abstract",tooltip:"Has Abstract",pill:false},fulltext:{icon:"file-text-o",colour:blue,label:"Full Text",tooltip:"Has Full Text",pill:true},chemical:{icon:"flask",colour:darkBlue,label:"Substance",tooltip:"Has Substance Info",pill:true},funding:{icon:"usd",colour:purple,label:"Funding",tooltip:"Has Funding Info",pill:true},clinical_trial:{icon:"heartbeat",colour:pink,label:"Clinical Trial",tooltip:"Has Clinical Trial",pill:true},affiliation:{icon:"address-card-o",colour:orange,label:"Affiliation",tooltip:"Has Author Affliation",pill:true},field_of_study:{icon:"tasks",colour:yellow,label:"Field of Study",tooltip:"Has Field of Study",pill:true},keyword:{label:"Keywords",tooltip:"Has Keywords",pill:false},mesh_term:{label:"MeSH Terms",tooltip:"Has MeSH Terms",pill:false}};if(window.UI_CONFIG.locale!=="en"){_.keys(fields).forEach(function(k){fields[k].key=k;var label=window.messages.prop("scholar.field."+k)||window.messages.prop("scholar.common."+k);if(label){fields[k].label=label;fields[k].tooltip=label}})}module.exports=fields},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof module==="object"&&module.exports){module.exports=factory()}else{root.lucenequeryparser=factory()}})(this,function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){var escapedParts="",i;for(i=0;i<expectation.parts.length;i++){escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i])}return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation)}function describeExpected(expected){var descriptions=new Array(expected.length),i,j;for(i=0;i<expected.length;i++){descriptions[i]=describeExpectation(expected[i])}descriptions.sort();if(descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++){if(descriptions[i-1]!==descriptions[i]){descriptions[j]=descriptions[i];j++}}descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}function describeFound(found){return found?'"'+literalEscape(found)+'"':"end of input"}return"Expected "+describeExpected(expected)+" but "+describeFound(found)+" found."};function peg$parse(input,options){options=options!==void 0?options:{};var peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=function(node){return node[0]},peg$c1=function(){return{}},peg$c2=function(operator){return{operator:operator}},peg$c3=function(operator,right){return right},peg$c4=function(left,operator,right){var node={left:left};var right=right.length==0?null:right[0]["right"]==null?right[0]["left"]:right[0];if(right!=null){node["operator"]=operator==""||operator==undefined?"<implicit>":operator[0];node["right"]=right}return node},peg$c5=function(field_exp){return field_exp},peg$c6="(",peg$c7=peg$literalExpectation("(",false),peg$c8=")",peg$c9=peg$literalExpectation(")",false),peg$c10=function(fieldname,range){range["field"]=fieldname==""||fieldname==undefined?"<implicit>":fieldname;return range},peg$c11=function(fieldname,node){node["field"]=fieldname;return node},peg$c12=function(fieldname,term){var fieldexp={field:fieldname==""||fieldname==undefined?"<implicit>":fieldname};for(var key in term)fieldexp[key]=term[key];return fieldexp},peg$c13=/^[:]/,peg$c14=peg$classExpectation([":"],false,false),peg$c15=function(fieldname){return fieldname},peg$c16=function(op,term,proximity,boost){var result={term:term};if(""!=proximity){result["proximity"]=proximity}if(""!=boost){result["boost"]=boost}if(""!=op){result["prefix"]=op}return result},peg$c17=function(op,term,similarity,boost){var result={term:term};if(""!=similarity){result["similarity"]=similarity}if(""!=boost){result["boost"]=boost}if(""!=op){result["prefix"]=op}return result},peg$c18=function(op,term,boost){var result={term:term,regexpr:true};if(""!=boost){result["boost"]=boost}if(""!=op){result["prefix"]=op}return result},peg$c19=function(term_start,term){var res=term_start+term.join("");if(/^(?:AND|OR|NOT|\|\||&&)$/.test(res)){var e=new Error("Term can not be AND, OR, NOT, ||, &&");e.name="SyntaxError";e.column=location;throw e}return res},peg$c20=".",peg$c21=peg$literalExpectation(".",false),peg$c22=/^[^: \t\r\n\f{}()"+-\/\^~[\]]/,peg$c23=peg$classExpectation([":"," ","\t","\r","\n","\f","{","}","(",")",'"',["+","/"],"^","~","[","]"],true,false),peg$c24="\\",peg$c25=peg$literalExpectation("\\",false),peg$c26=/^[: \t\r\n\f{}()"\/\^~[\]]/,peg$c27=peg$classExpectation([":"," ","\t","\r","\n","\f","{","}","(",")",'"',"/","^","~","[","]"],false,false),peg$c28=function(escaping_char){return"\\"+escaping_char},peg$c29="+",peg$c30=peg$literalExpectation("+",false),peg$c31="-",peg$c32=peg$literalExpectation("-",false),peg$c33="/",peg$c34=peg$literalExpectation("/",false),peg$c35=function(term){return term.join("").replace("\\/","/")},peg$c36="\\/",peg$c37=peg$literalExpectation("\\/",false),peg$c38=/^[^\/]/,peg$c39=peg$classExpectation(["/"],true,false),peg$c40='"',peg$c41=peg$literalExpectation('"',false),peg$c42=/^[^"]/,peg$c43=peg$classExpectation(['"'],true,false),peg$c44=function(term){return term.join("")},peg$c45="~",peg$c46=peg$literalExpectation("~",false),peg$c47=function(proximity){return proximity},peg$c48="^",peg$c49=peg$literalExpectation("^",false),peg$c50=function(boost){return boost},peg$c51=function(fuzziness){return fuzziness==""||fuzziness==undefined?.5:fuzziness},peg$c52="0.",peg$c53=peg$literalExpectation("0.",false),peg$c54=/^[0-9]/,peg$c55=peg$classExpectation([["0","9"]],false,false),peg$c56=function(val){return parseFloat("0."+val.join(""))},peg$c57=function(val){return parseInt(val.join(""))},peg$c58="[",peg$c59=peg$literalExpectation("[",false),peg$c60="TO",peg$c61=peg$literalExpectation("TO",false),peg$c62="]",peg$c63=peg$literalExpectation("]",false),peg$c64=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:true,inclusive_min:true,inclusive_max:true}},peg$c65="{",peg$c66=peg$literalExpectation("{",false),peg$c67="}",peg$c68=peg$literalExpectation("}",false),peg$c69=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:false,inclusive_min:false,inclusive_max:false}},peg$c70=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:false,inclusive_min:false,inclusive_max:true}},peg$c71=function(term_min,term_max){return{term_min:term_min,term_max:term_max,inclusive:false,inclusive_min:true,inclusive_max:false}},peg$c72=function(operator){return operator},peg$c73="OR",peg$c74=peg$literalExpectation("OR",false),peg$c75="AND",peg$c76=peg$literalExpectation("AND",false),peg$c77="NOT",peg$c78=peg$literalExpectation("NOT",false),peg$c79="||",peg$c80=peg$literalExpectation("||",false),peg$c81=function(){return"OR"},peg$c82="&&",peg$c83=peg$literalExpectation("&&",false),peg$c84=function(){return"AND"},peg$c85="!",peg$c86=peg$literalExpectation("!",false),peg$c87=function(){return"NOT"},peg$c88=peg$otherExpectation("whitespace"),peg$c89=/^[ \t\r\n\f]/,peg$c90=peg$classExpectation([" ","\t","\r","\n","\f"],false,false),peg$c91=peg$anyExpectation(),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description,location){location=location!==void 0?location:peg$computeLocation(peg$savedPos,peg$currPos);throw peg$buildStructuredError([peg$otherExpectation(description)],input.substring(peg$savedPos,peg$currPos),location)}function error(message,location){location=location!==void 0?location:peg$computeLocation(peg$savedPos,peg$currPos);throw peg$buildSimpleError(message,location)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$anyExpectation(){return{type:"any"}}function peg$endExpectation(){return{type:"end"}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column};while(p<pos){if(input.charCodeAt(p)===10){details.line++;details.column=1}else{details.column++}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildSimpleError(message,location){return new peg$SyntaxError(message,null,null,location)}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];s2=peg$parse_();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parse_()}if(s1!==peg$FAILED){s2=[];s3=peg$parsenode();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsenode()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parse_();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parse_()}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c1()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseEOF();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c1()}s0=s1}}return s0}function peg$parsenode(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseoperator_exp();if(s1!==peg$FAILED){s2=peg$parseEOF();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseoperator_exp();if(s1!==peg$FAILED){s2=peg$parsenode();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsegroup_exp();if(s1!==peg$FAILED){s2=[];s3=peg$parseoperator_exp();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseoperator_exp()}if(s2!==peg$FAILED){s3=[];s4=peg$parsenode();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parsenode()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c4(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parsegroup_exp(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsefield_exp();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c5(s1);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseparen_exp()}return s0}function peg$parseparen_exp(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c6;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s1!==peg$FAILED){s2=[];s3=peg$parsenode();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsenode()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s3=peg$c8;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_()}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefield_exp(){var s0,s1,s2;s0=peg$currPos;s1=peg$parsefieldname();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parserange_operator_exp();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c10(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsefieldname();if(s1!==peg$FAILED){s2=peg$parseparen_exp();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c11(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsefieldname();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parseterm();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c12(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parsefieldname(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseunquoted_term();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_()}if(s2!==peg$FAILED){if(peg$c13.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_()}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c15(s1);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseterm(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseprefix_operator_exp();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parsequoted_term();if(s2!==peg$FAILED){s3=peg$parseproximity_modifier();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseboost_modifier();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_()}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s1,s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseprefix_operator_exp();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parseunquoted_term();if(s2!==peg$FAILED){s3=peg$parsefuzzy_modifier();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=peg$parseboost_modifier();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_()}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s1,s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseprefix_operator_exp();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parseregexpr_term();if(s2!==peg$FAILED){s3=peg$parseboost_modifier();if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_()}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c18(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseunquoted_term(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseterm_start_char();if(s1!==peg$FAILED){s2=[];s3=peg$parseterm_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseterm_char()}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseterm_start_char(){var s0;if(input.charCodeAt(peg$currPos)===46){s0=peg$c20;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s0===peg$FAILED){s0=peg$parseterm_escaping_char();if(s0===peg$FAILED){if(peg$c22.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23)}}}}return s0}function peg$parseterm_escaping_char(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c24;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}if(s1!==peg$FAILED){if(peg$c26.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c27)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c28(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseterm_char(){var s0;if(input.charCodeAt(peg$currPos)===43){s0=peg$c29;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s0=peg$c31;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}if(s0===peg$FAILED){s0=peg$parseterm_escaping_char();if(s0===peg$FAILED){s0=peg$parseterm_start_char()}}}return s0}function peg$parseregexpr_term(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===47){s1=peg$c33;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseregexpr_char();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseregexpr_char()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s3=peg$c33;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c35(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseregexpr_char(){var s0;if(input.charCodeAt(peg$currPos)===46){s0=peg$c20;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c36){s0=peg$c36;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}if(s0===peg$FAILED){if(peg$c38.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}}}return s0}function peg$parsequoted_term(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c40;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c41)}}if(s1!==peg$FAILED){s2=[];if(peg$c42.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);if(peg$c42.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}}}else{s2=peg$FAILED}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c40;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c41)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c44(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseproximity_modifier(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===126){s1=peg$c45;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c46)}}if(s1!==peg$FAILED){s2=peg$parseint_exp();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c47(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseboost_modifier(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===94){s1=peg$c48;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c49)}}if(s1!==peg$FAILED){s2=peg$parsedecimal_or_int_exp();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c50(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefuzzy_modifier(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===126){s1=peg$c45;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c46)}}if(s1!==peg$FAILED){s2=peg$parsedecimal_exp();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c51(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsedecimal_or_int_exp(){var s0;s0=peg$parsedecimal_exp();if(s0===peg$FAILED){s0=peg$parseint_exp()}return s0}function peg$parsedecimal_exp(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c52){s1=peg$c52;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c53)}}if(s1!==peg$FAILED){s2=[];if(peg$c54.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);if(peg$c54.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}}}else{s2=peg$FAILED}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c56(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseint_exp(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c54.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c54.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c57(s1)}s0=s1;return s0}function peg$parserange_operator_exp(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c58;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c59)}}if(s1!==peg$FAILED){s2=peg$parseunquoted_term();if(s2!==peg$FAILED){s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_()}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c60){s4=peg$c60;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_()}}else{s5=peg$FAILED}if(s5!==peg$FAILED){s6=peg$parseunquoted_term();if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s7=peg$c62;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c64(s2,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c65;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66)}}if(s1!==peg$FAILED){s2=peg$parseunquoted_term();if(s2!==peg$FAILED){s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_()}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c60){s4=peg$c60;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_()}}else{s5=peg$FAILED}if(s5!==peg$FAILED){s6=peg$parseunquoted_term();if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s7=peg$c67;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c69(s2,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c65;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66)}}if(s1!==peg$FAILED){s2=peg$parseunquoted_term();if(s2!==peg$FAILED){s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_()}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c60){s4=peg$c60;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_()}}else{s5=peg$FAILED}if(s5!==peg$FAILED){s6=peg$parseunquoted_term();if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s7=peg$c62;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c70(s2,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c58;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c59)}}if(s1!==peg$FAILED){s2=peg$parseunquoted_term();if(s2!==peg$FAILED){s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_()}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c60){s4=peg$c60;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_()}}else{s5=peg$FAILED}if(s5!==peg$FAILED){s6=peg$parseunquoted_term();if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s7=peg$c67;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c71(s2,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}return s0}function peg$parseoperator_exp(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parse_();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parse_()}if(s1!==peg$FAILED){s2=peg$parseoperator();if(s2!==peg$FAILED){s3=[];s4=peg$parse_();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c72(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parse_();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parse_()}if(s1!==peg$FAILED){s2=peg$parseoperator();if(s2!==peg$FAILED){s3=peg$parseEOF();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c72(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseoperator(){var s0,s1;if(input.substr(peg$currPos,2)===peg$c73){s0=peg$c73;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c74)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,3)===peg$c75){s0=peg$c75;peg$currPos+=3}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.substr(peg$currPos,3)===peg$c77){s0=peg$c77;peg$currPos+=3}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c79){s1=peg$c79;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c81()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c82){s1=peg$c82;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c83)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c84()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===33){s1=peg$c85;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c86)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c87()}s0=s1}}}}}return s0}function peg$parseprefix_operator_exp(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parse_();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parse_()}if(s1!==peg$FAILED){s2=peg$parseprefix_operator();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c72(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseprefix_operator(){var s0;if(input.charCodeAt(peg$currPos)===43){s0=peg$c29;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s0=peg$c31;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}}return s0}function peg$parse_(){var s0,s1;peg$silentFails++;s0=[];if(peg$c89.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90)}}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);if(peg$c89.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90)}}}}else{s0=peg$FAILED}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c88)}}return s0}function peg$parseEOF(){var s0,s1;s0=peg$currPos;peg$silentFails++;if(input.length>peg$currPos){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c91)}}peg$silentFails--;if(s1===peg$FAILED){s0=void 0}else{peg$currPos=s0;s0=peg$FAILED}return s0}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail(peg$endExpectation())}throw peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}})},function(module,exports,__webpack_require__){(function webpackUniversalModuleDefinition(root,factory){if(true)module.exports=factory();else if(typeof define==="function"&&define.amd)define("Fuse",[],factory);else if(typeof exports==="object")exports["Fuse"]=factory();else root["Fuse"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=8)}([function(module,exports,__webpack_require__){"use strict";module.exports=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var bitapRegexSearch=__webpack_require__(5);var bitapSearch=__webpack_require__(7);var patternAlphabet=__webpack_require__(4);var Bitap=function(){function Bitap(pattern,_ref){var _ref$location=_ref.location,location=_ref$location===undefined?0:_ref$location,_ref$distance=_ref.distance,distance=_ref$distance===undefined?100:_ref$distance,_ref$threshold=_ref.threshold,threshold=_ref$threshold===undefined?.6:_ref$threshold,_ref$maxPatternLength=_ref.maxPatternLength,maxPatternLength=_ref$maxPatternLength===undefined?32:_ref$maxPatternLength,_ref$isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref$isCaseSensitive===undefined?false:_ref$isCaseSensitive,_ref$tokenSeparator=_ref.tokenSeparator,tokenSeparator=_ref$tokenSeparator===undefined?/ +/g:_ref$tokenSeparator,_ref$findAllMatches=_ref.findAllMatches,findAllMatches=_ref$findAllMatches===undefined?false:_ref$findAllMatches,_ref$minMatchCharLeng=_ref.minMatchCharLength,minMatchCharLength=_ref$minMatchCharLeng===undefined?1:_ref$minMatchCharLeng;_classCallCheck(this,Bitap);this.options={location:location,distance:distance,threshold:threshold,maxPatternLength:maxPatternLength,isCaseSensitive:isCaseSensitive,tokenSeparator:tokenSeparator,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength};this.pattern=this.options.isCaseSensitive?pattern:pattern.toLowerCase();if(this.pattern.length<=maxPatternLength){this.patternAlphabet=patternAlphabet(this.pattern)}}_createClass(Bitap,[{key:"search",value:function search(text){if(!this.options.isCaseSensitive){text=text.toLowerCase()}if(this.pattern===text){return{isMatch:true,score:0,matchedIndices:[[0,text.length-1]]}}var _options=this.options,maxPatternLength=_options.maxPatternLength,tokenSeparator=_options.tokenSeparator;if(this.pattern.length>maxPatternLength){return bitapRegexSearch(text,this.pattern,tokenSeparator)}var _options2=this.options,location=_options2.location,distance=_options2.distance,threshold=_options2.threshold,findAllMatches=_options2.findAllMatches,minMatchCharLength=_options2.minMatchCharLength;return bitapSearch(text,this.pattern,this.patternAlphabet,{location:location,distance:distance,threshold:threshold,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength})}}]);return Bitap}();module.exports=Bitap},function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(0);var deepValue=function deepValue(obj,path,list){if(!path){list.push(obj)}else{var dotIndex=path.indexOf(".");var firstSegment=path;var remaining=null;if(dotIndex!==-1){firstSegment=path.slice(0,dotIndex);remaining=path.slice(dotIndex+1)}var value=obj[firstSegment];if(value!==null&&value!==undefined){if(!remaining&&(typeof value==="string"||typeof value==="number")){list.push(value.toString())}else if(isArray(value)){for(var i=0,len=value.length;i<len;i+=1){deepValue(value[i],remaining,list)}}else if(remaining){deepValue(value,remaining,list)}}}return list};module.exports=function(obj,path){return deepValue(obj,path,[])}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var matchmask=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var minMatchCharLength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var matchedIndices=[];var start=-1;var end=-1;var i=0;for(var len=matchmask.length;i<len;i+=1){var match=matchmask[i];if(match&&start===-1){start=i}else if(!match&&start!==-1){end=i-1;if(end-start+1>=minMatchCharLength){matchedIndices.push([start,end])}start=-1}}if(matchmask[i-1]&&i-start>=minMatchCharLength){matchedIndices.push([start,i-1])}return matchedIndices}},function(module,exports,__webpack_require__){"use strict";module.exports=function(pattern){var mask={};var len=pattern.length;for(var i=0;i<len;i+=1){mask[pattern.charAt(i)]=0}for(var _i=0;_i<len;_i+=1){mask[pattern.charAt(_i)]|=1<<len-_i-1}return mask}},function(module,exports,__webpack_require__){"use strict";var SPECIAL_CHARS_REGEX=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;module.exports=function(text,pattern){var tokenSeparator=arguments.length>2&&arguments[2]!==undefined?arguments[2]:/ +/g;var regex=new RegExp(pattern.replace(SPECIAL_CHARS_REGEX,"\\$&").replace(tokenSeparator,"|"));var matches=text.match(regex);var isMatch=!!matches;var matchedIndices=[];if(isMatch){for(var i=0,matchesLen=matches.length;i<matchesLen;i+=1){var match=matches[i];matchedIndices.push([text.indexOf(match),match.length-1])}}return{score:isMatch?.5:1,isMatch:isMatch,matchedIndices:matchedIndices}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(pattern,_ref){var _ref$errors=_ref.errors,errors=_ref$errors===undefined?0:_ref$errors,_ref$currentLocation=_ref.currentLocation,currentLocation=_ref$currentLocation===undefined?0:_ref$currentLocation,_ref$expectedLocation=_ref.expectedLocation,expectedLocation=_ref$expectedLocation===undefined?0:_ref$expectedLocation,_ref$distance=_ref.distance,distance=_ref$distance===undefined?100:_ref$distance;var accuracy=errors/pattern.length;var proximity=Math.abs(expectedLocation-currentLocation);if(!distance){return proximity?1:accuracy}return accuracy+proximity/distance}},function(module,exports,__webpack_require__){"use strict";var bitapScore=__webpack_require__(6);var matchedIndices=__webpack_require__(3);module.exports=function(text,pattern,patternAlphabet,_ref){var _ref$location=_ref.location,location=_ref$location===undefined?0:_ref$location,_ref$distance=_ref.distance,distance=_ref$distance===undefined?100:_ref$distance,_ref$threshold=_ref.threshold,threshold=_ref$threshold===undefined?.6:_ref$threshold,_ref$findAllMatches=_ref.findAllMatches,findAllMatches=_ref$findAllMatches===undefined?false:_ref$findAllMatches,_ref$minMatchCharLeng=_ref.minMatchCharLength,minMatchCharLength=_ref$minMatchCharLeng===undefined?1:_ref$minMatchCharLeng;var expectedLocation=location;var textLen=text.length;var currentThreshold=threshold;var bestLocation=text.indexOf(pattern,expectedLocation);var patternLen=pattern.length;var matchMask=[];for(var i=0;i<textLen;i+=1){matchMask[i]=0}if(bestLocation!==-1){var score=bitapScore(pattern,{errors:0,currentLocation:bestLocation,expectedLocation:expectedLocation,distance:distance});currentThreshold=Math.min(score,currentThreshold);bestLocation=text.lastIndexOf(pattern,expectedLocation+patternLen);if(bestLocation!==-1){var _score=bitapScore(pattern,{errors:0,currentLocation:bestLocation,expectedLocation:expectedLocation,distance:distance});currentThreshold=Math.min(_score,currentThreshold)}}bestLocation=-1;var lastBitArr=[];var finalScore=1;var binMax=patternLen+textLen;var mask=1<<patternLen-1;for(var _i=0;_i<patternLen;_i+=1){var binMin=0;var binMid=binMax;while(binMin<binMid){var _score3=bitapScore(pattern,{errors:_i,currentLocation:expectedLocation+binMid,expectedLocation:expectedLocation,distance:distance});if(_score3<=currentThreshold){binMin=binMid}else{binMax=binMid}binMid=Math.floor((binMax-binMin)/2+binMin)}binMax=binMid;var start=Math.max(1,expectedLocation-binMid+1);var finish=findAllMatches?textLen:Math.min(expectedLocation+binMid,textLen)+patternLen;var bitArr=Array(finish+2);bitArr[finish+1]=(1<<_i)-1;for(var j=finish;j>=start;j-=1){var currentLocation=j-1;var charMatch=patternAlphabet[text.charAt(currentLocation)];if(charMatch){matchMask[currentLocation]=1}bitArr[j]=(bitArr[j+1]<<1|1)&charMatch;if(_i!==0){bitArr[j]|=(lastBitArr[j+1]|lastBitArr[j])<<1|1|lastBitArr[j+1]}if(bitArr[j]&mask){finalScore=bitapScore(pattern,{errors:_i,currentLocation:currentLocation,expectedLocation:expectedLocation,distance:distance});if(finalScore<=currentThreshold){currentThreshold=finalScore;bestLocation=currentLocation;if(bestLocation<=expectedLocation){break}start=Math.max(1,2*expectedLocation-bestLocation)}}}var _score2=bitapScore(pattern,{errors:_i+1,currentLocation:expectedLocation,expectedLocation:expectedLocation,distance:distance});if(_score2>currentThreshold){break}lastBitArr=bitArr}return{isMatch:bestLocation>=0,score:finalScore===0?.001:finalScore,matchedIndices:matchedIndices(matchMask,minMatchCharLength)}}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Bitap=__webpack_require__(1);var deepValue=__webpack_require__(2);var isArray=__webpack_require__(0);var Fuse=function(){function Fuse(list,_ref){var _ref$location=_ref.location,location=_ref$location===undefined?0:_ref$location,_ref$distance=_ref.distance,distance=_ref$distance===undefined?100:_ref$distance,_ref$threshold=_ref.threshold,threshold=_ref$threshold===undefined?.6:_ref$threshold,_ref$maxPatternLength=_ref.maxPatternLength,maxPatternLength=_ref$maxPatternLength===undefined?32:_ref$maxPatternLength,_ref$caseSensitive=_ref.caseSensitive,caseSensitive=_ref$caseSensitive===undefined?false:_ref$caseSensitive,_ref$tokenSeparator=_ref.tokenSeparator,tokenSeparator=_ref$tokenSeparator===undefined?/ +/g:_ref$tokenSeparator,_ref$findAllMatches=_ref.findAllMatches,findAllMatches=_ref$findAllMatches===undefined?false:_ref$findAllMatches,_ref$minMatchCharLeng=_ref.minMatchCharLength,minMatchCharLength=_ref$minMatchCharLeng===undefined?1:_ref$minMatchCharLeng,_ref$id=_ref.id,id=_ref$id===undefined?null:_ref$id,_ref$keys=_ref.keys,keys=_ref$keys===undefined?[]:_ref$keys,_ref$shouldSort=_ref.shouldSort,shouldSort=_ref$shouldSort===undefined?true:_ref$shouldSort,_ref$getFn=_ref.getFn,getFn=_ref$getFn===undefined?deepValue:_ref$getFn,_ref$sortFn=_ref.sortFn,sortFn=_ref$sortFn===undefined?function(a,b){return a.score-b.score}:_ref$sortFn,_ref$tokenize=_ref.tokenize,tokenize=_ref$tokenize===undefined?false:_ref$tokenize,_ref$matchAllTokens=_ref.matchAllTokens,matchAllTokens=_ref$matchAllTokens===undefined?false:_ref$matchAllTokens,_ref$includeMatches=_ref.includeMatches,includeMatches=_ref$includeMatches===undefined?false:_ref$includeMatches,_ref$includeScore=_ref.includeScore,includeScore=_ref$includeScore===undefined?false:_ref$includeScore,_ref$verbose=_ref.verbose,verbose=_ref$verbose===undefined?false:_ref$verbose;_classCallCheck(this,Fuse);this.options={location:location,distance:distance,threshold:threshold,maxPatternLength:maxPatternLength,isCaseSensitive:caseSensitive,tokenSeparator:tokenSeparator,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,id:id,keys:keys,includeMatches:includeMatches,includeScore:includeScore,shouldSort:shouldSort,getFn:getFn,sortFn:sortFn,verbose:verbose,tokenize:tokenize,matchAllTokens:matchAllTokens};this.setCollection(list)}_createClass(Fuse,[{key:"setCollection",value:function setCollection(list){this.list=list;return list}},{key:"search",value:function search(pattern){this._log('---------\nSearch pattern: "'+pattern+'"');var _prepareSearchers2=this._prepareSearchers(pattern),tokenSearchers=_prepareSearchers2.tokenSearchers,fullSearcher=_prepareSearchers2.fullSearcher;var _search2=this._search(tokenSearchers,fullSearcher),weights=_search2.weights,results=_search2.results;this._computeScore(weights,results);if(this.options.shouldSort){this._sort(results)}return this._format(results)}},{key:"_prepareSearchers",value:function _prepareSearchers(){var pattern=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var tokenSearchers=[];if(this.options.tokenize){var tokens=pattern.split(this.options.tokenSeparator);for(var i=0,len=tokens.length;i<len;i+=1){tokenSearchers.push(new Bitap(tokens[i],this.options))}}var fullSearcher=new Bitap(pattern,this.options);return{tokenSearchers:tokenSearchers,fullSearcher:fullSearcher}}},{key:"_search",value:function _search(){var tokenSearchers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var fullSearcher=arguments[1];var list=this.list;var resultMap={};var results=[];if(typeof list[0]==="string"){for(var i=0,len=list.length;i<len;i+=1){this._analyze({key:"",value:list[i],record:i,index:i},{resultMap:resultMap,results:results,tokenSearchers:tokenSearchers,fullSearcher:fullSearcher})}return{weights:null,results:results}}var weights={};for(var _i=0,_len=list.length;_i<_len;_i+=1){var item=list[_i];for(var j=0,keysLen=this.options.keys.length;j<keysLen;j+=1){var key=this.options.keys[j];if(typeof key!=="string"){weights[key.name]={weight:1-key.weight||1};if(key.weight<=0||key.weight>1){throw new Error("Key weight has to be > 0 and <= 1")}key=key.name}else{weights[key]={weight:1}}this._analyze({key:key,value:this.options.getFn(item,key),record:item,index:_i},{resultMap:resultMap,results:results,tokenSearchers:tokenSearchers,fullSearcher:fullSearcher})}}return{weights:weights,results:results}}},{key:"_analyze",value:function _analyze(_ref2,_ref3){var key=_ref2.key,_ref2$arrayIndex=_ref2.arrayIndex,arrayIndex=_ref2$arrayIndex===undefined?-1:_ref2$arrayIndex,value=_ref2.value,record=_ref2.record,index=_ref2.index;var _ref3$tokenSearchers=_ref3.tokenSearchers,tokenSearchers=_ref3$tokenSearchers===undefined?[]:_ref3$tokenSearchers,_ref3$fullSearcher=_ref3.fullSearcher,fullSearcher=_ref3$fullSearcher===undefined?[]:_ref3$fullSearcher,_ref3$resultMap=_ref3.resultMap,resultMap=_ref3$resultMap===undefined?{}:_ref3$resultMap,_ref3$results=_ref3.results,results=_ref3$results===undefined?[]:_ref3$results;if(value===undefined||value===null){return}var exists=false;var averageScore=-1;var numTextMatches=0;if(typeof value==="string"){this._log("\nKey: "+(key===""?"-":key));var mainSearchResult=fullSearcher.search(value);this._log('Full text: "'+value+'", score: '+mainSearchResult.score);if(this.options.tokenize){var words=value.split(this.options.tokenSeparator);var scores=[];for(var i=0;i<tokenSearchers.length;i+=1){var tokenSearcher=tokenSearchers[i];this._log('\nPattern: "'+tokenSearcher.pattern+'"');var hasMatchInText=false;for(var j=0;j<words.length;j+=1){var word=words[j];var tokenSearchResult=tokenSearcher.search(word);var obj={};if(tokenSearchResult.isMatch){obj[word]=tokenSearchResult.score;exists=true;hasMatchInText=true;scores.push(tokenSearchResult.score)}else{obj[word]=1;if(!this.options.matchAllTokens){scores.push(1)}}this._log('Token: "'+word+'", score: '+obj[word])}if(hasMatchInText){numTextMatches+=1}}averageScore=scores[0];var scoresLen=scores.length;for(var _i2=1;_i2<scoresLen;_i2+=1){averageScore+=scores[_i2]}averageScore=averageScore/scoresLen;this._log("Token score average:",averageScore)}var finalScore=mainSearchResult.score;if(averageScore>-1){finalScore=(finalScore+averageScore)/2}this._log("Score average:",finalScore);var checkTextMatches=this.options.tokenize&&this.options.matchAllTokens?numTextMatches>=tokenSearchers.length:true;this._log("\nCheck Matches: "+checkTextMatches);if((exists||mainSearchResult.isMatch)&&checkTextMatches){var existingResult=resultMap[index];if(existingResult){existingResult.output.push({key:key,arrayIndex:arrayIndex,value:value,score:finalScore,matchedIndices:mainSearchResult.matchedIndices})}else{resultMap[index]={item:record,output:[{key:key,arrayIndex:arrayIndex,value:value,score:finalScore,matchedIndices:mainSearchResult.matchedIndices}]};results.push(resultMap[index])}}}else if(isArray(value)){for(var _i3=0,len=value.length;_i3<len;_i3+=1){this._analyze({key:key,arrayIndex:_i3,value:value[_i3],record:record,index:index},{resultMap:resultMap,results:results,tokenSearchers:tokenSearchers,fullSearcher:fullSearcher})}}}},{key:"_computeScore",value:function _computeScore(weights,results){this._log("\n\nComputing score:\n");for(var i=0,len=results.length;i<len;i+=1){var output=results[i].output;var scoreLen=output.length;var totalScore=0;var bestScore=1;for(var j=0;j<scoreLen;j+=1){var weight=weights?weights[output[j].key].weight:1;var score=weight===1?output[j].score:output[j].score||.001;var nScore=score*weight;if(weight!==1){bestScore=Math.min(bestScore,nScore)}else{output[j].nScore=nScore;totalScore+=nScore}}results[i].score=bestScore===1?totalScore/scoreLen:bestScore;this._log(results[i])}}},{key:"_sort",value:function _sort(results){this._log("\n\nSorting....");results.sort(this.options.sortFn)}},{key:"_format",value:function _format(results){var finalOutput=[];this._log("\n\nOutput:\n\n",JSON.stringify(results));var transformers=[];if(this.options.includeMatches){transformers.push(function(result,data){var output=result.output;data.matches=[];for(var i=0,len=output.length;i<len;i+=1){var item=output[i];if(item.matchedIndices.length===0){continue}var obj={indices:item.matchedIndices,value:item.value};if(item.key){obj.key=item.key}if(item.hasOwnProperty("arrayIndex")&&item.arrayIndex>-1){obj.arrayIndex=item.arrayIndex}data.matches.push(obj)}})}if(this.options.includeScore){transformers.push(function(result,data){data.score=result.score})}for(var i=0,len=results.length;i<len;i+=1){var result=results[i];if(this.options.id){result.item=this.options.getFn(result.item,this.options.id)[0]}if(!transformers.length){finalOutput.push(result.item);continue}var data={item:result.item};for(var j=0,_len2=transformers.length;j<_len2;j+=1){transformers[j](result,data)}finalOutput.push(data)}return finalOutput}},{key:"_log",value:function _log(){if(this.options.verbose){var _console;(_console=console).log.apply(_console,arguments)}}}]);return Fuse}();module.exports=Fuse}])})},function(module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},function(module,exports,__webpack_require__){"use strict";var fields={"source.asjc_subject":{filter:true,label:"Subject",views:["bar","cloud"],displayOrder:9,fieldInformation:window.messages.prop("scholar.subject.information"),hideFilterByDefault:true},"source.title":{filter:true,label:"Journal",views:["bar"],displayOrder:7},"mesh_term.mesh_heading":{filter:true,label:"MeSH Heading",views:["bar","cloud"],displayOrder:10,fieldInformation:window.messages.prop("scholar.mesh_heading.information"),hideFilterByDefault:true},"chemical.substance_name":{filter:true,label:"Substance",views:["bar","cloud"],displayOrder:12,fieldInformation:window.messages.prop("scholar.chemical.information"),hideFilterByDefault:true},keyword:{filter:true,label:"Keywords",views:["bar","cloud"],displayOrder:13,hideFilterByDefault:true},"author.display_name.keyword":{filter:true,label:"Author",views:["bar"],displayOrder:4},"source.type":{label:"Source Type"},"reference.id":{filter:false,label:"Referenced by"},"author.affiliation.name.keyword":{filter:true,label:"Institution",views:["logo-grid","bar"],displayOrder:-1},"author.affiliation.grid.address.country_code":{filter:true,label:"Institution Country/Region",views:["map"],displayOrder:2,autosuggest:false},"funding.organisation.keyword":{filter:true,label:"Funding",views:["bar","cloud"],displayOrder:6},citation_id_type:{filter:true,label:"Identifier Type",views:["pie"],displayOrder:5,hideFilterByDefault:true,autosuggest:false},"clinical_trial.trial_id":{filter:false,label:"Clinical Trial"},sum_referenced_by_patent_count:{label:"Referenced by Patent Count"},title:{label:"Title"},dates:{label:"Year Published",views:["line"],displayOrder:1},year_published:{label:"Year Published"},referenced_by:{label:"Referenced by"},referenced_by_patent:{label:"Cited by patent"},referenced_by_scholarly:{label:"Cited by Scholarly Works"},open_access:{label:"Open Access"},"open_access.colour":{label:"Open Access Colour",filter:true,displayOrder:14,views:["pie","bar"],hideFilterByDefault:true},"open_access.license":{label:"Open Access License",filter:true,displayOrder:14,views:["bar","pie"],hideFilterByDefault:true},reference_count:{label:"Reference count"},crossref_reference_count:{label:"CrossRef reference count"},"conference.name":{label:"Conference",views:["bar"],displayOrder:8,filter:true},"conference.instance":{label:"Conference Instance"},"conference.year":{label:"Conference Year"},"conference.date":{label:"Conference Date"},"conference.location":{label:"Conference Location"},publication_type:{label:"Publication Type",filter:true,views:["bar"],displayOrder:8},has_field_of_study:{label:"Has field of study"},has_fulltext:{label:"Has Full Text"},field_of_study:{label:"Field of Study",filter:true,views:["bar"],displayOrder:11,fieldInformation:window.messages.prop("scholar.field_of_study.information"),hideFilterByDefault:true},language:{label:"Language"},is_open_access:{label:"Open Access"}};_.keys(fields).forEach(function(k){fields[k].key=k;if(fields[k].views){fields[k].currentView=fields[k].views[0]}var label=window.messages.prop("scholar.field."+k)||window.messages.prop("scholar.common."+k);var citedLabel=window.messages.prop("scholar.field."+k+".cited")||label;if(label){fields[k].label=label;fields[k].citedLabel=citedLabel}});module.exports=fields},function(module,exports,__webpack_require__){"use strict";module.exports=function(text){var split=function(text){var trimmed=$.trim(text);if(trimmed===""){return[]}return trimmed.replace(/,/g," ").split(" ")}(text);return _.uniq(_.filter(split,function(x){return!_.isEmpty($.trim(x))}))}},function(module,exports,__webpack_require__){"use strict";module.exports={render:function render(){return'<em class="fa fa-refresh fa-spin fa-3x fa-fw load-icon"></em>'}}},function(module,exports,__webpack_require__){"use strict";var LoadingSpinner=__webpack_require__(139);module.exports=function(){var arrowBoxSize=11;var verticalFitPosition=function verticalFitPosition(direction){return function(position,feedback){var scrollTop=$(document).scrollTop();var bottomOfScreen=$(window).height()+$(window).scrollTop();var height=$(this).height();var bottom=position.top+height;if(position.top<scrollTop){position.top=scrollTop}else if(bottom>=bottomOfScreen){var diff=bottom-bottomOfScreen;var newTop=position.top-diff;if(newTop>scrollTop){position.top=newTop}}$(this).css(position);var $target=$(feedback.target.element);$(this).find(".myarrows").remove();var targetTop=$target.offset().top;var thisTop=$(this).position().top;$("<div>").addClass("myarrows").addClass(direction).css({top:targetTop-thisTop-($target.height()-arrowBoxSize)/2+"px"}).appendTo(this)}};var horizontalFitCollision=function horizontalFitCollision(direction){return function(position,feedback){var screenWidth=$(document).width();var width=$(this).width();var positionRight=position.left+width;if(positionRight>screenWidth){position.left-=positionRight-screenWidth+100}$(this).css(position);var $target=$(feedback.target.element);$(this).find(".myarrows").remove();var targetLeft=$target.offset().left;var thisLeft=$(this).position().left;$("<div>").addClass("myarrows").addClass(direction).css({left:targetLeft-thisLeft+$target.outerWidth(true)/2+"px"}).appendTo(this)}};var positions={right:{at:"right+11 center",my:"left center",using:verticalFitPosition("left"),collision:"none"},left:{at:"left-11 center",my:"right center",using:verticalFitPosition("right"),collision:"none"},bottom:{at:"center bottom+11",my:"center top",using:horizontalFitCollision("top"),collision:"none"},top:{at:"center top-11",my:"center bottom",using:horizontalFitCollision("bottom"),collision:"none"},bottomfit:{at:"center bottom+11",my:"center top",using:horizontalFitCollision("top"),collision:"fit"}};return function(opts){var tooltipPosition=opts.tooltipPosition;var target=$(opts.target);var tooltipClass=opts.tooltipClass;var type=opts.type;var onOpen=opts.onOpen;var content=opts.content;var sticky=_.isUndefined(opts.sticky);var positionOpts=_.extend({},positions[tooltipPosition],{of:target});if(type==="ajax"){return target.tooltip({tooltipClass:tooltipClass,content:opts.loadingTemplate?ich[opts.loadingTemplate]():LoadingSpinner.render(),position:positionOpts,sticky:sticky,items:target,show:{delay:500},open:function open(event,ui){onOpen(event,ui).then(function(){$(ui.tooltip).position(positionOpts)}).fail(function(){})}})}else if(type==="local"){if(_.isUndefined(content)||$.trim($(content).text()).length<=1){return}return target.tooltip({tooltipClass:tooltipClass,content:content,position:positionOpts,sticky:opts.sticky,items:target,show:{delay:500},open:function open(event,ui){if(onOpen)onOpen(event,ui);$(ui.tooltip).position(positionOpts)}})}}}()},,function(module,exports,__webpack_require__){"use strict";module.exports=function(article){var id=article.external_ids[0].value;if(article.doi&&article.doi[0]){id=article.doi[0]}if(article.pmcid&&article.pmcid[0]){id=article.pmcid[0]}if(article.pmid&&article.pmid[0]){id=article.pmid[0]}if(article.record_lens_id){id=article.record_lens_id}return id}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=__webpack_require__(54);var core_1=__webpack_require__(21);var views_1=__webpack_require__(150);var templateFactory_1=__webpack_require__(352);var stateProvider_1=__webpack_require__(243);var onEnterExitRetain_1=__webpack_require__(353);var locationServices_1=__webpack_require__(354);var urlRouterProvider_1=__webpack_require__(244);angular_1.ng.module("ui.router.angular1",[]);var mod_init=angular_1.ng.module("ui.router.init",[]);var mod_util=angular_1.ng.module("ui.router.util",["ng","ui.router.init"]);var mod_rtr=angular_1.ng.module("ui.router.router",["ui.router.util"]);var mod_state=angular_1.ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]);var mod_main=angular_1.ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]);var mod_cmpt=angular_1.ng.module("ui.router.compat",["ui.router"]);var router=null;$uiRouter.$inject=["$locationProvider"];function $uiRouter($locationProvider){router=this.router=new core_1.UIRouter;router.stateProvider=new stateProvider_1.StateProvider(router.stateRegistry,router.stateService);router.stateRegistry.decorator("views",views_1.ng1ViewsBuilder);router.stateRegistry.decorator("onExit",onEnterExitRetain_1.getStateHookBuilder("onExit"));router.stateRegistry.decorator("onRetain",onEnterExitRetain_1.getStateHookBuilder("onRetain"));router.stateRegistry.decorator("onEnter",onEnterExitRetain_1.getStateHookBuilder("onEnter"));router.viewService._pluginapi._viewConfigFactory("ng1",views_1.getNg1ViewConfigFactory());var ng1LocationService=router.locationService=router.locationConfig=new locationServices_1.Ng1LocationServices($locationProvider);locationServices_1.Ng1LocationServices.monkeyPatchPathParameterType(router);router["router"]=router;router["$get"]=$get;$get.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"];function $get($location,$browser,$sniffer,$rootScope,$http,$templateCache){ng1LocationService._runtimeServices($rootScope,$location,$sniffer,$browser);delete router["router"];delete router["$get"];return router}return router}var getProviderFor=function(serviceName){return["$uiRouterProvider",function($urp){var service=$urp.router[serviceName];service["$get"]=function(){return service};return service}]};runBlock.$inject=["$injector","$q","$uiRouter"];function runBlock($injector,$q,$uiRouter){core_1.services.$injector=$injector;core_1.services.$q=$q;$uiRouter.stateRegistry.get().map(function(x){return x.$$state().resolvables}).reduce(core_1.unnestR,[]).filter(function(x){return x.deps==="deferred"}).forEach(function(resolvable){return resolvable.deps=$injector.annotate(resolvable.resolveFn,$injector.strictDi)})}var getUrlRouterProvider=function(uiRouter){return uiRouter.urlRouterProvider=new urlRouterProvider_1.UrlRouterProvider(uiRouter)};var getStateProvider=function(){return core_1.extend(router.stateProvider,{$get:function(){return router.stateService}})};watchDigests.$inject=["$rootScope"];function watchDigests($rootScope){$rootScope.$watch(function(){core_1.trace.approximateDigests++})}exports.watchDigests=watchDigests;mod_init.provider("$uiRouter",$uiRouter);mod_rtr.provider("$urlRouter",["$uiRouterProvider",getUrlRouterProvider]);mod_util.provider("$urlService",getProviderFor("urlService"));mod_util.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return router.urlMatcherFactory}]);mod_util.provider("$templateFactory",function(){return new templateFactory_1.TemplateFactory});mod_state.provider("$stateRegistry",getProviderFor("stateRegistry"));mod_state.provider("$uiRouterGlobals",getProviderFor("globals"));mod_state.provider("$transitions",getProviderFor("transitionService"));mod_state.provider("$state",["$uiRouterProvider",getStateProvider]);mod_state.factory("$stateParams",["$uiRouter",function($uiRouter){return $uiRouter.globals.params}]);mod_main.factory("$view",function(){return router.viewService});mod_main.service("$trace",function(){return core_1.trace});mod_main.run(watchDigests);mod_util.run(["$urlMatcherFactory",function($urlMatcherFactory){}]);mod_state.run(["$state",function($state){}]);mod_rtr.run(["$urlRouter",function($urlRouter){}]);mod_init.run(runBlock);exports.getLocals=function(ctx){var tokens=ctx.getTokens().filter(core_1.isString);var tuples=tokens.map(function(key){var resolvable=ctx.getResolvable(key);var waitPolicy=ctx.getPolicy(resolvable).async;return[key,waitPolicy==="NOWAIT"?resolvable.promise:resolvable.data]});return tuples.reduce(core_1.applyPairs,{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var glob_1=__webpack_require__(112);var predicates_1=__webpack_require__(2);var StateObject=function(){function StateObject(config){return StateObject.create(config||{})}StateObject.create=function(stateDecl){stateDecl=StateObject.isStateClass(stateDecl)?new stateDecl:stateDecl;var state=common_1.inherit(common_1.inherit(stateDecl,StateObject.prototype));stateDecl.$$state=function(){return state};state.self=stateDecl;state.__stateObjectCache={nameGlob:glob_1.Glob.fromString(state.name)};return state};StateObject.prototype.is=function(ref){return this===ref||this.self===ref||this.fqn()===ref};StateObject.prototype.fqn=function(){if(!this.parent||!(this.parent instanceof this.constructor))return this.name;var name=this.parent.fqn();return name?name+"."+this.name:this.name};StateObject.prototype.root=function(){return this.parent&&this.parent.root()||this};StateObject.prototype.parameters=function(opts){opts=common_1.defaults(opts,{inherit:true,matchingKeys:null});var inherited=opts.inherit&&this.parent&&this.parent.parameters()||[];return inherited.concat(common_1.values(this.params)).filter(function(param){return!opts.matchingKeys||opts.matchingKeys.hasOwnProperty(param.id)})};StateObject.prototype.parameter=function(id,opts){if(opts===void 0){opts={}}return this.url&&this.url.parameter(id,opts)||common_1.find(common_1.values(this.params),hof_1.propEq("id",id))||opts.inherit&&this.parent&&this.parent.parameter(id)};StateObject.prototype.toString=function(){return this.fqn()};StateObject.isStateClass=function(stateDecl){return predicates_1.isFunction(stateDecl)&&stateDecl["__uiRouterState"]===true};StateObject.isState=function(obj){return predicates_1.isObject(obj["__stateObjectCache"])};return StateObject}();exports.StateObject=StateObject},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Queue=function(){function Queue(_items,_limit){if(_items===void 0){_items=[]}if(_limit===void 0){_limit=null}this._items=_items;this._limit=_limit}Queue.prototype.enqueue=function(item){var items=this._items;items.push(item);if(this._limit&&items.length>this._limit)items.shift();return item};Queue.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]};Queue.prototype.clear=function(){var current=this._items;this._items=[];return current};Queue.prototype.size=function(){return this._items.length};Queue.prototype.remove=function(item){var idx=this._items.indexOf(item);return idx>-1&&this._items.splice(idx,1)[0]};Queue.prototype.peekTail=function(){return this._items[this._items.length-1]};Queue.prototype.peekHead=function(){if(this.size())return this._items[0]};return Queue}();exports.Queue=Queue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var interface_1=__webpack_require__(55);var glob_1=__webpack_require__(112);function matchState(state,criterion){var toMatch=predicates_1.isString(criterion)?[criterion]:criterion;function matchGlobs(_state){var globStrings=toMatch;for(var i=0;i<globStrings.length;i++){var glob=new glob_1.Glob(globStrings[i]);if(glob&&glob.matches(_state.name)||!glob&&globStrings[i]===_state.name){return true}}return false}var matchFn=predicates_1.isFunction(toMatch)?toMatch:matchGlobs;return!!matchFn(state)}exports.matchState=matchState;var RegisteredHook=function(){function RegisteredHook(tranSvc,eventType,callback,matchCriteria,options){if(options===void 0){options={}}this.tranSvc=tranSvc;this.eventType=eventType;this.callback=callback;this.matchCriteria=matchCriteria;this.priority=options.priority||0;this.bind=options.bind||null;this._deregistered=false}RegisteredHook.prototype._matchingNodes=function(nodes,criterion){if(criterion===true)return nodes;var matching=nodes.filter(function(node){return matchState(node.state,criterion)});return matching.length?matching:null};RegisteredHook.prototype._getDefaultMatchCriteria=function(){return common_1.map(this.tranSvc._pluginapi._getPathTypes(),function(){return true})};RegisteredHook.prototype._getMatchingNodes=function(treeChanges){var _this=this;var criteria=common_1.extend(this._getDefaultMatchCriteria(),this.matchCriteria);var paths=common_1.values(this.tranSvc._pluginapi._getPathTypes());return paths.reduce(function(mn,pathtype){var isStateHook=pathtype.scope===interface_1.TransitionHookScope.STATE;var path=treeChanges[pathtype.name]||[];var nodes=isStateHook?path:[common_1.tail(path)];mn[pathtype.name]=_this._matchingNodes(nodes,criteria[pathtype.name]);return mn},{})};RegisteredHook.prototype.matches=function(treeChanges){var matches=this._getMatchingNodes(treeChanges);var allMatched=common_1.values(matches).every(common_1.identity);return allMatched?matches:null};return RegisteredHook}();exports.RegisteredHook=RegisteredHook;function makeEvent(registry,transitionService,eventType){var _registeredHooks=registry._registeredHooks=registry._registeredHooks||{};var hooks=_registeredHooks[eventType.name]=[];registry[eventType.name]=hookRegistrationFn;function hookRegistrationFn(matchObject,callback,options){if(options===void 0){options={}}var registeredHook=new RegisteredHook(transitionService,eventType,callback,matchObject,options);hooks.push(registeredHook);return function deregisterEventHook(){registeredHook._deregistered=true;common_1.removeFrom(hooks)(registeredHook)}}return hookRegistrationFn}exports.makeEvent=makeEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var param_1=__webpack_require__(56);var PathNode=function(){function PathNode(stateOrNode){if(stateOrNode instanceof PathNode){var node=stateOrNode;this.state=node.state;this.paramSchema=node.paramSchema.slice();this.paramValues=common_1.extend({},node.paramValues);this.resolvables=node.resolvables.slice();this.views=node.views&&node.views.slice()}else{var state=stateOrNode;this.state=state;this.paramSchema=state.parameters({inherit:false});this.paramValues={};this.resolvables=state.resolvables.map(function(res){return res.clone()})}}PathNode.prototype.applyRawParams=function(params){var getParamVal=function(paramDef){return[paramDef.id,paramDef.value(params[paramDef.id])]};this.paramValues=this.paramSchema.reduce(function(memo,pDef){return common_1.applyPairs(memo,getParamVal(pDef))},{});return this};PathNode.prototype.parameter=function(name){return common_1.find(this.paramSchema,hof_1.propEq("id",name))};PathNode.prototype.equals=function(node,paramsFn){var diff=this.diff(node,paramsFn);return diff&&diff.length===0};PathNode.prototype.diff=function(node,paramsFn){if(this.state!==node.state)return false;var params=paramsFn?paramsFn(this):this.paramSchema;return param_1.Param.changed(params,this.paramValues,node.paramValues)};PathNode.clone=function(node){return new PathNode(node)};return PathNode}();exports.PathNode=PathNode},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var ParamType=function(){function ParamType(def){this.pattern=/.*/;this.inherit=true;common_1.extend(this,def)}ParamType.prototype.is=function(val,key){return true};ParamType.prototype.encode=function(val,key){return val};ParamType.prototype.decode=function(val,key){return val};ParamType.prototype.equals=function(a,b){return a==b};ParamType.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)};ParamType.prototype.toString=function(){return"{ParamType:"+this.name+"}"};ParamType.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)};ParamType.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if(mode==="auto"&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)};return ParamType}();exports.ParamType=ParamType;function ArrayType(type,mode){var _this=this;function arrayWrap(val){return predicates_1.isArray(val)?val:predicates_1.isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return mode==="auto"?val[0]:val;default:return val}}function arrayHandler(callback,allTruthyMode){return function handleArray(val){if(predicates_1.isArray(val)&&val.length===0)return val;var arr=arrayWrap(val);var result=common_1.map(arr,callback);return allTruthyMode===true?common_1.filter(result,function(x){return!x}).length===0:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function handleArray(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return false;for(var i=0;i<left.length;i++){if(!callback(left[i],right[i]))return false}return true}}["encode","decode","equals","$normalize"].forEach(function(name){var paramTypeFn=type[name].bind(type);var wrapperFn=name==="equals"?arrayEqualsHandler:arrayHandler;_this[name]=wrapperFn(paramTypeFn)});common_1.extend(this,{dynamic:type.dynamic,name:type.name,pattern:type.pattern,inherit:type.inherit,is:arrayHandler(type.is.bind(type),true),$arrayMode:mode})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var interface_1=__webpack_require__(55);var transition_1=__webpack_require__(113);var hookRegistry_1=__webpack_require__(146);var coreResolvables_1=__webpack_require__(336);var redirectTo_1=__webpack_require__(337);var onEnterExitRetain_1=__webpack_require__(338);var resolve_1=__webpack_require__(339);var views_1=__webpack_require__(340);var updateGlobals_1=__webpack_require__(341);var url_1=__webpack_require__(342);var lazyLoad_1=__webpack_require__(234);var transitionEventType_1=__webpack_require__(235);var transitionHook_1=__webpack_require__(94);var predicates_1=__webpack_require__(2);var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var ignoredTransition_1=__webpack_require__(343);var invalidTransition_1=__webpack_require__(344);exports.defaultTransOpts={location:true,relative:null,inherit:false,notify:true,reload:false,custom:{},current:function(){return null},source:"unknown"};var TransitionService=function(){function TransitionService(_router){this._transitionCount=0;this._eventTypes=[];this._registeredHooks={};this._criteriaPaths={};this._router=_router;this.$view=_router.viewService;this._deregisterHookFns={};this._pluginapi=common_1.createProxyFunctions(hof_1.val(this),{},hof_1.val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]);this._defineCorePaths();this._defineCoreEvents();this._registerCoreTransitionHooks()}TransitionService.prototype.onCreate=function(criteria,callback,options){return};TransitionService.prototype.onBefore=function(criteria,callback,options){return};TransitionService.prototype.onStart=function(criteria,callback,options){return};TransitionService.prototype.onExit=function(criteria,callback,options){return};TransitionService.prototype.onRetain=function(criteria,callback,options){return};TransitionService.prototype.onEnter=function(criteria,callback,options){return};TransitionService.prototype.onFinish=function(criteria,callback,options){return};TransitionService.prototype.onSuccess=function(criteria,callback,options){return};TransitionService.prototype.onError=function(criteria,callback,options){return};TransitionService.prototype.dispose=function(router){common_1.values(this._registeredHooks).forEach(function(hooksArray){return hooksArray.forEach(function(hook){hook._deregistered=true;common_1.removeFrom(hooksArray,hook)})})};TransitionService.prototype.create=function(fromPath,targetState){return new transition_1.Transition(fromPath,targetState,this._router)};TransitionService.prototype._defineCoreEvents=function(){var Phase=interface_1.TransitionHookPhase;var TH=transitionHook_1.TransitionHook;var paths=this._criteriaPaths;var NORMAL_SORT=false,REVERSE_SORT=true;var ASYNCHRONOUS=false,SYNCHRONOUS=true;this._defineEvent("onCreate",Phase.CREATE,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.THROW_ERROR,SYNCHRONOUS);this._defineEvent("onBefore",Phase.BEFORE,0,paths.to);this._defineEvent("onStart",Phase.RUN,0,paths.to);this._defineEvent("onExit",Phase.RUN,100,paths.exiting,REVERSE_SORT);this._defineEvent("onRetain",Phase.RUN,200,paths.retained);this._defineEvent("onEnter",Phase.RUN,300,paths.entering);this._defineEvent("onFinish",Phase.RUN,400,paths.to);this._defineEvent("onSuccess",Phase.SUCCESS,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,SYNCHRONOUS);this._defineEvent("onError",Phase.ERROR,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,SYNCHRONOUS)};TransitionService.prototype._defineCorePaths=function(){var STATE=interface_1.TransitionHookScope.STATE,TRANSITION=interface_1.TransitionHookScope.TRANSITION;this._definePathType("to",TRANSITION);this._definePathType("from",TRANSITION);this._definePathType("exiting",STATE);this._definePathType("retained",STATE);this._definePathType("entering",STATE)};TransitionService.prototype._defineEvent=function(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){if(reverseSort===void 0){reverseSort=false}if(getResultHandler===void 0){getResultHandler=transitionHook_1.TransitionHook.HANDLE_RESULT}if(getErrorHandler===void 0){getErrorHandler=transitionHook_1.TransitionHook.REJECT_ERROR}if(synchronous===void 0){synchronous=false}var eventType=new transitionEventType_1.TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous);this._eventTypes.push(eventType);hookRegistry_1.makeEvent(this,this,eventType)};TransitionService.prototype._getEvents=function(phase){var transitionHookTypes=predicates_1.isDefined(phase)?this._eventTypes.filter(function(type){return type.hookPhase===phase}):this._eventTypes.slice();return transitionHookTypes.sort(function(l,r){var cmpByPhase=l.hookPhase-r.hookPhase;return cmpByPhase===0?l.hookOrder-r.hookOrder:cmpByPhase})};TransitionService.prototype._definePathType=function(name,hookScope){this._criteriaPaths[name]={name:name,scope:hookScope}};TransitionService.prototype._getPathTypes=function(){return this._criteriaPaths};TransitionService.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]};TransitionService.prototype._registerCoreTransitionHooks=function(){var fns=this._deregisterHookFns;fns.addCoreResolves=coreResolvables_1.registerAddCoreResolvables(this);fns.ignored=ignoredTransition_1.registerIgnoredTransitionHook(this);fns.invalid=invalidTransition_1.registerInvalidTransitionHook(this);fns.redirectTo=redirectTo_1.registerRedirectToHook(this);fns.onExit=onEnterExitRetain_1.registerOnExitHook(this);fns.onRetain=onEnterExitRetain_1.registerOnRetainHook(this);fns.onEnter=onEnterExitRetain_1.registerOnEnterHook(this);fns.eagerResolve=resolve_1.registerEagerResolvePath(this);fns.lazyResolve=resolve_1.registerLazyResolveState(this);fns.loadViews=views_1.registerLoadEnteringViews(this);fns.activateViews=views_1.registerActivateViews(this);fns.updateGlobals=updateGlobals_1.registerUpdateGlobalState(this);fns.updateUrl=url_1.registerUpdateUrl(this);fns.lazyLoad=lazyLoad_1.registerLazyLoadHook(this)};return TransitionService}();exports.TransitionService=TransitionService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=__webpack_require__(21);function getNg1ViewConfigFactory(){var templateFactory=null;return function(path,view){templateFactory=templateFactory||core_1.services.$injector.get("$templateFactory");return[new Ng1ViewConfig(path,view,templateFactory)]}}exports.getNg1ViewConfigFactory=getNg1ViewConfigFactory;var hasAnyKey=function(keys,obj){return keys.reduce(function(acc,key){return acc||core_1.isDefined(obj[key])},false)};function ng1ViewsBuilder(state){if(!state.parent)return{};var tplKeys=["templateProvider","templateUrl","template","notify","async"],ctrlKeys=["controller","controllerProvider","controllerAs","resolveAs"],compKeys=["component","bindings","componentProvider"],nonCompKeys=tplKeys.concat(ctrlKeys),allViewKeys=compKeys.concat(nonCompKeys);if(core_1.isDefined(state.views)&&hasAnyKey(allViewKeys,state)){throw new Error("State '"+state.name+"' has a 'views' object. "+'It cannot also have "view properties" at the state level.  '+"Move the following properties into a view (in the 'views' object): "+(" "+allViewKeys.filter(function(key){return core_1.isDefined(state[key])}).join(", ")))}var views={},viewsObject=state.views||{$default:core_1.pick(state,allViewKeys)};core_1.forEach(viewsObject,function(config,name){name=name||"$default";if(core_1.isString(config))config={component:config};config=core_1.extend({},config);if(hasAnyKey(compKeys,config)&&hasAnyKey(nonCompKeys,config)){throw new Error("Cannot combine: "+compKeys.join("|")+" with: "+nonCompKeys.join("|")+" in stateview: '"+name+"@"+state.name+"'")}config.resolveAs=config.resolveAs||"$resolve";config.$type="ng1";config.$context=state;config.$name=name;var normalized=core_1.ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName;config.$uiViewContextAnchor=normalized.uiViewContextAnchor;views[name]=config});return views}exports.ng1ViewsBuilder=ng1ViewsBuilder;var id=0;var Ng1ViewConfig=function(){function Ng1ViewConfig(path,viewDecl,factory){var _this=this;this.path=path;this.viewDecl=viewDecl;this.factory=factory;this.$id=id++;this.loaded=false;this.getTemplate=function(uiView,context){return _this.component?_this.factory.makeComponentTemplate(uiView,context,_this.component,_this.viewDecl.bindings):_this.template}}Ng1ViewConfig.prototype.load=function(){var _this=this;var $q=core_1.services.$q;var context=new core_1.ResolveContext(this.path);var params=this.path.reduce(function(acc,node){return core_1.extend(acc,node.paramValues)},{});var promises={template:$q.when(this.factory.fromConfig(this.viewDecl,params,context)),controller:$q.when(this.getController(context))};return $q.all(promises).then(function(results){core_1.trace.traceViewServiceEvent("Loaded",_this);_this.controller=results.controller;core_1.extend(_this,results.template);return _this})};Ng1ViewConfig.prototype.getController=function(context){var provider=this.viewDecl.controllerProvider;if(!core_1.isInjectable(provider))return this.viewDecl.controller;var deps=core_1.services.$injector.annotate(provider);var providerFn=core_1.isArray(provider)?core_1.tail(provider):provider;var resolvable=new core_1.Resolvable("",providerFn,deps);return resolvable.get(context)};return Ng1ViewConfig}();exports.Ng1ViewConfig=Ng1ViewConfig},function(module,exports,__webpack_require__){"use strict";var DialogView=__webpack_require__(26);var exportProgressTemplate=window.Handlebars.compile(__webpack_require__(253));var Notification=__webpack_require__(10);var notification=new Notification;var validateFilename=function validateFilename(){var filename=$("#efn").val();var valid=filename===encodeURIComponent(filename);$("#efn-invalid").toggle(!valid);return valid};module.exports=Backbone.View.extend({initialize:function initialize(opts){this.dialogOpts=_.extend({},opts)},render:function render(content,focusOn){var token=(new Date).getTime().toString();var exportUrl;var defaultExportUrlPathFn=function defaultExportUrlPathFn(){var path=location.pathname;var search_reg=/\/lens\/search/;var coll_reg=/\/lens\/collection/;var bio_reg=/\/lens\/bio/;if(path.search(search_reg)!==-1){return path.replace(search_reg,"/lens/export")}else if(path.search(coll_reg)!==-1){return path.replace(coll_reg,"/lens/export/collection")}else if(path.search(bio_reg)!==-1){return path.replace(bio_reg,"/lens/export/bio")}else{console.log("Can't create export URL for path "+path);return"#"}};var exportUrlPathFn=this.dialogOpts.exportUrlPathFn||defaultExportUrlPathFn;var isAsync=false;var expDialogOpts={maxWidth:500,yesButton:{text:messages.prop("export.action.export"),validate:validateFilename,onClick:function onClick(){exportUrl=makeExportUrl();isAsync=$("#exportForm").find("input[name=async]:checked").val()==="true"}},noButton:{text:messages.prop("common.action.cancel")},title:this.dialogOpts.title,afterShow:function afterShow(){$("#exportForm").find(":input").filter(":visible").first().focus();$("#exportForm").find("input").on("keydown",function(e){if(e.keyCode===13){e.preventDefault();e.stopPropagation();return false}});window.initTooltips(this.content)},afterYesClose:function afterYesClose(){if(isAsync){$.ajax({method:"GET",url:exportUrl}).then(function(res){notification.notify(window.messages.prop("export.async.success"),{life:5e3})})}else{showWaitDialog()}}};new DialogView(expDialogOpts).render(ich["exportTemplate"]());$("#efn").change(validateFilename);function makeExportUrl(){var proto=location.protocol;var host=location.host;var query=location.search;var path=exportUrlPathFn();var params=$.deparam.querystring(query);$("#exportForm").find(":input").each(function(){params[$(this).attr("name")]=$(this).val()});params["p"]="0";params["etk"]=token;isAsync=$("#exportForm").find("input[name=async]:checked").val()==="true";params["async"]=isAsync;return proto+"//"+host+path+"?"+$.param(params,true)}function showWaitDialog(){var defaults={maxWidth:400,maxHeight:800,minWidth:400,fitToView:true,openEffect:"none",closeEffect:"none",modal:true};var downloadTimer;var waitTime=60;function beforeShow(){var $progress=$($.fancybox.inner).find("#progressBar");$progress.progressbar({max:waitTime});var i=0;downloadTimer=window.setInterval(function(){++i;if(i<=60){$progress.progressbar({value:i})}else{$progress.progressbar({value:false})}},1e3)}function finish(ok){window.clearInterval(downloadTimer);var $content=$($.fancybox.inner);var $progress=$content.find("#progressBar");var $okButton=$content.find("button.ok");var $message=$content.find("#message");$progress.hide();if(ok){$message.html(messages.prop("export.download.success"))}else{$message.hide();var $error=$content.find("#error");$error.html(messages.prop("export.download.error"));$error.show()}$okButton.click(function(){$.fancybox.close()});$okButton.show();$okButton.focus();$.fancybox.update()}$.fancybox(_.extend({},defaults,{beforeShow:beforeShow,content:exportProgressTemplate(),title:undefined}));$.fileDownload(exportUrl,{cookieName:"etk",cookieValue:token,cookiePath:"/lens/",successCallback:function successCallback(url){finish(true)},failCallback:function failCallback(html,url){finish(false)}})}}})},function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(455),createBaseEach=__webpack_require__(458);var baseEach=createBaseEach(baseForOwn);module.exports=baseEach},function(module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isObjectLike=__webpack_require__(20);var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments},function(module,exports){function stubFalse(){return false}module.exports=stubFalse},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(12),isLength=__webpack_require__(59),isObjectLike=__webpack_require__(20);var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(44);var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(exports,__webpack_require__(28)(module))},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(40),nativeKeys=__webpack_require__(159);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}module.exports=baseKeys},function(module,exports,__webpack_require__){var overArg=__webpack_require__(98);var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},function(module,exports,__webpack_require__){var baseMatches=__webpack_require__(459),baseMatchesProperty=__webpack_require__(470),identity=__webpack_require__(103),isArray=__webpack_require__(6),property=__webpack_require__(474);function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}module.exports=baseIteratee},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(22);function stackClear(){this.__data__=new ListCache;this.size=0}module.exports=stackClear},function(module,exports){function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}module.exports=stackDelete},function(module,exports){function stackGet(key){return this.__data__.get(key)}module.exports=stackGet},function(module,exports){function stackHas(key){return this.__data__.has(key)}module.exports=stackHas},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(22),Map=__webpack_require__(30),MapCache=__webpack_require__(35);var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}module.exports=stackSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8),root=__webpack_require__(3);var DataView=getNative(root,"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8),root=__webpack_require__(3);var Promise=getNative(root,"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8),root=__webpack_require__(3);var Set=getNative(root,"Set");module.exports=Set},function(module,exports,__webpack_require__){var getNative=__webpack_require__(8),root=__webpack_require__(3);var WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var moment=window.moment;exports.default=function(spec){var a=spec.split(":");var op=a[0].slice(0,1);var type=a[0].slice(1,a[0].length);var b=a[1].split("-");var start=b[0];var end=b[1];return{op:op,type:type,start:moment(start,"YYYYMMDD").toDate(),end:moment(end,"YYYYMMDD").toDate()}}},function(module,exports,__webpack_require__){"use strict";var getParams=function getParams(map){var params={page:"0",limit:"10",orderBy:"+patents"};if(map.filterMap){map.filterMap=JSON.stringify(map.filterMap)}return _.extend(params,map)};module.exports=[{label:'Scholarly Works authored by "Craig Venter"',url:"/lens/scholar/search/results?q=author.display_name:(%22Craig%20Venter%22)",type:"SCHOLAR"},{label:'Scholarly works on "CRISPR" technology ',url:"/lens/scholar/search/results?q=field_of_study:CRISPR%20OR%20keyword:CRISPR%20OR%20mesh_term.mesh_heading:CRISPR*&filterMap=%7B%7D",type:"SCHOLAR"},{label:'Scholarly works by "Harvard University" authors in Medicince',url:"/lens/scholar/search/results?q=author.affiliation.name:(%22Harvard%20University%22)%20AND%20field_of_study:Medicine&filterMap=%7B%7D",type:"SCHOLAR"},{label:'Scholarly works from the "International Symposium on Computer and Information Sciences" published in 2011 ',url:"/lens/scholar/search/results?q=conference.instance:(%22ISCIS%202011%22)%20OR%20conference.name:(%22International%20Symposium%20on%20Computer%20and%20Information%20Sciences%22)&page=0&limit=10&orderBy=%2Bscore&filterMap=%7B%7D&fromYear=2011&toYear=2011&dateFilterField=year_published&previewType=SCHOLAR_ANALYSIS&preview=false&regexEnabled=false",type:"SCHOLAR"},{label:'Scholarly works on "Solar Power Generation"',url:"/lens/scholar/search/results?q=title:(%22solar%20power%20generation%22)%20OR%20abstract:(%22solar%20power%20generation%22)%20OR%20fulltext:(%22solar%20power%20generation%22)%20OR%20title:(%22photovoltaic%20power%20generation%22)%20OR%20abstract:(%22photovoltaic%20power%20generation%22)%20OR%20fulltext:(%22photovoltaic%20power%20generation%22)",type:"SCHOLAR"},{label:"Scholarly works with clinical trials and UK funding",url:"/lens/scholar/search/results?q=funding.country:(%22United%20Kingdom%22)%20AND%20has_clinical_trial:true",type:"SCHOLAR"},{label:"Scholarly works with clinical trials cited by patents",url:"/lens/scholar/search/results?q=is_referenced_by_patent:true%20AND%20has_clinical_trial:true",type:"SCHOLAR"},{label:"Open access scholarly works cited by patents",url:"/lens/scholar/search/results?q=is_referenced_by_patent:true&filterMap=%7B%22is_open_access%22:true%7D",type:"SCHOLAR"},{label:'Patents with "Solar Power" or "Photovoltaic Power" in the title/abstract/claims',url:"/lens/search?q=title:(%22solar%20power%22)%20OR%20abstract:(%22solar%20power%22)%20OR%20claims:(%22solar%20power%22)%20OR%20title:(%22photovoltaic%20power%22)%20OR%20abstract:(%22photovoltaic%20power%22)%20OR%20claims:(%22photovoltaic%20power%22)&l=en&st=true&preview=true",type:"PATENT"},{label:'US Patents with "Electric" and "Bicycle" in the abstract',url:"/lens/search?q=abstract:electric%20AND%20bicycle&l=en&st=true&preview=true&j=US",type:"PATENT"},{label:'Patents referencing "climate change" in the full text',url:"/lens/search?n=10&q=full_text:%20%22climate%20Change%22&p=0",type:"PATENT"},{label:'Patents with "Breast cancer gene" in the claims',url:"/lens/search?n=10&q=claims:%20%22breast%20cancer%20gene%22&p=0",type:"PATENT"},{label:'Patents with applicant "Mary Anderson"',url:"/lens/search?n=10&q=applicant:%20%22Mary%20Anderson%22&p=0",type:"PATENT"},{label:'Patents by inventor "Stephanie Kwolek"',url:"/lens/search?q=inventor:(Stephanie%20Kwolek)&l=en&st=true&preview=true",type:"PATENT"},{label:"Which technology sectors has IBM been involved in",url:"/lens/search?q=owner:(%22International%20business%20machines%20corporation%22)%20OR%20owner:%22IBM%22%20OR%20applicant:(%22International%20business%20machines%20corporation%22)%20OR%20applicant:%22IBM%22&l=en&st=true&preview=true",type:"PATENT"},{label:"IBM published patent applications over time ",url:"/lens/search?types=Patent%20Application&l=en&st=true&n=10&q=owner:%20(International%20business%20machine%20OR%20IBM)%20OR%20applicant:%20(International%20business%20machine%20OR%20IBM)&v=table&p=0&s=filing_date&d=-",type:"PATENT"},{label:"Patents filed by MIT",url:"/lens/search?n=10&q=applicant:%20%22MIT%22%20OR%20%22Massachusetts%20Institute%20of%20Technology%22&preview=true&p=0",type:"PATENT"},{label:"Most recent articles in Nature Journal",type:"SCHOLAR",params:getParams({orderBy:"+published",filterMap:{"source.title":{Nature:true}},showFacet:{"source.title":true}})},{label:'Most patent citations for MeSH Term: "Glucuronidase"',type:"SCHOLAR",params:getParams({filterMap:{"mesh_term.mesh_heading":{Glucuronidase:true}},showFacet:{"mesh_term.mesh_heading":true}})},{label:'Query "malaria vaccine" with open access / fulltext',type:"SCHOLAR",params:getParams({q:"malaria",filterMap:{citation_id_type:{pmcid:true}}})},{label:'Substance "Sildenafil Citrate" with funding data, but no clinical trial data',params:getParams({filterMap:{"chemical.substance_name":{"Sildenafil Citrate":true},has_funding:true,has_clinical_trial:false}})},{label:"Subject Oncology with no funding data",params:getParams({filterMap:{"source.asjc_subject":{Oncology:true},has_funding:false}})},{label:"All Japanese publications between 1900 and 1930",params:getParams({dateFilterField:"year_published",fromYear:1900,toYear:1930,filterMap:{"source.country":{Japan:true}}})},{label:"Citation ID 3327686",params:getParams({q:'citation_id:"3327686"'})}]},function(module,exports,__webpack_require__){"use strict";var templates={publisher:{pmid:function pmid(id){return"http://www.ncbi.nlm.nih.gov/pubmed/"+id+"?holding=lens"},pmcid:function pmcid(id){return"https://www.ncbi.nlm.nih.gov/pmc/articles/"+id.toUpperCase()},pmc:function pmc(id){return"https://www.ncbi.nlm.nih.gov/pmc/articles/"+id.toUpperCase()},doi:function doi(id){return"http://dx.doi.org/"+id},magid:function magid(id){return"https://academic.microsoft.com/#/detail/"+id.slice(3)},core:function core(id){return"https://core.ac.uk/display/"+id.slice(4)}},clinicalTrial:{"10.18810/clinical-trials-gov":function clinicalTrialsGov(id){return"https://clinicaltrials.gov/ct2/show/"+id},"10.18810/anzctr":function anzctr(id){return"http://www.anzctr.org.au/TrialSearch.aspx?searchTxt="+id+"&isBasic=True"},"10.18810/euctr":function euctr(id){return"https://www.clinicaltrialsregister.eu/ctr-search/search?query="+id}}};module.exports=function(type,key,value){var template=templates[type][key];if(template){return template(value)}return null}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={unknown:"License information unavailable or does not exist.",missing:"License information unavailable or does not exist.","cc-by":"This license lets others distribute, remix, tweak, and build upon your work, even commercially, as long as they credit you for the original creation. This is the most accommodating of licenses offered. Recommended for maximum dissemination and use of licensed materials.","cc-by-nc-nd":"This license is the most restrictive of our six main licenses, only allowing others to download your works and share them with others as long as they credit you, but they can’t change them in any way or use them commercially.","cc-by-nc":"This license lets others remix, tweak, and build upon your work non-commercially, and although their new works must also acknowledge you and be non-commercial, they don’t have to license their derivative works on the same terms.","cc-by-nc-sa":"This license lets others remix, tweak, and build upon your work non-commercially, as long as they credit you and license their new creations under the identical terms.","cc-by-sa":"This license lets others remix, tweak, and build upon your work even for commercial purposes, as long as they credit you and license their new creations under the identical terms. This license is often compared to “copyleft” free and open source software licenses. All new works based on yours will carry the same license, so any derivatives will also allow commercial use. This is the license used by Wikipedia, and is recommended for materials that would benefit from incorporating content from Wikipedia and similarly licensed projects.",cc0:"Public Domain Dedication, allows others may freely build upon, enhance and reuse the works for any purposes without restriction under copyright or database law.","cc-by-nd":"This license allows for redistribution, commercial and non-commercial, as long as it is passed along unchanged and in whole, with credit to you.","implied-oa":"Has evidence that an OA license of some kind was used, but it’s not reported directly on the webpage at this location.","elsevier-specific: oa user license":"Articles published under an Elsevier user license are protected by copyright and may be used for non-commercial purposes. Users may access, download, copy, translate, text mine and data mine the articles.","publisher-specific":"Each license is specific to the publishers terms and conditions. ",pd:"Public domain equivalent license are licenses that grant public-domain-like rights or/and act as waivers. "}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={gold:"Published in an open-access journal that is indexed by the DOAJ.",green:"Toll-access on the publisher page, but there is a free copy in an OA repository.",hybrid:"Free under an open license in a toll-access journal.",bronze:"Free to read on the publisher page, but without a clearly identifiable license.",closed:"All other articles, including those shared only on an ASN or in Sci-Hub."}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var EXPORT_FIELDS=exports.EXPORT_FIELDS=["RECORD_LENS_ID","CLINICAL_TRIALS","CITATION_IDS","LANGUAGES","JOURNAL_COUNTRY","JOURNAL_ISSN","JOURNAL_PUBLISHER","JOURNAL_TITLE","TITLE","FIELDS_OF_STUDY","DATE_PUBLISHED","YEAR_PUBLISHED","PUBLICATION_TYPE","PUBLICATION_SUPPLEMENTARY_TYPE","KEYWORDS","FUNDING","ISSUE","START_PAGE","END_PAGE","AUTHORS","ABSTRACT","VOLUME","MESH_TERMS","CHEMICALS","SOURCE_URLS","REFERENCED_BY_PATENT_COUNT","PMID","DOI","MAG_ID","PMCID","REFERENCES_LENS_IDS","REFERENCED_BY_COUNT"];var UNSUPPORTED_EXPORT_FIELDS=exports.UNSUPPORTED_EXPORT_FIELDS={CSV:["CLINICAL_TRIALS","CITATION_IDS"],RIS:["PMID","DOI","MAG_ID","PMCID"],BIBTEX:["PMID","DOI","MAG_ID","PMCID"],JSON:["PMID","DOI","MAG_ID","PMCID"]}},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(32),castPath=__webpack_require__(34),isIndex=__webpack_require__(39),isObject=__webpack_require__(9),toKey=__webpack_require__(25);function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}module.exports=baseSet},function(module,exports,__webpack_require__){var baseClone=__webpack_require__(178);var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}module.exports=cloneDeep},function(module,exports,__webpack_require__){var Stack=__webpack_require__(99),arrayEach=__webpack_require__(179),assignValue=__webpack_require__(32),baseAssign=__webpack_require__(180),baseAssignIn=__webpack_require__(181),cloneBuffer=__webpack_require__(184),copyArray=__webpack_require__(185),copySymbols=__webpack_require__(186),copySymbolsIn=__webpack_require__(187),getAllKeys=__webpack_require__(129),getAllKeysIn=__webpack_require__(188),getTag=__webpack_require__(130),initCloneArray=__webpack_require__(189),initCloneByTag=__webpack_require__(190),initCloneObject=__webpack_require__(199),isArray=__webpack_require__(6),isBuffer=__webpack_require__(58),isObject=__webpack_require__(9),keys=__webpack_require__(27);var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}module.exports=baseClone},function(module,exports){function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}module.exports=arrayEach},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(29),keys=__webpack_require__(27);function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}module.exports=baseAssign},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(29),keysIn=__webpack_require__(105);function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}module.exports=baseAssignIn},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9),isPrototype=__webpack_require__(40),nativeKeysIn=__webpack_require__(183);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=baseKeysIn},function(module,exports){function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}module.exports=nativeKeysIn},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(3);var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}module.exports=cloneBuffer}).call(exports,__webpack_require__(28)(module))},function(module,exports){function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}module.exports=copyArray},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(29),getSymbols=__webpack_require__(48);function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}module.exports=copySymbols},function(module,exports,__webpack_require__){var copyObject=__webpack_require__(29),getSymbolsIn=__webpack_require__(106);function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}module.exports=copySymbolsIn},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(100),getSymbolsIn=__webpack_require__(106),keysIn=__webpack_require__(105);function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}module.exports=getAllKeysIn},function(module,exports){var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}module.exports=initCloneArray},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(49),cloneDataView=__webpack_require__(191),cloneMap=__webpack_require__(192),cloneRegExp=__webpack_require__(194),cloneSet=__webpack_require__(195),cloneSymbol=__webpack_require__(197),cloneTypedArray=__webpack_require__(198);var boolTag="[object Boolean]",dateTag="[object Date]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}module.exports=initCloneByTag},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(49);function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}module.exports=cloneDataView},function(module,exports,__webpack_require__){var addMapEntry=__webpack_require__(193),arrayReduce=__webpack_require__(108),mapToArray=__webpack_require__(127);var CLONE_DEEP_FLAG=1;function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}module.exports=cloneMap},function(module,exports){function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}module.exports=addMapEntry},function(module,exports){var reFlags=/\w*$/;function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}module.exports=cloneRegExp},function(module,exports,__webpack_require__){var addSetEntry=__webpack_require__(196),arrayReduce=__webpack_require__(108),setToArray=__webpack_require__(128);var CLONE_DEEP_FLAG=1;function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}module.exports=cloneSet},function(module,exports){function addSetEntry(set,value){set.add(value);return set}module.exports=addSetEntry},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}module.exports=cloneSymbol},function(module,exports,__webpack_require__){var cloneArrayBuffer=__webpack_require__(49);function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}module.exports=cloneTypedArray},function(module,exports,__webpack_require__){var baseCreate=__webpack_require__(200),getPrototype=__webpack_require__(107),isPrototype=__webpack_require__(40);function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}module.exports=initCloneObject},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();module.exports=baseCreate},function(module,exports,__webpack_require__){"use strict";var m=window.messages.prop;module.exports={"+score":{key:"_score",orderByReverse:false,label:m("sorting.rank")},"+referenced_by_count":{key:"referenced_by_count",orderByReverse:false,label:"Scholarly Citations"+" ↑"},"-referenced_by_count":{key:"referenced_by_count",orderByReverse:true,label:"Scholarly Citations"+" ↓"},"+patents":{key:"referenced_by_patent_count",orderByReverse:false,label:m("scholar.sort.patent.citations")+" ↑"},"-patents":{key:"referenced_by_patent_count",orderByReverse:true,label:m("scholar.sort.patent.citations")+" ↓"},"+published":{key:"published",label:m("sorting.pub.date.asce")||"Publish Date ↑",multi:{year_published:{order:"desc"},date_published:{order:"desc"}}},"-published":{key:"published",label:m("sorting.pub.date.desc")||"Publish Date ↓",multi:{year_published:{order:"asc"},date_published:{missing:"_first",order:"asc"}}},"+type":{key:"source.type",orderByReverse:false,label:m("scholar.sort.source.type")+" ↑"},"-type":{key:"source.type",orderByReverse:true,label:m("scholar.sort.source.type")+" ↓"},"+asjc_code":{key:"source.asjc_code",orderByReverse:false,label:m("scholar.sort.source.subject")+" ↑"},"-asjc_code":{key:"source.asjc_code",orderByReverse:true,label:m("scholar.sort.source.subject")+" ↓"}}},function(module,exports){module.exports='<div>\n    <div style="position: relative;">\n\n        <div class="heatmap-container">\n            <div class="heatmap-item" ng-repeat="item in data | orderBy:orderBy:(orderBy===\'value\')">\n                <div class="heatmap-item-inner" ng-style="fieldItemStyle(item.value)">\n                    <span ng-click="clickItem(item)"\n                        ng-class="{link: clickItem !== undefined}"\n                    >\n                        {{::item.label}}\n                    </span>\n                    <strong>{{::item.value | customNumber}}</strong>\n                </div>\n            </div>\n        </div>\n\n        <div class="clearfix">\n            <div class="heatmap-legend-container">\n                <span>>{{max | customNumber}}</span>\n                <span>0</span>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var BiologicalsFilter=__webpack_require__(581);var ChooseMoreFilterView=__webpack_require__(582);var CitedArticlesFilterView=__webpack_require__(583);var DatesFilter=__webpack_require__(586);var JurisdictionsFilter=__webpack_require__(587);var RealNameFilter=__webpack_require__(588);var WorkspaceFilter=__webpack_require__(589);var LocalStorageService=__webpack_require__(7);var TagsAutocompleteInputView=__webpack_require__(280);var excludeFieldName=__webpack_require__(204);var localStorageService=new LocalStorageService;var FacetsView=Backbone.View.extend({el:"#facetsSidebar",events:{submit:"onSubmit","click .closeFilter":"removeFilter","keyup input":"handleKeys","mouseenter #excludeFilters-tip-trigger":"toggleHelp","mouseleave #excludeFilters-tip-trigger":"toggleHelp","click .clearFilter":"clear","click .clear-all":"clearAll"},initialize:function initialize(opts){opts=opts||{};$("#facets-list").find("> li").each(function(){var el=$(this);function isActive(el){return el.find("span.count").length>0}function wasOpen(el){var rel=el.find("> h5").attr("rel");return _.contains(opts.openFacets,rel)}el.accordion({collapsible:true,active:isActive(el)||wasOpen(el)?0:false,heightStyle:"content"});if(!isActive(el)){el.find(".clearFilter").hide()}el.one("change","input",function(){el.find(".clearFilter").show()})});this.initTooltips();this._init()},_init:function _init(){new BiologicalsFilter;new JurisdictionsFilter({el:"#filterJurisdictions",op:"jo",jurs:"j"});new JurisdictionsFilter({el:"#filterFamily",jurs:"fj"});new WorkspaceFilter;this.realNameFilterViews=[new RealNameFilter({el:"#filterInventors"}),new RealNameFilter({el:"#filterApplicants"}),new RealNameFilter({el:"#filterOwners"})];this.chooseMoreFilterViews=[new ChooseMoreFilterView({el:"#filterDOIs",facetName:"doi"}),new ChooseMoreFilterView({el:"#filterPmids",facetName:"pmid"}),new ChooseMoreFilterView({el:"#filterInventors",facetName:"inventor"}),new ChooseMoreFilterView({el:"#filterApplicants",facetName:"applicant"}),new ChooseMoreFilterView({el:"#filterOwners",facetName:"owner"})];new CitedArticlesFilterView({el:"#filterCitedArticles",facetName:"npl"});new DatesFilter;new TagsAutocompleteInputView({$cache:$("#tagCache"),el:$("#filterCollections").find("#tagFilter")});this.$("#filterClassifications fieldset .checkbox").each(function(i,el){var $el=$(el);try{$el.addClass("show-icon-on-hover");var symbol=$el.find("input").val();var type=$el.closest("fieldset").find("legend").data("type");var icon=$('<em class="fa fa-info-circle col-sec">');var link=$("<a>");link.on("click",function(e){e.preventDefault();var scope=window.angular.element(document.body).scope();scope.$root.classificationViewer={type:type,term:symbol};scope.$apply()});link.html(icon);$el.append(link)}catch(e){console.warn(e)}});this.$("#filterInventors .search-orcid").on("click",function(e){e.preventDefault();var scope=window.angular.element(document.body).scope();scope.$apply(function(){scope.$root.orcidExplorer=true})});window.initTooltips(this.$el);window.initTristateCheckboxes(this.$el);var formFields=[];_.each(this.$("input"),function(x){var attr=$(x).attr("name");if(attr){formFields.push(attr)}});_.each(this.$("select"),function(x){var attr=$(x).attr("name");if(attr){formFields.push(attr)}});this.formFields=_.uniq(formFields)},initTooltips:function initTooltips(){_.bindAll(this,"toggleHelp");var view=this;view.$el.find(".dontShowAgain").on("click",function(){localStorageService.set("tips.excludeFilters");$(".ignoreTristateTip").remove()});view.$el.find(".ignoreTristateTip").on("click",function(){view.toggleHelp();localStorageService.set("tips.excludeFilters");$(".ignoreTristateTip").remove()});view.tooltipOverlay=$('<div class="overlay-ttip"></div>');this.tooltip=this.$el.find("#excludeFilters-tip-trigger").tooltipster({animation:"grow",theme:"tooltipster-shadow",trigger:"custom",interactive:true,maxWidth:400,functionReady:function functionReady(){$(".tooltipster-base").addClass("ttip-walk-through");$(".tooltipster-base").after(view.tooltipOverlay)},side:"top"});this.helpTooltipState="close";var showTip=localStorageService.get("tips.excludeFilters");if(showTip){_.defer(this.toggleHelp)}else{$(".ignoreTristateTip").remove()}},toggleHelp:function toggleHelp(){this.helpTooltipState=this.helpTooltipState==="close"?"open":"close";this.tooltip.tooltipster(this.helpTooltipState);if(this.helpTooltipState==="close"){this.tooltipOverlay.remove()}else{this.tooltipOverlay.one("click",this.toggleHelp)}},toggleFilter:function toggleFilter(e){e.preventDefault();var $clicked=$(e.currentTarget);var wasActive=$clicked.hasClass("active");$clicked.toggleClass("active");var $filters=this.$("#filters");var rel=$clicked.attr("rel");if(wasActive){this.$(rel).slideToggle(250)}else{this.$(rel).insertBefore($filters.children().first()).slideToggle(250)}},handleKeys:function handleKeys(e){e.preventDefault();if(e.keyCode===13){this.onSubmit(e)}},onSubmit:function onSubmit(e){e.preventDefault();var form=this._process(this._cloneForm(),false);form.submit()},clearAll:function clearAll(e){e.preventDefault();this._clear(this.$el,true)},clear:function clear(e){e.preventDefault();this._clear($(e.currentTarget).closest(".filterGroup"),false)},_clear:function _clear($scope,clearingAll){var $clonedForm=this._cloneForm();_.each($scope.find("input"),function(x){var $x=$(x);var name=$x.attr("name");_.each($clonedForm.find('input[name="'+name+'"]'),function(x){$(x).attr("disabled","disabled")})});$scope.find("input:checked").prop("checked",false);$scope.find("input:indeterminate").remove();$clonedForm.find("input:indeterminate").remove();$scope.find('input[type="text"]').val("");$clonedForm.find('select[name="l"]').val($scope.find("#locale").val()||"en");this._process($clonedForm,clearingAll).submit()},removeFilter:function removeFilter(e){var $clonedForm=this._cloneForm();$(e.currentTarget).parent().hide(100);var $p=$(e.currentTarget).closest(".filterGroup");_.each($p.find("input"),function(x){_.each($clonedForm.find('input[name="'+$(x).prop("name")+'"]'),function(y){$(y).attr("disabled","disabled")})});this._process($clonedForm,false).submit()},_process:function _process($form,clearingAllFacets){var formData=$form.serializeObject();if(!formData["j"]&&_.has(formData,"jo"))$form.find('input[name="jo"]').attr("disabled","disabled");$("body").remove("#clonedForm").append($form);$form.find('input[name="dateGroup"]').attr("disabled","disabled");function nonFacetParam(param){return _.contains(["n","q","s","d","p","scholarlySearchId"],param)}var unmanaged=_.omit($.deparam.querystring(),this.formFields);unmanaged["p"]="0";delete unmanaged["locale"];_.each(unmanaged,function(v,k){var value=!clearingAllFacets||nonFacetParam(k)?v:"";var excludeFields=_.map(["doi","pmid","inventor","applicant","owner","types","j","fj","classIpcr","classNat","classCpc","so"],excludeFieldName);if(excludeFields.indexOf(k)===-1){var input=document.createElement("input");input.name=k;input.value=value;$form.append(input)}});_.each($form.find("input"),function(x){var $x=$(x);if($.trim($x.prop("value"))===""){$x.attr("disabled","disabled")}});if(!clearingAllFacets){_.each($form.find("input.tristate[indeterminate]"),function(x){$form.append("<input name='"+excludeFieldName(x.name)+"' value='"+x.value+"' />")})}return $form},_cloneForm:function _cloneForm(){var $x=$(this.$("#facetsForm").clone()).hide().attr("id","clonedForm");$x.find("#st").val(this.$("#st").val());$x.find("#l").val(this.$("#l").val());return $x}});module.exports=FacetsView},function(module,exports,__webpack_require__){"use strict";module.exports=function(name){return"not"+name[0].toUpperCase()+name.substring(1)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(value){value=value.trim();var numberValue=parseFloat(value);var isDoi=value.slice(0,3)==="10.";var isPMC=value.slice(0,3)==="pmc";var isMAG=value.slice(0,3)==="mag";var isCore=value.slice(0,4)==="core";var isLens=value.match(/^\d{3}-\d{3}-\d{3}-\d{3}-\d{2}(\d|[Xx])/);var isPmid=!isMAG&&!_.isNaN(numberValue)&&Math.floor(numberValue)===numberValue;return{isDoi:isDoi,isPMC:isPMC,isPmid:isPmid,isMAG:isMAG,isLens:isLens,isCore:isCore}}},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({el:"#searchForm-form",events:{submit:"onSubmit"},initialize:function initialize(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.facetsView=opts.facetsView;window.LENS.searchFormInitialized=true;_.bindAll(this,"apply");$.vent.on("filters/apply",this.apply);var formFields=[];_.each(this.$("input"),function(x){var attr=$(x).attr("name");if(attr){formFields.push(attr)}});this.formFields=_.uniq(formFields);if(window.location.pathname==="/lens/search/collections"){this.$el.find("#searchButton").text("Search Collections")}},onSubmit:function onSubmit(e){e.preventDefault();if(window.location.pathname==="/lens/search/collections"){var params=window.location.hash.split("/").slice(0,4);var term=this.$el.find("#q").val();params.push(term);window.location.hash=params.join("/");return false}var form=this._cloneForm();form.submit()},apply:function apply(opts){var $clone=this._cloneForm();_.each(opts,function(v,k){_.each($clone.find('input[name="'+k+'"]'),function(x){$(x).attr("disabled","disabled")});var values=[v];if(_.isArray(v)){values=v}_.each(values,function(value){$clone.append($('<input name="'+k+'" checked="checked"/>').attr("value",value))})});$clone.submit()},_cloneForm:function _cloneForm(){var unmanaged=_.omit($.deparam.querystring(),this.formFields);unmanaged["p"]="0";var $clone=$(this.$el.clone()).hide().attr("id","clonedForm");$("body").remove("#clonedForm").append($clone);_.each(unmanaged,function(v,k){$clone.append($("<input>").attr("name",k).attr("value",v))});return $clone}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var urlFromObject=exports.urlFromObject=function urlFromObject(search){var query=search.query,collectionId=search.collectionId;var filters=_.keys(search.filters).map(function(k){var arr=search.filters[k];return arr.length?arr.map(function(v){return k+"="+window.encodeURIComponent(v)}).join("&"):""}).filter(function(d){return d}).join("&");var url="?q="+(query.q||"")+"&"+filters;if(collectionId){url+="&collectionId="+collectionId}return url};var filterMapFromObject=exports.filterMapFromObject=function filterMapFromObject(_ref){var filters=_ref.filters;var filterMap={};var hasFilter=function hasFilter(k){return filters[k].length>0};_.keys(filters).filter(hasFilter).forEach(function(k){var exclude=k.indexOf("not")===0;var key=k;if(exclude){key=k.slice(3).toLowerCase()}if(k.endsWith("F")){key=key.slice(0,-1)}if(!filterMap[key]){filterMap[key]={}}if(_.isArray(filters[k])){filters[k].forEach(function(v){filterMap[key][v]=!exclude})}else{filterMap[key][filters[k]]=!exclude}});_.keys(filters).filter(function(k){return _.isBoolean(filters[k])}).forEach(function(k){filterMap[k]=_defineProperty({},true,true)});return filterMap}},function(module,exports,__webpack_require__){(function(module){(function(){var Dropzone,Emitter,ExifRestore,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,slice=[].slice,extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;noop=function(){};Emitter=function(){function Emitter(){}Emitter.prototype.addEventListener=Emitter.prototype.on;Emitter.prototype.on=function(event,fn){this._callbacks=this._callbacks||{};if(!this._callbacks[event]){this._callbacks[event]=[]}this._callbacks[event].push(fn);return this};Emitter.prototype.emit=function(){var args,callback,callbacks,event,j,len;event=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[];this._callbacks=this._callbacks||{};callbacks=this._callbacks[event];if(callbacks){for(j=0,len=callbacks.length;j<len;j++){callback=callbacks[j];callback.apply(this,args)}}return this};Emitter.prototype.removeListener=Emitter.prototype.off;Emitter.prototype.removeAllListeners=Emitter.prototype.off;Emitter.prototype.removeEventListener=Emitter.prototype.off;Emitter.prototype.off=function(event,fn){var callback,callbacks,i,j,len;if(!this._callbacks||arguments.length===0){this._callbacks={};return this}callbacks=this._callbacks[event];if(!callbacks){return this}if(arguments.length===1){delete this._callbacks[event];return this}for(i=j=0,len=callbacks.length;j<len;i=++j){callback=callbacks[i];if(callback===fn){callbacks.splice(i,1);break}}return this};return Emitter}();Dropzone=function(superClass){var extend,resolveOption;extend1(Dropzone,superClass);Dropzone.prototype.Emitter=Emitter;Dropzone.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];Dropzone.prototype.defaultOptions={url:null,method:"post",withCredentials:false,timeout:3e4,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,params:{},headers:null,clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:false,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){return noop},accept:function(file,done){return done()},fallback:function(){var child,j,len,messageElement,ref,span;this.element.className=this.element.className+" dz-browser-not-supported";ref=this.element.getElementsByTagName("div");for(j=0,len=ref.length;j<len;j++){child=ref[j];if(/(^| )dz-message($| )/.test(child.className)){messageElement=child;child.className="dz-message";continue}}if(!messageElement){messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(messageElement)}span=messageElement.getElementsByTagName("span")[0];if(span){if(span.textContent!=null){span.textContent=this.options.dictFallbackMessage}else if(span.innerText!=null){span.innerText=this.options.dictFallbackMessage}}return this.element.appendChild(this.getFallbackForm())},resize:function(file,width,height,resizeMethod){var info,srcRatio,trgRatio;info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height};srcRatio=file.width/file.height;if(width==null&&height==null){width=info.srcWidth;height=info.srcHeight}else if(width==null){width=height*srcRatio}else if(height==null){height=width/srcRatio}width=Math.min(width,info.srcWidth);height=Math.min(height,info.srcHeight);trgRatio=width/height;if(info.srcWidth>width||info.srcHeight>height){if(resizeMethod==="crop"){if(srcRatio>trgRatio){info.srcHeight=file.height;info.srcWidth=info.srcHeight*trgRatio}else{info.srcWidth=file.width;info.srcHeight=info.srcWidth/trgRatio}}else if(resizeMethod==="contain"){if(srcRatio>trgRatio){height=width/srcRatio}else{width=height*srcRatio}}else{throw new Error("Unknown resizeMethod '"+resizeMethod+"'")}}info.srcX=(file.width-info.srcWidth)/2;info.srcY=(file.height-info.srcHeight)/2;info.trgWidth=width;info.trgHeight=height;return info},transformFile:function(file,done){if((this.options.resizeWidth||this.options.resizeHeight)&&file.type.match(/image.*/)){return this.resizeImage(file,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,done)}else{return done(file)}},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:noop,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var j,k,l,len,len1,len2,node,ref,ref1,ref2,removeFileEvent,removeLink,results;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim());file.previewTemplate=file.previewElement;this.previewsContainer.appendChild(file.previewElement);ref=file.previewElement.querySelectorAll("[data-dz-name]");for(j=0,len=ref.length;j<len;j++){node=ref[j];node.textContent=file.name}ref1=file.previewElement.querySelectorAll("[data-dz-size]");for(k=0,len1=ref1.length;k<len1;k++){node=ref1[k];node.innerHTML=this.filesize(file.size)}if(this.options.addRemoveLinks){file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");file.previewElement.appendChild(file._removeLink)}removeFileEvent=function(_this){return function(e){e.preventDefault();e.stopPropagation();if(file.status===Dropzone.UPLOADING){return Dropzone.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(file)})}else{if(_this.options.dictRemoveFileConfirmation){return Dropzone.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(file)})}else{return _this.removeFile(file)}}}}(this);ref2=file.previewElement.querySelectorAll("[data-dz-remove]");results=[];for(l=0,len2=ref2.length;l<len2;l++){removeLink=ref2[l];results.push(removeLink.addEventListener("click",removeFileEvent))}return results}},removedfile:function(file){var ref;if(file.previewElement){if((ref=file.previewElement)!=null){ref.parentNode.removeChild(file.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){var j,len,ref,thumbnailElement;if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");ref=file.previewElement.querySelectorAll("[data-dz-thumbnail]");for(j=0,len=ref.length;j<len;j++){thumbnailElement=ref[j];thumbnailElement.alt=file.name;thumbnailElement.src=dataUrl}return setTimeout(function(_this){return function(){return file.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(file,message){var j,len,node,ref,results;if(file.previewElement){file.previewElement.classList.add("dz-error");if(typeof message!=="String"&&message.error){message=message.error}ref=file.previewElement.querySelectorAll("[data-dz-errormessage]");results=[];for(j=0,len=ref.length;j<len;j++){node=ref[j];results.push(node.textContent=message)}return results}},errormultiple:noop,processing:function(file){if(file.previewElement){file.previewElement.classList.add("dz-processing");if(file._removeLink){return file._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:noop,uploadprogress:function(file,progress,bytesSent){var j,len,node,ref,results;if(file.previewElement){ref=file.previewElement.querySelectorAll("[data-dz-uploadprogress]");results=[];for(j=0,len=ref.length;j<len;j++){node=ref[j];if(node.nodeName==="PROGRESS"){results.push(node.value=progress)}else{results.push(node.style.width=progress+"%")}}return results}},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(file){if(file.previewElement){return file.previewElement.classList.add("dz-success")}},successmultiple:noop,canceled:function(file){return this.emit("error",file,"Upload canceled.")},canceledmultiple:noop,complete:function(file){if(file._removeLink){file._removeLink.textContent=this.options.dictRemoveFile}if(file.previewElement){return file.previewElement.classList.add("dz-complete")}},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,queuecomplete:noop,addedfiles:noop};extend=function(){var j,key,len,object,objects,target,val;target=arguments[0],objects=2<=arguments.length?slice.call(arguments,1):[];for(j=0,len=objects.length;j<len;j++){object=objects[j];for(key in object){val=object[key];target[key]=val}}return target};function Dropzone(element1,options){var elementOptions,fallback,ref;this.element=element1;this.version=Dropzone.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&this.element.nodeType!=null)){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}Dropzone.instances.push(this);this.element.dropzone=this;elementOptions=(ref=Dropzone.optionsForElement(this.element))!=null?ref:{};this.options=extend({},this.defaultOptions,elementOptions,options!=null?options:{});if(this.options.forceFallback||!Dropzone.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}if(this.options.renameFilename!=null){this.options.renameFile=function(_this){return function(file){return _this.options.renameFilename.call(_this,file.name,file)}}(this)}this.options.method=this.options.method.toUpperCase();if((fallback=this.getExistingFallback())&&fallback.parentNode){fallback.parentNode.removeChild(fallback)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable")}}this.init()}Dropzone.prototype.getAcceptedFiles=function(){var file,j,len,ref,results;ref=this.files;results=[];for(j=0,len=ref.length;j<len;j++){file=ref[j];if(file.accepted){results.push(file)}}return results};Dropzone.prototype.getRejectedFiles=function(){var file,j,len,ref,results;ref=this.files;results=[];for(j=0,len=ref.length;j<len;j++){file=ref[j];if(!file.accepted){results.push(file)}}return results};Dropzone.prototype.getFilesWithStatus=function(status){var file,j,len,ref,results;ref=this.files;results=[];for(j=0,len=ref.length;j<len;j++){file=ref[j];if(file.status===status){results.push(file)}}return results};Dropzone.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(Dropzone.QUEUED)};Dropzone.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(Dropzone.UPLOADING)};Dropzone.prototype.getAddedFiles=function(){return this.getFilesWithStatus(Dropzone.ADDED)};Dropzone.prototype.getActiveFiles=function(){var file,j,len,ref,results;ref=this.files;results=[];for(j=0,len=ref.length;j<len;j++){file=ref[j];if(file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED){results.push(file)}}return results};Dropzone.prototype.init=function(){var eventName,j,len,noPropagation,ref,ref1,setupHiddenFileInput;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){setupHiddenFileInput=function(_this){return function(){if(_this.hiddenFileInput){_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput)}_this.hiddenFileInput=document.createElement("input");_this.hiddenFileInput.setAttribute("type","file");if(_this.options.maxFiles==null||_this.options.maxFiles>1){_this.hiddenFileInput.setAttribute("multiple","multiple")}_this.hiddenFileInput.className="dz-hidden-input";if(_this.options.acceptedFiles!=null){_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles)}if(_this.options.capture!=null){_this.hiddenFileInput.setAttribute("capture",_this.options.capture)}_this.hiddenFileInput.style.visibility="hidden";_this.hiddenFileInput.style.position="absolute";_this.hiddenFileInput.style.top="0";_this.hiddenFileInput.style.left="0";_this.hiddenFileInput.style.height="0";_this.hiddenFileInput.style.width="0";document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);return _this.hiddenFileInput.addEventListener("change",function(){var file,files,j,len;files=_this.hiddenFileInput.files;if(files.length){for(j=0,len=files.length;j<len;j++){file=files[j];_this.addFile(file)}}_this.emit("addedfiles",files);return setupHiddenFileInput()})}}(this);setupHiddenFileInput()}this.URL=(ref=window.URL)!=null?ref:window.webkitURL;ref1=this.events;for(j=0,len=ref1.length;j<len;j++){eventName=ref1[j];this.on(eventName,this.options[eventName])}this.on("uploadprogress",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this));this.on("removedfile",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this));this.on("canceled",function(_this){return function(file){return _this.emit("complete",file)}}(this));this.on("complete",function(_this){return function(file){if(_this.getAddedFiles().length===0&&_this.getUploadingFiles().length===0&&_this.getQueuedFiles().length===0){return setTimeout(function(){return _this.emit("queuecomplete")},0)}}}(this));noPropagation=function(e){e.stopPropagation();if(e.preventDefault){return e.preventDefault()}else{return e.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function(_this){return function(e){return _this.emit("dragstart",e)}}(this),dragenter:function(_this){return function(e){noPropagation(e);return _this.emit("dragenter",e)}}(this),dragover:function(_this){return function(e){var efct;try{efct=e.dataTransfer.effectAllowed}catch(undefined){}e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy";noPropagation(e);return _this.emit("dragover",e)}}(this),dragleave:function(_this){return function(e){return _this.emit("dragleave",e)}}(this),drop:function(_this){return function(e){noPropagation(e);return _this.drop(e)}}(this),dragend:function(_this){return function(e){return _this.emit("dragend",e)}}(this)}}];this.clickableElements.forEach(function(_this){return function(clickableElement){return _this.listeners.push({element:clickableElement,events:{click:function(evt){if(clickableElement!==_this.element||(evt.target===_this.element||Dropzone.elementInside(evt.target,_this.element.querySelector(".dz-message")))){_this.hiddenFileInput.click()}return true}}})}}(this));this.enable();return this.options.init.call(this)};Dropzone.prototype.destroy=function(){var ref;this.disable();this.removeAllFiles(true);if((ref=this.hiddenFileInput)!=null?ref.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)};Dropzone.prototype.updateTotalUploadProgress=function(){var activeFiles,file,j,len,ref,totalBytes,totalBytesSent,totalUploadProgress;totalBytesSent=0;totalBytes=0;activeFiles=this.getActiveFiles();if(activeFiles.length){ref=this.getActiveFiles();for(j=0,len=ref.length;j<len;j++){file=ref[j];totalBytesSent+=file.upload.bytesSent;totalBytes+=file.upload.total}totalUploadProgress=100*totalBytesSent/totalBytes}else{totalUploadProgress=100}return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)};Dropzone.prototype._getParamName=function(n){if(typeof this.options.paramName==="function"){return this.options.paramName(n)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")}};Dropzone.prototype._renameFile=function(file){if(typeof this.options.renameFile!=="function"){return file.name}return this.options.renameFile(file)};Dropzone.prototype.getFallbackForm=function(){var existingFallback,fields,fieldsString,form;if(existingFallback=this.getExistingFallback()){return existingFallback}fieldsString='<div class="dz-fallback">';if(this.options.dictFallbackText){fieldsString+="<p>"+this.options.dictFallbackText+"</p>"}fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';fields=Dropzone.createElement(fieldsString);if(this.element.tagName!=="FORM"){form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');form.appendChild(fields)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return form!=null?form:fields};Dropzone.prototype.getExistingFallback=function(){var fallback,getFallback,j,len,ref,tagName;getFallback=function(elements){var el,j,len;for(j=0,len=elements.length;j<len;j++){el=elements[j];if(/(^| )fallback($| )/.test(el.className)){return el}}};ref=["div","form"];for(j=0,len=ref.length;j<len;j++){tagName=ref[j];if(fallback=getFallback(this.element.getElementsByTagName(tagName))){return fallback}}};Dropzone.prototype.setupEventListeners=function(){var elementListeners,event,j,len,listener,ref,results;ref=this.listeners;results=[];for(j=0,len=ref.length;j<len;j++){elementListeners=ref[j];results.push(function(){var ref1,results1;ref1=elementListeners.events;results1=[];for(event in ref1){listener=ref1[event];results1.push(elementListeners.element.addEventListener(event,listener,false))}return results1}())}return results};Dropzone.prototype.removeEventListeners=function(){var elementListeners,event,j,len,listener,ref,results;ref=this.listeners;results=[];for(j=0,len=ref.length;j<len;j++){elementListeners=ref[j];results.push(function(){var ref1,results1;ref1=elementListeners.events;results1=[];for(event in ref1){listener=ref1[event];results1.push(elementListeners.element.removeEventListener(event,listener,false))}return results1}())}return results};Dropzone.prototype.disable=function(){var file,j,len,ref,results;this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")});this.removeEventListeners();ref=this.files;results=[];for(j=0,len=ref.length;j<len;j++){file=ref[j];results.push(this.cancelUpload(file))}return results};Dropzone.prototype.enable=function(){this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")});return this.setupEventListeners()};Dropzone.prototype.filesize=function(size){var cutoff,i,j,len,selectedSize,selectedUnit,unit,units;selectedSize=0;selectedUnit="b";if(size>0){units=["tb","gb","mb","kb","b"];for(i=j=0,len=units.length;j<len;i=++j){unit=units[i];cutoff=Math.pow(this.options.filesizeBase,4-i)/10;if(size>=cutoff){selectedSize=size/Math.pow(this.options.filesizeBase,4-i);selectedUnit=unit;break}}selectedSize=Math.round(10*selectedSize)/10}return"<strong>"+selectedSize+"</strong> "+this.options.dictFileSizeUnits[selectedUnit]};Dropzone.prototype._updateMaxFilesReachedClass=function(){if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};Dropzone.prototype.drop=function(e){var files,items;if(!e.dataTransfer){return}this.emit("drop",e);files=e.dataTransfer.files;this.emit("addedfiles",files);if(files.length){items=e.dataTransfer.items;if(items&&items.length&&items[0].webkitGetAsEntry!=null){this._addFilesFromItems(items)}else{this.handleFiles(files)}}};Dropzone.prototype.paste=function(e){var items,ref;if((e!=null?(ref=e.clipboardData)!=null?ref.items:void 0:void 0)==null){return}this.emit("paste",e);items=e.clipboardData.items;if(items.length){return this._addFilesFromItems(items)}};Dropzone.prototype.handleFiles=function(files){var file,j,len,results;results=[];for(j=0,len=files.length;j<len;j++){file=files[j];results.push(this.addFile(file))}return results};Dropzone.prototype._addFilesFromItems=function(items){var entry,item,j,len,results;results=[];for(j=0,len=items.length;j<len;j++){item=items[j];if(item.webkitGetAsEntry!=null&&(entry=item.webkitGetAsEntry())){if(entry.isFile){results.push(this.addFile(item.getAsFile()))}else if(entry.isDirectory){results.push(this._addFilesFromDirectory(entry,entry.name))}else{results.push(void 0)}}else if(item.getAsFile!=null){if(item.kind==null||item.kind==="file"){results.push(this.addFile(item.getAsFile()))}else{results.push(void 0)}}else{results.push(void 0)}}return results};Dropzone.prototype._addFilesFromDirectory=function(directory,path){var dirReader,errorHandler,readEntries;dirReader=directory.createReader();errorHandler=function(error){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(error):void 0:void 0};readEntries=function(_this){return function(){return dirReader.readEntries(function(entries){var entry,j,len;if(entries.length>0){for(j=0,len=entries.length;j<len;j++){entry=entries[j];if(entry.isFile){entry.file(function(file){if(_this.options.ignoreHiddenFiles&&file.name.substring(0,1)==="."){return}file.fullPath=path+"/"+file.name;return _this.addFile(file)})}else if(entry.isDirectory){_this._addFilesFromDirectory(entry,path+"/"+entry.name)}}readEntries()}return null},errorHandler)}}(this);return readEntries()};Dropzone.prototype.accept=function(file,done){if(file.size>this.options.maxFilesize*1024*1024){return done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else if(!Dropzone.isValidFile(file,this.options.acceptedFiles)){return done(this.options.dictInvalidFileType)}else if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",file)}else{return this.options.accept.call(this,file,done)}};Dropzone.prototype.addFile=function(file){file.upload={progress:0,total:file.size,bytesSent:0,filename:this._renameFile(file)};this.files.push(file);file.status=Dropzone.ADDED;this.emit("addedfile",file);this._enqueueThumbnail(file);return this.accept(file,function(_this){return function(error){if(error){file.accepted=false;_this._errorProcessing([file],error)}else{file.accepted=true;if(_this.options.autoQueue){_this.enqueueFile(file)}}return _this._updateMaxFilesReachedClass()}}(this))};Dropzone.prototype.enqueueFiles=function(files){var file,j,len;for(j=0,len=files.length;j<len;j++){file=files[j];this.enqueueFile(file)}return null};Dropzone.prototype.enqueueFile=function(file){if(file.status===Dropzone.ADDED&&file.accepted===true){file.status=Dropzone.QUEUED;if(this.options.autoProcessQueue){return setTimeout(function(_this){return function(){return _this.processQueue()}}(this),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};Dropzone.prototype._thumbnailQueue=[];Dropzone.prototype._processingThumbnail=false;Dropzone.prototype._enqueueThumbnail=function(file){if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(file);return setTimeout(function(_this){return function(){return _this._processThumbnailQueue()}}(this),0)}};Dropzone.prototype._processThumbnailQueue=function(){var file;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;file=this._thumbnailQueue.shift();return this.createThumbnail(file,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,true,function(_this){return function(dataUrl){_this.emit("thumbnail",file,dataUrl);_this._processingThumbnail=false;return _this._processThumbnailQueue()}}(this))};Dropzone.prototype.removeFile=function(file){if(file.status===Dropzone.UPLOADING){this.cancelUpload(file)}this.files=without(this.files,file);this.emit("removedfile",file);if(this.files.length===0){return this.emit("reset")}};Dropzone.prototype.removeAllFiles=function(cancelIfNecessary){var file,j,len,ref;if(cancelIfNecessary==null){cancelIfNecessary=false}ref=this.files.slice();for(j=0,len=ref.length;j<len;j++){file=ref[j];if(file.status!==Dropzone.UPLOADING||cancelIfNecessary){this.removeFile(file)}}return null};Dropzone.prototype.resizeImage=function(file,width,height,resizeMethod,callback){return this.createThumbnail(file,width,height,resizeMethod,false,function(_this){return function(dataUrl,canvas){var resizeMimeType,resizedDataURL;if(canvas===null){return callback(file)}else{resizeMimeType=_this.options.resizeMimeType;if(resizeMimeType==null){resizeMimeType=file.type}resizedDataURL=canvas.toDataURL(resizeMimeType,_this.options.resizeQuality);if(resizeMimeType==="image/jpeg"||resizeMimeType==="image/jpg"){resizedDataURL=ExifRestore.restore(file.dataURL,resizedDataURL)}return callback(Dropzone.dataURItoBlob(resizedDataURL))}}}(this))};Dropzone.prototype.createThumbnail=function(file,width,height,resizeMethod,fixOrientation,callback){var fileReader;fileReader=new FileReader;fileReader.onload=function(_this){return function(){file.dataURL=fileReader.result;if(file.type==="image/svg+xml"){if(callback!=null){callback(fileReader.result)}return}return _this.createThumbnailFromUrl(file,width,height,resizeMethod,fixOrientation,callback)}}(this);return fileReader.readAsDataURL(file)};Dropzone.prototype.createThumbnailFromUrl=function(file,width,height,resizeMethod,fixOrientation,callback,crossOrigin){var img;img=document.createElement("img");if(crossOrigin){img.crossOrigin=crossOrigin}img.onload=function(_this){return function(){var loadExif;loadExif=function(callback){return callback(1)};if(typeof EXIF!=="undefined"&&EXIF!==null&&fixOrientation){loadExif=function(callback){return EXIF.getData(img,function(){return callback(EXIF.getTag(this,"Orientation"))})}}return loadExif(function(orientation){var canvas,ctx,ref,ref1,ref2,ref3,resizeInfo,thumbnail;file.width=img.width;file.height=img.height;resizeInfo=_this.options.resize.call(_this,file,width,height,resizeMethod);canvas=document.createElement("canvas");ctx=canvas.getContext("2d");canvas.width=resizeInfo.trgWidth;canvas.height=resizeInfo.trgHeight;if(orientation>4){canvas.width=resizeInfo.trgHeight;canvas.height=resizeInfo.trgWidth}switch(orientation){case 2:ctx.translate(canvas.width,0);ctx.scale(-1,1);break;case 3:ctx.translate(canvas.width,canvas.height);ctx.rotate(Math.PI);break;case 4:ctx.translate(0,canvas.height);ctx.scale(1,-1);break;case 5:ctx.rotate(.5*Math.PI);ctx.scale(1,-1);break;case 6:ctx.rotate(.5*Math.PI);ctx.translate(0,-canvas.height);break;case 7:ctx.rotate(.5*Math.PI);ctx.translate(canvas.width,-canvas.height);ctx.scale(-1,1);break;case 8:ctx.rotate(-.5*Math.PI);ctx.translate(-canvas.width,0)}drawImageIOSFix(ctx,img,(ref=resizeInfo.srcX)!=null?ref:0,(ref1=resizeInfo.srcY)!=null?ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,(ref2=resizeInfo.trgX)!=null?ref2:0,(ref3=resizeInfo.trgY)!=null?ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight);thumbnail=canvas.toDataURL("image/png");if(callback!=null){return callback(thumbnail,canvas)}})}}(this);if(callback!=null){img.onerror=callback}return img.src=file.dataURL};Dropzone.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;parallelUploads=this.options.parallelUploads;processingLength=this.getUploadingFiles().length;i=processingLength;if(processingLength>=parallelUploads){return}queuedFiles=this.getQueuedFiles();if(!(queuedFiles.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength))}else{while(i<parallelUploads){if(!queuedFiles.length){return}this.processFile(queuedFiles.shift());i++}}};Dropzone.prototype.processFile=function(file){return this.processFiles([file])};Dropzone.prototype.processFiles=function(files){var file,j,len;for(j=0,len=files.length;j<len;j++){file=files[j];file.processing=true;file.status=Dropzone.UPLOADING;this.emit("processing",file)}if(this.options.uploadMultiple){this.emit("processingmultiple",files)}return this.uploadFiles(files)};Dropzone.prototype._getFilesWithXhr=function(xhr){var file,files;return files=function(){var j,len,ref,results;ref=this.files;results=[];for(j=0,len=ref.length;j<len;j++){file=ref[j];if(file.xhr===xhr){results.push(file)}}return results}.call(this)};Dropzone.prototype.cancelUpload=function(file){var groupedFile,groupedFiles,j,k,len,len1,ref;if(file.status===Dropzone.UPLOADING){groupedFiles=this._getFilesWithXhr(file.xhr);for(j=0,len=groupedFiles.length;j<len;j++){groupedFile=groupedFiles[j];groupedFile.status=Dropzone.CANCELED}file.xhr.abort();for(k=0,len1=groupedFiles.length;k<len1;k++){groupedFile=groupedFiles[k];this.emit("canceled",groupedFile)}if(this.options.uploadMultiple){this.emit("canceledmultiple",groupedFiles)}}else if((ref=file.status)===Dropzone.ADDED||ref===Dropzone.QUEUED){file.status=Dropzone.CANCELED;this.emit("canceled",file);if(this.options.uploadMultiple){this.emit("canceledmultiple",[file])}}if(this.options.autoProcessQueue){return this.processQueue()}};resolveOption=function(){var args,option;option=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[];if(typeof option==="function"){return option.apply(this,args)}return option};Dropzone.prototype.uploadFile=function(file){return this.uploadFiles([file])};Dropzone.prototype.uploadFiles=function(files){var doneCounter,doneFunction,file,formData,handleError,headerName,headerValue,headers,i,input,inputName,inputType,j,k,key,l,len,len1,len2,len3,m,method,o,option,progressObj,ref,ref1,ref2,ref3,ref4,ref5,response,results,updateProgress,url,value,xhr;xhr=new XMLHttpRequest;for(j=0,len=files.length;j<len;j++){file=files[j];file.xhr=xhr}method=resolveOption(this.options.method,files);url=resolveOption(this.options.url,files);xhr.open(method,url,true);xhr.timeout=resolveOption(this.options.timeout,files);xhr.withCredentials=!!this.options.withCredentials;response=null;handleError=function(_this){return function(){var k,len1,results;results=[];for(k=0,len1=files.length;k<len1;k++){file=files[k];results.push(_this._errorProcessing(files,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr))}return results}}(this);updateProgress=function(_this){return function(e){var allFilesFinished,k,l,len1,len2,len3,m,progress,results;if(e!=null){progress=100*e.loaded/e.total;for(k=0,len1=files.length;k<len1;k++){file=files[k];file.upload.progress=progress;file.upload.total=e.total;file.upload.bytesSent=e.loaded}}else{allFilesFinished=true;progress=100;for(l=0,len2=files.length;l<len2;l++){file=files[l];if(!(file.upload.progress===100&&file.upload.bytesSent===file.upload.total)){allFilesFinished=false}file.upload.progress=progress;file.upload.bytesSent=file.upload.total}if(allFilesFinished){return}}results=[];for(m=0,len3=files.length;m<len3;m++){file=files[m];results.push(_this.emit("uploadprogress",file,progress,file.upload.bytesSent))}return results}}(this);xhr.onload=function(_this){return function(e){var error1,ref;if(files[0].status===Dropzone.CANCELED){return}if(xhr.readyState!==4){return}if(xhr.responseType!=="arraybuffer"&&xhr.responseType!=="blob"){response=xhr.responseText;if(xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")){try{response=JSON.parse(response)}catch(error1){e=error1;response="Invalid JSON response from server."}}}updateProgress();if(!(200<=(ref=xhr.status)&&ref<300)){return handleError()}else{return _this._finished(files,response,e)}}}(this);xhr.onerror=function(_this){return function(){if(files[0].status===Dropzone.CANCELED){return}return handleError()}}(this);progressObj=(ref=xhr.upload)!=null?ref:xhr;progressObj.onprogress=updateProgress;headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){extend(headers,this.options.headers)}for(headerName in headers){headerValue=headers[headerName];if(headerValue){xhr.setRequestHeader(headerName,headerValue)}}formData=new FormData;if(this.options.params){ref1=this.options.params;for(key in ref1){value=ref1[key];formData.append(key,value)}}for(k=0,len1=files.length;k<len1;k++){file=files[k];this.emit("sending",file,xhr,formData)}if(this.options.uploadMultiple){this.emit("sendingmultiple",files,xhr,formData)}if(this.element.tagName==="FORM"){ref2=this.element.querySelectorAll("input, textarea, select, button");for(l=0,len2=ref2.length;l<len2;l++){input=ref2[l];inputName=input.getAttribute("name");inputType=input.getAttribute("type");if(input.tagName==="SELECT"&&input.hasAttribute("multiple")){ref3=input.options;for(m=0,len3=ref3.length;m<len3;m++){option=ref3[m];if(option.selected){formData.append(inputName,option.value)}}}else if(!inputType||(ref4=inputType.toLowerCase())!=="checkbox"&&ref4!=="radio"||input.checked){formData.append(inputName,input.value)}}}doneCounter=0;results=[];for(i=o=0,ref5=files.length-1;0<=ref5?o<=ref5:o>=ref5;i=0<=ref5?++o:--o){doneFunction=function(_this){return function(file,paramName,fileName){return function(transformedFile){formData.append(paramName,transformedFile,fileName);if(++doneCounter===files.length){return _this.submitRequest(xhr,formData,files)}}}}(this);results.push(this.options.transformFile.call(this,files[i],doneFunction(files[i],this._getParamName(i),files[i].upload.filename)))}return results};Dropzone.prototype.submitRequest=function(xhr,formData,files){return xhr.send(formData)};Dropzone.prototype._finished=function(files,responseText,e){var file,j,len;for(j=0,len=files.length;j<len;j++){file=files[j];file.status=Dropzone.SUCCESS;this.emit("success",file,responseText,e);this.emit("complete",file)}if(this.options.uploadMultiple){this.emit("successmultiple",files,responseText,e);this.emit("completemultiple",files)}if(this.options.autoProcessQueue){return this.processQueue()}};Dropzone.prototype._errorProcessing=function(files,message,xhr){var file,j,len;for(j=0,len=files.length;j<len;j++){file=files[j];file.status=Dropzone.ERROR;this.emit("error",file,message,xhr);this.emit("complete",file)}if(this.options.uploadMultiple){this.emit("errormultiple",files,message,xhr);this.emit("completemultiple",files)}if(this.options.autoProcessQueue){return this.processQueue()}};return Dropzone}(Emitter);Dropzone.version="5.1.1";Dropzone.options={};Dropzone.optionsForElement=function(element){if(element.getAttribute("id")){return Dropzone.options[camelize(element.getAttribute("id"))]}else{return void 0}};Dropzone.instances=[];Dropzone.forElement=function(element){if(typeof element==="string"){element=document.querySelector(element)}if((element!=null?element.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return element.dropzone};Dropzone.autoDiscover=true;Dropzone.discover=function(){var checkElements,dropzone,dropzones,j,len,results;if(document.querySelectorAll){dropzones=document.querySelectorAll(".dropzone")}else{dropzones=[];checkElements=function(elements){var el,j,len,results;results=[];for(j=0,len=elements.length;j<len;j++){el=elements[j];if(/(^| )dropzone($| )/.test(el.className)){results.push(dropzones.push(el))}else{results.push(void 0)}}return results};checkElements(document.getElementsByTagName("div"));checkElements(document.getElementsByTagName("form"))}results=[];for(j=0,len=dropzones.length;j<len;j++){dropzone=dropzones[j];if(Dropzone.optionsForElement(dropzone)!==false){results.push(new Dropzone(dropzone))}else{results.push(void 0)}}return results};Dropzone.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];Dropzone.isBrowserSupported=function(){var capableBrowser,j,len,ref,regex;capableBrowser=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a"))){capableBrowser=false}else{ref=Dropzone.blacklistedBrowsers;for(j=0,len=ref.length;j<len;j++){regex=ref[j];if(regex.test(navigator.userAgent)){capableBrowser=false;continue}}}}else{capableBrowser=false}return capableBrowser};Dropzone.dataURItoBlob=function(dataURI){var ab,byteString,i,ia,j,mimeString,ref;byteString=atob(dataURI.split(",")[1]);mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0];ab=new ArrayBuffer(byteString.length);ia=new Uint8Array(ab);for(i=j=0,ref=byteString.length;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){ia[i]=byteString.charCodeAt(i)}return new Blob([ab],{type:mimeString})};without=function(list,rejectedItem){var item,j,len,results;results=[];for(j=0,len=list.length;j<len;j++){item=list[j];if(item!==rejectedItem){results.push(item)}}return results};camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})};Dropzone.createElement=function(string){var div;div=document.createElement("div");div.innerHTML=string;return div.childNodes[0]};Dropzone.elementInside=function(element,container){if(element===container){return true}while(element=element.parentNode){if(element===container){return true}}return false};Dropzone.getElement=function(el,name){var element;if(typeof el==="string"){element=document.querySelector(el)}else if(el.nodeType!=null){element=el}if(element==null){throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.")}return element};Dropzone.getElements=function(els,name){var e,el,elements,error1,j,k,len,len1,ref;if(els instanceof Array){elements=[];try{for(j=0,len=els.length;j<len;j++){el=els[j];elements.push(this.getElement(el,name))}}catch(error1){e=error1;elements=null}}else if(typeof els==="string"){elements=[];ref=document.querySelectorAll(els);for(k=0,len1=ref.length;k<len1;k++){el=ref[k];elements.push(el)}}else if(els.nodeType!=null){elements=[els]}if(!(elements!=null&&elements.length)){throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return elements};Dropzone.confirm=function(question,accepted,rejected){if(window.confirm(question)){return accepted()}else if(rejected!=null){return rejected()}};Dropzone.isValidFile=function(file,acceptedFiles){var baseMimeType,j,len,mimeType,validType;if(!acceptedFiles){return true}acceptedFiles=acceptedFiles.split(",");mimeType=file.type;baseMimeType=mimeType.replace(/\/.*$/,"");for(j=0,len=acceptedFiles.length;j<len;j++){validType=acceptedFiles[j];validType=validType.trim();if(validType.charAt(0)==="."){if(file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length)!==-1){return true}}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,"")){return true}}else{if(mimeType===validType){return true}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}}if(typeof module!=="undefined"&&module!==null){module.exports=Dropzone}else{window.Dropzone=Dropzone}Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";detectVerticalSquash=function(img){var alpha,canvas,ctx,data,ey,ih,iw,py,ratio,sy;iw=img.naturalWidth;ih=img.naturalHeight;canvas=document.createElement("canvas");canvas.width=1;canvas.height=ih;ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);data=ctx.getImageData(1,0,1,ih).data;sy=0;ey=ih;py=ih;while(py>sy){alpha=data[(py-1)*4+3];if(alpha===0){ey=py}else{sy=py}py=ey+sy>>1}ratio=py/ih;if(ratio===0){return 1}else{return ratio}};drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio;vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)};ExifRestore=function(){function ExifRestore(){}ExifRestore.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ExifRestore.encode64=function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,i,output;output="";chr1=void 0;chr2=void 0;chr3="";enc1=void 0;enc2=void 0;enc3=void 0;enc4="";i=0;while(true){chr1=input[i++];chr2=input[i++];chr3=input[i++];enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+this.KEY_STR.charAt(enc1)+this.KEY_STR.charAt(enc2)+this.KEY_STR.charAt(enc3)+this.KEY_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";if(!(i<input.length)){break}}return output};ExifRestore.restore=function(origFileBase64,resizedFileBase64){var image,rawImage,segments;if(!origFileBase64.match("data:image/jpeg;base64,")){return resizedFileBase64}rawImage=this.decode64(origFileBase64.replace("data:image/jpeg;base64,",""));segments=this.slice2Segments(rawImage);image=this.exifManipulation(resizedFileBase64,segments);return"data:image/jpeg;base64,"+this.encode64(image)};ExifRestore.exifManipulation=function(resizedFileBase64,segments){var aBuffer,exifArray,newImageArray;exifArray=this.getExifArray(segments);newImageArray=this.insertExif(resizedFileBase64,exifArray);aBuffer=new Uint8Array(newImageArray);return aBuffer};ExifRestore.getExifArray=function(segments){var seg,x;seg=void 0;x=0;while(x<segments.length){seg=segments[x];if(seg[0]===255&seg[1]===225){return seg}x++}return[]};ExifRestore.insertExif=function(resizedFileBase64,exifArray){var array,ato,buf,imageData,mae,separatePoint;imageData=resizedFileBase64.replace("data:image/jpeg;base64,","");buf=this.decode64(imageData);separatePoint=buf.indexOf(255,3);mae=buf.slice(0,separatePoint);ato=buf.slice(separatePoint);array=mae;array=array.concat(exifArray);array=array.concat(ato);return array};ExifRestore.slice2Segments=function(rawImageArray){var endPoint,head,length,seg,segments;head=0;segments=[];while(true){if(rawImageArray[head]===255&rawImageArray[head+1]===218){break}if(rawImageArray[head]===255&rawImageArray[head+1]===216){head+=2}else{length=rawImageArray[head+2]*256+rawImageArray[head+3];endPoint=head+length+2;seg=rawImageArray.slice(head,endPoint);segments.push(seg);head=endPoint}if(head>rawImageArray.length){break}}return segments};ExifRestore.decode64=function(input){var base64test,buf,chr1,chr2,chr3,enc1,enc2,enc3,enc4,i,output;output="";chr1=void 0;chr2=void 0;chr3="";enc1=void 0;enc2=void 0;enc3=void 0;enc4="";i=0;buf=[];base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){console.warning("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.")}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(true){enc1=this.KEY_STR.indexOf(input.charAt(i++));enc2=this.KEY_STR.indexOf(input.charAt(i++));enc3=this.KEY_STR.indexOf(input.charAt(i++));enc4=this.KEY_STR.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;buf.push(chr1);if(enc3!==64){buf.push(chr2)}if(enc4!==64){buf.push(chr3)}chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";if(!(i<input.length)){break}}return buf};return ExifRestore}();contentLoaded=function(win,fn){var add,doc,done,init,poll,pre,rem,root,top;done=false;top=true;doc=win.document;root=doc.documentElement;add=doc.addEventListener?"addEventListener":"attachEvent";rem=doc.addEventListener?"removeEventListener":"detachEvent";pre=doc.addEventListener?"":"on";init=function(e){if(e.type==="readystatechange"&&doc.readyState!=="complete"){return}(e.type==="load"?win:doc)[rem](pre+e.type,init,false);if(!done&&(done=true)){return fn.call(win,e.type||e)}};poll=function(){var e,error1;try{root.doScroll("left")}catch(error1){e=error1;setTimeout(poll,50);return}return init("poll")};if(doc.readyState!=="complete"){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(undefined){}if(top){poll()}}doc[add](pre+"DOMContentLoaded",init,false);doc[add](pre+"readystatechange",init,false);return win[add](pre+"load",init,false)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover){return Dropzone.discover()}};contentLoaded(window,Dropzone._autoDiscoverFunction)}).call(this)}).call(exports,__webpack_require__(28)(module))},function(module,exports,__webpack_require__){"use strict";var Tags=__webpack_require__(214);var TagsAutocompleteInputView=__webpack_require__(280);var UniqueSplit=__webpack_require__(138);module.exports=Backbone.View.extend({model:Tags,tag_link_template:_.template('<a href="/lens/search?tags=<%-tag%>"><%-tag%></a>'),events:{"click .tag-add":"toggle","click a":"applyFilter","click .saveTag":"saveTags","keyup input":"handleKeys"},initialize:function initialize(options){this.$el=$(options.el);this.model=options.model;this.$cache=$("#tagCache");this.$input=this.$("input");this.$tagLinks=this.$(".tagLinks");new TagsAutocompleteInputView({el:this.$input,$cache:this.$cache});if(options.render){this.render(this.model.toJSON())}},toggle:function toggle(){var that=this;this.$(".slidingDiv").slideToggle({duration:250,done:function done(){that.$input.focus();var x=that.$input.val();that.$input.val("");that.$input.val(x)},start:function start(){that.$tagLinks.toggle()}})},handleKeys:function handleKeys(e){if(e.keyCode===13){this.saveTags();$(".ui-autocomplete").hide()}},applyFilter:function applyFilter(e){e.preventDefault();$.vent.trigger("filters/apply",{tags:$.trim($(e.target).text())})},saveTags:function saveTags(){var that=this;var uniqueTags=UniqueSplit(this.$input.val());$.when(this.model.tag(uniqueTags)).then(function(data){that.render(data);that.toggle();$.vent.trigger("refresh-tags")})},render:function render(hasTags){if(!(hasTags&&hasTags.tags))return;var tagLinks=_.map(hasTags.tags,function(tag){var html=this.tag_link_template({tag:tag});return html},this);if(hasTags.tags&&hasTags.tags.length){_.each(hasTags.tags,function(x){this.$cache.append("<li>"+_.escape(x)+"</li>")},this);this.$(".tag-add").addClass("active")}else{this.$(".tag-add").removeClass("active")}this.$(".tagLinks").html(tagLinks.join(", "));this.$input.val(hasTags.tags.join(", "))}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({initialize:function initialize(opts){this.$el=$(opts.el)},validate:function validate(){this.$(".formWarning").hide();return true}})},function(module,exports,__webpack_require__){"use strict";var DialogView=__webpack_require__(26);module.exports=function(opts){var template=opts.template||"publishTemplate";new DialogView({title:opts.title,noButton:{text:messages.prop("common.action.cancel")},yesButton:{text:messages.prop("common.action.ok"),onClick:function onClick(event,$dialog){return opts.model.publish($dialog.find("#accessChange").val())}}}).render(ich[template](opts),function($dialog){var updateAccessDescription=function updateAccessDescription(){var $option=$dialog.find("#accessChange option:selected");$dialog.find("#accessDescription").html($option.attr("data-text"));var showWarning=$option.val()==="true"&&opts.model.get("type")==="PATENT_COLLECTION";$dialog.find("#patciteCollectionWarning").toggleClass("hidden",!showWarning);$dialog.resize()};updateAccessDescription();$dialog.find("#accessChange").change(updateAccessDescription)})}},,function(module,exports,__webpack_require__){"use strict";var SavedQuery=__webpack_require__(63);module.exports=Backbone.Collection.extend({model:SavedQuery,initialize:function initialize(){},comparator:function comparator(model){return-model.get("created")},url:function url(){return"/lens/service/query"}})},function(module,exports,__webpack_require__){"use strict";var Tag=__webpack_require__(215);module.exports=Backbone.Collection.extend({model:Tag,initialize:function initialize(opts){opts=opts||{};this.n=opts.n||5},url:function url(){return"/lens/service/patent-entity/tag/recent?n="+this.n},parse:function parse(resp){return _.map(resp,function(x){return new Tag({tag:x})})}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.Model.extend({})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var parseAnalysisString=exports.parseAnalysisString=function parseAnalysisString(s){var views=s.split(",");var map={};views.forEach(function(s){var _s$split=s.split(":"),_s$split2=_slicedToArray(_s$split,2),k=_s$split2[0],v=_s$split2[1];k=k.replace("%2F","");map[k]=v});return map}},function(module,exports){module.exports=angular},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var interface_1=__webpack_require__(55);var transitionHook_1=__webpack_require__(94);var HookBuilder=function(){function HookBuilder(transition){this.transition=transition}HookBuilder.prototype.buildHooksForPhase=function(phase){var _this=this;var $transitions=this.transition.router.transitionService;return $transitions._pluginapi._getEvents(phase).map(function(type){return _this.buildHooks(type)}).reduce(common_1.unnestR,[]).filter(common_1.identity)};HookBuilder.prototype.buildHooks=function(hookType){var transition=this.transition;var treeChanges=transition.treeChanges();var matchingHooks=this.getMatchingHooks(hookType,treeChanges);if(!matchingHooks)return[];var baseHookOptions={transition:transition,current:transition.options().current};var makeTransitionHooks=function(hook){var matches=hook.matches(treeChanges);var matchingNodes=matches[hookType.criteriaMatchPath.name];return matchingNodes.map(function(node){var _options=common_1.extend({bind:hook.bind,traceData:{hookType:hookType.name,context:node}},baseHookOptions);var state=hookType.criteriaMatchPath.scope===interface_1.TransitionHookScope.STATE?node.state.self:null;var transitionHook=new transitionHook_1.TransitionHook(transition,state,hook,_options);return{hook:hook,node:node,transitionHook:transitionHook}})};return matchingHooks.map(makeTransitionHooks).reduce(common_1.unnestR,[]).sort(tupleSort(hookType.reverseSort)).map(function(tuple){return tuple.transitionHook})};HookBuilder.prototype.getMatchingHooks=function(hookType,treeChanges){var isCreate=hookType.hookPhase===interface_1.TransitionHookPhase.CREATE;var $transitions=this.transition.router.transitionService;var registries=isCreate?[$transitions]:[this.transition,$transitions];return registries.map(function(reg){return reg.getHooks(hookType.name)}).filter(common_1.assertPredicate(predicates_1.isArray,"broken event named: "+hookType.name)).reduce(common_1.unnestR,[]).filter(function(hook){return hook.matches(treeChanges)})};return HookBuilder}();exports.HookBuilder=HookBuilder;function tupleSort(reverseDepthSort){if(reverseDepthSort===void 0){reverseDepthSort=false}return function nodeDepthThenPriority(l,r){var factor=reverseDepthSort?-1:1;var depthDelta=(l.node.state.path.length-r.node.state.path.length)*factor;return depthDelta!==0?depthDelta:r.hook.priority-l.hook.priority}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var hof_1=__webpack_require__(5);var coreservices_1=__webpack_require__(11);var paramType_1=__webpack_require__(148);var ParamTypes=function(){function ParamTypes(){this.enqueue=true;this.typeQueue=[];this.defaultTypes=common_1.pick(ParamTypes.prototype,["hash","string","query","path","int","bool","date","json","any"]);var makeType=function(definition,name){return new paramType_1.ParamType(common_1.extend({name:name},definition))};this.types=common_1.inherit(common_1.map(this.defaultTypes,makeType),{})}ParamTypes.prototype.dispose=function(){this.types={}};ParamTypes.prototype.type=function(name,definition,definitionFn){if(!predicates_1.isDefined(definition))return this.types[name];if(this.types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");this.types[name]=new paramType_1.ParamType(common_1.extend({name:name},definition));if(definitionFn){this.typeQueue.push({name:name,def:definitionFn});if(!this.enqueue)this._flushTypeQueue()}return this};ParamTypes.prototype._flushTypeQueue=function(){while(this.typeQueue.length){var type=this.typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");common_1.extend(this.types[type.name],coreservices_1.services.$injector.invoke(type.def))}};return ParamTypes}();exports.ParamTypes=ParamTypes;function initDefaultTypes(){var makeDefaultType=function(def){var valToString=function(val){return val!=null?val.toString():val};var defaultTypeBase={encode:valToString,decode:valToString,is:hof_1.is(String),pattern:/.*/,equals:function(a,b){return a==b}};return common_1.extend({},defaultTypeBase,def)};common_1.extend(ParamTypes.prototype,{string:makeDefaultType({}),path:makeDefaultType({pattern:/[^/]*/}),query:makeDefaultType({}),hash:makeDefaultType({inherit:false}),int:makeDefaultType({decode:function(val){return parseInt(val,10)},is:function(val){return!predicates_1.isNullOrUndefined(val)&&this.decode(val.toString())===val},pattern:/-?\d+/}),bool:makeDefaultType({encode:function(val){return val&&1||0},decode:function(val){return parseInt(val,10)!==0},is:hof_1.is(Boolean),pattern:/0|1/}),date:makeDefaultType({encode:function(val){return!this.is(val)?undefined:[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-")},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(l,r){return["getFullYear","getMonth","getDate"].reduce(function(acc,fn){return acc&&l[fn]()===r[fn]()},true)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:makeDefaultType({encode:common_1.toJson,decode:common_1.fromJson,is:hof_1.is(Object),equals:common_1.equals,pattern:/[^/]*/}),any:makeDefaultType({encode:common_1.identity,decode:common_1.identity,is:function(){return true},equals:common_1.equals})})}initDefaultTypes()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var StateParams=function(){function StateParams(params){if(params===void 0){params={}}common_1.extend(this,params)}StateParams.prototype.$inherit=function(newParams,$current,$to){var parents=common_1.ancestors($current,$to),parentParams,inherited={},inheritList=[];for(var i in parents){if(!parents[i]||!parents[i].params)continue;parentParams=Object.keys(parents[i].params);if(!parentParams.length)continue;for(var j in parentParams){if(inheritList.indexOf(parentParams[j])>=0)continue;inheritList.push(parentParams[j]);inherited[parentParams[j]]=this[parentParams[j]]}}return common_1.extend({},inherited,newParams)};return StateParams}();exports.StateParams=StateParams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var strings_1=__webpack_require__(36);var hof_1=__webpack_require__(5);var resolvable_1=__webpack_require__(95);var coreservices_1=__webpack_require__(11);var parseUrl=function(url){if(!predicates_1.isString(url))return false;var root=url.charAt(0)==="^";return{val:root?url.substring(1):url,root:root}};function nameBuilder(state){return state.name}function selfBuilder(state){state.self.$$state=function(){return state};return state.self}function dataBuilder(state){if(state.parent&&state.parent.data){state.data=state.self.data=common_1.inherit(state.parent.data,state.data)}return state.data}var getUrlBuilder=function($urlMatcherFactoryProvider,root){return function urlBuilder(state){var stateDec=state;if(stateDec&&stateDec.url&&stateDec.name&&stateDec.name.match(/\.\*\*$/)){stateDec.url+="{remainder:any}"}var parsed=parseUrl(stateDec.url),parent=state.parent;var url=!parsed?stateDec.url:$urlMatcherFactoryProvider.compile(parsed.val,{params:state.params||{},paramMap:function(paramConfig,isSearch){if(stateDec.reloadOnSearch===false&&isSearch)paramConfig=common_1.extend(paramConfig||{},{dynamic:true});return paramConfig}});if(!url)return null;if(!$urlMatcherFactoryProvider.isMatcher(url))throw new Error("Invalid url '"+url+"' in state '"+state+"'");return parsed&&parsed.root?url:(parent&&parent.navigable||root()).url.append(url)}};var getNavigableBuilder=function(isRoot){return function navigableBuilder(state){return!isRoot(state)&&state.url?state:state.parent?state.parent.navigable:null}};var getParamsBuilder=function(paramFactory){return function paramsBuilder(state){var makeConfigParam=function(config,id){return paramFactory.fromConfig(id,null,config)};var urlParams=state.url&&state.url.parameters({inherit:false})||[];var nonUrlParams=common_1.values(common_1.mapObj(common_1.omit(state.params||{},urlParams.map(hof_1.prop("id"))),makeConfigParam));return urlParams.concat(nonUrlParams).map(function(p){return[p.id,p]}).reduce(common_1.applyPairs,{})}};function pathBuilder(state){return state.parent?state.parent.path.concat(state):[state]}function includesBuilder(state){var includes=state.parent?common_1.extend({},state.parent.includes):{};includes[state.name]=true;return includes}function resolvablesBuilder(state){var objects2Tuples=function(resolveObj,resolvePolicies){return Object.keys(resolveObj||{}).map(function(token){return{token:token,val:resolveObj[token],deps:undefined,policy:resolvePolicies[token]}})};var annotate=function(fn){var $injector=coreservices_1.services.$injector;return fn["$inject"]||$injector&&$injector.annotate(fn,$injector.strictDi)||"deferred"};var isResolveLiteral=function(obj){return!!(obj.token&&obj.resolveFn)};var isLikeNg2Provider=function(obj){return!!((obj.provide||obj.token)&&(obj.useValue||obj.useFactory||obj.useExisting||obj.useClass))};var isTupleFromObj=function(obj){return!!(obj&&obj.val&&(predicates_1.isString(obj.val)||predicates_1.isArray(obj.val)||predicates_1.isFunction(obj.val)))};var token=function(p){return p.provide||p.token};var literal2Resolvable=hof_1.pattern([[hof_1.prop("resolveFn"),function(p){return new resolvable_1.Resolvable(token(p),p.resolveFn,p.deps,p.policy)}],[hof_1.prop("useFactory"),function(p){return new resolvable_1.Resolvable(token(p),p.useFactory,p.deps||p.dependencies,p.policy)}],[hof_1.prop("useClass"),function(p){return new resolvable_1.Resolvable(token(p),function(){return new p.useClass},[],p.policy)}],[hof_1.prop("useValue"),function(p){return new resolvable_1.Resolvable(token(p),function(){return p.useValue},[],p.policy,p.useValue)}],[hof_1.prop("useExisting"),function(p){return new resolvable_1.Resolvable(token(p),common_1.identity,[p.useExisting],p.policy)}]]);var tuple2Resolvable=hof_1.pattern([[hof_1.pipe(hof_1.prop("val"),predicates_1.isString),function(tuple){return new resolvable_1.Resolvable(tuple.token,common_1.identity,[tuple.val],tuple.policy)}],[hof_1.pipe(hof_1.prop("val"),predicates_1.isArray),function(tuple){return new resolvable_1.Resolvable(tuple.token,common_1.tail(tuple.val),tuple.val.slice(0,-1),tuple.policy)}],[hof_1.pipe(hof_1.prop("val"),predicates_1.isFunction),function(tuple){return new resolvable_1.Resolvable(tuple.token,tuple.val,annotate(tuple.val),tuple.policy)}]]);var item2Resolvable=hof_1.pattern([[hof_1.is(resolvable_1.Resolvable),function(r){return r}],[isResolveLiteral,literal2Resolvable],[isLikeNg2Provider,literal2Resolvable],[isTupleFromObj,tuple2Resolvable],[hof_1.val(true),function(obj){throw new Error("Invalid resolve value: "+strings_1.stringify(obj))}]]);var decl=state.resolve;var items=predicates_1.isArray(decl)?decl:objects2Tuples(decl,state.resolvePolicy||{});return items.map(item2Resolvable)}exports.resolvablesBuilder=resolvablesBuilder;var StateBuilder=function(){function StateBuilder(matcher,urlMatcherFactory){this.matcher=matcher;var self=this;var root=function(){return matcher.find("")};var isRoot=function(state){return state.name===""};function parentBuilder(state){if(isRoot(state))return null;return matcher.find(self.parentName(state))||root()}this.builders={name:[nameBuilder],self:[selfBuilder],parent:[parentBuilder],data:[dataBuilder],url:[getUrlBuilder(urlMatcherFactory,root)],navigable:[getNavigableBuilder(isRoot)],params:[getParamsBuilder(urlMatcherFactory.paramFactory)],views:[],path:[pathBuilder],includes:[includesBuilder],resolvables:[resolvablesBuilder]}}StateBuilder.prototype.builder=function(name,fn){var builders=this.builders;var array=builders[name]||[];if(predicates_1.isString(name)&&!predicates_1.isDefined(fn))return array.length>1?array:array[0];if(!predicates_1.isString(name)||!predicates_1.isFunction(fn))return;builders[name]=array;builders[name].push(fn);return function(){return builders[name].splice(builders[name].indexOf(fn,1))&&null}};StateBuilder.prototype.build=function(state){var _a=this,matcher=_a.matcher,builders=_a.builders;var parent=this.parentName(state);if(parent&&!matcher.find(parent,undefined,false)){return null}for(var key in builders){if(!builders.hasOwnProperty(key))continue;var chain=builders[key].reduce(function(parentFn,step){return function(_state){return step(_state,parentFn)}},common_1.noop);state[key]=chain(state)}return state};StateBuilder.prototype.parentName=function(state){var name=state.name||"";var segments=name.split(".");var lastSegment=segments.pop();if(lastSegment==="**")segments.pop();if(segments.length){if(state.parent){throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+name+")")}return segments.join(".")}if(!state.parent)return"";return predicates_1.isString(state.parent)?state.parent:state.parent.name};StateBuilder.prototype.name=function(state){var name=state.name;if(name.indexOf(".")!==-1||!state.parent)return name;var parentName=predicates_1.isString(state.parent)?state.parent:state.parent.name;return parentName?parentName+"."+name:name};return StateBuilder}();exports.StateBuilder=StateBuilder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=__webpack_require__(2);var common_1=__webpack_require__(1);var StateMatcher=function(){function StateMatcher(_states){this._states=_states}StateMatcher.prototype.isRelative=function(stateName){stateName=stateName||"";return stateName.indexOf(".")===0||stateName.indexOf("^")===0};StateMatcher.prototype.find=function(stateOrName,base,matchGlob){if(matchGlob===void 0){matchGlob=true}if(!stateOrName&&stateOrName!=="")return undefined;var isStr=predicates_1.isString(stateOrName);var name=isStr?stateOrName:stateOrName.name;if(this.isRelative(name))name=this.resolvePath(name,base);var state=this._states[name];if(state&&(isStr||!isStr&&(state===stateOrName||state.self===stateOrName))){return state}else if(isStr&&matchGlob){var _states=common_1.values(this._states);var matches=_states.filter(function(state){return state.__stateObjectCache.nameGlob&&state.__stateObjectCache.nameGlob.matches(name)});if(matches.length>1){console.log("stateMatcher.find: Found multiple matches for "+name+" using glob: ",matches.map(function(match){return match.name}))}return matches[0]}return undefined};StateMatcher.prototype.resolvePath=function(name,base){if(!base)throw new Error("No reference point given for path '"+name+"'");var baseState=this.find(base);var splitName=name.split("."),i=0,pathLength=splitName.length,current=baseState;for(;i<pathLength;i++){if(splitName[i]===""&&i===0){current=baseState;continue}if(splitName[i]==="^"){if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+baseState.name+"'");current=current.parent;continue}break}var relName=splitName.slice(i).join(".");return current.name+(current.name&&relName?".":"")+relName};return StateMatcher}();exports.StateMatcher=StateMatcher},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var stateObject_1=__webpack_require__(144);var hof_1=__webpack_require__(5);var StateQueueManager=function(){function StateQueueManager($registry,$urlRouter,states,builder,listeners){this.$registry=$registry;this.$urlRouter=$urlRouter;this.states=states;this.builder=builder;this.listeners=listeners;this.queue=[];this.matcher=$registry.matcher}StateQueueManager.prototype.dispose=function(){this.queue=[]};StateQueueManager.prototype.register=function(stateDecl){var queue=this.queue;var state=stateObject_1.StateObject.create(stateDecl);var name=state.name;if(!predicates_1.isString(name))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(name)||common_1.inArray(queue.map(hof_1.prop("name")),name))throw new Error("State '"+name+"' is already defined");queue.push(state);this.flush();return state};StateQueueManager.prototype.flush=function(){var _this=this;var _a=this,queue=_a.queue,states=_a.states,builder=_a.builder;var registered=[],orphans=[],previousQueueLength={};var getState=function(name){return _this.states.hasOwnProperty(name)&&_this.states[name]};while(queue.length>0){var state=queue.shift();var name_1=state.name;var result=builder.build(state);var orphanIdx=orphans.indexOf(state);if(result){var existingState=getState(name_1);if(existingState&&existingState.name===name_1){throw new Error("State '"+name_1+"' is already defined")}var existingFutureState=getState(name_1+".**");if(existingFutureState){this.$registry.deregister(existingFutureState)}states[name_1]=state;this.attachRoute(state);if(orphanIdx>=0)orphans.splice(orphanIdx,1);registered.push(state);continue}var prev=previousQueueLength[name_1];previousQueueLength[name_1]=queue.length;if(orphanIdx>=0&&prev===queue.length){queue.push(state);return states}else if(orphanIdx<0){orphans.push(state)}queue.push(state)}if(registered.length){this.listeners.forEach(function(listener){return listener("registered",registered.map(function(s){return s.self}))})}return states};StateQueueManager.prototype.attachRoute=function(state){if(state.abstract||!state.url)return;this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(state))};return StateQueueManager}();exports.StateQueueManager=StateQueueManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var stateMatcher_1=__webpack_require__(223);var stateBuilder_1=__webpack_require__(222);var stateQueueManager_1=__webpack_require__(224);var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var StateRegistry=function(){function StateRegistry(_router){this._router=_router;this.states={};this.listeners=[];this.matcher=new stateMatcher_1.StateMatcher(this.states);this.builder=new stateBuilder_1.StateBuilder(this.matcher,_router.urlMatcherFactory);this.stateQueue=new stateQueueManager_1.StateQueueManager(this,_router.urlRouter,this.states,this.builder,this.listeners);this._registerRoot()}StateRegistry.prototype._registerRoot=function(){var rootStateDef={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:true}},abstract:true};var _root=this._root=this.stateQueue.register(rootStateDef);_root.navigable=null};StateRegistry.prototype.dispose=function(){var _this=this;this.stateQueue.dispose();this.listeners=[];this.get().forEach(function(state){return _this.get(state)&&_this.deregister(state)})};StateRegistry.prototype.onStatesChanged=function(listener){this.listeners.push(listener);return function deregisterListener(){common_1.removeFrom(this.listeners)(listener)}.bind(this)};StateRegistry.prototype.root=function(){return this._root};StateRegistry.prototype.register=function(stateDefinition){return this.stateQueue.register(stateDefinition)};StateRegistry.prototype._deregisterTree=function(state){var _this=this;var all=this.get().map(function(s){return s.$$state()});var getChildren=function(states){var children=all.filter(function(s){return states.indexOf(s.parent)!==-1});return children.length===0?children:children.concat(getChildren(children))};var children=getChildren([state]);var deregistered=[state].concat(children).reverse();deregistered.forEach(function(state){var $ur=_this._router.urlRouter;$ur.rules().filter(hof_1.propEq("state",state)).forEach($ur.removeRule.bind($ur));delete _this.states[state.name]});return deregistered};StateRegistry.prototype.deregister=function(stateOrName){var _state=this.get(stateOrName);if(!_state)throw new Error("Can't deregister state; not found: "+stateOrName);var deregisteredStates=this._deregisterTree(_state.$$state());this.listeners.forEach(function(listener){return listener("deregistered",deregisteredStates.map(function(s){return s.self}))});return deregisteredStates};StateRegistry.prototype.get=function(stateOrName,base){var _this=this;if(arguments.length===0)return Object.keys(this.states).map(function(name){return _this.states[name].self});var found=this.matcher.find(stateOrName,base);return found&&found.self||null};StateRegistry.prototype.decorator=function(name,func){return this.builder.builder(name,func)};return StateRegistry}();exports.StateRegistry=StateRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var queue_1=__webpack_require__(145);var coreservices_1=__webpack_require__(11);var pathFactory_1=__webpack_require__(114);var pathNode_1=__webpack_require__(147);var transitionService_1=__webpack_require__(149);var rejectFactory_1=__webpack_require__(93);var targetState_1=__webpack_require__(47);var param_1=__webpack_require__(56);var glob_1=__webpack_require__(112);var resolveContext_1=__webpack_require__(115);var lazyLoad_1=__webpack_require__(234);var hof_1=__webpack_require__(5);var StateService=function(){function StateService(router){this.router=router;this.invalidCallbacks=[];this._defaultErrorHandler=function $defaultErrorHandler($error$){if($error$ instanceof Error&&$error$.stack){console.error($error$);console.error($error$.stack)}else if($error$ instanceof rejectFactory_1.Rejection){console.error($error$.toString());if($error$.detail&&$error$.detail.stack)console.error($error$.detail.stack)}else{console.error($error$)}};var getters=["current","$current","params","transition"];var boundFns=Object.keys(StateService.prototype).filter(hof_1.not(common_1.inArray(getters)));common_1.createProxyFunctions(hof_1.val(StateService.prototype),this,hof_1.val(this),boundFns)}Object.defineProperty(StateService.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"params",{get:function(){return this.router.globals.params},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"current",{get:function(){return this.router.globals.current},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:true,configurable:true});StateService.prototype.dispose=function(){this.defaultErrorHandler(common_1.noop);this.invalidCallbacks=[]};StateService.prototype._handleInvalidTargetState=function(fromPath,toState){var _this=this;var fromState=pathFactory_1.PathUtils.makeTargetState(fromPath);var globals=this.router.globals;var latestThing=function(){return globals.transitionHistory.peekTail()};var latest=latestThing();var callbackQueue=new queue_1.Queue(this.invalidCallbacks.slice());var injector=new resolveContext_1.ResolveContext(fromPath).injector();var checkForRedirect=function(result){if(!(result instanceof targetState_1.TargetState)){return}var target=result;target=_this.target(target.identifier(),target.params(),target.options());if(!target.valid()){return rejectFactory_1.Rejection.invalid(target.error()).toPromise()}if(latestThing()!==latest){return rejectFactory_1.Rejection.superseded().toPromise()}return _this.transitionTo(target.identifier(),target.params(),target.options())};function invokeNextCallback(){var nextCallback=callbackQueue.dequeue();if(nextCallback===undefined)return rejectFactory_1.Rejection.invalid(toState.error()).toPromise();var callbackResult=coreservices_1.services.$q.when(nextCallback(toState,fromState,injector));return callbackResult.then(checkForRedirect).then(function(result){return result||invokeNextCallback()})}return invokeNextCallback()};StateService.prototype.onInvalid=function(callback){this.invalidCallbacks.push(callback);return function deregisterListener(){common_1.removeFrom(this.invalidCallbacks)(callback)}.bind(this)};StateService.prototype.reload=function(reloadState){return this.transitionTo(this.current,this.params,{reload:predicates_1.isDefined(reloadState)?reloadState:true,inherit:false,notify:false})};StateService.prototype.go=function(to,params,options){var defautGoOpts={relative:this.$current,inherit:true};var transOpts=common_1.defaults(options,defautGoOpts,transitionService_1.defaultTransOpts);return this.transitionTo(to,params,transOpts)};StateService.prototype.target=function(identifier,params,options){if(options===void 0){options={}}if(predicates_1.isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reg=this.router.stateRegistry;options.reloadState=options.reload===true?reg.root():reg.matcher.find(options.reload,options.relative);if(options.reload&&!options.reloadState)throw new Error("No such reload state '"+(predicates_1.isString(options.reload)?options.reload:options.reload.name)+"'");var stateDefinition=reg.matcher.find(identifier,options.relative);return new targetState_1.TargetState(identifier,stateDefinition,params,options)};StateService.prototype.getCurrentPath=function(){var _this=this;var globals=this.router.globals;var latestSuccess=globals.successfulTransitions.peekTail();var rootPath=function(){return[new pathNode_1.PathNode(_this.router.stateRegistry.root())]};return latestSuccess?latestSuccess.treeChanges().to:rootPath()};StateService.prototype.transitionTo=function(to,toParams,options){var _this=this;if(toParams===void 0){toParams={}}if(options===void 0){options={}}var router=this.router;var globals=router.globals;options=common_1.defaults(options,transitionService_1.defaultTransOpts);var getCurrent=function(){return globals.transition};options=common_1.extend(options,{current:getCurrent});var ref=this.target(to,toParams,options);var currentPath=this.getCurrentPath();if(!ref.exists())return this._handleInvalidTargetState(currentPath,ref);if(!ref.valid())return common_1.silentRejection(ref.error());var rejectedTransitionHandler=function(transition){return function(error){if(error instanceof rejectFactory_1.Rejection){var isLatest=router.globals.lastStartedTransitionId===transition.$id;if(error.type===rejectFactory_1.RejectType.IGNORED){isLatest&&router.urlRouter.update();return coreservices_1.services.$q.when(globals.current)}var detail=error.detail;if(error.type===rejectFactory_1.RejectType.SUPERSEDED&&error.redirected&&detail instanceof targetState_1.TargetState){var redirect=transition.redirect(detail);return redirect.run().catch(rejectedTransitionHandler(redirect))}if(error.type===rejectFactory_1.RejectType.ABORTED){isLatest&&router.urlRouter.update();return coreservices_1.services.$q.reject(error)}}var errorHandler=_this.defaultErrorHandler();errorHandler(error);return coreservices_1.services.$q.reject(error)}};var transition=this.router.transitionService.create(currentPath,ref);var transitionToPromise=transition.run().catch(rejectedTransitionHandler(transition));common_1.silenceUncaughtInPromise(transitionToPromise);return common_1.extend(transitionToPromise,{transition:transition})};StateService.prototype.is=function(stateOrName,params,options){options=common_1.defaults(options,{relative:this.$current});var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!predicates_1.isDefined(state))return undefined;if(this.$current!==state)return false;if(!params)return true;var schema=state.parameters({inherit:true,matchingKeys:params});return param_1.Param.equals(schema,param_1.Param.values(schema,params),this.params)};StateService.prototype.includes=function(stateOrName,params,options){options=common_1.defaults(options,{relative:this.$current});var glob=predicates_1.isString(stateOrName)&&glob_1.Glob.fromString(stateOrName);if(glob){if(!glob.matches(this.$current.name))return false;stateOrName=this.$current.name}var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative),include=this.$current.includes;if(!predicates_1.isDefined(state))return undefined;if(!predicates_1.isDefined(include[state.name]))return false;if(!params)return true;var schema=state.parameters({inherit:true,matchingKeys:params});return param_1.Param.equals(schema,param_1.Param.values(schema,params),this.params)};StateService.prototype.href=function(stateOrName,params,options){var defaultHrefOpts={lossy:true,inherit:true,absolute:false,relative:this.$current};options=common_1.defaults(options,defaultHrefOpts);params=params||{};var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!predicates_1.isDefined(state))return null;if(options.inherit)params=this.params.$inherit(params,this.$current,state);var nav=state&&options.lossy?state.navigable:state;if(!nav||nav.url===undefined||nav.url===null){return null}return this.router.urlRouter.href(nav.url,params,{absolute:options.absolute})};StateService.prototype.defaultErrorHandler=function(handler){return this._defaultErrorHandler=handler||this._defaultErrorHandler};StateService.prototype.get=function(stateOrName,base){var reg=this.router.stateRegistry;if(arguments.length===0)return reg.get();return reg.get(stateOrName,base||this.$current)};StateService.prototype.lazyLoad=function(stateOrName,transition){var state=this.get(stateOrName);if(!state||!state.lazyLoad)throw new Error("Can not lazy load "+stateOrName);var currentPath=this.getCurrentPath();var target=pathFactory_1.PathUtils.makeTargetState(currentPath);transition=transition||this.router.transitionService.create(currentPath,target);return lazyLoad_1.lazyLoadState(transition,state)};return StateService}();exports.StateService=StateService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var urlMatcherFactory_1=__webpack_require__(228);var urlRouter_1=__webpack_require__(229);var transitionService_1=__webpack_require__(149);var view_1=__webpack_require__(231);var stateRegistry_1=__webpack_require__(225);var stateService_1=__webpack_require__(226);var globals_1=__webpack_require__(232);var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var urlService_1=__webpack_require__(233);var trace_1=__webpack_require__(37);var _routerInstance=0;var UIRouter=function(){function UIRouter(locationService,locationConfig){if(locationService===void 0){locationService=urlService_1.UrlService.locationServiceStub}if(locationConfig===void 0){locationConfig=urlService_1.UrlService.locationConfigStub}this.locationService=locationService;this.locationConfig=locationConfig;this.$id=_routerInstance++;this._disposed=false;this._disposables=[];this.trace=trace_1.trace;this.viewService=new view_1.ViewService;this.transitionService=new transitionService_1.TransitionService(this);this.globals=new globals_1.UIRouterGlobals;this.urlMatcherFactory=new urlMatcherFactory_1.UrlMatcherFactory;this.urlRouter=new urlRouter_1.UrlRouter(this);this.stateRegistry=new stateRegistry_1.StateRegistry(this);this.stateService=new stateService_1.StateService(this);this.urlService=new urlService_1.UrlService(this);this._plugins={};this.viewService._pluginapi._rootViewContext(this.stateRegistry.root());this.globals.$current=this.stateRegistry.root();this.globals.current=this.globals.$current.self;this.disposable(this.globals);this.disposable(this.stateService);this.disposable(this.stateRegistry);this.disposable(this.transitionService);this.disposable(this.urlRouter);this.disposable(locationService);this.disposable(locationConfig)}UIRouter.prototype.disposable=function(disposable){this._disposables.push(disposable)};UIRouter.prototype.dispose=function(disposable){var _this=this;if(disposable&&predicates_1.isFunction(disposable.dispose)){disposable.dispose(this);return undefined}this._disposed=true;this._disposables.slice().forEach(function(d){try{typeof d.dispose==="function"&&d.dispose(_this);common_1.removeFrom(_this._disposables,d)}catch(ignored){}})};UIRouter.prototype.plugin=function(plugin,options){if(options===void 0){options={}}var pluginInstance=new plugin(this,options);if(!pluginInstance.name)throw new Error("Required property `name` missing on plugin: "+pluginInstance);this._disposables.push(pluginInstance);return this._plugins[pluginInstance.name]=pluginInstance};UIRouter.prototype.getPlugin=function(pluginName){return pluginName?this._plugins[pluginName]:common_1.values(this._plugins)};return UIRouter}();exports.UIRouter=UIRouter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var urlMatcher_1=__webpack_require__(116);var param_1=__webpack_require__(56);var paramTypes_1=__webpack_require__(220);var UrlMatcherFactory=function(){function UrlMatcherFactory(){var _this=this;this.paramTypes=new paramTypes_1.ParamTypes;this._isCaseInsensitive=false;this._isStrictMode=true;this._defaultSquashPolicy=false;this._getConfig=function(config){return common_1.extend({strict:_this._isStrictMode,caseInsensitive:_this._isCaseInsensitive},config)};this.paramFactory={fromConfig:function(id,type,config){return new param_1.Param(id,type,config,param_1.DefType.CONFIG,_this)},fromPath:function(id,type,config){return new param_1.Param(id,type,config,param_1.DefType.PATH,_this)},fromSearch:function(id,type,config){return new param_1.Param(id,type,config,param_1.DefType.SEARCH,_this)}};common_1.extend(this,{UrlMatcher:urlMatcher_1.UrlMatcher,Param:param_1.Param})}UrlMatcherFactory.prototype.caseInsensitive=function(value){return this._isCaseInsensitive=predicates_1.isDefined(value)?value:this._isCaseInsensitive};UrlMatcherFactory.prototype.strictMode=function(value){return this._isStrictMode=predicates_1.isDefined(value)?value:this._isStrictMode};UrlMatcherFactory.prototype.defaultSquashPolicy=function(value){if(predicates_1.isDefined(value)&&value!==true&&value!==false&&!predicates_1.isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=predicates_1.isDefined(value)?value:this._defaultSquashPolicy};UrlMatcherFactory.prototype.compile=function(pattern,config){return new urlMatcher_1.UrlMatcher(pattern,this.paramTypes,this.paramFactory,this._getConfig(config))};UrlMatcherFactory.prototype.isMatcher=function(object){if(!predicates_1.isObject(object))return false;var result=true;common_1.forEach(urlMatcher_1.UrlMatcher.prototype,function(val,name){if(predicates_1.isFunction(val))result=result&&(predicates_1.isDefined(object[name])&&predicates_1.isFunction(object[name]))});return result};UrlMatcherFactory.prototype.type=function(name,definition,definitionFn){var type=this.paramTypes.type(name,definition,definitionFn);return!predicates_1.isDefined(definition)?type:this};UrlMatcherFactory.prototype.$get=function(){this.paramTypes.enqueue=false;this.paramTypes._flushTypeQueue();return this};UrlMatcherFactory.prototype.dispose=function(){this.paramTypes.dispose()};return UrlMatcherFactory}();exports.UrlMatcherFactory=UrlMatcherFactory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var predicates_1=__webpack_require__(2);var urlMatcher_1=__webpack_require__(116);var hof_1=__webpack_require__(5);var urlRule_1=__webpack_require__(230);var targetState_1=__webpack_require__(47);function appendBasePath(url,isHtml5,absolute,baseHref){if(baseHref==="/")return url;if(isHtml5)return baseHref.slice(0,-1)+url;if(absolute)return baseHref.slice(1)+url;return url}var getMatcher=hof_1.prop("urlMatcher");var defaultRuleSortFn;defaultRuleSortFn=common_1.composeSort(common_1.sortBy(hof_1.pipe(hof_1.prop("priority"),function(x){return-x})),common_1.sortBy(hof_1.pipe(hof_1.prop("type"),function(type){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[type]})),function(a,b){return getMatcher(a)&&getMatcher(b)?urlMatcher_1.UrlMatcher.compare(getMatcher(a),getMatcher(b)):0},common_1.sortBy(hof_1.prop("$id"),common_1.inArray(["REGEXP","RAW","OTHER"])));var UrlRouter=function(){function UrlRouter(router){this._sortFn=defaultRuleSortFn;this._rules=[];this.interceptDeferred=false;this._id=0;this._sorted=false;this._router=router;this.urlRuleFactory=new urlRule_1.UrlRuleFactory(router);common_1.createProxyFunctions(hof_1.val(UrlRouter.prototype),this,hof_1.val(this))}UrlRouter.prototype.dispose=function(){this.listen(false);this._rules=[];delete this._otherwiseFn};UrlRouter.prototype.sort=function(compareFn){this._rules.sort(this._sortFn=compareFn||this._sortFn);this._sorted=true};UrlRouter.prototype.ensureSorted=function(){this._sorted||this.sort()};UrlRouter.prototype.match=function(url){var _this=this;this.ensureSorted();url=common_1.extend({path:"",search:{},hash:""},url);var rules=this.rules();if(this._otherwiseFn)rules.push(this._otherwiseFn);var checkRule=function(rule){var match=rule.match(url,_this._router);return match&&{match:match,rule:rule,weight:rule.matchPriority(match)}};var best;for(var i=0;i<rules.length;i++){if(best&&this._sortFn(rules[i],best.rule)!==0)break;var current=checkRule(rules[i]);best=!best||current&&current.weight>best.weight?current:best}return best};UrlRouter.prototype.sync=function(evt){if(evt&&evt.defaultPrevented)return;var router=this._router,$url=router.urlService,$state=router.stateService;var url={path:$url.path(),search:$url.search(),hash:$url.hash()};var best=this.match(url);var applyResult=hof_1.pattern([[predicates_1.isString,function(newurl){return $url.url(newurl,true)}],[targetState_1.TargetState.isDef,function(def){return $state.go(def.state,def.params,def.options)}],[hof_1.is(targetState_1.TargetState),function(target){return $state.go(target.state(),target.params(),target.options())}]]);applyResult(best&&best.rule.handler(best.match,url,router))};UrlRouter.prototype.listen=function(enabled){var _this=this;if(enabled===false){this._stopFn&&this._stopFn();delete this._stopFn}else{return this._stopFn=this._stopFn||this._router.urlService.onChange(function(evt){return _this.sync(evt)})}};UrlRouter.prototype.update=function(read){var $url=this._router.locationService;if(read){this.location=$url.path();return}if($url.path()===this.location)return;$url.url(this.location,true)};UrlRouter.prototype.push=function(urlMatcher,params,options){var replace=options&&!!options.replace;this._router.urlService.url(urlMatcher.format(params||{}),replace)};UrlRouter.prototype.href=function(urlMatcher,params,options){var url=urlMatcher.format(params);if(url==null)return null;options=options||{absolute:false};var cfg=this._router.urlService.config;var isHtml5=cfg.html5Mode();if(!isHtml5&&url!==null){url="#"+cfg.hashPrefix()+url}url=appendBasePath(url,isHtml5,options.absolute,cfg.baseHref());if(!options.absolute||!url){return url}var slash=!isHtml5&&url?"/":"",port=cfg.port();port=port===80||port===443?"":":"+port;return[cfg.protocol(),"://",cfg.host(),port,slash,url].join("")};UrlRouter.prototype.rule=function(rule){var _this=this;if(!urlRule_1.UrlRuleFactory.isUrlRule(rule))throw new Error("invalid rule");rule.$id=this._id++;rule.priority=rule.priority||0;this._rules.push(rule);this._sorted=false;return function(){return _this.removeRule(rule)}};UrlRouter.prototype.removeRule=function(rule){common_1.removeFrom(this._rules,rule)};UrlRouter.prototype.rules=function(){this.ensureSorted();return this._rules.slice()};UrlRouter.prototype.otherwise=function(handler){var handlerFn=getHandlerFn(handler);this._otherwiseFn=this.urlRuleFactory.create(hof_1.val(true),handlerFn);this._sorted=false};UrlRouter.prototype.initial=function(handler){var handlerFn=getHandlerFn(handler);var matchFn=function(urlParts,router){return router.globals.transitionHistory.size()===0&&!!/^\/?$/.exec(urlParts.path)};this.rule(this.urlRuleFactory.create(matchFn,handlerFn))};UrlRouter.prototype.when=function(matcher,handler,options){var rule=this.urlRuleFactory.create(matcher,handler);if(predicates_1.isDefined(options&&options.priority))rule.priority=options.priority;this.rule(rule);return rule};UrlRouter.prototype.deferIntercept=function(defer){if(defer===undefined)defer=true;this.interceptDeferred=defer};return UrlRouter}();exports.UrlRouter=UrlRouter;function getHandlerFn(handler){if(!predicates_1.isFunction(handler)&&!predicates_1.isString(handler)&&!hof_1.is(targetState_1.TargetState)(handler)&&!targetState_1.TargetState.isDef(handler)){throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property")}return predicates_1.isFunction(handler)?handler:hof_1.val(handler)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var urlMatcher_1=__webpack_require__(116);var predicates_1=__webpack_require__(2);var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var UrlRuleFactory=function(){function UrlRuleFactory(router){this.router=router}UrlRuleFactory.prototype.compile=function(str){return this.router.urlMatcherFactory.compile(str)};UrlRuleFactory.prototype.create=function(what,handler){var _this=this;var makeRule=hof_1.pattern([[predicates_1.isString,function(_what){return makeRule(_this.compile(_what))}],[hof_1.is(urlMatcher_1.UrlMatcher),function(_what){return _this.fromUrlMatcher(_what,handler)}],[predicates_1.isState,function(_what){return _this.fromState(_what,_this.router)}],[hof_1.is(RegExp),function(_what){return _this.fromRegExp(_what,handler)}],[predicates_1.isFunction,function(_what){return new BaseUrlRule(_what,handler)}]]);var rule=makeRule(what);if(!rule)throw new Error("invalid 'what' in when()");return rule};UrlRuleFactory.prototype.fromUrlMatcher=function(urlMatcher,handler){var _handler=handler;if(predicates_1.isString(handler))handler=this.router.urlMatcherFactory.compile(handler);if(hof_1.is(urlMatcher_1.UrlMatcher)(handler))_handler=function(match){return handler.format(match)};function match(url){var match=urlMatcher.exec(url.path,url.search,url.hash);return urlMatcher.validates(match)&&match}function matchPriority(params){var optional=urlMatcher.parameters().filter(function(param){return param.isOptional});if(!optional.length)return 1e-6;var matched=optional.filter(function(param){return params[param.id]});return matched.length/optional.length}var details={urlMatcher:urlMatcher,matchPriority:matchPriority,type:"URLMATCHER"};return common_1.extend(new BaseUrlRule(match,_handler),details)};UrlRuleFactory.prototype.fromState=function(state,router){var handler=function(match){var $state=router.stateService;var globals=router.globals;if($state.href(state,match)!==$state.href(globals.current,globals.params)){$state.transitionTo(state,match,{inherit:true,source:"url"})}};var details={state:state,type:"STATE"};return common_1.extend(this.fromUrlMatcher(state.url,handler),details)};UrlRuleFactory.prototype.fromRegExp=function(regexp,handler){if(regexp.global||regexp.sticky)throw new Error("Rule RegExp must not be global or sticky");var redirectUrlTo=function(match){return handler.replace(/\$(\$|\d{1,2})/,function(m,what){return match[what==="$"?0:Number(what)]})};var _handler=predicates_1.isString(handler)?redirectUrlTo:handler;var match=function(url){return regexp.exec(url.path)};var details={regexp:regexp,type:"REGEXP"};return common_1.extend(new BaseUrlRule(match,_handler),details)};UrlRuleFactory.isUrlRule=function(obj){return obj&&["type","match","handler"].every(function(key){return predicates_1.isDefined(obj[key])})};return UrlRuleFactory}();exports.UrlRuleFactory=UrlRuleFactory;var BaseUrlRule=function(){function BaseUrlRule(match,handler){var _this=this;this.match=match;this.type="RAW";this.matchPriority=function(match){return 0-_this.$id};this.handler=handler||common_1.identity}return BaseUrlRule}();exports.BaseUrlRule=BaseUrlRule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var hof_1=__webpack_require__(5);var predicates_1=__webpack_require__(2);var trace_1=__webpack_require__(37);var ViewService=function(){function ViewService(){var _this=this;this._uiViews=[];this._viewConfigs=[];this._viewConfigFactories={};this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return _this._uiViews},_activeViewConfigs:function(){return _this._viewConfigs}}}ViewService.prototype._rootViewContext=function(context){return this._rootContext=context||this._rootContext};ViewService.prototype._viewConfigFactory=function(viewType,factory){this._viewConfigFactories[viewType]=factory};ViewService.prototype.createViewConfig=function(path,decl){var cfgFactory=this._viewConfigFactories[decl.$type];if(!cfgFactory)throw new Error("ViewService: No view config factory registered for type "+decl.$type);var cfgs=cfgFactory(path,decl);return predicates_1.isArray(cfgs)?cfgs:[cfgs]};ViewService.prototype.deactivateViewConfig=function(viewConfig){trace_1.trace.traceViewServiceEvent("<- Removing",viewConfig);common_1.removeFrom(this._viewConfigs,viewConfig)};ViewService.prototype.activateViewConfig=function(viewConfig){trace_1.trace.traceViewServiceEvent("-> Registering",viewConfig);this._viewConfigs.push(viewConfig)};ViewService.prototype.sync=function(){var _this=this;var uiViewsByFqn=this._uiViews.map(function(uiv){return[uiv.fqn,uiv]}).reduce(common_1.applyPairs,{});function uiViewDepth(uiView){var stateDepth=function(context){return context&&context.parent?stateDepth(context.parent)+1:1};return uiView.fqn.split(".").length*1e4+stateDepth(uiView.creationContext)}function viewConfigDepth(config){var context=config.viewDecl.$context,count=0;while(++count&&context.parent)context=context.parent;return count}var depthCompare=hof_1.curry(function(depthFn,posNeg,left,right){return posNeg*(depthFn(left)-depthFn(right))});var matchingConfigPair=function(uiView){var matchingConfigs=_this._viewConfigs.filter(ViewService.matches(uiViewsByFqn,uiView));if(matchingConfigs.length>1){matchingConfigs.sort(depthCompare(viewConfigDepth,-1))}return[uiView,matchingConfigs[0]]};var configureUIView=function(_a){var uiView=_a[0],viewConfig=_a[1];if(_this._uiViews.indexOf(uiView)!==-1)uiView.configUpdated(viewConfig)};var pairs=this._uiViews.sort(depthCompare(uiViewDepth,1)).map(matchingConfigPair);trace_1.trace.traceViewSync(pairs);pairs.forEach(configureUIView)};ViewService.prototype.registerUIView=function(uiView){trace_1.trace.traceViewServiceUIViewEvent("-> Registering",uiView);var uiViews=this._uiViews;var fqnAndTypeMatches=function(uiv){return uiv.fqn===uiView.fqn&&uiv.$type===uiView.$type};if(uiViews.filter(fqnAndTypeMatches).length)trace_1.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",uiView);uiViews.push(uiView);this.sync();return function(){var idx=uiViews.indexOf(uiView);if(idx===-1){trace_1.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",uiView);return}trace_1.trace.traceViewServiceUIViewEvent("<- Deregistering",uiView);common_1.removeFrom(uiViews)(uiView)}};ViewService.prototype.available=function(){return this._uiViews.map(hof_1.prop("fqn"))};ViewService.prototype.active=function(){return this._uiViews.filter(hof_1.prop("$config")).map(hof_1.prop("name"))};ViewService.normalizeUIViewTarget=function(context,rawViewName){if(rawViewName===void 0){rawViewName=""}var viewAtContext=rawViewName.split("@");var uiViewName=viewAtContext[0]||"$default";var uiViewContextAnchor=predicates_1.isString(viewAtContext[1])?viewAtContext[1]:"^";var relativeViewNameSugar=/^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);if(relativeViewNameSugar){uiViewContextAnchor=relativeViewNameSugar[1];uiViewName=relativeViewNameSugar[2]}if(uiViewName.charAt(0)==="!"){uiViewName=uiViewName.substr(1);uiViewContextAnchor=""}var relativeMatch=/^(\^(?:\.\^)*)$/;if(relativeMatch.exec(uiViewContextAnchor)){var anchor=uiViewContextAnchor.split(".").reduce(function(anchor,x){return anchor.parent},context);uiViewContextAnchor=anchor.name}else if(uiViewContextAnchor==="."){uiViewContextAnchor=context.name}return{uiViewName:uiViewName,uiViewContextAnchor:uiViewContextAnchor}};ViewService.matches=function(uiViewsByFqn,uiView){return function(viewConfig){if(uiView.$type!==viewConfig.viewDecl.$type)return false;var vc=viewConfig.viewDecl;var vcSegments=vc.$uiViewName.split(".");var uivSegments=uiView.fqn.split(".");if(!common_1.equals(vcSegments,uivSegments.slice(0-vcSegments.length)))return false;var negOffset=1-vcSegments.length||undefined;var fqnToFirstSegment=uivSegments.slice(0,negOffset).join(".");var uiViewContext=uiViewsByFqn[fqnToFirstSegment].creationContext;return vc.$uiViewContextAnchor===(uiViewContext&&uiViewContext.name)}};return ViewService}();exports.ViewService=ViewService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var stateParams_1=__webpack_require__(221);var queue_1=__webpack_require__(145);var UIRouterGlobals=function(){function UIRouterGlobals(){this.params=new stateParams_1.StateParams;this.lastStartedTransitionId=-1;this.transitionHistory=new queue_1.Queue([],1);this.successfulTransitions=new queue_1.Queue([],1)}UIRouterGlobals.prototype.dispose=function(){this.transitionHistory.clear();this.successfulTransitions.clear();this.transition=null};return UIRouterGlobals}();exports.UIRouterGlobals=UIRouterGlobals},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var coreservices_1=__webpack_require__(11);var common_1=__webpack_require__(1);var makeStub=function(keys){return keys.reduce(function(acc,key){return acc[key]=coreservices_1.notImplemented(key),acc},{dispose:common_1.noop})};var locationServicesFns=["url","path","search","hash","onChange"];var locationConfigFns=["port","protocol","host","baseHref","html5Mode","hashPrefix"];var umfFns=["type","caseInsensitive","strictMode","defaultSquashPolicy"];var rulesFns=["sort","when","initial","otherwise","rules","rule","removeRule"];var syncFns=["deferIntercept","listen","sync","match"];var UrlService=function(){function UrlService(router,lateBind){if(lateBind===void 0){lateBind=true}this.router=router;this.rules={};this.config={};var locationServices=function(){return router.locationService};common_1.createProxyFunctions(locationServices,this,locationServices,locationServicesFns,lateBind);var locationConfig=function(){return router.locationConfig};common_1.createProxyFunctions(locationConfig,this.config,locationConfig,locationConfigFns,lateBind);var umf=function(){return router.urlMatcherFactory};common_1.createProxyFunctions(umf,this.config,umf,umfFns);var urlRouter=function(){return router.urlRouter};common_1.createProxyFunctions(urlRouter,this.rules,urlRouter,rulesFns);common_1.createProxyFunctions(urlRouter,this,urlRouter,syncFns)}UrlService.prototype.url=function(newurl,replace,state){return};UrlService.prototype.path=function(){return};UrlService.prototype.search=function(){return};UrlService.prototype.hash=function(){return};UrlService.prototype.onChange=function(callback){return};UrlService.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}};UrlService.prototype.dispose=function(){};UrlService.prototype.sync=function(evt){return};UrlService.prototype.listen=function(enabled){return};UrlService.prototype.deferIntercept=function(defer){return};UrlService.prototype.match=function(urlParts){return};UrlService.locationServiceStub=makeStub(locationServicesFns);UrlService.locationConfigStub=makeStub(locationConfigFns);return UrlService}();exports.UrlService=UrlService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var coreservices_1=__webpack_require__(11);var lazyLoadHook=function(transition){var router=transition.router;function retryTransition(){if(transition.originalTransition().options().source!=="url"){var orig=transition.targetState();return router.stateService.target(orig.identifier(),orig.params(),orig.options())}var $url=router.urlService;var result=$url.match($url.parts());var rule=result&&result.rule;if(rule&&rule.type==="STATE"){var state=rule.state;var params=result.match;return router.stateService.target(state,params,transition.options())}router.urlService.sync()}var promises=transition.entering().filter(function(state){return!!state.$$state().lazyLoad}).map(function(state){return lazyLoadState(transition,state)});return coreservices_1.services.$q.all(promises).then(retryTransition)};exports.registerLazyLoadHook=function(transitionService){return transitionService.onBefore({entering:function(state){return!!state.lazyLoad}},lazyLoadHook)};function lazyLoadState(transition,state){var lazyLoadFn=state.$$state().lazyLoad;var promise=lazyLoadFn["_promise"];if(!promise){var success=function(result){delete state.lazyLoad;delete state.$$state().lazyLoad;delete lazyLoadFn["_promise"];return result};var error=function(err){delete lazyLoadFn["_promise"];return coreservices_1.services.$q.reject(err)};promise=lazyLoadFn["_promise"]=coreservices_1.services.$q.when(lazyLoadFn(transition,state)).then(updateStateRegistry).then(success,error)}function updateStateRegistry(result){if(result&&Array.isArray(result.states)){result.states.forEach(function(state){return transition.router.stateRegistry.register(state)})}return result}return promise}exports.lazyLoadState=lazyLoadState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var transitionHook_1=__webpack_require__(94);var TransitionEventType=function(){function TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){if(reverseSort===void 0){reverseSort=false}if(getResultHandler===void 0){getResultHandler=transitionHook_1.TransitionHook.HANDLE_RESULT}if(getErrorHandler===void 0){getErrorHandler=transitionHook_1.TransitionHook.REJECT_ERROR}if(synchronous===void 0){synchronous=false}this.name=name;this.hookPhase=hookPhase;this.hookOrder=hookOrder;this.criteriaMatchPath=criteriaMatchPath;this.reverseSort=reverseSort;this.getResultHandler=getResultHandler;this.getErrorHandler=getErrorHandler;this.synchronous=synchronous}return TransitionEventType}();exports.TransitionEventType=TransitionEventType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var index_1=__webpack_require__(92);exports.$q={when:function(val){return new Promise(function(resolve,reject){return resolve(val)})},reject:function(val){return new Promise(function(resolve,reject){reject(val)})},defer:function(){var deferred={};deferred.promise=new Promise(function(resolve,reject){deferred.resolve=resolve;deferred.reject=reject});return deferred},all:function(promises){if(index_1.isArray(promises)){return Promise.all(promises)}if(index_1.isObject(promises)){var chain=Object.keys(promises).map(function(key){return promises[key].then(function(val){return{key:key,val:val}})});return exports.$q.all(chain).then(function(values){return values.reduce(function(acc,tuple){acc[tuple.key]=tuple.val;return acc},{})})}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var index_1=__webpack_require__(92);var globals={};var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var ARGUMENT_NAMES=/([^\s,]+)/g;exports.$injector={get:function(name){return globals[name]},has:function(name){return exports.$injector.get(name)!=null},invoke:function(fn,context,locals){var all=index_1.extend({},globals,locals||{});var params=exports.$injector.annotate(fn);var ensureExist=index_1.assertPredicate(function(key){return all.hasOwnProperty(key)},function(key){return"DI can't find injectable: '"+key+"'"});var args=params.filter(ensureExist).map(function(x){return all[x]});if(index_1.isFunction(fn))return fn.apply(context,args);else return fn.slice(-1)[0].apply(context,args)},annotate:function(fn){if(!index_1.isInjectable(fn))throw new Error("Not an injectable function: "+fn);if(fn&&fn.$inject)return fn.$inject;if(index_1.isArray(fn))return fn.slice(0,-1);var fnStr=fn.toString().replace(STRIP_COMMENTS,"");var result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES);return result||[]}}},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var utils_1=__webpack_require__(96);var baseLocationService_1=__webpack_require__(117);var HashLocationService=function(_super){__extends(HashLocationService,_super);function HashLocationService(router){var _this=_super.call(this,router,false)||this;window.addEventListener("hashchange",_this._listener,false);return _this}HashLocationService.prototype._get=function(){return utils_1.trimHashVal(this._location.hash)};HashLocationService.prototype._set=function(state,title,url,replace){this._location.hash=url};HashLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router);window.removeEventListener("hashchange",this._listener)};return HashLocationService}(baseLocationService_1.BaseLocationServices);exports.HashLocationService=HashLocationService},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var baseLocationService_1=__webpack_require__(117);var MemoryLocationService=function(_super){__extends(MemoryLocationService,_super);function MemoryLocationService(router){return _super.call(this,router,true)||this}MemoryLocationService.prototype._get=function(){return this._url};MemoryLocationService.prototype._set=function(state,title,url,replace){this._url=url};return MemoryLocationService}(baseLocationService_1.BaseLocationServices);exports.MemoryLocationService=MemoryLocationService},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var utils_1=__webpack_require__(96);var baseLocationService_1=__webpack_require__(117);var PushStateLocationService=function(_super){__extends(PushStateLocationService,_super);function PushStateLocationService(router){var _this=_super.call(this,router,true)||this;_this._config=router.urlService.config;window.addEventListener("popstate",_this._listener,false);return _this}PushStateLocationService.prototype._get=function(){var _a=this._location,pathname=_a.pathname,hash=_a.hash,search=_a.search;search=utils_1.splitQuery(search)[1];hash=utils_1.splitHash(hash)[1];return pathname+(search?"?"+search:"")+(hash?"$"+search:"")};PushStateLocationService.prototype._set=function(state,title,url,replace){var _a=this,_config=_a._config,_history=_a._history;var fullUrl=_config.baseHref()+url;if(replace){_history.replaceState(state,title,fullUrl)}else{_history.pushState(state,title,fullUrl)}};PushStateLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router);window.removeEventListener("popstate",this._listener)};return PushStateLocationService}(baseLocationService_1.BaseLocationServices);exports.PushStateLocationService=PushStateLocationService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=__webpack_require__(2);var common_1=__webpack_require__(1);var MemoryLocationConfig=function(){function MemoryLocationConfig(){var _this=this;this._baseHref="";this._port=80;this._protocol="http";this._host="localhost";this._hashPrefix="";this.port=function(){return _this._port};this.protocol=function(){return _this._protocol};this.host=function(){return _this._host};this.baseHref=function(){return _this._baseHref};this.html5Mode=function(){return false};this.hashPrefix=function(newval){return predicates_1.isDefined(newval)?_this._hashPrefix=newval:_this._hashPrefix};this.dispose=common_1.noop}return MemoryLocationConfig}();exports.MemoryLocationConfig=MemoryLocationConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=__webpack_require__(2);var BrowserLocationConfig=function(){function BrowserLocationConfig(router,_isHtml5){if(_isHtml5===void 0){_isHtml5=false}this._isHtml5=_isHtml5;this._baseHref=undefined;this._hashPrefix=""}BrowserLocationConfig.prototype.port=function(){if(location.port){return Number(location.port)}return this.protocol()==="https"?443:80};BrowserLocationConfig.prototype.protocol=function(){return location.protocol.replace(/:/g,"")};BrowserLocationConfig.prototype.host=function(){return location.host};BrowserLocationConfig.prototype.html5Mode=function(){return this._isHtml5};BrowserLocationConfig.prototype.hashPrefix=function(newprefix){return predicates_1.isDefined(newprefix)?this._hashPrefix=newprefix:this._hashPrefix};BrowserLocationConfig.prototype.baseHref=function(href){return predicates_1.isDefined(href)?this._baseHref=href:this._baseHref||this.applyDocumentBaseHref()};BrowserLocationConfig.prototype.applyDocumentBaseHref=function(){var baseTags=document.getElementsByTagName("base");return this._baseHref=baseTags.length?baseTags[0].href.substr(location.origin.length):""};BrowserLocationConfig.prototype.dispose=function(){};return BrowserLocationConfig}();exports.BrowserLocationConfig=BrowserLocationConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=__webpack_require__(21);var StateProvider=function(){function StateProvider(stateRegistry,stateService){this.stateRegistry=stateRegistry;this.stateService=stateService;core_1.createProxyFunctions(core_1.val(StateProvider.prototype),this,core_1.val(this))}StateProvider.prototype.decorator=function(name,func){return this.stateRegistry.decorator(name,func)||this};StateProvider.prototype.state=function(name,definition){if(core_1.isObject(name)){definition=name}else{definition.name=name}this.stateRegistry.register(definition);return this};StateProvider.prototype.onInvalid=function(callback){return this.stateService.onInvalid(callback)};return StateProvider}();exports.StateProvider=StateProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=__webpack_require__(21);var core_2=__webpack_require__(21);var UrlRouterProvider=function(){function UrlRouterProvider(router){this._router=router;this._urlRouter=router.urlRouter}UrlRouterProvider.prototype.$get=function(){var urlRouter=this._urlRouter;urlRouter.update(true);if(!urlRouter.interceptDeferred)urlRouter.listen();return urlRouter};UrlRouterProvider.prototype.rule=function(ruleFn){var _this=this;if(!core_2.isFunction(ruleFn))throw new Error("'rule' must be a function");var match=function(){return ruleFn(core_2.services.$injector,_this._router.locationService)};var rule=new core_1.BaseUrlRule(match,core_2.identity);this._urlRouter.rule(rule);return this};UrlRouterProvider.prototype.otherwise=function(rule){var _this=this;var urlRouter=this._urlRouter;if(core_2.isString(rule)){urlRouter.otherwise(rule)}else if(core_2.isFunction(rule)){urlRouter.otherwise(function(){return rule(core_2.services.$injector,_this._router.locationService)})}else{throw new Error("'rule' must be a string or function")}return this};UrlRouterProvider.prototype.when=function(what,handler){if(core_2.isArray(handler)||core_2.isFunction(handler)){handler=UrlRouterProvider.injectableHandler(this._router,handler)}this._urlRouter.when(what,handler);return this};UrlRouterProvider.injectableHandler=function(router,handler){return function(match){return core_2.services.$injector.invoke(handler,null,{$match:match,$stateParams:router.globals.params})}};UrlRouterProvider.prototype.deferIntercept=function(defer){this._urlRouter.deferIntercept(defer)};return UrlRouterProvider}();exports.UrlRouterProvider=UrlRouterProvider},function(module,exports){module.exports='<div>\n    <h3>{{::\'common.action.add\' | message}} {{selectedAll ? \'all\' : checkedItems.length}} {{::\'generalResults.collection.items.collection\' | message}}</h3>\n    <p class="alert alert-info">\n        <em class="fa fa-info-circle"></em>\n        {{::\'common.limit\' | message}}: {{$root.user.collectionSizeLimits[type] | customNumber}}\n    </p>\n    \n    <div>\n        <label>{{::\'user.collections.select\' | message}}</label>\n        \n        <div ng-if="vm.collections.length > 1">\n            <form>\n                <label class="input">\n                    <em class="fa fa-search icon_append"></em>\n                    <input type="text"\n                        placeholder="Filter collections"\n                        class="search-term"\n                        ng-model="vm.collectionFilter.title"\n                    >\n                </label>\n            </form>\n        </div>    \n\n        <div lens-select-collections-list\n            collections="vm.collections"\n            filter="vm.collectionFilter"\n            checked="vm.checkedCollections"\n        ></div>\n\n        <div ng-if="!vm.collections.length" class="alert alert-info">\n            {{::\'user.collections.patent.notexist\' | message}}\n        </div>\n        <br>\n        <div class="pull-right">\n            <a hidden class="btn btn-sm btn-default" ng-click="close()">\n                {{::\'common.action.cancel\' | message}}\n            </a>\n            <a class="btn btn-sm btn-default" ng-click="doNewCollection()">\n                {{::\'user.collections.createNew.title\' | message}}\n            </a>\n            <a class="btn btn-sm btn-pri"\n                ng-click="addToCollection()"\n                ng-disabled="vm.submitting"\n                ng-class="{\'btn-submitting\': vm.submitting}">\n                <em class="fa fa-refresh fa-spin" ng-if="vm.submitting"></em>\n                {{::\'collectionManageWidget.btnAdd\' | message}}\n            </a>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="breadcrumbs breadcrumbs-chevron pull-left-md">\n\n    <a href="/lens/">\n        <svg class="breadcrumb-home" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1472 992v480q0 26-19 45t-45 19h-384v-384h-256v384h-384q-26 0-45-19t-19-45v-480q0-1 .5-3t.5-3l575-474 575 474q1 2 1 6zm223-69l-62 74q-8 9-21 11h-3q-13 0-21-7l-692-577-692 577q-12 8-24 7-13-2-21-11l-62-74q-8-10-7-23.5t11-21.5l719-599q32-26 76-26t76 26l244 204v-195q0-14 9-23t23-9h192q14 0 23 9t9 23v408l219 182q10 8 11 21.5t-7 23.5z"/></svg>\n    </a>\n\n    <span ng-if="$root.isIn4M">\n        <div class="crumb-sep"></div>\n        <a class="breadnum" ui-sref="rankings.locations({dataset:\'australia\'})">{{\'breadcrumb.australia\' | message}}</a>\n        <span>{{\'common.or\' | message}}</span>\n        <a class="breadnum" ui-sref="rankings.locations({dataset:\'global\'})">{{\'breadcrumb.global\' | message}}</a>\n\n        <span>\n            <div class="crumb-sep"></div>\n            <a class="breadnum" href="#"> {{currentState}}</a>\n        </span>\n    </span>\n\n    <span ng-if="previousSearch">\n        <div class="crumb-sep"></div>\n        <span ng-if="previousSearch.patentQueryId" ui-sref="scholar.results" class="breadnum">\n            {{\'breadcrumb.patents\' | message}}\n        </span>\n        <div ng-if="previousSearch.patentQueryId" class="crumb-sep"></div>\n        <a class="breadnum" ui-sref="scholar.results(previousSearch)">\n            <strong ng-if="previousSearch.totalHits">\n                {{previousSearch.totalHits | customNumber}}\n            </strong>\n            {{previousSearch.patentQueryId ? \'Cited Work Results\' : \'Scholarly Results\'}}\n        </a>\n    </span>\n\n    <span ng-if="article">\n        <div class="crumb-sep"></div>\n        <a class="breadnum" ui-sref="article.main({id: article.record_lens_id})">\n            {{\'breadcrumb.article\' | message}}\n        </a>\n    </span>\n\n</div>\n'},function(module,exports){module.exports='<div class="exp-window draggable" ng-class="{fullscreen: fullscreen}" lens-explorer-window>\n    <header class="clearfix draggable-handle">\n        <h5 class="explorer-title pull-left">{{\'classification.viewer.title\' | message}}</h5>\n        <a class="pull-right" ng-click="$root.classificationViewer = null" style="cursor: pointer">\n            <em class="fa fa-times col-error"></em>\n        </a>\n        \x3c!--\n        <a class="pull-right" ng-click="fullscreen = !fullscreen" style="cursor: pointer">\n            <em class="fa" ng-class="{ \'fa-caret-square-o-down\': fullscreen, \'fa-caret-square-o-up\': !fullscreen }"></em>\n        </a>\n        --\x3e\n    </header>\n\n    <div class="exp-window-body exp-class-viewer">\n        <div lens-classification-viewer\n            type="$root.classificationViewer.type"\n            term="$root.classificationViewer.term"\n        ></div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="classification-viewer-item" ng-attr-id="{{ \'classification-viewer-item-\' + item.id }}" ng-class="{ selected: selected === item.symbol || (item.type === \'IPC\' && item.symbol === parseIPC(selected)) }">\n    <form class="inline-block">\n        <label class="checkbox">\n            <input type="checkbox" value="{{ item.symbol }}" ng-model="classifications[item.symbol]" ng-click="$event.stopPropagation()" />\n            <i></i>\n        </label>\n    </form>\n    <div class="symbol inline-block" ng-click="toggleChildren()" ng-class="{active: item.showChildren}">\n\n\n        <i class="fa fa-caret-right" ng-if="$parent.searchType !== \'search\'" ng-show="hasChildren()"></i>\n        {{ item.symbol }}\n        <i class="fa fa-folder" ng-show="hasChildren()" tooltip-title="Expand Section"></i>\n    </div>\n    <div class="tooltip_templates">\n        <ul id="{{ tooltipContentId() }}">\n            <li>\n                <a ng-click="searchBySymbol($event, item, true)">\n                    {{ newSearchText() }}\n                </a>\n            </li>\n            <li ng-if="isSearchInitialized()">\n                <a ng-click="searchBySymbol($event, item)">\n                    {{ filterExistingSearchText() }}\n                </a>\n            </li>\n        </ul>\n        <div>\n            <ul ng-if="canFilter(item.symbol)">\n                <li>\n                    <a ng-href="{{getFilterLink(item)}}" ng-click="applyFilter($event, item, true)">\n                        {{:: \'classification.viewer.startNewSearch\' | message:[item.symbol] }}\n                    </a>\n                </li>\n                <li ng-if="isSearchInitialized()">\n                    <a ng-href="{{getFilterLink(item)}}" ng-click="applyFilter($event, item)">\n                        {{:: \'classification.viewer.filterExistingSearch\' | message:[item.symbol] }}\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <a tooltip-title tooltip-content-selector="#{{ tooltipContentId() }}">\n        <i class="fa fa-search classification-viewer-filter-link" ng-show="!canFilter(item.symbol)"></i>\n        <i class="fa fa-filter classification-viewer-filter-link" ng-show="canFilter(item.symbol)"></i>\n    </a>\n    <br/>\n    <span ng-if="$parent.searchType !== \'search\'">\n        <span class="classTitle">\n            {{ item.classTitle || item.textBody }}\n            {{ item.subClassDescription }}\n        </span>\n    </span>\n    <span ng-if="$parent.searchType === \'search\'">\n        <span ng-if="item.textBody">\n            <span class="classTitle" ng-bind-html="item.textBody"></span>\n        </span>\n        <span ng-if="item.classTitle">\n            <span class="classTitle" ng-bind-html="item.classTitle"></span>\n        </span>\n        <span ng-if="item.textBody">\n            <span class="classTitle" ng-bind-html="item.textBody"></span>\n        </span>\n        <span ng-if="item.subClassTitle">\n            <span class="classTitle" ng-bind-html="item.subClassTitle"></span>\n        </span>\n        <span ng-if="item.subClassDescription">\n            <span class="classTitle" ng-bind-html="item.subClassDescription"></span>\n        </span>\n    </span>\n    <span class="link" ng-show="!item.childrenFetched && item.children.length > 0 && !item.loading" ng-click="toggleChildren(true)">{{\'classification.viewer.load.children\' | message}}</span>\n    <span ng-if="item.notesAndWarnings.length" ng-click="item.showNotesAndWarnings = !item.showNotesAndWarnings" class="link notes">\n        <span ng-bind-html="\'classification.viewer.notes\' | message | unsafe"></span>\n    </span>\n    <pre ng-show="item.showNotesAndWarnings">{{ item.notesAndWarnings }}</pre>\n\n    <div ng-show="item.showChildren">\n        <div ng-if="!item.loading && item.children.length === 0">\n            {{\'classification.viewer.no.children\' | message}}\n        </div>\n        <div ng-if="item.loading" class="classification-viewer-loading">\n            <em class="fa fa-refresh fa-spin"></em>\n            {{\'common.loading\' | message}}\n        </div>\n        <lens-classification-viewer-item ng-repeat="x in item.children track by $index" item="x" selected="selected" classifications="classifications"></lens-classification-viewer-item>\n    </div>\n</div>\n'},function(module,exports){module.exports='<form ng-submit="search()" class="classification-viewer-form">\n    <div class="input-group input-group-sm">\n        <input\n            type="text"\n            class="form-control classification-viewer-search-input"\n            ng-model="term"\n            ng-model-options="{debounce:800}"\n            ng-change="searched = false"\n            placeholder="{{\'classification.viewer.searchPlaceholder\' | message}}"\n        />\n\n        <div class="input-group-btn">\n            <button title="Submit Search" aria-label="Submit Search" class="btn btn-pri" type="submit">\n                <i class="fa" ng-class="{ \'fa-search\': !loading, \'fa-refresh fa-spin\': loading }"></i>\n            </button>\n        </div>\n    </div>\n\n    <div class="inline-group">\n        <label class="radio">\n            <input ng-model="type" value="CPC" type="radio" name="radio-inline" ng-change="fetchRoot()">\n            <i></i>\n            {{ \'patentField.cpc\' | message }}\n        </label>\n        <label class="radio">\n            <input ng-model="type" value="IPC" type="radio" name="radio-inline" ng-change="fetchRoot()">\n            <i></i>\n            {{ \'patentField.ipc\' | message }}\n        </label>\n        <label class="radio">\n            <input ng-model="type" value="USPC" type="radio" name="radio-inline" ng-change="fetchRoot()">\n            <i></i>\n            {{ \'patentField.us\' | message }}\n        </label>\n\n        <div ng-if="hideActionButtons" class="pull-right">\n            <button class="btn btn-danger btn-xxs" ng-if="hasSelected()" ng-click="clearSelected($event)">{{ \'filters.common.clear\' | message }}</button>\n        </div>\n\n    </div>\n\n    <div class="class-select-tool" ng-if="!hideActionButtons">\n        <button class="btn btn-danger btn-xxs" ng-if="hasSelected()" ng-click="clearSelected($event)">{{ \'filters.common.clear\' | message }}</button>\n        <button class="btn btn-pri btn-xxs" ng-if="hasSelected()" ng-click="applySelections($event, true)">{{ \'searchBar.newSearch\' | message }}</button>\n        <button class="btn btn-pri btn-xxs" ng-if="hasSelected() && isSearchInitialized()" ng-click="applySelections($event)">{{ \'searchBar.refineSearch\' | message }}</button>\n    </div>\n</form>\n\n<div class="exp-class-viewer-results">\n\n    <div ng-if="about" ng-bind-html="\'classification.viewer.about\' | message | unsafe"> </div>\n\n    <div ng-if="loading && !items.length" class="classification-viewer-loading">\n        <em class="fa fa-refresh fa-spin"></em>\n        {{\'common.loading\' | message}}\n    </div>\n\n    <div ng-if="!loading && !items.length && type===\'USPC\'" class="classification-viewer-loading">\n        {{\'classification.viewer.uspcInfo\' | message}}\n    </div>\n\n    <div ng-if="!loading && !items.length && searched && type!==\'USPC\' && searchType===\'search\'" class="classification-viewer-loading">\n        {{\'common.no.results.found\' | message}}\n        <strong>{{term}}</strong>\n    </div>\n\n    <div ng-if="!loading && !items.length && type!==\'USPC\' && searchType!==\'search\'" class="classification-viewer-loading">\n        {{\'common.no.results.found\' | message}}\n        <strong>{{symbol}}</strong>\n    </div>\n\n    <div ng-if="error" class="alert alert-danger">\n        {{ error }}\n    </div>\n\n    <lens-classification-viewer-item ng-repeat="item in items track by $index" item="item" selected="symbol" classifications="classifications" />\n</div>\n'},function(module,exports){module.exports='<span class="collection-controls">\n    <a href="/lens/user/login" ng-if="$root.isAnon" class="alert alert-info selection-tools-alert login-link">\n        <em class="fa fa-info-circle"></em>\n        Login to manage collections and notes\n    </a>\n\n    <span ng-if="!$root.isAnon">\n\n        \x3c!--<span class="btn btn-pri dropdown-toggle"\n            data-toggle="dropdown"\n            ng-if="vm.collections.length > 0"\n            tooltip-title tooltip-title-variable="\'collectionManageWidget.manage\' | message"\n        >\n            <em class="fa fa-caret-down"></em>\n            {{::\'collectionManageWidget.titleWidget\' | message}}\n        </span>\n        --\x3e\n        <a class="btn btn-xs"\n            ng-click="doNewCollection()"\n            tooltip-title tooltip-title-variable="\'collectionManageWidget.btnCreate\' | message"\n            ng-if="vm.filteredCollections.length > 0"\n        >\n            <em class="fa fa-folder-open col-pri"></em>\n            {{::\'collectionManageWidget.btnCreateAlt\' | message}}\n        </a>\n        <a class="btn btn-xs"\n            ng-click="doAddToCollection()"\n            tooltip-title tooltip-title-variable="\'collectionManageWidget.btnAdd.tip\' | message"\n            ng-if="vm.filteredCollections.length > 0"\n        >\n            <em class="fa fa-plus-circle col-pri"></em>\n            {{::\'collectionManageWidget.btnAdd\' | message}}\n            \n        </a>\n        <a class="btn btn-xs"\n            ng-click="doRemoveFromCollection()"\n            tooltip-title tooltip-title-variable="\'collectionManageWidget.btnRemove.tip\' | message"\n            ng-if="vm.filteredCollections.length > 0"\n        >\n            <em class="fa fa-minus-circle col-error"></em>\n            {{::\'collectionManageWidget.btnRemove\' | message}}\n            \n        </a>\n        \x3c!--\n        <ul class="dropdown-menu" ng-if="vm.collections.length > 0">\n            <li>\n                <ul class="drop-list-scroll">\n                    <li ng-repeat="collection in vm.collections | orderBy:\'updated\':true">\n                        <a ng-href="{{::collection | collectionUrl}}">\n                            <span class="collectionCount">\n                                {{::collection.itemCount}}\n                            </span>\n                            {{::collection.title}}\n                            <div class="collectionMeta" ng-class="{ \'is-patent\': collection.type === \'PATENT\', \'is-scholar\': collection.type === \'SCHOLARLY_WORK\' }">\n                                <span class="collectionType">\n                                    {{:: collection.type | collectionType }} -\n                                </span>\n                                <span class="collectionShared">\n                                    {{\'user.sharing.\' + collection.access | message}}\n                                </span>\n                                <span class="collectionDate">\n                                    {{::collection.updated | date}}\n                                </span>\n                            </div>\n                        </a>\n                    </li>\n                </ul>\n            </li>\n            <li role="separator" class="divider"></li>\n            <li>\n                <a href="/lens/user/collections">\n                    {{::\'collectionManageWidget.manage\' | message}}\n                </a>\n            </li>\n        </ul>--\x3e\n    </span>\n\n    <span class="btn btn-xs"\n        ng-if="!$root.isAnon && vm.filteredCollections.length === 0"\n        ng-click="doNewCollection()"\n        tooltip-title tooltip-title-variable="\'collectionManageWidget.emptyMessage\' | message"\n    >\n        <em class="fa fa-folder-open col-pri"></em>\n        {{::\'collectionManageWidget.btnCreate\' | message}}\n    </span>\n\n</span>\n'},function(module,exports){module.exports='<div class="div-table-results-row">\n    <form hidden>\n        <label class="checkbox">\n            <input type="checkbox" name="" value="" />\n            <i></i>\n        </label>\n        <div class="favResult">\n            <em class="fa"\n                ng-click="favourite(collection.id)"\n                ng-class="starIcon(collection.id)"\n            ></em>\n        </div>\n    </form>\n\n    <header>\n    <div class="listing-header clearfix">\n        <div class="listing-with-sidebar">\n            <h3>\n                <a ng-href="{{collection | collectionUrl}}">\n                    {{::collection.title}}\n                </a>\n            </h3>\n\n            <ul class="list-inline header-meta">\n                <li>\n                    <b>{{\'common.items.alt\' | message}}:</b>\n                    <a ng-href="{{collection | collectionUrl}}" class="styled-link" tooltip-title="View {{::collection.title}} in the Lens">\n                        {{::collection.itemCount | customNumber}}\n                    </a>\n                </li>\n\n                <li>\n                    <b>{{\'common.type\' | message}}:</b>\n                    {{collection.type || \'Patent\'}}</li>\n\n                <li class="meta-notices">\n\n                    <b>{{\'common.info\' | message}}:</b>\n\n                    <span class="span meta-notice">\n                        <i class="fa fa-unlock-alt meta-notice-icon"></i>\n                        {{\'user.collections.public\' | message}}\n                    </span>\n\n                    <span>\n                        <a ng-if="collection.user.metadata.GRID" class="meta-grid" ng-href="https://grid.ac/institutes/{{collection.user.metadata.GRID}}">\n                            <i class="fa fa-folder-open-o meta-notice-icon"></i>\n                            {{collection.user.metadata.GRID}}\n                        </a>\n                    </span>\n\n                    <span class="meta-notice meta-notice-purple" ng-if="collection.user.type === \'institution\'">\n                        <i class="fa fa-university meta-notice-icon"></i>\n                        {{\'scholar.common.dossier\' | message}}\n                    </span>\n\n                    <span class="meta-notice meta-notice-secondary" ng-if="collection.notes.length">\n                        <i class="fa fa-sticky-note-o meta-notice-icon"></i>\n                        {{collection.notes.length}} {{\'notes.notes\' | message}}\n                    </span>\n                </li>\n                <li>\n                    <span ng-if="item.slug" ng-include="$root.institutionDataLocation + \'/public/descriptions/\' + item.slug + \'.html\'"></span>\n\n                    {{collection.showFullDescription ? collection.description : collection.description.substr(0, MAX_DESCRIPTION_LENGTH) + (collection.description.length ? \'...\' : \'No Description\')}}\n                    <span class="link show-more" ng-click="collection.showFullDescription = !collection.showFullDescription" ng-if="collection.description.length > MAX_DESCRIPTION_LENGTH">\n                        {{collection.showFullDescription ? \'Show Less\' : \'More...\'}}\n                    </span>\n                </li>\n            </ul>\n\n\n        </div>\n\n        <div class="listing-sidebar results-doc-id">\n            <div class="results-doc-id-inner clearfix">\n                <a class="listing-logo pull-left" ng-if="collection.user.type === \'personal\' && !item.type" ng-href="{{collection.user.linkedAccounts[0].profileUrl}}">\n                    <span>\n                        <img ng-if="collection.user.profilePictureKey" ng-src="{{$root.userProfilePictureUrl(collection.user.profilePictureKey)}}" alt="">\n                        <img ng-if="!collection.user.profilePictureKey" ng-src="{{$root.assetLocation}}/img/missing-user.png" alt="" style="cursor: default;">\n                    </span>\n                </a>\n\n                <a class="listing-logo pull-left"\n                    ng-if="item.type === \'faux\'"\n                    ng-href="{{item.link}}"\n                >\n                    <span ng-if="item.user.metadata.logoUrl">\n                        <img alt="Curator" ng-src="{{item.user.metadata.logoUrl}}" style="background: none;">\n                    </span>\n                </a>\n\n                <a class="listing-logo pull-left"\n                    ng-if="item.type === \'institution\'"\n                    ng-click="vm.lightbox = !vm.lightbox"\n                >\n                    <span ng-if="item.user.metadata.logoUrl">\n                        <img alt="Curator" ng-src="{{item.user.metadata.logoUrl}}">\n                    </span>\n                    <em class="fa fa-ellipsis-h"></em>\n                </a>\n\n                <ul class="list-unstyled pull-left">\n                    <li>\n                        <div ng-if="item.user.metadata.GRID" class="lens-university-grid-container">\n                            <a ng-href="https://grid.ac/institutes/{{item.user.metadata.GRID}}">\n                                <img alt="GRID ID" class="grid-id-logo" ng-src="{{$root.assetLocation}}/fonts/svg-icons/grid-id.svg">\n                                {{item.user.metadata.GRID}}\n                            </a>\n                        </div>\n                    </li>\n                    <li>\n                        {{\'common.curator\' | message}}: {{::collection.user.displayName.substr(0, 18)}}\n                        <span ng-if="collection.user.displayName.length > 18">...</span>\n                    </li>\n                    <li class="collection-date">{{\'common.dateCreated\' | message}}: {{::collection.created | date}}</li>\n                    <li class="collection-date">{{\'common.Updated\' | message}}: {{::collection.updated | date}}</li>\n                    \x3c!--<li>{{\'common.numberItems\' | message}}: {{::collection.itemCount | customNumber}}</li>--\x3e\n                </ul>\n            </div>\n        </div>\n    </div>\n    </header>\n\n    <div lens-modal visible="vm.lightbox">\n        <div lens-institution-details visible="vm.lightbox" item="item"></div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="div-table-results-body" ng-class="{loading: loading}">\n\n    <div lens-collection-list-item class="no-selects" ng-repeat="item in items | orderBy:\'updated\':true" collection="item"></div>\n\n    <div class="lens-colleciton-list-controls">\n        \x3c!--\n        <div ng-show="loading" class="no-content">\n            <em class="fa fa-refresh fa-spin fa-3x fa-fw load-icon"></em> Loading...\n        </div>\n        --\x3e\n        <div ng-show="!loading && items.length === 0" class="no-content">\n            <p>{{\'user.collections.not.found\' | message}}</p>\n            <p class="hidden">\n                <a class="styled-link" ng-click="filter={}">{{\'filters.common.clear.filter\' | message}}</a>\n            </p>\n        </div>\n        <div ng-show="limit < items.length && term === \'\'" class="no-content">\n            <a class="styled-link" ng-click="increaseLimit()">{{\'common.show.50\' | message}}</a>\n        </div>\n\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class=".plate .boxed fancybox-container">\n    <fieldset>\n        <h3>\n            {{message \'export.download.title\'}}\n        </h3>\n        <div id="progressBar"></div>\n        <p id="message" class="well">\n            {{message \'export.download.progress.message\'}}\n        </p>\n        <div id="error" class="alert alert-warning" style="display:none;margin:0"></div>\n    </fieldset>\n    <button class="btn ok btn-sm btn-pri">\n        {{message \'common.action.ok\'}}\n    </button>\n</div>\n'},function(module,exports){module.exports='<div class="lens-history">\n    <ul>\n        <li ng-repeat="item in history | limitTo:limit">\n            <em class="fa" ng-class="icon(item)"></em>\n            <span>{{item.time | date:\'medium\'}}</span>\n            <a ng-href="{{item.location}}">{{item.title}}</a>\n        </li>\n    </ul>\n    <a ng-click="limit += 10" ng-if="history.length > limit">{{\'common.10.more\' | message}}</a>\n    <a ng-click="clear()">{{\'user.history.clear\' | message}}</a>\n</div>\n'},function(module,exports){module.exports='<div class="lens-inline-notes">\n    <h5>\n        <div ng-transclude style="display: inline;"></div>\n        <span>\n            <a tooltip-title="{{\'notes.show.notes\' | message}}" class="badge-note" ng-if="vm.notes.length" ng-click="toggleVisible($event)" ng-href="#/{{vm.section.toLowerCase()}}">\n                {{vm.notes.length}}\n            </a>\n        </span>\n    </h5>\n    <div ng-show="vm.visible">\n        <div ng-if="vm.notes.length" class="panel panel-default panel-user-annotate">\n            <div class="panel-heading">\n                <a class="pull-right col-meta" ng-click="vm.visible = false">{{\'common.action.close\' | message}}</a>\n                <b>{{\'notes.your.notes\' | message}} {{\'notes.patent.scope.\' + vm.section | message}}:</b>\n            </div>\n            <div class="panel-user-annotate-body">\n                <div class="panel-user-annotate-item" ng-repeat="note in vm.notes">\n                    <em>{{note.text}}</em>\n                    <div class="note-doc-type col-meta">\n                        <div class="pull-right">\n                            <a ng-click="$root.editNote(note)">{{\'common.action.edit\' | message}}</a> -\n                            <a class="col-error" ng-click="delete(note.id)">{{\'common.action.delete\' | message}}</a>\n                        </div>\n                        <span>{{note.created | date:\'medium\'}}</span>\n                    </div>\n                </div>\n            </div>\n            <div class="panel-footer">\n                <a class="text-small col-meta" ng-click="$root.addNote({type: \'PATENT\', key: vm.key, section: vm.section})">\n                    <em class="fa fa-sticky-note"></em> {{\'notes.addNew\' | message}}\n                </a>\n            </div>\n        </div>\n    </div>\n    <div lens-modal size="\'sm\'" visible="vm.confirm" ng-if="vm.confirm">\n        <h3>{{::\'common.areYouSure\' | message}}</h3>\n        <div class="alert alert-danger" ng-bind-html="(\'notes.deleteThisNote.confirm\' | message) | unsafe"></div>\n        <div>\n            <a class="btn btn-sm btn-danger-txt" ng-click="vm.confirm = false;">{{\'common.action.cancel\' | message}}</a>\n            <a class="btn btn-sm btn-danger" ng-click="vm.confirmed = true; _delete() ">{{\'common.action.delete\' | message}}</a>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="lens-university-content">\n    <div>\n        <span class="listing-logo-img" ng-if="item.user.metadata.logoUrl"><img alt="{{::item.user.metadata.name}}" ng-src="{{::item.user.metadata.logoUrl}}"></span>\n        <span class="listing-logo-img" ng-if="!item.user.metadata.logoUrl"><img alt="{{::item.user.metadata.name}}" ng-src="//logo.clearbit.com/{{::item.user.metadata.domain}}?size=120"></span>\n\n        <h3>{{::item.user.metadata.name}}</h3>\n\n        <ul class="list-inline header-meta institution-meta">\n            <li ng-if="item.user.metadata.rankings.lensIn4M" class="lens-univiersiy-ranking"><b>In4M</b> {{::item.user.metadata.rankings.lensIn4M}}</li>\n            <li ng-if="item.user.metadata.rankings.awru" class="lens-univiersiy-ranking"><b>ARWU</b> {{::item.user.metadata.rankings.awru}}</li>\n            <li ng-if="item.user.metadata.rankings.thomson" class="lens-univiersiy-ranking"><b>Thomson</b> {{::item.user.metadata.rankings.thomson}}</li>\n            <li ng-if="item.user.metadata.rankings.nature" class="lens-univiersiy-ranking"><b>Nature</b> {{::item.user.metadata.rankings.nature}}</li>\n            <li ng-if="item.user.metadata.rankings.leiden" class="lens-univiersiy-ranking"><b>Leiden</b> {{::item.user.metadata.rankings.leiden}}</li>\n            <br/>\n            <li><b>Grid:</b> <a ng-href="https://grid.ac/institutes/{{::item.user.metadata.GRID}}">{{::item.user.metadata.GRID}}</a></li>\n            <li><b>ISNI ID:</b> {{::item.user.metadata.ISNI}}</li>\n            <li><b>Ringgold ID:</b> {{::item.user.metadata.ringgoldId}}</li>\n        </ul>\n\n\n        <div ng-hide="vm.claimOwnership || headingOnly  || vm.getBadge">\n\n            <div class="r-div-table r-div-table-col-4">\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Leader:</b> </div>\n                    <div class="r-div-table-cell div-table-cell-2-3">{{::item.user.metadata.leaderName}}</div>\n                </div>\n\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Address:</b></div>\n                    <div class="r-div-table-cell div-table-cell-2-3">{{item.user.metadata.address}}</div>\n                </div>\n            </div>\n\n\n            <h4 ng-if="item.user.metadata.tto.name">\n                <a ng-href="{{::item.user.metadata.tto.url}}" class="lens-university-tto-name">\n                    {{::item.user.metadata.tto.name}}\n                </a>\n            </h4>\n\n\n            <div class="r-div-table r-div-table-col-4">\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Contact:</b> </div>\n                    <div class="r-div-table-cell div-table-cell-2-3">{{::item.user.metadata.tto.head}} <a ng-href="{{::item.user.metadata.tto.headLinkedIn}}" ng-if="item.user.metadata.tto.headLinkedIn">\n                        &nbsp; <i class="fa fa-linkedin-square"></i>\n                    </a></div>\n                </div>\n\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Email:</b></div>\n                    <div class="r-div-table-cell div-table-cell-2-3">\n                        <a ng-href="mailto:{{::item.user.metadata.tto.email}}">\n                            {{::item.user.metadata.tto.email}}\n                        </a>\n                    </div>\n                </div>\n\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Phone:</b></div>\n                    <div class="r-div-table-cell div-table-cell-2-3">\n                        <a ng-href="tel:{{::item.user.metadata.tto.phone}}">\n                            {{::item.user.metadata.tto.phone}}\n                        </a>\n                    </div>\n                </div>\n\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Website:</b></div>\n                    <div class="r-div-table-cell div-table-cell-2-3">\n                        <a ng-href="{{::item.user.metadata.tto.url}}" class="lens-university-tto-name">\n                        {{::item.user.metadata.tto.name}}\n                        </a>\n                    </div>\n                </div>\n\n                <div class="r-div-table-row">\n                    <div class="r-div-table-cell div-table-cell-1-3"><b>Address:</b></div>\n                    <div class="r-div-table-cell div-table-cell-2-3">\n                        {{item.user.metadata.address}}\n                    </div>\n                </div>\n            </div>\n\n            <p ng-if="!item.user.metadata.tto.name">No Tech Transfer Office details available</p>\n\n            <a ng-if="item.citingPatentCollectionId" target="_blank" ng-href="/lens/collection/{{item.citingPatentCollectionId}}" tooltip-title="Patents Citing Scholarship" class="btn btn-xs btn-pri">\n                Patents Citing Scholarship\n            </a>\n            <a ng-if="item.patentPortfolioCollectionId" target="_blank" ng-href="/lens/collection/{{item.patentPortfolioCollectionId}}" tooltip-title="Draft Institution Patent Portfolio" class="btn btn-xs btn-pri">\n                Draft Institution Patent Portfolio\n            </a>\n            <a ng-if="item.datasetAlias" href="/lens/in4m/dossier/{{item.datasetAlias}}/{{item.slug}}/analysis" tooltip-title="View Institution Dossier" class="btn btn-xs btn-pri institution-dossier-link">Institution Dossier</a>\n            <a ng-if="!item.datasetAlias" ui-sref="dossier.researchDiscipline(item)" tooltip-title="View Institution Dossier" class="btn btn-xs btn-pri institution-dossier-link">Institution Dossier</a>\n            <a ng-click="vm.claimOwnership = true" tooltip-title="Claim ownership of these details" class="btn btn-xs btn-pri">Claim Ownership</a>\n            <a ng-click="vm.getBadge = true; vm.claimOwnership = !true" tooltip-title="Display a badge on your website" class="btn btn-xs btn-pri">Display Badge</a>\n\n            <a ng-if="onClickRemove" class="col-error" ng-click="onClickRemove(item.slug)"><p><em class="fa fa-minus-circle"></em> Remove from Comparison</p></a>\n\n        </div>\n    </div>\n\n    \x3c!-- Start Claim --\x3e\n    <div ng-if="vm.claimOwnership">\n        <form ng-submit="claimOwnership()">\n            <div ng-show="vm.emailFailed">\n                <div class="alert alert-danger">Email sending failed. Please try again.</div>\n            </div>\n\n            <div ng-show="vm.emailSent">\n                Email sent! Thank you.\n            </div>\n\n            <div ng-hide="vm.emailSent">\n                <hr/>\n                <p>Provide the following information and after confirming your identity, this data and account will be transferred to your institution.</p>\n\n                <label>Name</label>\n                <label class="input">\n                    <i class="icon_append fa fa-user"></i>\n                    <input type="text" ng-model="vm.name" placeholder="" required>\n                </label>\n\n                <label>Email</label>\n                <label class="input">\n                    <i class="icon_append fa fa-envelope"></i>\n                    <input type="email" ng-model="vm.email" placeholder="" required>\n                </label>\n                <button title="Submit Request" aria-label="Submit Request" style="margin-top: 10px;" class="btn btn-sm btn-pri">Submit Request</button>\n                <br>\n                <small>By requesting this transfer of ownership, I acknowledge that I am authorized to do so.</small>\n            </div>\n        </form>\n        <hr/>\n        <p>\n            <a ng-click="vm.claimOwnership = false" class="styled-link">\n                Return to Institution Details\n            </a>\n        </p>\n    </div>\n\n    \x3c!-- Start Get Badge --\x3e\n    <div ng-show="vm.getBadge">\n        <hr>\n        <h3 class="heading-label">\n            Displaying the Lens Rank badge\n            <a tooltip-title="What is Lens Ranking v.2017.1" class="in4m-badge in4m-badge-example in4m-badge-inst">\n                <span></span>\n                <span>\n                    <img ng-if="vm.datasetIcons[vm.dataset]" ng-src="{{::assetLocation}}/img/flags/{{vm.datasetIcons[vm.dataset]}}.png"/>\n                    Research Discipline\n                </span>\n                <span>{{item.user.metadata.rankings.lensIn4M}}</span>\n            </a>\n            <a tooltip-title="What is Lens Ranking v.2017.1" class="in4m-badge in4m-badge-example in4m-badge-fou" style="margin-right: .5em;">\n                <span></span>\n                <span>\n                    <img ng-if="vm.datasetIcons[vm.dataset]" ng-src="{{::assetLocation}}/img/flags/{{vm.datasetIcons[vm.dataset]}}.png"/>\n                    Field Of Use\n                </span>\n                <span>{{item.user.metadata.rankings.lensIn4MFOU}}</span>\n            </a>\n        </h3>\n        <p>Copy and paste the code snippet to display the Lens rank badge for {{::item.user.metadata.name}} on your website.</p>\n        <strong>Research Discipline</strong>\n        <pre>&lt;iframe src="https://lens.org/lens/in4m/embed/{{::item.slug}}" &gt;</pre>\n        <strong>Field Of Use</strong>\n        <pre>&lt;iframe src="https://lens.org/lens/in4m/embed/{{::item.slug}}#fields-of-use" &gt;</pre>\n\n        <p>\n            <a ng-click="vm.getBadge = false" class="styled-link">\n                Return to Institution Details\n            </a>\n        </p>\n    </div>\n\n</div>\n'},function(module,exports){module.exports='<div class="landing-update-notice" ng-class="{visible: vm.visible}" ng-cloak>\n    <div class="notice-wrapper">\n        <strong>{{vm.title}}</strong>\n        <span>{{vm.tagline}}</span>\n        <a href="http://about.lens.org/news/{{vm.slug}}/">{{\'common.readmore\' | message}}</a>\n        <em class="fa fa-close hide-item" ng-click="ignore()"></em>\n    </div>\n</div>\n'},function(module,exports){module.exports='<h3 class="header" ng-bind-html="\'notes.savedCount\' | message:[vm.notes.length, vm.type.toLowerCase()] | unsafe"></h3>\n<div class="table-responsive table-stretch">\n    <div class="div-table" id="listTable">\n        <div class="div-table-heading">\n            <div class="div-table-row">\n                <div class="div-table-cell">{{\'common.note\' | message}}</div>\n                <div class="div-table-cell">{{\'common.assignment\' | message}}</div>\n                <div class="div-table-cell" style="width: 8rem;">{{\'common.dateCreated\' | message}}</div>\n                <div class="div-table-cell" style="width: 8rem;">{{\'common.tools\' | message}}</div>\n            </div>\n        </div>\n\n        <div class="div-table-body">\n            <div class="div-table-row"\n                ng-repeat="note in vm.notes"\n                lens-note-table-row\n                note="note"\n                reload="refresh()"\n            >\n            </div>\n        </div>\n    </div>\n</div>\n\n<div ng-if="vm.notes.length == 0 && !vm.loading">\n    <div ng-if="isOwner" ng-include="\'about-notes\'"></div>\n    <span ng-if="!isOwner">\n        {{\'user.collections.notes.none\' | message}}\n    </span>\n</div>\n\n<button class="btn btn-pri btn-sm" ng-if="isOwner" ng-click="$root.addNote({ type: vm.type, key: vm.key || collectionId })">{{\'notes.New\' | message}}</button>\n'},function(module,exports){module.exports='<div class="exp-window draggable" lens-explorer-window>\n    <header class="clearfix draggable-handle">\n        <h5 class="explorer-title pull-left">Lens Explorer: <strong>Languages</strong></h5>\n        <a class="pull-right" ui-sref="empty" style="cursor: pointer">\n            <em class="fa fa-times col-error"></em>\n        </a>\n    </header>\n\n    <div class="exp-window-body exp-class-viewer">\n        <a ng-click="locale.active = !locale.active" class="btn btn-sm pull-right">{{!locale.active ? \'Change Language\' : \'Suggest Edits\'}}</a>\n        <h3>{{!locale.active ? \'Suggest Edit\' : \'Beta Languages\'}}</h3>\n        <hr>\n        <div class="exp-class-viewer-results" style="height: calc(100% - 140px)">\n            <div ng-if="locale.active">\n                <span ng-bind-html="\'locale.selector.intro\' | message | unsafe"></span>\n                <form>\n                    <label class="checbox">\n                        <input type="checkbox" ng-model="languageBeta" ng-change="updateLanguageBetaPreference()" value="true">\n                        <i></i>\n                        {{\'locale.selector.optin\' | message}}\n                    </label>\n                </form>\n                <br>\n                <div ng-repeat="(key, locale) in locales" ng-if="!locale.active" style="font-size: 1.1em; padding: 0.2em;">\n                    <a ng-href="?locale={{key}}">\n                        <span class="flag {{locale.class}}"><img ng-src="{{assetLocation}}/img/flags/{{locale.img}}" alt="{{locale.name}}" style="" /></span>\n                        {{locale.name}}\n                    </a>\n                </div>\n            </div>\n            <form ng-submit="" ng-if="!locale.active">\n                <p>{{\'translation.feedback\' | message}}</p>\n                <div class="alert alert-success" ng-if="saved">\n                    <p>{{\'translation.feedback.success\' | message}}</p>\n                </div>\n                <br>\n                <a class="styled-link pull-right" ng-mousedown="getSelection()" tooltip-title="Get Highlighted Text">\n                    <em class="fa fa-files-o"></em>\n                </a>\n                <label>Current Text:</label>\n                <label class="textarea">\n                    <textarea ng-model="currentText" placeholder="{{\'translation.textarea.placeholder\' | message}}"></textarea>\n                </label>\n                <br>\n                <label>Suggested Text:</label>\n                <label class="textarea">\n                    <textarea ng-model="suggestedText" placeholder="Type your suggested replacement text here."></textarea>\n                </label>\n                <br>\n                <button title="Submit" aria-label="Submit" class="btn btn-pri" ng-click="save()">Submit</button>\n                <br>\n                <br>\n            </form>\n        </div>\n    </div>\n\n</div>\n'},function(module,exports){module.exports='<div ng-class="{[\'css-modal-wrapper-\' + (size || \'default\')]: true}"\n    ng-show="visible"\n    ng-click="close ? close() : visible = false"\n>\n    <div class="css-modal-overlay">\n        <div class="css-modal-wrapper" ng-click="$event.stopPropagation()">\n            <div class="css-modal-close">\n                <em class="fa fa-times link" ng-click="close ? close() : visible = false"></em>\n            </div>\n            <div class="css-modal-wrapper-inner" ng-transclude></div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n    <div ng-if="loading">\n        <div ng-include="\'preview-sidebar-loading\'"></div>\n    </div>\n\n    <div ng-if="ready">\n        <div ng-controller="AnalysisController as $analysisCtrl">\n            <div class="clearfix sub-header">\n                <b class="pull-left">\n                    {{previewTitle}}\n                    <div class="analysis-selector" ng-include="\'analysis-selector-minimal\'"></div>\n                </b>\n                <a class="pull-right" ng-href="{{fullAnalysisUrl}}" ng-if="fullAnalysisUrl">\n                    <small>\n                        {{::\'analysis.preview.view.full\' | message}}\n                    </small>\n                </a>\n            </div>\n\n            <div class="preload-facets" ng-class="{\'reveal\': $analysisCtrl.state.analysisReady}">\n                <div ng-repeat="(k, data) in $analysisCtrl.state.chartData">\n                    <div lens-analysis-item\n                        ng-if="$analysisCtrl.selectedFacetFilter(k) && $analysisCtrl.state.ready"\n                        k="k"\n                        field="$analysisCtrl.state.fields[k]"\n                        label-field-key="$analysisCtrl.state.isJoined ? \'citingLabel\' : \'label\'"\n                        loading="$analysisCtrl.state.loadingFacet[k]"\n                        is-preview="true"\n                        data="data"\n                        on-click-country="$analysisCtrl.onClickCountry"\n                        on-click-item="$analysisCtrl.fieldIsClassification(k) ? $analysisCtrl.onClickClassification : $analysisCtrl.onClickItem"\n                        on-click-logo-grid-item="$analysisCtrl.applyFilter"\n                        on-click-get-more="$analysisCtrl.getTopFacets"\n                        on-click-line-chart-point="$analysisCtrl.onClickLineChartPoint"\n                        on-click-toggle-facet="$analysisCtrl.removeAnalysisItem"\n                        on-filter-year-range="$analysisCtrl.onFilterYearRange"\n                    ></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="btn-group btn-group-xs analysis-view-btn-group">\n    <a ng-if="minimal" class="btn btn-qua btn-xxs dropdown-toggle" data-toggle="dropdown" tooltip-title="Display Options"> \n        <em class="fa fa-caret-down col-ter"></em>\n    </a>\n    <button ng-if="!minimal" class="btn dropdown-toggle" data-toggle="dropdown">\n        {{\'analysis.customise.label\' | message}}\n        <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu">\n        <li><strong style="padding-left:1em;">{{::\'analysis.display.options\' | message}}</strong></li>\n        <li role="separator" class="divider"></li>\n        <li ng-click="selectAll()">\n            <a class="no-check">{{\'common.action.selectAll\' | message}}</a>\n        </li>\n        <li ng-repeat="k in vm.analysisChartKeys"\n            ng-class="{\'col-ter\': vm.analysisItems[k]}"\n            ng-click="toggleItem(k)"\n        >\n            \x3c!-- \'analysis-selector-item-disabled\': !vm.hasChartData[k] --\x3e\n            <a>\n                {{vm.fields[k].label}}\n            </a>\n        </li>\n        <li role="separator" class="divider"></li>\n        <li ng-click="reset()">\n            <a class="no-check">Reset to Defaults</a>\n        </li>\n    </ul>\n</div>\n'},function(module,exports){module.exports='<div>\n    <div class="search-tooltip tab-container">\n        <div class="clearfix search-tooltip-head">\n            <strong>Search Tips</strong>\n            <a ng-href="/lens/new-search?q={{vm.q}}&type={{vm.type}}" class="styled-link" ng-if="!warnings">\n                Edit Structured Search\n            </a>\n        </div>\n        \n        <div class="search-tooltip-body tab-contents">    \n            <div class="tab_content clearfix" style="padding-top: 5px;">\n                <div class="alert alert-danger" ng-if="queryParserError">\n                    <em class="fa fa-warning"></em>\n                    {{queryParserError}}\n                </div>\n                \n                <div class="alert alert-warning" ng-if="warnings">\n                    <em class="fa fa-warning" tooltip-title="{{warnings}}"></em>\n                    Your query contains reserved boolean characters.\n                    <a ng-href="/lens/new-search?q={{vm.q}}&type={{vm.type}}&view=boolean" class="pull-right">\n                        <strong>Edit in Query Text Editor</strong>\n                    </a>\n                </div>\n\n                <div ng-include="\'search-tips-content\'"></div>\n\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div id="side-tabs">\n    <ul class="side-tabs-list">\n        <li class="st-collapse" ng-class="{active: $root.sideTabsView === \'st-collapse\'}">\n            <a ng-click="$root.setSideTabsView(\'st-collapse\')" tooltip-title="Collapse" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-chevron-circle-left"></em>\n            </a>\n        </li>\n        <li hidden ng-class="{active: $root.sideTabsView === \'st-boolean\'}">\n            <a ng-click="$root.setSideTabsView(\'st-boolean\')" tooltip-title="boolean" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-code"></em>\n            </a>\n        </li>\n        \x3c!--<li ng-class="{active: $root.sideTabsView === \'st-search\'}">\n            <a ng-click="$root.setSideTabsView(\'st-search\')" tooltip-title="Search" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-search"></em>\n            </a>\n        </li>--\x3e\n        <li ng-class="{active: $root.sideTabsView === \'st-filters\', \'has-filters\': $root.totalFilterCount}" ng-if="type !== \'NEW_SEARCH\'">\n            <a ng-click="$root.setSideTabsView(\'st-filters\')" tooltip-title="Filter Search" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-filter"></em>\n                <span class="has-filters-badge" ng-if="$root.totalFilterCount && $root.sideTabsView === \'st-collapse\'">{{$root.totalFilterCount}}</span>\n            </a>\n        </li>\n        <li ng-class="{active: $root.sideTabsView === \'st-history\'}" ng-if="type !== \'SCHOLAR\'">\n            <a ng-click="$root.setSideTabsView(\'st-history\')"  tooltip-title="History" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-history"></em>\n            </a>\n        </li>\n        <li ng-class="{active: $root.sideTabsView === \'st-collections\'}">\n            <a ng-click="$root.setSideTabsView(\'st-collections\')" tooltip-title="Collections" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-folder-open"></em>\n            </a>\n        </li>\n        <li ng-class="{active: $root.sideTabsView === \'st-notes\'}" ng-if="type !== \'SCHOLAR\'">\n            <a ng-click="$root.setSideTabsView(\'st-notes\')" tooltip-title="Notes" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-sticky-note"></em>\n            </a>\n        </li>\n        <li ng-class="{active: $root.sideTabsView === \'st-tags\'}" ng-if="type !== \'SCHOLAR\'">\n            <a ng-click="$root.setSideTabsView(\'st-tags\')"  tooltip-title="Tags" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-tags"></em>\n            </a>\n        </li>\n        <li ng-class="{active: $root.sideTabsView === \'st-saved-queries\'}">\n            <a ng-click="$root.setSideTabsView(\'st-saved-queries\')" tooltip-title="Saved Queries" tooltip-options="{delay: 1200, side: \'right\'}" >\n                <em class="fa fa-save"></em>\n            </a>\n        </li>\n    </ul>\n</div>\n'},function(module,exports){module.exports="<div hidden>\n    <a class='btn btn-sm'\n        target='_blank' href='https://about.lens.org/news/category/release-notes/'>\n        {{'release.notes' | message}}\n    </a>\n</div>\n"},function(module,exports){module.exports='<form class="user-settings" ng-submit="update()" ng-hide="vm.loading">\n\n    <div class="alert alert-success" ng-if="updated">{{\'common.updated.successfully\' | message}}</div>\n\n    <div class="row">\n        <div class="col-md-6">\n            <div class="panel panel-default">\n                <div class="panel-heading">\n                    <strong>{{\'user.settings.account.settings\' | message}}</strong>\n                </div>\n                <div class="panel-body">\n\n                    <label class="checkbox">\n                        <input type="checkbox" ng-model="vm.settings.recordHistory">\n                        <i></i>\n                        {{\'user.settings.recordHistory\' | message}}\n                    </label>\n                    <p>{{\'user.settings.recordHistory.message\' | message}}</p>\n                    <hr/>\n\n\n                    <label class="checkbox">\n                        <input type="checkbox" ng-model="vm.settings.ui.beta">\n                        <i></i>\n                        {{\'beta.optIn.action\' | message}}\n                    </label>\n                    <p>{{\'beta.optIn\' | message}}</p>\n\n                    <hr/>\n                    <label>{{\'common.privacy\' | message}}</label>\n                    <iframe class="piwik-iframe" style=" margin-left: -5px; margin-bottom: -15px; border: 0; width: 100%;" src="https://lumberjack.lens.org/piwik/index.php?module=CoreAdminHome&action=optOut&language=en"></iframe>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-6">\n            <div class="panel panel-default">\n                <div class="panel-heading">\n                    <strong>{{\'user.settings.interface.settings\' | message}}</strong>\n                </div>\n                <div class="panel-body">\n                    <div class="white-label-hide">\n                    <label>{{\'user.settings.interface.settings.theme\' | message}}</label>\n                    <label class="select">\n                        <select ng-model="vm.settings.theme">\n                            <option value="lens">{{\'user.settings.interface.settings.theme1\' | message}}</option>\n                            <option value="high-contrast">{{\'user.settings.interface.settings.theme2\' | message}}</option>\n                        </select>\n                        <i></i>\n                    </label>\n                \n                    </div>\n        \n                </div>\n            </div>\n        </div>\n    </div>\n\n    <button title="{{\'common.action.save\' | message}}" aria-label="{{\'common.action.save\' | message}}" class="btn btn-pri">{{\'common.action.save\' | message}}</button>\n\n</form>\n'},function(module,exports){module.exports='<div ng-cloak>\n    <div ng-if="newVersionUrl && !loading" class="alert alert-info">\n        <p><strong>WARNING:</strong> It looks like there might be a newer version of this page</p>\n        <p><a ng-href="{{newVersionUrl}}" class="link styled-link">Click here to go to the latest version</a></p>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(_ref){var data=_ref.data,width=_ref.width,scale=_ref.scale,x=_ref.x,y=_ref.y,color=_ref.color,mark=_ref.mark,colourScheme=_ref.colourScheme,size=_ref.size,displayLabels=_ref.displayLabels;var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",selection:{grid:{type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}},vconcat:[{width:width-90,height:y.type==="nominal"?null:width/3,transform:[{filter:{selection:"brush"}}],encoding:{x:{field:x.field,type:x.type,axis:window.vegaLegend({title:x.title,labelFontSize:10}),scale:{type:x.type==="temporal"?"time":scale||"linear"}},y:{field:y.field,type:y.type,axis:window.vegaLegend({title:y.title,labelFontSize:10}),scale:{type:y.type==="temporal"?"time":scale||"linear"}}},layer:[{selection:{selected:{type:"single"},grid:{type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}},mark:{type:mark||"circle",size:200,cursor:"pointer"},encoding:{size:size.field?{field:size.field,type:size.type,axis:{title:size.title},legend:window.vegaLegend({orient:"bottom",direction:"horizontal",padding:20,offset:0,tickCount:3}),scale:{range:[50,1e3]}}:null,color:{field:color.field,type:color.type||"nominal",axis:{title:color.title},scale:{range:{scheme:colourScheme||"category20c"}}},tooltip:[{field:"title",type:"nominal",axis:{title:"Title of Patent"}},{field:x.field,type:x.type,axis:{title:x.title}},{field:y.field,type:y.type,axis:{title:y.title}},{field:size.field,type:size.type,axis:{title:size.title}},{field:color.field,axis:{title:color.title},type:color.type||"nominal"}]}}]},{width:width-90,height:100,mark:"bar",selection:{brush:{encodings:["x"],type:"interval"}},encoding:{x:{field:"filingDate",type:"temporal",timeUnit:"year",axis:window.vegaLegend({title:"Filing Date",labelFontSize:10})},y:{aggregate:"count",type:"quantitative",axis:window.vegaLegend({title:"Number of Patents",labelFontSize:10})},color:{field:color.field,axis:{title:color.title},type:color.type||"nominal",legend:window.vegaLegend({orient:"bottom",direction:"horizontal",labelFontSize:10,labelLimit:60})}}}],data:{values:data}};if(spec.vconcat[0].encoding.x.type==="temporal"){}if(displayLabels){spec.vconcat[0].layer.push({mark:{type:"text",dy:20,limit:200},encoding:{text:{field:"title",type:"nominal"}}})}return spec}},function(module,exports,__webpack_require__){"use strict";var AnalysisViews={pub_year:{facet:"pub_year",views:["line"],label:messages.prop("chart.title.pub_year"),citingLabel:messages.prop("chart.title.pub_year.citing"),filterName:"dates"},jurisdiction:{facet:"jurisdiction",views:["map","pie","cloud"],label:messages.prop("chart.title.jurisdiction"),citingLabel:messages.prop("chart.title.jurisdiction.citing"),filterName:"j",facetSize:15},owner:{facet:"owner",views:["logo-grid","bar","cloud"],label:messages.prop("chart.title.owner"),citingLabel:messages.prop("chart.title.owner.citing"),filterName:"owner",hasExtra:true,facetSize:10},applicant:{facet:"applicant",views:["logo-grid","bar","cloud"],label:messages.prop("chart.title.applicant"),citingLabel:messages.prop("chart.title.applicant.citing"),filterName:"applicant",hasExtra:true,facetSize:10},type:{facet:"type",label:messages.prop("chart.title.type"),citingLabel:messages.prop("chart.title.type.citing"),views:["pie","bar"],filterName:"types",facetSize:5},inventor:{facet:"inventor",views:["bar","cloud"],label:messages.prop("chart.title.inventor"),citingLabel:messages.prop("chart.title.inventor.citing"),filterName:"inventor",hasExtra:true,facetSize:10},npl_record_lens_id:{facet:"npl_record_lens_id",views:["bar","heat"],label:messages.prop("chart.title.npl_record_lens_id"),citingLabel:messages.prop("chart.title.npl_record_lens_id.citing"),filterName:"npl",facetSize:10},classification_cpc:{facet:"classification_cpc",views:["heat","bar"],label:messages.prop("chart.title.classification_cpc"),citingLabel:messages.prop("chart.title.classification_cpc.citing"),filterName:"classCpc",facetSize:10},classification_ipcr:{facet:"classification_ipcr",views:["heat","bar"],label:messages.prop("chart.title.classification_ipcr"),citingLabel:messages.prop("chart.title.classification_ipcr.citing"),filterName:"classIpcr",facetSize:10},classification_nat:{facet:"classification_nat",views:["heat","bar"],label:messages.prop("chart.title.classification_nat"),citingLabel:messages.prop("chart.title.classification_nat.citing"),filterName:"classNat",facetSize:10},sequence_organism_taxid:{facet:"sequence_organism_taxid",views:["bar","pie"],label:messages.prop("chart.title.sequence_organism_taxid"),citingLabel:messages.prop("chart.title.sequence_organism_taxid.citing"),filterName:"so",facetSize:10}};_.keys(AnalysisViews).forEach(function(k){if(AnalysisViews[k].views){AnalysisViews[k].currentView=AnalysisViews[k].views[0]}});module.exports=AnalysisViews},function(module,exports,__webpack_require__){"use strict";module.exports={bar:{label:"Bar Chart",icon:"bar-chart"},cloud:{label:"Word Cloud",icon:"cloud"},heat:{label:"Heat Map",icon:"fire"},line:{label:"Line Chart",icon:"line-chart"},"logo-grid":{label:"Logo Grid",icon:"table"},map:{label:"World Map",icon:"map"},pie:{label:"Pie Chart",icon:"pie-chart"}}},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(461),isObjectLike=__webpack_require__(20);function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}module.exports=baseIsEqual},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(462),arraySome=__webpack_require__(465),cacheHas=__webpack_require__(466);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}module.exports=equalArrays},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);function isStrictComparable(value){return value===value&&!isObject(value)}module.exports=isStrictComparable},function(module,exports){function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}module.exports=matchesStrictComparable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var moment=window.moment;var DATE_FORMAT="YYYYMMDD";exports.default=function(left,right,type){var start;var end;if(left){start=moment(left).format(DATE_FORMAT)}else{start="19170101"}if(right){end=moment(right).format(DATE_FORMAT)}else{end=moment().format(DATE_FORMAT)}return type+":"+start+"-"+end}},function(module,exports,__webpack_require__){"use strict";var getClassificationFilter=function getClassificationFilter(_ref){var type=_ref.type,symbol=_ref.symbol,newSearch=_ref.newSearch;var typeMap={CPC:"classCpc",IPC:"classIpcr",USPC:"classNat"};var paramKey=typeMap[type];if(newSearch){return{paramKey:paramKey,value:symbol}}var existing=$.deparam.querystring()[paramKey];var value=void 0;if(_.isArray(existing)){value=existing.concat(symbol)}else if(_.isString(existing)){value=existing.split(",").concat(symbol)}else{value=symbol}return{paramKey:paramKey,value:value}};var addClassificationSearch=function addClassificationSearch(type,prefix,newSearch){var predicate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"OR";var fieldMap={CPC:"classification_cpc",IPC:"classification_ipcr",USPC:"classification_nat"};var query=newSearch?"":$.deparam.querystring().q||"";if(query){query+=" "+predicate+" "}var pre=fieldMap[type]+":(";var post="*)";query+=pre+prefix.join(post+(" "+predicate+" ")+pre)+post;return query};module.exports={addClassificationSearch:addClassificationSearch,getFilterUrl:function getFilterUrl(opts){var _getClassificationFil=getClassificationFilter(opts),paramKey=_getClassificationFil.paramKey,value=_getClassificationFil.value;return"/lens/search?"+paramKey+"="+value},applyFilter:function applyFilter(opts){var params={};if(opts.prefix&&opts.prefix.length){params.q=addClassificationSearch(opts.type,opts.prefix,opts.newSearch)}if(opts.symbol){var _getClassificationFil2=getClassificationFilter(opts),paramKey=_getClassificationFil2.paramKey,value=_getClassificationFil2.value;params[paramKey]=value}if(!opts.newSearch){$.vent.trigger("filters/apply",params)}if(!window.LENS.searchFormInitialized||opts.newSearch){window.location="/lens/search?"+$.param(params,true)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){return{base:{autocomplete_organism:function autocomplete_organism(opts){var cache={};var lastXhr;if(!$(opts.autocompleteEl).length)return;$(opts.autocompleteEl).keyup(function(){if(opts.autocompleteEl.val()==""){opts.displayEl.val("")}});$(opts.autocompleteEl).autocomplete({source:function source(request,response){var rawTerm=request.term.split(/,\s*/).pop();if(rawTerm.length<2){response([]);return}var term=rawTerm+"*";if(term in cache){response(cache[term]);return}opts.showLoading();lastXhr=$.getJSON("/lens/service/taxonomy/search",{term:term},function(data,status,xhr){var organisms=[];$.each(data.taxa,function(key,val){organisms.push(val)});cache[term]=organisms;if(xhr===lastXhr){response(organisms)}opts.hideLoading()})},focus:function focus(){return false},select:function select(event,ui){var name=ui.item.names.SCIENTIFIC_NAME[0];var taxId=ui.item.taxId;var terms=this.value.split(/,\s*/);terms.pop();terms.push(name);terms.push("");this.value=terms.join(", ");var taxIds=[];if(opts.displayEl.val()!=""){taxIds=opts.displayEl.val().split(/,\s*/)}taxIds.push(taxId);opts.displayEl.val(taxIds.join(","));return false},html:true}).data("ui-autocomplete")._renderItem=function(ul,item){var name=item.names.SCIENTIFIC_NAME[0];return $("<li></li>").data("item.autocomplete",item).append("<a>"+name+"<br>"+"<small>("+item.division+")</small></a>").appendTo(ul)};$(opts.autocompleteEl).autocomplete("option","appendTo",opts.appendTo)}},results:{wireupHelp:function wireupHelp(){var $browserContainer=$(".alignmentWidget");$(".helpPanelAccordion .showHidePanel h3").click(function(){var $showHidePanel=$(this).parents(".showHidePanel");$(".helpPanelAccordion .openPanel").not($showHidePanel).removeClass("openPanel").addClass("closedPanel");if($showHidePanel.hasClass("openPanel")){$showHidePanel.removeClass("openPanel").addClass("closedPanel")}else{$showHidePanel.removeClass("closedPanel").addClass("openPanel")}return false});$(".helpPanelLink",$browserContainer).click(function(){$browserContainer.prepend('<div class="cover"></div>');$(".helpPanel",$browserContainer).show();return false});$(document).on("click.searchDetails",".hideHelpPanel, .cover",function(){$(".cover",$browserContainer).remove();$(".helpPanel",$browserContainer).hide();return false})}},search_utils:{compactBp:function compactBp(number,alphabet){var units;if(alphabet==="AA"){units=["aa"]}else if(alphabet==="DNA"){units=["bp","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]}else{units=["","k"]}for(var i=0;number>1e3&&i<units.length;i++){number/=1e3}var decimals=number>100?10:100;return Math.round(number*decimals)/decimals+units[i]}}}}()},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _humanizeNumber=__webpack_require__(111);var _humanizeNumber2=_interopRequireDefault(_humanizeNumber);var _parseAnalysisString=__webpack_require__(216);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DEFAULT_VIEWS="author.affiliation.name.keyword:logo-grid,dates:line,author.affiliation.grid.address.country_code:map,author.display_name.keyword:bar,source.title:bar,field_of_study:bar";var API_BASE_URL=localStorage.getItem("scholarlyApiUrlOverride")||"/lens/api";var sessionCache=[];try{var sessionCacheHit=sessionStorage.getItem("scholar-cache");sessionCache=sessionCacheHit?JSON.parse(sessionCacheHit):[]}catch(error){console.warn("Session Cache init failure")}var EventEmitter=__webpack_require__(136);var ArticleAliases=__webpack_require__(584);var ArticleFields=__webpack_require__(137);var hasDisplayOrder=function hasDisplayOrder(d){return d.displayOrder};var sortByDisplayOrder=function sortByDisplayOrder(a,b){return a.displayOrder-b.displayOrder};var analysisChartKeys=_.values(ArticleFields).filter(hasDisplayOrder).sort(sortByDisplayOrder).map(function(d){return d.key});var LocalStorageService=__webpack_require__(7);var storage=new LocalStorageService("scholar-analysis");var ScholarService=function(_EventEmitter){_inherits(ScholarService,_EventEmitter);function ScholarService(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ScholarService);var _this=_possibleConstructorReturn(this,(ScholarService.__proto__||Object.getPrototypeOf(ScholarService)).call(this));_this.API_BASE_URL=opts.url||window.UI_CONFIG.scholarlyApiBaseUrl||API_BASE_URL;_this.cache=sessionCache;_this.analysisItems=storage.get("analysisItems:"+window.location.pathname)||(0,_parseAnalysisString.parseAnalysisString)(DEFAULT_VIEWS);_this.analysisChartKeys=analysisChartKeys;_this.ArticleFields=ArticleFields;_this.EXCLUDE_SEARCH_FIELDS=["abstract","author.affiliation","author.first_name","author.initials","author.last_name","author.normalised_name","chemical","clinical_trial","field_of_study","fulltext","funding","mesh_term","recommended_work","reference","referenced_by_patent_hash","referenced_by_patent","referenced_by"];_this.MINIMAL_FIELDS=["ids","metadata.title","metadata.authors.display_name","metadata.authors.last_name","metadata.authors.first_name","metadata.authors.initials","metadata.journal.title_full","metadata.volume","metadata.issue","metadata.pages_start","metadata.pages_end","metadata.date_published","metadata.year_published","citation_ids","record_lens_id","record_lens_id_num","metadata.referenced_by_count","metadata.referenced_by_patent_count","metadata.reference_count"];_this.MOST_FIELDS=["ids","metadata.reference_count","metadata.journal","metadata.abstract","metadata.has_fulltext","metadata.recommended_works","metadata.date_published_print","metadata.num_authors","metadata.funding","metadata.chemicals","metadata.source_urls","metadata.fields_of_study","metadata.has_clinical_trial","metadata.has_abstract","metadata.pages_start","metadata.has_affiliation_grid","metadata.has_mesh_term","metadata.keywords","metadata.has_keyword","metadata.has_field_of_study","metadata.date_published","metadata.ids","metadata.source_details","metadata.references","metadata.conference","metadata.has_chemical","metadata.et_alia_authors","metadata.publication_type","metadata.has_affiliation","metadata.languages","metadata.authors","metadata.has_funding","metadata.clinical_trials","metadata.mesh_terms","metadata.referenced_by_count","metadata.referenced_by_patent_count","metadata.volume","metadata.date_published_sort","metadata.title","metadata.year_published","metadata.publication_supplementary_type","metadata.issue","metadata.pages_end","metadata.date_published_electronic","metadata.date_published_parts","referenced_by_patent_count","citation_ids","record_lens_id","record_lens_id_num","open_access"];return _this}_createClass(ScholarService,[{key:"_checkCache",value:function _checkCache(bucket,key){try{key=btoa(window.encodeURIComponent(key))}catch(err){console.warn("Could not encode cache key:",key);return null}var hits=this.cache.filter(function(d){return d.key===key&&d.bucket===bucket});if(hits[0]){return hits[0].value}}},{key:"_updateCache",value:function _updateCache(bucket,key,value){try{key=btoa(window.encodeURIComponent(key))}catch(err){console.warn("Could not encode cache key:",key);return null}if(this.cache){if(this.cache.length>20){this.cache.shift()}this.cache.push({bucket:bucket,key:key,value:value});try{sessionStorage.setItem("scholar-cache",JSON.stringify(this.cache))}catch(e){console.warn("session cache exceeding quota");this.cache.pop()}}}},{key:"suggest",value:function suggest(field,prefix){var _this2=this;var supportedFields=["author.display_name.suggest","author.affiliation.grid.name.keyword.suggest"];if(!_.includes(supportedFields,field)){console.warn("Unsupported suggestion field:",field);return}var query={_source:false,suggest:{suggest:{prefix:prefix,completion:{field:field,size:10,skip_duplicates:true,fuzzy:{fuzziness:2}}}}};var cacheKey=field+":"+prefix;var cached=this._checkCache("suggest",cacheKey);if(cached){var d=new $.Deferred;return d.resolve(cached)}var url=this.API_BASE_URL+"/multi/search?request_cache=true";return fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(query)}).then(function(res){return res.json()}).then(function(res){var results=(0,_get3.default)(res,"suggest.suggest[0].options")||[];results=results.map(function(d){return{text:d.text,score:d._score}});_this2._updateCache("suggest",cacheKey,results);return results})}},{key:"search",value:function search(query){var _this3=this;if(!query){return}query.view="scholar";var cacheKey=JSON.stringify(query);var cached=this._checkCache("search",cacheKey);if(cached){var d=new $.Deferred;return d.resolve(cached)}var url=this.API_BASE_URL+"/multi/search?request_cache=true";return fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(query)}).then(function(res){var reloadingPageKey="reloadingScholarlyPage";if(res.status===403){if(!window.sessionStorage.getItem(reloadingPageKey)){window.sessionStorage.setItem(reloadingPageKey,"true");window.location.reload(true)}throw res}window.sessionStorage.removeItem(reloadingPageKey);return res.json()}).then(function(res){if(res.query_result&&res.query_result.error!==undefined){throw new Error(res.query_result.error.reason||"Unknown Error")}var data=res.query_result;if(!data){throw new Error("No Data")}data.scholarlySearchId=(0,_get3.default)(res,"queries.SCHOLAR.searchId");delete _this3.searchRequest;data.hits.hits=data.hits.hits.map(function(d){return ArticleAliases(d._source,d.highlight)});data.totalPatentQueryResults=res.patent_query_result?res.patent_query_result.citing:null;data.joiner_limit=res.joiner_limit;data.queries=res.queries;data.savedQuery=res.savedQuery;_this3._updateCache("search",cacheKey,data);return data})}},{key:"quickSearchCounts",value:function quickSearchCounts(term){return this.search({scholarly_search:{size:0,query:{query_string:{query:term,default_operator:"and"}}}})}},{key:"buildAggCharts",value:function buildAggCharts(aggregations){var aggs=[];var metrics={};var chartData=[];_.keys(aggregations).forEach(function(agg){var d=aggregations[agg];if(d.doc_count_error_upper_bound){}var buckets=d.buckets;if(agg==="dates"){var NOW=new Date;var THIS_YEAR=NOW.getFullYear();buckets=buckets.filter(function(d){return parseInt(d.key_as_string)>1900&&parseInt(d.key_as_string)<=THIS_YEAR});var yearMap={};buckets.forEach(function(d){yearMap[d.key_as_string]=d.doc_count});var minYear=parseFloat(buckets[0].key_as_string);var maxYear=parseFloat(buckets[buckets.length-1].key_as_string);var range=_.range(minYear,maxYear);buckets=range.map(function(year){return{key_as_string:year+"",doc_count:yearMap[year]||0}})}if(!buckets){metrics[agg]=d.value||d.doc_count;return}if(agg==="author.display_name.keyword"){buckets=buckets.filter(function(d){return d.key!=="MISSING-VALUE MISSING-VALUE"})}aggs[agg]=buckets;var values=buckets.map(function(_ref){var key=_ref.key,key_as_string=_ref.key_as_string,doc_count=_ref.doc_count;return{agg:agg,label:key_as_string||key,value:doc_count,text:key+" ("+(0,_humanizeNumber2.default)(doc_count||0)+")"}});chartData[agg]=[{otherDocCount:d.sum_other_doc_count,values:values.length>10&&agg!=="dates"?values.slice(0,100):values}]});this.emit("UPDATE_CHART_DATA",chartData);return{aggs:aggs,metrics:metrics,chartData:chartData}}},{key:"get",value:function get(id){var field=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"lens_ids";return this.getAll([id],field).then(function(items){return items[0]})}},{key:"getAll",value:function getAll(ids){var _this4=this;var field=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"external_ids";var select=arguments[2];return this._getAll(ids,field,select).then(function(data){if(!data.msg.items){console.warn("Article lookup failed for",{field:field,ids:ids});return[]}var items=data.msg.items.map(function(item){if(!item.metadata){item.metadata={}}var additionalData=["npl_text_hashes","referenced_by_patent","referenced_by_patent_count","patent_cited","citation_ids","is_referenced_by_patent","record_lens_id","record_lens_id_num","lens_ids","open_access"];additionalData.forEach(function(k){item.metadata[k]=item[k]});item.metadata.fromStore=true;return ArticleAliases(item.metadata)});_this4.emit("fetched",items);return items})}},{key:"_getAll",value:function _getAll(ids){var _this5=this;var field=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"external_ids";var select=arguments[2];if(!ids.length){var d=new $.Deferred;return d.reject("No ids supplied")}var cacheKey=field+":"+ids.join(",");var cached=this._checkCache("store",cacheKey);if(cached){var _d=new $.Deferred;return _d.resolve(cached)}var body=_defineProperty({},field,ids);if(select){body.select=select}else{body.select=this.MOST_FIELDS}return fetch(this.API_BASE_URL+"/scholarly/store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)}).then(function(res){return res.json()}).then(function(d){_this5._updateCache("store",cacheKey,d);return d})}},{key:"setPreviousSearch",value:function setPreviousSearch(previousSearch){this.previousSearch=previousSearch}},{key:"getPreviousSearch",value:function getPreviousSearch(){return this.previousSearch}},{key:"export",value:function _export(query){query.view="scholar";var url=this.API_BASE_URL+"/multi/search/export";return fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(query)})}},{key:"toggleAnalysisItem",value:function toggleAnalysisItem(k){if(this.analysisItems[k]){delete this.analysisItems[k]}else{this.analysisItems[k]=ArticleFields[k].views[0]}this.persistAnalysisFacets()}},{key:"selectAllAnalysisItems",value:function selectAllAnalysisItems(){var _this6=this;_.keys(ArticleFields).forEach(function(k){if(ArticleFields[k].views){_this6.analysisItems[k]=ArticleFields[k].views[0]}});this.persistAnalysisFacets()}},{key:"persistAnalysisFacets",value:function persistAnalysisFacets(){storage.set("analysisItems:"+window.location.pathname,this.analysisItems);this.emit("UPDATE_ANALYSIS_ITEMS",this.analysisItems)}},{key:"resetAnalysisItems",value:function resetAnalysisItems(){this.analysisItems=(0,_parseAnalysisString.parseAnalysisString)(DEFAULT_VIEWS);this.persistAnalysisFacets()}},{key:"getTopFacets",value:function getTopFacets(k){this.emit("GET_TOP_FACETS",k)}}]);return ScholarService}(EventEmitter);_app2.default.service("ScholarService",ScholarService);module.exports=ScholarService},function(module,exports){module.exports={6799:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Australian-National-University"},6801:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Melbourne"},6802:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Queensland"},6803:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"CSIRO"},6810:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Western-Australia"},6838:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"La-Trobe-University"},6841:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Bond-University"},6856:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Central-Queensland-University"},6858:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Charles-Darwin-University"},6860:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Charles-Sturt-University"},6874:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Edith-Cowan-University"},6881:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Royal-Melbourne-Institute-of-Technology"},6883:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Southern-Cross-University"},6892:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Canberra"},6895:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-New-England"},6900:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-Notre-Dame-Australia"},6917:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Western-Sydney"},6918:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-Sunshine-Coast"},6919:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-South-Australia"},6921:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Southern-Queensland"},6924:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Murdoch-University"},6948:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"ANSTO-Australian-Nuclear-Science-and-Technology-Organization"},6951:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Baker-IDI-Heart-Diabetes-Institute"},7009:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Walter-and-Eliza-Hall-Institute-of-Medical-Research"},7036:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"St-Vincents-Institute-of-Medical-Research"},7063:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Murdoch-Childrens-Research-Institute"},7071:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Peter-MacCallum-Cancer-Centre"},7072:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"QIMR-Berghofer-Medical-Research-Institute"},7159:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"(AIMS)-Australian-Institute-of-Marine-Sciences"},7331:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Childrens-Medical-Research-Institute"},7333:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Florey-Institute-of-Neuroscience-and-Mental-Health"},8590:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Harvard-University"},8634:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Stanford-University"},8635:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Massachusetts-Institute-of-Technology"},8754:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Berkeley"},8755:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Cambridge"},8756:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Princeton-University"},8758:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"California-Institute-of-Technology"},8759:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Columbia-University"},8761:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Chicago"},8762:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Oxford"},8819:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Yale-University"},8821:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-San-Francisco"},8837:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Minnesota-Twin-Cities"},8838:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Illinois-Urbana-Champaign"},8876:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Northwestern-University"},8877:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"New-York-University"},8878:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Kyoto-University"},8880:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Toronto"},8892:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Wisconsin"},8893:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Imperial-College-London"},8901:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Michigan"},8902:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Tokyo"},8903:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Johns-Hopkins-University"},8904:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Washington"},8905:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Swiss-Federal-Institute-of-Technology-Zurich"},8906:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Pennsylvania"},8907:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-College-London"},8909:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Cornell-University"},8999:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-Victoria-Australia"},10707:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Duke-University"},10708:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Washington-University-St.-Louis"},10709:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Rockefeller-University"},10710:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Colorado-Boulder"},10715:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Copenhagen"},10716:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pierre-and-Marie-Curie-University"},10730:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Santa-Barbara"},10731:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-North-Carolina-at-Chapel-Hill"},10737:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-British-Columbia"},10738:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Manchester"},10753:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Paris-Sud"},10754:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Maryland"},10765:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Texas-Southwestern-Medical-Center"},10766:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Heidelberg-University"},10767:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Karolinska-Institute"},10768:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Edinburgh"},10771:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Southern-California"},10772:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Irvine"},10773:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Technical-University-of-Munich"},10774:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ludwig-Maximilian-University-of-Munich"},10775:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Vanderbilt-University"},10776:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Zurich"},10777:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"King's-College-London"},10778:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Utrecht-University"},10779:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Davis"},10780:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Geneva"},10781:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Oslo"},10782:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pennsylvania-State-University"},10783:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Carnegie-Mellon-University"},10784:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Purdue-University"},10785:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Uppsala-University"},10786:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"McGill-University"},10787:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Rutgers-University"},10790:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Bristol"},10791:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hebrew-University-of-Jerusalem"},10795:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ohio-State-University"},10796:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Helsinki"},10797:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Pittsburgh"},10798:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ghent-University"},10799:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ecole-Normale-Superieure-Paris"},10800:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Aarhus-University"},10801:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Boston-University"},10802:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Brown-University"},10803:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Groningen"},10804:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nagoya-University"},10805:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Stockholm-University"},10806:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Technion-Israel-Institute-of-Technology"},10809:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Leiden-University"},10810:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Florida"},10811:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Rice-University"},10812:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Osaka-University"},10824:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Basel"},10825:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Strasbourg"},10826:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Katholieke-Universiteit-Leuven"},10827:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Arizona"},10831:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Warwick"},10832:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Arizona-State-University"},10833:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Santa-Cruz"},10834:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Utah"},10835:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"McMaster-University"},10836:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Bonn"},10838:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Michigan-State-University"},10839:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Texas-A&M-University"},11614:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Aix-Marseille"},11615:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Baylor-College-of-Medicine"},11616:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Case-Western-Reserve-University"},11617:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Emory-University"},11619:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Georgia-Institute-of-Technology"},11620:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Icahn-School-of-Medicine-Mount-Sinai"},11622:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"London-School-of-Economics-and-Political-Science"},11625:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Monash-University"},11626:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"National-University-of-Singapore"},11636:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Peking-University"},11639:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Seoul-National-University"},11640:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Shanghai-Jiao-Tong-University"},11641:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Swiss-Federal-Institute-of-Technology-Lausanne"},11642:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Technical-University-of-Denmark"},11643:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Glasgow"},11644:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-New-South-Wales"},11647:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tsinghua-University"},11648:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tohoku-University"},11649:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tufts-University"},11651:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Amsterdam"},11653:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Riverside"},11655:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Freiburg"},11659:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Massachusetts-Amherst"},11660:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Massachusetts-Medical-School"},11666:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Rochester"},11668:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-São-Paulo"},11670:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Sydney"},11671:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Virginia"},11672:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Wageningen-University-and-Research-Centre"},11680:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Paris-Diderot-University"},11681:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Weizmann-Institute-of-Science"},11682:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Zhejiang-University"},11685:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Erasmus-University-Rotterdam"},11686:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Fudan-University"},11688:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hokkaido-University"},11694:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nanyang-Technological-University"},11696:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"North-Carolina-State-University"},11697:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Oregon-Health-and-Science-University"},11700:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Queen-Mary-University-of-London"},11702:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Sun-Yat-sen-University"},11703:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tel-Aviv-University"},11705:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Adelaide"},11707:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Hong-Kong"},11708:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tokyo-Institute-of-Technology"},11715:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Exeter"},11739:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Paris-Descartes"},11742:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Science-and-Technology-of-China"},11748:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Würzburg"},11756:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Claude-Bernard-University-Lyon-1"},11759:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Curtin-University"},11761:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Dartmouth-College"},11762:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Delft-University-of-Technology"},11763:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Durham-University"},11775:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Karlsruhe-Institute-of-Technology"},11776:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Korea-Advanced-Institute-of-Science-and-Technology"},11777:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Korea-University"},11780:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Kyushu-University"},11784:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Macquarie-University"},11786:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nanjing-University"},11796:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pompeu-Fabra-University"},11801:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Sungkyunkwan-University"},11804:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hong-Kong-University-of-Science-and-Technology"},11807:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Dundee"},11809:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Texas-Health-Science-Center"},11839:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Erlangen-Nuremberg"},11855:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Montpellier"},11857:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Notre-Dame"},11877:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Wollongong"},11878:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-York"},11882:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Yeshiva-University"},11883:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Yonsei-University"},11909:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Deakin-University"},11911:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ecole-Polytechnique"},11915:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Flinders-University"},11917:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Griffith-University"},11919:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hanyang-University"},11920:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Indian-Institutes-of-Technology"},11922:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"James-Cook-University"},11923:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Keio-University"},11924:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"King-Abdullah-University-of-Science-and-Technology"},11949:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"London-School-of-Hygiene-and-Tropical-Medicine"},11950:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nankai-University"},11955:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pohang-University-of-Science-and-Technology"},11966:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Swinburne-University-of-Technology"},11970:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Newcastle,-Australia"},12004:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-New-Hampshire"},12005:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Oregon"},12009:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-St-Andrews"},12010:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Tasmania"},12011:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Technology,-Sydney"},12026:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Boston-College"},12029:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Council-of-Scientific-and-Industrial-Research-India"},12030:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Free-University-of-Berlin"},12031:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"French-National-Centre-for-Scientific-Research"},12032:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Gwangju-Institute-of-Science-and-Technology"},12033:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Helmholtz-Association-of-German-Research-Centres"},12035:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Indiana-University-System"},12039:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Max-Planck-Society"},12040:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Moscow-State-University"},12042:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"National-Research-Council-Italy"},12044:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Soochow-University"},12045:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Spanish-National-Research-Council"},12049:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"State-University-of-New-York-System"},12050:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Alabama-System"},12051:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-System"},12052:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-London"},12053:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Massachusetts-System"},12054:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Texas-System"},12055:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-System-of-Maryland"},12056:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Wake-Forest-University"},12057:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Xiamen-University"},12122:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Queensland-University-of-Technology"},14024:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Chinese-Academy-of-Sciences"},14026:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"National-Institutes-of-Health"},14029:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Lawrence-Berkeley-National-Laboratory"},14030:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"RIKEN"},14033:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Atomic-Energy-and-Alternative-Energies-Commission"},14210:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Russian-Academy-of-Sciences"},14215:{type:"Patent Portfolio",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"The-Scripps-Research-Institute"},14444:{type:"Patent Portfolio",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Garvan-Institute-of-Medical-Research"},22716:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Erasmus-University-Rotterdam"},22717:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-North-Carolina-at-Chapel-Hill"},22718:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Vanderbilt-University"},22719:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Amsterdam"},22720:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Spanish-National-Research-Council"},22721:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"French-National-Centre-for-Scientific-Research"},22722:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Imperial-College-London"},22723:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Bonn"},22724:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Würzburg"},22725:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tokyo-Institute-of-Technology"},22726:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ecole-Polytechnique"},22727:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Keio-University"},22728:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Davis"},22729:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Los-Angeles"},22730:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Colorado-Boulder"},22731:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Soochow-University"},22732:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Berkeley"},22733:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Dundee"},22734:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Weizmann-Institute-of-Science"},22735:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tohoku-University"},22736:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Helmholtz-Association-of-German-Research-Centres"},22737:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Sungkyunkwan-University"},22738:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nagoya-University"},22739:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Katholieke-Universiteit-Leuven"},22740:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-São-Paulo"},22741:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Texas-A&M-University"},22742:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Seoul-National-University"},22743:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Paris-Diderot-University"},22744:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-New-Hampshire"},22745:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Washington-University-St.-Louis"},22746:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Wake-Forest-University"},22747:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Yeshiva-University"},22748:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ludwig-Maximilian-University-of-Munich"},22749:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Zhejiang-University"},22750:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Rutgers-University"},22751:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Texas-Health-Science-Center"},22752:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Aarhus-University"},22753:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Technical-University-of-Denmark"},22754:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Copenhagen"},22755:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"The-Scripps-Research-Institute"},22756:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"State-University-of-New-York-System"},22757:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Cornell-University"},22758:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hanyang-University"},22759:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Russian-Academy-of-Sciences"},22760:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ghent-University"},22761:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Carnegie-Mellon-University"},22762:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Georgia-Institute-of-Technology"},22763:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"New-York-University"},22764:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Paris-Descartes"},22765:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Moscow-State-University"},22766:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"McGill-University"},22767:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Hong-Kong"},22768:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Boston-University"},22769:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nanjing-University"},22770:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Karolinska-Institute"},22771:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Southern-California"},22772:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Texas-Southwestern-Medical-Center"},22773:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Washington"},22774:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Queensland"},22775:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Kyoto-University"},22776:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Delft-University-of-Technology"},22777:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Zurich"},22778:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Leiden-University"},22779:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-British-Columbia"},22780:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hong-Kong-University-of-Science-and-Technology"},22781:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Atomic-Energy-and-Alternative-Energies-Commission"},22782:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Swiss-Federal-Institute-of-Technology-Zurich"},22783:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pierre-and-Marie-Curie-University"},22784:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Irvine"},22785:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"RIKEN"},22786:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Duke-University"},22787:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Glasgow"},22788:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Fudan-University"},22789:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"National-University-of-Singapore"},22790:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Massachusetts-Institute-of-Technology"},22791:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Western-Australia"},22792:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hebrew-University-of-Jerusalem"},22793:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Wisconsin"},22794:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Lawrence-Berkeley-National-Laboratory"},22795:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Wageningen-University-and-Research-Centre"},22796:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Oregon"},22797:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Boston-College"},22798:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Edinburgh"},22799:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Alabama-System"},22800:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Baylor-College-of-Medicine"},22801:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Montpellier"},22802:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-System"},22803:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Massachusetts-Amherst"},22804:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Michigan"},22805:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-San-Francisco"},22806:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Durham-University"},22807:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Kyushu-University"},22808:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Shanghai-Jiao-Tong-University"},22809:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Oslo"},22810:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"North-Carolina-State-University"},22811:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Pennsylvania"},22812:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Erlangen-Nuremberg"},22813:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Stockholm-University"},22814:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Case-Western-Reserve-University"},22815:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ecole-Normale-Superieure-Paris"},22816:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Heidelberg-University"},22817:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Arizona"},22818:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Melbourne"},22819:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Korea-University"},22820:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Groningen"},22821:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Illinois-Urbana-Champaign"},22822:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Massachusetts-Medical-School"},22823:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-St-Andrews"},22824:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Rockefeller-University"},22825:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Queen-Mary-University-of-London"},22826:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Freiburg"},22827:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Chinese-Academy-of-Sciences"},22828:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Swiss-Federal-Institute-of-Technology-Lausanne"},22829:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Korea-Advanced-Institute-of-Science-and-Technology"},22830:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Pittsburgh"},22831:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Minnesota-Twin-Cities"},22832:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Indian-Institutes-of-Technology"},22833:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pompeu-Fabra-University"},22834:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Emory-University"},22835:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Brown-University"},22836:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Xiamen-University"},22837:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pohang-University-of-Science-and-Technology"},22838:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Arizona-State-University"},22839:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Technion-Israel-Institute-of-Technology"},22840:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Icahn-School-of-Medicine-Mount-Sinai"},22841:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Osaka-University"},22842:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Toronto"},22843:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Pennsylvania-State-University"},22844:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Northwestern-University"},22845:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Uppsala-University"},22846:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Chicago"},22847:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Massachusetts-System"},22848:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Stanford-University"},22849:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nankai-University"},22850:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Oregon-Health-and-Science-University"},22851:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"London-School-of-Hygiene-and-Tropical-Medicine"},22852:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Oxford"},22853:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Princeton-University"},22854:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Science-and-Technology-of-China"},22855:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-College-London"},22856:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"National-Institutes-of-Health"},22857:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Bristol"},22858:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tsinghua-University"},22859:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Harvard-University"},22860:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-San-Diego"},22861:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"California-Institute-of-Technology"},22862:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Karlsruhe-Institute-of-Technology"},22863:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Australian-National-University"},22864:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Ohio-State-University"},22865:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Rice-University"},22866:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-System-of-Maryland"},22867:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Claude-Bernard-University-Lyon-1"},22868:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Council-of-Scientific-and-Industrial-Research-India"},22869:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Tokyo"},22870:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Santa-Cruz"},22871:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Aix-Marseille"},22872:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Free-University-of-Berlin"},22873:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Columbia-University"},22874:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-York"},22875:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Maryland"},22876:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Virginia"},22877:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"National-Research-Council-Italy"},22878:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-London"},22879:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Michigan-State-University"},22880:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Helsinki"},22881:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Geneva"},22882:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Nanyang-Technological-University"},22883:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Gwangju-Institute-of-Science-and-Technology"},22884:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Max-Planck-Society"},22885:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Manchester"},22886:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Texas-System"},22887:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tel-Aviv-University"},22888:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Purdue-University"},22889:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Exeter"},22890:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Dartmouth-College"},22891:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Indiana-University-System"},22892:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Utrecht-University"},22893:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Paris-Sud"},22894:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"McMaster-University"},22895:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Santa-Barbara"},22896:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Notre-Dame"},22897:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Warwick"},22898:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Sun-Yat-sen-University"},22899:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Rochester"},22900:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-California-Riverside"},22901:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Johns-Hopkins-University"},22902:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Florida"},22903:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"King's-College-London"},22904:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Utah"},22905:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Peking-University"},22906:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Strasbourg"},22907:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Technical-University-of-Munich"},22908:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Yonsei-University"},22909:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Hokkaido-University"},22910:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Tufts-University"},22911:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Cambridge"},22912:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"University-of-Basel"},22913:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"London-School-of-Economics-and-Political-Science"},22914:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"Yale-University"},22915:{type:"Citing Patent Collection",dataset:"v2.08.4-200metric-180110",datasetAlias:"global",slug:"King-Abdullah-University-of-Science-and-Technology"},23016:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-South-Australia"},23017:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Flinders-University"},23018:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Federation-University"},23019:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Australian-Catholic-University"},23020:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Murdoch-University"},23021:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Canberra"},23022:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"ANSTO-Australian-Nuclear-Science-and-Technology-Organization"},23023:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Royal-Melbourne-Institute-of-Technology"},23024:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-New-South-Wales"},23025:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-Notre-Dame-Australia"},23026:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Macquarie-University"},23027:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Adelaide"},23028:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Tasmania"},23029:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Charles-Darwin-University"},23030:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Western-Sydney"},23031:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Wollongong"},23032:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Swinburne-University-of-Technology"},23033:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"La-Trobe-University"},23034:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"(AIMS)-Australian-Institute-of-Marine-Sciences"},23035:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"James-Cook-University"},23036:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-Sunshine-Coast"},23037:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Technology,-Sydney"},23038:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-New-England"},23039:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"St-Vincents-Institute-of-Medical-Research"},23040:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Newcastle,-Australia"},23041:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-Victoria-Australia"},23042:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Bond-University"},23043:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"CSIRO"},23044:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"The-University-of-Southern-Queensland"},23045:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Deakin-University"},23046:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Murdoch-Childrens-Research-Institute"},23047:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Baker-IDI-Heart-Diabetes-Institute"},23048:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Central-Queensland-University"},23049:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Peter-MacCallum-Cancer-Centre"},23050:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Walter-and-Eliza-Hall-Institute-of-Medical-Research"},23051:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"University-of-Sydney"},23052:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Florey-Institute-of-Neuroscience-and-Mental-Health"},23053:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Monash-University"},23055:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Southern-Cross-University"},23056:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Garvan-Institute-of-Medical-Research"},23057:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Curtin-University"},23058:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"QIMR-Berghofer-Medical-Research-Institute"},23059:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Edith-Cowan-University"},23060:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Queensland-University-of-Technology"},23061:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Griffith-University"},23062:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Childrens-Medical-Research-Institute"},23063:{type:"Citing Patent Collection",dataset:"australia.v2.14-180110",datasetAlias:"australia",slug:"Charles-Sturt-University"}}},function(module,exports,__webpack_require__){"use strict";var UniqueSplit=__webpack_require__(138);module.exports=Backbone.View.extend({initialize:function initialize(opts){var $cache=opts.$cache;$(opts.el).autocomplete({search:function search(){$(this).addClass("working")},open:function open(){$(this).removeClass("working")},minLength:0,source:function source(request,response){var wordList=_.uniq(_.map($cache.find("li"),function(x){return $.trim($(x).text())}));var req=$.ui.autocomplete.escapeRegex(split(request.term).pop()||"");var matcher=new RegExp("^"+req,"i");var a=$.grep(wordList,function(item){return matcher.test(item)});response(a)},focus:function focus(){return false},select:function select(event,ui){var terms=UniqueSplit(this.value);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(" ");return false},matchContains:"word"})}});var split=function split(text){var trimmed=$.trim(text);if(trimmed===""){return[]}return trimmed.replace(/,/g," ").split(" ")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findSubStrIdxs=findSubStrIdxs;exports.findReservedSubStrIdxs=findReservedSubStrIdxs;exports.sortBySubStrIndex=sortBySubStrIndex;var RESERVED=["+","-","=","&&","||",">","<","!","(",")","{","}","[","]","^",'"',"~","*","?",":","\\","/"];function findSubStrIdxs(str,substring,valIdxs){var index=0;while(index!==-1){index=str.indexOf(substring,index);if(index!==-1){index=index+substring.length;var subIdxs=valIdxs.get(substring);if(!subIdxs){subIdxs=[];valIdxs.set(substring,subIdxs)}subIdxs.push({start:index,end:index+substring.length})}}}function findReservedSubStrIdxs(str){var valIdxs=new Map;for(var i=0;i<RESERVED.length;i++){findSubStrIdxs(str,RESERVED[i],valIdxs)}return valIdxs}function sortBySubStrIndex(valIdxs){var allIdxs=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=valIdxs.values()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var idxs=_step.value;for(var i=0;i<idxs.length;i++){allIdxs.push(idxs[i])}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}allIdxs.sort(function(a,b){return a.start>b.start?1:b.start>a.start?-1:0});return allIdxs}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var LocalStorageService=__webpack_require__(7);var storage=new LocalStorageService;var storageKey="lens.flashMessages";var Notification=__webpack_require__(10);var notification=new Notification;var FlashMessagesService=function(){function FlashMessagesService(){_classCallCheck(this,FlashMessagesService)}_createClass(FlashMessagesService,[{key:"_get",value:function _get(){return storage.get(storageKey)||{}}},{key:"addNotification",value:function addNotification(notification){var messages=this._get();messages.notifications=messages.notifications||[];messages.notifications.push(notification);storage.set(storageKey,messages)}},{key:"notify",value:function notify(){var messages=this._get();if(messages.notifications){messages.notifications.forEach(function(message){notification.notify(message)})}storage.remove(storageKey)}}]);return FlashMessagesService}();module.exports=FlashMessagesService},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.Model.extend({initialize:function initialize(opts){this.url=opts.url},parse:function parse(resp){return _.extend({id:1},resp)}})},function(module,exports,__webpack_require__){"use strict";var UniqueSplit=__webpack_require__(138);module.exports=Backbone.Model.extend({initialize:function initialize(){},url:function url(){return"/lens/service/patent-entity/"+this.id},tag:function tag(tags){return $.ajax({type:"POST",url:this.url()+"/tag",data:"tag="+UniqueSplit(tags).join(",")})}})},function(module,exports,__webpack_require__){"use strict";var moment=window.moment;module.exports=function(){return{constructDateSpec:function constructDateSpec(el){var left=$(".beginDate",el).datepicker("getDate");var right=$(".endDate",el).datepicker("getDate");var start=$.datepicker.formatDate("yymmdd",left<=right?left:right);var end=$.datepicker.formatDate("yymmdd",left<=right?right:left);return $(".dateType:checked",el).val()+":"+start+"-"+end},initDatePicker:function initDatePicker(el){var opts={maxDate:new Date,yearRange:"-100:+0",dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true};$(".beginDate",el).datepicker(_.extend({defaultDate:moment().startOf("year").toDate()},opts));$(".endDate",el).datepicker(_.extend({defaultDate:moment().subtract("month",1).endOf("month").toDate()},opts));$(".dateSelect",el).focus(function(){$("#ui-datepicker-div").position({my:"center top",at:"center bottom",of:$(this)})});$("#ui-datepicker-div").hide()}}}()},function(module,exports,__webpack_require__){"use strict";var LocalStorageService=__webpack_require__(7);var storage=new LocalStorageService;module.exports=function(){var feedback=function feedback(){$(".feedbackLink").click(function(e){e.preventDefault();var feedbackWindow;if(!feedbackWindow||feedbackWindow.closed){feedbackWindow=window.open(this.href+"?returnTo="+location.href,"feedbackWindow","location=no,menubar=no,width=400,height=540,toolbar=no,scrollbars=yes")}if(window.focus){feedbackWindow.focus()}return false})};return{init:function init(){$("#logout").on("click",function(e){e.preventDefault();storage.set("wasAuthed",false);$("#logoutForm").submit()});$("#login").fancybox({maxWidth:1200,maxHeight:800,fitToView:true,width:"94%",height:"94%",autoSize:true,closeClick:false,openEffect:"none",closeEffect:"none",content:$("#login_container"),afterShow:function afterShow(){$(".fancybox-overlay").find("#username").focus()}});feedback()},feedback:feedback}}()},function(module,exports,__webpack_require__){"use strict";var SearchPageView=__webpack_require__(288);var TableTabView=__webpack_require__(289);module.exports=Backbone.Router.extend({routes:{},initialize:function initialize(opts){this.view=opts.view;this.opts=opts;this.loadState(opts.view)},loadState:function loadState(view){new SearchPageView({});this.view=view;var $summarySelection=$(".summarySelection");$summarySelection.hide();new TableTabView({el:$("#results")})}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({el:"#results",events:{"change #n":"changePageSize","click .groupFamily":"groupFamily","change #sortBy":"changeSortBy"},initialize:function initialize(opts){},groupFamily:function groupFamily(e){e.preventDefault();$.vent.trigger("filters/apply",{f:!$(e.currentTarget).hasClass("active")})},changePageSize:function changePageSize(e){$.vent.trigger("filters/apply",{n:$(e.currentTarget).val()})},changeSortBy:function changeSortBy(e){var data=$(e.currentTarget).find("option:selected").data();if(data.field){$.vent.trigger("filters/apply",{s:data.field,d:data.direction})}else{$.vent.trigger("filters/apply",{s:"",d:""})}}})},function(module,exports,__webpack_require__){"use strict";var ResultRowView=__webpack_require__(290);module.exports=Backbone.View.extend({events:{"click .expand-all":"expandAll"},initialize:function initialize(opts){this.el=opts.el;this.initExpandAllTooltip();this.rowViews=[];var view=this;_.each(this.$(".patent-row"),function(x){var el=this.$(x);var rowView=new ResultRowView({el:el,currentCollection:opts.currentCollection,key:el.attr("id"),lensId:el.data("lens-id")});view.rowViews.push(rowView)},this);var selectSortBy=function selectSortBy(){var qs=$.deparam.querystring();var field=qs["s"];var direction=qs["d"];if(field&&direction){var selector='option[data-field="'+field+'"][data-direction="'+direction+'"]';$("#sortBy").find(selector).prop("selected",true)}};selectSortBy()},initExpandAllTooltip:function initExpandAllTooltip(){var $el=this.$(".expand-all");var config=_.extend(_.clone(window.tooltipsterConfig),{content:messages.prop("common.action.expandAll")||"Expand All"});$el.tooltipster(config);this.expandAllTooltip=$el.tooltipster("instance")},expandAll:function expandAll(event){var tooltip=this.expandAllTooltip;var $el=this.$(".expand-all");var text=tooltip.content();var expandText=messages.prop("common.action.expandAll")||"Expand All";var collapseText=messages.prop("common.action.collapseAll")||"Collapse All";var isCollapsed=text===expandText;setTimeout(function(){tooltip.content(isCollapsed?collapseText:expandText)},window.tooltipsterConfig.animationDuration||200);$el.find(".fa").toggleClass("fa-chevron-circle-up",isCollapsed);$el.find(".fa").toggleClass("fa-chevron-circle-down",!isCollapsed);_.each(this.rowViews,function(rowView){rowView.expandPatent(event,text===expandText)})}})},function(module,exports,__webpack_require__){"use strict";var Patent=__webpack_require__(284);var Tooltip=__webpack_require__(140);var TagsInputView=__webpack_require__(209);var InventorshipLinkView=__webpack_require__(291);module.exports=Backbone.View.extend({events:{"click .expandPatent":"expandPatent"},initialize:function initialize(opts){var view=this;this.key=opts.key;this.lensId=opts.lensId;this.beautifyIcons();this.tagsInputView=new TagsInputView({el:this.$(".resultTags"),model:new Patent({id:this.lensId})});$.vent.on("row/"+this.key+"/remove",function(collectionId){if(opts.currentCollection&&opts.currentCollection.get("id")===collectionId){view.$el.remove()}});$.vent.on("row/"+this.key+"/collection-add",this.addCollection);$.vent.on("row/"+this.key+"/collection-remove",this.removeCollection)},beautifyIcons:function beautifyIcons(){var view=this;view.iconViews=[];_.each(this.$(".hover-icon"),function(x){view.iconViews.push(new IconView({el:$(x)}))})},expandPatent:function expandPatent(event,v){var $target=this.$(".expandPatent");if(!_.isUndefined(v)){$target.toggleClass("active fa-chevron-circle-up",v);$target.next("span").toggleClass("active",v);$target.closest(".patentRow").toggleClass("expanded-patent",v)}else{$target.toggleClass("active fa-chevron-circle-up",v);$target.next("span").toggleClass("active",v);$target.closest(".patentRow").toggleClass("expanded-patent",v)}var $expandTarget=$("#"+this.key+"_expand");if($expandTarget.hasClass("loaded")){$expandTarget.toggle(v)}else{$expandTarget.find(".expandTarget").html(ich["expandoLoadingTemplate"]);$expandTarget.toggle(v);this.loadPatent(this,$expandTarget)}},initPatentInfo:function initPatentInfo($el){var that=this;window.LazySlider.init($el.find(".flexslider"));$el.removeClass("loading").addClass("loaded");that.inventorshipLinkViews=[];_.each($el.find("span.inventorshipContainer"),function(x){var view=new InventorshipLinkView({el:$(x),parentContainer:$el,lensId:that.lensId,pubKey:that.key});that.inventorshipLinkViews.push(view)});this.moreLess($el);window.initTooltips($el);$el.addClass("loaded")},moreLess:function moreLess($el){var query="ul.moreLessContent";var selector="li:gt(2)";$el.find(query).each(function(){if($(this).children().length>9){$(this).children(selector).hide();$(this).after('<a href="#" class="moreLess">Show more</a>')}});$el.find(".moreLess").click(function(e){e.preventDefault();var btn=$(this);if(btn.hasClass("less")){btn.removeClass("less");btn.html("Show more")}else{btn.addClass("less");btn.html("Show less")}$(this).prev(query).children(selector).toggle("fast")})},loadPatent:function loadPatent(rowView,$expandTarget){$.ajax({url:"/lens/service/patent/"+rowView.key+"/summary",dataType:"html"}).then(function(html){var content=$(html);content.find(".list-head").hide();$expandTarget.find(".expandTarget").html(content.html());rowView.initPatentInfo($expandTarget);var link=$(rowView.el).find(".classification-link");link.on("click",function(el){var symbol=el.target.innerText;var type=$(el.target).data("type");var scope=window.angular.element(document.body).scope();scope.$root.classificationViewer={type:type,term:symbol};scope.$apply()})})}});var IconView=Backbone.View.extend({initialize:function initialize(opts){this.$el=$(opts.el);var $icon=this.$(".icon");var $content=this.$(".iconContent").clone();Tooltip({target:$icon,content:$content,type:"local",tooltipPosition:"top",tooltipClass:"infoBubble",onOpen:function onOpen(event,ui){$(ui.tooltip).find(".offLeft").removeClass("offLeft").show()}})}});$(function(document){var el=$("#patentMain");if(el.length){new window.LENS.Views.Results.ResultRowView({el:el})}})},function(module,exports,__webpack_require__){"use strict";var LoadingSpinner=__webpack_require__(139);var Tooltip=__webpack_require__(140);module.exports=Backbone.View.extend({events:{click:function click(){return false}},initialize:function initialize(opts){this.$el=$(opts.el);this.$parentContainer=opts.parentContainer;this.$invIcon=this.$el.find(".inventorshipLink");this.$orcidIcon=this.$el.find(".orcidIcon");this.$linkedInIcon=this.$el.find(".linkedinIcon");var elData=this.$el.data();this.isGuest=elData.isguest;this.inventorship=elData.inventorship;this.linkedServices=elData.linkedservices;this.inventor=elData.inventor;this.lensId=opts.lensId;this.pubKey=opts.pubKey;if(!("name"in this.inventor)&&this.inventorship.matched){console.warn("inventor information missing. bailing out.",this.lensId);return}this.recorded=this.inventorship!=null&&!$.isEmptyObject(this.inventorship);this.renderLink();this.createTooltip()},alreadyClaimedInventorship:function alreadyClaimedInventorship(){return this.$parentContainer.find(".inventorshipLink.recorded.me").length>0},reset:function reset(){this.$invIcon.toggleClass("me",false);this.$invIcon.toggleClass("unmatched",false);this.$invIcon.toggleClass("recorded",false);this.$invIcon.toggleClass("unrecorded",false);this.linkedServices=[]},renderLink:function renderLink(){this.hideSpinner();this.$invIcon.toggleClass("recorded",this.recorded);this.$invIcon.toggleClass("unrecorded",!this.recorded);this.$invIcon.toggleClass("me",this.recorded&&this.inventorship.isMe);var unmatched=this.recorded&&this.inventorship.isMe&&!this.inventorship.matched;this.$invIcon.toggleClass("unmatched",unmatched);if(this.linkedServices){this.setIconActiveState(this.$linkedInIcon,_.contains(this.linkedServices,"LinkedIn"));this.setIconActiveState(this.$orcidIcon,_.contains(this.linkedServices,"ORCID"))}else{this.setIconActiveState(this.$linkedInIcon,false);this.setIconActiveState(this.$orcidIcon,false)}},setIconActiveState:function setIconActiveState($icon,active){var src=$icon.attr("src");if(active&&src.match(/grey/))$icon.attr("src",src.replace(/-grey.png/,".png"));if(!active&&!src.match(/grey/))$icon.attr("src",src.replace(/.png/,"-grey.png"))},createTooltip:function createTooltip(open){var that=this;this.tooltip=Tooltip({target:this.$el,tooltipPosition:"top",tooltipClass:"filterBubble",type:"ajax",content:LoadingSpinner.render(),onOpen:function onOpen(event,ui){that.$tooltipUI=ui.tooltip;return that.updateTooltipContent()}});if(open){this.$el.tooltip("open");$(document).one("click",function(e){if($(e.target).parents(".filterBubble").length===0){this.$el.tooltip("close")}}.bind(this))}},updateTooltipContent:function updateTooltipContent(){var that=this;if(this.recorded){return $.ajax({url:"/lens/patent/"+this.pubKey+"/inventorship/"+this.inventorship.id,method:"GET",dataType:"html",data:{matched:this.inventorship.matched,lensId:this.lensId}}).then(function(html){that.$el.tooltip("option","content",html);that.initButtons()})}else{var dfd=$.Deferred();dfd.then(function(){var html=ich["unrecordedInventorshipMouseOverTemplate"]({i:{hasOtherInventorhips:that.alreadyClaimedInventorship(),normalisedInventorName:that.inventor.normalisedName},isGuest:that.isGuest});that.$el.tooltip("option","content",html);if(that.isGuest){that.$el.find("a.inventorship-signin").fancybox({maxWidth:1200,maxHeight:800,fitToView:true,width:"94%",height:"94%",autoSize:true,closeClick:false,openEffect:"none",closeEffect:"none",content:$("#login_container"),afterShow:function afterShow(){that.$el.tooltip("close");$(".fancybox-overlay").find("#username").focus()}})}that.initButtons()});dfd.resolve();return dfd.promise()}},spinner:function spinner(){this.$el.tooltip("close");this.$invIcon.html(LoadingSpinner.render())},hideSpinner:function hideSpinner(){this.$invIcon.html("")},resetAndSpinner:function resetAndSpinner(){this.reset();this.spinner()},initButtons:function initButtons(){var pubKey=this.pubKey;var that=this;var $content=this.$tooltipUI.find(".ui-tooltip-content");$content.on("click",":button.deleteInventorship",function(x){that.resetAndSpinner();$.ajax({url:"/lens/service/patent-entity/inventorship/"+that.inventorship.id,method:"DELETE",dataType:"html"}).then(function(html){if(that.inventorship.matched){that.inventorship={};that.recorded=false;that.renderLink()}else{that.$el.parent().hide()}});return false});$content.on("click",":button.createInventorship",function(x){that.resetAndSpinner();$.ajax({url:"/lens/service/patent-entity/"+pubKey+"/inventorship",method:"POST",dataType:"json",data:{name:that.inventor.name,lensId:that.lensId}}).then(function(json){that.inventorship={id:json.inventorship.id,matched:true,isMe:true};that.recorded=true;that.linkedServices=json.linkedServices;that.createTooltip(true);that.renderLink()});return false});$content.on("click",":button.syncToOrcid",function(x){that.spinner();$.ajax({url:"/lens/service/patent-entity/inventorship/orcid-sync",method:"GET",dataType:"html"}).then(function(){that.createTooltip(true);that.renderLink()});return false})}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({el:"#facets",events:{"click .show_hide":"toggleFilter"},initialize:function initialize(){this.showLoading=false;$("#facets-list").find("> li").each(function(){$(this).accordion({collapsible:true,active:false,heightStyle:"content",beforeActivate:function beforeActivate(event,ui){ui.newPanel.html(ich["loadingTemplate"]())}})})},stop:function stop(){this.undelegateEvents();var openFacets=$("#facets-list").find("> li > h5.ui-accordion-header-active").map(function(){return $(this).attr("rel")});this.$("#facets-list > li").accordion("destroy");return openFacets}})},function(module,exports,__webpack_require__){"use strict";var Notification=__webpack_require__(10);var EditDialog=__webpack_require__(109);var SavedQuery=__webpack_require__(63);var editSavedQueryTemplate=window.Handlebars.compile(__webpack_require__(294));module.exports=Backbone.View.extend({events:{"click .edit":"doEdit","click .save":"doSave"},initialize:function initialize(opts){this.queryType=opts.queryType;this.scholarlySearchId=opts.scholarlySearchId;this.savedQueryUri=opts.searchUrl+document.location.search;this.savedQueryDescription=opts.queryText;this.$el=$(opts.el);this.model=opts.model;if(opts.model){this.$(".edit").show();this.$(".save").hide()}this.defaultTitle=opts.defaultTitle},doEdit:function doEdit(e){e.preventDefault();var that=this;var d=_.clone(this.model.toJSON());d.isAnon=window.UI_CONFIG.isAnon;new EditDialog({title:messages.prop("common.editTitleAndDescription"),onApply:function onApply(event,$dialog){var data={title:$dialog.find("#title").val(),description:$dialog.find("#text").val(),notificationsEnabled:$dialog.find("#notificationsEnabled").prop("checked")};return that.model.save(data).done(function(){var n=new Notification;n.notify("Query Saved")})}}).render(editSavedQueryTemplate(d))},doSave:function doSave(e){e.preventDefault();var that=this;new EditDialog({title:messages.prop("user.queries.createNew"),onApply:function onApply(event,$dialog){that.model=new SavedQuery({title:$dialog.find("#title").val(),description:$dialog.find("#text").val(),notificationsEnabled:$dialog.find("#notificationsEnabled").prop("checked"),queryType:that.queryType,uri:that.savedQueryUri,scholarlySearchId:that.scholarlySearchId,queryText:that.savedQueryDescription});return that.model.save().done(function(){that.$(".edit").show();that.$(".save").hide();var n=new Notification;n.notify("Query Saved");$.vent.trigger("refresh-saved-queries")})}}).render(editSavedQueryTemplate({title:that.defaultTitle,notificationsEnabled:true,isAnon:window.UI_CONFIG.isAnon}),".redactor_editor")}})},function(module,exports){module.exports='\x3c!-- WARNING: This template is Handlebars / Backbone, not Angular --\x3e\n<form>\n    <label class="full" for="title">{{ message "common.title" }}</label>\n    <label class="input">\n        <input id="title" name="title" type="text" class="full" value="{{title}}"/>\n    </label>\n    <label class="full" for="text">{{ message "common.description" }}</label>\n    <textarea id="text" name="text" class="full">{{description}}</textarea>\n    {{#if isAnon}}\n        <div class="alert alert-info">\n            <a href="/lens/user/login" class="login-link">\n                <strong>New!</strong>\n                {{ message "user.query.alert.notifications.message.anon" }}\n            </a>\n        </div>\n    {{else}}\n        <label class="checkbox checkbox-multiline">\n            <input type="checkbox" id="notificationsEnabled" {{#if notificationsEnabled}}checked{{/if}}>\n            <i></i>\n            {{ message "user.query.alert.notifications.message" }}\n        </label>\n    {{/if}}\n</form>\n'},function(module,exports){module.exports="<div class=\"alert alert-danger\">{{{message 'common.alert.deletion'}}}</div>\n"},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({initialize:function initialize(product){this.product=product},render:function render(){var fancyBoxOpts={maxWidth:1200,maxHeight:850,fitToView:true,autoSize:true,closeClick:false,openEffect:"none",closeEffect:"none",helpers:{overlay:{closeClick:false}}};var SubscriptionRequestDialogView=Backbone.View.extend({initialize:function initialize(opts){this.product=opts.product;this.model=new SubscriptionRequest;this.model.on("invalid",this.showErrors,this)},events:{"submit #subscription_request_form":"processForm","change #organisationSize":"organisationSizeChange","change #type":"licenseTypeChange"},render:function render(){this.$el.html(ich["subscriptionRequestFormTemplate"]({product:this.product,productHuman:this.translateProductCode(this.product)}));var $panels=this.$(".panel");$panels.hide();var $first=$panels.first();$first.show();this.$("#back").click(function(){$panels.hide();$first.show()});this.$(".detail_button").off();this.$(".detail_button").click(function(){$first.slideToggle();var type=$(this).attr("data-type");var formPanel=$first.next();$(formPanel).find("#type").val(type).change();formPanel.slideToggle()});return this},processForm:function processForm(e){e.preventDefault();this.$(".formError").hide();this.hideErrors();var values={};$.each(this.$("#subscription_request_form").serializeArray(),function(_,kv){values[kv.name]=kv.value});this.model.set(values);if(this.model.isValid()){var self=this;var options={success:function success(model,response,options){self.$el.html(ich["subscriptionRequestFormSuccessTemplate"](response))},error:function error(_error){$.jGrowl("We're sorry but we can't process your request. Please contact our support.",{theme:"jGrowl-error"});console.error(_error)}};this.model.save({},options)}},showErrors:function showErrors(model,errors){var notifyText=[];_.each(errors,function(error){this.$("#"+error.name).addClass("has_error");notifyText.push(error.message)},this);$.jGrowl(notifyText.join("<br>"),{theme:"jGrowl-error"})},hideErrors:function hideErrors(){this.$(".has_error").removeClass("has_error")},organisationSizeChange:function organisationSizeChange(){var orgSize=this.$("#organisationSize").val();var type=this.$("#type").val();if(orgSize==="small"||type==="free"){this.$("#statusConfirmation-field").show()}else{this.$("#statusConfirmation-field").hide()}this.$("#statusConfirmation").attr("checked",false)},licenseTypeChange:function licenseTypeChange(e){var type=this.$("#type").val();if(type==="free"){this.$("#organisationSize-field").show();this.$("#statusConfirmation-field").show()}else if(type==="large"){this.$("#organisationSize-field").hide();this.$("#statusConfirmation-field").hide()}else if(type==="service"){this.$("#organisationSize-field").hide();this.$("#statusConfirmation-field").hide()}else{this.$("#organisationSize-field").show()}this.$("#organisationSize").val("");this.$("#statusConfirmation").attr("checked",false)}});var SubscriptionRequest=Backbone.Model.extend({url:"/lens/user/downloads/request",requiredFields:{type:"Please specify License Type",lastName:"Please specify Last Name",message:"Please specify Purpose",organisation:"Please specify Organisation",email:"Please specify Email",termsAccepted:"Please accept the Terms of Use"},validate:function validate(attrs,options){var errors=[];for(var field in this.requiredFields){if(!attrs[field]){errors.push({name:field,message:this.requiredFields[field]})}}if(attrs.type==="small"&&attrs.organisationSize==="large"){errors.push({name:"organisationSize",message:"Please choose an organisation size matching the chosen license type."})}if(attrs.type==="small"||attrs.type==="free"){if(!attrs.organisationSize){errors.push({name:"organisationSize",message:"Please specify organisation size."})}if(!attrs.statusConfirmation&&(attrs.organisationSize==="small"||attrs.type==="free")){errors.push({name:"statusConfirmation",message:"Please confirm organisation status."})}}return errors.length>0?errors:false}});var wizard=new SubscriptionRequestDialogView({product:this.product});$.fancybox(wizard.render().$el,fancyBoxOpts)}})},function(module,exports,__webpack_require__){"use strict";var StructuredSearchRowView=__webpack_require__(298);var Dates=__webpack_require__(285);module.exports=Backbone.View.extend({_c:0,rows:{},el:"#advanced_search_form",events:{"click #jurisdictions .selectAll":"selectAll","click #jurisdictions .selectNone":"selectNone",submit:"submit","click .reset":"reset","keypress input[type=text]":"submitOnEnter"},submitOnEnter:function submitOnEnter(e){if(e.keyCode!==13)return;this.submit()},initialize:function initialize(){this.$el.removeClass("loading");Dates.initDatePicker(this.$el);_.each($(".fieldRow"),function(x){this._initRow($(x))},this);$(".removeRow").show();$("body").addClass("search-structured");this.$("input[placeholder], textarea[placeholder]").placeholder()},reset:function reset(e){e.preventDefault();this.$("input").val("");this.$("#types input:checkbox").removeAttr("checked");this.$("#jurisdictions input:checkbox").removeAttr("checked");this.$("#adv_ft").removeAttr("checked");this.$("#adv_f").attr("checked","checked");this.$("#adv_st").attr("checked","checked");this.$("#l option:first").attr("selected","selected");this.$("#predicate select option:first").attr("selected","selected")},cloneRow:function cloneRow($el){var clone=$el.clone();clone.find("select").val($el.find("select").val());$("input",clone).val("");$el.after(clone);this._initRow(clone)},_initRow:function _initRow(el){var view=new StructuredSearchRowView({el:el,idx:this._c++,parent:this});this.rows[view.idx]=view;$("#predicate").show();$(".removeRow").show()},removeRow:function removeRow(idx){delete this.rows[idx];if($(".fieldRow").length===1){$("#predicate").hide();$(".removeRow").hide()}},selectAll:function selectAll(e){this.$("#allNone .btn").toggle();this.$("#jurisdictions input").prop("checked",true);e.preventDefault()},selectNone:function selectNone(e){this.$("#allNone .btn").toggle();this.$("#jurisdictions input").prop("checked",false);e.preventDefault()},submit:function submit(){this.$("#q").removeAttr("disabled").val(this.parseInput());if(this.$("input#adv_st").is(":checked")){this.$("input#adv_st_hidden").prop("disabled",true);this.$("input#adv_st").prop("disabled",true)}if(this.$("input#adv_ft").is(":checked")){this.$("input#adv_ft_hidden").prop("disabled",true)}else{this.$("input#adv_ft").prop("disabled",true);this.$("input#adv_ft_hidden").prop("disabled",true)}this.$("#dateGroupFields input").attr("disabled","disabled");if(!this.$('input[name="j"]:checked').length){this.$('select[name="jo"]').attr("disabled","disabled")}var begin=this.$(".beginDate");var end=this.$(".endDate");if(begin.val()!==""&&end.val()!==""){this.$("#dates").removeAttr("disabled").val(Dates.constructDateSpec(this.$("#dateControls")))}},parseInput:function parseInput(){var ctx=this;return _.chain(this.rows).map(function(x){return x.parse()}).filter(function(x){return!_.isUndefined(x)&&x!==""}).value().join(" "+ctx.$("input[name=predicate]:checked").val()+" ")}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({events:{"change .fieldSelect":"changeField","click .removeRow":"removeRow","click .addRow":"addRow"},initialize:function initialize(opts){this.el=opts.el;this.parent=opts.parent;this.idx=opts.idx;this.$fieldSelect=this.$(".fieldSelect");this.$fieldQuery=this.$('.fieldQuery[data-type="primary"]');this.$secondaryQuery=this.$('.fieldQuery[data-type="secondary"]');this.changeField()},parse:function parse(){var quoted=this.$fieldSelect.find("option:selected").data()["quoted"];return this._parse(this.$fieldSelect.val(),quoted,this.$fieldQuery.val(),this.$secondaryQuery.val())},_quoteValue:function _quoteValue(x,quoted){if(quoted){return'"'+x+'"'}else if(x.indexOf(" ")!==-1){return"("+x+")"}else{return x}},_wrapValue:function _wrapValue(field,x,quoted){if(_.isUndefined(x)||x==="")return"";if(_.isUndefined(quoted))quoted=false;return field+":"+this._quoteValue(x,quoted)},_splitValues:function _splitValues(x){if(_.isUndefined(x)||x.replace(/ /g,"")==="")return[];return _.filter(x.split(/[\s,]/),function(x){return!_.isUndefined(x)&&x!==""})},_normalizeQuotes:function _normalizeQuotes(x){return x.replace(/["]{2,9}/g,'"')},_parse:function _parse(field,quoted,val,val2,val3){var that=this;var _parseVal=function _parseVal(type,value){var notAThing=function notAThing(x){return _.isUndefined(x)||_.isNull(x)||x.length===0};if(notAThing(value)){return undefined}if(type==="tac"){return"("+_.map(["title","abstract","claims"],function(x){return that._wrapValue(x,value,false)}).join(" || ")+")"}return that._wrapValue(type,value,quoted)};var xs;if(field==="inventor"){if(val2||val){return'inventor:"'+val2+" "+val+'"~2'}else{return""}}else if(field==="full_text"){return val}else if(field==="citation_id"){xs=that._splitValues(val);if(xs.length){return"citation_id:("+that._normalizeQuotes(_.map(xs,function(x){return that._quoteValue(x,true)}).join(" "))+")"}else{return""}}else if(["classification_nat","classification_ipcr","classification_cpc"].indexOf(field)>=0){return _parseVal(field,val.replace(/\//g,"\\/"))}else{return _parseVal(field,val)}},changeField:function changeField(){var $x=this.$fieldSelect;var data=$x.find("option:selected").data();var field=$x.val();if(field==="inventor"){this.$fieldQuery.removeClass("full").addClass("half").attr("placeholder","First Name").show();this.$secondaryQuery.removeAttr("disabled").attr("placeholder","Last Name").show()}else{if(!this.$secondaryQuery.attr("disabled")){this.$fieldQuery.val("");this.$secondaryQuery.attr("disabled","true").removeAttr("placeholder").val("").hide();this.$fieldQuery.removeClass("half").addClass("full").removeAttr("placeholder")}if(data&&data["placeholder"]){this.$fieldQuery.attr("placeholder",data["placeholder"])}}},removeRow:function removeRow(e){e.preventDefault();this.$el.remove();this.parent.removeRow(this.idx)},addRow:function addRow(e){e.preventDefault();this.parent.cloneRow($(this.el))}})},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(320);var _smoothscroll=__webpack_require__(62);var _smoothscroll2=_interopRequireDefault(_smoothscroll);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(321);__webpack_require__(322);if(!window.UI_CONFIG){window.UI_CONFIG={}}if(!window.UI_CONFIG.assetLocation){window.UI_CONFIG.assetLocation=window.location.origin+window.location.pathname.replace("index.html","").slice(0,-1)}if(!window.UI_CONFIG.institutionDataLocation){window.UI_CONFIG.institutionDataLocation=window.UI_CONFIG.assetLocation+"/in4m-ui-data"}if(localStorage.getItem("devinstitutionDataLocation")){window.UI_CONFIG.institutionDataLocation=localStorage.getItem("devinstitutionDataLocation")}window.VEGA_EMBED_OPTS={defaultStyle:true,actions:false};window.vegaLegend=function(o){return _.defaults(o,{labelFontSize:12,titleFontSize:14,titleFont:"source_sans_proregular",titleFontWeight:"normal",labelFont:"source_sans_proregular",labelFontWeight:"normal",labelColor:"#666666",titleColor:"#0f4965"})};__webpack_require__(326);var version=__webpack_require__(33);console.log(version);window.LENS=__webpack_require__(327);__webpack_require__(709);__webpack_require__(710);__webpack_require__(711);__webpack_require__(712);__webpack_require__(713);__webpack_require__(714)},function(module,exports){(function(self){"use strict";if(self.fetch){return}var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer){var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)};var isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1}}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(Array.isArray(headers)){headers.forEach(function(header){this.append(header[0],header[1])},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+","+value:value};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){name=normalizeName(name);return this.has(name)?this.map[name]:null};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)};Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map){if(this.map.hasOwnProperty(name)){callback.call(thisArg,this.map[name],name,this)}}};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value)});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries}function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsArrayBuffer(blob);return promise}function readBlobAsText(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsText(blob);return promise}function readArrayBufferAsText(buf){var view=new Uint8Array(buf);var chars=new Array(view.length);for(var i=0;i<view.length;i++){chars[i]=String.fromCharCode(view[i])}return chars.join("")}function bufferClone(buf){if(buf.slice){return buf.slice(0)}else{var view=new Uint8Array(buf.byteLength);view.set(new Uint8Array(buf));return view.buffer}}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(!body){this._bodyText=""}else if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString()}else if(support.arrayBuffer&&support.blob&&isDataView(body)){this._bodyArrayBuffer=bufferClone(body.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))){this._bodyArrayBuffer=bufferClone(body)}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof body==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return consumed(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(readBlobAsArrayBuffer)}}}this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body&&input._bodyInit!=null){body=input._bodyInit;input.bodyUsed=true}}else{this.url=String(input)}this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function parseHeaders(rawHeaders){var headers=new Headers;rawHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(":");var key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}});return headers}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this.type="default";this.status="status"in options?options.status:200;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in options?options.statusText:"OK";this.headers=new Headers(options.headers);this.url=options.url||"";this._initBody(bodyInit)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.ontimeout=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})};self.fetch.polyfill=true})(typeof self!=="undefined"?self:this)},function(module,exports){},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(323).polyfill()},function(module,exports,__webpack_require__){(function(process,global){var require;(function(global,factory){true?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ES6Promise=factory()})(this,function(){"use strict";function objectOrFunction(x){var type=typeof x;return x!==null&&(type==="object"||type==="function")}function isFunction(x){return typeof x==="function"}var _isArray=undefined;if(Array.isArray){_isArray=Array.isArray}else{_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){if(typeof vertxNext!=="undefined"){return function(){vertxNext(flush)}}return useSetTimeout()}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var r=require;var vertx=__webpack_require__(325);vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=undefined;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&"function"==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})})()}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve$1(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){GET_THEN_ERROR.error=error;return GET_THEN_ERROR}}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then$$1){asap(function(promise){var sealed=false;var error=tryThen(then$$1,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$1){if(maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1){handleOwnThenable(promise,maybeThenable)}else{if(then$$1===GET_THEN_ERROR){reject(promise,GET_THEN_ERROR.error);GET_THEN_ERROR.error=null}else if(then$$1===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$1)){handleForeignThenable(promise,maybeThenable,then$$1)}else{fulfill(promise,maybeThenable)}}}function resolve(promise,value){if(promise===value){reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value.error=null}else{succeeded=true}if(promise===value){reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){resolve(promise,value)}else if(failed){reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){resolve(promise,value)},function rejectPromise(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function Enumerator$1(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(input);if(this._remaining===0){fulfill(this.promise,this._result)}}}else{reject(this.promise,validationError())}}function validationError(){return new Error("Array Methods must be provided an Array")}Enumerator$1.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++){this._eachEntry(input[i],i)}};Enumerator$1.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise$2){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}}else{this._willSettleAt(resolve$$1(entry),i)}};Enumerator$1.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator$1.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};function all$1(entries){return new Enumerator$1(this,entries).promise}function race$1(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject$1(reason){var Constructor=this;var promise=new Constructor(noop);reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise$2(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise$2?initializePromise(this,resolver):needsNew()}}Promise$2.all=all$1;Promise$2.race=race$1;Promise$2.resolve=resolve$1;Promise$2.reject=reject$1;Promise$2._setScheduler=setScheduler;Promise$2._setAsap=setAsap;Promise$2._asap=asap;Promise$2.prototype={constructor:Promise$2,then:then,catch:function _catch(onRejection){return this.then(null,onRejection)}};function polyfill$1(){var local=undefined;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise$2}Promise$2.polyfill=polyfill$1;Promise$2.Promise=Promise$2;return Promise$2})}).call(exports,__webpack_require__(324),__webpack_require__(51))},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";(function($,moment){var updateInterval=1e3,paused=false,$livestamps=$([]),init=function init(){livestampGlobal.resume()},prep=function prep($el,timestamp){var oldData=$el.data("livestampdata");if(typeof timestamp=="number")timestamp*=1e3;$el.removeAttr("data-livestamp").removeData("livestamp");timestamp=moment(timestamp);if(moment.isMoment(timestamp)&&!isNaN(+timestamp)){var newData=$.extend({},{original:$el.contents()},oldData);newData.moment=moment(timestamp);$el.data("livestampdata",newData).empty();$livestamps.push($el[0])}},run=function run(){if(paused)return;livestampGlobal.update();setTimeout(run,updateInterval)},livestampGlobal={update:function update(){$("[data-livestamp]").each(function(){var $this=$(this);prep($this,$this.data("livestamp"))});var toRemove=[];$livestamps.each(function(){var $this=$(this),data=$this.data("livestampdata");if(data===undefined)toRemove.push(this);else if(moment.isMoment(data.moment)){var from=$this.html(),to=data.moment.fromNow();if(from!=to){var e=$.Event("change.livestamp");$this.trigger(e,[from,to]);if(!e.isDefaultPrevented())$this.html(to)}}});$livestamps=$livestamps.not(toRemove)},pause:function pause(){paused=true},resume:function resume(){paused=false;run()},interval:function interval(_interval){if(_interval===undefined)return updateInterval;updateInterval=_interval}},livestampLocal={add:function add($el,timestamp){if(typeof timestamp=="number")timestamp*=1e3;timestamp=moment(timestamp);if(moment.isMoment(timestamp)&&!isNaN(+timestamp)){$el.each(function(){prep($(this),timestamp)});livestampGlobal.update()}return $el},destroy:function destroy($el){$livestamps=$livestamps.not($el);$el.each(function(){var $this=$(this),data=$this.data("livestampdata");if(data===undefined)return $el;$this.html(data.original?data.original:"").removeData("livestampdata")});return $el},isLivestamp:function isLivestamp($el){return $el.data("livestampdata")!==undefined}};$.livestamp=livestampGlobal;$(init);$.fn.livestamp=function(method,options){if(!livestampLocal[method]){options=method;method="add"}return livestampLocal[method](this,options)}})(jQuery,moment)},function(module,exports,__webpack_require__){"use strict";module.exports={Collections:__webpack_require__(328),Controllers:__webpack_require__(329),Directives:__webpack_require__(481),Models:__webpack_require__(666),Modules:__webpack_require__(668),Routers:__webpack_require__(673),Services:__webpack_require__(674),Views:__webpack_require__(688)}},function(module,exports,__webpack_require__){"use strict";module.exports={SavedQueryCollection:__webpack_require__(213),Tags:__webpack_require__(214)}},function(module,exports,__webpack_require__){"use strict";module.exports={AnalysisController:__webpack_require__(330),CollectionSearchController:__webpack_require__(448),FederatedSearchController:__webpack_require__(449),NoteExplorerController:__webpack_require__(450),PatentSearchController:__webpack_require__(451),StructuredSearchController:__webpack_require__(452),ViewPatentController:__webpack_require__(480)}},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _getArticleId=__webpack_require__(142);var _getArticleId2=_interopRequireDefault(_getArticleId);var _urlQueryHelpers=__webpack_require__(18);var _parseAnalysisString=__webpack_require__(216);var _humanizeNumber=__webpack_require__(111);var _humanizeNumber2=_interopRequireDefault(_humanizeNumber);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _PatentScatterSpec=__webpack_require__(268);var _PatentScatterSpec2=_interopRequireDefault(_PatentScatterSpec);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AnalysisViews=__webpack_require__(269);var LocalStorageService=__webpack_require__(7);var IsoCountries=__webpack_require__(23);var IsoCountriesNameLookup=__webpack_require__(119);var iframeTemplate=window.Handlebars.compile('<iframe src="{{{path}}}/embed?facet={{facet}}&type={{type}}&title={{title}}&{{{params}}}" width="{{width}}px" height="{{height}}px" frameborder=0></iframe>');var DEFAULT_VIEWS="pub_year:line,jurisdiction:map,applicant:logo-grid,type:pie,inventor:bar";var baseSearchUrl="/lens/search?";var _applyFilter=function _applyFilter(k,v){$.vent.trigger("filters/apply",_defineProperty({},k,v));if(!window.LENS.searchFormInitialized){window.location=baseSearchUrl+"&"+k+"="+v}};var ChartTypes=__webpack_require__(270);var AnalysisController=function(){function AnalysisController($attrs,$http,$element,$timeout,$rootScope,$q,$stateParams,$state,$scope){var _this=this;_classCallCheck(this,AnalysisController);this.$q=$q;this.$http=$http;this.$attrs=$attrs;this.$element=$element;this.$timeout=$timeout;this.$rootScope=$rootScope;this.storage=new LocalStorageService("analysis-view");if($state.current.name==="article.citations.patents"){baseSearchUrl="/lens/search?npl="+$stateParams.id}else if($state.current.name==="scholar.results"){baseSearchUrl=(0,_get3.default)($scope,"$parent.$parent.fullAnalysisUrl")}var data=window.searchAppFacetData;var citedArticleFacets=["doi","pmid","npl_record_lens_id"];citedArticleFacets.forEach(function(k){if(!data[k]){delete AnalysisViews[k]}});this.state={simpleTitle:{pub_year:true},columns:this.storage.get("columns")||$attrs.columns||2,hideTextAnalysis:$attrs.hideTextAnalysis!==undefined?true:this.storage.get("hideTextAnalysis"),chartVersion:{},resultSize:window.searchAppResultSize,loadingFacet:{},loadedFacet:{},fields:AnalysisViews,showLogos:true,map:{markers:[],counts:{},tooltip:{}},embed:{key:"",title:"",width:600,height:600},chartData:{},ready:false,isJoined:(0,_urlQueryHelpers.getParam)("citesNpl")||(0,_urlQueryHelpers.getParam)("scholarlySearchId")||window.location.pathname.indexOf("/lens/scholar")===0,currentFacets:this.storage.get("currentFacets:"+window.location.pathname)||(0,_parseAnalysisString.parseAnalysisString)(DEFAULT_VIEWS),presets:this.storage.get("presets")||[],scaleType:"linear"};_.values(AnalysisViews).forEach(function(item){_this.state.chartData[item.facet]=[{key:item.facet,otherDocCount:item.hasExtra?101:null,values:_.map(data[item.facet],function(v,label){return{label:label,value:v.count,key:item.facet,displayName:v.displayName,text:(item.facet==="jurisdiction"?(0,_get3.default)(IsoCountries[label],"name")||label:label)+(" ("+(0,_humanizeNumber2.default)(v.count||0)+")")}}).sort(function(a,b){return b.value-a.value})}]});this.state.ready=true;this.$timeout(function(){_this.state.analysisReady=true;_this.state.analysisReveal=true},600);this.checkRoute()}_createClass(AnalysisController,[{key:"applyFilter",value:function applyFilter(){this.$rootScope.setSideTabsView("st-filters");_applyFilter.apply(undefined,arguments)}},{key:"introFieldSumPercentage",value:function introFieldSumPercentage(k,maxIndex){var _this2=this;var values=_.range(0,maxIndex).map(function(i){return _this2.introField(k,i,"value")});var sum=values.reduce(function(sum,value){return sum+value},0);var ratio=sum/this.state.resultSize;var percent=Math.floor(ratio*100);return percent}},{key:"introField",value:function introField(k,i){var field=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"label";var path="chartData["+k+"][0].values["+i+"]["+field+"]";var label=(0,_get3.default)(this,path);if(k==="jurisdiction"&&field==="label"){var country=(0,_get3.default)(IsoCountries[label],"name");return country||label}return label}},{key:"toggleFacet",value:function toggleFacet(k){var persistDropdown=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(this.state.currentFacets[k]){delete this.state.currentFacets[k]}else{this.state.currentFacets[k]=AnalysisViews[k].views[0]}this.persist();if(persistDropdown){this.showCustomiseDropdown()}}},{key:"removeAnalysisItem",value:function removeAnalysisItem(k){delete this.state.currentFacets[k];this.persist()}},{key:"showCustomiseDropdown",value:function showCustomiseDropdown(){var _this3=this;_.defer(function(){return _this3.$element.find(".dropdown-toggle").trigger("click")})}},{key:"toggleAllFacets",value:function toggleAllFacets(v){var _this4=this;_.keys(AnalysisViews).forEach(function(k){_this4.state.currentFacets[k]=_this4.state.currentFacets[k]||AnalysisViews[k].views[0]});this.persist()}},{key:"selectedFacetFilter",value:function selectedFacetFilter(k){return this.state.currentFacets[k]}},{key:"selectedFacetsCount",value:function selectedFacetsCount(){return _.values(this.state.currentFacets).filter(function(v){return v}).length}},{key:"iconClass",value:function iconClass(type){var classes={fa:true};classes["fa-"+ChartTypes[type].icon]=true;return classes}},{key:"onClickItem",value:function onClickItem(point){this.$rootScope.setSideTabsView("st-filters");var label=(0,_get3.default)(point,"data.label");var key=(0,_get3.default)(point,"data.key");var filterKey=AnalysisViews[key].filterName||key;_applyFilter(filterKey,label)}},{key:"onClickLineChartPoint",value:function onClickLineChartPoint(point){_applyFilter("dates","+pub_date:"+point.x+"0101-"+point.x+"1231")}},{key:"onClickCountry",value:function onClickCountry(name){this.$rootScope.setSideTabsView("st-filters");_applyFilter("j",IsoCountriesNameLookup[name])}},{key:"onClickClassification",value:function onClickClassification(point){var type=(0,_get3.default)(point,"data.key").substring("classification_".length).toUpperCase();var symbol=(0,_get3.default)(point,"data.label");if(type&&symbol){this.$rootScope.classificationViewer={type:"CPC",term:symbol}}}},{key:"fieldIsClassification",value:function fieldIsClassification(k){return k.indexOf("classification_")===0}},{key:"getIframeCode",value:function getIframeCode(facet){var k=this.state.currentFacets[facet];var embedTypeMap={line:"stock"};var type=embedTypeMap[k]||k;return iframeTemplate({path:window.location.origin+"/lens/search",facet:facet,type:type,title:this.state.embed.title,width:this.state.embed.width,height:this.state.embed.height,params:window.location.search.substr(1)})}},{key:"getTopFacets",value:function getTopFacets(k){var _this5=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;if(this.state.loadingFacet[k]){return}var path=window.location.pathname+"/facets";var search=(window.location.search||"?")+"&facets="+k+"&facet_size="+n;var url=path+search;this.state.loadingFacet[k]=true;this.$http({url:url}).then(function(response){var facet=(0,_get3.default)(response.data,"facets["+k+"]");_this5.state.chartData[k][0].values=_.keys(facet).map(function(key){return{key:key,label:facet[key].displayName||key,value:facet[key].count||0}}).sort(function(a,b){return b.value-a.value});_this5.state.loadingFacet[k]=false;_this5.state.loadedFacet[k]=true})}},{key:"barChartTooltip",value:function barChartTooltip(item){if(item.key&&item.key.indexOf("classification")===0){return"View "+item.label+" in Classification Viewer"}return"Filter by "+item.key+" = "+item.label}},{key:"getClassificationType",value:function getClassificationType(k){return k.split("_").pop().toUpperCase()}},{key:"toggleTextAnalysis",value:function toggleTextAnalysis(){this.state.hideTextAnalysis=!this.state.hideTextAnalysis;this.storage.set("hideTextAnalysis",this.state.hideTextAnalysis)}},{key:"buildShareString",value:function buildShareString(){var _this6=this;var views=_.keys(this.state.currentFacets).map(function(k){return k+":"+_this6.state.fields[k].currentView});return views.join(",")}},{key:"checkRoute",value:function checkRoute(){var _this7=this;var displayMap="";if(window.location.hash.length){displayMap=window.location.hash.slice(1);displayMap=displayMap.replace("/","")}if(displayMap.length){var map=(0,_parseAnalysisString.parseAnalysisString)(displayMap);if(!_.isEmpty(map)){this.state.currentFacets=map;_.keys(this.state.currentFacets).forEach(function(k){_this7.state.fields[k].currentView=AnalysisViews[k].views[0];_this7.state.currentFacets[k]=AnalysisViews[k].views[0]})}}}},{key:"shareUrl",value:function shareUrl(){var url=window.location.href.split("#")[0];return url+"#/"+this.buildShareString()}},{key:"getArticleLink",value:function getArticleLink(article){var id=(0,_getArticleId2.default)(article).replace(/\//g,"~2F");return"/lens/scholar/article/"+id+"/main"}},{key:"toggleColumns",value:function toggleColumns(){var _this8=this;this.state.columns=this.state.columns===2?1:2;this.storage.set("columns",this.state.columns);this.state.ready=false;this.$timeout(function(){_this8.$rootScope.$broadcast("REFRESH_ANALYSIS_VISUALISATIONS");_this8.state.ready=true},0)}},{key:"persist",value:function persist(){this.storage.set("currentFacets:"+window.location.pathname,this.state.currentFacets);window.location.hash=this.buildShareString()}},{key:"reset",value:function reset(){this.state.currentFacets=(0,_parseAnalysisString.parseAnalysisString)(DEFAULT_VIEWS);this.persist()}},{key:"onFilterYearRange",value:function onFilterYearRange(_ref){var _ref2=_slicedToArray(_ref,2),fromYear=_ref2[0],toYear=_ref2[1];this.$rootScope.setSideTabsView("st-filters");_applyFilter("dates","+pub_date:"+fromYear+"0101-"+toYear+"1231")}},{key:"deepAnalysis",value:function deepAnalysis(){var _this9=this;this.state.deepAnalysis={x:{field:"citedByPatentCount"},y:{field:"simpleFamilySize"},color:{field:"kindCode"},size:{field:"score"}};this.state.data=[];var search=(0,_urlQueryHelpers._updateSearchParams)("n",500);fetch("/lens/search?"+search+"&json=1").then(function(d){return d.json()}).then(function(res){console.log(res);_this9.state.data=res.result.hits;_this9.state.deepAnalysis.fields=_.keys(_this9.state.data[0]);_this9.renderChart()})}},{key:"switchSubAnalysis",value:function switchSubAnalysis(){var x=this.state.deepAnalysis.x.field;this.state.deepAnalysis.x={field:this.state.deepAnalysis.y.field};this.state.deepAnalysis.y={field:x};this.renderChart()}},{key:"renderChart",value:function renderChart(){var _this10=this;this.state.deepAnalysis.x.type=getFieldType(this.state.deepAnalysis.x.field);this.state.deepAnalysis.y.type=getFieldType(this.state.deepAnalysis.y.field);this.state.deepAnalysis.color.type=getFieldType(this.state.deepAnalysis.color.field);this.state.deepAnalysis.patentScatterSpec=null;this.$timeout(function(){_this10.state.deepAnalysis.patentScatterSpec=(0,_PatentScatterSpec2.default)({data:_this10.state.data,colourScheme:_this10.state.deepAnalysis.color.type==="quantitative"?"viridis":"category20c",width:Math.max($(".body-content").width()-200,800),scale:_this10.state.scaleType,x:_this10.state.deepAnalysis.x,y:_this10.state.deepAnalysis.y,color:_this10.state.deepAnalysis.color,size:{field:_this10.state.deepAnalysis.size.field},mark:_this10.state.deepAnalysis.mark||"circle"})})}},{key:"savePreset",value:function savePreset(){this.state.presets.push(this.state.deepAnalysis.x.field+":"+this.state.deepAnalysis.y.field+":"+this.state.deepAnalysis.color.field);this.storage.set("presets",this.state.presets)}},{key:"quantitativeFieldFilter",value:function quantitativeFieldFilter(k){return getFieldType(k)==="quantitative"}}]);return AnalysisController}();var getFieldType=function getFieldType(k){var quantitative=["familySize","simpleFamilySize","simpleFamilySize","citedByPatentCount","seqCount","score"];var temporal=["filingDate","publicationDate","earliestPriorityDate"];if(quantitative.includes(k)){return"quantitative"}else if(temporal.includes(k)){return"temporal"}else{return"nominal"}};var controller=_app2.default.controller("AnalysisController",AnalysisController);module.exports=controller},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(143));__export(__webpack_require__(150));__export(__webpack_require__(243));__export(__webpack_require__(244));__webpack_require__(355);__webpack_require__(356);__webpack_require__(357);__webpack_require__(358);__webpack_require__(359);exports.default="ui.router";var core=__webpack_require__(21);exports.core=core;__export(__webpack_require__(21))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(56));__export(__webpack_require__(220));__export(__webpack_require__(221));__export(__webpack_require__(148))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(147));__export(__webpack_require__(114))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(219));__export(__webpack_require__(95));__export(__webpack_require__(115))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(222));__export(__webpack_require__(144));__export(__webpack_require__(223));__export(__webpack_require__(224));__export(__webpack_require__(225));__export(__webpack_require__(226));__export(__webpack_require__(47))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var transition_1=__webpack_require__(113);var router_1=__webpack_require__(227);function addCoreResolvables(trans){trans.addResolvable({token:router_1.UIRouter,deps:[],resolveFn:function(){return trans.router},data:trans.router},"");trans.addResolvable({token:transition_1.Transition,deps:[],resolveFn:function(){return trans},data:trans},"");trans.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return trans},data:trans},"");trans.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return trans.params()},data:trans.params()},"");trans.entering().forEach(function(state){trans.addResolvable({token:"$state$",deps:[],resolveFn:function(){return state},data:state},state)})}exports.registerAddCoreResolvables=function(transitionService){return transitionService.onCreate({},addCoreResolvables)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=__webpack_require__(2);var coreservices_1=__webpack_require__(11);var targetState_1=__webpack_require__(47);var redirectToHook=function(trans){var redirect=trans.to().redirectTo;if(!redirect)return;var $state=trans.router.stateService;function handleResult(result){if(!result)return;if(result instanceof targetState_1.TargetState)return result;if(predicates_1.isString(result))return $state.target(result,trans.params(),trans.options());if(result["state"]||result["params"])return $state.target(result["state"]||trans.to(),result["params"]||trans.params(),trans.options())}if(predicates_1.isFunction(redirect)){return coreservices_1.services.$q.when(redirect(trans)).then(handleResult)}return handleResult(redirect)};exports.registerRedirectToHook=function(transitionService){return transitionService.onStart({to:function(state){return!!state.redirectTo}},redirectToHook)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function makeEnterExitRetainHook(hookName){return function(transition,state){var _state=state.$$state();var hookFn=_state[hookName];return hookFn(transition,state)}}var onExitHook=makeEnterExitRetainHook("onExit");exports.registerOnExitHook=function(transitionService){return transitionService.onExit({exiting:function(state){return!!state.onExit}},onExitHook)};var onRetainHook=makeEnterExitRetainHook("onRetain");exports.registerOnRetainHook=function(transitionService){return transitionService.onRetain({retained:function(state){return!!state.onRetain}},onRetainHook)};var onEnterHook=makeEnterExitRetainHook("onEnter");exports.registerOnEnterHook=function(transitionService){return transitionService.onEnter({entering:function(state){return!!state.onEnter}},onEnterHook)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var resolveContext_1=__webpack_require__(115);var hof_1=__webpack_require__(5);var eagerResolvePath=function(trans){return new resolveContext_1.ResolveContext(trans.treeChanges().to).resolvePath("EAGER",trans).then(common_1.noop)};exports.registerEagerResolvePath=function(transitionService){return transitionService.onStart({},eagerResolvePath,{priority:1e3})};var lazyResolveState=function(trans,state){return new resolveContext_1.ResolveContext(trans.treeChanges().to).subContext(state.$$state()).resolvePath("LAZY",trans).then(common_1.noop)};exports.registerLazyResolveState=function(transitionService){return transitionService.onEnter({entering:hof_1.val(true)},lazyResolveState,{priority:1e3})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var coreservices_1=__webpack_require__(11);var loadEnteringViews=function(transition){var $q=coreservices_1.services.$q;var enteringViews=transition.views("entering");if(!enteringViews.length)return;return $q.all(enteringViews.map(function(view){return $q.when(view.load())})).then(common_1.noop)};exports.registerLoadEnteringViews=function(transitionService){return transitionService.onFinish({},loadEnteringViews)};var activateViews=function(transition){var enteringViews=transition.views("entering");var exitingViews=transition.views("exiting");if(!enteringViews.length&&!exitingViews.length)return;var $view=transition.router.viewService;exitingViews.forEach(function(vc){return $view.deactivateViewConfig(vc)});enteringViews.forEach(function(vc){return $view.activateViewConfig(vc)});$view.sync()};exports.registerActivateViews=function(transitionService){return transitionService.onSuccess({},activateViews)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=__webpack_require__(1);var updateGlobalState=function(trans){var globals=trans.router.globals;var transitionSuccessful=function(){globals.successfulTransitions.enqueue(trans);globals.$current=trans.$to();globals.current=globals.$current.self;common_1.copy(trans.params(),globals.params)};var clearCurrentTransition=function(){if(globals.transition===trans)globals.transition=null};trans.onSuccess({},transitionSuccessful,{priority:1e4});trans.promise.then(clearCurrentTransition,clearCurrentTransition)};exports.registerUpdateGlobalState=function(transitionService){return transitionService.onCreate({},updateGlobalState)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var updateUrl=function(transition){var options=transition.options();var $state=transition.router.stateService;var $urlRouter=transition.router.urlRouter;if(options.source!=="url"&&options.location&&$state.$current.navigable){var urlOptions={replace:options.location==="replace"};$urlRouter.push($state.$current.navigable.url,$state.params,urlOptions)}$urlRouter.update(true)};exports.registerUpdateUrl=function(transitionService){return transitionService.onSuccess({},updateUrl,{priority:9999})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var trace_1=__webpack_require__(37);var rejectFactory_1=__webpack_require__(93);function ignoredHook(trans){var ignoredReason=trans._ignoredReason();if(!ignoredReason)return;trace_1.trace.traceTransitionIgnored(trans);var pending=trans.router.globals.transition;if(ignoredReason==="SameAsCurrent"&&pending){pending.abort()}return rejectFactory_1.Rejection.ignored().toPromise()}exports.registerIgnoredTransitionHook=function(transitionService){return transitionService.onBefore({},ignoredHook,{priority:-9999})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function invalidTransitionHook(trans){if(!trans.valid()){throw new Error(trans.error())}}exports.registerInvalidTransitionHook=function(transitionService){return transitionService.onBefore({},invalidTransitionHook,{priority:-1e4})}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(55));__export(__webpack_require__(218));__export(__webpack_require__(146));__export(__webpack_require__(93));__export(__webpack_require__(113));__export(__webpack_require__(94));__export(__webpack_require__(235));__export(__webpack_require__(149))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(116));__export(__webpack_require__(228));__export(__webpack_require__(229));__export(__webpack_require__(230));__export(__webpack_require__(233))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(231))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(349))},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(236));__export(__webpack_require__(237));__export(__webpack_require__(117));__export(__webpack_require__(238));__export(__webpack_require__(239));__export(__webpack_require__(240));__export(__webpack_require__(241));__export(__webpack_require__(242));__export(__webpack_require__(96));__export(__webpack_require__(350))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var browserLocationConfig_1=__webpack_require__(242);var hashLocationService_1=__webpack_require__(238);var utils_1=__webpack_require__(96);var pushStateLocationService_1=__webpack_require__(240);var memoryLocationService_1=__webpack_require__(239);var memoryLocationConfig_1=__webpack_require__(241);var injector_1=__webpack_require__(237);var q_1=__webpack_require__(236);var coreservices_1=__webpack_require__(11);function servicesPlugin(router){coreservices_1.services.$injector=injector_1.$injector;coreservices_1.services.$q=q_1.$q;return{name:"vanilla.services",$q:q_1.$q,$injector:injector_1.$injector,dispose:function(){return null}}}exports.servicesPlugin=servicesPlugin;exports.hashLocationPlugin=utils_1.locationPluginFactory("vanilla.hashBangLocation",false,hashLocationService_1.HashLocationService,browserLocationConfig_1.BrowserLocationConfig);exports.pushStateLocationPlugin=utils_1.locationPluginFactory("vanilla.pushStateLocation",true,pushStateLocationService_1.PushStateLocationService,browserLocationConfig_1.BrowserLocationConfig);exports.memoryLocationPlugin=utils_1.locationPluginFactory("vanilla.memoryLocation",false,memoryLocationService_1.MemoryLocationService,memoryLocationConfig_1.MemoryLocationConfig)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var UIRouterPluginBase=function(){function UIRouterPluginBase(){}UIRouterPluginBase.prototype.dispose=function(router){};return UIRouterPluginBase}();exports.UIRouterPluginBase=UIRouterPluginBase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=__webpack_require__(54);var core_1=__webpack_require__(21);var TemplateFactory=function(){function TemplateFactory(){var _this=this;this._useHttp=angular_1.ng.version.minor<3;this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector){_this.$templateRequest=$injector.has&&$injector.has("$templateRequest")&&$injector.get("$templateRequest");_this.$http=$http;_this.$templateCache=$templateCache;return _this}]}TemplateFactory.prototype.useHttpService=function(value){this._useHttp=value};TemplateFactory.prototype.fromConfig=function(config,params,context){var defaultTemplate="<ui-view></ui-view>";var asTemplate=function(result){return core_1.services.$q.when(result).then(function(str){return{template:str}})};var asComponent=function(result){return core_1.services.$q.when(result).then(function(str){return{component:str}})};return core_1.isDefined(config.template)?asTemplate(this.fromString(config.template,params)):core_1.isDefined(config.templateUrl)?asTemplate(this.fromUrl(config.templateUrl,params)):core_1.isDefined(config.templateProvider)?asTemplate(this.fromProvider(config.templateProvider,params,context)):core_1.isDefined(config.component)?asComponent(config.component):core_1.isDefined(config.componentProvider)?asComponent(this.fromComponentProvider(config.componentProvider,params,context)):asTemplate(defaultTemplate)};TemplateFactory.prototype.fromString=function(template,params){return core_1.isFunction(template)?template(params):template};TemplateFactory.prototype.fromUrl=function(url,params){if(core_1.isFunction(url))url=url(params);if(url==null)return null;if(this._useHttp){return this.$http.get(url,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})}return this.$templateRequest(url)};TemplateFactory.prototype.fromProvider=function(provider,params,context){var deps=core_1.services.$injector.annotate(provider);var providerFn=core_1.isArray(provider)?core_1.tail(provider):provider;var resolvable=new core_1.Resolvable("",providerFn,deps);return resolvable.get(context)};TemplateFactory.prototype.fromComponentProvider=function(provider,params,context){var deps=core_1.services.$injector.annotate(provider);var providerFn=core_1.isArray(provider)?core_1.tail(provider):provider;var resolvable=new core_1.Resolvable("",providerFn,deps);return resolvable.get(context)};TemplateFactory.prototype.makeComponentTemplate=function(uiView,context,component,bindings){bindings=bindings||{};var prefix=angular_1.ng.version.minor>=3?"::":"";var kebob=function(camelCase){var kebobed=core_1.kebobString(camelCase);return/^(x|data)-/.exec(kebobed)?"x-"+kebobed:kebobed};var attributeTpl=function(input){var name=input.name,type=input.type;var attrName=kebob(name);if(uiView.attr(attrName)&&!bindings[name])return attrName+"='"+uiView.attr(attrName)+"'";var resolveName=bindings[name]||name;if(type==="@")return attrName+"='{{"+prefix+"$resolve."+resolveName+"}}'";if(type==="&"){var res=context.getResolvable(resolveName);var fn=res&&res.data;var args=fn&&core_1.services.$injector.annotate(fn)||[];var arrayIdxStr=core_1.isArray(fn)?"["+(fn.length-1)+"]":"";return attrName+"='$resolve."+resolveName+arrayIdxStr+"("+args.join(",")+")'"}return attrName+"='"+prefix+"$resolve."+resolveName+"'"};var attrs=getComponentBindings(component).map(attributeTpl).join(" ");var kebobName=kebob(component);return"<"+kebobName+" "+attrs+"></"+kebobName+">"};return TemplateFactory}();exports.TemplateFactory=TemplateFactory;function getComponentBindings(name){var cmpDefs=core_1.services.$injector.get(name+"Directive");if(!cmpDefs||!cmpDefs.length)throw new Error("Unable to find component named '"+name+"'");return cmpDefs.map(getBindings).reduce(core_1.unnestR,[])}var getBindings=function(def){if(core_1.isObject(def.bindToController))return scopeBindings(def.bindToController);return scopeBindings(def.scope)};var scopeBindings=function(bindingsObj){return Object.keys(bindingsObj||{}).map(function(key){return[key,/^([=<@&])[?]?(.*)/.exec(bindingsObj[key])]}).filter(function(tuple){return core_1.isDefined(tuple)&&core_1.isArray(tuple[1])}).map(function(tuple){return{name:tuple[1][2]||tuple[0],type:tuple[1][1]}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=__webpack_require__(21);var services_1=__webpack_require__(143);exports.getStateHookBuilder=function(hookName){return function stateHookBuilder(state,parentFn){var hook=state[hookName];var pathname=hookName==="onExit"?"from":"to";function decoratedNg1Hook(trans,state){var resolveContext=new core_1.ResolveContext(trans.treeChanges(pathname));var locals=core_1.extend(services_1.getLocals(resolveContext),{$state$:state,$transition$:trans});return core_1.services.$injector.invoke(hook,this,locals)}return hook?decoratedNg1Hook:undefined}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=__webpack_require__(21);var Ng1LocationServices=function(){function Ng1LocationServices($locationProvider){this._urlListeners=[];this.$locationProvider=$locationProvider;var _lp=core_1.val($locationProvider);core_1.createProxyFunctions(_lp,this,_lp,["hashPrefix"])}Ng1LocationServices.prototype.dispose=function(){};Ng1LocationServices.prototype.onChange=function(callback){var _this=this;this._urlListeners.push(callback);return function(){return core_1.removeFrom(_this._urlListeners)(callback)}};Ng1LocationServices.prototype.html5Mode=function(){var html5Mode=this.$locationProvider.html5Mode();html5Mode=core_1.isObject(html5Mode)?html5Mode.enabled:html5Mode;return html5Mode&&this.$sniffer.history};Ng1LocationServices.prototype.url=function(newUrl,replace,state){if(replace===void 0){replace=false}if(newUrl)this.$location.url(newUrl);if(replace)this.$location.replace();if(state)this.$location.state(state);return this.$location.url()};Ng1LocationServices.prototype._runtimeServices=function($rootScope,$location,$sniffer,$browser){var _this=this;this.$location=$location;this.$sniffer=$sniffer;$rootScope.$on("$locationChangeSuccess",function(evt){return _this._urlListeners.forEach(function(fn){return fn(evt)})});var _loc=core_1.val($location);var _browser=core_1.val($browser);core_1.createProxyFunctions(_loc,this,_loc,["replace","path","search","hash"]);core_1.createProxyFunctions(_loc,this,_loc,["port","protocol","host"]);core_1.createProxyFunctions(_browser,this,_browser,["baseHref"])};Ng1LocationServices.monkeyPatchPathParameterType=function(router){var pathType=router.urlMatcherFactory.type("path");pathType.encode=function(val){return val!=null?val.toString().replace(/(~|\/)/g,function(m){return{"~":"~~","/":"~2F"}[m]}):val};pathType.decode=function(val){return val!=null?val.toString().replace(/(~~|~2F)/g,function(m){return{"~~":"~","~2F":"/"}[m]}):val}};return Ng1LocationServices}();exports.Ng1LocationServices=Ng1LocationServices},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var $stateParams;var $uiRouterGlobals;var $uiRouter;var $uiRouterProvider;var $trace;var $transitions;var $transitionsProvider;var $transition$;var $state;var $stateRegistry;var $stateRegistryProvider;var $uiViewScrollProvider;var $uiViewScroll;var $stateProvider;var $urlServiceProvider;var $urlService;var $urlRouterProvider;var $urlRouter;var $urlMatcherFactory;var $urlMatcherFactoryProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=__webpack_require__(54);var core_1=__webpack_require__(21);function parseStateRef(ref){var paramsOnly=ref.match(/^\s*({[^}]*})\s*$/),parsed;if(paramsOnly)ref="("+paramsOnly[1]+")";parsed=ref.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/);if(!parsed||parsed.length!==4)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1]||null,paramExpr:parsed[3]||null}}function stateContext(el){var $uiView=el.parent().inheritedData("$uiView");var path=core_1.parse("$cfg.path")($uiView);return path?core_1.tail(path).state.name:undefined}function processedDef($state,$element,def){var uiState=def.uiState||$state.current.name;var uiStateOpts=core_1.extend(defaultOpts($element,$state),def.uiStateOpts||{});var href=$state.href(uiState,def.uiStateParams,uiStateOpts);return{uiState:uiState,uiStateParams:def.uiStateParams,uiStateOpts:uiStateOpts,href:href}}function getTypeInfo(el){var isSvg=Object.prototype.toString.call(el.prop("href"))==="[object SVGAnimatedString]";var isForm=el[0].nodeName==="FORM";return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:el.prop("tagName").toUpperCase()==="A",clickable:!isForm}}function clickHook(el,$state,$timeout,type,getDef){return function(e){var button=e.which||e.button,target=getDef();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout(function(){$state.go(target.uiState,target.uiStateParams,target.uiStateOpts)});e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){if(ignorePreventDefaultCount--<=0)$timeout.cancel(transition)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:true,source:"sref"}}function bindEvents(element,scope,hookFn,uiStateOpts){var events;if(uiStateOpts){events=uiStateOpts.events}if(!core_1.isArray(events)){events=["click"]}var on=element.on?"on":"bind";for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];element[on](event_1,hookFn)}scope.$on("$destroy",function(){var off=element.off?"off":"unbind";for(var _i=0,events_2=events;_i<events_2.length;_i++){var event_2=events_2[_i];element[off](event_2,hookFn)}})}var uiSref;uiSref=["$uiRouter","$timeout",function $StateRefDirective($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var type=getTypeInfo(element);var active=uiSrefActive[1]||uiSrefActive[0];var unlinkInfoFn=null;var hookFn;var rawDef={};var getDef=function(){return processedDef($state,element,rawDef)};var ref=parseStateRef(attrs.uiSref);rawDef.uiState=ref.state;rawDef.uiStateOpts=attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{};function update(){var def=getDef();if(unlinkInfoFn)unlinkInfoFn();if(active)unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams);if(def.href!=null)attrs.$set(type.attr,def.href)}if(ref.paramExpr){scope.$watch(ref.paramExpr,function(val){rawDef.uiStateParams=core_1.extend({},val);update()},true);rawDef.uiStateParams=core_1.extend({},scope.$eval(ref.paramExpr))}update();scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update));scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update));if(!type.clickable)return;hookFn=clickHook(element,$state,$timeout,type,getDef);bindEvents(element,scope,hookFn,rawDef.uiStateOpts)}}}];var uiState;uiState=["$uiRouter","$timeout",function $StateRefDynamicDirective($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var type=getTypeInfo(element);var active=uiSrefActive[1]||uiSrefActive[0];var unlinkInfoFn=null;var hookFn;var rawDef={};var getDef=function(){return processedDef($state,element,rawDef)};var inputAttrs=["uiState","uiStateParams","uiStateOpts"];var watchDeregFns=inputAttrs.reduce(function(acc,attr){return acc[attr]=core_1.noop,acc},{});function update(){var def=getDef();if(unlinkInfoFn)unlinkInfoFn();if(active)unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams);if(def.href!=null)attrs.$set(type.attr,def.href)}inputAttrs.forEach(function(field){rawDef[field]=attrs[field]?scope.$eval(attrs[field]):null;attrs.$observe(field,function(expr){watchDeregFns[field]();watchDeregFns[field]=scope.$watch(expr,function(newval){rawDef[field]=newval;update()},true)})});update();scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update));scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update));if(!type.clickable)return;hookFn=clickHook(element,$state,$timeout,type,getDef);bindEvents(element,scope,hookFn,rawDef.uiStateOpts)}}}];var uiSrefActive;uiSrefActive=["$state","$stateParams","$interpolate","$uiRouter",function $StateRefActiveDirective($state,$stateParams,$interpolate,$uiRouter){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var states=[],activeEqClass,uiSrefActive;activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",false)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",false)($scope);if(core_1.isObject(uiSrefActive)){core_1.forEach(uiSrefActive,function(stateOrName,activeClass){if(core_1.isString(stateOrName)){var ref=parseStateRef(stateOrName);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}})}this.$$addStateInfo=function(newState,newParams){if(core_1.isObject(uiSrefActive)&&states.length>0){return}var deregister=addState(newState,newParams,uiSrefActive);update();return deregister};function updateAfterTransition(trans){trans.promise.then(update,core_1.noop)}$scope.$on("$stateChangeSuccess",update);$scope.$on("$destroy",$uiRouter.transitionService.onStart({},updateAfterTransition));if($uiRouter.globals.transition){updateAfterTransition($uiRouter.globals.transition)}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element));var stateInfo={state:state||{name:stateName},params:stateParams,activeClass:activeClass};states.push(stateInfo);return function removeState(){core_1.removeFrom(states)(stateInfo)}}function update(){var splitClasses=function(str){return str.split(/\s/).filter(core_1.identity)};var getClasses=function(stateList){return stateList.map(function(x){return x.activeClass}).map(splitClasses).reduce(core_1.unnestR,[])};var allClasses=getClasses(states).concat(splitClasses(activeEqClass)).reduce(core_1.uniqR,[]);var fuzzyClasses=getClasses(states.filter(function(x){return $state.includes(x.state.name,x.params)}));var exactlyMatchesAny=!!states.filter(function(x){return $state.is(x.state.name,x.params)}).length;var exactClasses=exactlyMatchesAny?splitClasses(activeEqClass):[];var addClasses=fuzzyClasses.concat(exactClasses).reduce(core_1.uniqR,[]);var removeClasses=allClasses.filter(function(cls){return!core_1.inArray(addClasses,cls)});$scope.$evalAsync(function(){addClasses.forEach(function(className){return $element.addClass(className)});removeClasses.forEach(function(className){return $element.removeClass(className)})})}update()}]}}];angular_1.ng.module("ui.router.state").directive("uiSref",uiSref).directive("uiSrefActive",uiSrefActive).directive("uiSrefActiveEq",uiSrefActive).directive("uiState",uiState)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=__webpack_require__(54);$IsStateFilter.$inject=["$state"];function $IsStateFilter($state){var isFilter=function(state,params,options){return $state.is(state,params,options)};isFilter.$stateful=true;return isFilter}exports.$IsStateFilter=$IsStateFilter;$IncludedByStateFilter.$inject=["$state"];function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};includesFilter.$stateful=true;return includesFilter}exports.$IncludedByStateFilter=$IncludedByStateFilter;angular_1.ng.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=__webpack_require__(54);var angular_2=__webpack_require__(217);var core_1=__webpack_require__(21);var views_1=__webpack_require__(150);var services_1=__webpack_require__(143);exports.uiView=["$view","$animate","$uiViewScroll","$interpolate","$q",function $ViewDirective($view,$animate,$uiViewScroll,$interpolate,$q){function getRenderer(attrs,scope){return{enter:function(element,target,cb){if(angular_1.ng.version.minor>2){$animate.enter(element,null,target).then(cb)}else{$animate.enter(element,null,target,cb)}},leave:function(element,cb){if(angular_1.ng.version.minor>2){$animate.leave(element).then(cb)}else{$animate.leave(element,cb)}}}}function configsEqual(config1,config2){return config1===config2}var rootData={$cfg:{viewDecl:{$context:$view._pluginapi._rootViewContext()}},$uiView:{}};var directive={count:0,restrict:"ECA",terminal:true,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,unregister,onloadExp=attrs["onload"]||"",autoScrollExp=attrs["autoscroll"],renderer=getRenderer(attrs,scope),viewConfig=undefined,inherited=$element.inheritedData("$uiView")||rootData,name=$interpolate(attrs["uiView"]||attrs["name"]||"")(scope)||"$default";var activeUIView={$type:"ng1",id:directive.count++,name:name,fqn:inherited.$uiView.fqn?inherited.$uiView.fqn+"."+name:name,config:null,configUpdated:configUpdatedCallback,get creationContext(){var fromParentTagConfig=core_1.parse("$cfg.viewDecl.$context")(inherited);var fromParentTag=core_1.parse("$uiView.creationContext")(inherited);return fromParentTagConfig||fromParentTag}};core_1.trace.traceUIViewEvent("Linking",activeUIView);function configUpdatedCallback(config){if(config&&!(config instanceof views_1.Ng1ViewConfig))return;if(configsEqual(viewConfig,config))return;core_1.trace.traceUIViewConfigUpdated(activeUIView,config&&config.viewDecl&&config.viewDecl.$context);viewConfig=config;updateView(config)}$element.data("$uiView",{$uiView:activeUIView});updateView();unregister=$view.registerUIView(activeUIView);scope.$on("$destroy",function(){core_1.trace.traceUIViewEvent("Destroying/Unregistering",activeUIView);unregister()});function cleanupLastView(){if(previousEl){core_1.trace.traceUIViewEvent("Removing (previous) el",previousEl.data("$uiView"));previousEl.remove();previousEl=null}if(currentScope){core_1.trace.traceUIViewEvent("Destroying scope",activeUIView);currentScope.$destroy();currentScope=null}if(currentEl){var _viewData_1=currentEl.data("$uiViewAnim");core_1.trace.traceUIViewEvent("Animate out",_viewData_1);renderer.leave(currentEl,function(){_viewData_1.$$animLeave.resolve();previousEl=null});previousEl=currentEl;currentEl=null}}function updateView(config){var newScope=scope.$new();var animEnter=$q.defer(),animLeave=$q.defer();var $uiViewData={$cfg:config,$uiView:activeUIView};var $uiViewAnim={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};newScope.$emit("$viewContentLoading",name);var cloned=$transclude(newScope,function(clone){clone.data("$uiViewAnim",$uiViewAnim);clone.data("$uiView",$uiViewData);renderer.enter(clone,$element,function onUIViewEnter(){animEnter.resolve();if(currentScope)currentScope.$emit("$viewContentAnimationEnded");if(core_1.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp)){$uiViewScroll(clone)}});cleanupLastView()});currentEl=cloned;currentScope=newScope;currentScope.$emit("$viewContentLoaded",config||viewConfig);currentScope.$eval(onloadExp)}}}};return directive}];$ViewDirectiveFill.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];function $ViewDirectiveFill($compile,$controller,$transitions,$view,$q,$timeout){var getControllerAs=core_1.parse("viewDecl.controllerAs");var getResolveAs=core_1.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();tElement.empty();return function(scope,$element){var data=$element.data("$uiView");if(!data){$element.html(initial);$compile($element.contents())(scope);return}var cfg=data.$cfg||{viewDecl:{},getTemplate:angular_2.noop};var resolveCtx=cfg.path&&new core_1.ResolveContext(cfg.path);$element.html(cfg.getTemplate($element,resolveCtx)||initial);core_1.trace.traceUIViewFill(data.$uiView,$element.html());var link=$compile($element.contents());var controller=cfg.controller;var controllerAs=getControllerAs(cfg);var resolveAs=getResolveAs(cfg);var locals=resolveCtx&&services_1.getLocals(resolveCtx);scope[resolveAs]=locals;if(controller){var controllerInstance=$controller(controller,core_1.extend({},locals,{$scope:scope,$element:$element}));if(controllerAs){scope[controllerAs]=controllerInstance;scope[controllerAs][resolveAs]=locals}$element.data("$ngControllerController",controllerInstance);$element.children().data("$ngControllerController",controllerInstance);registerControllerCallbacks($q,$transitions,controllerInstance,scope,cfg)}if(core_1.isString(cfg.viewDecl.component)){var cmp_1=cfg.viewDecl.component;var kebobName=core_1.kebobString(cmp_1);var tagRegexp_1=new RegExp("^(x-|data-)?"+kebobName+"$","i");var getComponentController=function(){var directiveEl=[].slice.call($element[0].children).filter(function(el){return el&&el.tagName&&tagRegexp_1.exec(el.tagName)});return directiveEl&&angular_1.ng.element(directiveEl).data("$"+cmp_1+"Controller")};var deregisterWatch_1=scope.$watch(getComponentController,function(ctrlInstance){if(!ctrlInstance)return;registerControllerCallbacks($q,$transitions,ctrlInstance,scope,cfg);deregisterWatch_1()})}link(scope)}}}}var hasComponentImpl=typeof angular_1.ng.module("ui.router")["component"]==="function";var _uiCanExitId=0;function registerControllerCallbacks($q,$transitions,controllerInstance,$scope,cfg){if(core_1.isFunction(controllerInstance.$onInit)&&!(cfg.viewDecl.component&&hasComponentImpl)){controllerInstance.$onInit()}var viewState=core_1.tail(cfg.path).state.self;var hookOptions={bind:controllerInstance};if(core_1.isFunction(controllerInstance.uiOnParamsChanged)){var resolveContext=new core_1.ResolveContext(cfg.path);var viewCreationTrans_1=resolveContext.getResolvable("$transition$").data;var paramsUpdated=function($transition$){if($transition$===viewCreationTrans_1||$transition$.exiting().indexOf(viewState)!==-1)return;var toParams=$transition$.params("to");var fromParams=$transition$.params("from");var toSchema=$transition$.treeChanges().to.map(function(node){return node.paramSchema}).reduce(core_1.unnestR,[]);var fromSchema=$transition$.treeChanges().from.map(function(node){return node.paramSchema}).reduce(core_1.unnestR,[]);var changedToParams=toSchema.filter(function(param){var idx=fromSchema.indexOf(param);return idx===-1||!fromSchema[idx].type.equals(toParams[param.id],fromParams[param.id])});if(changedToParams.length){var changedKeys_1=changedToParams.map(function(x){return x.id});var newValues=core_1.filter(toParams,function(val,key){return changedKeys_1.indexOf(key)!==-1});controllerInstance.uiOnParamsChanged(newValues,$transition$)}};$scope.$on("$destroy",$transitions.onSuccess({},paramsUpdated,hookOptions))}if(core_1.isFunction(controllerInstance.uiCanExit)){var id_1=_uiCanExitId++;var cacheProp_1="_uiCanExitIds";var prevTruthyAnswer_1=function(trans){return!!trans&&(trans[cacheProp_1]&&trans[cacheProp_1][id_1]===true||prevTruthyAnswer_1(trans.redirectedFrom()))};var wrappedHook=function(trans){var promise,ids=trans[cacheProp_1]=trans[cacheProp_1]||{};if(!prevTruthyAnswer_1(trans)){promise=$q.when(controllerInstance.uiCanExit(trans));promise.then(function(val){return ids[id_1]=val!==false})}return promise};var criteria={exiting:viewState.name};$scope.$on("$destroy",$transitions.onBefore(criteria,wrappedHook,hookOptions))}}angular_1.ng.module("ui.router.state").directive("uiView",exports.uiView);angular_1.ng.module("ui.router.state").directive("uiView",$ViewDirectiveFill)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=__webpack_require__(54);function $ViewScrollProvider(){var useAnchorScroll=false;this.useAnchorScroll=function(){useAnchorScroll=true};this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){if(useAnchorScroll){return $anchorScroll}return function($element){return $timeout(function(){$element[0].scrollIntoView()},0,false)}}]}angular_1.ng.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider)},function(module,exports,__webpack_require__){__webpack_require__(361);module.exports="ngResource"},function(module,exports){(function(window,angular){"use strict";var $resourceMinErr=angular.$$minErr("$resource");var MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function isValidDottedPath(path){return path!=null&&path!==""&&path!=="hasOwnProperty"&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path)){throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path)}var keys=path.split(".");for(var i=0,ii=keys.length;i<ii&&angular.isDefined(obj);i++){var key=keys[i];obj=obj!==null?obj[key]:undefined}return obj}function shallowClearAndCopy(src,dst){dst=dst||{};angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src){if(src.hasOwnProperty(key)&&!(key.charAt(0)==="$"&&key.charAt(1)==="$")){dst[key]=src[key]}}return dst}angular.module("ngResource",["ng"]).info({angularVersion:"1.7.0"}).provider("$resource",function ResourceProvider(){var PROTOCOL_AND_IPV6_REGEX=/^https?:\/\/\[[^\]]*][^/]*/;var provider=this;this.defaults={stripTrailingSlashes:true,cancellable:false,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},delete:{method:"DELETE"}}};this.$get=["$http","$log","$q","$timeout",function($http,$log,$q,$timeout){var noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isArray=angular.isArray,isDefined=angular.isDefined,isFunction=angular.isFunction,isNumber=angular.isNumber,encodeUriQuery=angular.$$encodeUriQuery,encodeUriSegment=angular.$$encodeUriSegment;function Route(template,defaults){this.template=template;this.defaults=extend({},provider.defaults,defaults);this.urlParams={}}Route.prototype={setUrlParams:function(config,params,actionUrl){var self=this,url=actionUrl||self.template,val,encodedVal,protocolAndIpv6="";var urlParams=self.urlParams=Object.create(null);forEach(url.split(/\W/),function(param){if(param==="hasOwnProperty"){throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.")}if(!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)){urlParams[param]={isQueryParamValue:new RegExp("\\?.*=:"+param+"(?:\\W|$)").test(url)}}});url=url.replace(/\\:/g,":");url=url.replace(PROTOCOL_AND_IPV6_REGEX,function(match){protocolAndIpv6=match;return""});params=params||{};forEach(self.urlParams,function(paramInfo,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam];if(isDefined(val)&&val!==null){if(paramInfo.isQueryParamValue){encodedVal=encodeUriQuery(val,true)}else{encodedVal=encodeUriSegment(val)}url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})}else{url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){if(tail.charAt(0)==="/"){return tail}else{return leadingSlashes+tail}})}});if(self.defaults.stripTrailingSlashes){url=url.replace(/\/+$/,"")||"/"}url=url.replace(/\/\.(?=\w+($|\?))/,".");config.url=protocolAndIpv6+url.replace(/\/(\\|%5C)\./,"/.");forEach(params,function(value,key){if(!self.urlParams[key]){config.params=config.params||{};config.params[key]=value}})}};function resourceFactory(url,paramDefaults,actions,options){var route=new Route(url,options);actions=extend({},provider.defaults.actions,actions);function extractParams(data,actionParams){var ids={};actionParams=extend({},paramDefaults,actionParams);forEach(actionParams,function(value,key){if(isFunction(value)){value=value(data)}ids[key]=value&&value.charAt&&value.charAt(0)==="@"?lookupDottedPath(data,value.substr(1)):value});return ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}Resource.prototype.toJSON=function(){var data=extend({},this);delete data.$promise;delete data.$resolved;delete data.$cancelRequest;return data};forEach(actions,function(action,name){var hasBody=action.hasBody===true||action.hasBody!==false&&/^(POST|PUT|PATCH)$/i.test(action.method);var numericTimeout=action.timeout;var cancellable=isDefined(action.cancellable)?action.cancellable:route.defaults.cancellable;if(numericTimeout&&!isNumber(numericTimeout)){$log.debug("ngResource:\n"+"  Only numeric values are allowed as `timeout`.\n"+"  Promises are not supported in $resource, because the same value would "+"be used for multiple requests. If you are looking for a way to cancel "+"requests, you should use the `cancellable` option.");delete action.timeout;numericTimeout=null}Resource[name]=function(a1,a2,a3,a4){var params={},data,onSuccess,onError;switch(arguments.length){case 4:onError=a4;onSuccess=a3;case 3:case 2:if(isFunction(a2)){if(isFunction(a1)){onSuccess=a1;onError=a2;break}onSuccess=a2;onError=a3}else{params=a1;data=a2;onSuccess=a3;break}case 1:if(isFunction(a1))onSuccess=a1;else if(hasBody)data=a1;else params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource;var value=isInstanceCall?data:action.isArray?[]:new Resource(data);var httpConfig={};var requestInterceptor=action.interceptor&&action.interceptor.request||undefined;var requestErrorInterceptor=action.interceptor&&action.interceptor.requestError||undefined;var responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor;var responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||$q.reject;var successCallback=onSuccess?function(val){onSuccess(val,response.headers,response.status,response.statusText)}:undefined;var errorCallback=onError||undefined;var timeoutDeferred;var numericTimeoutPromise;var response;forEach(action,function(value,key){switch(key){default:httpConfig[key]=copy(value);break;case"params":case"isArray":case"interceptor":case"cancellable":break}});if(!isInstanceCall&&cancellable){timeoutDeferred=$q.defer();httpConfig.timeout=timeoutDeferred.promise;if(numericTimeout){numericTimeoutPromise=$timeout(timeoutDeferred.resolve,numericTimeout)}}if(hasBody)httpConfig.data=data;route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$q.resolve(httpConfig).then(requestInterceptor).catch(requestErrorInterceptor).then($http);promise=promise.then(function(resp){var data=resp.data;if(data){if(isArray(data)!==!!action.isArray){throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to "+"contain an {1} but got an {2} (Request: {3} {4})",name,action.isArray?"array":"object",isArray(data)?"array":"object",httpConfig.method,httpConfig.url)}if(action.isArray){value.length=0;forEach(data,function(item){if(typeof item==="object"){value.push(new Resource(item))}else{value.push(item)}})}else{var promise=value.$promise;shallowClearAndCopy(data,value);value.$promise=promise}}resp.resource=value;response=resp;return responseInterceptor(resp)},function(rejectionOrResponse){rejectionOrResponse.resource=value;response=rejectionOrResponse;return responseErrorInterceptor(rejectionOrResponse)});promise=promise["finally"](function(){value.$resolved=true;if(!isInstanceCall&&cancellable){value.$cancelRequest=noop;$timeout.cancel(numericTimeoutPromise);timeoutDeferred=numericTimeoutPromise=httpConfig.timeout=null}});promise.then(successCallback,errorCallback);if(!isInstanceCall){value.$promise=promise;value.$resolved=false;if(cancellable)value.$cancelRequest=cancelRequest;return value}return promise;function cancelRequest(value){promise.catch(noop);if(timeoutDeferred!==null){timeoutDeferred.resolve(value)}}};Resource.prototype["$"+name]=function(params,success,error){if(isFunction(params)){error=success;success=params;params={}}var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}});return Resource}return resourceFactory}]})})(window,window.angular)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _urlQueryHelpers=__webpack_require__(18);exports.default=function(){if(window.innerWidth<900){return}var path=window.location.pathname;var v=(0,_urlQueryHelpers.getParam)("v");var SkipButton={text:"Skip Tour",className:"anno-btn-low-importance",click:function click(anno,evt){anno.hide()}};var onShow=function onShow(){$("body").toggleClass("search-tour-filter-step-active",true)};var onHide=function onHide(){$("body").toggleClass("search-tour-filter-step-active",false)};var steps=[{target:"#side-tabs li:eq(0)",position:"right",className:"anno-width-400",content:"\n            <h3>We've made some changes!</h3>\n            <p>Feel free to skip this tour if you're not interested. You can always launch it again from the Support Menu on pages that a feature tour is relevant.</p>\n        ",buttons:[SkipButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:"#side-tabs",position:"right",content:"Filters, collections and other tools are now organised into tabs, and can be collapsed when you're not using them.",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:".sidebar",position:"right",className:"anno-width-400",content:"\n            <p>The filter pane shows the top faceted values for various patent and scholarly metadata. Explore the values available by expanding or collapsing relevant selections. Click a value to restrict your results to only documents matching that filter. Click a second time to exclude values.</p>\n\n            <p>The flags section additionally contains high level filters like “Is Open Access” or “Has Full Text”</p>\n        ",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:".search-bar",position:"center-bottom",className:"anno-width-400",content:"\n            <p>The search bar contains your query. This is optional, but usually you start by typing a keyword in here.</p>\n            <p>Click the question mark icon on the right to get search tips.</p>\n        ",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:".query-details-container",position:"bottom",content:"The query details pane displays a summary of your search, filters and results. You can remove unwanted filters here.",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}];if($(".preview-panel:visible").length){steps=steps.concat([{target:".preview-panel",position:"left",content:"The preview sidebar displays a minimal analysis of the key facets of your search. Clicking items in the analysis preview will add filters.",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:".div-table-results-row:eq(1)",position:"bottom",content:"This is a "+(path.indexOf("/lens/search")>=0?"Patent":"Scholarly Work")+". Try clicking the arrow on the left to expand the preview.",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}])}var anno=new window.Anno(steps);anno.show()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _urlQueryHelpers=__webpack_require__(18);var onShow=function onShow(){$("body").toggleClass("search-tour-filter-step-active",true)};var onHide=function onHide(){$("body").toggleClass("search-tour-filter-step-active",false)};exports.default=function(){if(window.innerWidth<900){return}var path=window.location.pathname;var type=(0,_urlQueryHelpers.getParam)("type");var SkipButton={text:"Skip Tour",className:"anno-btn-low-importance",click:function click(anno,evt){anno.hide()}};var steps=[{target:".r-side-panel",position:"right",content:"\n            <h4>We've made some changes!</h4>\n            <p>Feel free to skip this tour if you're not interested. You can always launch it again from the Support Menu on pages that a feature tour is relevant.</p>\n        ",buttons:[SkipButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}];if($(".boolean-editor:visible").length){steps=steps.concat([{target:".boolean-editor-textarea-wrap",position:"top",content:"This is an editable text area for preparing complex boolean queries. Suggestions will appear as you type.",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:".preview-panel",position:"left",content:"This pane contains tips, examples and more info about the fields. Click a field to add it to your query",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}])}else{steps=steps.concat([{target:".new-search-clauses",position:"top",className:"anno-width-400",content:"Begin crafting your query here. Choose a field and enter a term. Click the plus button to add another term.",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide},{target:".preview-panel",position:"left",content:"This pane contains tips, examples and more info about the fields. Click a field to add it to your query",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}]);if(type==="SCHOLAR"){steps=steps.concat([{target:".new-search-scholar-filters",position:"top",content:"Apply aditional filters if you'd like to further limit your results",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}])}else{steps=steps.concat([{target:".new-search-patent-filters",position:"top",className:"anno-width-400",content:"Apply aditional filters if you'd like to further limit your results",buttons:[SkipButton,window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}])}steps=steps.concat([{target:".new-search-submit-btn",position:"top",content:"Hit the submit button when you're done to run your search.",buttons:[window.AnnoButton.BackButton,window.Anno.NextButton],onShow:onShow,onHide:onHide}])}var anno=new window.Anno(steps);anno.show()}},function(module,exports,__webpack_require__){"use strict";module.exports=[{name:"about-collections",content:__webpack_require__(365)},{name:"about-notes",content:__webpack_require__(366)},{name:"add-to-collection",content:__webpack_require__(245)},{name:"analysis-embed-form",content:__webpack_require__(367)},{name:"analysis-intro",content:__webpack_require__(368)},{name:"analysis-selector-minimal",content:__webpack_require__(369)},{name:"analysis-selector",content:__webpack_require__(370)},{name:"analysis-wizard",content:__webpack_require__(371)},{name:"article-collections",content:__webpack_require__(372)},{name:"article-index",content:__webpack_require__(373)},{name:"article-item-citations-citing",content:__webpack_require__(374)},{name:"article-item-citations-index",content:__webpack_require__(375)},{name:"article-item-citations-list",content:__webpack_require__(376)},{name:"article-item-meta",content:__webpack_require__(377)},{name:"article-item-patent-citations-analysis",content:__webpack_require__(378)},{name:"article-item-patent-citations-list",content:__webpack_require__(379)},{name:"article-item-patent-citations",content:__webpack_require__(380)},{name:"article-list-item",content:__webpack_require__(381)},{name:"article-nav",content:__webpack_require__(382)},{name:"article-recommended",content:__webpack_require__(383)},{name:"article-scatter-config",content:__webpack_require__(384)},{name:"article-sidebar",content:__webpack_require__(385)},{name:"article-view-item",content:__webpack_require__(386)},{name:"boolean-editor-page",content:__webpack_require__(387)},{name:"breadcrumbs",content:__webpack_require__(246)},{name:"citation-string-toggle",content:__webpack_require__(388)},{name:"classification-viewer-explorer",content:__webpack_require__(247)},{name:"classification-viewer-item",content:__webpack_require__(248)},{name:"classification-viewer",content:__webpack_require__(249)},{name:"collection-controls",content:__webpack_require__(250)},{name:"collection-list-item",content:__webpack_require__(251)},{name:"collection-list",content:__webpack_require__(252)},{name:"collection-row-item",content:__webpack_require__(389)},{name:"collection-search-pagination",content:__webpack_require__(390)},{name:"deep-analysis-config",content:__webpack_require__(391)},{name:"deep-analysis-item-content",content:__webpack_require__(392)},{name:"deep-analysis-item-title",content:__webpack_require__(393)},{name:"deep-analysis-details",content:__webpack_require__(394)},{name:"delete-collection",content:__webpack_require__(395)},{name:"export-collection",content:__webpack_require__(396)},{name:"export-progress",content:__webpack_require__(253)},{name:"export-scholar-search",content:__webpack_require__(397)},{name:"history",content:__webpack_require__(254)},{name:"icon-loader-hoz-bar-chart",content:__webpack_require__(398)},{name:"icon-loader-line-chart",content:__webpack_require__(399)},{name:"icon-loader-network-chart",content:__webpack_require__(400)},{name:"icon-loader-tools",content:__webpack_require__(401)},{name:"icon-loader-vert-bar-chart",content:__webpack_require__(402)},{name:"import-collection",content:__webpack_require__(403)},{name:"inline-notes",content:__webpack_require__(255)},{name:"institution-details",content:__webpack_require__(256)},{name:"landing-update-notice",content:__webpack_require__(257)},{name:"landing",content:__webpack_require__(404)},{name:"list-notes",content:__webpack_require__(258)},{name:"locale-selector",content:__webpack_require__(259)},{name:"looks-like-id",content:__webpack_require__(405)},{name:"methodology-modal",content:__webpack_require__(406)},{name:"modal",content:__webpack_require__(260)},{name:"modify-collection-buttons",content:__webpack_require__(407)},{name:"nav",content:__webpack_require__(408)},{name:"new-search",content:__webpack_require__(409)},{name:"note-explorer",content:__webpack_require__(410)},{name:"open-access-icon",content:__webpack_require__(411)},{name:"patent-analysis-preview",content:__webpack_require__(261)},{name:"patent-analysis-view",content:__webpack_require__(412)},{name:"patent-citation-item",content:__webpack_require__(413)},{name:"patent-scatter-config",content:__webpack_require__(414)},{name:"patent-search-messages",content:__webpack_require__(415)},{name:"patent-search-tabs",content:__webpack_require__(416)},{name:"preview-sidebar-loading",content:__webpack_require__(417)},{name:"publish-collection",content:__webpack_require__(418)},{name:"query",content:__webpack_require__(419)},{name:"registration-widget",content:__webpack_require__(420)},{name:"release-notes-modal",content:__webpack_require__(421)},{name:"sample-bar-chart",content:__webpack_require__(422)},{name:"save-query-modal",content:__webpack_require__(423)},{name:"scholar-analysis-preview",content:__webpack_require__(424)},{name:"scholar-analysis-selector",content:__webpack_require__(262)},{name:"scholar-analysis",content:__webpack_require__(425)},{name:"scholar-choose-more-explorer",content:__webpack_require__(426)},{name:"scholar-error",content:__webpack_require__(427)},{name:"scholar-index",content:__webpack_require__(428)},{name:"scholar-metrics",content:__webpack_require__(429)},{name:"scholar-notes",content:__webpack_require__(430)},{name:"scholar-query-details",content:__webpack_require__(431)},{name:"scholar-results-common",content:__webpack_require__(432)},{name:"scholar-results-heading",content:__webpack_require__(433)},{name:"scholar-results-list",content:__webpack_require__(434)},{name:"scholar-results-pagination",content:__webpack_require__(435)},{name:"scholar-search-date-filter",content:__webpack_require__(436)},{name:"scholar-search-facet",content:__webpack_require__(437)},{name:"scholar-search-sidebar",content:__webpack_require__(438)},{name:"scholar-search-tabs",content:__webpack_require__(439)},{name:"scholar-structured-search",content:__webpack_require__(440)},{name:"scholar-toolbar",content:__webpack_require__(441)},{name:"search-orcid-explorer",content:__webpack_require__(442)},{name:"search-tips-content",content:__webpack_require__(443)},{name:"search-tips",content:__webpack_require__(263)},{name:"side-tabs",content:__webpack_require__(264)},{name:"sidebar-content",content:__webpack_require__(265)},{name:"structured-search-sidebar",content:__webpack_require__(444)},{name:"structured-search",content:__webpack_require__(445)},{name:"suggest-logo",content:__webpack_require__(446)},{name:"user-settings",content:__webpack_require__(266)},{name:"version-check",content:__webpack_require__(267)},{name:"share-modal",content:__webpack_require__(447)}]},function(module,exports){module.exports='<div class="panel panel-alert panel-info">\n    <div class="panel-heading">\n        <em class="fa fa-info-circle"></em> {{::\'user.collections.none\' | message}}\n    </div>\n    <div class="panel-body">\n        <div class="row">\n            <div class="col-lg-6">\n                <img ng-src="{{$root.assetLocation}}/img/guide-collections.png" alt="Collections" />\n            </div>\n            <div class="col-lg-6">\n                <strong>{{::\'user.collections.about.title\' | message}}</strong>\n                <ul class="list-styled" ng-bind-html="\'user.collections.about\' | message | unsafe">\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="panel panel-alert panel-info">\n    <div class="panel-heading"><em class="fa fa-info-circle"></em> {{::\'notes.user.none\' | message}}</div>\n    <div class="panel-body">\n        <div class="row">\n            <div class="col-lg-6">\n                <img ng-src="{{::$root.assetLocation}}/img/guide-notes.png" alt="notes" />\n            </div>\n            <div class="col-lg-6">\n                <strong>{{::\'notes.user.guide.title\' | message}}</strong>\n                <ul class="list-styled" ng-bind-html="\'notes.user.guide\' | message | unsafe">\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n'},function(module,exports){module.exports='<form>\n    <fieldset id="embedControls" class="embedControls-analaysis-view">\n        <h5>\n            {{\'chart.title.embed\' | message}}\n        </h5>\n        <p>\n            {{\'analysis.embed.warning\' | message}}\n        </p>\n\n        <div class="row">\n            <div class="col-md-6">\n                <label>\n                    {{\'chart.title.embed.snippet\' | message}}\n                </label>\n                <label class="textarea">\n                    <textarea class="embedText" readonly="readonly" ng-value="$ctrl.getIframeCode(k)"></textarea>\n                </label>\n            </div>\n\n            <div class="col-md-6">\n                <label>\n                    {{\'chart.title.embed.title\' | message}}\n                </label>\n                <label class="input">\n                    <input name="name" type="text" ng-model="$ctrl.state.embed.title" class="embedTitle field-full" placeholder="{{\'chart.title.embed.title\' | message}}" />\n                </label>\n\n                <label>\n                    {{\'chart.title.embed.dimensions\' | message}}\n                </label><br/>\n                <div class="row">\n                    <div class="col-md-6">\n                        <label class="input">\n                            <input name="name" class="embedWidth field-full" type="text" ng-model="$ctrl.state.embed.width" placeholder="{{\'chart.title.embed.width\' | message}}" />\n                        </label>\n                    </div>\n                    <div class="col-md-6">\n                        <label class="input">\n                            <input name="name" class="embedHeight field-full" type="text" ng-model="$ctrl.state.embed.height" placeholder="{{\'chart.title.embed.height\' | message}}" />\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </fieldset>\n</form>\n'},function(module,exports){module.exports="<div class=\"analysis-intro\">\n    <p>{{::'analysis.intro' | message}}</p>\n    <p ng-if=\"$ctrl.state.resultSize < 10\">\n        <a ng-click=\"$ctrl.applyFilter('v', 'summary')\">\n            This analysis covers a result set of only {{$ctrl.state.resultSize}} patents. Click here to view them.\n        </a>\n    </p>\n    <p>\n        With results from over {{$ctrl.chartData.jurisdiction[0].values.length}} jurisdictions,\n        {{$ctrl.introField('jurisdiction', 0)}}\n        is most prominent with {{$ctrl.introField('jurisdiction', 0, 'value') | customNumber}}\n        patents\n        <span ng-if=\"$ctrl.state.resultSize > 1\">\n            , accounting for\n            {{$ctrl.introField('jurisdiction', 0, 'value') / $ctrl.state.resultSize * 100 | customNumber}}%\n            of the entire result set of\n            {{$ctrl.state.resultSize | customNumber}} patents\n        </span>.\n    </p>\n    <p ng-if=\"$ctrl.introField('applicant', 0)\">\n        {{::'analysis.applicants.include' | message}}\n        <span>{{::$ctrl.introField('applicant', 0)}} ({{::$ctrl.introField('applicant', 0, 'value') | number}})</span>\n        <span ng-if=\"$ctrl.introField('applicant', 1)\">, {{::$ctrl.introField('applicant', 1)}} ({{::$ctrl.introField('applicant', 1, 'value') | number}})</span>\n        <span ng-if=\"$ctrl.introField('applicant', 2)\">and {{::$ctrl.introField('applicant', 2)}} ({{::$ctrl.introField('applicant', 2, 'value') | number}})</span>.\n        <span ng-if=\"$ctrl.introField('applicant', 3)\">\n            Together these three applicants account for\n            {{$ctrl.introFieldSumPercentage('applicant', 3)}}% of the entire result set.\n        </span>\n    </p>\n    \x3c!--\n    <p ng-if=\"$ctrl.introField('applicant', 9)\">\n        The top 10 applicants account for\n        {{$ctrl.introFieldSumPercentage('applicant', 10)}}% of the entire result set.\n    </p>\n    <p>The top CPC Classification for these results is\n        <a ng-href=\"#/classification-viewer/CPC/{{$ctrl.introField('classification_cpc', 0)}}\">{{$ctrl.introField('classification_cpc', 0)}}</a>\n        (click to open in Viewer).\n    </p>\n    --\x3e\n    <p ng-if=\"!$ctrl.state.readMore\">\n        <a ng-click=\"$ctrl.state.readMore = true\">\n            {{::'common.readmore' | message}}\n        </a>\n    </p>\n    <div ng-if=\"$ctrl.state.readMore\">\n        <p>{{::'analysis.improve.text' | message}}</p>\n    </div>\n    <div class=\"alert alert-info hide-item-content hidden\">\n        <em class=\"fa fa-close hide-item pull-right\"></em>\n        {{'results.graphical.notice' | message}}\n    </div>\n</div>\n\n\n"},function(module,exports){module.exports='<div class="btn-group btn-group-xs analysis-view-btn-group">\n    <a class="btn btn-qua btn-xxs dropdown-toggle"  data-toggle="dropdown" tooltip-title="Display Options">\n        <em class="fa fa-caret-down"></em>\n    </a>\n    <ul class="dropdown-menu">\n        <li><strong style="padding-left:1em;">{{::\'analysis.display.options\' | message}}</strong></li>\n        <li role="separator" class="divider"></li>\n        <li ng-click="$analysisCtrl.toggleAllFacets(true)">\n            <a class="no-check">{{::\'common.action.selectAll\' | message}}</a>\n        </li>\n        <li class=""\n            ng-repeat="item in $analysisCtrl.state.fields"\n            ng-class="{\'col-ter\': $analysisCtrl.state.currentFacets[item.facet], \'analysis-selector-item-disabled\': $analysisCtrl.state.chartData[item.facet][0].values.length < 2}"\n            ng-click="$analysisCtrl.toggleFacet(item.facet)"\n        >\n            <a>\n                {{::item.label}}\n            </a>\n        </li>\n        <li role="separator" class="divider"></li>\n        <li ng-click="$analysisCtrl.reset()">\n            <a class="no-check">{{::\'results.graphical.reset\' | message}}</a>\n        </li>\n    </ul>\n</div>\n'},function(module,exports){module.exports='<div class="btn-group btn-group-xs analysis-view-btn-group">\n    <button class="btn dropdown-toggle" data-toggle="dropdown">\n        {{::\'analysis.customise.label\' | message}}\n        <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu">\n        <li><strong style="padding-left:1em;">{{::\'analysis.display.options\' | message}}</strong></li>\n        <li role="separator" class="divider"></li>\n        <li ng-click="$analysisCtrl.toggleAllFacets(true)">\n            <a class="no-check">{{::\'common.action.selectAll\' | message}}</a>\n        </li>\n        <li class=""\n            ng-repeat="item in $analysisCtrl.state.fields"\n            ng-class="{\'col-ter\': $analysisCtrl.state.currentFacets[item.facet]}"\n            ng-click="$analysisCtrl.toggleFacet(item.facet)"\n        >\n            <a>{{::item.label}}</a>\n        </li>\n        <li role="separator" class="divider"></li>\n        <li ng-click="$analysisCtrl.reset()">\n            <a class="no-check">{{::\'results.graphical.reset\' | message}}</a>\n        </li>\n        <li ng-click="$analysisCtrl.state.shareModal = true">\n            <a class="no-check">{{::\'analysis.share\' | message}}</a>\n        </li>\n    </ul>\n</div>\n'},function(module,exports){module.exports='<div class="x-panel x-panel-default deep-analysis-wizard-panel analysis-tour-3">\n    <div class="x-panel-heading clearfix">\n        <span class="small pull-right btn btn-xs btn-danger-txt"\n            style=""\n            ng-if="$ctrl.state.subAnalysisItems.length"\n            ng-click="$ctrl.analysisWizardReset(); $ctrl.state.deepAnalysisQuickSelect = false; $ctrl.state.primaryFacet = null;"\n        >\n            <em class="fa fa-times"></em>\n            Close\n        </span>\n        \n        <a class="btn btn-xs pull-left"\n            style="margin-right: 5px;"\n            ng-click="$ctrl.restoreDefaultDashboard()"\n            ng-if="$ctrl.state.currentStateName === \'scholar.analysis\' && !$ctrl.state.subAnalysisItems.length"\n        >\n            <em class="fa fa-dashboard"></em>\n            Use Default Set\n        </a>\n        \n        <span class="btn btn-xs pull-left" ng-click="$ctrl.state.stepTwo = null"\n            ng-if="$ctrl.state.stepTwo.length">\n            <em class="fa fa-chevron-left col-pri"></em>\n            Go Back\n        </span>\n        \x3c!-- <strong>Add Chart</strong> --\x3e\n    </div>\n    <div class="analysis-wizard x-panel-body deep-analysis-item-content"\n        ng-class="{\'analysis-wizard-dirty\': $ctrl.state.primaryFacet}"\n    >\n        <div class="analysis-wizard-question active" ng-if="!$ctrl.state.stepTwo.length && !$ctrl.state.wizardAdvancedOptions">\n            <div class="text-center">\n                <h3 class="col-ter analysis-wizard-question-title">Step 1:</h3>\n                <p class="lead analysis-wizard-question-title">What would you like to analyse?</p>\n            </div>\n            <ul class="analysis-wizard-answers">\n                <li class="analysis-wizard-link"\n                    ng-repeat="item in $ctrl.state.wizard"\n                    ng-click="$ctrl.state.stepTwo = item.options"\n                >\n                    <div class="analysis-wizard-icon" ng-if="item.label !== \'Open Access\'">\n                        <em class="fa" ng-class="{[item.icon]: true}"></em>\n                    </div>\n                    <div class="analysis-wizard-icon analysis-wizard-icon-open-access" ng-if="item.label === \'Open Access\'">\n                        <div ng-include="\'open-access-icon\'" include-replace></div>\n                    </div>\n                    {{item.label}}\n                </li>\n                <li class="analysis-wizard-link"\n                    ng-click="$ctrl.state.wizardAdvancedOptions = true"\n                    hidden\n                >\n                    <div class="analysis-wizard-icon">\n                        <em class="fa fa-cog"></em>\n                    </div>\n                   Custom Chart\n                </li>\n            </ul>\n            <span hidden class="styled-link" ng-click="$ctrl.state.wizardAdvancedOptions = true">\n                Advanced Options\n            </span>\n        </div>\n\n        <div class="analysis-wizard-question" ng-class="{active: $ctrl.state.wizardAdvancedOptions}" ng-if="$ctrl.state.wizardAdvancedOptions">\n            <div class="text-center">\n                <h3 class="col-ter analysis-wizard-question-title">Step 2:</h3>\n                <p class="lead analysis-wizard-question-title">Configure your visualisation</p>\n\n                <div lens-create-analysis-form config="$ctrl.state.createAnalysisFormConfig"></div>\n\n                <span hidden class="link" ng-click="$ctrl.state.wizardAdvancedOptions = null">\n                    <em class="fa fa-chevron-left col-pri"></em>\n                    Back\n                </span>\n            </div>\n        </div>\n\n        <div class="analysis-wizard-question" ng-class="{active: $ctrl.state.stepTwo.length}">\n            <div class="text-center">\n\n                <h3 class="col-ter analysis-wizard-question-title">Step 2:</h3>\n                <p class="lead analysis-wizard-question-title">Choose a visualisation</p>\n            </div>\n            <div>\n                <div class="deep-analysis-selector-items">\n                    <div class="deep-analysis-selector-item"\n                        ng-repeat="option in $ctrl.state.stepTwo"\n                        ng-mouseenter="$ctrl.state.analysisWizardTip = option.tip"\n                        ng-mouseleave=""\n                        ng-click="$ctrl.addSubAnalysisView(option.config)"\n                    >\n                        <div class="deep-analysis-selector-preview"\n                            ng-style="$ctrl.getChartIconBackground(option)"\n                            alt=""\n                        ></div>\n                        <small>{{option.label}}</small>\n                    </div>\n                </div>\n\n                <div hidden class="lead" ng-if="$ctrl.state.analysisWizardTip">\n                    {{$ctrl.state.analysisWizardTip}}\n                    \x3c!--\n                     USE THE ANNOTATION\n                    --\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div id="collections-tab-view" ng-if="$ctrl.state.model">\n    <header lens-article-item-meta item="$ctrl.state.model" is-title="true"></header>\n    <br>\n    <div class="div-table-results table-stretch">\n        <div class="div-table-results-heading">\n            <div class="div-table-results-row">\n                <div class="selectionToolWrapper">\n                    <a class="selectionTool settings-button"><em class="fa fa-check"></em></a>\n                    <div class="tool-content" style="display:none">\n                        <a data-amount="page" class="selectPage tool-item gradient" href="#">{{::\'results.selectTool.page\' | message}}</a>\n                        <a data-amount="all" class="selectAll tool-item gradient" href="#">{{::\'results.selectTool.10k\' | message}}</a>\n                        <a id="selectNone" data-amount="none" class="tool-item gradient" href="#">{{::\'results.selectTool.clear\' | message}}</a>\n                    </div>\n                </div>\n\n                <strong>\n                    {{\'scholarView.tabs.collections.related\' | message }}\n                </strong>\n            </div>\n        </div>\n        <div lens-collection-list lens-id="$ctrl.state.model.record_lens_id">\n            <div class="no-content">\n                <em class="fa fa-refresh fa-spin fa-fw load-icon"></em> {{::\'common.loading\' | message}}\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div id="main-column">\n    <div ui-view="nav" ng-hide="$ctrl.state.notFound"></div>\n\n    <div ng-show="$ctrl.state.loading">\n        <div class="no-content">\n            <em class="fa fa-refresh fa-spin fa-fw load-icon"></em> {{::\'common.loading\' | message}}\n        </div>\n    </div>\n\n    <div ng-if="$ctrl.state.error" ng-hide="$ctrl.state.loading">\n        <div ng-include="\'scholar-error\'"></div>\n    </div>\n\n    <div ng-if="$ctrl.state.notFound">\n        <h2>\n            {{::\'error.404.title\' | message}}\n                \n        </h2>\n        <p>\n            {{::\'error.404.message\' | message}}\n        </p>\n    </div>\n\n    \x3c!-- Content View --\x3e\n    <div ui-view="content"\n        ng-hide="$ctrl.state.notFound"\n        class="container body-content"\n    ></div>\n\n    \x3c!-- Add To Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.addToCollection">\n        <div lens-add-to-collection\n            lens-ids="[$ctrl.state.model.record_lens_id]"\n            new-collection="$ctrl.state.newCollection"\n            visible="$ctrl.state.addToCollection"\n            type="\'SCHOLARLY_WORK\'"\n        ></div>\n    </div>\n\n    \x3c!-- Remove From Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.removeFromCollection">\n        <div lens-remove-from-collection\n            lens-ids="[$ctrl.state.model.record_lens_id]"\n            visible="$ctrl.state.removeFromCollection"\n            type="\'SCHOLARLY_WORK\'"\n        ></div>\n    </div>\n\n    \x3c!-- New Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.newCollection">\n        <div lens-create-collection\n            collection="$ctrl.state.newCollection"\n            lens-ids="[$ctrl.state.model.record_lens_id]"\n            submitting="$ctrl.state.creatingCollection"\n        ></div>\n    </div>\n\n</div>\n<aside class="sidebar sidebar-sticky" ui-view="sidebar"></aside>\n\n<div lens-side-tabs type="\'SCHOLAR\'"></div>\n'},function(module,exports){module.exports='<div class="div-table-results table-stretch">\n    <div class="div-table-results-body">\n\n        <div class="div-table-results-row no-selects clearfix">\n            <div class="clearfix">\n                <h3 class="pull-left-lg">\n                    <div ng-if="!$ctrl.state.forwardCitationCount && !$ctrl.state.forwardCitationsLoading">\n                        This article is not referenced yet.\n                    </div>\n                    <div ng-if="$ctrl.state.forwardCitationCount">\n                        This work is cited {{$ctrl.state.forwardCitationCount | customNumber}} times by other scholarly works\n                    </div>\n                </h3>\n            </div>\n            <div class="clearfix">\n                <div class="alert alert-info" style="margin-top: .5em;">\n                    <span ng-if="$ctrl.state.forwardCitations.length < $ctrl.state.forwardCitationCount">\n                        Viewing first {{$ctrl.state.forwardCitations.length}} of {{$ctrl.state.forwardCitationCount | customNumber}} scholarly works.\n                    </span>\n                    <strong>\n                        <a ng-click="$ctrl.searchForwardCitations()">View articles in Scholar Search</a>\n                    </strong>\n                </div>\n            </div>\n        </div>\n        <div lens-citation-item\n            class="div-table-results-row"\n            ng-repeat="article in $ctrl.state.forwardCitations"\n            article="article"\n        >\n        </div>\n\n        <div ng-if="$ctrl.state.overTimeSpec">\n            <div lens-vega-chart\n                spec="$ctrl.state.overTimeSpec"\n                view="$ctrl.state.overTimeVegaView"\n                raw-spec="$ctrl.state.overTimeVegaSpec"\n                filter-extent="$ctrl.state.overTimeFilterExtent"\n                scroll-notice="true"\n            ></div>\n        </div>\n\n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n    <div ng-hide="$ctrl.state.loading || $ctrl.state.error">\n        <header lens-article-item-meta item="$ctrl.state.model" is-title="true"></header>\n        <br>\n        <ul class="table-stretch nav nav-tabs tab-nav tab-nav-static">\n            <li ui-sref=".patents.list" lens-state-active="\'article.citations.patents\'">\n                <span ng-if="$ctrl.state.model.referenced_by_patent_count">\n                    {{$ctrl.state.model.referenced_by_patent_count | customNumber}}\n                </span>\n                Patent Citations\n            </li>\n            <li ng-if="$ctrl.state.forwardCitationsLoading">\n                <em class="fa fa-refresh fa-spin fa-fw load-icon"></em>\n                Checking Citations\n            </li>\n            <li ng-if="$ctrl.state.forwardCitations" ui-sref=".citing" ui-sref-active="active">\n                <span ng-if="$ctrl.state.forwardCitationCount">\n                    {{$ctrl.state.forwardCitationCount | customNumber}}\n                </span>\n                Scholarly Citations\n            </li>\n            <li ui-sref=".articles" ui-sref-active="active">\n                <span ng-if="$ctrl.state.model.reference_count">\n                    {{$ctrl.state.model.reference_count | customNumber}}\n                </span>\n                References\n            </li>\n        </ul>\n\n\n        <div ui-view="tab"></div>\n    </div>\n\n</div>\n'},function(module,exports){module.exports='<div class="div-table-results table-stretch">\n    <div class="div-table-results-body">\n        <div class="div-table-results-row no-selects">\n            <div class="clearfix">\n                <h3 class="pull-left-lg">\n                    <div ng-if="!$ctrl.state.model.reference_count">\n                        References are not available yet for this article\n                    </div>\n                    <div ng-if="$ctrl.state.model.reference_count">\n                        {{$ctrl.state.model.reference_count | customNumber}}\n                        references in this article\n                    </div>\n                </h3>\n                <div ng-if="$ctrl.state.citStrings.length" ng-include="\'citation-string-toggle\'" ng-cloak></div>\n            </div>\n\n            <div ng-if="$ctrl.state.model.reference_count">\n                <div class="alert alert-info">\n                    <span ng-if="$ctrl.state.articles.length < $ctrl.state.model.reference_count">\n                        Viewing first {{$ctrl.state.articles.length}} of {{$ctrl.state.model.reference_count | customNumber}} scholarly works.\n                    </span>\n                    <a ng-click="$ctrl.searchBackwardCitations()"><strong>View articles in Scholar Search</strong></a>\n                </div>\n            </div>\n        </div>\n\n\n        <div ng-if="$ctrl.state.metaLoading" class="div-table-results-row no-selects">\n            <div class="no-content">\n                <em class="fa fa-refresh fa-spin fa-fw load-icon"></em>\n                Loading...\n            </div>\n        </div>\n\n        <div\n            lens-citation-item\n            class="div-table-results-row"\n            ng-repeat="article in $ctrl.state.articles"\n            ng-if="!$ctrl.state.showOriginalCitations"\n            article="article"\n        >\n        </div>\n\n        <div class="div-table-results-row no-selects"\n            ng-repeat="citation in $ctrl.state.model.references"\n            ng-if="($ctrl.state.showOriginalCitations || !citation.lens_id) && citation.cit_string"\n        >\n            <div class="listing-with-sidebar" ng-bind-html="citation.cit_string | unsafe"></div>\n        </div>\n\n        <div class="pad" ng-if="$ctrl.state.showOriginalCitations && $ctrl.state.citStrings.length < $ctrl.state.model.references.length">\n            <div class="alert alert-warning">\n                Missing {{$ctrl.state.model.references.length - $ctrl.state.citStrings.length}} citation strings\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="listing-header clearfix">\n\n    <div class="listing-with-sidebar">\n        <h2 class="doc-title" ng-if="::isTitle">\n            <a ui-sref="article.main({id: item.record_lens_id, article: item})" ng-bind-html="item.title | unsafe"></a>\n        </h2>\n        <h3 ng-if="::!isTitle">\n            <a ui-sref="article.main({id: item.record_lens_id, article: item})" ng-bind-html="item.title | unsafe"></a>\n        </h3>\n        <ul class="list-unstyled header-meta header-meta-scholarly">\n            <li>\n                \n                <span ng-repeat="author in item.authors | limitTo:(item.showAllAuthors ? 500 : 20)">\n                    {{::author.display_name}}\n                    <sup class="col-meta">{{author.affiliationIndices}}</sup>\n                    \x3c!--<span class="col-meta-3"\n                        ng-repeat="affiliation in author.affiliations"\n                        ng-if="::isTitle && item.authorList">\n                        ({{affiliation.name}})\n                    </span>--\x3e\n                    <em ng-if="!$last">,</em>\n                </span>\n                <a ng-if="item.authors.length > 20 && !item.showAllAuthors" ng-click="item.showAllAuthors = true">\n                    Show all...\n                </a>\n            </li>\n\n            <li>\n                <b class="hidden">{{::\'journal.title\' | message}}:</b>\n\n                <a class="link" ng-if="::item.journal.title" ng-click="search(\'source.title\', item.journal.title)">\n                    {{::item.journal.title}},&nbsp;\n                </a>\n\n                <span ng-if="::item.issue">\n                    {{::\'journal.issue\' | message}}:\n                    {{::item.issue}},&nbsp;\n                </span>\n                <span ng-if="::item.volume">\n                    {{::\'journal.volume\' | message}}:\n                    {{::item.volume}},&nbsp;\n                </span>\n                <span ng-if="::item.pages">\n                    {{::\'journal.pages\' | message}}:\n                    {{::item.pages}}.&nbsp;\n                </span>\n                <span class="hidden">{{::item.journal.publisher}}</span>\n                <span class="published-date" ng-if="::item.year_published">|&nbsp;\n                    <b class="hidden">{{::\'scholar.common.published\' | message}}:</b>\n                    <span ng-if="::!item.date_published">{{::item.year_published}}</span>\n                    <span ng-if="::item.date_published">{{::item.date_published | date}}</span>\n                </span>\n            </li>\n\n\n            <li class="meta-notices header-meta-inline-item">\n                <b>{{::\'common.info\' | message}}:</b>\n                <a ng-repeat="(k, badge) in vm.badges"\n                    ng-if="::(item[\'has_\' + k] || item[\'has_\' + k + \'s\'] || item[\'is_\' + k]) && badge.pill"\n                    ui-sref="article.main({id: item.record_lens_id, section: k})"\n                    ng-style="{\'background-color\': badge.colour}"\n                    tooltip-title tooltip-title-variable="badge.tooltip"\n                >\n                    <em class="fa" ng-class="{[\'fa-\' + (badge.icon || \'file-text-o\')]: true}"></em> {{::badge.label || k}}\n                </a>\n            </li>\n            <br/>\n            <li class="header-meta-inline-item">\n                <a ui-sref="article.citations.patents.list({id: item.record_lens_id})">\n                    {{item.referenced_by_patent_count | customNumber}}\n                    {{::\'scholar.sort.patent.citations\' | message}}\n                </a>\n            </li>\n            <li class="header-meta-inline-item" ng-if="item.forwardCitationCount">\n                <a ui-sref="article.citations.citing({id: item.record_lens_id})">\n                    {{::item.forwardCitationCount | customNumber}}\n                    {{::\'scholar.sort.scholarly.citations\' | message}}\n                </a>\n            </li>\n            <li class="header-meta-inline-item" ng-if="item.referenced_by_count && !item.forwardCitationCount">\n                <a ui-sref="article.citations.citing({id: item.record_lens_id})">\n                    {{::item.referenced_by_count | customNumber}}\n                    {{::\'scholar.sort.scholarly.citations\' | message}}\n                </a>\n            </li>\n            <li class="header-meta-inline-item">\n                <a ui-sref="article.citations.articles({id: item.record_lens_id})">\n                    {{::\'scholar.field.reference_count.cited\' | message}}: {{item.reference_count}}\n                </a>\n            </li>\n        </ul>\n\n        <div class="result-snippet" ng-if="item.fullTextSnippet && !isTitle">\n            <strong>Full Text match:</strong>\n            <span ng-bind-html="item.fullTextSnippet | unsafe"></span>\n        </div>\n\n    </div>\n\n    <div class="listing-sidebar results-doc-id">\n        <div class="results-doc-id-inner">\n            <div class="doc-id">\n                {{::(!item.publication_type || item.publication_type === \'unknown\' ? \'Document\' : item.publication_type) | titleCase}}\n                <img class="doc-open-access" tooltip-title="Open Access" ng-show="item.open_access" ng-src="{{::$root.assetLocation}}/fonts/svg-icons/open-access-color.svg">\n            </div>\n            <div class="doc-type">\n                <a href="/{{item.record_lens_id}}">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/favicon-32x32.png">\n                    <span>{{item.record_lens_id}}</span>\n                </a>\n            </div>\n            <div class="doc-type" ng-repeat="id in item.external_ids">\n                <a ng-href="{{linkout(id)}}" target="_blank" ng-class="{\'cursor-default\': id.type===\'pii\'}">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-pub-med.png" ng-if="::id.type===\'pmid\'">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-cross-ref.png" ng-if="::id.type===\'doi\'">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-open-access.png" ng-if="::id.type===\'pmc\' || id.type === \'pmcid\'">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-pii.png" ng-if="::id.type===\'pii\'">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-mag.png" ng-if="id.type===\'magid\'">\n                    <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-core.png" ng-if="id.type===\'core\'">\n                    <span ng-if="id.type === \'core\'">{{id.value.slice(4)}}</span>\n                    <span ng-if="id.type === \'pmc\'">{{id.value.slice(3)}}</span>\n                    <span ng-if="id.type === \'magid\'">{{id.value.slice(3)}}</span>\n                    <span ng-if="id.type !== \'magid\' && id.type !== \'pmc\' && id.type !== \'core\'">{{id.value}}</span>\n                </a>\n            </div>\n            <lens-coins item="item"/>\n        </div>\n    </div>\n</div>\n\n<div class="result-snippet result-snippet-duplicate" ng-if="item.fullTextSnippet && !isTitle">\n    <strong>Full Text match:</strong>\n    <span ng-bind-html="item.fullTextSnippet | unsafe"></span>\n</div>\n'},function(module,exports){module.exports='<div>\n    <div class="no-content" ng-if="!$ctrl.state.facetDataAvailable">\n        <em class="fa fa-refresh fa-spin fa-fw load-icon"></em> Loading Patent Facets...\n    </div>\n    <div ng-if="$ctrl.state.facetDataAvailable">\n        <div lens-patent-analysis>\n            <div ng-include="\'patent-analysis-view\'"></div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="div-table-results table-stretch">\n    <div class="div-table-results-body">\n        <div class="div-table-results-row no-selects clearfix" style="padding-top: 0;">\n\n            <div class="clearfix">\n                <div class="alert alert-info" style="margin-top: .5em;" ng-if="!$ctrl.state.patentsLoading && $ctrl.state.patents.length < $ctrl.state.totalPatents">\n                    Viewing first {{$ctrl.state.patents.length}} of {{$ctrl.state.totalPatents}} patents.\n                    <strong><a ng-href=\'/lens/search?npl={{::$ctrl.state.model.record_lens_id_num}}\'>View full patent data in Patent Search</a></strong>\n                </div>\n\n                <div class="alert alert-info" style="margin-top: .5em;" ng-if="!$ctrl.state.patentsLoading && $ctrl.state.patents.length >= $ctrl.state.totalPatents">\n                    <strong><a ng-href=\'/lens/search?npl={{::$ctrl.state.model.record_lens_id_num}}\'>View full patent data in Patent Search</a></strong>\n                </div>\n            </div>\n        </div>\n\n        <div ng-if="$ctrl.state.patentsLoading" class="no-content">\n            <em class="fa fa-refresh fa-spin fa-fw load-icon"></em> Loading...\n        </div>\n\n        <div class="div-table-results-row no-selects"\n            ng-repeat="patent in $ctrl.state.patents"\n            ng-include="\'patent-citation-item\'"\n        ></div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="clearfix" style="padding-top: .75em;">\n    <h3 class="pull-left-lg">\n        {{$ctrl.state.model.referenced_by_patent_count | customNumber}} Patent Citations\n    </h3>\n    <div class="btn-group btn-group-pri btn-group-xs pull-right" style="margin-top: 10px;">\n        <a tooltip-title="Summary View" class="btn" ui-sref="article.citations.patents.list">\n            <em class="fa fa-list"></em>\n        </a>\n        <a tooltip-title="Analysis View" class="btn" ui-sref="article.citations.patents.analysis">\n            <em class="fa fa-bar-chart-o"></em>\n        </a>\n    </div>\n</div>\n<div ui-view></div>\n'},function(module,exports){module.exports='\n    <form>\n        <label class="checkbox">\n            <input type="checkbox" ng-model="item.checked" ng-change="$ctrl.updateCheckedItems()">\n            <i></i>\n        </label>\n\n        \x3c!--\n        <div class="favResult">\n            <em class="fa fa-star-o"></em>\n            <em class="fa"\n                ng-click="favourite(item.id)"\n                ng-class="starIcon(item.id)"\n            ></em>\n        </div>\n        --\x3e\n\n        <a class="fa expandPatent"\n            ng-class="{\'fa-chevron-circle-down\': !item.expanded, \'fa-chevron-circle-down col-ter\': item.expanded}"\n            tooltip-title="Expand Article View"\n            ng-click="item.expanded = !item.expanded"\n        ></a>\n\n    </form>\n    <header>\n        <div lens-article-item-meta item="item"></div>\n        <div ng-if="item.expanded" lens-article-item-preview item="item"></div>\n    </header>\n'},function(module,exports){module.exports='<nav class="greedy">\n    <span hidden class="pull-right" ng-if="$ctrl.service.previousSearch" style="position: absolute; right: 10px; z-index: 1;">\n        <a ui-sref="scholar.results($ctrl.service.previousSearch)">\n            <em class="fa fa-times"></em>\n            Close Article\n        </a>\n    </span>\n    <ul class="tabs-pages">\n        <li class="selection-control-item">\n            <form>\n                <label class="checkbox">\n                    <input type="checkbox" ng-model="showCollectionControls">\n                    <i></i>\n                </label>\n            </form>\n        </li>\n        <li ui-sref="article.main({id: $ctrl.state.id})" ui-sref-active="active">\n            <a>{{\'scholar.common.article_summary\' | message}}</a>\n        </li>\n        <li ui-sref="article.citations.articles({id: $ctrl.state.id})" lens-state-active="\'article.citations\'">\n            <a>{{\'scholar.common.citations\' | message}}</a>\n        </li>\n        <li ui-sref="article.recommended({id: $ctrl.state.id})" lens-state-active="\'article.recommended\'" ng-if="$ctrl.state.model.recommended_works.length">\n            <a>Recommended</a>\n        </li>\n        <li ui-sref="article.collections({id: $ctrl.state.id})" lens-state-active="\'article.collections\'">\n            <a>{{::\'results.tabTitleCollections\' | message}}</a>\n        </li>\n        \x3c!--<li class="disabled">\n            <a>{{\'scholar.common.notes\' | message}}</a>\n        </li>--\x3e\n    </ul>\n    \n    \n\n    \x3c!-- Start Selection tools --\x3e\n    <div class="selection-tools" ng-show="showCollectionControls" ng-cloak>\n        <div lens-collection-controls\n            new-collection="$ctrl.state.newCollection"\n            add-to-collection="$ctrl.state.addToCollection"\n            remove-from-collection="$ctrl.state.removeFromCollection"\n            type="\'SCHOLARLY_WORK\'"\n        ></div>\n    </div>\n    \n    <div class="share-menu-container">\n        <a class="btn btn-xs btn-share-modal"\n            ng-click="$root.showSharingModal=true"\n            tooltip-title="Share Article"\n        >\n            <em class="fa fa-share-alt-square"></em>\n            Share Article\n        </a>\n    </div>\n    \n    <button class="hidden"><em class="fa fa-bars"></em></button>\n    <ul class=\'hidden-links hidden\'></ul>\n</nav>\n'},function(module,exports){module.exports='<div id="collections-tab-view" ng-if="$ctrl.state.model">\n    <header lens-article-item-meta item="$ctrl.state.model" is-title="true"></header>\n    <br>\n    <div class="div-table-results table-stretch">\n        <div class="div-table-results-heading">\n            <div class="div-table-results-row">\n                <div class="selectionToolWrapper">\n                    <a class="selectionTool settings-button"><em class="fa fa-check"></em></a>\n                    <div class="tool-content" style="display:none">\n                        <a data-amount="page" class="selectPage tool-item gradient" href="#">Page results</a>\n                        <a data-amount="all" class="selectAll tool-item gradient" href="#">Top 10k Results</a>\n                        <a id="selectNone" data-amount="none" class="tool-item gradient" href="#">Clear Selection</a>\n                    </div>\n                </div>\n\n                <strong>\n                    Recommended work (source Microsoft Academic Graph)\n                </strong>\n            </div>\n        </div>\n\n        <div ng-if="$ctrl.state.loadingRecommended" class="no-content">\n            <em class="fa fa-refresh fa-spin fa-fw load-icon"></em>\n            Loading...\n        </div>\n\n        <div class="div-table-results-body" ng-if="$ctrl.state.recommendedView === \'citation\'">\n            <div\n                lens-citation-item\n                class="div-table-results-row"\n                ng-repeat="article in $ctrl.state.recommended"\n                article="article"\n            >\n            </div>\n        </div>\n\n        <div class="div-table-results-body div-table-results-body-alt-rows table-results-hide-check" ng-if="$ctrl.state.recommendedView === \'full\'">\n            <div class="div-table-results-row"\n                ng-include="\'article-list-item\'"\n                ng-repeat="item in $ctrl.state.recommended"\n            ></div>\n        </div>\n\n\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="deep-analysis-config-item">\n    <label class="small">Sort</label>\n    <label class="select x-select-sm">\n        <select ng-model="vm.config.scholarArticleScatter.sort" ng-change="submit()">\n            <option ng-repeat="(k, sort) in vm.sorts" ng-value="k">{{sort.label}}</option>\n        </select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <label class="small">X</label>\n    <label class="select x-select-sm">\n        <select ng-model="vm.config.scholarArticleScatter.x.field"\n            ng-options="o.key as o.label group by o.fieldType for o in vm.scholarScatterPlotFields"\n            ng-change="submit()"\n        ></select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <em class="fa fa-refresh link pull-right"\n            ng-click="switchScholarScatterAxes()"\n            tooltip-title="Switch Facets"\n            style="opacity: 0.5"\n        ></em>\n    <label class="small">Y</label>\n    <label class="select x-select-sm">\n        <select ng-model="vm.config.scholarArticleScatter.y.field"\n            ng-options="o.key as o.label group by o.fieldType for o in vm.scholarScatterPlotFields"\n            ng-change="submit()"\n        ></select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <label class="small" style="width: 100%;">\n        Colour\n    </label>\n    <label class="select x-select-sm">\n        <select ng-model="vm.config.scholarArticleScatter.color.field"\n            ng-options="o.key as o.label group by o.fieldType for o in vm.scholarScatterPlotFields"\n            ng-change="submit()"\n        ></select>\n        <i></i>\n    </label>\n</div>\n\n'},function(module,exports){module.exports='<div class="widget hidden">\n    <a ui-sref="scholar.results(previousSearch)" class="btn btn-sm" ng-if="::$ctrl.state.previousSearch">\n        <em class="fa fa-caret-left"></em>\n        Back to Previous Search\n    </a>\n    <a ui-sref="scholar.results" class="btn btn-sm" ng-if="::!$ctrl.state.previousSearch">\n        <em class="fa fa-caret-left"></em>\n        Back to Search\n    </a>\n</div>\n\n<div ng-controller="ScholarSearchController as $ctrl">\n    <div ng-include="\'scholar-search-sidebar\'"></div>\n    <div class="explorer-left-hs" ng-include="\'scholar-choose-more-explorer\'"></div>\n</div>\n'},function(module,exports){module.exports='<div class="clearfix-both listing" lens-html-tooltip>\n    <div ng-if="$ctrl.state.model">\n        <header lens-article-item-meta item="$ctrl.state.model" is-title="true"></header>\n        <div lens-article-item-preview item="$ctrl.state.model"></div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div id="main-column">\n    <div lens-boolean-editor></div>\n</div>\n\n<aside class="sidebar sidebar-sticky">\n    <div ng-if="$root.sideTabsView === \'st-boolean\'">\n        <h3 class="title-seperator ng-scope">\n            Boolean Editor Tips\n        </h3>\n        <div class="widget well">\n            Lorem ipsum dolor sit amet consectetur adipisicing elit. Odit quos, corporis quia nihil quod ea possimus alias corrupti, eligendi iste, nesciunt sit neque architecto dicta! Quis, expedita! Cum, illum voluptatem.\n        </div>\n    </div>\n\n    <div ng-include="\'scholar-search-sidebar\'"></div>\n</aside>\n\n<div id="side-tabs" ng-include="\'side-tabs\'" include-replace>\n    <ul class="side-tabs-list">\n        <li class="st-collapse"><a><em class="fa fa-chevron-circle-left"></em></a></li>\n        <li><a><em class="fa fa-search"></em></a></li>\n        <li><a><em class="fa fa-filter"></em></a></li>\n        <li><a><em class="fa fa-folder-open"></em></a></li>\n        <li><a><em class="fa fa-sticky-note"></em></a></li>\n        <li><a><em class="fa fa-tags"></em></a></li>\n        <li><a><em class="fa fa-history"></em></a></li>\n        <li><a><em class="fa fa-save"></em></a></li>\n    </ul>\n</div>\n'},function(module,exports){module.exports='<form class="pull-right-lg" style="position: relative; left: unset; display: inline-block; padding-top: .5em;">\n    <label class="toggle">\n        <input type="checkbox" name="checkbox-toggle" ng-model="$ctrl.state.showOriginalCitations"><i></i>\n        <em class="link col-sec fa fa-info-circle" tooltip-title="{{\'scholar.common.view.citattion.string.tip\' | message}}"></em>\n        {{\'scholar.common.view.citattion.string\' | message}}:\n    </label>\n</form>\n'},function(module,exports){module.exports='<div class="div-table-cell listTitleDesc has-tag">\n    <div class="div-table-head-mobile">\n        {{ "user.collections.collectionName" | message }}\n    </div>\n    <div class="div-table-cell-mobile">\n        <a ng-href="{{collection | collectionUrl}}">\n            {{ collection.title }}\n        </a>\n        <div class="collectionMeta" ng-class="{ \'is-patent\': collection.type === \'PATENT\', \'is-scholar\': collection.type === \'SCHOLARLY_WORK\' }">\n            <span class="collectionType">\n                {{:: collection.type | collectionType }}\n            </span>\n            \x3c!-- {{> tagInputTemplate}} --\x3e\n        </div>\n    </div>\n</div>\n<div class="div-table-cell">\n    <div class="div-table-head-mobile">\n        {{ "common.numberItems" | message }}\n    </div>\n    <div class="div-table-cell-mobile">{{collection.itemCount | customNumber}}</div>\n</div>\n<div class="div-table-cell date">\n    <div class="div-table-head-mobile">\n        {{ "common.dateCreated" | message }}\n    </div>\n    <div class="div-table-cell-mobile">\n        <span style="white-space: nowrap">\n            {{collection.created | date}}\n        </span>\n        <div class="collectionMeta">\n            <span class="collectionType">\n                {{ collection.created | date:\'shortTime\' }}\n            </span>\n        </div>\n    </div>\n</div>\n<div class="div-table-cell date">\n    <div class="div-table-head-mobile">\n        {{ "common.lastUpdated" | message }}\n    </div>\n    <div class="div-table-cell-mobile">\n        <span style="white-space: nowrap">{{collection.updated | date}}</span>\n    </div>\n    <div class="collectionMeta">\n        <span class="collectionType">\n            {{ collection.updated | date:\'shortTime\' }}\n        </span>\n    </div>\n</div>\n<div class="div-table-cell">\n    <div class="div-table-head-mobile">\n        {{ "common.sharedWith" | message }}\n    </div>\n    <div class="div-table-cell-mobile">\n        {{\'user.sharing.\' + collection.access + \'.info\' | message}}\n    </div>\n</div>\n<div class="div-table-cell menuCell">\n    <div class="div-table-head-mobile">\n        {{\'common.tools\' | message}}\n    </div>\n    <div class="div-table-cell-mobile">\n        <div class="btn-group btn-group-sm" ng-include="\'modify-collection-buttons\'"></div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n\n    <form id="searchOptions" class="pull-right-md">\n        <label class="select select-sm" for="n">\n            <select ng-model="$ctrl.state.limit" class="top bottom"\n                ng-options="o as \'Show \' + o + \' Results\' for o in [10,20,50,100]"\n                ng-change="$ctrl.search()"\n            ></select>\n            <i></i>\n        </label>\n    </form>\n\n    <ul class="pagination pull-left-md pagination-xs" ng-cloak>\n        <li>\n            <a class="settings-button fa fa-chevron-left" ng-click="$ctrl.previousPage()"></a>\n        </li>\n        <li ng-repeat="i in $ctrl.pageRange()">\n            <a ng-click="$ctrl.setPage(i)" ng-class="{active: i === $ctrl.state.page}">{{i + 1}}</a>\n        </li>\n        <li>\n            <a class="settings-button fa fa-chevron-right" ng-click="$ctrl.nextPage()"></a>\n        </li>\n    </ul>\n\n</div>\n'},function(module,exports){module.exports='<form ng-submit="submit()" style="position: relative;" class="deep-analysis-config-wrap">\n    <div class="deep-analysis-config" ng-if="vm.configMenu">\n        <div class="deep-analysis-config-item">\n            <label class="small">Chart Title</label>\n            <label class="input">\n                <input ng-model="vm.config.title" ng-blur="persistConfig()" placeholder="Enter custom title...">\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'scatter-plot\'">\n            <label class="small">Sort Order</label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.scatterPlotSort" ng-change="submit()">\n                    <option value="referenced_by_patent_count">Most Citing Patents</option>\n                    <option value="referenced_by_count">Most Citing Scholarly Works</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view !== \'article-scatter\' && vm.config.view !== \'patent-scatter\' && vm.config.view !== \'patent-facets\'">\n            <label class="small">Facet</label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.primaryFacet" ng-change="facetChange(); submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'x-by-y\'">\n            <label class="small" style="width: 100%;">\n                <em class="fa fa-refresh link pull-right"\n                    ng-click="switchSubAnalysis()"\n                    tooltip-title="Switch Facets"\n                    style="opacity: 0.5"\n                ></em>\n                Secondary Facet\n                <em class="fa fa-warning col-error link"\n                    tooltip-title="Facets should not match: choose another"\n                    ng-if="vm.config.primaryFacet === vm.config.secondaryFacet"\n                ></em>\n            </label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.secondaryFacet" ng-change="facetChange(); submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div ng-include="\'article-scatter-config\'" include-replace ng-if="vm.config.view === \'article-scatter\'"></div>\n        <div ng-include="\'patent-scatter-config\'" include-replace ng-if="vm.config.view === \'patent-scatter\'"></div>\n        <div class="deep-analysis-config-item">\n            <label class="small">Limit</label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.limit" ng-change="submit()">\n                    <option ng-value="1" ng-if="vm.config.groupOtherValues">1</option>\n                    <option ng-value="2">2</option>\n                    <option ng-value="5">5</option>\n                    <option ng-value="10">10</option>\n                    <option ng-value="20" ng-if="vm.config.view !== \'over-time\'">20</option>\n                    <option ng-value="50" ng-if="vm.config.view !== \'over-time\'">50</option>\n                    <option ng-value="100" ng-if="vm.config.view === \'basic\' || vm.config.view === \'patent-scatter\' || vm.config.view === \'article-scatter\' || vm.config.view === \'scatter-plot\'">100</option>\n                    <option ng-value="1000" ng-if="vm.config.view === \'basic\' || vm.config.view === \'patent-scatter\' || vm.config.view === \'article-scatter\'">1,000</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'x-by-y\'">\n            <label class="small">\n                Child Limit\n                <em class="fa fa-info-circle col-sec" tooltip-title="e.g. Top 20 authors for the Top 5 institutions"></em>\n            </label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.secondaryFacetLimit" ng-change="submit()">\n                    <option ng-value="2">2</option>\n                    <option ng-value="5">5</option>\n                    <option ng-value="10">10</option>\n                    <option ng-value="20">20</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item"\n            ng-if="vm.config.view === \'article-scatter\' || vm.config.view === \'scatter-plot\' || vm.config.view === \'patent-scatter\' || (vm.config.view === \'basic\' && vm.config.basicChartType === \'bar-chart\')">\n            <label class="small">Scale</label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.scaleType" ng-change="submit()">\n                    <option value="linear">Linear</option>\n                    <option value="sqrt">Square Root</option>\n                    <option value="log">Logarithmic</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'basic\' && vm.config.basicChartType === \'bar-chart\'">\n            <label class="small">Chart type:</label>\n            <div class="inline-group">\n                <label class="radio" for="chart-type-horizontal">\n                    <input ng-model="vm.config.flip" ng-change="persistConfig()" type="radio" name="flip" id="chart-type-horizontal" ng-value="false">\n                    <i></i>\n                    Horizontal\n                </label>\n                <label class="radio" for="chart-type-vertical">\n                    <input ng-model="vm.config.flip" ng-change="persistConfig()" type="radio" name="flip" id="chart-type-vertical" ng-value="true">\n                    <i></i>\n                    Vertical\n                </label>\n            </div>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="(vm.config.view === \'basic\' && vm.config.basicChartType === \'bar-chart\') || (vm.config.view === \'x-by-y\' && vm.config.barChartType === \'grouped\')">\n            <label class="small">\n                Alternate Colours\n                <em class="fa fa-info-circle col-sec link" tooltip-title="By default bar colour is encoded based on the category or value of data being displayed. This setting simply alternates row colour."></em>\n            </label>\n            <label class="checkbox">\n                <input type="checkbox" ng-model="vm.config.alternateColours" ng-change="renderBarCharts()">\n                <i></i>\n                Alternate Colours\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="(vm.config.view !== \'basic\' && vm.config.view !== \'patent-facets\') || (vm.config.basicChartType === \'bar-chart\')">\n            <label class="small">\n                Colour Scheme\n            </label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.colourScheme" ng-change="submit()" ng-disabled="vm.config.alternateColours">\n                    <option value="auto">auto</option>\n                    <optgroup label="categorical" ng-if="(vm.config.view !== \'basic\' && vm.config.view !== \'scatter-plot\') || vm.config.alternateColours">\n                        <option value="accent">accent</option>\n                        <option value="category10">category10</option>\n                        <option value="category20">category20</option>\n                        <option value="category20b">category20b</option>\n                        <option value="category20c">category20c</option>\n                        <option value="dark2">dark2</option>\n                        <option value="paired">paired</option>\n                        <option value="pastel1">pastel1</option>\n                        <option value="pastel2">pastel2</option>\n                        <option value="set1">set1</option>\n                        <option value="set2">set2</option>\n                        <option value="set3">set3</option>\n                        <option value="tableau10">tableau10</option>\n                        <option value="tableau20">tableau20</option>\n                    </optgroup>\n                    <optgroup label="sequential multi-hue" ng-if="vm.config.view !== \'x-by-y\'">\n                        <option value="viridis">viridis</option>\n                        <option value="magma">magma</option>\n                        <option value="inferno">inferno</option>\n                        <option value="plasma">plasma</option>\n                        <option value="bluegreen">bluegreen</option>\n                        <option value="bluepurple">bluepurple</option>\n                        <option value="greenblue">greenblue</option>\n                        <option value="orangered">orangered</option>\n                        <option value="purplebluegreen">purplebluegreen</option>\n                        <option value="purpleblue">purpleblue</option>\n                        <option value="purplered">purplered</option>\n                        <option value="redpurple">redpurple</option>\n                        <option value="yellowgreenblue">yellowgreenblue</option>\n                        <option value="yellowgreen">yellowgreen</option>\n                        <option value="yelloworangebrown">yelloworangebrown</option>\n                        <option value="yelloworangered">yelloworangered</option>\n                    </optgroup>\n                    <optgroup label="diverging" ng-if="vm.config.view !== \'x-by-y\'">\n                        <option value="spectral">spectral</option>\n                        <option value="blueorange">blueorange</option>\n                        <option value="brownbluegreen">brownbluegreen</option>\n                        <option value="purplegreen">purplegreen</option>\n                        <option value="pinkyellowgreen">pinkyellowgreen</option>\n                        <option value="purpleorange">purpleorange</option>\n                        <option value="redblue">redblue</option>\n                        <option value="redgrey">redgrey</option>\n                        <option value="redyellowblue">redyellowblue</option>\n                        <option value="redyellowgreen">redyellowgreen</option>\n                    </optgroup>\n                    <optgroup label="sequential" ng-if="vm.config.view !== \'x-by-y\'">\n                        <option value="blues">blues</option>\n                        <option value="greens">greens</option>\n                        <option value="browns">browns</option>\n                        <option value="oranges">oranges</option>\n                        <option value="reds">reds</option>\n                        <option value="purples">purples</option>\n                        <option value="greys">greys</option>\n                    </optgroup>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'basic\'">\n            <label class="small">Chart Type</label>\n            <label class="select x-select-sm">\n                <select ng-model="vm.config.basicChartType" ng-change="submit()">\n                    <option value="bar-chart">Bar Chart</option>\n                    <option value="cloud">Word Cloud</option>\n                    <option value="logo-grid" ng-if="vm.config.primaryFacet === \'author.affiliation.name.keyword\'">Logo Grid</option>\n                    <option value="map" ng-if="vm.config.primaryFacet === \'author.affiliation.grid.address.country_code\'">World Map</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-show="vm.config.view === \'over-time\'">\n            <label class="small">Chart Type</label>\n            <label class="select">\n                <select ng-model="vm.config.overTimeMark" ng-change="renderHistoricalAnalysisChart()">\n                    <option value="line">Line Chart</option>\n                    <option value="bar">Stacked Bar Chart</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'x-by-y\'">\n            <label class="small">Chart Type</label>\n            <div class="inline-group">\n                <label class="radio" for="barChartType_stacked">\n                    <input ng-model="vm.config.barChartType" ng-change="renderBarCharts()" type="radio" name="barChartType" id="barChartType_stacked" value="stacked">\n                    <i></i>\n                    Stacked\n                </label>\n                <label class="radio" for="barChartType_grouped">\n                    <input ng-model="vm.config.barChartType" ng-change="renderBarCharts()" type="radio" name="barChartType" id="barChartType_grouped" value="grouped">\n                    <i></i>\n                    Grouped\n                </label>\n            </div>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'x-by-y\' && vm.config.barChartType === \'stacked\'">\n            <label class="small">\n                Normalise\n                <em class="fa fa-info-circle col-sec" tooltip-title="e.g. Adjusting values measured on different scales to a notionally common scale (percentage)."></em>\n            </label>\n            <label class="checkbox">\n                <input type="checkbox" ng-model="vm.config.normalise" ng-change="renderBarCharts()">\n                <i></i>\n                Normalise Results\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'basic\'">\n            <label class="small">\n                Additional Data\n                <em class="fa fa-info-circle col-sec" tooltip-title="Group all other values into a single item."></em>\n            </label>\n            <label class="checkbox">\n                <input type="checkbox" ng-model="vm.config.groupOtherValues" ng-change="submit()">\n                <i></i>\n                Group Other Values\n            </label>\n            <label class="checkbox" ng-if="vm.config.primaryFacet !== \'is_open_access\'">\n                <input type="checkbox" ng-model="vm.config.showMissingValues" ng-change="submit()">\n                <i></i>\n                Show Missing Values\n            </label>\n        </div>\n        <div class="deep-analysis-config-item" ng-if="vm.config.view === \'scatter-plot\' || vm.config.view === \'article-scatter\' || vm.config.view === \'patent-scatter\'">\n            <label class="small">\n                Chart Labels\n            </label>\n            <label class="checkbox">\n                <input type="checkbox" ng-model="vm.config.displayScatterLabels"\n                    ng-change="changeDisplayLabels()">\n                <i></i>\n                Display Labels\n            </label>\n        </div>\n        <div class="deep-analysis-config-item deep-analysis-config-item-span2" ng-if="(vm.config.view !== \'basic\' && vm.config.view !== \'patent-facets\') || (vm.config.basicChartType === \'bar-chart\') || vm.vegaSpec">\n            <label class="small">Share Options</label>\n            <div>\n                <span ng-if="(vm.config.view !== \'basic\' && vm.config.view !== \'patent-facets\') || (vm.config.basicChartType === \'bar-chart\')">\n                    <span class="btn-xs btn" ng-click="export(\'png\')">\n                        <em class="fa fa-cloud-download"></em>\n                        Save as PNG\n                    </span>\n                    <span class="btn-xs btn" ng-click="export(\'svg\')">\n                        <em class="fa fa-cloud-download"></em>\n                        Save as SVG\n                    </span>\n                </span>\n                <span class="btn-xs btn" ng-if="vm.vegaSpec" ng-click="viewSource()">\n                    <em class="fa fa-code"></em>\n                    View Source\n                </span>\n            </div>\n        </div>\n    </div>\n</form>\n'},function(module,exports){module.exports='<div ng-if="vm.error" class="deep-analysis-item-error">\n    <p class="lead loading-msg">\n        <em class="fa fa-warning col-sec"></em>\n        Error loading visualisation\n    </p>\n    <button class="btn btn-sm" ng-click="submit()">Please Retry</button>\n</div>\n\n<div ng-if="queued" class="deep-analysis-item-error">\n    <p class="lead loading-msg">\n        <em class="fa fa-hourglass-1 col-sec"></em>\n        Queued\n        <small>Analysis waiting for other visualisations to complete</small>\n    </p>\n</div>\n\n<div ng-show="vm.loading" class="deep-analysis-item-error">\n    <div class="no-content">\n        <p class="lead loading-msg">\n            <em class="fa fa-bar-chart col-sec flash_loading animated infinite"></em>\n            Generating Analysis\n            <small>Shouldn\'t take too long. Thanks for your patience</small>\n        </p>\n    </div>\n</div>\n\n<div class="deep-analysis-item-content-body" ng-class="{reveal: !vm.loading && !vm.error}">\n\n    <div class="alert alert-warning" ng-if="vm.limitWarning">\n        Warning: This chart is not able to be limited to only the top 10 {{vm.fieldMap[vm.primaryFacet].label}} of all time, and may show additional values.\n        <strong class="link" ng-click="retryOverTime()">Retry</strong>\n    </div>\n\n    <div ng-show="vm.config.view === \'x-by-y\'">\n        <div lens-vega-chart\n            view="vm.vegaView"\n            raw-spec="vm.vegaSpec"\n            spec="vm.stackedBarChartSpec"\n            ng-if="vm.config.barChartType === \'stacked\' && vm.stackedBarChartSpec"\n            on-click="_clickStackedBarChart"></div>\n        <div lens-vega-chart spec="vm.groupedBarChartSpec"\n            view="vm.vegaView"\n            raw-spec="vm.vegaSpec"\n            ng-if="vm.config.barChartType === \'grouped\' && vm.groupedBarChartSpec"\n            on-click="_clickGroupedBarChart">\n        </div>\n    </div>\n\n    <div ng-if="vm.scatterPlotSpec && vm.config.view === \'scatter-plot\'">\n        <div lens-vega-chart\n            spec="vm.scatterPlotSpec"\n            view="vm.vegaView"\n            raw-spec="vm.vegaSpec"\n            on-click="clickScatterPlot"\n            scroll-notice="true"\n        ></div>\n    </div>\n\n    <div ng-if="vm.config.view === \'over-time\'">\n        <div ng-if="vm.historicalData">\n            <div lens-vega-chart\n                spec="historicalAnalysisSpec"\n                view="vm.vegaView"\n                raw-spec="vm.vegaSpec"\n                filter-extent="vm.filterExtent"\n                scroll-notice="true"\n            ></div>\n\n            <p ng-if="vm.filterExtent.length" style="margin: 10px 0 0px 0;">\n                <span class="btn btn-xs" ng-click="applySubAnalysisDateFilter(vm.filterExtent[0].getFullYear(), vm.filterExtent[1].getFullYear())">\n                    <em class="fa-filter fa"></em>\n                    Filter current results from {{vm.filterExtent[0].getFullYear()}} to {{vm.filterExtent[1].getFullYear()}}\n                </span>\n            </p>\n        </div>\n    </div>\n\n    <div ng-if="vm.config.view === \'patent-scatter\'">\n        <div lens-vega-chart spec="vm.patentScatterSpec"\n            view="vm.vegaView"\n            raw-spec="vm.vegaSpec"\n            ng-if="vm.patentScatterSpec"\n            on-click="clickPatentScatterPoint"\n            scroll-notice="true"\n        >\n            <div class="no-content">Loading...</div>\n        </div>\n    </div>\n\n    <div ng-if="vm.config.view === \'basic\' && vm.basicData">\n        <div ng-if="vm.config.basicChartType === \'map\'">\n            <div\n                lens-world-map\n                class="lens-world-map"\n                counts="vm.map.counts"\n                world-map-markers="[]"\n                tooltip-data="vm.map.tooltip"\n                country-tooltip="true"\n                colour-scheme="vm.config.mapColourScheme"\n                on-click-country="clickCountry"\n                field-name="vm.fieldMap[vm.primaryFacet].label"\n                height="500"\n                min-zoom="null"\n            ></div>\n        </div>\n        <div ng-if="vm.config.basicChartType === \'cloud\'">\n            <div\n                lens-word-cloud\n                data="vm.basicData"\n                warning="vm.wordCloudWarning"\n                height="400"\n                render-version="1"\n                on-click-item="clickWordCloud"\n            ></div>\n        </div>\n        <div ng-if="vm.config.basicChartType === \'bar-chart\'">\n            <div lens-horizontal-bar-chart\n                view="vm.vegaView"\n                raw-spec="vm.vegaSpec"\n                data="[{values: vm.basicData}]"\n                axis-label="\'Document Count\'"\n                y-axis-label="vm.fieldMap[vm.config.primaryFacet].label"\n                colour-scheme="vm.config.colourScheme"\n                element-click="clickSimpleBarChart"\n                alternate-colours="vm.config.alternateColours"\n                flip="vm.config.flip"\n                scale-type="vm.config.scaleType"\n            ></div>\n        </div>\n        <div ng-if="vm.config.basicChartType === \'logo-grid\'" class="">\n            <div class="grid-applicants-panel-inset">\n                <div class="grid-applicants grid-applicants-lens">\n                    <div class="grid-item link"\n                        ng-repeat="item in vm.basicData"\n                        ng-click="clickLogoGrid(\'author.affiliation.name.keyword\', item.label)"\n                        tooltip-title\n                        tooltip-options="{delay: 700}"\n                        tooltip-title-variable="\'Filter by Institution = \' + item.label"\n                    >\n                        <div\n                            name="item.label"\n                            lens-applicant-logo\n                            text-fallback="item.label"\n                        ></div>\n                        <img class="square-hold" ng-src="{{$root.assetLocation}}/img/square-placeholder.png" alt="placeholder"/>\n                        <b><a>{{item.value | customNumber}}</a></b>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div ng-if="vm.config.view === \'patent-facets\' && vm.basicData">\n        <div ng-if="vm.config.basicChartType === \'map\'">\n            <div\n                lens-world-map\n                class="lens-world-map"\n                counts="vm.map.counts"\n                world-map-markers="[]"\n                tooltip-data="vm.map.tooltip"\n                country-tooltip="true"\n                colour-scheme="vm.config.mapColourScheme"\n                on-click-country="clickCountry"\n                field-name="vm.fieldMap[vm.config.primaryFacet].label"\n                height="500"\n                min-zoom="null"\n            ></div>\n        </div>\n        <div ng-if="vm.config.basicChartType === \'logo-grid\'" class="">\n            <div class="grid-applicants-panel-inset">\n                <div class="grid-applicants grid-applicants-lens">\n                    <div class="grid-item link"\n                        ng-repeat="item in vm.basicData"\n                        ng-click="clickApplicantLogoGrid(\'applicant\', item.label)"\n                        tooltip-title\n                        tooltip-options="{delay: 700}"\n                        tooltip-title-variable="\'Filter by Institution = \' + item.label"\n                    >\n                        <div\n                            name="item.label"\n                            lens-applicant-logo\n                            text-fallback="item.label"\n                        ></div>\n                        <img class="square-hold" ng-src="{{$root.assetLocation}}/img/square-placeholder.png" alt="placeholder"/>\n                        <b><a>{{item.value | customNumber}}</a></b>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div ng-if="vm.config.view === \'article-scatter\'">\n        <div class="alert alert-warning" ng-if="vm.config.scaleType === \'log\' && (vm.articleScatterZeros.patents || vm.articleScatterZeros.articles)">\n            <strong>Warning!</strong>\n            Hiding\n            <span ng-if="vm.articleScatterZeros.patents">\n                {{vm.articleScatterZeros.patents}} scholarly works that have no patent citations\n                <span ng-if="vm.articleScatterZeros.articles">and</span>\n            </span>\n            <span ng-if="vm.articleScatterZeros.articles">\n                {{vm.articleScatterZeros.articles}} scholarly works that have no scholarly citations\n            </span>\n            because log scale can not display zero-values.\n            To see all scholarly works on this plot\n            <span class="styled-link" ng-click="vm.config.scaleType = \'linear\'; submit()">Try changing the scale to linear or sqrt</span>.\n        </div>\n        <div ng-if="vm.articleScatterPlotSpec">\n            <div lens-vega-chart\n                view="vm.vegaView"\n                raw-spec="vm.vegaSpec"\n                spec="vm.articleScatterPlotSpec"\n                on-click="clickArticleScatterPoint"\n                scroll-notice="true"\n            ></div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="deep-analysis-item-title">\n    <div ng-if="vm.config.title">\n        {{vm.config.title}}\n    </div>\n\n    <div ng-if="!vm.config.title">\n\n        <em class="fa fa-warning link col-sec pull-left"\n            ng-if="vm.citingPatentsCapped && !vm.ignoreJoinLimit"\n            tooltip-title="Only citing patents for the first 50,000 cited scholarly works in your result are supported at this time. Please consider refining your search further to view citing patents for all\n            cited scholarly works in your result..."\n        ></em>\n\n        <em class="fa fa-warning link col-sec pull-left"\n            ng-if="vm.wordCloudWarning"\n            tooltip-title="{{vm.wordCloudWarning}}"\n        ></em>\n\n        <div ng-if="vm.config.view === \'patent-facets\'">\n            Citing Patent Applicants\n        </div>\n\n        <div ng-if="vm.config.view === \'article-scatter\'">\n            Top Scholarly Works. Colour grouping represents\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.fieldMap[vm.config.scholarArticleScatter.color.field].label">\n                <select ng-model="vm.config.scholarArticleScatter.color.field"\n                    ng-options="o.key as o.label group by o.fieldType for o in vm.scholarScatterPlotFields"\n                    ng-change="submit()"\n                ></select>\n            </span>\n        </div>\n\n        <div ng-if="vm.config.view === \'basic\'">\n            Top\n            {{vm.limit}}\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.fieldMap[vm.config.primaryFacet].label">\n                <select ng-model="vm.config.primaryFacet" ng-change="submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n            </span>\n            by\n            Document Count\n        </div>\n\n        <div ng-if="vm.config.view === \'patent-scatter\'">\n            Top Citing Patents\n            \x3c!--\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.citingPatentScatter.x.field">\n                <select ng-model="vm.citingPatentScatter.x.field" ng-change="renderPatentScatterChart()" ng-options="field for field in vm.citingPatentFields"></select>\n            </span>\n            by\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.citingPatentScatter.y.field">\n                <select ng-model="vm.citingPatentScatter.y.field" ng-change="renderPatentScatterChart()" ng-options="field for field in vm.citingPatentFields"></select>\n            </span>,\n            ranked by\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.citingPatentScatter.sort">\n                <select ng-model="vm.citingPatentScatter.sort" ng-change="submit()">\n                    <option value="-pub_date">Publish Date ↑</option>\n                    <option value="+pub_date">Publish Date ↓</option>\n                    <option value="-cited_by_patent_count">Cited</option>\n                    <option value="-sequence_count">Sequences</option>\n                    <option value="-simple_family_size">Simple Family Size</option>\n                </select>\n            </span>\n            --\x3e\n        </div>\n\n        <div ng-if="vm.config.view === \'over-time\'">\n            Document Count\n            from {{vm.datesExtent[0]}} to {{vm.datesExtent[1]}} per\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.fieldMap[vm.config.primaryFacet].label">\n                <select ng-model="vm.config.primaryFacet" ng-change="submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n            </span>\n        </div>\n\n        <div ng-if="vm.config.view === \'scatter-plot\'">\n            Citation Comparison\n            of top {{vm.config.limit}}\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.fieldMap[vm.config.primaryFacet].label">\n                <select ng-model="vm.config.primaryFacet" ng-change="submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n            </span>\n            sorted by\n            Document Count\n        </div>\n\n        <div ng-if="vm.config.view === \'x-by-y\'" ng-if="vm.groupedBarChartData">\n            Top\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.fieldMap[vm.config.secondaryFacet].label">\n                <select ng-model="vm.config.secondaryFacet" ng-change="submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n            </span>\n            by\n            <span lens-deep-analysis-heading-control visible="vm.headingSelect" label="vm.fieldMap[vm.config.primaryFacet].label">\n                <select ng-model="vm.config.primaryFacet" ng-change="submit()">\n                    <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                        {{vm.fieldMap[k].label || k}}\n                    </option>\n                </select>\n            </span>\n            <em class="fa fa-warning col-error link"\n                tooltip-title="Facets should not match: choose another"\n                ng-if="vm.config.primaryFacet === vm.config.secondaryFacet"\n            ></em>\n            compared by\n            Document Count\n        </div>\n\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="collection-details">\n    <div class="collection-header" ng-class="{\'collection-header-collapsed\': $root.hideQueryDetails}">\n        <div class="logo collection-header-img" ng-class="{reveal: true}" style="overflow: hidden;">\n            <span>\n                <img ng-src="{{\'https://s3-us-west-2.amazonaws.com/static.lens.org/\' + $ctrl.state.dashboard.user.profilePictureKey}}" alt="">\n                \x3c!-- <img ng-src="{{$root.assetLocation + \'/\' + $ctrl.state.dashboard.user.profilePictureKey}}" alt=""> --\x3e\n                \x3c!-- <img src="https://i.imgur.com/HmvYSgx.png" ng-if="$ctrl.state.heads" alt=""> --\x3e\n                \x3c!-- <img src="https://i.imgur.com/7Fc1JB0.png" ng-if="$ctrl.state.tails" alt=""> --\x3e\n            </span>\n        </div>\n        <span class="btn btn-pri btn-xs pull-right" ng-click="$ctrl.editDashboard()" style="margin-left: 10px">\n            \x3c!--<em class="fa fa-plus-circle"></em>--\x3e\n            Create New Report\n        </span>\n        \n        <div class="btn-group btn-group-sm pull-right">\n            <a ng-click="$ctrl.state.shareDashboardPrompt = true" class="btn btn-xs" tooltip-title="Get Share URL">\n                <em class="fa fa-share-alt-square col-pri"></em>\n            </a>\n            <a ng-href="{{$ctrl.linkedInShareUrl()}}" class="btn btn-xs" tooltip-title="Share on LinkedIn">\n                <em class="fa fa-linkedin col-pri"></em>\n            </a>\n            <a ng-href="{{$ctrl.emailShareUrl()}}" class="btn btn-xs" tooltip-title="Share via Email">\n                <em class="fa fa-envelope col-pri"></em>\n            </a>\n        </div>\n        <div class="report-header-secondary-btns">\n            <div class="report-only btn btn-xxs exit-presentation-mode" \n                ng-click="$ctrl.editDashboard()" \n                >\n                \x3c!-- ng-if="$root.user.id === $ctrl.state.dashboard.user.id"--\x3e\n                <em class="fa fa-times-circle col-error"></em>\n                Exit Dashboard Report \n            </div>\n            <span class="query-details-toggle btn btn-xxs" ng-click="$root.toggleQueryDetails()">\n                <em class="fa" ng-class="{\'fa-caret-down\': $root.hideQueryDetails, \'fa-caret-up col-ter\': !$root.hideQueryDetails}"></em>\n                <span ng-if="$root.hideQueryDetails">Show Query Details</span>\n                <span ng-if="!$root.hideQueryDetails">Hide Query Details</span>\n            </span>\n        </div>\n        <h1>{{::$ctrl.state.dashboardTitle}}</h1>\n        <ul class="list-unstyled list-collection-header">\n            <li>\n                <em>{{\'common.curator\' | message}}:</em>\n                {{$ctrl.state.dashboard.user.displayName || \'Anonymous\'}}\n            </li>\n            <li>\n                <em>Contents:</em>\n                {{$ctrl.state.subAnalysisItems.length | customNumber}} visualisations\n                \x3c!-- {{$ctrl.state.totalHits | customNumber}} --\x3e\n                \x3c!-- Scholarly Works --\x3e\n            </li>\n            <li>\n                <em>Access:</em>\n                Public\n            </li>\n        </ul>\n\n        \n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n    <h3>Are you sure?</h3>\n    <div class="alert alert-danger" ng-bind-html="(\'user.collections.delete.longDesc\' | message) | unsafe"></div>\n    <div class="pull-right">\n        <a class="btn btn-sm btn-danger-txt" ng-click="close();">\n            {{::\'common.action.cancel\' | message}}\n        </a>\n        <a class="btn btn-sm btn-danger" ng-click="delete()" ng-disabled="vm.submitting">\n            {{\'common.action.delete\' | message}}\n        </a>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n    <h3>{{::\'export.action.export\' | message}}</h3>\n\n    <p class="alert alert-info" ng-if="$root.isAnon && collection.itemCount < vm.ASYNC_EXPORT_LIMIT">File will be downloaded in browser immediately.</p>\n    <p class="alert alert-warning" ng-if="$root.isAnon && collection.itemCount >= vm.ASYNC_EXPORT_LIMIT">WARNING: to export collections of over {{vm.ASYNC_EXPORT_LIMIT | customNumber}} items, you must be logged in.</p>\n\n    <p class="alert alert-info" ng-if="!$root.isAnon && collection.itemCount < vm.ASYNC_EXPORT_LIMIT">File will be downloaded in browser immediately.</p>\n    <p class="alert alert-info" ng-if="!$root.isAnon && collection.itemCount >= vm.ASYNC_EXPORT_LIMIT">Download link will be emailed to you once the export is complete.</p>\n\n    <form ng-submit="export()" ng-if="!$root.isAnon || collection.itemCount < vm.ASYNC_EXPORT_LIMIT">\n        <fieldset style="margin: 0 0 10px 0;">\n            <label for="exportFormat">{{::\'export.format\' | message}}</label>\n            <br>\n            <label class="select">\n                <select id="exportFormat" ng-model="vm.exportFormat">\n                    <option value="CSV" selected="selected">{{::\'export.format.csv\' | message}}</option>\n                    <option value="RIS">{{::\'export.format.ris\' | message}}</option>\n                    <option value="BIBTEX">{{::\'export.format.bibtex\' | message}}</option>\n                    <option value="JSON">{{::\'export.format.json\' | message}}</option>\n                </select>\n                <i></i>\n            </label>\n        </fieldset>\n\n        <fieldset style="margin: 0 0 15px 0;" ng-if="vm.exportFormat === \'CSV\' || vm.exportFormat === \'JSON\'">\n            <label>Export Fields:</label>\n            <em class="fa fa-check-circle col-ter link pull-right"\n                ng-click="selectAllExportFields(true)"\n                tooltip-title="Select All"\n            ></em>\n            <em class="fa fa-minus-circle col-error link pull-right"\n                ng-click="selectAllExportFields(false)"\n                tooltip-title="Deselect All"\n            ></em>\n            <div class="window-scroll">\n                <label ng-repeat="k in vm.exportFieldsList | filter:exportFieldFilter" class="checkbox">\n                    <input type="checkbox" ng-model="vm.exportFields[k]">\n                    <i></i>\n                    {{(\'export.fieldLabel.\' + k) | message}}\n                </label>\n            </div>\n        </fieldset>\n\n        <fieldset style="margin: 0 0 10px 0;">\n            <label for="exportFilename">{{::\'export.filename\' | message}}</label>\n            <label class="input">\n                <input id="exportFilename" ng-model="vm.exportFilename" type="text" class="full" placeholder="{{collection.title}}">\n            </label>\n        </fieldset>\n\n        <div class="pull-right">\n            <a class="btn btn-sm btn-default" ng-click="close()">\n                {{::\'common.action.cancel\' | message}}\n            </a>\n            <button class="btn btn-sm btn-pri" ng-disabled="vm.submitting">\n                {{::\'export.action.export\' | message}}\n            </button>\n        </div>\n    </form>\n</div>\n'},function(module,exports){module.exports='<div>\n    <h3>{{::\'export.action.export\' | message}}</h3>\n\n    <div ng-if="$root.isAnon">\n        <p>You must be logged in to export scholarly search results.</p>\n        <div class="pull-right">\n            <a class="btn btn-sm btn-danger-txt" ng-click="$ctrl.state.export = false">\n                {{::\'common.action.cancel\' | message}}\n            </a>\n            <a href="/lens/user/login" class="btn btn-sm btn-pri">\n                Login\n            </a>\n        </div>\n    </div>\n\n    <form ng-submit="$ctrl._export()" ng-if="!$root.isAnon" name="exportForm">\n        <p class="alert alert-info">Download link will be emailed to you once the export is complete.</p>\n\n        <fieldset style="margin: 0 0 10px 0;">\n            <label for="exportFormat">{{::\'export.format\' | message}}</label>\n            <br>\n            <label class="select">\n                <select id="exportFormat" ng-model="$ctrl.state.exportConfig.format">\n                    <option value="CSV" selected="selected">{{::\'export.format.csv\' | message}}</option>\n                    <option value="RIS">{{::\'export.format.ris\' | message}}</option>\n                    <option value="BIBTEX">{{::\'export.format.bibtex\' | message}}</option>\n                    <option value="JSON">{{::\'export.format.json\' | message}}</option>\n                </select>\n                <i></i>\n            </label>\n        </fieldset>\n\n        <fieldset style="margin: 0 0 15px 0;" ng-if="$ctrl.state.exportConfig.format === \'CSV\' || $ctrl.state.exportConfig.format === \'JSON\'">\n            <label>Export Fields:</label>\n            <em class="fa fa-check-circle col-ter link pull-right"\n                ng-click="$ctrl.selectAllExportFields(true)"\n                tooltip-title="Select All"\n            ></em>\n            <em class="fa fa-minus-circle col-error link pull-right"\n                ng-click="$ctrl.selectAllExportFields(false)"\n                tooltip-title="Deselect All"\n            ></em>\n            <div class="window-scroll">\n                <label ng-repeat="k in $ctrl.state.exportFieldsList | filter:$ctrl.exportFieldFilter" class="checkbox">\n                    <input type="checkbox" ng-model="$ctrl.state.exportConfig.fields[k]">\n                    <i></i>\n                    {{\'export.fieldLabel.\' + k | message}}\n                </label>\n            </div>\n        </fieldset>\n\n        <fieldset style="margin: 0 0 10px 0;">\n            <label for="exportFilename">{{::\'export.filename\' | message}}</label>\n            <label class="input">\n                <input id="exportFilename" name="filename" ng-model="$ctrl.state.exportConfig.filename" type="text" class="full" placeholder="lens-export" lens-url-safe />\n            </label>\n            <div class="alert alert-danger" ng-show="exportForm.filename.$error.lensUrlSafe">{{ \'export.specialCharactersNotAllowed\' | message }}</div>\n        </fieldset>\n\n        <div class="pull-right">\n            <a class="btn btn-sm btn-danger-txt" ng-click="$ctrl.state.export = false">\n                {{::\'common.action.cancel\' | message}}\n            </a>\n            <button class="btn btn-sm btn-pri" ng-disabled="exportForm.$invalid">\n                {{::\'export.action.export\' | message}}\n            </button>\n        </div>\n    </form>\n</div>\n'},function(module,exports){module.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 240 140" style="enable-background:new 0 0 240 140;" xml:space="preserve">\n<g id="Layer_1" class="st0">\n\t<polygon class="st1" points="240,177.2 240,60 240,0 219.2,0 210.4,0 189.6,0 180.7,0 159.9,0 151.1,0 130.3,0 121.5,0 100.7,0 \n\t\t91.9,0 71.1,0 62.2,0 41.4,0 32.6,0 11.8,0 3,0 3,137.2 11.8,137.2 11.8,17.5 32.6,17.5 32.6,137.2 41.4,137.2 41.4,33.3 \n\t\t62.2,33.3 62.2,137.2 71.1,137.2 71.1,52.5 91.9,52.5 91.9,137.2 100.7,137.2 100.7,40.3 121.5,40.3 121.5,137.2 130.3,137.2 \n\t\t130.3,16.2 151.1,16.2 151.1,137.2 159.9,137.2 159.9,37.5 180.7,37.5 180.7,137.2 189.6,137.2 189.6,54.7 210.4,54.7 210.4,137.2 \n\t\t219.2,137.2 219.2,87.2 240,87.2 240,137.2 \t"/>\n</g>\n<g id="Layer_1_copy">\n\t<polygon class="st2" points="179.8,-0.3 179.8,-0.1 1.9,-0.1 1.9,6.4 199.6,6.4 199.6,21.9 1.9,21.9 1.9,28.4 184.4,28.4 \n\t\t184.4,43.8 1.9,43.8 1.9,50.4 160,50.4 160,65.8 1.9,65.8 1.9,72.3 138.9,72.3 138.9,87.8 1.9,87.8 1.9,94.3 182.2,94.3 \n\t\t182.2,109.7 1.9,109.7 1.9,116.3 219.6,116.3 219.6,131.7 1.9,131.7 1.9,138.2 240,138.2 240,131.7 240,116.3 240,109.7 240,94.3 \n\t\t240,87.8 240,72.3 240,65.8 240,50.4 240,43.8 240,28.4 240,21.9 240,6.4 240,-0.1 240,-0.3 \t"/>\n</g>\n</svg>'},function(module,exports){module.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 240 140" style="enable-background:new 0 0 240 140;" xml:space="preserve">\n<g id="Layer_1" class="st0">\n\t<polygon class="st1" points="240,177.2 240,60 240,0 219.2,0 210.4,0 189.6,0 180.7,0 159.9,0 151.1,0 130.3,0 121.5,0 100.7,0 \n\t\t91.9,0 71.1,0 62.2,0 41.4,0 32.6,0 11.8,0 3,0 3,137.2 11.8,137.2 11.8,17.5 32.6,17.5 32.6,137.2 41.4,137.2 41.4,33.3 \n\t\t62.2,33.3 62.2,137.2 71.1,137.2 71.1,52.5 91.9,52.5 91.9,137.2 100.7,137.2 100.7,40.3 121.5,40.3 121.5,137.2 130.3,137.2 \n\t\t130.3,16.2 151.1,16.2 151.1,137.2 159.9,137.2 159.9,37.5 180.7,37.5 180.7,137.2 189.6,137.2 189.6,54.7 210.4,54.7 210.4,137.2 \n\t\t219.2,137.2 219.2,87.2 240,87.2 240,137.2 \t"/>\n</g>\n<g id="Layer_1_copy" class="st0">\n\t<polygon class="st1" points="179.8,-0.3 179.8,-0.1 1.9,-0.1 1.9,6.4 199.6,6.4 199.6,21.9 1.9,21.9 1.9,28.4 184.4,28.4 \n\t\t184.4,43.8 1.9,43.8 1.9,50.4 160,50.4 160,65.8 1.9,65.8 1.9,72.3 138.9,72.3 138.9,87.8 1.9,87.8 1.9,94.3 182.2,94.3 \n\t\t182.2,109.7 1.9,109.7 1.9,116.3 219.6,116.3 219.6,131.7 1.9,131.7 1.9,138.2 240,138.2 240,131.7 240,116.3 240,109.7 240,94.3 \n\t\t240,87.8 240,72.3 240,65.8 240,50.4 240,43.8 240,28.4 240,21.9 240,6.4 240,-0.1 240,-0.3 \t"/>\n</g>\n<g id="Layer_3">\n\t<path class="st2" d="M1.9-0.1v135.2l25.4-31.6c-0.4-0.7-0.6-1.5-0.6-2.4c0-2.8,2.3-5.1,5.1-5.1c0.9,0,1.7,0.2,2.4,0.6l29.1-23.7\n\t\tc-0.1-0.5-0.2-0.9-0.2-1.4c0-2.8,2.3-5.1,5.1-5.1c2.5,0,4.5,1.7,5,4.1l27.1,5.2c0.9-1.4,2.5-2.3,4.3-2.3c0.6,0,1.2,0.1,1.7,0.3\n\t\tl29.9-32.1c-0.3-0.6-0.5-1.3-0.5-2.1c0-2.8,2.3-5.1,5.1-5.1s5.1,2.3,5.1,5.1c0,0.2,0,0.4-0.1,0.6L174,56.3c0.9-0.6,1.9-1,3.1-1\n\t\tc2.8,0,5.1,2.3,5.1,5.1c0,0.7-0.2,1.4-0.4,2.1l31,32.9c0.2,0,0.4-0.1,0.7-0.1c2.8,0,5.1,2.3,5.1,5.1c0,2.8-2.3,5.1-5.1,5.1\n\t\tc-2.8,0-5.1-2.3-5.1-5.1c0-1.1,0.4-2.1,0.9-2.9l-30.4-32.3c-0.6,0.2-1.1,0.3-1.8,0.3c-2.8,0-5.1-2.3-5.1-5.1c0-0.2,0-0.4,0.1-0.6\n\t\tl-28.2-16.3c-0.9,0.6-1.9,1-3.1,1c-0.6,0-1.2-0.1-1.7-0.3l-29.9,32.1c0.3,0.6,0.5,1.3,0.5,2.1c0,2.8-2.3,5.1-5.1,5.1\n\t\tc-2.5,0-4.5-1.7-5-4.1l-27.1-5.2c-0.9,1.4-2.5,2.3-4.3,2.3c-0.9,0-1.7-0.2-2.4-0.6L36.7,99.7c0.1,0.5,0.2,0.9,0.2,1.4\n\t\tc0,2.8-2.3,5.1-5.1,5.1c-0.5,0-0.9-0.1-1.4-0.2L4.5,138.2H240V-0.1H1.9z"/>\n</g>\n</svg>'},function(module,exports){module.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 240 140" style="enable-background:new 0 0 240 140;" xml:space="preserve">\n<path class="st0" d="M0,0v140h240V0H0z M200.2,64.8c-2.1,0-4-1.4-4.7-3.3l-63.1,9.9c0,0.5,0.1,0.9,0.1,1.4c0,1.7-0.3,3.3-0.8,4.7\n\tl29.8,12c0.9-1.4,2.4-2.2,4.2-2.2c2.8,0,5,2.2,5,5s-2.2,5-5,5s-5-2.2-5-5c0-0.3,0-0.6,0.1-0.9l-29.9-12c-0.7,1.5-1.7,3-2.9,4.2\n\tl24,27.3c0.5-0.2,1.1-0.3,1.7-0.3c2.8,0,5,2.2,5,5s-2.2,5-5,5s-5-2.2-5-5c0-1.4,0.6-2.7,1.6-3.6l-23.8-27c-2.6,2-5.8,3.2-9.3,3.2\n\tc-0.4,0-0.8,0-1.2-0.1l-5.1,36c2,0.6,3.5,2.5,3.5,4.8c0,2.8-2.2,5-5,5s-5-2.2-5-5c0-2.6,2-4.7,4.5-4.9l5.1-36.1\n\tc-3.2-0.7-6-2.3-8.1-4.6l-51.3,41.1c0.6,0.8,1,1.9,1,3c0,2.8-2.2,5-5,5c-2.8,0-5-2.2-5-5s2.2-5,5-5c0.9,0,1.7,0.2,2.4,0.7l51.6-41.3\n\tc-0.8-1.1-1.4-2.4-1.9-3.7l-28.4,7.8c0,0.1,0,0.2,0,0.3c0,2.8-2.2,5-5,5c-2.8,0-5-2.2-5-5s2.2-5,5-5c1.9,0,3.6,1.1,4.4,2.7l28.3-7.8\n\tc-0.2-1-0.3-2-0.3-3.1c0-1,0.1-2,0.3-3l-36.8-10c-0.8,1.7-2.5,2.9-4.5,2.9c-2.8,0-5-2.2-5-5s2.2-5,5-5c2.8,0,5,2.2,5,5\n\tc0,0.1,0,0.1,0,0.2l36.8,10c0.6-1.8,1.6-3.5,2.8-4.9L54.8,13.4c-0.8,0.5-1.8,0.9-2.8,0.9c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5\n\tc0,1-0.3,1.9-0.8,2.7l50.8,49.5c0.7-0.6,1.4-1.2,2.2-1.6l-18.1-34c-0.4,0.1-0.9,0.2-1.4,0.2c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5\n\tc0,1.6-0.7,2.9-1.8,3.8l18.1,34c1.9-0.9,4-1.3,6.2-1.3c0.2,0,0.4,0,0.7,0l4.8-43.5c-2-0.6-3.5-2.5-3.5-4.7c0-2.8,2.2-5,5-5\n\ts5,2.2,5,5c0,2.6-2,4.7-4.5,5l-4.8,43.5c2.7,0.5,5.1,1.6,7.1,3.3l30.4-31.8c-0.3-0.6-0.5-1.3-0.5-2.1c0-2.8,2.2-5,5-5s5,2.2,5,5\n\ts-2.2,5-5,5c-1.3,0-2.5-0.5-3.3-1.3l-30.2,31.5c1.8,1.9,3,4.3,3.6,6.9l63.2-9.9c0.1-2.7,2.3-4.8,5-4.8c2.8,0,5,2.2,5,5\n\tS203,64.8,200.2,64.8z"/>\n</svg>'},function(module,exports){module.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 240 140" style="enable-background:new 0 0 240 140;" xml:space="preserve">\n<g>\n\t<rect y="114.9" class="st0" width="240" height="10.5"/>\n\t<rect y="64.6" class="st0" width="240" height="10.5"/>\n\t<rect y="89.7" class="st0" width="240" height="10.5"/>\n\t<rect y="14.3" class="st0" width="240" height="10.5"/>\n\t<rect y="39.5" class="st0" width="240" height="10.5"/>\n</g>\n</svg>\n'},function(module,exports){module.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 240 140" style="enable-background:new 0 0 240 140;" xml:space="preserve">\n<g id="Layer_1">\n\t<polygon class="st0" points="240,177.2 240,60 240,0 219.2,0 210.4,0 189.6,0 180.7,0 159.9,0 151.1,0 130.3,0 121.5,0 100.7,0 \n\t\t91.9,0 71.1,0 62.2,0 41.4,0 32.6,0 11.8,0 3,0 3,137.2 11.8,137.2 11.8,17.5 32.6,17.5 32.6,137.2 41.4,137.2 41.4,33.3 \n\t\t62.2,33.3 62.2,137.2 71.1,137.2 71.1,52.5 91.9,52.5 91.9,137.2 100.7,137.2 100.7,40.3 121.5,40.3 121.5,137.2 130.3,137.2 \n\t\t130.3,16.2 151.1,16.2 151.1,137.2 159.9,137.2 159.9,37.5 180.7,37.5 180.7,137.2 189.6,137.2 189.6,54.7 210.4,54.7 210.4,137.2 \n\t\t219.2,137.2 219.2,87.2 240,87.2 240,137.2 \t"/>\n</g>\n<g id="Layer_1_copy" class="st1">\n\t<polygon class="st2" points="1.9,0 1.9,4.2 192.9,4.2 192.9,16 1.9,16 1.9,21 179.8,21 179.8,32.8 1.9,32.8 1.9,37.8 209.6,37.8 \n\t\t209.6,49.5 1.9,49.5 1.9,54.5 194.4,54.5 194.4,66.3 1.9,66.3 1.9,71.2 170,71.2 170,83 1.9,83 1.9,88 148.9,88 148.9,99.8 \n\t\t1.9,99.8 1.9,104.7 182.2,104.7 182.2,116.5 1.9,116.5 1.9,121.5 209.6,121.5 209.6,133.3 1.9,133.3 1.9,138.2 240,138.2 \n\t\t240,133.3 240,121.5 240,116.5 240,104.7 240,99.8 240,88 240,83 240,71.2 240,66.3 240,54.5 240,49.5 240,37.8 240,32.8 240,21 \n\t\t240,16 240,4.2 240,0 \t"/>\n</g>\n</svg>'},function(module,exports){module.exports='<form ng-submit="import()">\n    <h3>{{\'user.collections.import.title\' | message}}</h3>\n    <div>\n        <div ng-if="collection.type === \'PATENT\'">\n            <p>{{\'user.collections.import.importPatentsInstruction\' | message}}</p>\n            <label for="importData">\n                Identifier Type\n            </label>\n            <label class="select">\n                <select ng-model="vm.importType">\n                    <option value="pubkey">Publication Keys</option>\n                    <option value="lens-ids">Lens IDs</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n\n        <div ng-if="collection.type !== \'PATENT\'">\n            <p>{{\'user.collections.import.importScholarInstruction\' | message}}</p>\n            <label for="importData">\n                Identifier Type\n            </label>\n            <label class="select">\n                <select ng-model="vm.importType">\n                    <option value="lens-ids">Lens IDs</option>\n                    <option value="doi">DOIs (CrossRef)</option>\n                    <option value="pmid">PMIDs (PubMed)</option>\n                    <option value="pmcid">PMCIDs (PubMed Central)</option>\n                    <option value="mag">MAG IDs (Microsoft Academic Graph)</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n        <br>\n        <label class="textarea">\n            <textarea id="importData"\n                name="importData"\n                ng-model="vm.importData"\n                placeholder="{{vm.importPlaceholders[vm.importType]}}"\n            ></textarea>\n        </label>\n        <br>\n        <div class="pull-right">\n            <span class="btn btn-sm btn-danger-txt" ng-click="close()">\n                {{\'common.action.cancel\' | message}}\n            </span>\n            <button class="btn btn-sm btn-pri" ng-disabled="vm.submitting">\n                {{\'common.action.import\' | message}}\n            </button>\n        </div>\n    </div>\n</form>\n'},function(module,exports){module.exports='<div class="better-landing-features">\n    <div class="text-center">\n        <img src="$root.assetLocation + \'/img/partners.png\'">\n    </div>\n    <div class="landing-row text-center">\n\n    </div>\n    <div class="landing-row">\n        <div class="landing-column landing-image-column">\n            <img class="landing-image" ng-src="{{$root.assetLocation + \'/img/world-map.png\'}}">\n        </div>\n        <div class="landing-column">\n            <h2>Patent Search and Analysis</h2>\n            <p class="lead">The Lens hosts more than 112 million patent records from over 95 different jurisdictions. Our patent searching capability allows use of advanced boolean functions, structured search, biological search, and classification search options to find the most relevant and important patent. </p>\n            <p class="lead">\n                112 Million Patent Records: <br>\n                • 95 jurisdictions <br>\n                • 61M patent families  <br>\n                • 550k biological patents <br>\n                • 300M patent sequences\n            </p>\n        </div>\n    </div>\n    <div class="landing-row">\n        <div class="landing-column">\n            <h2>Discover experts and potential collaborators</h2>\n            <p class="lead">Discover which scholarly articles have influenced what patents and who is using scholarly work to build products and services.</p>\n            <p class="lead">Dynamic and interrogable, these maps allow you to identify and visualise important linkages and explore networks of collaborations. The granularity allows insights into how science and scholarship are shaping patented inventions and influencing economic activity; it can lead to better partnerships and clearer pathways to delivering outcomes of value.</p>\n        </div>\n        <div class="landing-column landing-image-column">\n            <img class="landing-image" src="$root.assetLocation + \'/img/logo-grid.png\'">\n        </div>\n    </div>\n    <div class="landing-row">\n        <div class="landing-column landing-image-column">\n            <img class="landing-image" src="$root.assetLocation + \'/img/venn-diagram.png\'" style="max-width: 500px;">\n        </div>\n        <div class="landing-column">\n            <h2>Scholarly Search and Analysis</h2>\n            <p class="lead">The Lens hosts more than 188 million scholarly articles, books, theses, and conference proceedings - across various disciplines and from multiple sources.</p>\n            <p class="lead">\n                    195 million scholarly records: <br>\n                    • 103M journal articles <br>\n                    • 13.2M Books and book chapters <br>\n                    • 6.3M conference proceedings <br>\n                    • 3.7M works cited in patents <br>\n                    • 61.7M works cited by other scholarly works <br>\n                    • 1.3B scholarly citations <br>\n                </p>\n        </div>\n    </div>\n\n    <div class="landing-row">\n        <div class="landing-column">\n            <h2>Compare Institutions across different disciplines</h2>\n            <p class="lead">The Lens hosts more than 100 million patent records from over 95 different jurisdictions. Our patent searching capability allows use of advanced boolean functions, structured search, biological search, and classification search options to find the most relevant and important patent. Our analysis functions and faceted exploration tools allow drilling down and discovery of new insights, and sharing or embedding these in any website. </p>\n        </div>\n        <div class="landing-column landing-image-column">\n            <div ng-include="\'sample-bar-chart\'"></div>\n        </div>\n    </div>\n\n    <div class="landing-row">\n        <div class="landing-column landing-image-column">\n            <img class="landing-image" src="$root.assetLocation + \'/img/scatter-plot.svg\'">\n        </div>\n        <div class="landing-column">\n            <h2>Facet by Field of Study</h2>\n            <p class="lead">Create, annotate, share and promote collections comprising your patent and scholarship portfolio. Create and explore collections of documents to understand who does what, when and where, and to inform decision-making.. Markup, annotate or embed your collections, create workbooks to organise your data and share your collections with others, or keep them confidential in your account. </p>\n        </div>\n    </div>\n\n    <div class="landing-row">\n        <div class="landing-column">\n            <h2>Predict Trends over time</h2>\n            <p class="lead">The Lens extracted and identified millions of scholarly articles cited in the global patent literature, in collaboration with PubMed and CrossRef. Using this linkage, new tools and metrics were developed called International Innovation and Industry Influence Mapping - In4M. allowing one to explore and rank the degree to which research institutions influence enterprise. 200 Global Research institutions and 50 Australian research institutions were compared and ranked as part of the Nature Index in August 2017 and described in detail in Nature Biotechnology in January 2018</p>\n        </div>\n        <div class="landing-column landing-image-column">\n            <img class="landing-image" src="$root.assetLocation + \'/img/line-chart-2.svg\'">\n            \x3c!-- <img class="landing-image" src="$root.assetLocation + \'/img/institutions-over-time.svg\'"> --\x3e\n        </div>\n    </div>\n\n\n    <div class="text-center">\n        <h1 style="padding: 1em 0;">Rather watch a video?</h1>\n        <img src="$root.assetLocation + \'/img/video.png\'">\n        <br>\n        <br>\n        <br>\n    </div>\n\n    <div class="landing-row" hidden>\n        <div class="landing-column" style="min-width: 600px;">\n            <div class="video-container">\n                <iframe src="https://player.vimeo.com/video/295099740?loop=1&title=0&byline=0&portrait=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n            </div>\n        </div>\n        <div class="landing-column">\n            <h2>Watch a video instead!</h2>\n            <p class="lead">Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus impedit recusandae corrupti, eius commodi reprehenderit fuga doloribus velit ut quo, iusto vitae! Eius ex modi accusamus libero ducimus, tempore unde.</p>\n        </div>\n    </div>\n\n</div>\n'},function(module,exports){module.exports='<div>\n    <h2>Lookup ID <span>{{$ctrl.state.term}}</span>?</h2>\n    <p>\n        The search term you have entered appears to be a scholarly identifier.\n        Would you like to lookup this specific article?\n    </p>\n    <button class="btn" ng-click="$ctrl.state.looksLikeAnId = false; $ctrl._search()">\n        {{\'common.no\' | message}}\n    </button>\n    <button class="btn" ng-click="$ctrl.neverAskAboutId()">\n        Never\n    </button>\n    <button class="btn btn-pri" ng-click="$ctrl.searchId()">\n        {{\'common.yes\' | message}}\n    </button>\n</div>\n'},function(module,exports){module.exports='<div class="css-modal-overlay" ng-click="vm.showMethodology = false">\n    <div class="css-modal-wrapper" ng-click="$event.stopPropagation()">\n        <div class="css-modal-close">\n            <em class="fa fa-times link" ng-click="vm.showMethodology = false"></em>\n        </div>\n        <div class="css-modal-wrapper-inner">\n            <h3>Methodology For Influence Mapping</h3>\n            <div class="boxed-content">\n                <div ng-include="\'methodology-text\'"></div>\n\n                <h3>How to obtain a detailed open In4M Report</h3>\n                <p>Any research institution can supply with us a text file of the aggregate scholarly work product (ideally with DOI or PubMed identifiers) or with bibliographic listings covering the last thirty years and we will create and publish collections that can be used to study, mine, analyze and share with funding agencies, potential collaborators or the public.   This will comprise open collections of patents that cite each and every published work.  It can also be used to include the institution in the QUT In4M Ranking system, and will be noted as a definitive collection, curated and contributed by the Institution.</p>\n\n                <p>Lens.org will do this at no cost, as a public service, provided that the list of the institution’s scholarly works can be made public.</p>\n                </p>\n            </div>\n        </div>           \n    </div>\n</div>\n'},function(module,exports){module.exports='<a class="btn" ng-click="collectionAction(\'edit\', collection)" tooltip-title tooltip-title-variable="\'user.collections.edit.longDesc\' | message">\n    <em class="fa fa-edit"></em>\n</a>\n<a class="btn" ng-click="collectionAction(\'publish\', collection)" tooltip-title tooltip-title-variable="\'user.collections.publish.longDesc\' | message">\n    <em class="fa fa-group"></em>\n</a>\n<a class="btn" ng-click="collectionAction(\'import\', collection)" tooltip-title tooltip-title-variable="\'user.collections.import\' | message">\n    <em class="fa fa-cloud-upload"></em>\n</a>\n<a class="btn" ng-click="collection.type === \'PATENT\' ? export(collection) : collectionAction(\'export\', collection)" tooltip-title tooltip-title-variable="\'user.collections.export\' | message">\n    <em class="fa fa-cloud-download"></em>\n</a>\n<a class="btn patcite" ng-if="collection.type === \'PATENT\'" ng-href="/lens/patcite/collection/{{collection.id}}" tooltip-title tooltip-title-variable="\'user.collections.patciteview\' | message">\n    <svg class="icon-patcite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 60">\n        <path d="M72 45.9c-9.3 0-15.8-7.1-15.8-16.4 0-9.4 6.5-16.4 15.8-16.4 5.4 0 10.3 3.7 12.2 8.2l12.6-6C93.1 7.9 85.7 0.2 72 0.2c-9.6 0-17.9 3.6-23.4 9.7 -3.1-5.2-8.9-8.7-17-8.7H3.2v56.7h14.6v-19h13.8c4.1 0 7.6-0.9 10.5-2.5C45 50 57 58.8 72 58.8c13.7 0 21.1-8 24.7-15.2l-12.6-6C82.3 42.2 77.5 45.9 72 45.9zM29.3 26H17.8V13.9h11.6c3.9 0 7.1 2.2 7.1 6.1C36.4 23.8 33.3 26 29.3 26z"\n            fill="#2075BC" />\n    </svg>\n</a>\n<a class="btn" ng-click="collectionAction(\'delete\', collection)" tooltip-title tooltip-title-variable="\'user.collections.delete.longDesc\' | message">\n    <em class="fa fa-trash-o"></em>\n</a>\n'},function(module,exports){module.exports='<div class="nav-collapse">\n    <div class="nav-collapse-inner" ng-transclude></div>\n    <div class="tab-nav-drop-menu-trigger">\n        <span class="badge"><em class="fa fa-bars"></em></span>\n        <ul class="tab-nav-drop-menu" ng-transclude></ul>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="r-side-preview-panel active">\n    <div class="r-side-panel">\n        \n        \x3c!--[if lte IE 11]>\n            <div class="alert alert-danger">\n                <em class="fa fa-info-circle"></em>\n                We are having issues with Internet Explorer, please change browsers. Compatible browsers include: \n                <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a>, \n                <a href="https://www.apple.com/au/safari/" target="_blank">Safari</a>, \n                <a href="https://www.microsoft.com/en-au/windows/microsoft-edge" target="_blank">Microsoft Edge</a> or \n                <a href="https://www.google.com/chrome/" target="_blank">Chrome</a>. \n            </div>\n        <![endif]--\x3e\n        \n        <div class="page-header-tabs clearfix">\n            <h1 ng-class="{\'brand-scholar\': $ctrl.state.type === \'SCHOLAR\', \'brand-patent\': $ctrl.state.type === \'PATENT\'}">\n                New {{$ctrl.state.type | titleCase}} Search\n                <em ng-click="$root.newSearchTour()" tooltip-title="Launch Feature Tour" style="font-size: 1rem;" class="fa fa-info-circle col-sec"></em>\n            </h1>\n            <div class="header-tabs clearfix">\n                <div class="tab link" ng-click="$ctrl.setView(\'structured\')" ng-class="{active: $ctrl.state.view === \'structured\'}">\n                    Structured Search\n                </div>\n                <div class="tab link" ng-click="$ctrl.setView(\'boolean\')" ng-class="{active: $ctrl.state.view === \'boolean\'}">\n                    Query Text Editor\n                </div>\n            </div>\n        </div>\n        \n        <div ng-if="$ctrl.state.view === \'boolean\'">\n            <div lens-boolean-editor type="$ctrl.state.type"></div>\n        </div>\n\n        \n        <form ng-submit="$ctrl.submit()" ng-if="$ctrl.state.view === \'structured\'" class="structured-search-form">\n            \n            <button class="btn btn-pri btn-sm new-search-submit-btn pull-right" ng-class="{submitting: $ctrl.state.submitting}">\n                {{$ctrl.state.submitting ? \'Submitting...\' : (\'search.new\' | message)}}\n            </button>\n        \n            <div class="query-details-container query-details-container-new-search clearfix query-details-container-new-search-top-button" ng-if="$ctrl.state.view === \'structured\'">\n                <div class="query-details">\n                    <div class="query-details-query">\n                        <strong>{{$ctrl.state.type | titleCase}}  Query </strong>\n                        <strong class="query-details-equals">=</strong>\n                        <span lens-query q="$ctrl.printClause()"></span>\n                    </div>\n    \n                    <div class="query-details-filters" hidden>\n                        <strong>{{$ctrl.state.type | titleCase}}  Filters: </strong>\n                        <span class="query-details-filter-label">\n                            Insert Applied filters\n                        </span>\n                    </div>\n                </div>\n            </div>\n \n            \x3c!-- <em class="fa fa-minus-circle col-error link" ng-click="$ctrl.reset()" tooltip-title="Clear/reset Fields"></em> --\x3e\n            <div class="pull-right" hidden>\n                <label class="radio" style="display: inline-block;">\n                    <input type="radio" name="dataset" ng-model="$ctrl.state.type" value="PATENT" ng-change="$ctrl.changeType()">\n                    <i></i>\n                    {{::\'common.patents\' | message}}\n                    &nbsp;\n                </label>\n                <label class="radio" style="display: inline-block;">\n                    <input type="radio" name="dataset" ng-model="$ctrl.state.type" value="SCHOLAR" ng-change="$ctrl.changeType()">\n                    <i></i>\n                    {{::\'common.scholar\' | message}}\n                </label>\n            </div>\n\n            <div class="alert alert-danger" ng-if="!$ctrl.state.canParseQueryString">\n                <em class="fa fa-warning col-error"></em>\n                {{::\'common.alert.unable.load.query\' | message}}\n                <a ng-click="$ctrl.setView(\'boolean\')">\n                    <strong>Edit in Query Text Editor</strong>\n                </a>\n            </div>\n\n            <div class="new-search-clauses">\n                <div class="row clearfix">\n                    <div class="col-md-4">\n                        <label>\n                            {{::\'advancedPatentSearch.field\' | message}}\n                        </label>\n                    </div>\n                    <div class="col-md-8">\n                        <div class="inline-group">\n                            <label style="padding-left: 5px;" class="inline-label">{{::\'advancedPatentSearch.predicate\' | message}}:</label>\n                            <label class="radio">\n                                <input type="radio" name="predicate" ng-model="$ctrl.state.predicate" value="AND" ng-change="$ctrl.printClause()">\n                                <i></i>\n                                {{::\'common.boolean.AND\' | message}}\n                            </label>\n                            <label class="radio">\n                                <input type="radio" name="predicate" ng-model="$ctrl.state.predicate" value="OR" ng-change="$ctrl.printClause()">\n                                <i></i>\n                                {{::\'common.boolean.OR\' | message}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row row-form clearfix clause-row" ng-repeat="(i, clause) in $ctrl.state.clauses track by $index">\n                    <div class="col-md-4">\n                        <label class="select">\n                            <select ng-model="$ctrl.state.clauses[i].field" ng-options="o.key as o.label group by o.group for o in $ctrl.state.fieldList"></select>\n                            <i></i>\n                        </label>\n                    </div>\n\n                    <div class="col-md-8 search-fields-add-column">\n                        <label class="input">\n                            <input type="text" ng-model="$ctrl.state.clauses[i].value" placeholder="{{$ctrl.getPlaceholder($ctrl.state.clauses[i].field)}}">\n                        </label>\n\n                        <div class="btn-group btn-group-search-fields" style="float: none;">\n                            <a class="btn btn-icon addRow" tooltip-title="Add New Field" ng-click="$ctrl.addClause(clause)">\n                                <em class="fa fa-plus"></em>\n                            </a>\n                            <a class="btn btn-icon removeRow" tooltip-title="Remove Field" ng-click="$ctrl.removeClause(i)" ng-if="$ctrl.state.clauses.length > 1">\n                                <em class="fa fa-minus"></em>\n                            </a>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n            <hr>\n\n            <div class="row row-form clearfix">\n                <div class="col-md-12">\n                    <div class="inline-group">\n                        <label class="inline-label">{{\'search.orcid\' | message}} </label>\n                        <em tooltip-title="{{\'search.orcid.tooltip\' | message}}" style="font-size: 1rem;" class="fa fa-info-circle col-sec"></em>\n                    </div>\n                    <div class="row row-form">\n                        <div class="col-md-12">\n                            <lens-search-orcid orcid-id="$ctrl.state.orcidId"></lens-search-orcid>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row row-form clearfix new-search-scholar-filters" ng-if="$ctrl.state.type === \'SCHOLAR\'">\n\n                <label>Publication Date</label>\n\n                <div class="inline-group">\n                    <label class="radio">\n                        {{::\'scholar.facets.date.range\' | message}}\n                        <input type="radio" name="dateGroup" value="date_published" ng-model="$ctrl.state.dateFilterField" ng-change="$ctrl.resetDates()">\n                        <i></i>\n                    </label>\n                    <label class="radio">\n                        {{::\'scholar.field.dates\' | message}}\n                        <input type="radio" name="dateGroup" value="year_published" ng-model="$ctrl.state.dateFilterField" ng-change="$ctrl.resetDates()">\n                        <i></i>\n                    </label>\n                </div>\n\n                <div ng-if="$ctrl.state.dateFilterField === \'date_published\'">\n                    <div class="row row-form clearfix">\n                        <div class="col-md-6">\n                            <label class="input">\n                                <i class="icon_append fa fa-calendar"></i>\n                                <input type="text" placeholder="from" ng-model="$ctrl.state.fromYear" lens-datepicker>\n                            </label>\n                        </div>\n                        <div class="col-md-6">\n                            <label class="input">\n                                <i class="icon_append fa fa-calendar"></i>\n                                <input type="text" placeholder="to" ng-model="$ctrl.state.toYear" lens-datepicker>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div ng-if="$ctrl.state.dateFilterField === \'year_published\'">\n                    <div class="row row-form clearfix">\n                        <div class="col-md-6">\n                            <label class="input">\n                                <i class="icon_append fa fa-calendar"></i>\n                                <input type="text" placeholder="e.g. 1980" ng-model="$ctrl.state.fromYear">\n                            </label>\n                        </div>\n                        <div class="col-md-6">\n                            <label class="input ">\n                                <i class="icon_append fa fa-calendar"></i>\n                                <input type="text" placeholder="this year" ng-model="$ctrl.state.toYear">\n                            </label>\n                        </div>\n                    </div>\n\n                    <div lens-range-slider min="1840" min="2017" from="$ctrl.state.fromYear" to="$ctrl.state.toYear"></div>\n                </div>\n\n                <label>{{::\'scholar.facets.flags\' | message}}</label>\n\n                <div class="well">\n                    <label class="checkbox" ng-repeat="(k, badge) in $ctrl.state.badges" style="display: inline-block; margin-right: 1em;">\n                        <input type="checkbox" ng-model="$ctrl.state.filter.SCHOLAR[(badge.prefix || \'has_\') + k]">\n                        <i></i>\n                        {{::$root.message(\'scholar.flag.description.\' + k) || $ctrl.state.fields[k].label || k}}\n                    </label>\n                </div>\n\n                <label>Identifier Type</label>\n\n                <div class="well">\n                    <label class="checkbox tri-state-checkbox" ng-repeat="item in $ctrl.state.canned.aggregations.citation_id_type.buckets" style="display: inline-block; margin-right: 1em;">\n                        <input type="checkbox" model="$ctrl.state.filter.SCHOLAR.citation_id_type[item.key]" lens-tristate-checkbox>\n                        <i></i>\n                        {{$ctrl.state.facetFormatters.citation_id_type(item.key) || item.key}}\n                    </label>\n                </div>\n\n                <label>Publication Type</label>\n\n                <div class="well">\n                    <label class="checkbox tri-state-checkbox" ng-repeat="item in $ctrl.state.canned.aggregations.publication_type.buckets" style="display: inline-block; margin-right: 1em;">\n                        <input type="checkbox" model="$ctrl.state.filter.SCHOLAR.publication_type[item.key]" lens-tristate-checkbox>\n                        <i></i>\n                        {{$ctrl.state.facetFormatters.publication_type(item.key) || item.key}}\n                    </label>\n                </div>\n\n            </div>\n\n            <div class="new-search-patent-filters">\n                <div class="row row-form clearfix" ng-if="$ctrl.state.type === \'PATENT\'">\n                    <div class="col-md-6">\n                        <div class="inline-group">\n                            <label class="inline-label">{{::\'advancedPatentSearch.date\' | message}}: </label>\n                            <label class="radio">\n                                <input type="radio" name="dateType" value="+pub_date" ng-model="$ctrl.state.dateType">\n                                <i></i>\n                                {{::\'filters.date.type.published\' | message}}\n                            </label>\n                            <label class="radio">\n                                <input type="radio" name="dateType" value="+filing_date" ng-model="$ctrl.state.dateType">\n                                <i></i>\n                                {{::\'filters.date.type.filed\' | message}}\n                            </label>\n                            <label class="radio">\n                                <input type="radio" name="dateType" value="+earliest_priority_date" ng-model="$ctrl.state.dateType">\n                                <i></i>\n                                {{::\'filters.date.type.earliestPriority\' | message}}\n                            </label>\n                        </div>\n                        <div class="row row-form">\n                            <div class="col-md-6">\n                                <label class="input">\n                                    <i class="icon_append fa fa-calendar"></i>\n                                    <input class="dateSelect" lens-datepicker ng-model="$ctrl.state.dates[$ctrl.state.dateType].fromDate" placeholder="From" />\n                                </label>\n                            </div>\n                            <div class="col-md-6">\n                                <label class="input">\n                                    <i class="icon_append fa fa-calendar"></i>\n                                    <input class="dateSelect" lens-datepicker ng-model="$ctrl.state.dates[$ctrl.state.dateType].toDate" placeholder="To" />\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="col-md-6">\n                        <label>{{::\'patentResults.queryOptions.language\' | message}}</label>\n                        <label class="select select-query-language">\n                            <select name="l" ng-model="$ctrl.state.filter.PATENT.l">\n                                <option value="en">English</option>\n                                <option value="fr">Français</option>\n                                <option value="zh">中文简体</option>\n                                <option value="es">Español</option>\n                                <option value="ru">Русский язык</option>\n                            </select>\n                            <i></i>\n                        </label>\n                    </div>\n                </div>\n\n                <div class="row row-form clearfix" ng-if="$ctrl.state.type === \'PATENT\'">\n                    <div class="col-md-6">\n                        <label>{{::\'filters.jurisdiction.title\' | message}}</label>\n                        <div class="well jurisdictions-well">\n                            <div ng-repeat="jurisdiction in $ctrl.state.topJurisdictions">\n                                <label class="checkbox">\n                                    <input type="checkbox"\n                                        ng-model="$ctrl.state.selectedJurisdictions[jurisdiction]"\n                                    >\n                                    <i></i>\n                                    <span lens-flag jurisdiction="jurisdiction"></span>\n                                    {{$ctrl.jurisdictionName(jurisdiction)}}\n                                </label>\n                            </div>\n                            <hr>\n                            <div ng-repeat="jurisdiction in $ctrl.state.jurisdictions">\n                                <label class="checkbox">\n                                    <input type="checkbox"\n                                        ng-model="$ctrl.state.selectedJurisdictions[jurisdiction]"\n                                    >\n                                    <i></i>\n                                    <span lens-flag jurisdiction="jurisdiction"></span>\n                                    {{$ctrl.jurisdictionName(jurisdiction)}}\n                                </label>\n                            </div>\n                        </div>\n\n                        <label>{{::\'common.doc.type\' | message}}</label>\n                        <div class="well doc-type-well">\n                            <label class="checkbox" ng-repeat="item in $ctrl.state.docTypes">\n                                <input type="checkbox" ng-model="$ctrl.state.selectedDocTypes[item]">\n                                <i></i>\n                                {{item}}\n                            </label>\n                        </div>\n\n                        <label>{{::\'advancedPatentSearch.otherOptions.title\' | message}}</label>\n                        <div class="well">\n                            <div class="inline-group">\n                                <div ng-repeat="k in $ctrl.state.otherOptions">\n                                    <label class="checkbox">\n                                        <input type="checkbox" ng-model="$ctrl.state.filter.PATENT[k]">\n                                        <i></i>\n                                        {{$ctrl.otherOptionName(k)}}\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="col-md-6 ">\n                        <label>Classifications</label>\n                        <div class="well">\n                            <div lens-classification-viewer\n                                type="$ctrl.state.classificationViewer.type"\n                                term="$ctrl.state.classificationViewer.term"\n                                class="inline-classification-viewer"\n                                hide-action-buttons="true"\n                                selected="$ctrl.state.selectedClassifications"\n                            >\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row row-form clearfix">\n                <button class="btn btn-pri new-search-submit-btn" ng-class="{submitting: $ctrl.state.submitting}">\n                    {{$ctrl.state.submitting ? \'Submitting...\' : (\'search.new\' | message)}}\n                </button>\n            </div>\n        </form>\n    </div>\n    <div class="preview-panel">\n        \x3c!--<h3>Search Helpers</h3>--\x3e\n        <ul class="nav nav-tabs tab-nav">\n            <li class=""\n                ng-click="$root.structuredSearchTips = \'ss-tips\'"\n                ng-class="{active: $root.structuredSearchTips === \'ss-tips\'}">\n                Field Tips\n            </li>\n            <li class=""\n                ng-click="$root.structuredSearchTips = \'ss-dataSet\'"\n                ng-class="{active: $root.structuredSearchTips === \'ss-dataSet\'}">\n                Data Set\n            </li>\n            <li class=""\n                ng-click="$root.structuredSearchTips = \'ss-presets\'"\n                ng-class="{active: $root.structuredSearchTips === \'ss-presets\'}">\n                Presets\n            </li>\n\n        </ul>\n\n        <div class="preview-panel-body">\n            <div ng-show="$root.structuredSearchTips === \'ss-tips\'" ng-cloak>\n                <ul lens-accordion ng-if="$ctrl.state.tipsReady" class="accordion-list ui-accordion ui-widget ui-helper-reset">\n                    <li class="ui-accordion ui-widget ui-helper-reset" ng-show="$ctrl.state.view === \'boolean\'">\n                        <h5 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons">\n                            Search Tips\n                        </h5>\n                        <div ng-if="$ctrl.state.tipsReady" ng-include="\'search-tips-content\'" class="search-tips-content"></div>\n                    </li>\n                    <li ng-repeat="(k, fields) in $ctrl.state.groups[$ctrl.state.type]"\n                        ng-if="k !== \'undefined\'"\n                        class="ui-accordion ui-widget ui-helper-reset"\n                    >\n                        <h5 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons">\n                            {{(k || \'Other\') | capitalise}}\n                        </h5>\n                        <div>\n                            <div ng-repeat="field in fields" ng-click="$ctrl.addClause({field: field.key})" class="new-search-field-select link">\n                                <strong>{{field.label}}</strong><br>\n                                <span>{{field.key}}</span><br>\n                                <span class="small col-meta">{{field.definition}}</span>\n                                <div ng-if="field.example">\n                                    e.g. <em>{{field.example}}</em>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n\n\n            <div ng-show="$root.structuredSearchTips === \'ss-dataSet\'" ng-if="$ctrl.state.type === \'PATENT\'" ng-cloak>\n                <h3>Patent Data Set</h3>\n                <p>Check out the latest stats on the Lens patent data (coverage, date range, and various accessible metadata). Updates are performed on a 3-4 week basis at the present time.</p>\n                <ul class="list-styled">\n                    <li>The European Patent Office’s DocDB bibliographic data from 1907 - present: 81+ Million documents from nearly 100 jurisdictions.</li>\n                    <li>USPTO Applications from 2001 – present with full text and images.</li>\n                    <li>USPTO Grants from 1976 – present with full text and images.</li>\n                    <li>USPTO Assignments (14+ Million).</li>\n                    <li>European Patent Office (EP) Grants from 1980 – present with full text and images.</li>\n                    <li>WIPO PCT Applications from 1978 – present with full text and images.</li>\n                    <li>Australian Patent Full Text from IP Australia</li>\n                </ul>\n            </div>\n\n\n            <div ng-show="$root.structuredSearchTips === \'ss-dataSet\'" ng-if="$ctrl.state.type === \'SCHOLAR\'" ng-cloak>\n                <h3>Scholarly Data Set</h3>\n                <p>The below scholarly data sources are currently ingested and integrated in the Lens. Updates are performed on a 3-4 week basis at the present time.</p>\n                <ul class="list-styled">\n                    <li>Scholarly records from PubMed (29.0M)</li>\n                    <li>Scholarly records from Crossref (100.8M)</li>\n                    <li>Scholarly records from Microsoft Academic(163.1M)</li>\n                </ul>\n            </div>\n\n\n            <div ng-show="$root.structuredSearchTips === \'ss-presets\'" ng-if="$ctrl.state.type === \'PATENT\'" ng-cloak>\n                <h3>Preset Patent Searches</h3>\n                <p>Not sure what to compare? Here are some ideas to get you started.</p>\n                <ul class="list-cards list-cards-single">\n                    <li ng-repeat="suggestion in $ctrl.state.suggestions" ng-if="suggestion.url && suggestion.type === \'PATENT\'">\n                        <a ng-href=\'{{suggestion.url}}\'>\n                            {{::suggestion.label}}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div ng-show="$root.structuredSearchTips === \'ss-presets\'" ng-if="$ctrl.state.type === \'SCHOLAR\'" ng-cloak>\n                <h3>Preset Scholar Searches</h3>\n                <p>Not sure what to compare? Here are some ideas to get you started.</p>\n                <ul class="list-cards list-cards-single">\n                    <li ng-repeat="suggestion in $ctrl.state.suggestions" ng-if="suggestion.url && suggestion.type === \'SCHOLAR\'">\n                        <a ng-href=\'{{suggestion.url}}\'>\n                            {{::suggestion.label}}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n        </div>\n    </div>\n</div>\n\n<div ng-if="$root.showOverlay" ng-click="$root.hideOverlay()" class="global-overlay"></div>\n'},function(module,exports){module.exports='<div class="exp-window draggable exp-class-notes" ng-class="{fullscreen: fullscreen}" lens-explorer-window>\n    <header class="clearfix draggable-handle">\n        <h5 class="explorer-title pull-left">\n            Notes Editor\n        </h5>\n        <a class="pull-right" ng-click="$root.noteExplorer = {}" style="cursor: pointer">\n            <em class="fa fa-times col-error"></em>\n        </a>\n    </header>\n\n    <div class="exp-window-body" ng-controller="NoteExplorerController as $ctrl">\n        <h3>\n            <small ng-if="$ctrl.state.type === \'PATENT\'" class="pull-right col-ter" style="margin: 10px 0px;">\n                {{ $ctrl.state.key }}\n            </small>\n            {{$ctrl.state.editing ? \'Edit Note\' : \'Add Note\'}}\n        </h3>\n\n        <div ng-show="$ctrl.state.submitting" class="no-content">\n            Submitting....\n        </div>\n\n        <form ng-submit="$ctrl.submit()" ng-hide="$ctrl.state.submitting">\n\n            \x3c!-- lens-markdown-editor model="$ctrl.state.note.text" --\x3e\n            <label class="textarea">\n                <textarea required ng-model="$ctrl.state.note.text"></textarea>\n            </label>\n\n            <fieldset class="addNotes clearfix" ng-if="$ctrl.state.note.type.toUpperCase() === \'PATENT\' || $ctrl.state.type.toUpperCase() === \'PATENT\'">\n                <label>{{ "patentView.tools.notes.addNote" | message }}</label>\n                <label class="select">\n                    <select ng-model="$ctrl.state.note.scope">\n                        <option value="BASE">\n                            {{ \'common.document\' | message }}\n                        </option>\n                        <option value="ABSTRACT">\n                            {{ \'patentField.abstract\' | message }}\n                        </option>\n                        <option value="CLAIMS">\n                            {{ \'patentField.claims\' | message }}\n                        </option>\n                        <option value="INVENTORS">\n                            {{ \'patentField.inventor\' | message }}\n                        </option>\n                        <option value="APPLICANTS">\n                            {{ \'patentField.applicant\' | message }}\n                        </option>\n                        <option value="OWNERS">\n                            {{ \'patentField.assignee\' | message }}\n                        </option>\n                        <option value="CPC_CLASSIFICATIONS">\n                            {{ \'patentField.cpcClassifications\' | message }}\n                        </option>\n                        <option value="IPC_CLASSIFICATIONS">\n                            {{ \'patentField.ipcClassifications\' | message }}\n                        </option>\n                        <option value="US_CLASSIFICATIONS">\n                            {{ \'patentField.usClassifications\' | message }}\n                        </option>\n                        <option value="HISTORY">\n                            {{ \'patentField.history\' | message }}\n                        </option>\n                        <option value="FAMILYINFO">\n                            {{ \'patent.thisDocumentsFamily\' | message }}\n                        </option>\n                        \x3c!-- <option value="SEQUENCES">{{ "patentField.sequences" | message }}</option> --\x3e\n                    </select>\n                    <i></i>\n                </label>\n\n            </fieldset>\n\n            <button style="margin-top: .5em;" class="btn btn-xs btn-pri">Save Note</button>\n        </form>\n\n      </div>\n</div>\n'},function(module,exports){module.exports='<svg version="1.1"\n    id="Layer_1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 640 1000"\n    enable-background="new 0 0 640 1000" xml:space="preserve"\n>\n    <path fill="#FFFFFF" d="M609.5,559.9c-6.4-15-13.8-29.4-22.3-43.1V267.3c0-70.9-27.6-137.6-77.8-187.7\n        C459.3,29.5,392.6,1.9,321.7,1.9c0,0,0,0-0.1,0c-70.9,0-137.6,27.6-187.7,77.7c-50.2,50.1-77.8,116.8-77.8,187.7v36.3h106.3v-36.3\n        c0-42.5,16.6-82.5,46.7-112.6c30.1-30,70-46.6,112.5-46.6c0,0,0,0,0,0c87.7,0,159.1,71.4,159.1,159.1v145.1\n        c-12.1-7.2-24.8-13.6-37.9-19.2c-38.6-16.3-79.6-24.6-121.9-24.6c-42.2,0-83.3,8.3-121.9,24.6c-37.3,15.8-70.8,38.3-99.5,67.1\n        c-28.7,28.7-51.3,62.2-67.1,99.5C16.2,598.5,7.9,639.5,7.9,681.8c0,42.2,8.3,83.3,24.6,121.9c15.8,37.3,38.3,70.8,67.1,99.5\n        c28.7,28.7,62.2,51.3,99.5,67.1c38.6,16.3,79.6,24.6,121.9,24.6c42.2,0,83.3-8.3,121.9-24.6c37.3-15.8,70.8-38.3,99.5-67.1\n        c28.7-28.7,51.3-62.2,67.1-99.5c16.3-38.6,24.6-79.6,24.6-121.9C634.1,639.5,625.9,598.5,609.5,559.9z M321,888.6\n        c-114,0-206.8-92.8-206.8-206.8S207,475,321,475s206.8,92.8,206.8,206.8S435.1,888.6,321,888.6z"/>\n    <circle fill="#FFFFFF" cx="322.1" cy="682.7" r="87.7"/>\n</svg>\n'},function(module,exports){module.exports='<div class="results-analysis analysis-view clearfix analysis-items-tour-target" lens-logo-tooltip>\n\n    <div ng-if="$analysisCtrl.state.shareModal">\n        <div class="panel panel-default">\n            <div class="panel-heading clearfix">\n                <strong>{{::\'analysis.share\' | message}}</strong>\n                <div class="pull-right col-error link" ng-click="$analysisCtrl.state.shareModal = false">\n                    <em class="fa fa-times"></em>\n                    {{\'common.action.close\' | message}}\n                </div>\n            </div>\n            <div class="panel-body">\n                <form>\n                    <label>{{::\'analysis.share.text\' | message}}</label>\n                    <label class="input">\n                        <input value="{{$analysisCtrl.shareUrl()}}" select-on-click>\n                    </label>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="masonry-columns masonry-columns-1-{{$analysisCtrl.state.columns}} masonry-columns-auto preload-facets" ng-class="{\'reveal\': $analysisCtrl.state.analysisReady}">\n        <div ng-repeat="(k, data) in $analysisCtrl.state.chartData" class="masonry-card">\n            <div lens-analysis-item\n                ng-if="$analysisCtrl.selectedFacetFilter(k) && $analysisCtrl.state.ready"\n                k="k"\n                field="$analysisCtrl.state.fields[k]"\n                label-field-key="$analysisCtrl.state.isJoined ? \'citingLabel\' : \'label\'"\n                loading="$analysisCtrl.state.loadingFacet[k]"\n                data="data"\n                on-click-country="$analysisCtrl.onClickCountry"\n                on-click-item="$analysisCtrl.fieldIsClassification(k) ? $analysisCtrl.onClickClassification : $analysisCtrl.onClickItem"\n                on-click-logo-grid-item="$analysisCtrl.applyFilter"\n                on-click-get-more="$analysisCtrl.getTopFacets"\n                on-click-line-chart-point="$analysisCtrl.onClickLineChartPoint"\n                on-click-toggle-facet="$analysisCtrl.toggleFacet"\n                on-filter-year-range="$analysisCtrl.onFilterYearRange"\n            ></div>\n        </div>\n        <div class="masonry-card" ng-if="!$analysisCtrl.state.disableFacetSelection && $analysisCtrl.state.ready">\n            <div class="panel panel-add-facet">\n                <div class="panel-body">\n                    <div class="no-content">\n                        <button class="btn btn-qua btn-sm" ng-click="$analysisCtrl.showCustomiseDropdown()">\n                            <em class="fa fa-plus-circle"></em>\n                            {{::\'analysis.add.facet\' | message}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div ng-if="vm.suggestLogo" ng-include="\'suggest-logo\'"></div>\n\n</div>\n'},function(module,exports){module.exports='<header>\n    <div class="listing-header">\n\n        <div class="listing-with-sidebar">\n            <h3 style="font-size: 1rem;">\n                <a ng-href="/lens/patent/{{::patent.publicationKey}}">\n                    {{::patent.titleFallbackToDisplayKey}}\n                </a>\n            </h3>\n            <ul class="list-inline header-meta">\n                <li><strong>Published:</strong> {{::patent.publicationDate | date}}</li>\n                <li><strong>Family:</strong> {{::patent.simpleFamilySize}}</li>\n                <li><strong>Cited by:</strong> {{::patent.citedByPatentCount | customNumber}}</li>\n                <li class="meta-notices">\n                    <strong>{{::\'common.info\' | message}}:</strong>\n                    <a class="meta-full-text ttip-hov" tooltip-title="{{::\'chart.title.has_full_text.citing\' | message}}" ng-if="patent.hasFullText">\n                        <em class="fa fa-file-text-o"></em>\n                        {{::\'filters.fullText.title\' | message}}\n                    </a>\n                    <a class="meta-bio ttip-hov"\n                         tooltip-title="{{\'sequences.documentHasSequences\' | message:[patent.seqCount]}}"\n                         ng-if="patent.seqExists">\n                        <em class="icon lens-icons genome-two"></em>\n                        {{::\'sequenceSearch.blastOptions.sequence.alt\' | message}}\n                    </a>\n\n                    \x3c!--\n                    <a class="meta-pre-exist"\n                        ng-if="$ctrl.state.preExistingPatentsMap[patent.lensId]"\n                        tooltip-title="This patent seems to have an earlier priority date than the scholarly work publication date ({{patent.earliestPriorityDate | date}})">\n                        <em class="fa fa-clock-o"></em>\n                        {{::\'filters.priority.established\' | message}}\n                    </a>\n                    --\x3e\n                </li>\n\n                <li><strong>Applicant:</strong> {{::patent.applicants | simpleList}}</li>\n            </ul>\n        </div>\n\n        <div class="listing-sidebar results-doc-id">\n            <div class="results-doc-id-inner">\n                <h3 style="font-size: 1rem; margin-top: 0;">{{::patent.docType}}</h3>\n                <div class="doc-type">\n                    <span class="doc-type-flag" lens-flag jurisdiction="patent.jurisdiction"></span>\n                    <a ng-href="/lens/patent/{{::patent.publicationKey}}">\n                        {{::patent.displayKey}}\n                    </a>\n                </div>\n                <div class="doc-type">\n                    <a href="/{{::patent.lensId}}">\n                        <img class="lens-id-img" ng-src="{{::$root.assetLocation}}/fonts/svg-icons/icon-lens.svg">\n                        \x3c!-- lens.org/181-964-977-318-961 --\x3e\n                        {{::patent.lensId}}\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n    \x3c!-- <lens-coins item="patent"/> --\x3e\n</header>\n'},function(module,exports){module.exports='<div class="deep-analysis-config-item">\n    <label class="small">Sort</label>\n    <label class="select">\n        <select ng-model="vm.config.citingPatentScatter.sort" ng-change="submit()">\n            <option value="-pub_date">Publish Date ↑</option>\n            <option value="+pub_date">Publish Date ↓</option>\n            <option value="-cited_by_patent_count">Cited</option>\n            <option value="-sequence_count">Sequences</option>\n            <option value="-simple_family_size">Simple Family Size</option>\n        </select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <label class="small">X axis</label>\n    <label class="select">\n        <select ng-model="vm.config.citingPatentScatter.x.field"\n            ng-change="renderPatentScatterChart()"\n            ng-options="o.camelKey as o.label group by o.fieldType for o in vm.citingPatentFields">\n        </select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <em class="fa fa-refresh link pull-right"\n        ng-click="switchPatentScatterAxes()"\n        tooltip-title="Switch Facets"\n        style="opacity: 0.5"\n    ></em>\n    <label class="small">Y axis</label>\n    <label class="select">\n        <select ng-model="vm.config.citingPatentScatter.y.field"\n            ng-change="renderPatentScatterChart()"\n            ng-options="o.camelKey as o.label group by o.fieldType for o in vm.citingPatentFields">\n        </select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <label class="small">Colour</label>\n    <label class="select">\n        <select ng-model="vm.config.citingPatentScatter.color.field"\n            ng-change="renderPatentScatterChart()"\n            ng-options="o.camelKey as o.label group by o.fieldType for o in (vm.citingPatentFields | filter:patentColourFieldFilter)">\n        </select>\n        <i></i>\n    </label>\n</div>\n<div class="deep-analysis-config-item">\n    <label class="small">Size</label>\n    <label class="select">\n        <select ng-model="vm.config.citingPatentScatter.size.field" ng-change="renderPatentScatterChart()"\n            ng-options="o.camelKey as o.label group by o.fieldType for o in (vm.citingPatentSizeFields | filter:quantitativeFieldFilter)">\n        </select>\n        <i></i>\n    </label>\n</div>\n\n'},function(module,exports){module.exports='<div ng-if="$patentSearchCtrl.state.scholarlyQueryStats.capped && !$patentSearchCtrl.state.ignoreJoinLimit" class="alert alert-warning" ng-cloak>\n    <em class="fa fa-warning"></em>\n    <strong>Warning:</strong>\n     Only citing patents for the first 50,000 cited scholarly works in your result are supported at this time. Please consider refining your search further to view citing patents for all\n    cited scholarly works in your result...\n    <strong class="link" ng-click="$patentSearchCtrl.state.ignoreJoinLimit = true">Close Message</strong>\n</div>\n'},function(module,exports){module.exports='<div ng-if="!$patentSearchCtrl.state.scholarlySearchId" ng-cloak>\n    <div class="nav-tab-stretch nav-tab-data-sets" lens-nav ng-cloak>\n        <ul class="tab-nav-collapse clearfix">\n            <li class="is-patent"\n                ng-click="$patentSearchCtrl.changeTab(\'RESULTS\')"\n                ng-class="{\'active\': $patentSearchCtrl.tab !== \'COLLECTION_NOTES\'}"\n            >\n                <a>\n                    {{::\'results.tab.patents\' | message}}\n                    <span\n                        ng-if="$patentSearchCtrl.state.scholarlySearchId || $patentSearchCtrl.state.citesNpl"\n                        class="badge new-badge"\n                        tooltip-title="Viewing Only Patents Citing matched Scholarly Works">\n                        {{::\'results.tab.citing.badge\' | message}}\n                    </span>\n                    \x3c!-- <br><small>{{$patentSearchCtrl.state.totalPatentQueryResults | customNumber}}</small> --\x3e\n                </a>\n            </li>\n            <li class="is-scholar" ng-if="$patentSearchCtrl.state.totalPatentQueryResults">\n                <a ng-href="/lens/scholar/search/results?patentQueryId={{$patentSearchCtrl.state.patentQueryId}}&preview={{$patentSearchCtrl.state.showPreviewPanel}}&{{$patentSearchCtrl.state.currentCollection ? \'patentCollectionId=\' + $patentSearchCtrl.state.currentCollection.id : \'\'}}">\n                    {{::\'results.tab.cited\' | message}}\n                    \x3c!-- <br><small>{{($patentSearchCtrl.state.totalScholarlyResultsJoined | customNumber) || \'&nbsp;\'}}</small> --\x3e\n                </a>\n            </li>\n            <li ng-if="$patentSearchCtrl.state.currentCollection"\n                ng-click="$patentSearchCtrl.changeTab(\'COLLECTION_NOTES\')"\n                ng-class="{\'active\': $patentSearchCtrl.tab === \'COLLECTION_NOTES\'}"\n            >\n                <a>\n                    {{::(\'search.results.notesTabTitle\' | message) || \'Notes\'}}\n                    <span class="badge overallNoteCount" ng-if="$patentSearchCtrl.currentCollection.notes.length">\n                        {{$patentSearchCtrl.currentCollection.notes.length | customNumber}}\n                    </span>\n                </a>\n            </li>\n            <li class="view-mode preview-side-bar-expand" ng-if="$patentSearchCtrl.state.v !== \'analysis\' && $patentSearchCtrl.state.totalPatentQueryResults > 0">\n                <a ng-click="$patentSearchCtrl.togglePreviewPanel()" tooltip-title="Expand/Contract Preview Sidebar">\n                    <em class="fa" ng-class="{\'fa-chevron-circle-right\': $patentSearchCtrl.state.showPreviewPanel, \'fa-chevron-circle-left\': !$patentSearchCtrl.state.showPreviewPanel}"></em>\n                </a>\n            </li>\n            <li class="view-mode" ng-class="{active: $patentSearchCtrl.state.v === \'analysis\'}">\n                <a ng-href="{{$patentSearchCtrl.selfUrl(\'v\', \'analysis\')}}"\n                    tooltip-title tooltip-title-variable="\'results.graphical\' | message"\n                >\n                    <svg viewBox="0 0 2048 1792" xmlns="http://www.w3.org/2000/svg"><path d="M640 896v512h-256v-512h256zm384-512v1024h-256v-1024h256zm1024 1152v128h-2048v-1536h128v1408h1920zm-640-896v768h-256v-768h256zm384-384v1152h-256v-1152h256z"/></svg>\n                    <span>\n                        {{::\'results.graphical.view\' | message}}\n                    </span>\n                </a>\n            </li>\n            <li class="view-mode" ng-class="{active: $patentSearchCtrl.state.v === \'table\'}">\n                <a ng-href="{{$patentSearchCtrl.selfUrl(\'v\', \'table\')}}"\n                    tooltip-title tooltip-title-variable="\'results.view.summary\' | message"\n                >\n                    <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z"/></svg>\n                    <span>\n                        {{::\'results.view.list\' | message}}\n                    </span>\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>\n\n\n<div ng-if="$patentSearchCtrl.state.scholarlySearchId" ng-cloak>\n    <div class="nav-tab-stretch nav-tab-data-sets" lens-nav ng-cloak>\n        <ul class="tab-nav-collapse clearfix">\n            <li class="is-scholar">\n                <a ng-href="/lens/scholar/search/results?collectionId={{$patentSearchCtrl.state.joinQuery.collectionId}}&preview={{$patentSearchCtrl.state.showPreviewPanel}}" ng-if="$patentSearchCtrl.state.joinQuery.collectionId">\n                    {{::\'results.tab.scholar\' | message}}\n                </a>\n                <a ng-href="/lens/scholar/search/results?scholarlySearchId={{$patentSearchCtrl.state.scholarlySearchId}}&preview={{$patentSearchCtrl.state.showPreviewPanel}}" ng-if="!$patentSearchCtrl.state.joinQuery.collectionId">\n                    {{::\'results.tab.scholar\' | message}}\n                    \x3c!-- <br><small>{{$patentSearchCtrl.state.scholarUnjoinedResultSize | customNumber}}</small> --\x3e\n                </a>\n            </li>\n            <li class="is-patent active" ng-click="$root.ignoreTip(\'citing-patents\')">\n                <a>\n                    {{::\'results.tab.citing\' | message}}\n                    \x3c!--<span ng-cloak class="badge new-badge" tooltip-title="View citing patents based off your scholar search">\n                        New\n                    </span>--\x3e\n                    \x3c!-- <br><small>{{$patentSearchCtrl.state.totalPatentResultsJoined | customNumber}}</small> --\x3e\n                </a>\n            </li>\n            <li class="view-mode preview-side-bar-expand" ng-if="$patentSearchCtrl.state.v !== \'analysis\' && $patentSearchCtrl.state.totalPatentQueryResults > 0">\n                <a ng-click="$patentSearchCtrl.togglePreviewPanel()" tooltip-title="Expand/Contract Preview Sidebar">\n                    <em class="fa" ng-class="{\'fa-chevron-circle-right\': $patentSearchCtrl.state.showPreviewPanel, \'fa-chevron-circle-left\': !$patentSearchCtrl.state.showPreviewPanel}"></em>\n                </a>\n            </li>\n            <li class="view-mode" ng-class="{active: $patentSearchCtrl.state.v === \'analysis\'}">\n                <a ng-href="{{$patentSearchCtrl.selfUrl(\'v\', \'analysis\')}}"\n                    tooltip-title tooltip-title-variable="\'results.graphical\' | message"\n                >\n                    <svg viewBox="0 0 2048 1792" xmlns="http://www.w3.org/2000/svg"><path d="M640 896v512h-256v-512h256zm384-512v1024h-256v-1024h256zm1024 1152v128h-2048v-1536h128v1408h1920zm-640-896v768h-256v-768h256zm384-384v1152h-256v-1152h256z"/></svg>\n                    <span>\n                        {{::\'results.graphical.view\' | message}}\n                    </span>\n                </a>\n            </li>\n            <li class="view-mode" ng-class="{active: $patentSearchCtrl.state.v === \'table\'}">\n                <a ng-href="{{$patentSearchCtrl.selfUrl(\'v\', \'table\')}}"\n                    tooltip-title tooltip-title-variable="\'results.view.summary\' | message"\n                >\n                    <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z"/></svg>\n                    <span>\n                        {{::\'results.view.list\' | message}}\n                    </span>\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="no-content">    \n    <p class="lead loading-msg">\n        <em class="fa fa-bar-chart col-sec flash_loading animated infinite"></em>\n        {{::\'common.loading.analaysis\' | message}}\n        <small>{{::\'common.loading.thanks\' | message}}</small>\n    </p>\n</div>\n'},function(module,exports){module.exports='<div class="publish-collection">\n    <h3>Publish Collection</h3>\n    <form ng-submit="save()">\n        <label for="collectionLink">\n            {{\'user.sharing.link\' | message}}:\n        </label>\n        <label class="input">\n            <i class="icon_append fa fa-link"></i>\n            <input id="collectionLink"\n                name="collectionLink"\n                readonly="readonly"\n                class="full"\n                value="{{collection | collectionUrl}}"\n            />\n        </label>\n\n        <br/>\n\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                 {{::\'user.sharing.who\' | message}}\n            </div>\n            <div class="panel-body" style="padding-top: 0;">\n                <label class="radio">\n                    <input type="radio" ng-model="collection.access" value="RESTRICTED_ACCESS">\n                    <i></i>\n                    {{::\'user.sharing.RESTRICTED_ACCESS.info\' | message}}\n                </label>\n                <label class="radio">\n                    <input type="radio" ng-model="collection.access" value="LIMITED_ACCESS">\n                    <i></i>\n                    <div class="inline" ng-bind-html="\'user.sharing.LIMITED_ACCESS.info\' | message | unsafe"></div>\n                </label>\n                <label class="radio">\n                    <input type="radio" ng-model="collection.access" value="OPEN_ACCESS">\n                    <i></i>\n                    <div class="inline" ng-bind-html="\'user.sharing.OPEN_ACCESS.info\' | message | unsafe"></div>\n                </label>\n            </div>\n        </div>\n\n        <div class="pull-right">\n            <a class="btn btn-sm btn-danger-txt" ng-click="close()">{{\'common.action.cancel\' | message}}</a>\n            <button class="btn btn-sm btn-pri">Publish</button>\n        </div>\n    </form>\n</div>\n'},function(module,exports){module.exports='<span>\n    <span ng-if="!result">{{q}}</span>\n    <span ng-if="result">\n        <span class="field" ng-if="result.field && result.field !== \'<implicit>\'" ng-class="{invalid: !validField(result.field)}">{{formatField(result.field)}}:</span>\n        <span class="paren" ng-if="depth > 1">(</span>\n        <span class="left">\n            <span ng-if="result.left.operator">\n                <span lens-query result="result.left" depth="depth + 1"></span>\n            </span>\n            <span ng-if="!result.left.operator">\n                <span class="field" ng-if="result.left.field && result.left.field !== \'<implicit>\'" ng-class="{invalid: !validField(result.left.field)}">{{formatField(result.left.field)}}:</span>\n                <span ng-if="result.left.term_min">\n                    [<span class="term">{{result.left.term_min}}</span> <span class="operator">TO</span> <span class="term">{{result.left.term_max}}</span>]\n                </span>\n                <span ng-if="result.left.term">\n                    {{result.left.prefix}}<span class="term">{{formatTerm(result.left.term)}}</span>\n                </span>\n                <span ng-if="result.left.left.term">{{result.left.left.term}}</span>\n                <span ng-if="result.left.proximity">\n                    ~{{result.left.proximity}}\n                </span>\n            </span>\n        </span>\n        <span ng-if="result.operator && result.operator !== \'<implicit>\'" class="operator"><span class="lens-query-line"></span>{{result.operator}}</span>\n        <span class="right">\n            <span ng-if="result.right.operator">\n                <span lens-query result="result.right" depth="depth + 1"></span>\n            </span>\n            <span ng-if="!result.right.operator">\n                <span class="field" ng-if="result.right.field && result.right.field !== \'<implicit>\'" ng-class="{invalid: !validField(result.right.field)}">{{formatField(result.right.field)}}:</span>\n                <span ng-if="result.right.term_min">\n                    [<span class="term">{{result.right.term_min}}</span> <span class="operator">TO</span> <span class="term">{{result.right.term_max}}</span>]\n                </span>\n                <span ng-if="result.right.term">\n                    {{result.right.prefix}}<span class="term">{{formatTerm(result.right.term)}}</span>\n                </span>\n                <span ng-if="result.right.left.term">{{result.right.left.term}}</span>\n                <span ng-if="result.right.proximity">\n                    ~{{result.right.proximity}}\n                </span>\n            </span>\n        </span>\n        <span class="paren" ng-if="depth > 1">)</span>\n    </span>\n    \x3c!--\n    <span ng-if="depth === 1 && containsNot" style="opacity: 0.5;">\n        <em class="fa fa-warning" tooltip-title="Syntax highlighting can not be applied to this query due to a known issue in the parser library."></em>\n    </span>\n    --\x3e\n</span>\n'},function(module,exports){module.exports='<div ng-if="$root.isAnon && !$root.ignoreRegistrationWidget">\n    <h3>Register</h3>\n    <p class="">\n        {{::\'results.workspace.signup\' | message}}\n    </p>\n    <div>\n        <a href="/lens/user/registration" class="btn btn-xs btn-sec">\n            {{::\'user.registration\' | message}}\n        </a>\n        <a href="/lens/user/login" class="btn btn-xs btn-pri login-link">\n            {{::\'user.signIn.title\' | message}}\n        </a>\n        <a class="btn btn-xs" ng-click="$root.dismissRegistrationWidget()">\n            Ignore\n        </a>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="release-note-modal-container">\n    <div class="release-note-modal-header">\n        <h3>\n            <b>Release 5.15:</b>\n            New search by ORCID author/inventor, improved export functionality and bug fixes.\n        </h3>\n    </div>\n\n    <div class="release-note-modal-body row">\n        <div class="col-xs-4">\n            <em class="fa fa-user-plus first"></em>\n            <b>ORCID Lookup.</b>\n            <p>Look up an ORCID persistent digital identifier or an author/inventors’ name in the ORCID public registry.</p>\n        </div>\n\n        <div class="col-xs-4">\n            <em class="fa fa-list-ul second"></em>\n            <b>CORE identifiers.</b>\n            <p>Added CORE identifiers to scholarly work records and filter functionality for scholarly works with CORE identifiers.</p>\n        </div>\n\n        <div class="col-xs-4">\n            <em class="fa fa-cogs third"></em>\n            <b>Improvements.</b>\n            <p>Scholarly exports, Patent exports, Search bar states, filtering authors with accents in their name and more.</p>\n        </div>\n    </div>\n\n    <div class="release-note-modal-footer clearfix">\n        <a class="pull-left" href="https://about.lens.org/news/release-5-15-0/">\n            View full release notes\n        </a>\n        <button class="pull-right btn btn-pri btn-sm" ng-click="$root.closeReleaseNotesModal()">\n            Thanks, Got it\n        </button>\n    </div>\n</div>\n'},function(module,exports){module.exports='<svg class="marks sample-bar-chart" width="600" height="310" viewBox="0 0 610 310" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient id="gradient_6" x1="0" x2="0" y1="1" y2="0"><stop offset="0" stop-color="#440154"></stop><stop offset="0.04423918327661643" stop-color="#471164"></stop><stop offset="0.10500729217306758" stop-color="#482576"></stop><stop offset="0.1657754010695187" stop-color="#443983"></stop><stop offset="0.22654350996596986" stop-color="#3e4a89"></stop><stop offset="0.287311618862421" stop-color="#365c8d"></stop><stop offset="0.34807972775887214" stop-color="#2f6c8e"></stop><stop offset="0.40884783665532326" stop-color="#297a8e"></stop><stop offset="0.46961594555177444" stop-color="#23898e"></stop><stop offset="0.5303840544482256" stop-color="#1f978b"></stop><stop offset="0.5911521633446767" stop-color="#21a685"></stop><stop offset="0.6519202722411278" stop-color="#2fb47c"></stop><stop offset="0.712688381137579" stop-color="#4ac16d"></stop><stop offset="0.7734564900340302" stop-color="#6ccd5a"></stop><stop offset="0.8342245989304813" stop-color="#90d743"></stop><stop offset="0.8949927078269324" stop-color="#bade28"></stop><stop offset="0.9557608167233835" stop-color="#e2e418"></stop><stop offset="1" stop-color="#fde725"></stop></linearGradient></defs><g transform="translate(149,5)"><g class="mark-group role-frame root"><g transform="translate(0,0)"><path class="background" d="M0.5,0.5h388v282h-388Z" style="fill: none; stroke: #ddd;"></path><g><g class="mark-group role-axis"><g transform="translate(0.5,282.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-grid" style="pointer-events: none;"><line transform="translate(0,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(86,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(172,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(259,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(345,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(43,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(129,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(216,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(302,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line><line transform="translate(388,0)" x2="0" y2="-282" style="fill: none; stroke: #ddd; stroke-width: 1; opacity: 1;"></line></g></g></g></g><g class="mark-rect role-mark marks"><path d="M0,1.0846153846153754h357.44284444444446v19.523076923076925h-357.44284444444446Z" style="fill: #fde725;"></path><path d="M0,22.77692307692307h234.02435555555556v19.523076923076925h-234.02435555555556Z" style="fill: #1fa088;"></path><path d="M0,44.46923076923076h186.29173333333335v19.523076923076925h-186.29173333333335Z" style="fill: #2a778e;"></path><path d="M0,66.16153846153846h184.28275555555555v19.523076923076925h-184.28275555555555Z" style="fill: #2b758e;"></path><path d="M0,87.85384615384615h180.63555555555556v19.523076923076925h-180.63555555555556Z" style="fill: #2c728e;"></path><path d="M0,109.54615384615384h117.60711111111111v19.523076923076925h-117.60711111111111Z" style="fill: #453581;"></path><path d="M0,131.23846153846154h111.09733333333332v19.523076923076925h-111.09733333333332Z" style="fill: #472e7c;"></path><path d="M0,152.93076923076924h104.04435555555555v19.523076923076925h-104.04435555555555Z" style="fill: #482677;"></path><path d="M0,174.62307692307692h102.50097777777778v19.523076923076925h-102.50097777777778Z" style="fill: #482576;"></path><path d="M0,196.3153846153846h90.39537777777778v19.523076923076925h-90.39537777777778Z" style="fill: #481769;"></path><path d="M0,218.0076923076923h84.07528888888888v19.523076923076925h-84.07528888888888Z" style="fill: #470e61;"></path><path d="M0,239.70000000000002h77.988v19.523076923076925h-77.988Z" style="fill: #450559;"></path><path d="M0,261.39230769230767h73.66826666666667v19.523076923076925h-73.66826666666667Z" style="fill: #440154;"></path></g><g class="mark-group role-legend"><g transform="translate(406,0)"><path class="background" d="M0,0h50v216h-50Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-group role-legend-entry"><g transform="translate(0,16)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rect role-legend-gradient" style="pointer-events: none;"><path d="M0,0h16v200h-16Z" style="fill: url(#gradient_6); stroke: #ddd; stroke-width: 0; opacity: 1;"></path></g><g class="mark-text role-legend-label" style="pointer-events: none;"><text text-anchor="start" transform="translate(18,194.1521633446767)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">10,000</text><text text-anchor="start" transform="translate(18,133.38405444822558)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">20,000</text><text text-anchor="start" transform="translate(18,72.61594555177444)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">30,000</text><text text-anchor="start" transform="translate(18,11.847836655323293)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">40,000</text></g></g></g></g><g class="mark-text role-legend-title" style="pointer-events: none;"><text text-anchor="start" transform="translate(0,9)" style="font-family: sans-serif; font-size: 11px; font-weight: bold; fill: #000; opacity: 1;">value</text></g></g></g></g><g class="mark-group role-axis"><g transform="translate(0.5,282.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-tick" style="pointer-events: none;"><line transform="translate(0,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(86,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(172,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(259,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(345,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(43,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(129,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(216,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(302,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(388,0)" x2="0" y2="5" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line></g><g class="mark-text role-axis-label" style="pointer-events: none;"><text text-anchor="start" transform="translate(0,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">0</text><text text-anchor="middle" transform="translate(86.22222222222221,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">10,000</text><text text-anchor="middle" transform="translate(172.44444444444443,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">20,000</text><text text-anchor="middle" transform="translate(258.66666666666663,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">30,000</text><text text-anchor="middle" transform="translate(344.88888888888886,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 1;">40,000</text><text text-anchor="middle" transform="translate(43.11111111111111,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 0;">5,000</text><text text-anchor="middle" transform="translate(129.33333333333331,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 0;">15,000</text><text text-anchor="middle" transform="translate(215.55555555555557,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 0;">25,000</text><text text-anchor="middle" transform="translate(301.77777777777777,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 0;">35,000</text><text text-anchor="end" transform="translate(388,15)" style="font-family: sans-serif; font-size: 10px; fill: #000; opacity: 0;">45,000</text></g><g class="mark-rule role-axis-domain" style="pointer-events: none;"><line transform="translate(0,0)" x2="388" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line></g></g></g></g><g class="mark-group role-axis"><g transform="translate(0.5,0.5)"><path class="background" d="M0,0h0v0h0Z" style="pointer-events: none; fill: none;"></path><g><g class="mark-rule role-axis-tick" style="pointer-events: none;"><line transform="translate(0,10)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,32)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,53)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,75)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,97)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,118)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,140)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,162)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,183)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,205)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,227)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,248)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line><line transform="translate(0,270)" x2="-5" y2="0" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line></g><g class="mark-text role-axis-label" style="pointer-events: none;"><text text-anchor="end" transform="translate(-7,13.846153846153838)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Physics</text><text text-anchor="end" transform="translate(-7,35.53846153846153)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Computer science</text><text text-anchor="end" transform="translate(-7,57.230769230769226)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Biology</text><text text-anchor="end" transform="translate(-7,78.92307692307692)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Chemistry</text><text text-anchor="end" transform="translate(-7,100.61538461538461)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Mathematics</text><text text-anchor="end" transform="translate(-7,122.3076923076923)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Materials science</text><text text-anchor="end" transform="translate(-7,144)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Artificial intelligence</text><text text-anchor="end" transform="translate(-7,165.6923076923077)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Optics</text><text text-anchor="end" transform="translate(-7,187.3846153846154)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Engineering</text><text text-anchor="end" transform="translate(-7,209.07692307692307)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Nuclear magnetic res…</text><text text-anchor="end" transform="translate(-7,230.76923076923077)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Electronic engineering</text><text text-anchor="end" transform="translate(-7,252.46153846153848)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Molecular biology</text><text text-anchor="end" transform="translate(-7,274.15384615384613)" style="font-family: sans-serif; font-size: 13px; fill: #000; opacity: 1;">Mathematical optimiz…</text></g><g class="mark-rule role-axis-domain" style="pointer-events: none;"><line transform="translate(0,0)" x2="0" y2="282" style="fill: none; stroke: #888; stroke-width: 1; opacity: 1;"></line></g></g></g></g></g></g></g></g></svg>\n'},function(module,exports){module.exports='<h3>{{ \'user.queries.createNew\' | message }}</h3>\n<form>\n    <label class="full" for="title">{{ "common.title" | message }}</label>\n    <div style="display:none" class="alert alert-danger titleError">{{ \'error.title.required\' | message}}</div>\n    <div style="display:none" class="alert alert-danger titleTooLongError">{{ \'error.title.tooLong\' | message }}</div>\n    <label class="input">\n        <input name="title" type="text" class="full" ng-model="$ctrl.savedQuery.title"/>\n    </label>\n    <label class="full" for="text">{{ "common.description" | message}}</label>\n    <textarea class="full" ng-model="$ctrl.savedQuery.description"></textarea>\n    <div ng-if="$root.isAnon" class="alert alert-info">\n        <a href="/lens/user/login">\n            <strong>New!</strong>\n            {{::\'user.query.alert.notifications.message.anon\' | message}}\n        </a>\n    </div>\n    <label class="checkbox checkbox-multiline" ng-if="!$root.isAnon">\n        <input type="checkbox" ng-model="$ctrl.savedQuery.notificationsEnabled">\n        <i></i>\n        {{ "user.query.alert.notifications.message" | message }}\n    </label>\n    <br>\n    <div class="pull-right">\n        <button class="cancel btn btn-sm btn-danger-txt" ng-click="$ctrl.cancelSaveQuery()">{{ "common.action.cancel" | message}}</button>\n        <button class="apply btn btn-sm btn-pri" ng-click="$ctrl.saveQuery()">{{ "common.action.save" | message }}</button>\n    </div>\n</form>\n'},function(module,exports){module.exports='<div>\n    <div ng-if="!$ctrl.state.facetsLoading" class="clearfix sub-header">\n        <b class="pull-left">\n            {{::($ctrl.isJoined() ? \'analysis.preview.CITED_WORKS_ANALYSIS.title\' : \'analysis.preview.SCHOLAR_ANALYSIS.title\') | message}}\n            <div class="analysis-selector"\n                lens-scholar-analysis-selector\n                minimal="true"\n            ></div>\n        </b>\n        <a class="pull-right" ui-sref="scholar.analysis">\n            <small>\n                {{::\'analysis.preview.view.full\' | message}}\n            </small>\n        </a>\n    </div>\n\n    <div ng-if="$ctrl.state.facetsLoading" ng-include="\'preview-sidebar-loading\'"></div>\n\n    <div class="preload-facets" ng-class="{\'reveal\': $ctrl.state.analysisReady}">\n\n        <div ng-if="$ctrl.state.scholarlyAggs && $ctrl.state.facetHack">\n            <div lens-scholar-analysis\n                aggregations="$ctrl.state.scholarlyAggs"\n                is-preview="true"\n                is-cited="$ctrl.isCited()"\n            ></div>\n        </div>\n    </div>\n\n</div>\n'},function(module,exports){module.exports='<div ng-include="\'scholar-results-heading\'" class="scholar-results-heading"></div>\n\n<div id="resultContainer" ng-class="{loading: $ctrl.state.loadingCitingPatents}">\n    <div ng-include="\'scholar-search-tabs\'"></div>\n\n    <div id="resultsTable" class="div-table-results table-stretch div-table-results-analysis">\n        <div ng-include="\'scholar-toolbar\'" include-replace></div>\n    </div>\n</div>\n\n<div ng-include="\'scholar-results-common\'"></div>\n\x3c!--\n<div ng-if="$root.breakpoints.isMobile">\n    <div class="alert alert-warning">\n        <strong>Warning!</strong>\n        Mobile devices are not supported. Please view on a computer on increase your browser window size.\n    </div>\n</div>\n--\x3e\n<div lens-modal size="\'sm\'" visible="$ctrl.state.showAnalysisLimitWarning">\n    <h3>\n        Analysis only recommended for under 1 million documents\n    </h3>\n    <p class="alert alert-warning">\n        <em class="fa fa-warning col-sec"></em>\n        Analysis for large result sets can suffer from timeouts. Limiting your search by applying some filters should be able to bring your total results under 1 million.\n        \x3c!-- Recommended Filters: --\x3e\n    </p>\n    <ul hidden>\n        <li>\n            <a ng-click="$ctrl.addFilter()" class="styled-link">\n                Exclude Document Type "Unknown"\n            </a>\n            \x3c!-- (63M) --\x3e\n            <em hidden class="fa fa-info-circle col-sec link" tooltip-title="more info"></em>\n        </li>\n        <li>\n            <a ng-click="$ctrl.addFilter()" class="styled-link">\n                Only documents since 1990\n            </a>\n            \x3c!-- (41M) --\x3e\n        </li>\n        <li>\n            <a ng-click="$ctrl.addFilter()" class="styled-link">\n                Has author affiliation metadata\n            </a>\n            \x3c!-- (41M) --\x3e\n        </li>\n        <li>\n            <a ng-click="$ctrl.addFilter()" class="styled-link">\n                Apply all of the above recommended filters\n            </a>\n        </li>\n    </ul>\n\n    <div class="clearfix pull-right">\n        <a ui-sref="scholar.results" ng-click="$ctrl.exitPresentationMode()" class="btn btn-sm btn-danger-txt">\n            Back to List View\n        </a>\n        <a ng-click="$ctrl.ignoreAnalysisWarning()" class="btn btn-sm btn-danger">\n            Run the analysis anyway.\n        </a>\n    </div>\n</div>\n\n<div ng-if="$ctrl.state.facetsLoading && !$ctrl.state.aggsError">\n    <div class="no-content">\n        <p class="lead loading-msg">\n            <em class="fa fa-bar-chart col-sec flash_loading animated infinite"></em>\n            Generating Analysis\n            <small>Shouldn\'t take too long. Thanks for your patience</small>\n        </p>\n    </div>\n</div>\n\n\x3c!--!$root.breakpoints.isMobile && --\x3e\n<div ng-if="!$ctrl.state.facetsLoading && ($ctrl.state.totalHits <= 1000000 || $ctrl.state.ignoreAnalysisLimit)" class="deep-analysis-item-grid-container">\n\n    <div class="scholar-metrics-tour-target scholar-metrics report-only"\n        ng-if="!isPreview && $ctrl.state.metrics && $ctrl.state.subAnalysisItems.length"\n        ng-include="\'scholar-metrics\'"\n    >\n    </div>\n\n    <div ng-if="$ctrl.state.deepAnalysisQuickSelect || !$ctrl.state.subAnalysisItems.length" class="report-toc-offset">\n        <div ng-include="\'analysis-wizard\'"></div>\n    </div>\n\n    <div class="deep-analysis-table-of-contents">\n        <div class="deep-analysis-table-of-contents-inner-top">\n            <h3>Table of Contents</h3>\n            <ul class="deep-analysis-table-of-contents-menu">\n                <li class="deep-analysis-table-of-contents-item">\n                    <a ng-click="$root.scrollToTop()" class="link">\n                        Overview\n                    </a>\n                </li>\n                <li ng-repeat="(i, d) in $ctrl.state.subAnalysisItems track by d.t" class="deep-analysis-table-of-contents-item">\n\n                    <a ng-click="$ctrl.scrollToAnalysisItem(i)" class="link">\n                        {{d.title || \'Untitled Chart\'}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n        <div class="deep-analysis-table-of-contents-footer">\n            <h4>Create your own analysis</h4>\n            <p>Explore, discover and create insight from over 190 million scholarly records.</p>\n            <a ng-click="$ctrl.editDashboard()" class="btn btn-pri btn-large" style="width: 100%;">\n                Get Started\n            </a>\n            <a hidden ng-click="$ctrl.clearDashboard()" class="btn btn-pri btn-large">\n                <em class="fa fa-pencil"></em>\n                New\n            </a>\n        </div>\n    </div>\n\n\n    <div class="deep-analysis-item-grid" ng-class="{\'single-column\': !$ctrl.state.analysisColumns}">\n        <div ng-repeat="(i, d) in $ctrl.state.subAnalysisItems track by d.t" class="deep-analysis-item-container deep-analysis-item-grid-item">\n            <div lens-lazy-load\n                visible="$ctrl.state.showSubAnalysisItem[i]"\n                key="i"\n                active-key="$ctrl.state.subAnalysisItemsActiveKey"\n            >\n                <div lens-deep-analysis-item\n                    config="d"\n                    index="$index"\n                    click-stacked-bar-chart="$ctrl.clickStackedBarChart"\n                    click-grouped-bar-chart="$ctrl.clickGroupedBarChart"\n                    click-simple-bar-chart="$ctrl.clickSimpleBarChart"\n                    apply-sub-analysis-date-filter="$ctrl.applySubAnalysisDateFilter"\n                    request="$ctrl.state.subAnalysisRequest"\n                    filter-map="$ctrl.state.filterMap"\n                    scholarly-aggs="$ctrl.state.scholarlyAggs"\n                    scholarly-search-id="$ctrl.state.scholarlySearchId"\n                    add-filter="$ctrl.addSubAnalysisFilter"\n                    metrics="$ctrl.state.metrics"\n                    columns="$ctrl.state.analysisColumns"\n                    queued="!$ctrl.state.showSubAnalysisItem[i] || i > $ctrl.state.analysisQueue"\n                    analysis-queue="$ctrl.state.analysisQueue"\n                ></div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="$ctrl.visibleChartsCount() < $ctrl.state.subAnalysisItems.length" class="report-toc-offset text-center island">\n        <a ng-click="$ctrl.loadAllCharts()" class="btn btn-pri btn-large">\n            Load\n            {{$ctrl.state.subAnalysisItems.length - $ctrl.visibleChartsCount()}}\n            remaining charts\n        </a>\n    </div>\n\n    <div hidden class="report-only report-toc-offset" style="min-height: 40vh; display: flex; align-items: center;">\n        <a class="btn btn-large"\n            ng-click="$ctrl.clickAddChart()"\n            ng-if="!$ctrl.state.deepAnalysisQuickSelect && $ctrl.state.subAnalysisItems.length && $ctrl.state.currentStateName === \'scholar.analysis\'"\n        >\n            <em class="fa fa-plus-circle"></em>\n            Add New Chart\n        </a>\n    </div>\n\n    <div lens-modal visible="$ctrl.state.showDashboardConfig">\n        <pre ng-if="$ctrl.state.showDashboardConfig && $ctrl.state.subAnalysisItems.length">{{$ctrl.state.subAnalysisItems | json}}</pre>\n    </div>\n\n    <div lens-modal size="sm" visible="$ctrl.state.shareDashboardPrompt">\n        <h3>Share Dashboard</h3>\n\n        <div class="share-linkouts">\n            <a ng-href="{{$ctrl.linkedInShareUrl()}}" class="btn btn-sm btn-linkedin" tooltip-title="Share on LinkedIn">\n                <em class="fa fa-linkedin"></em>\n                LinkedIn\n            </a>\n            <a ng-href="{{$ctrl.facebookShareUrl()}}" class="btn btn-sm btn-facebook"  tooltip-title="Share on Facebook">\n                <em class="fa fa-facebook"></em>\n                Facebook\n            </a>\n            <a ng-href="{{$ctrl.emailShareUrl()}}" class="btn btn-sm btn-email"  tooltip-title="Share via Email">\n                <em class="fa fa-envelope-o"></em>\n                Email\n            </a>\n            <a hidden ng-href="{{$ctrl.twitterShareUrl()}}" class="btn btn-sm btn-twitter"  tooltip-title="Share on Twitter">\n                <em class="fa fa-twitter"></em>\n                Twitter\n            </a>\n        </div>\n\n        <p class="small" style="margin: 10px 0px 2px 0px;">Or copy this link to share</p>\n        <form ng-if="$ctrl.state.dashboardId" style="margin-bottom: 1em;">\n            <div class="input-group share-dash-url">\n                <label class="input">\n                    <input ng-value="$ctrl.shareUrl()" select-on-click>\n                </label>\n                <div class="input-group-addon" ng-click="$ctrl.copyShareUrl()"\n                    tooltip-title="URL copied to clipboard"\n                    tooltip-options="{trigger: \'click\'}"\n                >\n                    <em class="fa fa-link link col-ter"></em>\n                </div>\n            </div>\n        </form>\n\n\n        <div class="pull-right min-768">\n            <a ng-click="$ctrl.state.shareDashboardPrompt = false" class="btn btn-sm btn-danger-txt">\n                Close\n            </a>\n            <a ng-click="$ctrl.search()" class="btn btn-sm btn-pri link" ng-if="$ctrl.state.dashboardId">\n                View Dashboard Report\n            </a>\n        </div>\n    </div>\n\n    <div lens-modal size="sm" visible="$ctrl.state.saveDashboardPrompt">\n        <h3>\n            Save Dashboard\n        </h3>\n        <p>Please save this dashboard in order to share.</p>\n        <form ng-submit="$ctrl.saveDashboard()" ng-if="!$ctrl.state.dashboardId">\n            <label class="input">\n                <input ng-model="$ctrl.state.dashboardTitle"\n                    placeholder="Dashboard title (optional)">\n            </label>\n        </form>\n        <div class="pull-right">\n            <a ng-click="$ctrl.state.saveDashboardPrompt = false" class="btn btn-sm btn-danger-txt">\n                Cancel\n            </a>\n            <a ng-click="$ctrl.saveDashboard()"\n                class="btn btn-sm btn-pri"\n                ng-class="{\'btn-submitting\': $ctrl.state.savingDashboard}"\n            >\n                Save Dashboard\n            </a>\n        </div>\n    </div>\n\n    <div hidden>\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-donut.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-heat.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-hoz-bar.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-hoz-stacked.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-line.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-logo.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-map.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-pie.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-scatter.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-vert-bar.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-vert-stacked.png\'}}">\n        <img ng-src="{{$root.assetLocation + \'/img/chart-icons/chart-word.png\'}}">\n    </div>\n</div>\n\n'},function(module,exports){module.exports='<div ng-if="$ctrl.state.showMoreFacet">\n    <div class="exp-window draggable" ng-class="{fullscreen: fullscreen}" lens-explorer-window>\n        <header class="clearfix draggable-handle">\n            <h5 class="explorer-title pull-left">\n                Choose More:\n                <span>{{$ctrl.state.fields[$ctrl.state.showMoreFacet].label || $ctrl.state.showMoreFacet}}</span>\n            </h5>\n            <a class="pull-right" ng-click="$ctrl.state.showMoreFacet = false" style="cursor: pointer">\n                <em class="fa fa-times col-error"></em>\n            </a>\n        </header>\n\n        <div class="exp-window-body exp-class-viewer">\n            <form ng-submit="$ctrl.search()">\n                <div class="exp-scroll-window">\n                    <label class="input">\n                        <i class="icon_append fa fa-search"></i>\n                        <input ng-model="$ctrl.state.chooseMoreFilter.key" placeholder="Search {{$ctrl.state.fields[$ctrl.state.showMoreFacet].label || $ctrl.state.showMoreFacet}}">\n                    </label>\n                    <div class="exp-scroll-window-inner">\n                        <label ng-repeat="item in $ctrl.state.scholarlyAggs[$ctrl.state.showMoreFacet].buckets | filter:$ctrl.state.chooseMoreFilter" class="checkbox tri-state-checkbox">\n                            <input type="checkbox" model="$ctrl.state.filterMap[$ctrl.state.showMoreFacet][item.key]" lens-tristate-checkbox>\n                            <i></i>\n                            <div style="line-height: 20px; display: inline-block;">\n                                {{$ctrl.state.facetFormatters[$ctrl.state.showMoreFacet](item.key) || item.key}}\n                                <small>({{item.doc_count | customNumber}})</small>\n                            </div>\n                        </label>\n\n                        \x3c!-- WARNING: copy paste above, different data source. Need to merge into aggs --\x3e\n                        <label ng-repeat="item in $ctrl.state.searchFacetResults[$ctrl.state.showMoreFacet] | filter:$ctrl.state.chooseMoreFilter" class="checkbox tri-state-checkbox">\n                            <input type="checkbox" model="$ctrl.state.filterMap[$ctrl.state.showMoreFacet][item.key]" lens-tristate-checkbox>\n                            <i></i>\n                            <div style="line-height: 20px; display: inline-block;">\n                                {{item.key}}\n                                \x3c!-- <small>({{item.doc_count | customNumber}})</small> --\x3e\n                            </div>\n                        </label>\n\n                        <div ng-if="$ctrl.state.loadingFacet[$ctrl.state.showMoreFacet] || $ctrl.state.searchingFacet[$ctrl.state.showMoreFacet]" class="no-content">\n                            <em class="fa fa-refresh fa-spin fa-fw load-icon"></em> Loading...\n                        </div>\n\n                        <div class="text-center" style="padding-top: 2em; font-size: 90%;" ng-if="!$ctrl.state.searchingFacet[$ctrl.state.showMoreFacet] && ($ctrl.state.scholarlyAggs[$ctrl.state.showMoreFacet].buckets.length === 100)">\n                            <p>Don\'t see what you\'re looking for?</p>\n                            <a ng-click="$ctrl.getTopFacets($ctrl.state.showMoreFacet, 1000)" class="btn btn-pri btn-sm">\n                                Load Top 1,000\n                            </a>\n                        </div>\n                    </div>\n                    <button class="btn btn-sm btn-pri">Refine</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="">\n    <h1>Application Error</h1>\n    <p class="alert alert-danger">\n        Sorry, but we encountered an unknown problem. Please check your browser is up to date,\n        or contact Lens support at <a href="//about.lens.org/contact-us/">support@lens.org</a>\n    </p>\n    <p ng-if="$ctrl.state.error === 403">\n        This problem may be caused by your session ending. Please reload the page to try again.\n    </p>\n    <p ng-if="$ctrl.state.patentQueryId">\n        It appears this query is limited to patent search results only.\n        Sometimes\n        <a ng-click="$ctrl.togglePatentQueryId()" class="link">removing the Patent Join</a>\n        can resolve this issue.\n    </p>\n    <p>Here are some useful links to get you back on track and on your way:</p>\n    <ul>\n        <li>\n            <span class="styled-link" ng-click="$root.reset()">\n                Clear local Lens cache and reset all settings\n            </span>\n        </li>\n        <li><a href="/lens/scholar">Go to Scholar Home</a></li>\n        <li><a href="/">Go to LENS Home</a></li>\n        <li><a href="mailto:support@lens.org">Contact Support</a></li>\n    </ul>\n    <br>\n    <a href="javascript:window.location.reload()" class="btn btn-pri btn-sm">\n        <em class="fa fa-refresh"></em>\n        Reload\n    </a>\n</div>\n'},function(module,exports){module.exports='<div id="main-column">\n    \x3c!-- Content View --\x3e\n    <div class="container body-content" ui-view="content" ng-hide="$ctrl.state.looksLikeAnId">\n\n    </div>\n\n    \x3c!-- Looks like Scholarly Id prompt --\x3e\n    <div ng-if="$ctrl.state.looksLikeAnId" ng-include="\'looks-like-id\'"></div>\n\n    \x3c!-- Add To Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.addToCollection">\n        <div lens-add-to-collection\n            lens-ids="$ctrl.state.checkedItems"\n            visible="$ctrl.state.addToCollection"\n            selected-all="$ctrl.state.selectedAll"\n            search="$ctrl.createRequest()"\n            new-collection="$ctrl.state.newCollection"\n            type="\'SCHOLARLY_WORK\'"\n        ></div>\n    </div>\n\n    \x3c!-- Remove From Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.removeFromCollection">\n        <div lens-remove-from-collection\n            lens-ids="$ctrl.state.checkedItems"\n            visible="$ctrl.state.removeFromCollection"\n            search="$ctrl.createRequest()"\n            selected-all="$ctrl.state.selectedAll"\n            type="\'SCHOLARLY_WORK\'"\n        ></div>\n    </div>\n\n    \x3c!-- New Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.newCollection">\n        <div lens-create-collection\n            collection="$ctrl.state.newCollection"\n            lens-ids="$ctrl.state.checkedItems"\n            search="$ctrl.createRequest()"\n            submitting="$ctrl.state.creatingCollection"\n            selected-all="$ctrl.state.selectedAll"\n        ></div>\n    </div>\n\n    <div lens-modal size="sm" visible="$ctrl.state.export">\n        <div ng-include="\'export-scholar-search\'"></div>\n    </div>\n\n    <div lens-modal ng-cloak size="\'sm\'" visible="$ctrl.state.clearAllAnalysisPrompt">\n        <h3>Are you sure?</h3>\n        <div class="alert alert-danger">\n            This will clear all visualisations below.\n        </div>\n        <div class="pull-right">\n            <a class="btn btn-sm btn-danger-txt" ng-click="$ctrl.state.clearAllAnalysisPrompt = false;">\n                {{::\'common.action.cancel\' | message}}\n            </a>\n            <a class="btn btn-sm btn-danger" ng-click="$ctrl.clearDashboard(); $ctrl.state.clearAllAnalysisPrompt = false;">\n                Clear All\n            </a>\n        </div>\n    </div>\n\n\n    \x3c!-- Autocomplete overlay --\x3e\n    <div ng-if="$ctrl.autoCompleteVisible()" ng-click="$ctrl.clearAutocomplete()" class="global-overlay"></div>\n</div>\n<aside class="sidebar sidebar-sticky" ui-view="sidebar"></aside>\n\n<div lens-side-tabs type="\'SCHOLAR\'"></div>\n'},function(module,exports){module.exports='<div class="metrics-display">\n    <div class="item">\n        <small class="metrics-meta">Works in Set</small>\n        <h3 class="metrics-count">{{$ctrl.state.totalHits | customNumber}}</h3>\n    </div>\n\n    \x3c!-- Works Cited by Patents --\x3e\n    <a class="item link" ng-click="!$ctrl.state.filterMap.is_referenced_by_patent ? $ctrl.toggleCitedFilter() : null" >\n        <small class="metrics-meta metrics-count-{{\'Works Cited by Patents\' | slugify}}">Works Cited by Patents</small>\n        <h3 class="metrics-count">\n            {{$ctrl.state.metrics[\'Works Cited by Patents\'] | customNumber}}\n        </h3>\n    </a>\n\n    \x3c!-- Citing Patents --\x3e\n    <a class="item link" ng-if="$ctrl.state.metrics[\'Citing Patents\'] !== null" ng-href="{{$ctrl.state.patentQueryId ? \'/lens/search/\' + $ctrl.state.patentQueryId : \'/lens/search?scholarlySearchId=\' + $ctrl.state.scholarlySearchId}}">\n        <small class="metrics-meta metrics-count-{{\'Citing Patents\' | slugify}}">Citing Patents</small>\n        <h3 class="metrics-count">\n            {{$ctrl.state.metrics[\'Citing Patents\'] | customNumber}}\n        </h3>\n    </a>\n\n    \x3c!-- Patent Citations --\x3e\n    <div class="item" ng-if="$ctrl.state.metrics[\'Patent Citations\'] !== null">\n        <small class="metrics-meta metrics-count-{{\'Patent Citations\' | slugify}}">Patent Citations</small>\n        <h3 class="metrics-count ">\n            {{$ctrl.state.metrics[\'Patent Citations\'] | customNumber}}\n        </h3>\n    </div>\n\n    \x3c!-- Works Cited by Scholarly --\x3e\n    <a class="item link" ng-click="!$ctrl.state.filterMap.is_referenced_by_scholarly ? $ctrl.toggleFlag(\'is_referenced_by_scholarly\') : null" ng-click="!$ctrl.state.filterMap.is_referenced_by_scholarly ? $ctrl.toggleFlag(\'is_referenced_by_scholarly\') : null">\n        <small class="metrics-meta metrics-count-{{\'Works Cited by Scholarly\' | slugify}}">Works Cited by Scholarly</small>\n        <h3 class="metrics-count">\n            {{$ctrl.state.metrics[\'Works Cited by Scholarly\'] | customNumber}}\n        </h3>\n    </a>\n\n    \x3c!-- Citing Scholarly Works --\x3e\n    <div hidden class="item">\n        <small class="metrics-meta metrics-count-{{\'Citing Scholarly Works\' | slugify}}">Citing Scholarly Works</small>\n        <h3 class="metrics-count">\n            {{$ctrl.state.metrics[\'Citing Scholarly Works\'] | customNumber}}\n        </h3>\n    </div>\n\n    \x3c!-- Scholarly Citations --\x3e\n    <div class="item">\n        <small class="metrics-meta metrics-count-{{\'Scholarly Citations\' | slugify}}">Scholarly Citations</small>\n        <h3 class="metrics-count">\n            {{$ctrl.state.metrics[\'Scholarly Citations\'] | customNumber}}\n        </h3>\n    </div>\n\n    \x3c!-- Unavailable Citing Patents --\x3e\n    <div class="item faded" ng-if="$ctrl.state.metrics[\'Citing Patents\'] === null">\n        <small class="metrics-meta">Citing Patents</small>\n        <span class="metrics-count" style="font-size: 1.1rem">\n            N/A\n        </span>\n    </div>\n\n    \x3c!-- Unavailable Patent Citations --\x3e\n    <div class="item faded" ng-if="$ctrl.state.metrics[\'Patent Citations\'] === null">\n        <small class="metrics-meta">Patent Citations</small>\n        <span class="metrics-count" style="font-size: 1.1rem">\n            N/A\n        </span>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n    <div ng-include="\'scholar-results-heading\'"></div>\n\n    <div ng-include="\'scholar-search-tabs\'"></div>\n\n    \x3c!-- <div ng-include="\'scholar-toolbar\'" include-replace></div> --\x3e\n\n    <div lens-list-notes\n        type="COLLECTION"\n        ng-if="$ctrl.state.collection.id"\n        collection-id="$ctrl.state.collection.id"\n        is-owner="$ctrl.state.collection.user.id === $root.user.id"\n    >\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="query-details-container clearfix">\n    <div lens-applicant-logo name="$ctrl.state.singleInstitutionName" ng-if="$ctrl.state.singleInstitutionName"></div>\n    <div class="query-details">\n        <div class="query-details-query" ng-if="!$ctrl.state.patentQueryId">\n            <strong>\n                Scholarly Works\n            </strong>\n            <span class="query-details-count">\n                ({{$ctrl.state.totalHits | customNumber}})\n            </span>\n            <strong class="query-details-equals">=</strong>\n            <span ng-if="!$ctrl.state.term">All Docs</span>\n            <a ng-href="{{$ctrl.state.newSearchLink}}" class="edit-query-link pull-right btn btn-xs btn-pri">\n                <em class="fa fa-pencil"></em>\n                Edit Query\n            </a>\n            <span class="query-details-syntax-highlight" ng-if="$ctrl.state.term">\n                <span lens-query q="$ctrl.state.term" depth="1"></span>\n                <em class="fa fa-minus-circle col-error"\n                    tooltip-title="Clear query"\n                    ng-click="$ctrl.clearTerm()"\n                ></em>\n            </span>\n        </div>\n        <div class="query-details-query" ng-if="$ctrl.state.patentQueryId">\n            <strong>Patents</strong>\n            <span\n                class="query-details-count"\n                ng-if="$ctrl.state.patentQueryId && $ctrl.state.joinResultSize"\n                tooltip-title="Of the {{$ctrl.state.unjoinedResultSize | customNumber}} patent results, {{$ctrl.state.joinResultSize | customNumber}} cite these scholarly works.">\n                ({{$ctrl.state.unjoinedResultSize | customNumber}})\n            </span>\n\n            <span class="count badge" ng-if="$ctrl.state.joinQuery.filterCount" tooltip-title="{{$ctrl.state.joinQuery.filterCount}} patent filters applied">\n                {{$ctrl.state.joinQuery.filterCount}}\n            </span>\n\n            <span class="query-details-divider"></span>\n\n            <strong>\n                {{$ctrl.state.patentQueryId ? \'Cited Works\' : \'Scholarly Works\'}}\n            </strong>\n            <span class="query-details-count">\n                ({{$ctrl.state.totalHits | customNumber}})\n            </span>\n\n            \x3c!--<em ng-if="$ctrl.state.patentQueryId && $ctrl.state.joinResultSize"\n                class="fa fa-info-circle col-sec"\n                tooltip-title="Cited by {{$ctrl.state.joinResultSize | customNumber}} Patent Results"\n            ></em>--\x3e\n\n            <strong class="query-details-equals">=</strong>\n\n            <span ng-if="$ctrl.state.joinQuery.query.q">\n                <span lens-query q="$ctrl.state.joinQuery.query.q" depth="1" query-type="patents"></span>\n            </span>\n            <span ng-if="!$ctrl.state.joinQuery.query.q">All Docs</span>\n\n            <span ng-if="$ctrl.state.term">\n                <span class="col-meta-2">(</span>\n                <em>\n                    refined by\n                    <span class="query-details-syntax-highlight">\n                        <span lens-query q="$ctrl.state.term" depth="1"></span>\n                    </span>\n                    <em class="fa fa-minus-circle col-error"\n                        tooltip-title="Clear query"\n                        ng-click="$ctrl.clearTerm()"\n                    ></em>\n                </em>\n                <span class="col-meta-2">)</span>\n            </span>\n\n        </div>\n        <div class="query-details-filters">\n            <strong>{{::\'search.results.filtersLabel.scholar\' | message}}:</strong>\n            <span class="query-details-filter-label" ng-if="::!$ctrl.state.showQueryDetailsFilter && !$ctrl.state.lensIdCreatedAfter">\n                No filters applied\n            </span>\n            <span class="query-details-filter-label" ng-if="$ctrl.state.filterCounts[\'flags\']">\n                Flags\n                <strong>=</strong>\n                <span class="col-meta-2">(</span>\n                <span ng-repeat="(k, badge) in $ctrl.state.badges" ng-if="$ctrl.state.filterMap[(badge.prefix || \'has_\') + k] !== undefined">\n                    <em>\n                        <span ng-if="$ctrl.state.filterMap[(badge.prefix || \'has_\') + k] === false">excl</span>\n                        {{::$root.message(\'scholar.badge.tooltip.\' + k) || badge.tooltip}}\n                    </em>\n                    <em class="fa fa-minus-circle col-error"\n                        tooltip-title="Clear filter"\n                        ng-click="$ctrl.removeFilter((badge.prefix || \'has_\') + k)"\n                    ></em>\n                    <span ng-if="!$last">,</span>\n                </span>\n                <span class="col-meta-2">)</span>\n            </span>\n            <span class="query-details-filter-label" ng-if="$ctrl.state.fromYear || $ctrl.state.toYear">\n                {{::$ctrl.state.dateFilterField.replace(\'_\', \' \') | capitalise}}\n                <strong>=</strong>\n                <span class="col-meta-2">(</span>\n                <em>{{::$ctrl.state.fromYear}} - {{::$ctrl.state.toYear}}</em>\n                <em class="fa fa-minus-circle col-error"\n                    tooltip-title="Clear filter"\n                    ng-click="$ctrl.state.fromYear=null; $ctrl.state.toYear=null; $ctrl.search()"\n                ></em>\n                <span class="col-meta-2">)</span>\n            </span>\n            <span class="query-details-filter-label"\n                ng-repeat="(k, map) in $ctrl.state.filterMap"\n                ng-if="k.slice(0, 4) !== \'has_\' && k.slice(0, 3) !== \'is_\' && $root.filterMapEmpty(map)"\n            >\n                <span>{{$ctrl.state.fields[k].label || k}}</span>\n                <strong>=</strong>\n                <span class="col-meta-2">(</span>\n                <span ng-repeat="(value, b) in map">\n                    <em ng-if="!b">excl</em>\n                    <em>{{ $ctrl.state.facetAliases[k][value] || $ctrl.state.facetFormatters[k](value) || value}}</em>\n                    <span ng-if="k === \'reference.id\' || k === \'referenced_by\'" lens-scholarly-work-title lens-id-num="value"></span>\n                    <em class="fa fa-minus-circle col-error"\n                        tooltip-title tooltip-title-variable="\'Clear \' + ($ctrl.state.fields[k].label || k)"\n                        ng-click="$ctrl.removeFilterValue(k, value)"\n                    ></em>\n                    <span ng-if="!$last">,</span>\n                </span>\n                <span class="col-meta-2">)</span>\n            </span>\n            <span class="query-details-filter-label" ng-if="$ctrl.state.orcids">\n               ORCID Author ID\n               <strong>=</strong>\n               <span class="col-meta-2">(</span>\n                <span ng-repeat="id in $ctrl.state.orcids.split(\',\')">\n                    <em lens-orcid-author orcid-id="id">{{id}}</em>\n                    <em class="fa fa-minus-circle col-error"\n                        tooltip-title="Remove ID"\n                        ng-click="$ctrl.removeOrcidId(id)"\n                    ></em>\n                </span>\n                <span class="col-meta-2">)</span>\n            </span>\n            <span class="query-details-filter-label" ng-if="::$ctrl.state.lensIdCreatedAfter">\n                {{ \'filters.lensIdCreatedAfter\' | message }}\n               <strong>=</strong>\n               <span class="col-meta-2">(</span>\n                <em>{{ $ctrl.state.lensIdCreatedAfter }}</em>\n                <em class="fa fa-minus-circle col-error"\n                    tooltip-title="Remove Filter"\n                    ng-click="$ctrl.removeLensIdCreatedAfter()"\n                ></em>\n                <span class="col-meta-2">)</span>\n            </span>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div ng-if="$ctrl.state.error">\n    <div ng-include="\'scholar-error\'"></div>\n</div>\n\n<div ng-show="$ctrl.state.loading || ($ctrl.state.currentStateName === \'scholar.analysis\' && !$ctrl.state.analysisReady)">\n    <div ng-if="$ctrl.state.currentStateName === \'scholar.analysis\'">\n        <div ng-if="$ctrl.state.aggsError">\n            \x3c!-- {{$ctrl.state.aggsError}} --\x3e\n        </div>\n    </div>\n    <div id="resultsTable" class="div-table-results table-stretch" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'">\n        <div class="div-table-results-body div-table-results-body-alt-rows">\n            <div class="div-table-results-row" ng-show="$ctrl.state.showSlowLoadingNotice" >\n                <h3>Why is this taking so long?</h3>\n                <p class="lead">Sorry about that! Some queries like "All Documents" or\n                    Cited Works / Citing Patents joins can take a while to process.\n                    Slow queries will timeout after 30 seconds</p>\n                <p>\n                    If the page seems to load forever, please check your browser is up to date or contact Lens support at\n                    <a href="//about.lens.org/contact-us/">support@lens.org</a>\n                </p>\n            </div>\n            <div class="div-table-results-row" ng-repeat="i in [1,1,1,1,1,1,1,1,1,1] track by $index">\n                <div lens-loader></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n<div ng-hide="$ctrl.state.loading">\n\n    <div ng-show="$ctrl.state.results.length === 0">\n        \x3c!-- <span ng-bind-html="\'status.error.notMatched\' | message | unsafe"></span> --\x3e\n        <h2 class="page-title" style="margin-top: -.5em;">Your search did not match any documents.</h2>\n        <p>Query troubleshooting tips:</p>\n        <ul class="list-styled">\n            <li>Make sure that all words are spelled correctly.</li>\n            <li>Try different keywords.</li>\n            <li>Check the filters and facet values you have applied to the query.</li>\n            <li>Try simplifying your query by removing some constraints.</li>\n        </ul>\n    </div>\n</div>\n\n<div class="explorer-left-hs" ng-include="\'scholar-choose-more-explorer\'"></div>\n<div class="explorer-left-hs" ng-include="\'search-orcid-explorer\'"></div>\n'},function(module,exports){module.exports='\x3c!-- Collection Details --\x3e\n<div lens-collection-details\n    class="collection-details-container"\n    collection="$ctrl.state.collection"\n    ng-if="$ctrl.state.collection && !$ctrl.state.dashboard.id"\n></div>\n\n<div class="collection-details-container scholar-report-banner"\n    ng-if="$ctrl.state.dashboardId"\n>\n    <div ng-include="\'deep-analysis-details\'"></div>\n</div>\n\n\x3c!-- Patent Collection Loading --\x3e\n<div class="collection-header" ng-if="$ctrl.state.patentCollectionId && !$ctrl.state.collection">\n    <div class="logo collection-header-img">\n        <img>\n    </div>\n    <h1>Loading...</h1>\n    <ul class="list-unstyled list-collection-header">\n        <li></li>\n    </ul>\n</div>\n\n\x3c!-- Page Title --\x3e\n<div class="clearfix query-details-title-container" ng-hide="(!$ctrl.state.loading && $ctrl.state.results === null) || $ctrl.state.collectionId || $ctrl.state.collection || $ctrl.state.patentCollectionId">\n    <h1 class="query-details-title" ng-if="$ctrl.state.currentStateName === \'scholar.analysis\' && !$ctrl.state.dashboard.id">\n        <span>{{$ctrl.state.dashboard.label || \'Scholarly Analysis Dashboard\'}}</span>\n        <div class="btn btn-xxs query-details-toggle" ng-click="$root.toggleQueryDetails()">\n            <em class="fa" tooltip-title="Show/Hide Query Details" ng-class="{\'fa-caret-down\': $root.hideQueryDetails, \'fa-caret-up col-ter\': !$root.hideQueryDetails}"></em>\n            <span ng-if="$root.hideQueryDetails">Show Query Details</span>\n            <span ng-if="!$root.hideQueryDetails">Hide Query Details</span>\n        </div>\n        <div class="report-only btn btn-xxs exit-presentation-mode" ng-click="$ctrl.editDashboard()" ng-if="!$ctrl.state.dashboardId">\n            <em class="fa fa-times-circle col-error"></em>\n            Exit presentation mode\n        </div>\n    </div>\n    <h1 class="query-details-title" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\' && !$ctrl.state.collectionId">\n        {{$ctrl.state.patentQueryId ? \'Scholarly Works cited by Patents\' : \'Scholar Results\'}}\n        <div class="btn btn-xxs query-details-toggle" ng-click="$root.toggleQueryDetails()">\n            <em class="fa" tooltip-title="Show/Hide Query Details" ng-class="{\'fa-caret-down\': $root.hideQueryDetails, \'fa-caret-up col-ter\': !$root.hideQueryDetails}"></em>\n            <span ng-if="$root.hideQueryDetails">Show Query Details</span>\n            <span ng-if="!$root.hideQueryDetails">Hide Query Details</span>\n        </div>\n    </h1>\n</div>\n\n\x3c!-- Query Details --\x3e\n<div ng-include="\'scholar-query-details\'" class="scholar-query-details" ng-if="!$ctrl.state.error && !(($ctrl.state.currentStateName === \'scholar.results\' && $ctrl.state.loading) || ($ctrl.state.currentStateName === \'scholar.analysis\' && $ctrl.state.facetsLoading)) && $ctrl.state.results !== null && !$root.hideQueryDetails"></div>\n\n\x3c!-- Results Loading --\x3e\n<div ng-show="($ctrl.state.currentStateName === \'scholar.results\' && $ctrl.state.loading) || ($ctrl.state.currentStateName === \'scholar.analysis\' && $ctrl.state.facetsLoading && !$root.hideQueryDetails)">\n    <div class="result-loading details-loading" style="margin-top: 0px;">\n        <div class="background-masker details-block"></div>\n        <div class="background-masker details-first-line"></div>\n    </div>\n\n    <div class="metrics-loading" ng-if="!$root.hideQueryDetails">\n        <div class="metrics-loading-cell"></div>\n        <div class="metrics-loading-cell"></div>\n        <div class="metrics-loading-cell"></div>\n        <div class="metrics-loading-cell"></div>\n        <div class="metrics-loading-cell"></div>\n        <div class="metrics-loading-cell"></div>\n    </div>\n</div>\n\n<div class="scholar-metrics scholar-metrics-in-heading"\n    ng-if="$ctrl.state.metrics && !$root.hideQueryDetails"\n    ng-include="\'scholar-metrics\'"\n>\n</div>\n\n\n\x3c!-- Join Limit Warning --\x3e\n<div class="alert alert-warning join-limit-warning" ng-if="!$ctrl.state.facetsLoading && $ctrl.state.showJoinLimitWarning" ng-cloak>\n    <em class="fa fa-warning"></em>\n    Warning: only cited scholarly work for the first {{$ctrl.state.joinLimit | customNumber}} citing patents in your result are supported at this time. Please consider further refining your patent search to view all cited scholarly works in your result...\n    <strong class="link" ng-click="$ctrl.state.showJoinLimitWarning = false">Close Message</strong>\n</div>\n'},function(module,exports){module.exports='<div ng-include="\'scholar-results-heading\'"></div>\n\n<div id="resultContainer" ng-class="{loading: $ctrl.state.loadingCitingPatents}">\n    <div class="r-side-preview-panel" ng-class="{active: $ctrl.previewPanelActive()}">\n        <div class="r-side-panel">\n            <div ng-include="\'scholar-search-tabs\'" ng-if="$ctrl.state.loading || $ctrl.state.facetsLoading || $ctrl.state.results !== null"></div>\n            <div class="clearfix sidebar-target-height">\n                <div id="resultsTable" class="div-table-results table-stretch" ng-class="{unloading: $ctrl.state.loadingCitingPatents}">\n                    <div ng-hide="!$ctrl.state.loading && ($ctrl.state.results.length === 0 || $ctrl.state.results === null)">\n                        <div ng-include="\'scholar-toolbar\'" include-replace></div>\n                    </div>\n                    <div ng-hide="$ctrl.state.loading" class="div-table-results-body div-table-results-body-alt-rows">\n                        <div class="div-table-results-row" ng-include="\'article-list-item\'" ng-repeat="item in $ctrl.state.results"></div>\n                    </div>\n                </div>\n\n                <div ng-include="\'scholar-results-common\'"></div>\n\n                <div ng-hide="$ctrl.state.loading || ($ctrl.state.results.length === 0 || $ctrl.state.results === null)">\n                    <div ng-include="\'scholar-results-pagination\'"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class="preview-panel" ng-if="$ctrl.previewPanelActive()">\n            <div class="preview-panel-header clearfix">\n                <b ng-click="$ctrl.togglePreviewPanel()" class="pull-left">\n                    {{::\'common.preview\' | message}}\n                </b>\n                <form class="pull-right">\n                    <label class="select select-sm ">\n                        <select ng-model="$ctrl.state.previewType" ng-change="$ctrl.changePreviewType()">\n                            <option value="CITING_PATENTS_ANALYSIS">{{::\'analysis.preview.CITING_PATENTS_ANALYSIS.title\' | message}}</option>\n                            <option value="SCHOLAR_ANALYSIS">{{::\'analysis.preview.SCHOLAR_ANALYSIS.title\' | message}}</option>\n                        </select>\n                        <i></i>\n                    </label> \n                </form>\n            </div>\n            <div class="preview-panel-body">\n                <div ng-if="$ctrl.state.previewType === \'SCHOLAR_ANALYSIS\'"\n                    ng-include="\'scholar-analysis-preview\'"\n                ></div>\n                <div ng-if="$ctrl.state.previewType === \'CITING_PATENTS_ANALYSIS\'"\n                    lens-patent-analysis-preview\n                    loading="$ctrl.state.fetchingCitingPatentsFacetData"\n                    preview-title="\'analysis.preview.CITING_PATENTS_ANALYSIS.title\' | message"\n                    ready="$ctrl.state.citingPatentsFacetDataAvailable"\n                    full-analysis-url="$ctrl.state.patentQueryId ? $ctrl.state.citingPatentAnalysisUrl : \'/lens/search?scholarlySearchId=\' + $ctrl.state.scholarlySearchId + \'&v=analysis\'"\n                ></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div>\n\n    <ul class="pagination pull-left-md pagination-xs" ng-cloak ng-if="$ctrl.pageRange().length > 1">\n        <li>\n            <a class="settings-button fa fa-chevron-left" ng-click="$ctrl.previousPage()"></a>\n        </li>\n        <li ng-repeat="i in $ctrl.pageRange()">\n            <a ng-click="$ctrl.setPage(i)" ng-class="{active: i == $ctrl.state.page}">{{i + 1}}</a>\n        </li>\n        <li>\n            <a class="settings-button fa fa-chevron-right" ng-click="$ctrl.nextPage()"></a>\n        </li>\n    </ul>\n\n    <form id="searchOptions" class="pull-right-md">\n        <label class="select select-sm" for="n">\n            <select ng-model="$ctrl.state.limit" class="top bottom"\n                ng-options="o as \'Show \' + o + \' Results\' for o in [\'10\',\'20\',\'50\',\'100\']"\n                ng-change="$ctrl.search()"\n            ></select>\n            <i></i>\n        </label>\n    </form>\n\n</div>\n'},function(module,exports){module.exports='<div class="panel panel-default">\n    <div class="panel-body">\n\n        <div class="form-group well inline-group">\n            <legend>{{::\'scholar.common.articles\' | message}}</legend>\n            <label class="radio">\n                {{::\'scholar.field.dates\' | message}}\n                <input type="radio" name="dateGroup" value="year_published" ng-model="$ctrl.state.dateFilterField" ng-change="$ctrl.resetDates()">\n                <i></i>\n            </label>\n            <label class="radio">\n                {{::\'scholar.facets.date.range\' | message}}\n                <input type="radio" name="dateGroup" value="date_published" ng-model="$ctrl.state.dateFilterField" ng-change="$ctrl.resetDates()">\n                <i></i>\n            </label>\n        </div>\n\n        <div ng-if="$ctrl.state.dateFilterField === \'date_published\'">\n            \x3c!--\n            <p class="alert alert-info" style="font-size: .8rem;">\n                Warning: Specifying an exact date range may exclude results which only have a "year" publication date.\n                <a ng-click="$ctrl.state.dateFilterField = \'year_published\'">\n                        To filter by years, click here\n                </a>\n            </p>\n            --\x3e\n            <div class="row row-form clearfix">\n                <div class="col-sm-6">\n                    <label class="input">\n                        <i class="icon_append fa fa-calendar"></i>\n                        <input type="text" placeholder="from" ng-model="$ctrl.state.fromYear" lens-datepicker>\n                    </label>\n                </div>\n                <div class="col-sm-6">\n                    <label class="input">\n                        <i class="icon_append fa fa-calendar"></i>\n                        <input type="text" placeholder="to" ng-model="$ctrl.state.toYear" lens-datepicker>\n                    </label>\n                </div>\n            </div>\n\n            <label class="select hidden">\n                <select>\n                    <option>{{::\'filters.date.range.custom\' | message}}</option>\n                    <option>{{::\'filters.date.range.threeMonths\' | message}}</option>\n                    <option>{{::\'filters.date.range.yearToDate\' | message}}</option>\n                    <option>{{::\'filters.date.range.year\' | message}}</option>\n                </select>\n                <i></i>\n            </label>\n\n        </div>\n\n        <div ng-if="$ctrl.state.dateFilterField === \'year_published\'">\n\n            <div class="row row-form clearfix">\n                <div class="col-sm-6">\n                    <label class="input">\n                        <i class="icon_append fa fa-calendar"></i>\n                        <input type="text" placeholder="e.g. 1980" ng-model="$ctrl.state.fromYear">\n                    </label>\n                </div>\n                <div class="col-sm-6">\n                    <label class="input ">\n                        <i class="icon_append fa fa-calendar"></i>\n                        <input type="text" placeholder="this year" ng-model="$ctrl.state.toYear">\n                    </label>\n                </div>\n            </div>\n\n            <div lens-range-slider min="1840" min="2017" from="$ctrl.state.fromYear" to="$ctrl.state.toYear">\n            </div>\n        </div>\n\n        <div class="facetBottomButtons clearfix">\n            <div class="pull-right">\n                <button class="btn btn-danger btn-xxs" ng-if="$ctrl.state.fromYear || $ctrl.state.toYear" ng-click="$ctrl.state.fromYear=null; $ctrl.state.toYear=null; $ctrl.search()">\n                    {{::\'filters.common.clear\' | message}}\n                </button>\n                <button class="btn btn-pri btn-xxs">\n                    {{::\'filters.common.refine\' | message}}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n'},function(module,exports){module.exports='<li class="ui-accordion ui-widget ui-helper-reset">\n    <h5 ng-click="$ctrl.state.showFacet[k] = !$ctrl.state.showFacet[k]"\n        class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"\n        ng-class="{\'ui-accordion-header-active ui-state-active\': $ctrl.state.showFacet[k]}"\n    >\n        {{::$root.message(\'scholar.field.\' + k) || $ctrl.state.fields[k].label || k}}\n\n        <em class="fa fa-info-circle icon-info" ng-if="$ctrl.state.fields[k].fieldInformation" tooltip-title="{{$ctrl.state.fields[k].fieldInformation}}"></em>\n        <span class="count badge" ng-if="$ctrl.state.filterCounts[k]">{{::$ctrl.state.filterCounts[k]}}</span>\n\n    </h5>\n    <div ng-show="$ctrl.state.showFacet[k]" class="filterGroup">\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div class="alert alert-info" ng-if="!$ctrl.state.scholarlyAggs[k].buckets.length && !$ctrl.state.facetsLoading">\n                    No data available\n                </div>\n\n                <ul class="list-unstyled list-facets">\n                    <li ng-repeat="item in $ctrl.state.scholarlyAggs[k].buckets | limitTo:10">\n                        <label class="checkbox tri-state-checkbox">\n                            <input type="checkbox" model="$ctrl.state.filterMap[k][item.key]" lens-tristate-checkbox>\n                            <i></i>\n                            <div>\n                                {{:: $ctrl.state.facetFormatters[k](item.key) || item.key}}\n                                <em class="fa fa-info-circle icon-info col-meta-2 pull-right inner-info-icon" ng-if="k === \'open_access.license\' && $ctrl.state.OpenAccessLicenses[item.key]"\n                                    tooltip-title="{{$ctrl.state.OpenAccessLicenses[item.key]}}"\n                                ></em>\n\n                                <em class="fa fa-info-circle icon-info col-meta-2 pull-right inner-info-icon" ng-if="k === \'open_access.colour\' && $ctrl.state.OpenAccessColours[item.key]"\n                                    tooltip-title="{{$ctrl.state.OpenAccessColours[item.key]}}"\n                                ></em>\n\n                                <em class="fa fa-info-circle icon-info col-sec" ng-if="k === \'publication_type\' && item.key === \'unknown\'"\n                                    tooltip-title="These documents are derived from web crawling and machine learning.  Many are legitimate scholarly works that are not clearly defined, but others may be product descriptions, web based lab protocols or press releases from research institutions. Exclude these (click twice) for a more conservative group of documents that have well defined \'types\' Include to explore the great unknown (type)"\n                                ></em>\n                                <span ng-if="item.doc_count >= 0">({{item.doc_count | customNumber}})</span>\n                            </div>\n                        </label>\n                    </li>\n\n                    <li ng-repeat="(key, v) in $ctrl.state.filterMap[k]" ng-if="$ctrl.filterNotInAggs($ctrl.state.scholarlyAggs[k].buckets.slice(0, 10), key)">\n                        <label class="checkbox tri-state-checkbox">\n                            <input type="checkbox" model="$ctrl.state.filterMap[k][key]" lens-tristate-checkbox>\n                            <i></i>\n                            <div style="line-height: 20px; display: inline-block;">\n                                {{:: $ctrl.state.facetFormatters[k](key) || key}}\n                            </div>\n                        </label>\n                    </li>\n                </ul>\n\n                <label class="input" ng-if="$ctrl.state.scholarlyAggs[k].buckets.length && $ctrl.state.fields[k].autosuggest !== false">\n                    <input type="text"\n                        ng-model="$ctrl.state.addFilter[k]"\n                        ng-model-options="{debounce: 100}"\n                        ng-change="$ctrl.autocomplete(k)"\n                        placeholder="{{::$root.message(\'scholar.field.\' + k) || $ctrl.state.fields[k].label || k}}"\n                    >\n                </label>\n                <div class="auto-complete-input-container" ng-show="$ctrl.state.showAutocomplete[k]">\n                    <div ng-repeat="item in $ctrl.state.autocomplete[k]"\n                        ng-click="$ctrl.selectAutocomplete(k, item.key)"\n                    >\n                        {{::item.key}}\n                        <span>({{item.doc_count | customNumber}})</span>\n                    </div>\n                    <div ng-if="$ctrl.state.autocomplete[k].length" ng-click="$ctrl.showMoreFacet(k)">\n                        {{::\'filters.common.chooseMore\' | message}} ...\n                    </div>\n                </div>\n\n                <div class="facetBottomButtons clearfix">\n                    \x3c!--\n                    <span class="btn btn-sec btn-xxs" ng-if="k === \'author.display_name.keyword\'" ng-click="$ctrl.state.searchOrcid = true">\n                        Search ORCID\n                    </span>\n                    --\x3e\n                    <span class="btn btn-sec btn-xxs" ng-if="$ctrl.state.scholarlyAggs[k].buckets.length >= 10" ng-click="$ctrl.getTopFacets(k); $ctrl.state.showMoreFacet = k">\n                        {{::\'filters.common.chooseMore\' | message}}\n                    </span>\n                    <div class="pull-right">\n                        <button class="btn btn-danger btn-xxs" ng-if="$ctrl.state.filterCounts[k] || $ctrl.state.filterMap[k]" ng-click="$ctrl.removeFilter(k)">\n                            {{::\'filters.common.clear\' | message}}\n                        </button>\n                        <button class="btn btn-pri btn-xxs">\n                            {{::\'filters.common.refine\' | message}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</li>\n'},function(module,exports){module.exports='\n\n<div ng-if="$root.sideTabsView === \'st-search\'" ng-cloak>\n    <div ng-controller="StructuredSearchController as $ctrl" ng-include="\'structured-search-sidebar\'"></div>\n</div>\n\n<div ng-if="$root.sideTabsView === \'st-history\'" ng-cloak>\n    <h3>History</h3>\n    <div class="sidebar-walk-through">\n        <div class="alert alert-warning">\n            Does not exist for Scholarly\n        </div>\n    </div>\n</div>\n\n<div ng-if="$root.sideTabsView === \'st-notes\'" ng-cloak>\n    <h3>Notes</h3>\n    <div class="sidebar-walk-through">\n        <div class="alert alert-warning">\n            Does not exist for Scholarly\n        </div>\n    </div>\n</div>\n\n<div ng-if="$root.sideTabsView === \'st-tags\'" ng-cloak>\n    <h3>Tags</h3>\n    <div class="sidebar-walk-through">\n        <div class="alert alert-warning">\n            Does not exist for Scholarly\n        </div>\n    </div>\n</div>\n\n<div ng-if="$root.sideTabsView === \'st-saved-queries\'" ng-cloak>\n    <div lens-saved-queries>Loading...</div>\n</div>\n\n<div ng-if="$root.sideTabsView === \'st-collections\'" ng-cloak>\n    <div lens-recent-collections></div>\n</div>\n\n<div hidden class="tooltip_templates">\n    <span id="ttip-tri-state" class="ttip-update-notice" ng-bind-html="\'filters.updateNotice\' | message | unsafe"></span>\n</div>\n\n\n<div class="widget facetsSidebar" id="facetsSidebar" ng-if="$root.sideTabsView === \'st-filters\'">\n\n    <a hidden ng-click="$ctrl.reset()"\n        tooltip-title="Clear All"\n        class="clear-all col-error"\n    >\n        <em class="fa fa-minus-circle"></em>\n    </a>\n\n    <h3>\n        {{::\'filters.title.scholar\' | message}}\n        <em hidden id="excludeFilters-tip-trigger" class="fa fa-info-circle col-sec link" tooltip-title tooltip-content-selector="#ttip-tri-state"></em>\n    </h3>\n\n    \x3c!-- INITIAL LOAD ONLY --\x3e\n    <div ng-if="$ctrl.state.facetsLoading && !$ctrl.state.aggs">\n\n        <form id="facetsForm" class="facetsForm loading">\n            <div id="facets" class="facets-container">\n                <ul id="facets-list" class="no-bullet facets clearfix facets-list">\n                    <li class="ui-accordion ui-widget ui-helper-reset" ng-repeat="k in [\'Date Range\', \'Flags\', \'Institution\', \'Institution Country/Region\', \'Author\', \'Identifier Type\', \'Funding\', \'Journal\', \'Conference Name\', \'Publication Type\', \'Subject\', \'MeSH Heading\', \'Field of Study\', \'Substance\', \'Keyword\', \'Open Access Colour\', \'Open Access License\', \'Query Tools\']">\n                        <h5 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons">\n                            {{::k}}\n                        </h5>\n                    </li>\n                </ul>\n            </div>\n        </form>\n\n        \x3c!--\n        <div class="result-loading side-tabs-loading">\n            <div class="loading-masker tools" ng-include="\'icon-loader-tools\'"></div>\n        </div>\n        --\x3e\n    </div>\n\n    <form id="facetsForm" class="facetsForm " ng-hide="$ctrl.state.facetsLoading && !$ctrl.state.aggs" ng-class="{loading: $ctrl.state.facetsLoading}" ng-submit="$ctrl.search()">\n        <div id="facets" class="facets-container">\n            <div class="facet-loading-error" ng-if="$ctrl.state.aggsError" style="padding-top: .5em; padding-bottom: .5em;">\n                <div class="alert alert-danger">\n                    <em class="fa fa-exclamation-triangle"></em>\n                    {{::\'error.filters\' | message}}\n                    {{::\'error.filters.txt\' | message}}\n                </div>\n                <a href="javascript:window.location.reload()" class="btn btn-pri btn-xs">\n                    <em class="fa fa-refresh"></em>\n                    {{::\'common.refresh\' | message}}\n                </a>\n            </div>\n\n            <ul id="facets-list" class="no-bullet facets clearfix facets-list">\n                <li class="ui-accordion ui-widget ui-helper-reset">\n                    <h5 ng-click="$ctrl.state.showFacet[\'date\'] = !$ctrl.state.showFacet[\'date\']"\n                        class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"\n                        ng-class="{\'ui-accordion-header-active ui-state-active\': $ctrl.state.showFacet[\'date\']}"\n                    >\n                        {{::\'filters.date.title\' | message}}\n                        <span class="count badge" ng-if="$ctrl.state.filterCounts[\'dates\']">1</span>\n                    </h5>\n                    <div ng-show="$ctrl.state.showFacet[\'date\']" class="filterGroup" ng-include="\'scholar-search-date-filter\'"></div>\n                </li>\n                <li class="ui-accordion ui-widget ui-helper-reset">\n                    <h5 ng-click="$ctrl.state.showFacet[\'flags\'] = !$ctrl.state.showFacet[\'flags\']"\n                        class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"\n                        ng-class="{\'ui-accordion-header-active ui-state-active\': $ctrl.state.showFacet[\'flags\']}"\n                    >\n                        {{::\'scholar.facets.flags\' | message}}\n                        <span class="count badge" ng-if="$ctrl.state.filterCounts[\'flags\']">{{$ctrl.state.filterCounts[\'flags\']}}</span>\n                    </h5>\n                    <div ng-show="$ctrl.state.showFacet[\'flags\']" class="filterGroup">\n                        <div class="panel panel-default">\n                            <div class="panel-body">\n                                <ul class="list-unstyled list-facets">\n                                    <li ng-repeat="(k, badge) in $ctrl.state.badges" >\n                                        <label class="checkbox tri-state-checkbox">\n                                            <input type="checkbox" model="$ctrl.state.filterMap[(badge.prefix || \'has_\') + k]" lens-tristate-checkbox>\n                                            <i></i>\n                                            \x3c!--{{::$root.message(\'scholar.badge.tooltip.\' + k) || badge.tooltip}}--\x3e\n                                            {{::$root.message(\'scholar.flag.description.\' + k) || $ctrl.state.fields[k].label || k}}\n                                        </label>\n                                    </li>\n                                </ul>\n\n                                <div class="facetBottomButtons clearfix">\n                                    <div class="pull-right">\n                                        <span class="btn btn-danger btn-xxs" ng-if="$ctrl.showClearFlags()" ng-click="$ctrl.clearFlags()">\n                                            {{\'filters.common.clear\' | message}}\n                                        </span>\n                                        <button class="btn btn-pri btn-xxs">\n                                            {{\'filters.common.refine\' | message}}\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n\n\n                \x3c!-- Nesting/Grouping Filters Example\n                <li class="ui-accordion ui-widget ui-helper-reset">\n                    <h5 ng-click="$ctrl.state.showFacet[\'nestingTest\'] = !$ctrl.state.showFacet[\'nestingTest\']"\n                        class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"\n                        ng-class="{\'ui-accordion-header-active ui-state-active\': $ctrl.state.showFacet[\'nestingTest\']}"\n                    >\n                        Subject Matter\n                        <span class="count badge" ng-if="$ctrl.state.filterCounts[\'flags\']">{{$ctrl.state.filterCounts[\'flags\']}}</span>\n                    </h5>\n                    <div ng-show="$ctrl.state.showFacet[\'nestingTest\']" class="filterGroup">\n                        <ul class="no-bullet facets clearfix facets-list facets-list-nested">\n                            <li class="ui-accordion ui-widget ui-helper-reset">\n                                <h5 ng-click="$ctrl.state.showFacet[\'nestSub2\'] = !$ctrl.state.showFacet[\'nestSub2\']"\n                                    class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"\n                                    ng-class="{\'ui-accordion-header-active ui-state-active\': $ctrl.state.showFacet[\'nestSub2\']}"\n                                >\n                                    MeSH Headings\n                                    <em class="fa fa-info-circle icon-info ng-scope ng-isolate-scope tooltipstered"></em>\n                                    <span class="count badge">3</span>\n                                </h5>\n                                <div ng-show="$ctrl.state.showFacet[\'nestSub2\']" class="filterGroup">\n                                    <div class="panel panel-default">\n                                        <div class="panel-body">\n                                            <ul class="list-unstyled list-facets">\n                                                <li ng-repeat="(k, badge) in $ctrl.state.badges" >\n                                                    <label class="checkbox tri-state-checkbox">\n                                                        <input type="checkbox" model="$ctrl.state.filterMap[(badge.prefix || \'has_\') + k]" lens-tristate-checkbox>\n                                                        <i></i>\n                                                        {{::$root.message(\'scholar.flag.description.\' + k) || $ctrl.state.fields[k].label || k}}\n                                                    </label>\n                                                </li>\n                                            </ul>\n\n                                            <div class="facetBottomButtons clearfix">\n                                                <div class="pull-right">\n                                                    <span class="btn btn-danger btn-xxs" ng-if="$ctrl.showClearFlags()" ng-click="$ctrl.clearFlags()">\n                                                        {{\'filters.common.clear\' | message}}\n                                                    </span>\n                                                    <button class="btn btn-pri btn-xxs">\n                                                        {{\'filters.common.refine\' | message}}\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </li>\n                --\x3e\n\n\n                <li ng-repeat="k in $ctrl.state.filterKeys"\n                    ng-show="($ctrl.state.scholarlyAggs[k].buckets && $ctrl.state.facetHack) || $ctrl.state.aggs"\n                    ng-include="\'scholar-search-facet\'"\n                    include-replace\n                ></li>\n                <li class="ui-accordion ui-widget ui-helper-reset">\n                    <h5 ng-click="$ctrl.state.showFacet[\'queryTools\'] = !$ctrl.state.showFacet[\'queryTools\']"\n                        class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons"\n                        ng-class="{\'ui-accordion-header-active ui-state-active\': $ctrl.state.showFacet[\'queryTools\']}"\n                    >\n                        {{::\'filters.queryTools.title\' | message}}\n                        <span class="count badge" ng-if="$ctrl.state.filterCounts[\'queryTools\']">\n                            {{$ctrl.state.filterCounts[\'queryTools\']}}\n                        </span>\n                    </h5>\n                    <div ng-show="$ctrl.state.showFacet[\'queryTools\']" class="filterGroup">\n                        <div class="panel panel-default">\n                            <div class="panel-body">\n                                <ul class="list-unstyled list-facets">\n                                    <li>\n                                        <label class="checkbox">\n                                            <input type="checkbox" ng-model="$ctrl.state.regexEnabled">\n                                            <i></i>\n                                            {{\'filters.queryTools.regexEnabled\' | message}}\n                                        </label>\n                                    </li>\n                                </ul>\n\n                                <div class="facetBottomButtons clearfix">\n                                    <div class="pull-right">\n                                        <span class="btn btn-danger btn-xxs" ng-if="$ctrl.showClearFlags()" ng-click="$ctrl.clearFlags()">\n                                            {{\'filters.common.clear\' | message}}\n                                        </span>\n                                        <button class="btn btn-pri btn-xxs">\n                                            {{\'filters.common.refine\' | message}}\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n\n            <div hidden class="btn btn-xs btn-qua" ng-click="$ctrl.state.showAllFilters = !$ctrl.state.showAllFilters">\n                Show {{$ctrl.state.showAllFilters ? \'only basic\' : \'all\'}} filters\n            </div>\n        </div>\n    </form>\n    <a href="/lens/new-search?type=SCHOLAR" class="btn btn-xs">\n        <em class="fa fa-search col-pri"></em>\n        New Structured Search\n    </a>\n</div>\n\n<div class="sidebar-bg"></div>\n'},function(module,exports){module.exports='<div class="scholar-search-tabs">\n    <div ng-if="$ctrl.state.patentQueryId" ng-cloak>\n        <div class="nav-tab-stretch nav-tab-data-sets" lens-nav ng-cloak>\n            <ul class="tab-nav-collapse clearfix">\n                <li class="is-patent">\n                    <a ng-href="/lens/search/{{$ctrl.state.patentQueryId}}?preview={{$ctrl.state.showPreviewPanel}}">\n                        {{::\'results.tab.patents\' | message}}\n                        <span\n                            ng-if="$ctrl.patentsTabIsCiting()"\n                            class="badge new-badge"\n                            tooltip-title="{{::\'results.tab.citing.badge.tip\' | message}}">\n                            {{::\'results.tab.citing.badge\' | message}}\n                        </span>\n                        \x3c!-- <br><small>{{$ctrl.state.unjoinedResultSize | customNumber}}</small> --\x3e\n                    </a>\n                </li>\n                <li class="is-scholar active" ng-click="$root.ignoreTip(\'new-cited-works\')">\n                    <a>\n                        {{::\'results.tab.cited\' | message}}\n                        \x3c!-- <br><small>{{$ctrl.state.totalHits | customNumber}}</small> --\x3e\n                    </a>\n                </li>\n                <li class="view-mode preview-side-bar-expand" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'">\n                    <a ng-click="$ctrl.togglePreviewPanel()" tooltip-title="{{::\'results.tab.expand.sidebar\' | message}}">\n                        <em class="fa" ng-class="{\'fa-chevron-circle-right\': $ctrl.state.showPreviewPanel, \'fa-chevron-circle-left\': !$ctrl.state.showPreviewPanel}"></em>\n                    </a>\n                </li>\n                <li class="view-mode" ui-sref-active="active">\n                    <a ui-sref="scholar.analysis" tooltip-title="{{::\'results.graphical\' | message}}">\n                        <svg viewBox="0 0 2048 1792" xmlns="http://www.w3.org/2000/svg"><path d="M640 896v512h-256v-512h256zm384-512v1024h-256v-1024h256zm1024 1152v128h-2048v-1536h128v1408h1920zm-640-896v768h-256v-768h256zm384-384v1152h-256v-1152h256z"/></svg>\n                        <span>{{::\'results.graphical.view\' | message}}</span>\n                    </a>\n                </li>\n                <li class="view-mode" ui-sref-active="active">\n                    <a ui-sref="scholar.results" tooltip-title="{{::\'results.view.summary\' | message}}">\n                        <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z"/></svg>\n                        <span>{{::\'results.view.list\' | message}}</span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <div ng-if="!$ctrl.state.patentQueryId" ng-cloak>\n        <div class="nav-tab-stretch nav-tab-data-sets" lens-nav ng-cloak>\n            <ul class="tab-nav-collapse clearfix">\n                <li class="is-scholar analysis-tour-1" lens-state-active="[\'scholar.results\', \'scholar.analysis\']">\n                    <a ui-sref="scholar.results">\n                        {{::\'results.tab.scholar\' | message}}\n                        <span\n                            ng-if="$ctrl.isJoined()"\n                            class="badge new-badge"\n                            tooltip-title="{{::\'results.tab.cited.badge.tip\' | message}}">\n                            {{::\'results.tab.cited.badge\' | message}}\n                        </span>\n                        \x3c!-- <br><small>{{$ctrl.state.totalHits | customNumber}}</small> --\x3e\n                    </a>\n                </li>\n                <li class="is-patent" ng-click="$ctrl.changeTabs(); $root.ignoreTip(\'new-citing-patent\')"\n                    ng-hide="$ctrl.state.referencedByPatentCount === 0 || (!$ctrl.state.loading && $ctrl.state.results === null)"\n                >\n                    <a ng-href="/lens/search?scholarlySearchId={{$ctrl.state.scholarlySearchId}}&preview={{$ctrl.state.showPreviewPanel}}">\n                        {{::\'results.tab.citing\' | message}}\n                        \x3c!-- <br><small>~{{$ctrl.state.referencedByPatentCount | customNumber}}</small> --\x3e\n                    </a>\n                </li>\n                <li lens-state-active="\'scholar.notes\'" ng-if="$ctrl.state.collectionId">\n                    <a ui-sref="scholar.notes" ui-sref-active="active">\n                        {{::(\'search.results.notesTabTitle\' | message) || \'Notes\'}}\n                        <span hidden class="badge overallNoteCount" ng-if="$ctrl.state.collection.notes.length">\n                            {{$ctrl.state.collection.notes.length | customNumber}}\n                        </span>\n                    </a>\n                </li>\n                <li class="view-mode preview-side-bar-expand" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'">\n                    <a ng-click="$ctrl.togglePreviewPanel()" tooltip-title="{{::\'results.tab.expand.sidebar\' | message}}">\n                        <em class="fa" ng-class="{\'fa-chevron-circle-right\': $ctrl.state.showPreviewPanel, \'fa-chevron-circle-left\': !$ctrl.state.showPreviewPanel}"></em>\n                    </a>\n                </li>\n                <li class="view-mode" ui-sref-active="active">\n                    <a ui-sref="scholar.analysis" tooltip-title="{{::\'results.graphical\' | message}}">\n                        <svg viewBox="0 0 2048 1792" xmlns="http://www.w3.org/2000/svg"><path d="M640 896v512h-256v-512h256zm384-512v1024h-256v-1024h256zm1024 1152v128h-2048v-1536h128v1408h1920zm-640-896v768h-256v-768h256zm384-384v1152h-256v-1152h256z"/></svg>\n                        <span>{{::\'results.graphical.view\' | message}}</span>\n                    </a>\n                </li>\n                <li class="view-mode" ui-sref-active="active">\n                    <a ui-sref="scholar.results" tooltip-title="{{::\'results.view.summary\' | message}}">\n                        <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z"/></svg>\n                        <span>{{::\'results.view.list\' | message}}</span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div class="scholar-structured-search">\n    <h1>New Scholarly Work Search</h1>\n    <div ng-controller="StructuredSearchController as $ctrl" ng-include="\'structured-search\'"></div>\n</div>\n'},function(module,exports){module.exports='<div class="div-table-results-heading div-table-results-heading-sub-tab be-sticky analysis-tour-5 scholar-toolbar toolbar-results" lens-sticky>\n    <div class="div-table-results-row clearfix">\n        <div class="selectionToolWrapper" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'">\n            <a class="selectionTool settings-button btn btn-xs" tooltip-title tooltip-content-selector="#selection-tool" tooltip-options="{trigger: \'click\'}">\n                <em class="fa fa-check"></em>\n            </a>\n        </div>\n\n        <div class="expand-all btn btn-xs deep-analysis-toolbar-item" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'" ng-click="$ctrl.expandAll()">\n            <em class="fa" ng-class="{\'fa-chevron-circle-down\': !$ctrl.state.expandedAll, \'fa-chevron-circle-up\': $ctrl.state.expandedAll}"></em>\n            Expand All\n        </div>\n\n        <div lens-collection-controls\n            class="selection-tools"\n            ng-show="$ctrl.state.checkedItems.length > 0 && $ctrl.state.currentStateName !== \'scholar.analysis\'"\n            new-collection="$ctrl.state.newCollection"\n            add-to-collection="$ctrl.state.addToCollection"\n            remove-from-collection="$ctrl.state.removeFromCollection"\n            type="\'SCHOLARLY_WORK\'"\n        ></div>\n\n        <div class="table-tools analysis-table-tools">\n            <a class="btn btn-xs deep-analysis-toolbar-item pull-left deep-analysis-toolbar-item-tour"\n                ng-click="$ctrl.analysisTour()"\n                class="analysis-tour-X"\n                ng-if="$ctrl.state.currentStateName === \'scholar.analysis\'"\n            >\n                <em class="fa fa-eye"></em>\n                Launch Guided Tour\n            </a>\n\n            <a class="btn btn-xs deep-analysis-toolbar-item"\n                ng-click="$ctrl.clickAddChart()"\n                ng-if="$ctrl.state.subAnalysisItems.length && $ctrl.state.currentStateName === \'scholar.analysis\'"\n            >\n                <em class="fa fa-plus-circle"></em>\n                Add New Chart\n            </a>\n\n            <a hidden class="btn btn-xs deep-analysis-toolbar-item pull-left"\n                ng-click="$ctrl.restoreDefaultDashboard()"\n                ng-if="$ctrl.state.currentStateName === \'scholar.analysis\' && !$ctrl.state.subAnalysisItems.length"\n            >\n                <em class="fa fa-dashboard"></em>\n                Show Sample Dashboard\n            </a>\n\n            <a class="btn btn-xs deep-analysis-toolbar-item"\n                ng-click="$ctrl.state.showDashboardConfig = true"\n                ng-if="$ctrl.state.currentStateName === \'scholar.analysis\' && $ctrl.state.subAnalysisItems.length"\n                hidden\n            >\n                Show Config\n            </a>\n\n            <span ng-if="$ctrl.state.results.length > 0 && $ctrl.state.currentStateName !== \'scholar.analysis\'" class="deep-analysis-toolbar-item">\n                <a tooltip-title tooltip-title-variable="($ctrl.savedQuery.id ? \'results.saved.edit.query\' : \'results.save.query\') | message"\n                    class="btn btn-xs deep-analysis-toolbar-item"\n                    ng-class="{ null: $ctrl.savedQuery.id }"\n                    ng-click="$ctrl.openSaveQueryDialog()"\n                >\n                    <em class="fa fa-save"></em>\n                    {{($ctrl.savedQuery.id ? \'results.saved.edit.query\' : \'results.save.query\') | message}}\n                </a>\n            </span>\n            \n            \n            <a class="btn btn-xs deep-analysis-toolbar-item"\n                ng-click="$root.showSharingModal=true"\n                ng-if="$ctrl.state.results.length > 0 && $ctrl.state.currentStateName !== \'scholar.analysis\'"\n                tooltip-title="Share Results"\n            >\n                <em class="fa fa-share-alt-square"></em>\n                Share Results\n            </a>\n            \n            <a class="btn btn-xs deep-analysis-toolbar-item"\n                ng-click="$ctrl.state.dashboardId ? ($ctrl.state.shareDashboardPrompt = true) : ($ctrl.state.saveDashboardPrompt = true)"\n                ng-disabled="$ctrl.state.savingDashboard"\n                ng-if="$ctrl.state.subAnalysisItems.length && $ctrl.state.currentStateName === \'scholar.analysis\'"\n            >\n                <em class="fa fa-share-alt-square"></em>\n                Share Dashboard\n            </a>\n\n            <span ng-if="$ctrl.state.results.length > 0 && $ctrl.state.currentStateName !== \'scholar.analysis\'">\n                <a tooltip-title tooltip-title-variable="\'export.action.export\' | message"\n                    class="btn btn-xs deep-analysis-toolbar-item"\n                    ng-click="$ctrl.export()"\n                >\n                    <em class="fa fa-cloud-download"></em>\n                    Export Results\n                </a>\n            </span>\n\n            <a class="btn btn-xs deep-analysis-toolbar-item min-768"\n                ng-click="$ctrl.toggleColumns()"\n                ng-if="$ctrl.state.currentStateName === \'scholar.analysis\' && $ctrl.state.subAnalysisItems.length"\n            >\n                <em class="fa fa-columns"></em>\n                {{$ctrl.state.analysisColumns ? \'Single Column\' : \'Two Columns\'}}\n            </a>\n\n            <a class="btn btn-xs deep-analysis-toolbar-item min-768"\n                ng-click="$ctrl.viewDashboard()"\n                ng-if="$ctrl.state.currentStateName === \'scholar.analysis\' && $ctrl.state.subAnalysisItems.length"\n            >\n                <em class="fa fa-television"></em>\n                Presentation Mode\n            </a>\n\n            <a class="btn btn-xs deep-analysis-toolbar-item"\n                ng-click="$ctrl.state.clearAllAnalysisPrompt = true"\n                ng-if="$ctrl.state.subAnalysisItems.length && $ctrl.state.currentStateName === \'scholar.analysis\'"\n            >\n                <em class="fa fa-minus-circle"></em>\n                Clear All\n            </a>\n\n            <form class="custom-toggles" ng-cloak ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'">\n                <label class="toggle toggle-tool toggle-tool-citing"\n                    tooltip-title="Only Scholarly Works cited by Patent Results"\n                    ng-if="$ctrl.state.patentQueryId || $ctrl.state.previousPatentQueryId"\n                >\n                    <input type="checkbox"\n                        ng-checked="$ctrl.state.patentQueryId"\n                        ng-click="$ctrl.togglePatentQueryId()"\n                    >\n                    <i></i>\n                </label>\n\n                <label class="toggle toggle-tool toggle-tool-citing"\n                   tooltip-title="Only Scholarly Works cited by Patent Results"\n                   ng-if="!$ctrl.state.patentQueryId && !$ctrl.state.previousPatentQueryId"\n                >\n                   <input type="checkbox"\n                       ng-checked="$ctrl.state.filterMap.is_referenced_by_patent"\n                       ng-click="$ctrl.toggleCitedFilter()"\n                   >\n                   <i></i>\n               </label>\n            </form>\n\n            <form class="pull-right ng-pristine ng-valid">\n                <label class="select select-sm" ng-if="$ctrl.state.currentStateName !== \'scholar.analysis\'">\n                    <select name="sortBy" id="sortBy" ng-model="$ctrl.state.orderBy" ng-change="$ctrl.search()">\n                        \x3c!-- <option value="">Choose Sort</option> --\x3e\n                        <option ng-repeat="(k, sort) in $ctrl.state.sorts" ng-value="k">{{sort.label}}</option>\n                    </select>\n                    <i></i>\n                </label>\n            </form>\n        </div>\n        <div id="save-query-modal" lens-modal class="css-modal-wrapper-sm" visible="$ctrl.saveQueryDialogOpen">\n            <div ng-include="\'save-query-modal\'"></div>\n        </div>\n    </div>\n\n    <div hidden>\n        <div class="tool-content" id="selection-tool">\n            <ul class="list-tool-select">\n                <li>\n                    <a ng-click="$ctrl.select(\'page\')" class="tool-item">\n                        {{::\'results.selectTool.page\' | message}}\n                    </a>\n                </li>\n                <li>\n                    <a ng-click="$ctrl.select(\'all\')" class="tool-item">\n                        {{($ctrl.state.totalHits > $ctrl.maxCollectionSize ? \'results.selectTool.maxCollSize\' : \'results.selectTool.all\') | message:[$ctrl.maxCollectionSizeFormatted]}}\n                    </a>\n                </li>\n                <li>\n                    <a ng-click="$ctrl.select(\'none\')" class="tool-item">\n                        {{::\'results.selectTool.clear\' | message}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<div ng-if="$ctrl.state.searchOrcid">\n    <div class="exp-window draggable" ng-class="{fullscreen: fullscreen}" lens-explorer-window style="left: 240px;">\n        <header class="clearfix draggable-handle">\n            <h5 class="explorer-title pull-left">\n                Search ORCID\n            </h5>\n            <a class="pull-right" ng-click="$ctrl.state.searchOrcid = false" style="cursor: pointer">\n                <em class="fa fa-times col-error"></em>\n            </a>\n        </header>\n\n        <div lens-search-orcid></div>\n    </div>\n</div>\n'},function(module,exports){module.exports="<p><b>{{'search.tip.boolean.title' | message}}:</b><br/>{{'search.tip.boolean.text' | message}}: <em>e.g. `robot <span>AND</span> engine`, or `car <span>OR</span> boat`. <span>&amp;&amp;</span> {{'search.tip.boolean.text3' | message}} <span>AND</span> and <span>||</span> {{'search.tip.boolean.text3' | message}} OR.</em>                        {{'search.tip.boolean.text2' | message}} <em>e.g. `(wheat <span>AND</span> grain) <span>OR</span> (sorgum <span>AND</span> barley)`</em></p>\n\n<p>\n    <b>{{'search.tip.fields.title' | message}}:</b>\n    <br/>{{'search.tip.fields.text' | message}} `field:term`: <em>e.g. `<b>title:</b>(leishmani* <span>AND</span> diagnos*) || <b>abstract:</b>(leishmani* <span>AND</span> diagnos*) <span>&amp;&amp;</span> <b>classification_cpc:</b>(A61K* <span>OR</span> C12N*)</em>\n    <b>Note:</b> Fields are case sensitive\n</p>\n\n<p><b>{{'search.tip.wildcards.title' | message}}:</b> <em>{{'search.tip.wildcards.text' | message}} *\n, ?, ~2 and regular expressions like /ar[gb]on/\n</em></p>\n\n<p><b>{{'search.tip.language.title' | message}}:</b><br>{{'search.tip.language.text' | message}}</p>\n"},function(module,exports){module.exports='<h3 class="title-seperator">\n    Search\n    \x3c!--\n    <span ng-if="$ctrl.state.type == \'patents\'">Patents</span>\n    <span ng-if="$ctrl.state.type !== \'patents\'">Scholar</span>\n    --\x3e\n    <a class="sss-tabs" ng-if="$ctrl.state.view !== \'boolean\'" ng-click="$ctrl.state.view = \'boolean\'"><em class="fa fa-search"></em> Boolean</a>\n    <a class="sss-tabs" ng-if="$ctrl.state.view == \'boolean\'" ng-click="$ctrl.state.view = \'!boolean\'"><em class="fa fa-search"></em> Query Builder</a>\n</h3>\n<div>\n    <form ng-if="!$ctrl.state.editBoolean" ng-submit="$ctrl.submit()" class="structured-search-sidebar">\n        <div style="margin-top: -.8em;" ng-if="!$ctrl.state.canParseQueryString" class="alert alert-warning">\n            <em class="fa fa-warning"></em>\n            Can not parse query string\n        </div>\n        \n        \n        <div ng-if="$ctrl.state.view !== \'boolean\'">        \n            <div>\n                <label class="pull-left">Fields</label>\n                <div class="inline-group">\n                    <label class="radio">\n                        <input type="radio" name="predicate" ng-model="$ctrl.state.predicate" value="AND" ng-change="$ctrl.printClause()">\n                        <i></i>\n                        {{::\'common.boolean.AND\' | message}}\n                    </label>\n                    <label class="radio">\n                        <input type="radio" name="predicate" ng-model="$ctrl.state.predicate" value="OR" ng-change="$ctrl.printClause()">\n                        <i></i>\n                        {{::\'common.boolean.OR\' | message}}\n                    </label>\n                </div>\n            </div>\n    \n            <div class="sss-fields" ng-repeat="(i, clause) in $ctrl.state.clauses track by $index">    \n                <div class="sss-field-inputs">\n                    <label class="select">\n                        <select ng-model="$ctrl.state.clauses[i].field" ng-options="o.label as $ctrl.fieldLabel(o.label, o.group) group by o.group for o in $ctrl.state.fieldList"></select>\n                        <i></i>\n                    </label>\n                    \n                    <label class="input">\n                        <input type="text" ng-model="$ctrl.state.clauses[i].value" placeholder="{{$ctrl.getPlaceholder($ctrl.state.clauses[i].field)}}">\n                    </label>\n                </div>\n                <div class="sss-btn-group">\n                    <a class="btn btn-icon addRow" ng-click="$ctrl.addClause(clause)">\n                        <em class="fa fa-plus"></em>\n                    </a>\n                    <a class="btn btn-icon removeRow" ng-class="{disabled: $ctrl.state.clauses.length <= 1}" ng-click="$ctrl.removeClause(i)" ng->\n                        <em class="fa fa-minus"></em>\n                    </a>\n                </div>\n            </div>\n        </div>\n        \n        <div ng-if="$ctrl.state.view === \'boolean\'">\n            <div class="sss-boolean">\n                <label class="textarea">\n                    <textarea ng-model="$ctrl.state.term" placeholder="Enter Boolean"></textarea>\n                </label>\n                <a class="sss-tips-trigger"\n                    ng-class="{unactive: !$root.showSearchTips}"\n                    ng-click="$root.showSearchTips = true; $root.searchTipsView = \'tips\'"\n                >\n                    <em class="fa fa-info-circle"></em> tips\n                </a>\n            </div>\n            \x3c!--\n            <div class="search-tips" ng-cloak ng-show="$root.showSearchTips">\n                <div class="search-tooltip tab-container">\n                    <div class="search-tooltip-body tab-contents">\n                        <div lens-search-tips view="$root.searchTipsView"></div>\n                    </div>\n                </div>\n                <div ng-click="$root.showSearchTips = null" class="global-overlay"></div>\n            </div>\n            --\x3e\n        </div>\n        \n        <button type="submit" class="btn btn-sm sss-btn btn-pri">\n            {{::\'common.action.search\' | message}}\n            <span ng-if="$ctrl.state.type == \'patents\'">Patents</span>\n            <span ng-if="$ctrl.state.type !== \'patents\'">Scholar</span>\n        </button>\n        \n\n    </form>\n    <div ng-if="$root.showOverlay" ng-click="$root.hideOverlay()" class="global-overlay"></div>\n</div>\n'},function(module,exports){module.exports='<form ng-submit="$ctrl.submit()">\n    <div class="row row-form clearfix bump structured-search-config">\n        <label>\n            {{::\'common.configuration\' | message}}\n            <em class="fa fa-minus-circle col-error link" ng-click="$ctrl.reset()" tooltip-title="Clear/reset Fields"></em>\n        </label>\n\n        <div class="inline-group well-alt">\n            <label class="radio">\n                <input type="radio" name="dataset" ng-model="$ctrl.state.type" value="PATENT" ng-change="$ctrl.changeType()">\n                <i></i>\n                {{::\'common.patents\' | message}}\n            </label>\n            <label class="radio">\n                <input type="radio" name="dataset" ng-model="$ctrl.state.type" value="SCHOLAR" ng-change="$ctrl.changeType()">\n                <i></i>\n                {{::\'common.scholar\' | message}}\n            </label>\n        </div>\n    </div>\n\n    <div class="alert alert-danger" ng-if="!$ctrl.state.canParseQueryString">\n        <em class="fa fa-warning col-error"></em>\n        {{::\'common.alert.unable.load.query\' | message}}\n    </div>\n\n    <div class="row row-form clearfix">\n        <div class="col-md-6">\n            <label class="pull-left">{{::\'advancedPatentSearch.predicate\' | message}}</label>\n            <div class="inline-group">\n                <label class="radio">\n                    <input type="radio" name="predicate" ng-model="$ctrl.state.predicate" value="AND" ng-change="$ctrl.printClause()">\n                    <i></i>\n                    {{::\'common.boolean.AND\' | message}}\n            </label>\n                <label class="radio">\n                    <input type="radio" name="predicate" ng-model="$ctrl.state.predicate" value="OR" ng-change="$ctrl.printClause()">\n                    <i></i>\n                    {{::\'common.boolean.OR\' | message}}\n            </label>\n            </div>\n        </div>\n        <div class="col-md-6">\n            <label class="pull-left">\n                {{::\'advancedPatentSearch.field\' | message}}\n                <em class="fa fa-exclamation-triangle col-sec" tooltip-title="{{::\'advancedPatentSearch.field.tip\' | message}}"></em>\n            </label>\n        </div>\n    </div>\n\n    <div class="row row-form clearfix bump" ng-repeat="(i, clause) in $ctrl.state.clauses track by $index">\n        <div class="col-md-6">\n            <label class="input">\n                <input type="text" ng-model="$ctrl.state.clauses[i].value" placeholder="{{$ctrl.getPlaceholder($ctrl.state.clauses[i].field)}}">\n            </label>\n        </div>\n\n        <div class="col-md-6">\n            <div class="row row-form clearfix">\n                <div class="col-md-9">\n                    <label class="select">\n                        <select ng-model="$ctrl.state.clauses[i].field" ng-options="o.label as $ctrl.fieldLabel(o.label, o.group) group by o.group for o in $ctrl.state.fieldList"></select>\n                        <i></i>\n                    </label>\n                </div>\n\n                <div class="col-md-3">\n                    <div class="btn-group" style="float: none;">\n                        <a class="btn btn-icon addRow" ng-click="$ctrl.addClause(clause)">\n                            <em class="fa fa-plus"></em>\n                        </a>\n                        <a class="btn btn-icon removeRow" ng-click="$ctrl.removeClause(i)" ng-if="$ctrl.state.clauses.length > 1">\n                            <em class="fa fa-minus"></em>\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="row row-form clearfix bump" ng-if="$ctrl.state.type === \'SCHOLAR\'">\n        <label>{{::\'scholar.facets.flags\' | message}}</label>\n        <div class="inline-group list-facets well-alt" style="margin-bottom: 5px;">\n            <label class="checkbox" ng-repeat="(k, badge) in $ctrl.state.badges" >\n                <input type="checkbox" ng-model="$ctrl.state.filter.SCHOLAR[(badge.prefix || \'has_\') + k]">\n                <i></i>\n                {{::$root.message(\'scholar.flag.description.\' + k) || $ctrl.state.fields[k].label || k}}\n            </label>\n        </div>\n    </div>\n\n    <div class="row row-form clearfix bump" ng-if="$ctrl.state.type === \'PATENT\'">\n        <div class="col-md-6">\n            <label class="pull-left">{{::\'advancedPatentSearch.date\' | message}}</label>\n            <div class="inline-group">\n                <label class="radio">\n                    <input type="radio" name="dateType" value="+pub_date" ng-model="$ctrl.state.dateType">\n                    <i></i>\n                    {{::\'filters.date.type.published\' | message}}\n                </label>\n                <label class="radio">\n                    <input type="radio" name="dateType" value="+filing_date" ng-model="$ctrl.state.dateType">\n                    <i></i>\n                    {{::\'filters.date.type.filed\' | message}}\n                </label>\n            </div>\n\n            <div class="row row-form">\n                <div class="col-md-6">\n                    <label class="input">\n                        <i class="icon_append fa fa-calendar"></i>\n                        <input class="dateSelect" lens-datepicker ng-model="$ctrl.state.dates[$ctrl.state.dateType].fromDate" placeholder="From" />\n                    </label>\n                </div>\n\n                <div class="col-md-6">\n                    <label class="input">\n                        <i class="icon_append fa fa-calendar"></i>\n                        <input class="dateSelect" lens-datepicker ng-model="$ctrl.state.dates[$ctrl.state.dateType].toDate" placeholder="To" />\n                    </label>\n                </div>\n            </div>\n\n        </div>\n\n        <div class="col-md-6" ng-if="$ctrl.state.type === \'PATENT\'">\n            <label>{{::\'filters.jurisdiction.title\' | message}}</label>\n            <div lens-multi-select\n                items="$ctrl.state.jurisdictions"\n                model="$ctrl.state.selectedJurisdictions"\n                show-flag="true"\n                label-formatter="$ctrl.jurisdictionName"\n            ></div>\n        </div>\n    </div>\n\n    <div class="row row-form clearfix bump" ng-if="$ctrl.state.type === \'PATENT\'">\n        <div class="col-md-4">\n            <label>{{::\'common.doc.type\' | message}}</label>\n            <div lens-multi-select items="$ctrl.state.docTypes" model="$ctrl.state.selectedDocTypes"></div>\n        </div>\n\n        <div class="col-md-4">\n            <label>{{::\'patentResults.queryOptions.language\' | message}}</label>\n            <label class="select">\n                <select name="l" ng-model="$ctrl.state.filter.patents.l">\n                    <option value="en">English</option>\n                    <option value="fr">Français</option>\n                    <option value="zh">中文简体</option>\n                    <option value="es">Español</option>\n                    <option value="ru">Русский язык</option>\n                </select>\n                <i></i>\n            </label>\n        </div>\n\n        <div class="col-md-4">\n            <label>{{::\'advancedPatentSearch.otherOptions.title\' | message}}</label>\n            <div lens-multi-select\n                items="$ctrl.state.otherOptions"\n                model="$ctrl.state.filter.patents"\n                label-formatter="$ctrl.otherOptionName"\n                default-label="\'Other Options\'"\n            ></div>\n        </div>\n    </div>\n\n    <div class="row row-form clearfix bump">\n        <button class="btn btn-sm btn-pri">\n            {{::\'search.new\' | message}}\n        </button>\n    </div>\n\n</form>\n<div ng-if="$root.showOverlay" ng-click="$root.hideOverlay()" class="global-overlay"></div>\n'},function(module,exports){module.exports='<div class="css-modal-overlay" ng-click="vm.suggestLogo = false; vm.logoEmailSent = false;">\n    <div class="css-modal-wrapper" ng-click="$event.stopPropagation()">\n        <div class="css-modal-close">\n            <em class="fa fa-times link" ng-click="vm.suggestLogo = false; vm.logoEmailSent = false;"></em>\n        </div>\n        <div class="css-modal-wrapper-inner">\n            <h2>\n                Suggest a Logo for <span>{{vm.suggestLogo}}</span>\n            </h2>\n\n            <div ng-if="vm.logoEmailSent">\n                Submission received, thank you!\n            </div>\n\n            <div ng-if="vm.logoEmailFailed" class="alert alert-danger">\n                Submission failed to send\n            </div>\n\n            <form ng-submit="notifyLogo()" ng-hide="vm.logoEmailSent">\n                <div class="row">\n                    <div class="col-md-6">\n                        <label>Logo URL</label>\n                        <label class="input">\n                            <i class="icon_append fa fa-user"></i>\n                            <input type="text" ng-model="vm.suggestedLogo" placeholder="" required>\n                        </label>\n                    </div>\n                    <div class="col-md-6">\n                        <label>Your Name (Optional)</label>\n                        <label class="input">\n                            <i class="icon_append fa fa-user"></i>\n                            <input type="text" ng-model="vm.name" placeholder="">\n                        </label>\n                    </div>\n                    <div class="col-md-6">\n                        <label>Your Email (Optional)</label>\n                        <label class="input">\n                            <i class="icon_append fa fa-envelope"></i>\n                            <input type="email" ng-model="vm.email" placeholder="">\n                        </label>\n                    </div>\n                </div>\n\n                <button title="Suggest Logo" aria-label="Suggest Logo" class="btn btn-pri" ng-disabled="vm.uploading">{{vm.uploading ? \'Submitting...\' : \'Submit Suggestion\'}}</button>\n            </form>\n        </div>\n    </div>\n</div>\n'},function(module,exports){module.exports='<h3>Share</h3>\n\n<div class="share-linkouts">\n    <a ng-href="{{$root.linkedInShareUrl()}}" class="btn btn-sm btn-linkedin" tooltip-title="Share on LinkedIn">\n        <em class="fa fa-linkedin"></em>\n        LinkedIn\n    </a>\n    <a ng-href="{{$root.facebookShareUrl()}}" class="btn btn-sm btn-facebook"  tooltip-title="Share on Facebook">\n        <em class="fa fa-facebook"></em>\n        Facebook\n    </a>\n    <a ng-href="{{$root.emailShareUrl()}}" class="btn btn-sm btn-email"  tooltip-title="Share via Email">\n        <em class="fa fa-envelope-o"></em>\n        Email\n    </a>\n    <a hidden ng-href="{{$root.twitterShareUrl()}}" class="btn btn-sm btn-twitter"  tooltip-title="Share on Twitter">\n        <em class="fa fa-twitter"></em>\n        Twitter\n    </a>\n</div>\n\n<p class="small" style="margin: 10px 0px 2px 0px;">Or copy this link to share</p>\n<form style="margin-bottom: 1em;">\n    <div class="input-group share-dash-url">\n        <label class="input">\n            <input ng-value="$root.shareUrl()" select-on-click>\n        </label>\n        <div class="input-group-addon" ng-click="$root.copyShareUrl()"\n            tooltip-title="URL copied to clipboard"\n            tooltip-options="{trigger: \'click\'}"\n        >\n            <em class="fa fa-link link col-ter"></em>\n        </div>\n    </div>\n</form>\n\n\x3c!--\n<div class="pull-right">\n    <a ng-click="$root.showSharingModal = false" class="btn btn-sm btn-danger-txt">\n        Close\n    </a>\n</div>\n--\x3e'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var placeholders=["e.g. malaria vaccine","e.g. harvard university","e.g. robotics"];var CollectionSearchController=function(){function CollectionSearchController($interval,$http,$q,$state,$stateParams){var _this=this;_classCallCheck(this,CollectionSearchController);this.$interval=$interval;this.$state=$state;this.$http=$http;this.$q=$q;this.state={term:$stateParams.term,limit:parseInt($stateParams.limit)||10,page:parseInt($stateParams.page)||0,orderBy:$stateParams.orderBy||"-score",items:[],loading:false,placeholder:placeholders[0],placeholderIndex:-1};if(!this.state.term){this.$interval(function(e){return _this.tick()},3e3)}this._search()}_createClass(CollectionSearchController,[{key:"tick",value:function tick(){var s=placeholders[++this.state.placeholderIndex%placeholders.length];this.state.placeholder=s}},{key:"search",value:function search(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this.$state.go("collectionSearch",{term:this.state.term,limit:this.state.limit,orderBy:this.state.orderBy,page:page})}},{key:"_search",value:function _search(){var _this2=this;this.state.loading=true;this.state.error=null;this.$http({method:"GET",url:"/lens/service/collection/search/published",params:{q:this.state.term,p:this.state.page,n:this.state.limit,s:this.state.orderBy}}).then(function(response){var hits=response.data.hits||[];_this2.state.totalHits=response.data.totalHits;_this2.state.items=hits}).catch(function(err){console.warn("Could not search collections. Server error");_this2.state.error=err.toString()}).finally(function(){_this2.state.loading=false})}},{key:"nextPage",value:function nextPage(){this.setPage(this.state.page+1)}},{key:"previousPage",value:function previousPage(){this.setPage(this.state.page-1)}},{key:"setPage",value:function setPage(page){page=parseInt(page);page=Math.max(page,0);page=Math.min(page,this.numberOfPages()-1);if(page!==this.state.page){this.search(page)}}},{key:"numberOfPages",value:function numberOfPages(){var hits=this.state.totalHits||0;return Math.floor(hits/this.state.limit)+1}},{key:"pageRange",value:function pageRange(){var min=Math.max(0,this.state.page-3);var max=Math.min(this.numberOfPages(),this.state.page+5);return _.range(min,max)}}]);return CollectionSearchController}();_app2.default.controller("CollectionSearchController",CollectionSearchController)},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ClassificationService=__webpack_require__(120);var service=new ClassificationService({cache:false});var FederatedSearchController=function(){function FederatedSearchController(ScholarService,$http,$q){_classCallCheck(this,FederatedSearchController);this.ScholarService=ScholarService;this.$http=$http;this.$q=$q;this.state={}}_createClass(FederatedSearchController,[{key:"search",value:function search(){var _this=this;this.state.classifications=null;this.state.patents=null;this.state.articles=null;var q=this.state.q;this.$q.when(this.ScholarService.quickSearchCounts(q)).then(function(res){_this.state.articles=res.hits.total});var url="/lens/search?q="+q+"&n=1&json=1";var promise=this.$http.get(url);this.state.patentsLoading=true;this.$q.when(promise).then(function(res){_this.state.patents=res.data.result.size;_this.state.patentsLoading=false}).catch(function(err){console.warn(err);_this.state.patentsLoading=false});this.$q.when(service.search("CPC",q)).then(function(items){if(items){_this.state.classifications=items.length}})}}]);return FederatedSearchController}();_app2.default.controller("FederatedSearchController",FederatedSearchController);module.exports=FederatedSearchController},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Notification=__webpack_require__(10);var notification=new Notification;var emptyNote=function emptyNote(){var scope=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"BASE";return{text:"",scope:scope}};var NoteExplorerController=function(){function NoteExplorerController($q,$http,$stateParams,$rootScope,$state,$timeout,PatentNotesService,CollectionNotesService,NotesService){var _this=this;_classCallCheck(this,NoteExplorerController);var _$rootScope$noteExplo=$rootScope.noteExplorer.note,lensId=_$rootScope$noteExplo.lensId,type=_$rootScope$noteExplo.type,id=_$rootScope$noteExplo.id,section=_$rootScope$noteExplo.section,key=_$rootScope$noteExplo.key;this.NotesService=NotesService;this.$state=$state;this.$rootScope=$rootScope;this.$timeout=$timeout;this.service=type.toUpperCase()==="PATENT"?PatentNotesService:CollectionNotesService;this.state={lensId:lensId,key:key,type:type,loading:true,editing:id!==undefined,note:emptyNote(section)};this.service.fetch(lensId||key).then(function(notes){_this.state.notes=notes;_this.state.loading=false;if(id){var note=_.findWhere(_this.state.notes,{id:parseInt(id)});_this.state.note=_.clone(note)}}).catch(function(err){console.warn(err);_this.state.loading=false})}_createClass(NoteExplorerController,[{key:"handleError",value:function handleError(err){console.warn(err);this.state.submitting=false;notification.error("Notes Error")}},{key:"submit",value:function submit(){var _this2=this;this.$timeout(function(){_this2._submit()},0)}},{key:"_submit",value:function _submit(){var _this3=this;if(this.state.editing){this.service.update(this.state.lensId||this.state.key,this.state.note).then(function(){notification.notify("Note Saved");_this3.NotesService.broadcast("REFRESH_NOTES");_this3.$rootScope.resetNoteExplorer()}).catch(function(err){return _this3.handleError(err)})}else{this.service.create(this.state.lensId||this.state.key,this.state.note).then(function(){notification.notify("Note Added");_this3.state.note=emptyNote();_this3.NotesService.broadcast("REFRESH_NOTES");_this3.$rootScope.resetNoteExplorer()}).catch(function(err){return _this3.handleError(err)})}}}]);return NoteExplorerController}();var controller=_app2.default.controller("NoteExplorerController",NoteExplorerController);module.exports=controller},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _aggs=__webpack_require__(57);var _aggs2=_interopRequireDefault(_aggs);var _urlQueryHelpers=__webpack_require__(18);var _scholarSearchBuilder2=__webpack_require__(121);var _scholarSearchBuilder3=_interopRequireDefault(_scholarSearchBuilder2);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ExportDialogView=__webpack_require__(151);var LocalStorageService=__webpack_require__(7);var storage=new LocalStorageService("patent-search");var PatentSearchController=function(){function PatentSearchController(ScholarService,$http,$q,$timeout,$rootScope,CollectionService,QueryResource){var _this=this;_classCallCheck(this,PatentSearchController);this.$q=$q;this.$timeout=$timeout;this.$http=$http;this.$rootScope=$rootScope;this.ScholarService=ScholarService;this.CollectionService=CollectionService;this.QueryResource=QueryResource;this.tab="RESULTS";var joinedQueryStats=(0,_get3.default)(window,"searchAppConfig.joinedQueryStats")||{};var patentQueryStats=joinedQueryStats.patent||{};var totalPatentResultsJoined=patentQueryStats.joinResultSize;var patentQueryId=patentQueryStats.searchId;var scholarlyQueryStats=joinedQueryStats.scholar||{};var scholarlySearchId=scholarlyQueryStats.searchId;this.initFilterCounts();this.state={totalPatentQueryResults:window.searchAppResultSize,patentQueryStats:patentQueryStats,scholarlyQueryStats:scholarlyQueryStats,totalPatentResultsJoined:totalPatentResultsJoined,patentQueryId:patentQueryId,v:(0,_urlQueryHelpers.getParam)("v")||"table",citesNpl:(0,_urlQueryHelpers.getParam)("citesNpl"),groupedBySimpleFamily:(0,_urlQueryHelpers.getParam)("f"),totalHits:null,scholarlySearchId:scholarlySearchId,scholarUnjoinedResultSize:scholarlyQueryStats.unjoinedResultSize,collections:window.globalCollections||[],currentCollection:window.currentCollection,collectionAction:null,filteredCollections:[],checkedCollections:{},newCollection:null,checked:{},checkedItems:[],addToCollection:false,removeFromCollection:false,selectedAll:false,showPreviewPanel:window.innerWidth>1200&&(0,_urlQueryHelpers.getParam)("v")!=="analysis"&&window.searchAppConfig.resultSize,previewType:(0,_urlQueryHelpers.getParam)("previewType")||"PATENTS_ANALYSIS"};if(!patentQueryStats.joined){var path=window.location.pathname+"/facets";var search=(window.location.search||"?")+"&facets=cites_resolved_scholarly";$http({url:path+search}).then(function(res){var count=(0,_get3.default)(res,"data.facets.cites_resolved_scholarly.true.count");_this.state.totalPatentResultsJoined=count})}$rootScope.$on("REFRESH_COLLECTIONS",function(){_this.refreshCollections()});this.CollectionService.on("REFRESH_COLLECTION",function(collection){var currentCollection=_this.state.currentCollection;if(currentCollection&&currentCollection.id===collection.id){window.location.reload()}});this.CollectionService.on("DELETE_COLLECTION",function(id){var currentCollection=_this.state.currentCollection;if(currentCollection&&currentCollection.id===id){window.location="/lens/user/collections"}});this.getJoinQueryDetails();this.changeTab=function(newTab){_this.tab=newTab};if(scholarlyQueryStats){}this.changePreviewType()}_createClass(PatentSearchController,[{key:"getJoinQueryDetails",value:function getJoinQueryDetails(){var _this2=this;if(this.state.scholarlySearchId){this.QueryResource.get({searchId:this.state.scholarlySearchId}).$promise.then(function(res){var _scholarSearchBuilder=_scholarSearchBuilder3.default.fromElastic(res.data.query),term=_scholarSearchBuilder.term,filterMap=_scholarSearchBuilder.filterMap;var collectionId=(0,_get3.default)(res.data,"lens.collectionId");_this2.state.joinQuery={term:term,filterMap:filterMap,collectionId:collectionId};console.log("Join query",_this2.state.joinQuery)}).catch(function(err){console.warn(err);(new Notification).error("Error retrieving search query")})}}},{key:"updateCheckedItems",value:function updateCheckedItems(){this.state.selectedAll=false;this.state.checkedItems=this.checkedItems()}},{key:"getCitedArticlesCount",value:function getCitedArticlesCount(){var _this3=this;var query={patent_search_id:this.state.patentQueryId,scholarly_search:{size:0,query:{bool:{must:[]}}}};this.$q.when(this.ScholarService.search(query)).then(function(res){_this3.state.totalScholarlyResultsJoined=res.hits.total;console.log(_this3.state)})}},{key:"toggleCitesNplFilter",value:function toggleCitesNplFilter(){var _this4=this;setTimeout(function(){if(_this4.state.citesNpl){window.location=window.location.href.replace("citesNpl=true","")}else if(_this4.state.scholarlySearchId){window.location=window.location.href.replace("scholarlySearchId="+_this4.state.scholarlySearchId,"")}else{window.location.search=(0,_urlQueryHelpers._updateSearchParams)("citesNpl",true)}},200)}},{key:"toggleGroupFamily",value:function toggleGroupFamily(){var _this5=this;setTimeout(function(){if(_this5.state.groupedBySimpleFamily){window.location=window.location.href.replace("f=true","")}else{window.location.search=(0,_urlQueryHelpers._updateSearchParams)("f",true)}},200)}},{key:"ignoreLimitWarning",value:function ignoreLimitWarning(){this.state.ignoreJoinLimit=true;storage.set("ignoreJoinLimit",true)}},{key:"checkedItems",value:function checkedItems(){var _this6=this;return _.keys(this.state.checked).filter(function(k){return _this6.state.checked[k]})}},{key:"selfUrl",value:function selfUrl(k,v){return"?"+(0,_urlQueryHelpers._updateSearchParams)(k,v)}},{key:"citedWorksAnalysisUrl",value:function citedWorksAnalysisUrl(){var search={};if(this.state.scholarlySearchId){search.scholarlySearchId=this.state.scholarlySearchId}else{search.patentQueryId=this.state.patentQueryId}search=$.param(search);return"/lens/scholar/search/analysis?"+search}},{key:"makeNote",value:function makeNote(){var _this7=this;var keys=_.keys(this.state.checked).filter(function(k){return _this7.state.checked[k]});if(keys.length===1){var key=keys.pop();this.$rootScope.addNote({type:"PATENT",key:key})}else if(keys.length>1){this.state.multipleNotesPrompt=true}}},{key:"refreshCollections",value:function refreshCollections(){var _this8=this;this.CollectionService.getAll().then(function(data){_this8.state.collections=data})}},{key:"selectAllCollections",value:function selectAllCollections(v){var _this9=this;this.state.checkedCollections={};if(v){this.state.filteredCollections.forEach(function(collection){_this9.state.checkedCollections[collection.id]=true})}}},{key:"removeFromCollectionItems",value:function removeFromCollectionItems(){var term=this.state.collectionFilterTerm.toLowerCase();return this.state.collections.filter(function(collection){return term&&collection.title.toLowerCase().indexOf(term)>=0})}},{key:"collectionAction",value:function collectionAction(action){this.state.collectionAction=action}},{key:"select",value:function select(amount){var _this10=this;if(amount==="none"){this.state.selectedAll=false;this.state.checked={}}else if(amount==="page"){this.state.selectedAll=false;window.globalPatentResultIds.forEach(function(k){return _this10.state.checked[k]=true})}else if(amount==="all"){this.state.selectedAll=true;window.globalPatentResultIds.forEach(function(k){return _this10.state.checked[k]=true})}this.state.checkedItems=this.checkedItems();window.closeAllTooltips()}},{key:"export",value:function _export(){var dialog=new ExportDialogView({title:messages.prop("generalResults.export")});dialog.render()}},{key:"saveQuery",value:function saveQuery(){if($("#saveQuery .edit:visible").length){$("#saveQuery .edit").click()}else{$("#saveQuery .save").click()}}},{key:"togglePreviewPanel",value:function togglePreviewPanel(){this.state.showPreviewPanel=!this.state.showPreviewPanel;(0,_urlQueryHelpers.setParam)("preview",this.state.showPreviewPanel);this.changePreviewType()}},{key:"changePreviewType",value:function changePreviewType(){if(this.state.showPreviewPanel){if(_.isEmpty(window.searchAppFacetData)&&this.state.previewType==="PATENTS_ANALYSIS"){this.fetchFacetData()}if(this.state.previewType==="CITED_WORKS_ANALYSIS"){this.fetchCitedWorksFacets()}}}},{key:"fetchFacetData",value:function fetchFacetData(){var _this11=this;this.state.fetchingFacetData=true;var url=window.location.pathname+"/facetData"+window.location.search;var facetDataPromise=this.$http.get(url);this.$q.when(facetDataPromise).then(function(res){window.searchAppFacetData=res.data;_this11.$timeout(function(){_this11.state.fetchingFacetData=false;_this11.state.facetDataAvailable=true},1e3)}).catch(function(err){console.warn(err);_this11.state.fetchingFacetData=false})}},{key:"fetchCitedWorksFacets",value:function fetchCitedWorksFacets(){var _this12=this;var query={scholarly_search:{size:0,aggs:_aggs2.default,query:{bool:{must:[]}}}};if(this.state.scholarlySearchId){query.scholarly_search_id=this.state.scholarlySearchId}else{query.patent_search_id=this.state.patentQueryId}this.state.scholarlyAggsReady=false;this.state.fetchingCitedWorksFacets=true;this.$q.when(this.ScholarService.search(query)).then(function(res){_this12.state.scholarlyAggs=res.aggregations;_this12.state.fetchingCitedWorksFacets=false;_this12.$timeout(function(){_this12.state.scholarlyAggsReady=true},200)})}},{key:"initFilterCounts",value:function initFilterCounts(){var keys=["dates","ft","f","j","notJ","inventor","notInventor","owner","notOwner","applicant","notApplicant","types","notTypes","classCpc","notClassCpc","classIpcr","notClassIpcr","classNat","notClassNat","sat","so"];this.$rootScope.totalFilterCount=keys.reduce(function(total,k){var v=(0,_urlQueryHelpers.getParam)(k);if(_.isArray(v)){return total+v.length}else if(v){return total+1}return total},0)}}]);return PatentSearchController}();var controller=_app2.default.controller("PatentSearchController",PatentSearchController);module.exports=controller},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _reject2=__webpack_require__(453);var _reject3=_interopRequireDefault(_reject2);var _DocTypes=__webpack_require__(478);var _DocTypes2=_interopRequireDefault(_DocTypes);var _constructDateSpec=__webpack_require__(275);var _constructDateSpec2=_interopRequireDefault(_constructDateSpec);var _splitDateSpec=__webpack_require__(170);var _splitDateSpec2=_interopRequireDefault(_splitDateSpec);var _urlQueryHelpers=__webpack_require__(18);var _facetFormatters=__webpack_require__(131);var _facetFormatters2=_interopRequireDefault(_facetFormatters);var _cannedAggregations=__webpack_require__(479);var _cannedAggregations2=_interopRequireDefault(_cannedAggregations);var _ArticleBadges=__webpack_require__(133);var _ArticleBadges2=_interopRequireDefault(_ArticleBadges);var _d2=__webpack_require__(38);var d3=_interopRequireWildcard(_d2);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var moment=window.moment;var ApplyClassificationFilter=__webpack_require__(276);var addClassificationSearch=ApplyClassificationFilter.addClassificationSearch;var Fields=__webpack_require__(60);var SearchSuggestions=__webpack_require__(171);var params=$.deparam(window.location.search);var getParam=function getParam(k){return params[k]||params["?"+k]};var multiFields={PATENT:{"Title, Abstract, Claims":function TitleAbstractClaims(s){return"title:("+s+") OR abstract:("+s+") OR claims:("+s+")"}},SCHOLAR:{"Title, Abstract, Full Text":function TitleAbstractFullText(s){return"title:("+s+") OR abstract:("+s+") OR fulltext:("+s+")"},"Author Search":function AuthorSearch(s){return'author.display_name: "'+s+'"~2'}}};var PatentFieldsList=Fields.filter(function(d){return d.type==="PATENT"&&!d.excludedSearch});_.keys(multiFields.PATENT).forEach(function(k){PatentFieldsList.unshift({label:k,key:k})});PatentFieldsList.unshift({key:"",label:"All Fields"});var ArticleFieldsList=Fields.filter(function(d){return d.type==="SCHOLAR"&&!d.excludedSearch});_.keys(multiFields.SCHOLAR).forEach(function(k){ArticleFieldsList.unshift({label:k,key:k})});ArticleFieldsList.unshift({key:"",label:"All Fields"});var parseTerm=function parseTerm(term){var _term$split$map=term.split(":").map(function(s){return s.trim()}),_term$split$map2=_slicedToArray(_term$split$map,2),field=_term$split$map2[0],value=_term$split$map2[1];if(!value){value=field;field=""}if(value.indexOf("(")===0){value=value.slice(1,-1)}return{field:field,value:value}};var parseQueryString=function parseQueryString(q){return q.split(/AND|OR/g).map(parseTerm)};var fieldsToEscape=["citation_id","classification_cpc","classification_nat","classification_ipcr"];var needsEscaping=function needsEscaping(field){return _.includes(fieldsToEscape,field)};var escapeSlashes=function escapeSlashes(v){return window.encodeURIComponent(v.replace(/\//g,"\\/"))};var formatClause=function formatClause(clause){var field=clause.field,value=clause.value;if(multiFields.PATENT[field]){return multiFields.PATENT[field](value)}if(multiFields.SCHOLAR[field]){return multiFields.SCHOLAR[field](value)}var s=field?field+":":"";if(needsEscaping(field)){value="("+escapeSlashes(value)+")"}if(value.indexOf(" ")>=0){value="("+value+")"}if(field==="citation_id"){value=(value+"").toLowerCase();value=value.replace(/ or /g," OR ")}s+=value;return s};var paramsToMap=function paramsToMap(param){var selected={};var selectedArray=param?_.isArray(param)?param:[param]:[];selectedArray.forEach(function(type){selected[type]=true});return selected};var otherOptions={ft:"Full Text",f:"One doc per family",st:"Stemming"};var StructuredSearchController=function(){function StructuredSearchController($http,$window,$scope,$state,$rootScope,ScholarService){var _this=this;_classCallCheck(this,StructuredSearchController);this.ScholarService=ScholarService;this.$http=$http;this.$scope=$scope;this.$state=$state;var params=$.deparam(window.location.search.slice(1))||{};var ft=params.ft,f=params.f,st=params.st;var selectedDocTypes=paramsToMap(params.types);var selectedJurisdictions=paramsToMap(params.j);var type=getParam("type")||null;if(!type){type=window.location.pathname.indexOf("/lens/scholar")===0?"SCHOLAR":"PATENT"}this.state={type:type,dateFilterExtent:null,clauses:[{field:""}],badges:_ArticleBadges2.default,canParseQueryString:true,predicate:"AND",term:"",docTypes:_DocTypes2.default,otherOptions:_.keys(otherOptions),selectedDocTypes:selectedDocTypes,selectedJurisdictions:selectedJurisdictions,orcidId:"",dateType:"+pub_date",dateFilterField:"date_published",dates:{},tipsReady:true,filter:{PATENT:{l:params.l||"en",types:[],ft:ft==="true",f:f==="true",st:st==="true"||st===undefined},SCHOLAR:{}},multiFields:multiFields,scholarPubDates:_cannedAggregations2.default.aggregations.dates.buckets.map(function(d){return{label:d.key_as_string,value:d.doc_count}}).filter(function(d){return parseFloat(d.label)>1950}),canned:_cannedAggregations2.default,facetFormatters:_facetFormatters2.default,suggestions:SearchSuggestions,selectedClassifications:{},classificationViewer:{type:"CPC"},view:getParam("view")||"structured"};if(params.dates){var spec=(0,_splitDateSpec2.default)(params.dates);var _type=spec.op+spec.type;this.state.dateType=_type;this.state.dates[_type]={fromDate:moment(spec.start).format("YYYY-MM-DD"),toDate:moment(spec.end).format("YYYY-MM-DD")}}this.fetchJurisdictions();setTimeout(function(){_this.render();$scope.$digest()},10);$rootScope.$on("changeNewSearchType",function(e,k){_this.state.tipsReady=false;_this.state.type=k;(0,_urlQueryHelpers.setParam)("type",k);_this.render();setTimeout(function(){_this.state.tipsReady=true;$scope.$digest()},10)})}_createClass(StructuredSearchController,[{key:"classificationsQueryString",value:function classificationsQueryString(){var _this2=this;var keys=_.keys(this.state.selectedClassifications).filter(function(k){return _this2.state.selectedClassifications[k]});if(!keys.length){return""}var q=addClassificationSearch(this.state.classificationViewer.type,keys,true,this.state.predicate);return q}},{key:"render",value:function render(){var params=$.deparam(window.location.search.slice(1))||{};var q=params.q||"";this.state.clauses=[{field:""}];if(this.$state.includes("article")){var previousSearch=this.ScholarService.getPreviousSearch();if(previousSearch.q){q=previousSearch.q}}if(!q&&$("#q").val()){q=$("#q").val()}else if(q!==$("#q").val()){$("#q").val(q)}this.state.canParseQueryString=!(q.includes(" AND ")&&q.includes(" OR "));if(!this.state.canParseQueryString){this.state.view="boolean"}if(q&&this.state.canParseQueryString){this.state.clauses=parseQueryString(q)}this.state.predicate=this.state.canParseQueryString&&q.includes(" OR ")?"OR":"AND";this.changeType()}},{key:"getPlaceholder",value:function getPlaceholder(field){if(!this.state.fieldList){return""}if(!field){return"Malaria"}var hits=this.state.fieldList.filter(function(item){return item.key===field});var hit=hits[0];if(hit){return hit.example}}},{key:"fetchJurisdictions",value:function fetchJurisdictions(){var _this3=this;var url="/lens/service/jurisdictions";this.$http({url:url,cache:true}).then(function(res){_this3.state.topJurisdictions=["JP","CN","US","DE","EP","KR","WO","GB","FR","CA"];_this3.state.jurisdictions=res.data}).catch(function(err){console.warn("Failed to load jurisdictions");_this3.state.jurisdictionsError=err})}},{key:"jurisdictionName",value:function jurisdictionName(key){if(window.jur_mapping[key]){return window.jur_mapping[key].name}if(window.iso_countries[key]){return window.iso_countries[key].name}return key}},{key:"otherOptionName",value:function otherOptionName(k){return otherOptions[k]}},{key:"reset",value:function reset(){this.state.clauses=[{},{}];this.state.predicate="AND";this.state.filter={};this.state.selectedDocTypes={};this.state.selectedJurisdictions={};this.changeType()}},{key:"changeType",value:function changeType(){var _this4=this;this.state.fieldList=this.state.type==="PATENT"?PatentFieldsList:ArticleFieldsList;this.state.groups={PATENT:{},SCHOLAR:{}};this.state.fieldList.forEach(function(d){if(!_this4.state.groups[d.type||"PATENT"][d.group]){_this4.state.groups[d.type||"PATENT"][d.group]=[]}_this4.state.groups[d.type||"PATENT"][d.group].push(d)})}},{key:"addClause",value:function addClause(d){this.state.clauses.push({field:d.field});$.vent.trigger("addClause",d.field)}},{key:"removeClause",value:function removeClause(index){this.state.clauses=(0,_reject3.default)(this.state.clauses,function(d,i){return i===index})}},{key:"printFilter",value:function printFilter(){var _this5=this;var filter=this.state.filter[this.state.type]||{};var s="";var persistParams=[];if(this.state.type==="PATENT"){filter.types=_.keys(this.state.selectedDocTypes).filter(function(k){return _this5.state.selectedDocTypes[k]});filter.j=_.keys(this.state.selectedJurisdictions).filter(function(k){return _this5.state.selectedJurisdictions[k]});if(!filter.ft)delete filter.ft;if(!filter.f)delete filter.f;s+=$.param(filter).replace(/%5B%5D/g,"");var date=this.state.dates[this.state.dateType];if(date&&(date.fromDate||date.toDate)){var spec=(0,_constructDateSpec2.default)(date.fromDate,date.toDate,this.state.dateType);s+="&dates="+encodeURIComponent(spec)}if(this.state.orcidId){s+="&orcidPatents="+this.state.orcidId}persistParams=["patentQueryId"]}else{var format=this.state.dateFilterField==="year_published"?"YYYY":"YYYY-MM-DD";if(this.state.fromYear&&!this.state.toYear){this.state.toYear=window.moment().format(format)}else if(this.state.toYear&&!this.state.fromYear){this.state.fromYear=window.moment("1900-01-01").format(format)}_.keys(_ArticleBadges2.default).forEach(function(k){var badge=_ArticleBadges2.default[k];var prefix=badge.prefix||"has_";if(!filter[prefix+k]){delete filter[prefix+k]}});persistParams=["scholarlySearchId","collectionId"];if(this.state.fromYear){s+=$.param({toYear:this.state.toYear,fromYear:this.state.fromYear,dateFilterField:this.state.dateFilterField})+"&"}if(this.state.orcidId){s+="orcids="+this.state.orcidId+"&"}s+=$.param({filterMap:JSON.stringify(filter)})}persistParams.forEach(function(k){var v=getParam(k);if(v){s+="&"+k+"="+v}});return s}},{key:"printClause",value:function printClause(){var clauses=this.state.clauses.filter(function(d){return d.value}).map(formatClause);var classificationString=this.classificationsQueryString();if(classificationString){clauses.push(classificationString)}this.state.term=clauses.join(" "+this.state.predicate+" ");return this.state.term}},{key:"fieldLabel",value:function fieldLabel(k,group){if(!k){return"All Fields"}var message=window.messages.prop("structured.search."+k);if(message){return message}var words=k.replace(/[\._]/g," ").split(" ");var toTitleCase=function toTitleCase(v){return v[0].toUpperCase()+v.slice(1)};return words.map(toTitleCase).join(" ")}},{key:"submit",value:function submit(){this.state.submitting=true;window.location=(this.state.type==="SCHOLAR"?"/lens/scholar/search/results":"/lens/search")+"?q="+this.printClause()+"&"+this.printFilter()+"&preview=true"}},{key:"setView",value:function setView(k){(0,_urlQueryHelpers.setParam)("view",k);this.state.view=k}}]);return StructuredSearchController}();var controller=_app2.default.controller("StructuredSearchController",StructuredSearchController);module.exports=controller},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(122),baseFilter=__webpack_require__(454),baseIteratee=__webpack_require__(160),isArray=__webpack_require__(6),negate=__webpack_require__(477);function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(baseIteratee(predicate,3)))}module.exports=reject},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(152);function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}module.exports=baseFilter},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(456),keys=__webpack_require__(27);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}module.exports=baseForOwn},function(module,exports,__webpack_require__){var createBaseFor=__webpack_require__(457);var baseFor=createBaseFor();module.exports=baseFor},function(module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}module.exports=createBaseFor},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(31);function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}module.exports=createBaseEach},function(module,exports,__webpack_require__){var baseIsMatch=__webpack_require__(460),getMatchData=__webpack_require__(469),matchesStrictComparable=__webpack_require__(274);function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}module.exports=baseMatches},function(module,exports,__webpack_require__){var Stack=__webpack_require__(99),baseIsEqual=__webpack_require__(271);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}module.exports=baseIsMatch},function(module,exports,__webpack_require__){var Stack=__webpack_require__(99),equalArrays=__webpack_require__(272),equalByTag=__webpack_require__(467),equalObjects=__webpack_require__(468),getTag=__webpack_require__(130),isArray=__webpack_require__(6),isBuffer=__webpack_require__(58),isTypedArray=__webpack_require__(124);var COMPARE_PARTIAL_FLAG=1;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}module.exports=baseIsEqualDeep},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(35),setCacheAdd=__webpack_require__(463),setCacheHas=__webpack_require__(464);function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;module.exports=SetCache},function(module,exports){var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}module.exports=setCacheAdd},function(module,exports){function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas},function(module,exports){function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}module.exports=arraySome},function(module,exports){function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(13),Uint8Array=__webpack_require__(126),eq=__webpack_require__(24),equalArrays=__webpack_require__(272),mapToArray=__webpack_require__(127),setToArray=__webpack_require__(128);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}module.exports=equalByTag},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(129);var COMPARE_PARTIAL_FLAG=1;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}module.exports=equalObjects},function(module,exports,__webpack_require__){var isStrictComparable=__webpack_require__(273),keys=__webpack_require__(27);function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}module.exports=getMatchData},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(271),get=__webpack_require__(4),hasIn=__webpack_require__(471),isKey=__webpack_require__(43),isStrictComparable=__webpack_require__(273),matchesStrictComparable=__webpack_require__(274),toKey=__webpack_require__(25);var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}module.exports=baseMatchesProperty},function(module,exports,__webpack_require__){var baseHasIn=__webpack_require__(472),hasPath=__webpack_require__(473);function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}module.exports=hasIn},function(module,exports){function baseHasIn(object,key){return object!=null&&key in Object(object)}module.exports=baseHasIn},function(module,exports,__webpack_require__){var castPath=__webpack_require__(34),isArguments=__webpack_require__(123),isArray=__webpack_require__(6),isIndex=__webpack_require__(39),isLength=__webpack_require__(59),toKey=__webpack_require__(25);function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}module.exports=hasPath},function(module,exports,__webpack_require__){var baseProperty=__webpack_require__(475),basePropertyDeep=__webpack_require__(476),isKey=__webpack_require__(43),toKey=__webpack_require__(25);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}module.exports=property},function(module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(52);function basePropertyDeep(path){return function(object){return baseGet(object,path)}}module.exports=basePropertyDeep},function(module,exports){var FUNC_ERROR_TEXT="Expected a function";function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}module.exports=negate},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=["Patent Application","Granted Patent","Limited Patent","Search report","Amended Patent","Design right","Abstract","Plant patent","Statutory Invention Registration","Supplementary protection certificate","ambiguous","unknown"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={took:20,timed_out:false,_shards:{total:36,successful:36,skipped:0,failed:0},hits:{total:194830509,max_score:0,hits:[]},aggregations:{"Citing Patents":{value:2857882},"source.asjc_subject":{doc_count_error_upper_bound:843139,sum_other_doc_count:91825948,buckets:[{key:"General Medicine",doc_count:10674038},{key:"Biochemistry",doc_count:2558775},{key:"Condensed Matter Physics",doc_count:2432851},{key:"General Chemistry",doc_count:2103465},{key:"Molecular Biology",doc_count:1884854},{key:"Electrical and Electronic Engineering",doc_count:1799153},{key:"Surgery",doc_count:1604718},{key:"History",doc_count:1413952},{key:"General Materials Science",doc_count:1413288},{key:"General Physics and Astronomy",doc_count:1382057},{key:"Cardiology and Cardiovascular Medicine",doc_count:1332769},{key:"Oncology",doc_count:1323152},{key:"Clinical Neurology",doc_count:1297787},{key:"Materials Chemistry",doc_count:1269175},{key:"Genetics",doc_count:1268615},{key:"Cell Biology",doc_count:1265241},{key:"Mechanical Engineering",doc_count:1248549},{key:"General Engineering",doc_count:1241778},{key:"Sociology and Political Science",doc_count:1235935},{key:"Ecology, Evolution, Behavior and Systematics",doc_count:1226981}]},"author.display_name.keyword":{doc_count_error_upper_bound:16626,sum_other_doc_count:464532464,buckets:[{key:"George M Garrity",doc_count:73796},{key:"Charles Thomas Parker",doc_count:73434},{key:"Wei Wang",doc_count:33321},{key:"Kristin Persson",doc_count:27307},{key:"Wei Zhang",doc_count:26850},{key:"Wei Li",doc_count:25320},{key:"Li Li",doc_count:24527},{key:"Jun Wang",doc_count:20311},{key:"Lei Zhang",doc_count:20230},{key:"Yang Liu",doc_count:19862}]},dates:{buckets:[{key_as_string:"1800",key:-53646624e5,doc_count:3894},{key_as_string:"1801",key:-53331264e5,doc_count:1522},{key_as_string:"1802",key:-53015904e5,doc_count:1391},{key_as_string:"1803",key:-52700544e5,doc_count:1327},{key_as_string:"1804",key:-52385184e5,doc_count:1229},{key_as_string:"1805",key:-5206896e6,doc_count:1079},{key_as_string:"1806",key:-517536e7,doc_count:1278},{key_as_string:"1807",key:-5143824e6,doc_count:1194},{key_as_string:"1808",key:-5112288e6,doc_count:1314},{key_as_string:"1809",key:-50806656e5,doc_count:1331},{key_as_string:"1810",key:-50491296e5,doc_count:1378},{key_as_string:"1811",key:-50175936e5,doc_count:1373},{key_as_string:"1812",key:-49860576e5,doc_count:1412},{key_as_string:"1813",key:-49544352e5,doc_count:1283},{key_as_string:"1814",key:-49228992e5,doc_count:1357},{key_as_string:"1815",key:-48913632e5,doc_count:2463},{key_as_string:"1816",key:-48598272e5,doc_count:1672},{key_as_string:"1817",key:-48282048e5,doc_count:1557},{key_as_string:"1818",key:-47966688e5,doc_count:1693},{key_as_string:"1819",key:-47651328e5,doc_count:1524},{key_as_string:"1820",key:-47335968e5,doc_count:1925},{key_as_string:"1821",key:-47019744e5,doc_count:1970},{key_as_string:"1822",key:-46704384e5,doc_count:2191},{key_as_string:"1823",key:-46389024e5,doc_count:2792},{key_as_string:"1824",key:-46073664e5,doc_count:2377},{key_as_string:"1825",key:-4575744e6,doc_count:2380},{key_as_string:"1826",key:-4544208e6,doc_count:2903},{key_as_string:"1827",key:-4512672e6,doc_count:3323},{key_as_string:"1828",key:-4481136e6,doc_count:3301},{key_as_string:"1829",key:-44495136e5,doc_count:3465},{key_as_string:"1830",key:-44179776e5,doc_count:4045},{key_as_string:"1831",key:-43864416e5,doc_count:3395},{key_as_string:"1832",key:-43549056e5,doc_count:3091},{key_as_string:"1833",key:-43232832e5,doc_count:3259},{key_as_string:"1834",key:-42917472e5,doc_count:4177},{key_as_string:"1835",key:-42602112e5,doc_count:4491},{key_as_string:"1836",key:-42286752e5,doc_count:4248},{key_as_string:"1837",key:-41970528e5,doc_count:4341},{key_as_string:"1838",key:-41655168e5,doc_count:4426},{key_as_string:"1839",key:-41339808e5,doc_count:4587},{key_as_string:"1840",key:-41024448e5,doc_count:5259},{key_as_string:"1841",key:-40708224e5,doc_count:6197},{key_as_string:"1842",key:-40392864e5,doc_count:6545},{key_as_string:"1843",key:-40077504e5,doc_count:6404},{key_as_string:"1844",key:-39762144e5,doc_count:6200},{key_as_string:"1845",key:-3944592e6,doc_count:6414},{key_as_string:"1846",key:-3913056e6,doc_count:8581},{key_as_string:"1847",key:-388152e7,doc_count:10993},{key_as_string:"1848",key:-3849984e6,doc_count:10156},{key_as_string:"1849",key:-38183616e5,doc_count:9815},{key_as_string:"1850",key:-37868256e5,doc_count:13165},{key_as_string:"1851",key:-37552896e5,doc_count:12981},{key_as_string:"1852",key:-37237536e5,doc_count:12871},{key_as_string:"1853",key:-36921312e5,doc_count:13468},{key_as_string:"1854",key:-36605952e5,doc_count:13460},{key_as_string:"1855",key:-36290592e5,doc_count:13894},{key_as_string:"1856",key:-35975232e5,doc_count:14024},{key_as_string:"1857",key:-35659008e5,doc_count:15028},{key_as_string:"1858",key:-35343648e5,doc_count:13475},{key_as_string:"1859",key:-35028288e5,doc_count:14327},{key_as_string:"1860",key:-34712928e5,doc_count:13941},{key_as_string:"1861",key:-34396704e5,doc_count:12857},{key_as_string:"1862",key:-34081344e5,doc_count:13605},{key_as_string:"1863",key:-33765984e5,doc_count:14180},{key_as_string:"1864",key:-33450624e5,doc_count:13066},{key_as_string:"1865",key:-331344e7,doc_count:12406},{key_as_string:"1866",key:-3281904e6,doc_count:14098},{key_as_string:"1867",key:-3250368e6,doc_count:15411},{key_as_string:"1868",key:-3218832e6,doc_count:15240},{key_as_string:"1869",key:-31872096e5,doc_count:14490},{key_as_string:"1870",key:-31556736e5,doc_count:16893},{key_as_string:"1871",key:-31241376e5,doc_count:14403},{key_as_string:"1872",key:-30926016e5,doc_count:17681},{key_as_string:"1873",key:-30609792e5,doc_count:18124},{key_as_string:"1874",key:-30294432e5,doc_count:18598},{key_as_string:"1875",key:-29979072e5,doc_count:19559},{key_as_string:"1876",key:-29663712e5,doc_count:20874},{key_as_string:"1877",key:-29347488e5,doc_count:21311},{key_as_string:"1878",key:-29032128e5,doc_count:22252},{key_as_string:"1879",key:-28716768e5,doc_count:23302},{key_as_string:"1880",key:-28401408e5,doc_count:29340},{key_as_string:"1881",key:-28085184e5,doc_count:24558},{key_as_string:"1882",key:-27769824e5,doc_count:24303},{key_as_string:"1883",key:-27454464e5,doc_count:26129},{key_as_string:"1884",key:-27139104e5,doc_count:26909},{key_as_string:"1885",key:-2682288e6,doc_count:27823},{key_as_string:"1886",key:-2650752e6,doc_count:29565},{key_as_string:"1887",key:-2619216e6,doc_count:31430},{key_as_string:"1888",key:-258768e7,doc_count:32148},{key_as_string:"1889",key:-25560576e5,doc_count:33465},{key_as_string:"1890",key:-25245216e5,doc_count:33092},{key_as_string:"1891",key:-24929856e5,doc_count:32665},{key_as_string:"1892",key:-24614496e5,doc_count:32223},{key_as_string:"1893",key:-24298272e5,doc_count:36131},{key_as_string:"1894",key:-23982912e5,doc_count:38092},{key_as_string:"1895",key:-23667552e5,doc_count:39468},{key_as_string:"1896",key:-23352192e5,doc_count:40121},{key_as_string:"1897",key:-23035968e5,doc_count:41743},{key_as_string:"1898",key:-22720608e5,doc_count:42308},{key_as_string:"1899",key:-22405248e5,doc_count:46350},{key_as_string:"1900",key:-22089888e5,doc_count:49500},{key_as_string:"1901",key:-21774528e5,doc_count:46272},{key_as_string:"1902",key:-21459168e5,doc_count:48658},{key_as_string:"1903",key:-21143808e5,doc_count:47701},{key_as_string:"1904",key:-20828448e5,doc_count:50123},{key_as_string:"1905",key:-20512224e5,doc_count:50350},{key_as_string:"1906",key:-20196864e5,doc_count:52873},{key_as_string:"1907",key:-19881504e5,doc_count:52427},{key_as_string:"1908",key:-19566144e5,doc_count:54920},{key_as_string:"1909",key:-1924992e6,doc_count:57131},{key_as_string:"1910",key:-1893456e6,doc_count:60391},{key_as_string:"1911",key:-186192e7,doc_count:60096},{key_as_string:"1912",key:-1830384e6,doc_count:63412},{key_as_string:"1913",key:-17987616e5,doc_count:62293},{key_as_string:"1914",key:-17672256e5,doc_count:59638},{key_as_string:"1915",key:-17356896e5,doc_count:53603},{key_as_string:"1916",key:-17041536e5,doc_count:52350},{key_as_string:"1917",key:-16725312e5,doc_count:49026},{key_as_string:"1918",key:-16409952e5,doc_count:47614},{key_as_string:"1919",key:-16094592e5,doc_count:50306},{key_as_string:"1920",key:-15779232e5,doc_count:60059},{key_as_string:"1921",key:-15463008e5,doc_count:63662},{key_as_string:"1922",key:-15147648e5,doc_count:68197},{key_as_string:"1923",key:-14832288e5,doc_count:70171},{key_as_string:"1924",key:-14516928e5,doc_count:74638},{key_as_string:"1925",key:-14200704e5,doc_count:79825},{key_as_string:"1926",key:-13885344e5,doc_count:85474},{key_as_string:"1927",key:-13569984e5,doc_count:89730},{key_as_string:"1928",key:-13254624e5,doc_count:93433},{key_as_string:"1929",key:-129384e7,doc_count:98014},{key_as_string:"1930",key:-1262304e6,doc_count:104173},{key_as_string:"1931",key:-1230768e6,doc_count:102644},{key_as_string:"1932",key:-1199232e6,doc_count:104652},{key_as_string:"1933",key:-11676096e5,doc_count:105239},{key_as_string:"1934",key:-11360736e5,doc_count:105545},{key_as_string:"1935",key:-11045376e5,doc_count:110662},{key_as_string:"1936",key:-10730016e5,doc_count:111444},{key_as_string:"1937",key:-10413792e5,doc_count:110232},{key_as_string:"1938",key:-10098432e5,doc_count:113112},{key_as_string:"1939",key:-9783072e5,doc_count:110463},{key_as_string:"1940",key:-9467712e5,doc_count:129278},{key_as_string:"1941",key:-9151488e5,doc_count:97340},{key_as_string:"1942",key:-8836128e5,doc_count:92725},{key_as_string:"1943",key:-8520768e5,doc_count:86438},{key_as_string:"1944",key:-8205408e5,doc_count:80884},{key_as_string:"1945",key:-7889184e5,doc_count:83288},{key_as_string:"1946",key:-7573824e5,doc_count:112201},{key_as_string:"1947",key:-7258464e5,doc_count:132808},{key_as_string:"1948",key:-6943104e5,doc_count:152908},{key_as_string:"1949",key:-662688e6,doc_count:169863},{key_as_string:"1950",key:-631152e6,doc_count:235319},{key_as_string:"1951",key:-599616e6,doc_count:243132},{key_as_string:"1952",key:-56808e7,doc_count:255594},{key_as_string:"1953",key:-5364576e5,doc_count:264531},{key_as_string:"1954",key:-5049216e5,doc_count:270816},{key_as_string:"1955",key:-4733856e5,doc_count:279170},{key_as_string:"1956",key:-4418496e5,doc_count:287048},{key_as_string:"1957",key:-4102272e5,doc_count:301066},{key_as_string:"1958",key:-3786912e5,doc_count:316816},{key_as_string:"1959",key:-3471552e5,doc_count:340076},{key_as_string:"1960",key:-3156192e5,doc_count:387862},{key_as_string:"1961",key:-2839968e5,doc_count:381538},{key_as_string:"1962",key:-2524608e5,doc_count:406241},{key_as_string:"1963",key:-2209248e5,doc_count:449027},{key_as_string:"1964",key:-1893888e5,doc_count:480161},{key_as_string:"1965",key:-1577664e5,doc_count:529744},{key_as_string:"1966",key:-1262304e5,doc_count:562866},{key_as_string:"1967",key:-946944e5,doc_count:606828},{key_as_string:"1968",key:-631584e5,doc_count:651413},{key_as_string:"1969",key:-31536e6,doc_count:685228},{key_as_string:"1970",key:0,doc_count:803816},{key_as_string:"1971",key:31536e6,doc_count:758261},{key_as_string:"1972",key:63072e6,doc_count:791408},{key_as_string:"1973",key:946944e5,doc_count:816015},{key_as_string:"1974",key:1262304e5,doc_count:843366},{key_as_string:"1975",key:1577664e5,doc_count:877465},{key_as_string:"1976",key:1893024e5,doc_count:900248},{key_as_string:"1977",key:2209248e5,doc_count:940136},{key_as_string:"1978",key:2524608e5,doc_count:982598},{key_as_string:"1979",key:2839968e5,doc_count:1021205},{key_as_string:"1980",key:3155328e5,doc_count:1130070},{key_as_string:"1981",key:3471552e5,doc_count:1110521},{key_as_string:"1982",key:3786912e5,doc_count:1137955},{key_as_string:"1983",key:4102272e5,doc_count:1199788},{key_as_string:"1984",key:4417632e5,doc_count:1258158},{key_as_string:"1985",key:4733856e5,doc_count:1312567},{key_as_string:"1986",key:5049216e5,doc_count:1381148},{key_as_string:"1987",key:5364576e5,doc_count:1461698},{key_as_string:"1988",key:5679936e5,doc_count:1546287},{key_as_string:"1989",key:599616e6,doc_count:1648366},{key_as_string:"1990",key:631152e6,doc_count:1795118},{key_as_string:"1991",key:662688e6,doc_count:1797365},{key_as_string:"1992",key:694224e6,doc_count:1873141},{key_as_string:"1993",key:7258464e5,doc_count:1971062},{key_as_string:"1994",key:7573824e5,doc_count:2081212},{key_as_string:"1995",key:7889184e5,doc_count:2194656},{key_as_string:"1996",key:8204544e5,doc_count:2357162},{key_as_string:"1997",key:8520768e5,doc_count:2490144},{key_as_string:"1998",key:8836128e5,doc_count:2643917},{key_as_string:"1999",key:9151488e5,doc_count:2785816},{key_as_string:"2000",key:9466848e5,doc_count:3118669},{key_as_string:"2001",key:9783072e5,doc_count:3308165},{key_as_string:"2002",key:10098432e5,doc_count:3598251},{key_as_string:"2003",key:10413792e5,doc_count:3991982},{key_as_string:"2004",key:10729152e5,doc_count:4356321},{key_as_string:"2005",key:11045376e5,doc_count:4715916},{key_as_string:"2006",key:11360736e5,doc_count:5159770},{key_as_string:"2007",key:11676096e5,doc_count:5729511},{key_as_string:"2008",key:11991456e5,doc_count:6096633},{key_as_string:"2009",key:1230768e6,doc_count:6659963},{key_as_string:"2010",key:1262304e6,doc_count:7283188},{key_as_string:"2011",key:129384e7,doc_count:7663252},{key_as_string:"2012",key:1325376e6,doc_count:7754785},{key_as_string:"2013",key:13569984e5,doc_count:8074596},{key_as_string:"2014",key:13885344e5,doc_count:8298754},{key_as_string:"2015",key:14200704e5,doc_count:8391947},{key_as_string:"2016",key:14516064e5,doc_count:8216277},{key_as_string:"2017",key:14832288e5,doc_count:7096205},{key_as_string:"2018",key:15147648e5,doc_count:4394734}]},citation_id_type:{doc_count_error_upper_bound:0,sum_other_doc_count:0,buckets:[{key:"magid",doc_count:162462439},{key:"doi",doc_count:100508649},{key:"pmid",doc_count:28980458},{key:"pmcid",doc_count:2502440},{key:"core",doc_count:0}]},"mesh_term.mesh_heading":{doc_count_error_upper_bound:381024,sum_other_doc_count:202020439,buckets:[{key:"Humans",doc_count:17337049},{key:"Female",doc_count:8069659},{key:"Male",doc_count:7961038},{key:"Animals",doc_count:6286593},{key:"Adult",doc_count:4655248},{key:"Middle Aged",doc_count:4014703},{key:"Aged",doc_count:2831548},{key:"Adolescent",doc_count:1891851},{key:"Child",doc_count:1582937},{key:"Rats",doc_count:1530777},{key:"Mice",doc_count:1400910},{key:"Time Factors",doc_count:1134943},{key:"Treatment Outcome",doc_count:869307},{key:"Child, Preschool",doc_count:862782},{key:"United States",doc_count:841055},{key:"Pregnancy",doc_count:827566},{key:"Aged, 80 and over",doc_count:819800},{key:"Infant",doc_count:746693},{key:"Risk Factors",doc_count:742210},{key:"Retrospective Studies",doc_count:714564}]},"Patent Citations":{value:17857911},publication_type:{doc_count_error_upper_bound:0,sum_other_doc_count:1770839,buckets:[{key:"journal article",doc_count:102886657},{key:"unknown",doc_count:63978819},{key:"book chapter",doc_count:10732096},{key:"conference proceedings",doc_count:4262848},{key:"component",doc_count:3411811},{key:"book",doc_count:2517682},{key:"conference proceedings article",doc_count:2035459},{key:"dataset",doc_count:1707211},{key:"reference entry",doc_count:788038},{key:"report",doc_count:739049}]},field_of_study:{doc_count_error_upper_bound:3613860,sum_other_doc_count:774459570,buckets:[{key:"Medicine",doc_count:24908629},{key:"Biology",doc_count:16069327},{key:"Chemistry",doc_count:13444378},{key:"Engineering",doc_count:10500481},{key:"Computer Science",doc_count:8817479},{key:"Physics",doc_count:7333896},{key:"History",doc_count:6787524},{key:"Psychology",doc_count:6746974},{key:"Internal medicine",doc_count:6698582},{key:"Performance art",doc_count:6652449}]},"funding.organisation.keyword":{doc_count_error_upper_bound:50487,sum_other_doc_count:6983325,buckets:[{key:"National Natural Science Foundation of China",doc_count:617251},{key:"NCI NIH HHS",doc_count:469710},{key:"NIGMS NIH HHS",doc_count:381657},{key:"NHLBI NIH HHS",doc_count:354813},{key:"NIAID NIH HHS",doc_count:258939},{key:"NIDDK NIH HHS",doc_count:231332},{key:"NINDS NIH HHS",doc_count:214912},{key:"NCRR NIH HHS",doc_count:199558},{key:"NICHD NIH HHS",doc_count:176832},{key:"NIMH NIH HHS",doc_count:171243}]},"Works Cited by Scholarly":{doc_count:61680830},"author.affiliation":{doc_count_error_upper_bound:175076,sum_other_doc_count:100713443,buckets:[{key:"Chinese Academy of Sciences",doc_count:440122},{key:"Harvard University",doc_count:378766},{key:"Max Planck Society",doc_count:370365},{key:"Centre national de la recherche scientifique",doc_count:327877},{key:"National Institutes of Health",doc_count:278721},{key:"University of Michigan",doc_count:273197},{key:"University of California, Berkeley",doc_count:271437},{key:"University of Tokyo",doc_count:270593},{key:"Russian Academy of Sciences",doc_count:267948},{key:"University of Washington",doc_count:241831}]},"author.affiliation.grid.address.country_code":{doc_count_error_upper_bound:165,sum_other_doc_count:109964,buckets:[{key:"US",doc_count:14173380},{key:"CN",doc_count:5401002},{key:"GB",doc_count:3547179},{key:"JP",doc_count:2518281},{key:"DE",doc_count:2341564},{key:"CA",doc_count:1695356},{key:"FR",doc_count:1385987},{key:"AU",doc_count:1328328},{key:"IT",doc_count:1173442},{key:"IN",doc_count:1151335},{key:"BR",doc_count:1103968},{key:"ES",doc_count:1003021},{key:"KR",doc_count:935815},{key:"NL",doc_count:832937},{key:"RU",doc_count:618355},{key:"SE",doc_count:595883},{key:"TW",doc_count:557095},{key:"CH",doc_count:546845},{key:"BE",doc_count:528743},{key:"IL",doc_count:431045},{key:"IR",doc_count:407633},{key:"PL",doc_count:376785},{key:"TR",doc_count:366021},{key:"DK",doc_count:348751},{key:"MX",doc_count:344043},{key:"AT",doc_count:320969},{key:"FI",doc_count:311495},{key:"ZA",doc_count:282924},{key:"PT",doc_count:281639},{key:"NZ",doc_count:249036},{key:"SG",doc_count:231751},{key:"NO",doc_count:228428},{key:"MY",doc_count:219505},{key:"GR",doc_count:204878},{key:"CZ",doc_count:201681},{key:"IE",doc_count:191743},{key:"CO",doc_count:177197},{key:"HU",doc_count:163164},{key:"AR",doc_count:158093},{key:"EG",doc_count:143629},{key:"PK",doc_count:135611},{key:"ID",doc_count:132158},{key:"TH",doc_count:131977},{key:"CL",doc_count:128079},{key:"SA",doc_count:115815},{key:"NG",doc_count:82372},{key:"UA",doc_count:70242},{key:"RO",doc_count:61258},{key:"RS",doc_count:57343},{key:"HR",doc_count:57131},{key:"BG",doc_count:50990},{key:"VE",doc_count:50926},{key:"BD",doc_count:49168},{key:"SK",doc_count:47869},{key:"SI",doc_count:46128},{key:"PE",doc_count:37703},{key:"EE",doc_count:34466},{key:"JO",doc_count:33862},{key:"AE",doc_count:31488},{key:"LT",doc_count:29415},{key:"LU",doc_count:28113},{key:"CR",doc_count:28112},{key:"PH",doc_count:28046},{key:"LV",doc_count:27422},{key:"KE",doc_count:27117},{key:"TN",doc_count:26792},{key:"VN",doc_count:26551},{key:"LB",doc_count:23231},{key:"GH",doc_count:22725},{key:"CY",doc_count:22306},{key:"LK",doc_count:20183},{key:"CU",doc_count:18320},{key:"KW",doc_count:16664},{key:"NP",doc_count:16367},{key:"IQ",doc_count:15418},{key:"IS",doc_count:14750},{key:"ET",doc_count:14399},{key:"QA",doc_count:14243},{key:"MZ",doc_count:13943},{key:"BY",doc_count:13828},{key:"EC",doc_count:13085},{key:"MO",doc_count:12912},{key:"UG",doc_count:12748},{key:"BS",doc_count:12670},{key:"ZW",doc_count:12487},{key:"OM",doc_count:12311},{key:"DZ",doc_count:10832},{key:"ZM",doc_count:10783},{key:"TZ",doc_count:10185},{key:"KH",doc_count:9747},{key:"BA",doc_count:9260},{key:"AM",doc_count:8651},{key:"PS",doc_count:7598},{key:"GE",doc_count:7317},{key:"BJ",doc_count:7206},{key:"SD",doc_count:6927},{key:"MA",doc_count:6778},{key:"CD",doc_count:6491},{key:"PA",doc_count:6358},{key:"KZ",doc_count:5982}]},"open_access.colour":{doc_count_error_upper_bound:0,sum_other_doc_count:0,buckets:[{key:"bronze",doc_count:7410422},{key:"green",doc_count:3577762},{key:"hybrid",doc_count:3167763},{key:"gold",doc_count:2906740},{key:"unknown",doc_count:80160}]},"chemical.name":{doc_count_error_upper_bound:117320,sum_other_doc_count:49763494,buckets:[{key:"RNA, Messenger",doc_count:357491},{key:"Anti-Bacterial Agents",doc_count:304541},{key:"DNA",doc_count:275146},{key:"Calcium",doc_count:259404},{key:"Antineoplastic Agents",doc_count:254515},{key:"Biomarkers",doc_count:237330},{key:"Recombinant Proteins",doc_count:209937},{key:"Proteins",doc_count:196890},{key:"Antibodies, Monoclonal",doc_count:182401},{key:"Insulin",doc_count:177204}]},"source.title":{doc_count_error_upper_bound:139218,sum_other_doc_count:120229736,buckets:[{key:"ChemInform",doc_count:808430},{key:"The Lancet",doc_count:484241},{key:"BMJ",doc_count:445310},{key:"Nature",doc_count:435058},{key:"PsycEXTRA Dataset",doc_count:343386},{key:"Notes and Queries",doc_count:342978},{key:"Science",doc_count:269080},{key:"PLOS ONE",doc_count:226005},{key:"F1000 - Post-publication peer review of the biomedical literature",doc_count:203308},{key:"Journal of the American Chemical Society",doc_count:198972}]},"Scholarly Citations":{value:1292781615},"open_access.license":{doc_count_error_upper_bound:0,sum_other_doc_count:0,buckets:[{key:"unknown",doc_count:11013174},{key:"cc-by",doc_count:2784948},{key:"cc-by-nc-nd",doc_count:994473},{key:"cc-by-nc",doc_count:876870},{key:"publisher-specific",doc_count:682758},{key:"cc-by-nc-sa",doc_count:319878},{key:"implied-oa",doc_count:306961},{key:"cc-by-sa",doc_count:88632},{key:"pd",doc_count:32207},{key:"cc0",doc_count:25159},{key:"cc-by-nd",doc_count:17787}]},"conference.name":{doc_count_error_upper_bound:15738,sum_other_doc_count:3897657,buckets:[{key:"Conference on Lasers and Electro-Optics",doc_count:47556},{key:"International Conference of the IEEE Engineering in Medicine and Biology Society",doc_count:42633},{key:"International Conference on Acoustics, Speech, and Signal Processing",doc_count:41209},{key:"Conference on Decision and Control",doc_count:37075},{key:"International Conference on Communications",doc_count:33673},{key:"International Geoscience and Remote Sensing Symposium",doc_count:32881},{key:"International Symposium on Circuits and Systems",doc_count:29934},{key:"Systems, Man and Cybernetics",doc_count:28629},{key:"International Conference on Robotics and Automation",doc_count:27984},{key:"Vehicular Technology Conference",doc_count:26257}]},"Citing Scholarly Works":{value:55323101},keyword:{doc_count_error_upper_bound:17694,sum_other_doc_count:22722176,buckets:[{key:"experimental lab study",doc_count:79836},{key:"population",doc_count:35483},{key:"inflammation",doc_count:35425},{key:"pregnancy",doc_count:35385},{key:"cancer",doc_count:33723},{key:"child",doc_count:33173},{key:"demographic factors",doc_count:32635},{key:"developing countries",doc_count:32283},{key:"epidemiology",doc_count:29720},{key:"obesity",doc_count:28450},{key:"apoptosis",doc_count:28078},{key:"research methodology",doc_count:28032},{key:"pharmacology",doc_count:26840},{key:"family planning",doc_count:26274},{key:"physiology",doc_count:26054},{key:"mortality",doc_count:25986},{key:"depression",doc_count:25607},{key:"pathology",doc_count:25487},{key:"population dynamics",doc_count:24547},{key:"breast cancer",doc_count:24390}]},"Works Cited by Patents":{doc_count:3716192}},scholarlySearchId:"jTnuO1sJaijNAfZ490D2ychV0HRDRwEczkTwdxd1VR37IbIfrYZhQRUZL0y8POIv",totalPatentQueryResults:null,joiner_limit:5e4,queries:{SCHOLAR:{searchType:"SCHOLAR",unjoinedResultSize:0,joinOptimisedResultSize:0,joinResultSize:0,searchId:"jTnuO1sJaijNAfZ490D2ychV0HRDRwEczkTwdxd1VR37IbIfrYZhQRUZL0y8POIv",joined:false,capped:false},PATENT:{searchType:"PATENT",unjoinedResultSize:0,joinOptimisedResultSize:0,joinResultSize:0,joined:false,capped:false}}}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ViewPatentController=function ViewPatentController(CollectionService){_classCallCheck(this,ViewPatentController);this.CollectionService=CollectionService;this.state={newCollection:null,addToCollection:false,removeFromCollection:false}};var controller=_app2.default.controller("ViewPatentController",ViewPatentController);module.exports=controller},function(module,exports,__webpack_require__){"use strict";module.exports={AccordionDirective:__webpack_require__(482),AddToCollectionDirective:__webpack_require__(483),AnalysisItemDirective:__webpack_require__(484),ApplicantLogoDirective:__webpack_require__(486),ArticleItemMetaDirective:__webpack_require__(487),ArticleItemPreviewDirective:__webpack_require__(488),BooleanEditorDirective:__webpack_require__(490),BreadcrumbsDirective:__webpack_require__(493),CarouselDirective:__webpack_require__(494),CitationItemDirective:__webpack_require__(495),CitationsDirective:__webpack_require__(497),ClassificationViewer:__webpack_require__(499),CollaborationNetworkDirective:__webpack_require__(501),CollectionActionDirective:__webpack_require__(503),CollectionControlsDirective:__webpack_require__(505),CollectionDetailsDirective:__webpack_require__(506),CollectionFormDirective:__webpack_require__(508),CollectionListDirective:__webpack_require__(510),CollectionListItemDirective:__webpack_require__(511),CreateAnalysisForm:__webpack_require__(512),CreateCollectionDirective:__webpack_require__(514),DatepickerDirective:__webpack_require__(516),DeepAnalysisHeadingControl:__webpack_require__(517),DeepAnalysisItemDirective:__webpack_require__(519),DisplayQueryDirective:__webpack_require__(538),DocPreviewDirective:__webpack_require__(539),ExplorerWindow:__webpack_require__(541),FamilyMapDirective:__webpack_require__(542),FauxSelectDirective:__webpack_require__(544),FavouritesDirective:__webpack_require__(545),FlagDirective:__webpack_require__(547),FocusDirective:__webpack_require__(548),HeatMapDirective:__webpack_require__(549),HistoryDirective:__webpack_require__(550),HorizontalBarChartDirective:__webpack_require__(551),HtmlTooltipDirective:__webpack_require__(552),HtmlToPlaintextDirective:__webpack_require__(553),IncludeReplaceDirective:__webpack_require__(554),InlineNotesDirective:__webpack_require__(555),InstitutionDetailsDirective:__webpack_require__(556),LandingUpdateNotice:__webpack_require__(557),LazyLoadDirective:__webpack_require__(558),LensCoinsDirective:__webpack_require__(559),LineChartDirective:__webpack_require__(560),ListNotesDirective:__webpack_require__(562),LoaderDirective:__webpack_require__(563),LocaleSelectorDirective:__webpack_require__(565),LogoTooltipDirective:__webpack_require__(566),ModalDirective:__webpack_require__(567),MultiSelectDirective:__webpack_require__(568),NavDirective:__webpack_require__(570),NoteTableRowDirective:__webpack_require__(572),OrcidAuthorDirective:__webpack_require__(574),PagedResourcePaginationDirective:__webpack_require__(576),PatentAnalysisDirective:__webpack_require__(578),PatentAnalysisPreviewDirective:__webpack_require__(579),PatentFacetFiltersDirective:__webpack_require__(580),PatentFamilyDirective:__webpack_require__(590),PatentQueryDetailsDirective:__webpack_require__(594),PieChartDirective:__webpack_require__(597),QuickSearchDirective:__webpack_require__(599),RangeSliderDirective:__webpack_require__(607),RecentCollectionsDirective:__webpack_require__(608),RecentNotesDirective:__webpack_require__(610),RemoveFromCollectionDirective:__webpack_require__(612),SaveAsImageDirective:__webpack_require__(614),SavedQueriesDirective:__webpack_require__(619),ScholarAnalysisDirective:__webpack_require__(621),ScholarAnalysisSelectorDirective:__webpack_require__(623),ScholarlyWorkTitleDirective:__webpack_require__(624),SearchBarDirective:__webpack_require__(625),SearchHistoryDirective:__webpack_require__(626),SearchOrcidDirective:__webpack_require__(628),SearchTipsDirective:__webpack_require__(630),SelectCollectionsListDirective:__webpack_require__(631),SelectCollectionsListItemDirective:__webpack_require__(633),SelectOnClickDirective:__webpack_require__(635),SidebarContentDirective:__webpack_require__(636),SideTabsDirective:__webpack_require__(637),SimpleBarChartDirective:__webpack_require__(638),SliderDirective:__webpack_require__(640),StateActiveDirective:__webpack_require__(641),StickyDirective:__webpack_require__(642),TagsListDirective:__webpack_require__(643),TooltipDirective:__webpack_require__(645),TristateCheckboxDirective:__webpack_require__(646),TruncateDirective:__webpack_require__(647),UrlSafeDirective:__webpack_require__(648),UserProfilePictureDirective:__webpack_require__(649),UserSettingsDirective:__webpack_require__(651),VegaChartDirective:__webpack_require__(652),VersionCheckDirective:__webpack_require__(653),WordCloudDirective:__webpack_require__(654),WorkAreaCollectionsDirective:__webpack_require__(657),WorkAreaNotesDirective:__webpack_require__(659),WorkAreaSummaryDirective:__webpack_require__(661),WorldMapDirective:__webpack_require__(663)}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensAccordion",function($timeout){return{restrict:"AE",replace:true,scope:{},link:function link(scope,element){$timeout(function(){element.addClass("lens-accordion-initialised");element.accordion({collapsible:true,active:false,heightStyle:"content"})})}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var deps=["CollectionService","$q"];_app2.default.directive("lensAddToCollection",[].concat(deps,[function(CollectionService,$q){return{template:__webpack_require__(245),scope:{lensIds:"<",selectedAll:"<",search:"&",newCollection:"=",visible:"=",type:"<"},link:function link(scope){var vm=scope.vm={collections:window.globalCollections||[],collectionFilter:{title:"",type:scope.type},checkedCollections:{}};if(vm.collections.length===1){var collection=vm.collections[0];vm.checkedCollections[collection.id]=true}scope.addToCollection=function(){vm.submitting=true;vm.valid=true;var lensIds=scope.lensIds;var collectionIds=_.keys(vm.checkedCollections).filter(function(k){return vm.checkedCollections[k]});if(!collectionIds.length){vm.submitting=false;vm.valid=false;return}if(scope.selectedAll){var _promises=collectionIds.map(function(id){var collection=vm.collections.filter(function(collection){return parseInt(id)===collection.id}).pop();var originalItemCount=collection.itemCount;return CollectionService.addSearchToCollection(collection,scope.search).then(function(data){var added=data.itemCount-originalItemCount;if(added){var message="Added "+added+" of all search results to collection";notification.notify(message)}else if(data.itemCount===window.UI_CONFIG.user.collectionSizeLimits[collection.type]){var _message=window.messages.prop("collection.limit.reached");notification.warning(_message)}else{var _message2=window.messages.prop("user.collections.add.exists");notification.info(_message2)}})});$q.all(_promises).then(function(){vm.submitting=false;scope.close()});return}var promises=[];collectionIds.forEach(function(id){var addingCount=lensIds.length;var collection=vm.collections.filter(function(collection){return parseInt(id)===collection.id}).pop();var originalItemCount=collection.itemCount;var promise=CollectionService.addItems(id,lensIds).then(function(data){var added=data.itemCount-originalItemCount;if(added){var message="Added "+added+" of "+addingCount+" items to collection";notification.notify(message)}else if(data.itemCount===window.UI_CONFIG.user.collectionSizeLimits[collection.type]){var _message3=window.messages.prop("collection.limit.reached");notification.warning(_message3)}else{var _message4=window.messages.prop("user.collections.add.exists");notification.info(_message4)}lensIds.forEach(function(lensId){if(!window.globalPatentCollectionMap){window.globalPatentCollectionMap={}}if(!window.globalPatentCollectionMap[lensId]){window.globalPatentCollectionMap[lensId]=[]}window.globalPatentCollectionMap[lensId].push(collection.id)});vm.checkedCollections={}}).catch(function(err){console.warn(err);notification.error("Could not add to collection: "+collection.title)});promises.push(promise)});$q.all(promises).then(function(){vm.submitting=false;scope.visible=false}).catch(function(err){console.warn(err);vm.submitting=false})};scope.doNewCollection=function(){scope.newCollection={type:scope.type};scope.visible=false};scope.close=function(){scope.visible=false};var handleError=function handleError(res){console.warn(res.data)};scope.refresh=function(){CollectionService.getAll().then(function(data){vm.collections=data}).catch(handleError)};CollectionService.on("REFRESH_COLLECTIONS",scope.refresh);scope.$on("$destroy",function(){CollectionService.removeListener("REFRESH_COLLECTIONS",scope.refresh)});if(!window.globalCollections){scope.refresh()}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChartTypes=__webpack_require__(270);var IsoCountries=__webpack_require__(23);var deps=["ScholarService","$q","$rootScope"];_app2.default.directive("lensAnalysisItem",[].concat(deps,[function(ScholarService,$q,$rootScope){return{template:__webpack_require__(485),scope:{k:"<",field:"=",labelFieldKey:"<",isPreview:"<",data:"<",loading:"<",onClickItem:"<",onClickCountry:"<",onClickGetMore:"<",onClickLineChartPoint:"<",onClickLogoGridItem:"<",onClickToggleFacet:"<",onFilterYearRange:"<"},link:function link(scope){var fullscreenKeypressListener=function fullscreenKeypressListener(e){if(e.key==="Escape"){scope.toggleFullscreen()}};var vm=scope.vm={fullscreen:false};scope.chartVersion=0;if(scope.isPreview&&scope.field){var limitMap={"logo-grid":6,heat:9,bar:5};_.keys(limitMap).forEach(function(k){if(scope.field.currentView===k){scope.dataPreview=[{values:scope.data[0].values.slice(0,limitMap[k])}]}})}var handlers=["onClickItem","onClickCountry","onClickGetMore","onClickLineChartPoint","onClickLogoGridItem","onClickToggleFacet","onFilterYearRange"];handlers.forEach(function(k){if(scope[k]){scope[k]=scope[k].bind(scope.$parent.$analysisCtrl||scope.$parent.$ctrl||undefined)}});var mapKeys=["jurisdiction","author.affiliation.grid.address.country_code"];if(_.includes(mapKeys,scope.k)){scope.map={counts:{}};var jurisdictions=scope.data;if(jurisdictions&&jurisdictions[0]&&jurisdictions[0].values){jurisdictions[0].values.forEach(function(_ref){var label=_ref.label,value=_ref.value;var name=(0,_get3.default)(IsoCountries[label],"name")||label;scope.map.counts[name]=value})}}scope.typeMap=function(type){return"Display as "+((0,_get3.default)(ChartTypes[type],"label")||type)};scope.barChartTooltip=function(d){return"Filter by "+(d.agg||scope.field.filterKey||scope.k)+" = "+(d.filterValue||d.label)};if(scope.k==="npl_record_lens_id"){var data=scope.data[0].values;var ids=data.map(function(d){return parseInt(d.label)});var FIELDS=["metadata.title","record_lens_id_num","citation_ids"];var promise=ScholarService.getAll(ids,"lens_ids_num",FIELDS);$q.when(promise).then(function(articles){var map={};articles.forEach(function(article){map[article.record_lens_id_num]=article.title});scope.data[0].values.forEach(function(d){d.filterValue=d.label;d.displayName=map[d.label]})}).catch(function(err){console.warn(err)})}scope.toggleFullscreen=function(){vm.fullscreen=!vm.fullscreen;$rootScope.isFullscreen=vm.fullscreen;window.removeEventListener("keyup",fullscreenKeypressListener);if(vm.fullscreen){window.addEventListener("keyup",fullscreenKeypressListener)}$rootScope.$broadcast("REFRESH_ANALYSIS_VISUALISATIONS")}}}}]))},function(module,exports){module.exports='<div class="analysis-item" ng-class="{\'analysis-item-preview\': isPreview, fullscreen: vm.fullscreen}">\n    <div class="panel panel-default" lens-save-as-image="k" ng-if="!(isPreview && data[0].values.length < 2)">\n        <div class="panel-heading clearfix">\n            <strong class="pull-left-lg">{{field[labelFieldKey || \'label\'] || k}}</strong>\n            <div class="pull-right-lg analysis-panel-options">\n                <form class="panel-display-form" ng-if="field.views.length > 1">\n                    <label class="select select-sm">\n                        <select ng-options="type as typeMap(type) for type in field.views"\n                            ng-model="field.currentView"\n                        ></select>\n                        <i></i>\n                    </label>\n                </form>\n                <div class="btn-group btn-group-xs">\n                    <span ng-click="chartVersion = chartVersion + 1"\n                        ng-if="field.currentView === \'cloud\'"\n                        tooltip-title="Refresh View"\n                        class="btn"\n                    >\n                        <em class="fa fa-refresh"></em>\n                    </span>\n                </div>\n                <span ng-click="onClickGetMore(k)" ng-if="data[0].otherDocCount && data[0].values.length < 100" class="btn btn-xxs">\n                    <em ng-if="loading" class="fa fa-refresh fa-spin"></em>\n                    {{loading ? \'Loading\' : \'Load\'}}\n                    <span ng-if="data[0].otherDocCount > 100">top 100</span>\n                    <span ng-if="data[0].otherDocCount <= 100">all</span>\n                    {{loading ? \'...\' : \'\'}}\n                </span>\n\n                <button class="btn btn-xxs" ng-click="onClickToggleFacet(k)" tooltip-title="Remove Panel" ng-if="!vm.fullscreen">\n                    <em class="fa fa-times col-error"></em>\n                </button>\n            </div>\n\n        </div>\n        <div class="panel-body" style="position: relative;" ng-if="data[0].values.length < 2 ">\n            <div class="no-content">\n                <em class="fa fa-exclamation-triangle col-sec"></em>\n                {{::\'analysis.not.enough.data\' | message}}\n            </div>\n        </div>\n        <div class="panel-body analysis-item-body" style="position: relative;" ng-if="data[0].values.length >= 2 ">\n\n            <div ng-if="data[0].values.length > 1 && field.currentView === \'line\'"\n                lens-line-chart\n                raw-data="data"\n                element-click="onClickLineChartPoint"\n                filter-selection="onFilterYearRange"\n                height="isPreview ? 200 : 400"\n                axis-label="\'Year\'"\n                y-axis-label="\'Document Count\'"\n                is-preview="isPreview"\n            ></div>\n\n            <div lens-horizontal-bar-chart\n                data="data"\n                ng-if="field.currentView === \'bar\'"\n                element-click="onClickItem"\n                element-tooltip="barChartTooltip"\n                flip="isPreview"\n                height="isPreview ? 300 : null"\n                alternate-colours="true"\n            ></div>\n\n            <div\n                lens-world-map\n                ng-if="field.currentView === \'map\'"\n                class="lens-world-map"\n                counts="map.counts"\n                world-map-markers="[]"\n                tooltip-data="map.tooltip"\n                country-tooltip="true"\n                on-click-country="onClickCountry"\n                field-name="k === \'author.affiliation.grid.address.country_code\' ? \'Institution Country/Region\' : k"\n                height="isPreview ? 250 : 400"\n                min-zoom="isPreview ? 0.5 : null"\n            ></div>\n\n            <div ng-if="field.currentView === \'heat\'"\n                lens-heatmap\n                auto-domain="true"\n                data="data[0].values"\n                on-click-item="onClickItem"\n            ></div>\n\n            <div ng-if="field.currentView === \'pie\'"\n                lens-pie-chart\n                data="data[0].values"\n                element-click="onClickItem"\n                key="k"\n                show-legend="!isPreview"\n                height="isPreview ? 250 : 500"\n            ></div>\n\n            <div ng-if="field.currentView === \'treemap\'"\n                lens-treemap\n                data="data[0].values"\n                element-click="onClickItem"\n            ></div>\n\n            <div class="grid-applicants-panel-inset" ng-if="data[0].values.length > 1 && field.currentView === \'logo-grid\'">\n                <div class="grid-applicants grid-applicants-lens">\n                    <div class="grid-item link"\n                        ng-repeat="item in (isPreview ? dataPreview[0].values : data[0].values)"\n                        ng-click="onClickLogoGridItem(k, item.label)"\n                        tooltip-title\n                        tooltip-options="{delay: 700}"\n                        tooltip-title-variable="\'Filter by \' + k + \' = \' + item.label"\n                    >\n                        <div\n                            name="item.label"\n                            lens-applicant-logo\n                            text-fallback="item.label"\n                        ></div>\n                        <img class="square-hold" ng-src="{{$root.assetLocation}}/img/square-placeholder.png" alt="placeholder"/>\n                        <b><a>{{item.value | customNumber}}</a></b>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-if="field.currentView === \'cloud\'">\n                <div\n                    lens-word-cloud\n                    data="data[0].values"\n                    height="300"\n                    render-version="chartVersion"\n                    on-click-item="onClickItem"\n                ></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getLogoUrl=__webpack_require__(41);_app2.default.directive("lensApplicantLogo",function(){return{scope:{name:"<",src:"<",textFallback:"<",useBg:"<",onClickMissing:"<",exists:"="},link:function link(scope,element,attrs){var render=function render(){var img=$("<img>");img.attr("crossorigin","anonymous");var src=scope.src||getLogoUrl(scope.name);img.on("load",function(){if(attrs.exists){scope.exists=true}element.addClass("applicant-logo");scope.$apply();if(scope.useBg){element.css("background-image","url("+src+")")}else{element.html(img)}});img.on("error",function(){if(attrs.exists){scope.exists=false}if(scope.textFallback){element.text(scope.textFallback);if(scope.onClickMissing){element.on("click",function(){scope.onClickMissing.apply(undefined,[scope.textFallback]);scope.$apply()})}}else{element.remove()}});img.attr({src:src})};render()}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _ArticleLinkouts=__webpack_require__(172);var _ArticleLinkouts2=_interopRequireDefault(_ArticleLinkouts);var _ArticleBadges=__webpack_require__(133);var _ArticleBadges2=_interopRequireDefault(_ArticleBadges);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var deps=["$state"];_app2.default.directive("lensArticleItemMeta",[].concat(deps,[function($state){return{templateUrl:"article-item-meta",scope:{item:"<",isTitle:"<"},link:function link(scope){scope.vm={badges:_ArticleBadges2.default};scope.search=function(key,value){var filterMap=_defineProperty({},key,_defineProperty({},value,true));filterMap=JSON.stringify(filterMap);$state.go("scholar.results",{q:"",filterMap:filterMap})};scope.linkout=function(_ref){var type=_ref.type,value=_ref.value;return(0,_ArticleLinkouts2.default)("publisher",type,value)}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _ArticleLinkouts=__webpack_require__(172);var _ArticleLinkouts2=_interopRequireDefault(_ArticleLinkouts);var _OpenAccessLicenses=__webpack_require__(173);var _OpenAccessLicenses2=_interopRequireDefault(_OpenAccessLicenses);var _OpenAccessColours=__webpack_require__(174);var _OpenAccessColours2=_interopRequireDefault(_OpenAccessColours);var _OpenAccessAliases=__webpack_require__(132);var _OpenAccessAliases2=_interopRequireDefault(_OpenAccessAliases);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var deps=["$state","$q","$rootScope","ScholarService"];var getLocation=function getLocation(href){var l=document.createElement("a");l.href=href;return l};_app2.default.directive("lensArticleItemPreview",[].concat(deps,[function($state,$q,$rootScope,ScholarService){return{template:__webpack_require__(489),scope:{item:"<"},link:function link(scope){scope.vm={fallbackToLinks:!$state.includes("scholar")&&!$state.includes("article"),previousSearch:ScholarService.getPreviousSearch(),OpenAccessLicenses:_OpenAccessLicenses2.default,OpenAccessColours:_OpenAccessColours2.default,OpenAccessAliases:_OpenAccessAliases2.default,oaLocationLimit:2};if(!scope.item.fromStore){scope.vm.fetchingMeta=true;$q.when(ScholarService.get(scope.item.record_lens_id)).then(function(item){scope.item.openAccessInfoFetched=true;_.assign(scope.item,item);scope.vm.fetchingMeta=false})}scope.clinicalTrialLinkout=function(_ref){var registry=_ref.registry,identifier=_ref.identifier;return(0,_ArticleLinkouts2.default)("clinicalTrial",registry,identifier)};scope.search=function(key,value){scope.searchMap(key,_defineProperty({},value,true))};scope.searchMap=function(key,map){$rootScope.setSideTabsView("st-filters");var filterMap=_defineProperty({},key,map);filterMap=JSON.stringify(filterMap);$state.go("scholar.results",{q:"",filterMap:filterMap})};scope.filterPreviousSearch=function(key,value){$rootScope.setSideTabsView("st-filters");var previousSearch=ScholarService.getPreviousSearch();var filterMap=JSON.parse(previousSearch.filterMap);if(!filterMap[key]){filterMap[key]={}}filterMap[key][value]=true;previousSearch.filterMap=JSON.stringify(filterMap);$state.go("scholar.results",previousSearch)};scope.fallbackurl=function(key,value){var filterMap=_defineProperty({},key,_defineProperty({},value,true));filterMap=window.encodeURIComponent(JSON.stringify(filterMap));return"/lens/scholar/search/results?filterMap="+filterMap};scope.removeInvalidFilterChars=function(s){try{s=s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\.,]/gi,"")}catch(e){s=s.replace(/[\.,]/gi,"")}return s};scope.openAccessLicenseLabel=function(license){var alias=_OpenAccessAliases2.default[license];if(alias&&alias.abbreviation){return alias.label+" ("+alias.abbreviation+")"}else if(alias){return alias.label}return license||"Unknown"};scope.openAccessLicenseAbbreviation=function(license){var alias=_OpenAccessAliases2.default[license];if(alias&&alias.abbreviation){return alias.abbreviation}else if(alias){return alias.label}return license}}}}]))},function(module,exports){module.exports='<div class="clearfix quick-flip article-item-preview" lens-html-tooltip>\n    <div class="result-with-sidebar">\n\n        <div ng-if="vm.fetchingMeta">Loading...</div>\n\n        <div ng-if="item.abstract" class="article-preview-abstract">\n            <h5 id="article-section-abstract">{{::\'scholar.common.abstract\' | message}}</h5>\n            <span ng-if="item.abstract" ng-bind-html="item.abstract | unsafe"></span>\n        </div>\n\n        <div class="masonry-columns masonry-columns-1-2 grid-summary clearfix-both">\n            <div class="masonry-card summary-section article-section-authors">\n                <h5 id="article-section-authors">{{::\'scholar.common.authors\' | message}}</h5>\n                <ul class="list-styled">\n                    <li ng-repeat="author in item.authors | limitTo:(item.showAllAuthorsList ? 500 : 20)">\n                        <a ng-click="$ctrl.search(\'author.display_name.keyword\', author.display_name.keyword)"\n                            ng-mouseenter="setTootip({type: \'author\', author: author}, $event)"\n                            ng-mouseleave="clearTooltip()"\n                        >\n                            {{::author.display_name}}\n                            <sup class="col-meta">{{author.affiliationIndices}}</sup>\n                        </a>\n                        \x3c!--\n                        <ol class="authors-affiliation-list">\n                            <li\n                                ng-repeat="affiliation in author.affiliations">\n                                 {{affiliation.name}}\n                            </li>\n                        </ol>\n                        --\x3e\n                    </li>\n                    <li ng-if="item.authors.length > 20 && !item.showAllAuthorsList">\n                        <a ng-click="item.showAllAuthorsList = true">\n                            Show all...\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.has_affiliations">\n                <h5 id="article-section-affiliation">{{::\'scholar.common.institutions\' | message}}</h5>\n                <ol class="list-ordered-styled">\n                    <li ng-repeat="affiliation in item.unique_affiliations">\n                        <span class="link" ng-mouseenter="setTootip({type: \'affiliation\', affiliation: affiliation}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::affiliation.name || affiliation}}\n                        </span>\n                    </li>\n                </ol>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.has_institutions">\n                <h5 id="article-section-affiliation">{{::\'scholar.common.affiliated.dossier\' | message}}</h5>\n                <ul class="list-inline clearfix">\n                    <li ng-repeat="institution in item.institutions" class="text-center institution-logo">\n                        <a class="listing-logo" ng-href="/lens/in4m/dossier/{{::institution.datasetAlias}}/{{::institution.slug}}/research-discipline">\n                            <img ng-src="{{::institution.logoUrl}}" style="max-width: 60px;" tooltip-title tooltip-title-variable="institution.name">\n                        </a>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.chemicals.length">\n                <h5 id="article-section-chemical">{{::\'scholar.common.chemicals\' | message}}</h5>\n                <ul class="inlineFloat list-inline-alt-2">\n                    <li ng-repeat="chemical in item.chemicals">\n                        <span class="link" ng-mouseenter="setTootip({type: \'chemical\', chemical: chemical}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::chemical.substance_name}}\n                        </span>\n                        <span ng-if="!$last" class="comma-seperator">,</span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.mesh_terms.length">\n                <h5 id="article-section-mesh_term">{{::\'scholar.common.mesh_terms\' | message}}</h5>\n                <ul class="inlineFloat list-inline-alt-2">\n                    <li ng-repeat="mesh_term in item.mesh_terms">\n                        <span class="link" ng-mouseenter="setTootip({type: \'mesh_term\', mesh_term: mesh_term}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::mesh_term.mesh_heading}}\n                        </span>\n                        <span ng-if="!$last" class="comma-seperator">,</span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.fundings.length">\n                <h5 id="article-section-funding">{{::\'scholar.common.funding_info\' | message}}</h5>\n                <ul class="list-styled">\n                    <li ng-repeat="funding in item.fundings">\n                        <span class="link" ng-mouseenter="setTootip({type: \'funding\', funding: funding}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::funding.org}} ({{::funding.funding_id}}) {{::funding.country}}\n                        </span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.clinical_trials.length">\n                <h5 id="article-section-clinical_trial">{{::\'scholar.common.clinical_info\' | message}}</h5>\n                <ul class="list-styled">\n                    <li ng-repeat="clinical_trial in item.clinical_trials">\n                        <span class="link" ng-mouseenter="setTootip({type: \'clinical_trial\', clinical_trial: clinical_trial}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::clinical_trial.registry}}\n                            {{::clinical_trial.identifier}}\n                        </span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.keywords.length">\n                <h5 id="article-section-keyword">{{::\'scholar.common.keywords\' | message}}</h5>\n                <ul class="list-styled">\n                    <li ng-repeat="keyword in item.keywords">\n                        <span class="link" ng-mouseenter="setTootip({type: \'keyword\', keyword: keyword}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::keyword.value}}\n                        </span>\n                    </li>\n                </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.conference.name">\n                <h5 id="article-section-keyword">{{::\'scholar.facets.conference\' | message}}</h5>\n                    <ul class="list-styled">\n                        <li ng-if="::item.conference.name">\n                            <span class="link" ng-mouseenter="setTootip({type: \'conference\', conference: item.conference}, $event)" ng-mouseleave="clearTooltip()">\n                                {{::item.conference.name}}\n                            </span>\n                        </li>\n                    </ul>\n            </div>\n\n            <div class="masonry-card summary-section" ng-if="item.has_fields_of_study">\n                <h5 id="article-section-keyword">{{::\'scholar.flag.description.field_of_study\' | message}}</h5>\n                <ul class="inlineFloat list-inline-alt-2">\n                    <li ng-repeat="field in item.fields_of_study">\n                        <span class="link" ng-mouseenter="setTootip({type: \'field\', field: field}, $event)" ng-mouseleave="clearTooltip()">\n                            {{::field.name || field}}\n                        </span>\n                        <span ng-if="!$last" class="comma-seperator">,</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        \x3c!-- Source/Provenance Attribution --\x3e\n        <div class="panel-data-source" ng-if="item.source_urls.length">\n            <h5>Links to other sources</h5>\n            <ul class="list-inline-alt list-data-source">\n                <li ng-repeat="source in item.source_urls | limitTo:(item.showAllDataSources ? 500 : 5)">\n                    <a ng-href="{{source.url}}" target="_blank">\n                        <em class="fa fa-file-pdf-o" ng-if="source.type === \'pdf\'"></em>\n                        <em class="fa fa-external-link" ng-if="source.type === \'html\'"></em>\n                        <em class="fa fa-question-circle-o" ng-if="source.type === \'unknown\'"></em>\n                        <em class="fa fa-file-text-o" ng-if="source.type === \'core_fulltext\'"></em>\n                        <em class="fa fa-file-alt" ng-if="source.type === \'doc\'"></em>\n                        <em class="fa fa-file-alt" ng-if="source.type === \'ppt\'"></em>\n                        <em class="fa fa-file-alt" ng-if="source.type === \'xls\'"></em>\n                        <em class="fa fa-file-alt" ng-if="source.type === \'ps\'"></em>\n                        <em class="fa fa-minus-square-o" ng-if="source.type === null"></em>\n\n                        {{source.url | urlHost}}\n                    </a>\n                </li>\n                <li ng-if="item.source_urls.length > 5 && !item.showAllDataSources">\n                    <a ng-click="item.showAllDataSources = true">\n                        Show all...\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="item.fulltext">\n            <hr>\n            <h5>Full Text</h5>\n            <p>\n                Full text is available for this article. Please note this is currently only visible for dev purposes.\n                <a class="styled-link" ng-click="vm.showFullText = !vm.showFullText">{{vm.showFullText ? \'Hide\' : \'Show\'}} Full Text...</a>\n            </p>\n            <pre ng-if="vm.showFullText">{{item.fulltext}}</pre>\n        </div>\n    </div>\n\n    <div class="result-sidebar">\n\n        <div>\n            <div class="linkouts-panel">\n                <div class="linkouts-panel-heading isoff" ng-show="!item.open_access">\n                    <em class="fa fa-lock"></em>\n                    {{::\'scholar.common.open.access.not\' | message}}\n                </div>\n                <div class="linkouts-panel-heading ison {{item.open_access.summary.colour}}" tooltip-title="{{vm.OpenAccessColours[item.open_access.summary.colour]}} - Source: www.unpaywall.org" ng-if="item.open_access">\n                    <div ng-include="\'open-access-icon\'" include-replace></div>\n                    {{::\'scholar.common.open.access\' | message}}\n                    <em class="fa fa-info-circle"></em>\n                </div>\n                <div class="linkouts-panel-body" ng-if="item.open_access">\n                    <ul class="list-unstyled list-bordered">\n                        <li>\n                            <div class="linkouts-panel-oa-details">\n                                <div>\n                                    <strong>License:</strong>\n                                    <span tooltip-title="{{vm.OpenAccessLicenses[item.open_access.summary.license] || item.open_access.summary.license}}">\n                                        {{openAccessLicenseLabel(item.open_access.summary.license)}}\n                                    </span>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="linkouts-row" ng-if="vm.fetchingMeta">\n                            Loading...\n                        </li>\n                        <li class="linkouts-row" ng-repeat="location in item.open_access.records[0].oa_locations | limitTo: vm.oaLocationLimit" ng-class="{best_oa_location: location.is_best}">\n\n                            <div class="linkouts-website-container">\n                                <a class="linkouts-website" ng-href="{{location.url_for_landing_page || location.url_for_pdf}}" target="_blank">\n                                    \x3c!-- <img class="linkouts-website-img" ng-if="meta.icon" ng-src="{{$root.assetLocation}}/img/{{meta.icon}}"> --\x3e\n                                    <em ng-if="!meta.icon" class="fa fa-external-link"></em>\n                                    <span ng-if="!location.institution">\n                                        {{location.host_type === \'publisher\' ? \'Publisher Website\' : \'Repository Website\'}}\n                                    </span>\n                                    <span ng-if="location.institution" title="{{location.institution + \' (\' + location.repository + \')\'}}">\n                                        {{location.institution}}\n                                        <span ng-if="location.institution !== location.repository">({{location.repository}})</span>\n                                    </span>\n                                </a>\n                            </div>\n                            <div class="linkouts-fulltext" ng-if="location.url_for_pdf">\n                                <a ng-href="{{location.url_for_pdf}}" target="_blank">\n                                    <em class="fa fa-file-pdf-o"></em>\n                                    <em>{{::\'scholar.common.view.fulltext\' | message}}</em>\n                                </a>\n                            </div>\n                            <em ng-if="location.license" class="fa fa-eye"></em>\n                            <span tooltip-title="{{vm.OpenAccessLicenses[location.license] || location.license}}">\n                                {{openAccessLicenseAbbreviation(location.license)}}\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n                <div class="linkouts-more-rows" ng-if="item.open_access.records[0].oa_locations.length > vm.oaLocationLimit"\n                    ng-click="vm.oaLocationLimit = item.open_access.records[0].oa_locations.length"\n\n                >\n                    <span>Show {{item.open_access.records[0].oa_locations.length - vm.oaLocationLimit}} more...</span>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="pub-info">\n            <ul class="list-unstyled list-bordered">\n                <li ng-if="item.journal">\n                    <strong>In:</strong> {{::item.journal.title}},\n                    <span ng-if="item.issue">{{::\'scholar.common.issue\' | message}}: {{::item.issue}}, </span>\n                    <span ng-if="item.volume">{{::\'scholar.common.volume\' | message}}: {{::item.volume}}, </span>\n                    <span ng-if="item.pages">{{::\'scholar.common.page\' | message}}: {{::item.pages}}</span>\n                    <div ng-if="item.open_access && item.publication_type === \'journal article\'">\n                        <strong>Journal is Open Access:</strong>\n                        {{item.open_access.summary.journal_is_oa}}\n                    </div>\n                </li>\n                <li ng-if="item.year_published">\n                    <strong>{{::\'scholar.common.published\' | message}}:</strong>\n                    <span ng-if="!item.date_published">{{::item.year_published}}</span>\n                    <span ng-if="item.date_published">{{::item.date_published | date}}<br></span>\n                    <span ng-if="item.date_published_print">\n                        <strong>{{::\'scholar.common.published.print\' | message}}:</strong>\n                        {{::item.date_published_print | date}}<br>\n                    </span>\n                    <span ng-if="item.date_published_electronic">\n                        <strong>{{::\'scholar.common.published.electronic\' | message}}:</strong>\n                        {{::item.date_published_electronic | date}}\n                    </span>\n\n                </li>\n                <li ng-if="item.journal.type && !item.publication_type.length">\n                    <strong>{{::\'scholar.common.publication_type\' | message}}:</strong>\n                    {{::item.journal.type}}\n                </li>\n                <li ng-if="item.publication_type">\n                    <strong>{{::\'scholar.common.publication_info\' | message}}:</strong>\n                    <span class="publisher-info">{{::item.publication_type}}</span>\n                </li>\n                <li ng-if="item.publication_supplementary_type.length">\n                    <strong>{{::\'scholar.common.publication_info\' | message}}:</strong>\n                    <span class="publisher-info">{{::item.publication_supplementary_type.join(\', \')}}</span>\n                </li>\n                <li ng-if="item.journal.publisher">\n                    <strong>{{::\'scholar.common.publisher\' | message}}:</strong> {{::item.journal.publisher}}\n                </li>\n            </ul>\n        </div>\n\n\n        <div class="panel panel-default panel-citation-counts">\n            <div class="panel-heading">\n                <b>\n                    {{::\'common.citation.counts\' | message}}\n                </b>\n            </div>\n            <div class="panel-body">\n                <ul class="list-unstyled list-bordered list-paired">\n                    <li class="no-t-pad">\n                        <a ui-sref="article.citations.patents.list({id: item.record_lens_id})">\n                            {{::\'scholar.sort.patent.citations\' | message}}\n                            <span class="pull-right is-patent">\n                                {{item.referenced_by_patent_count | customNumber}}\n                            </span>\n                        </a>\n                    </li>\n                    <li ng-if="item.forwardCitationCount">\n                        <a ui-sref="article.citations.citing({id: item.record_lens_id})">\n                            {{::\'scholar.sort.scholarly.citations\' | message}}\n                            <span class="pull-right is-scholar">\n                                {{::item.forwardCitationCount | customNumber}}\n                            </span>\n                        </a>\n                    </li>\n                    <li ng-if="item.referenced_by_count && !item.forwardCitationCount">\n                        <a ui-sref="article.citations.citing({id: item.record_lens_id})">\n                            {{::\'scholar.sort.scholarly.citations\' | message}}\n                            <span class="pull-right is-scholar">\n                                {{::item.referenced_by_count | customNumber}}\n                            </span>\n                        </a>\n                    </li>\n                    <li class="no-b-pad">\n                        <a ui-sref="article.citations.articles({id: item.record_lens_id})">\n                            {{::\'scholar.field.reference_count.cited\' | message}}\n                            <span class="pull-right is-scholar">\n                               {{item.reference_count}}\n                            </span>\n                        </a>\n                    </li>\n\n\n                </ul>\n            </div>\n        </div>\n\n\n        <div hidden ng-if="item.recommended_works.length">\n            <h3>{{::\'scholar.common.recommended\' | message}}</h3>\n            <div ng-repeat="article in item.recommended_works | orderBy:\'score\':true | limitTo:10">\n                <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/icon-mag.png" style="max-width: 16px;">\n                <a ui-sref="article.main({id: article.id || article.id_value})">\n                    {{article.id || article.id_value}}\n                </a>\n                \x3c!-- <small>({{article.score}})</small> --\x3e\n            </div>\n            <div>\n                <a ui-sref="article.recommended({id: item.record_lens_id})">\n                    {{::\'common.view.more\' | message}}\n                </a>\n            </div>\n        </div>\n\n    </div>\n\n\n    <div class="tooltip-logo"\n        ng-if="vm.tooltip"\n        ng-style="vm.tooltipPosition"\n        ng-mouseenter="keepTooltipOpen()"\n        ng-mouseleave="clearTooltip()"\n    >\n        <div ng-if="vm.tooltip.type === \'author\'">\n            <p><strong>{{::\'scholar.common.explore_more_articles\' | message}}</strong></p>\n            <ul class="list-styled">\n                <li ng-if="vm.previousSearch">\n                    <a ng-click="filterPreviousSearch(\'author.display_name.keyword\', removeInvalidFilterChars(vm.tooltip.author.display_name))">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.author\' | message}}:\n                        {{::vm.tooltip.author.display_name}}\n                    </a>\n                </li>\n                <li ng-if="vm.fallbackToLinks">\n                    <a ng-href="{{::fallbackurl(\'author.display_name.keyword\', removeInvalidFilterChars(vm.tooltip.author.display_name))}}">\n                        {{::\'tooltip.new.search.by\' | message}}\n                        {{::\'scholar.common.author\' | message}}:\n                        {{::vm.tooltip.author.display_name}}\n                    </a>\n                </li>\n                <li ng-if="!vm.fallbackToLinks">\n                    <a ng-click="search(\'author.display_name.keyword\', removeInvalidFilterChars(vm.tooltip.author.display_name), $event)">\n                        {{::\'tooltip.new.search.by\' | message}}\n                        {{::\'scholar.common.author\' | message}}:\n                        {{::vm.tooltip.author.display_name}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'affiliations\'">\n            <p><strong>{{::\'scholar.common.affiliation\' | message}}</strong></p>\n            <div ng-repeat="affiliation in vm.tooltip.affiliations">\n                {{::affiliation.name || affiliation}}\n            </div>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'affiliation\'">\n            <p><strong>{{::\'scholar.common.affiliation.details\' | message}}</strong></p>\n            <div class="pre-mock" ng-if="vm.tooltip.affiliation.grid">\n                <div>GRID:\n                    <a ng-href="https://grid.ac/institutes/{{vm.tooltip.affiliation.grid.id}}">{{vm.tooltip.affiliation.grid.id}}</a>\n                </div>\n                <div>Type: {{vm.tooltip.affiliation.grid.types.join(\', \')}}</div>\n                \x3c!-- Address: {{vm.tooltip.affiliation.grid.addresses[0] | formatGridAddress}} --\x3e\n            </div>\n            <ul class="list-styled ">\n                <li ng-if="vm.previousSearch && (vm.tooltip.affiliation)">\n                    <a ng-click="filterPreviousSearch(\'author.affiliation.name.keyword\', vm.tooltip.affiliation.name)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.affiliation\' | message}}:\n                        {{::vm.tooltip.affiliation.name | truncate:50}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.affiliation">\n                    <a ng-if="vm.fallbackToLinks" ng-href="{{::fallbackurl(\'author.affiliation.name.keyword\', vm.tooltip.affiliation.name)}}">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.affiliation\' | message}}:\n                        {{::vm.tooltip.affiliation.name | truncate:50}}\n                    </a>\n                    <a ng-if="!vm.fallbackToLinks" ng-click="search(\'author.affiliation.name.keyword\', vm.tooltip.affiliation.name)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.affiliation\' | message}}:\n                        {{::vm.tooltip.affiliation.name | truncate:50}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.affiliation.grid.wikipedia_url">\n                    <a ng-href="{{vm.tooltip.affiliation.grid.wikipedia_url}}">\n                        \x3c!-- <em class="fa fa-wikipedia"></em> --\x3e\n                        Wikipedia\n                    </a>\n                </li>\n                <li ng-repeat="link in vm.tooltip.affiliation.grid.links">\n                    <a ng-href="{{link}}">\n                        {{::link}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'funding\'">\n            <p><strong>{{::\'scholar.common.funding.details\' | message}}</strong></p>\n            <ul class="list-styled tooltip-list-link">\n                <li ng-if="vm.previousSearch && (vm.tooltip.funding.org)">\n                    <a ng-click="filterPreviousSearch(\'funding.organisation.keyword\', vm.tooltip.funding.org)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.funding\' | message}}:\n                        {{::vm.tooltip.funding.org}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.funding.org">\n                    <a ng-if="vm.fallbackToLinks" ng-href="{{::fallbackurl(\'funding.organisation.keyword\', vm.tooltip.funding.org)}}">\n                        {{::\'tooltip.new.search\' | message}}  {\'scholar.common.funding\' | message}}:\n                        {{::vm.tooltip.funding.org}}\n                    </a>\n                    <a ng-if="!vm.fallbackToLinks" ng-click="search(\'funding.organisation.keyword\', vm.tooltip.funding.org)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.funding\' | message}}:\n                        {{::vm.tooltip.funding.org}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'conference\'">\n            <p><strong>{{::\'scholar.common.conference.details\' | message}}</strong></p>\n            <div class="pre-mock" ng-if="item.conference.abbreviation || item.conference.instance">\n                <div ng-if="::item.conference.name">{{::item.conference.name}}</div>\n                <div ng-if="::item.conference.abbreviation">{{::item.conference.abbreviation}}</div>\n                <span ng-if="::item.conference.date || item.conference.instance.start_date">{{::item.conference.date || item.conference.instance.start_date | date}}</span>\n                <span ng-if="::item.conference.year && !item.conference.date">{{::item.conference.year}}</span>\n                <div ng-if="::item.conference.location">{{::item.conference.location}}</div>\n            </div>\n\n            <ul class="list-styled tooltip-list-link">\n                <li ng-if="::item.conference.instance.official_url">\n                    <a ng-href="{{::item.conference.instance.official_url}}" target="_blank">\n                        {{::\'common.go.website\' | message}}\n                    </a>\n                </li>\n                <li ng-if="vm.previousSearch && (vm.tooltip.conference.name)">\n                    <a ng-click="filterPreviousSearch(\'conference.name\', vm.tooltip.conference.name)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.facets.conference\' | message}}:\n                        {{::vm.tooltip.conference.name}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.conference.name">\n                    <a ng-if="vm.fallbackToLinks" ng-href="{{::fallbackurl(\'conference.name\', vm.tooltip.conference.name)}}">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.facets.conference\' | message}}:\n                        {{::vm.tooltip.conference.name}}\n                    </a>\n                    <a ng-if="!vm.fallbackToLinks" ng-click="search(\'conference.name\', vm.tooltip.conference.name)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.facets.conference\' | message}}:\n                        {{::vm.tooltip.conference.name}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'mesh_term\'">\n            <p><strong>{{::\'scholar.common.mesh_term.details\' | message}}</strong></p>\n            <div class="pre-mock">\n                <div ng-if="vm.tooltip.mesh_term.major_topic">\n                    {{::\'scholar.common.mesh.det.topic\' | message}}:\n                    {{::vm.tooltip.mesh_term.major_topic}}\n                </div>\n                <div ng-if="vm.tooltip.mesh_term.mesh_heading">\n                    {{::\'scholar.common.mesh.det.heading\' | message}}:\n                    {{::vm.tooltip.mesh_term.mesh_heading}}\n                </div>\n                <div ng-if="vm.tooltip.mesh_term.mesh_ui">\n                    {{::\'scholar.common.mesh.det.ui\' | message}}:\n                    {{::vm.tooltip.mesh_term.mesh_ui}}\n                </div>\n                <div ng-if="vm.tooltip.mesh_term.qualifier_name">\n                    {{::\'scholar.common.mesh.det.qualifier.name\' | message}}:\n                    {{::vm.tooltip.mesh_term.qualifier_name}}\n                </div>\n                <div ng-if="vm.tooltip.mesh_term.qualifier_ui">\n                    {{::\'scholar.common.mesh.det.qualifier.ui\' | message}}:\n                    {{::vm.tooltip.mesh_term.qualifier_ui}}\n                </div>\n            </div>\n\n\n            <ul class="list-styled tooltip-list-link">\n                <li ng-if="vm.previousSearch && (vm.tooltip.mesh_term.mesh_heading)">\n                    <a ng-click="filterPreviousSearch(\'mesh_term.mesh_heading\', vm.tooltip.mesh_term.mesh_heading)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.mesh_terms\' | message}}:\n                        {{::vm.tooltip.mesh_term.mesh_heading}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.mesh_term.mesh_heading">\n                    <a ng-if="vm.fallbackToLinks" ng-href="{{::fallbackurl(\'mesh_term.mesh_heading\', vm.tooltip.mesh_term.mesh_heading)}}">\n                         {{::\'tooltip.new.search\' | message}}\n                         {{::\'scholar.common.mesh_terms\' | message}}:\n                         {{::vm.tooltip.mesh_term.mesh_heading}}\n                    </a>\n                    <a ng-if="!vm.fallbackToLinks" ng-click="search(\'mesh_term.mesh_heading\', vm.tooltip.mesh_term.mesh_heading)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.mesh_terms\' | message}}:\n                        {{::vm.tooltip.mesh_term.mesh_heading}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n\n        <div ng-if="vm.tooltip.type === \'chemical\'">\n            <p><strong>{{::\'scholar.common.chemical.details\' | message}}</strong></p>\n            <div class="pre-mock">\n                <div ng-if="vm.tooltip.chemical.mesh_ui">\n                    {{::\'scholar.common.mesh.det.ui\' | message}}:\n                    {{::vm.tooltip.chemical.mesh_ui}}\n                </div>\n                <div ng-if="vm.tooltip.chemical.registry_number">\n                    {{::\'scholar.common.mesh.det.qualifier.name\' | message}}:\n                    {{::vm.tooltip.chemical.registry_number}}\n                </div>\n            </div>\n\n            <ul class="list-styled tooltip-list-link">\n                <li ng-if="vm.previousSearch && vm.tooltip.chemical.substance_name">\n                    <a ng-click="filterPreviousSearch(\'chemical.substance_name\', vm.tooltip.chemical.substance_name)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.chemical\' | message}}:\n                        {{::vm.tooltip.chemical.substance_name}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.chemical.substance_name">\n                    <a ng-click="search(\'chemical.substance_name\', vm.tooltip.chemical.substance_name)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.chemical\' | message}}:\n                        {{::vm.tooltip.chemical.substance_name}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'field\'">\n            <p><strong>{{::\'scholar.common.fos\' | message}}</strong></p>\n            <ul class="list-styled tooltip-list-link">\n                <li ng-if="vm.previousSearch && vm.tooltip.field">\n                    <a ng-click="filterPreviousSearch(\'field_of_study\', vm.tooltip.field.name || vm.tooltip.field)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.fos\' | message}}:\n                        {{::vm.tooltip.field.name || vm.tooltip.field}}\n                    </a>\n                </li>\n                <li>\n                    <a ng-click="search(\'field_of_study\', vm.tooltip.field.name || vm.tooltip.field)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.fos\' | message}}:\n                        {{::vm.tooltip.field.name || vm.tooltip.field}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'clinical_trial\'">\n            <p><strong>{{::\'scholar.common.clinical.trial.details\' | message}}</strong></p>\n            <ul class="list-styled tooltip-list-link">\n                <li>\n                    <a ng-href="{{::clinicalTrialLinkout(vm.tooltip.clinical_trial)}}" target="_blank">\n                        {{::\'scholar.common.clinical.trial.view\' | message}}\n                    </a>\n                </li>\n                <li ng-if="vm.previousSearch && (vm.tooltip.clinical_trial.identifier)">\n                    <a ng-click="filterPreviousSearch(\'clinical_trial.trial_id\', vm.tooltip.clinical_trial.identifier)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        {{::\'scholar.common.clinical.trial\' | message}}:\n                        {{::vm.tooltip.clinical_trial.identifier}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.clinical_trial.identifier">\n                    <a ng-if="vm.fallbackToLinks" ng-href="{{::fallbackurl(\'clinical_trial.trial_id\', vm.tooltip.clinical_trial.identifier)}}">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.clinical.trial\' | message}}:\n                        {{::vm.tooltip.clinical_trial.identifier}}\n                    </a>\n                    <a ng-if="!vm.fallbackToLinks" ng-click="search(\'clinical_trial.trial_id\', vm.tooltip.clinical_trial.identifier)">\n                        {{::\'tooltip.new.search\' | message}}\n                        {{::\'scholar.common.clinical.trial\' | message}}:\n                        {{::vm.tooltip.clinical_trial.identifier}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <div ng-if="vm.tooltip.type === \'keyword\'">\n            <p><strong>{{::\'scholar.common.keywords\' | message}}</strong></p>\n            <ul class="list-styled">\n                <li ng-if="vm.previousSearch && vm.tooltip.keyword.value">\n                    <a ng-click="filterPreviousSearch(\'keyword\', vm.tooltip.keyword.value)">\n                        {{::\'tooltip.filter.by\' | message}}\n                        Keyword:\n                        {{::vm.tooltip.keyword.value}}\n                    </a>\n                </li>\n                <li ng-if="vm.tooltip.keyword.value">\n                    <a ng-click="search(\'keyword\', vm.tooltip.keyword.value)">\n                        {{::\'tooltip.new.search\' | message}}\n                        Keyword:\n                        {{::vm.tooltip.keyword.value}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n    </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _luceneQueryParser=__webpack_require__(134);var _luceneQueryParser2=_interopRequireDefault(_luceneQueryParser);var _extractFields=__webpack_require__(491);var _urlQueryHelpers=__webpack_require__(18);var _fuse=__webpack_require__(135);var _fuse2=_interopRequireDefault(_fuse);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Fields=__webpack_require__(60);var PatentFields=Fields.filter(function(d){return d.type==="PATENT"&&!d.excludedSearch});var ArticleFields=Fields.filter(function(d){return d.type==="SCHOLAR"&&!d.excludedSearch});var FUSE_OPTS={shouldSort:true,tokenize:true,matchAllTokens:true,findAllMatches:true,location:0,distance:100,maxPatternLength:32,keys:["key"]};var deps=["$q","$http","ScholarService"];_app2.default.directive("lensBooleanEditor",[].concat(deps,[function($q,$http,ScholarService){return{template:__webpack_require__(492),scope:{type:"<"},link:function link(scope){var vm=scope.vm={q:(0,_urlQueryHelpers.getParam)("q")||"",type:scope.type||(0,_urlQueryHelpers.getParam)("type")||"PATENT",result:null,showAllFields:false,fields:{PATENT:PatentFields,SCHOLAR:ArticleFields},suggestions:[],multiFields:{PATENT:{"Title, Claims, Abstract":function TitleClaimsAbstract(s){return"title:("+s+")\nOR claims:("+s+")\nOR abstract:("+s+")"}},SCHOLAR:{"Author Search":function AuthorSearch(s){return'author.display_name: "'+s+'"~2'}}},filter:{label:""},predicates:["AND","OR","NOT"]};scope.$watch("type",function(v){vm.type=v});scope.checkSearchQuery=function(){vm.result=null;vm.invalidFields=null;vm.errorMessage=null;vm.dirty=false;vm.hasOtherInvalidFields=false;try{vm.errorMessage=null;vm.errorPosition=null;vm.result=_luceneQueryParser2.default.parse(vm.q);var fields=(0,_extractFields.extractFields)(vm.result);var allFields=vm.fields[vm.type].map(function(d){return d.key});vm.invalidFields=_.uniq(fields.filter(function(field){return!_.includes(allFields,field)}));if(vm.invalidFields.length){var otherFields=vm.fields[vm.type==="SCHOLAR"?"PATENT":"SCHOLAR"].map(function(d){return d.key});console.log(_.uniq(fields.filter(function(field){return _.includes(otherFields,field)})));vm.hasOtherInvalidFields=_.uniq(fields.filter(function(field){return _.includes(otherFields,field)})).length>0;throw new Error("Unrecognised Fields: "+vm.invalidFields.join(", "))}}catch(err){vm.result=null;vm.errorMessage=err;if(err.location){vm.errorPosition=err.location}if(err.column){vm.errorPosition=err.column();console.log(vm.errorPosition)}}};scope.selectError=function(){$("#boolean-editor-textarea").focus();console.log("setSelectionRange",[vm.errorPosition.start.offset,vm.errorPosition.end.offset])};var debouncedCheckSearchQuery=_.debounce(function(){},500);scope.keyup=function(e){vm.dirty=true;if(e.ctrlKey&&e.keyCode===32){if(vm.suggestions&&vm.suggestions.length){var _vm$suggestions$=vm.suggestions[0],key=_vm$suggestions$.key,example=_vm$suggestions$.example;scope.termCompletion(key,example)}}else if(e.ctrlKey&&e.keyCode===13){setTimeout(function(){scope.checkSearchQuery();scope.$apply()},500)}else{debouncedCheckSearchQuery()}};scope.change=function(e){vm.dirty=true;var index=$("#boolean-editor-textarea").prop("selectionStart");var lastToken=vm.q.slice(0,index).split(/[\s]+/g).pop();vm.predicates.forEach(function(predicate){if(lastToken===predicate.toLowerCase()){vm.q=vm.q.trim().slice(0,-1*predicate.length)+predicate}});var token=lastToken.toUpperCase().trim();if(token==="AND"||token==="OR"||token==="NOT"){vm.suggestions=[]}else{vm.suggestions=new _fuse2.default(vm.fields[vm.type],FUSE_OPTS).search(lastToken)}};scope.termCompletion=function(field){var example=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";vm.dirty=true;var index=$("#boolean-editor-textarea").prop("selectionStart");var terms=vm.q.slice(0,index).split(/[\s]+/g);var remainder=vm.q.slice(index);terms.pop();terms.push(field+": "+example+" ");vm.q=terms.join(" ")+remainder;scope.format();debouncedCheckSearchQuery();setTimeout(function(){$("#boolean-editor-textarea").focus()},10)};scope.format=function(){vm.q=vm.q.replace(/(AND|OR|NOT)/g,function($0){return"\n"+$0})};scope.appendPredicate=function(s){vm.q=vm.q+"\n"+s+" ";debouncedCheckSearchQuery();setTimeout(function(){$("#boolean-editor-textarea").focus()},10)};scope.appendMultiField=function(k){var lastToken=vm.q.split(/[\s]+/g).pop();var s=vm.multiFields[vm.type][k](lastToken);scope.appendPredicate(s);debouncedCheckSearchQuery()};scope.searchLink=function(){var q=encodeURIComponent(vm.q.replace(/\n/g," "));if(vm.type==="SCHOLAR"){return"/lens/scholar/search/results?q="+q}else{return"/lens/search?q="+q}};scope.previewSearch=function(){var query={query_string:{query:vm.q,fields:["title","abstract","fulltext","default"],default_operator:"and"}};var aggs={"Works Cited by Patents":{filter:{term:{is_referenced_by_patent:true}}},"Works Cited by Scholarly":{filter:{range:{referenced_by_count:{gte:1}}}},"Citing Patents":{cardinality:{field:"referenced_by_patent.lens_id_num"}},"Citing Scholarly Works":{cardinality:{field:"referenced_by"}},dates:{date_histogram:{field:"date_published",interval:"year",min_doc_count:1,format:"yyyy"}}};var request={scholarly_search:{size:0,query:query,aggs:aggs}};vm.loading=true;$q.when(ScholarService.search(request)).then(function(d){var _ScholarService$build=ScholarService.buildAggCharts(d.aggregations),aggs=_ScholarService$build.aggs,metrics=_ScholarService$build.metrics,chartData=_ScholarService$build.chartData;vm.totalHits=d.hits.total;vm.metrics=metrics;vm.loading=false;vm.hits=d.hits;vm.dates=d.aggregations.dates.buckets}).catch(function(err){console.warn(err);vm.loading=false});ScholarService.search(request)};scope.toggleType=function(){vm.type=vm.type==="SCHOLAR"?"PATENT":"SCHOLAR";scope.checkSearchQuery()};scope.clearTerm=function(){vm.q="";scope.checkSearchQuery()};$.vent.on("addClause",function(key){var field=vm.fields[vm.type].filter(function(d){return d.key===key}).pop();scope.termCompletion(key,field.example)});scope.format();if(vm.q){scope.checkSearchQuery()}}}}]))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extractFields=exports.extractFields=function extractFields(result){var fields=[];if(result.right&&result.right.right){fields=fields.concat(extractFields(result.right))}if(result.left&&result.left.field&&result.left.field!=="<implicit>"){fields.push(result.left.field)}if(result.right&&result.right.field&&result.right.field!=="<implicit>"){fields.push(result.right.field)}if(result&&result.field&&result.field!=="<implicit>"){fields.push(result.field)}return fields};exports.default=extractFields},function(module,exports){module.exports='<div class="boolean-editor">\n    <div class="boolean-editor-head clearfix">\n        <form hidden class="pull-right">\n            <label class="radio" style="display: inline-block;">\n                <input type="radio" name="dataset" ng-model="vm.type" value="PATENT" ng-change="checkSearchQuery()">\n                <i></i>\n                {{::\'common.patents\' | message}}\n                &nbsp;&nbsp;\n            </label>\n            <label class="radio" style="display: inline-block;">\n                <input type="radio" name="dataset" ng-model="vm.type" value="SCHOLAR" ng-change="checkSearchQuery()">\n                <i></i>\n                {{::\'common.scholar\' | message}}\n            </label>\n        </form>\n        <h1 hidden>\n            Boolean Editor\n            <small>({{vm.type}})</small>\n        </h1>\n    </div>\n\n    <div class="query-details-container clearfix">\n\n        <div class="query-details">\n            <div class="query-details-query">\n                <strong>{{vm.type | titleCase}} Query</strong>\n                <strong class="query-details-equals">=</strong>\n                <span ng-if="!vm.result">\n                    {{vm.q && !vm.dirty ? \'Invalid Query\' : \'All Documents\'}}\n                </span>\n                <span lens-query\n                    result="vm.result"\n                    ng-show="vm.result"\n                >\n                    <div class="query-details-syntax-highlight" ng-if="vm.result && !vm.dirty"></div>\n                </span>\n            </div>\n\n            <div class="query-details-filters">\n                <strong>Query Status: </strong>\n                <span class="query-details-filter-label">\n                    <span ng-if="vm.dirty && !vm.errorMessage">\n                        <em class="fa fa-info-circle col-sec"></em>\n                        <span class="col-meta">Changes detected. Automatic validation has been temporarily disabled</span>\n                    </span>\n\n                    <span ng-if="vm.result && !vm.dirty">\n                        <em class="fa fa-check-circle col-ter"></em>\n                        <span class="col-meta">Query Valid</span>\n                    </span>\n\n                    <span hidden class="col-sec" ng-if="vm.invalidFields.length && !vm.dirty">\n                        <em class="fa fa-warning"></em>\n                        Unrecognised fields:\n                        {{vm.invalidFields.join(\', \')}}.\n                    </span>\n\n                    <span ng-if="vm.errorMessage">\n                        <span class="col-error">\n                            <em class="fa fa-warning"></em>\n                            {{vm.errorMessage}}\n                        </span>\n\n                        \x3c!-- <strong ng-if="vm.hasOtherInvalidFields" class="link" ng-click="toggleType()"> --\x3e\n                        <span ng-if="vm.hasOtherInvalidFields">\n                            This appears to be a valid {{vm.type === \'SCHOLAR\' ? \'Patent\' : \'Scholar\'}} Query.\n                            Try changing query type.\n                        </span>\n\n                    </span>\n                </span>\n            </div>\n        </div>\n    </div>\n\n    <div class="boolean-editor-body">\n\n            <form ng-submit="checkSearchQuery()">\n                <label class="textarea textarea-resizable boolean-editor-textarea-wrap" style="position: relative;">\n                    <div class="boolean-editor-field-suggestions">\n                        <div ng-repeat="field in vm.suggestions.slice(0, 5)"\n                            ng-click="termCompletion(field.key, field.example)"\n                            ng-if="field.example"\n                            ng-show="!vm.showAllFields"\n                            class="boolean-editor-field-suggest"\n                        >\n                            {{::field.label}}\n                        </div>\n                    </div>\n\n                    <div class="error-position" ng-if="vm.errorPosition.start.column">\n                        Line: {{vm.errorPosition.start.line}},\n                        Column: {{vm.errorPosition.start.column}},\n                        <span ng-if="vm.q.slice(vm.errorPosition.start.offset, vm.errorPosition.end.offset)">\n                            near <em>{{vm.q.slice(vm.errorPosition.start.offset, vm.errorPosition.end.offset)}}</em>\n                        </span>\n                        <span class="styled-link" ng-click="selectError()" hidden>Highlight Error</span>\n                    </div>\n\n                    <textarea ng-model="vm.q"\n                        class="full"\n                        ng-class="{danger: vm.errorMessage}"\n                        ng-keyup="keyup($event)"\n                        ng-change="change($event)"\n                        id="boolean-editor-textarea"\n                        placeholder="Start typing your boolean query in here. Fields will be suggested below."\n                        autocomplete="off"\n                        spellcheck="false"\n                    ></textarea>\n\n                    <em class="fa fa-minus-circle col-error link boolean-clear"\n                        tooltip-title="Clear query"\n                        ng-click="clearTerm()"\n                    ></em>\n\n                    <div class="boolean-operators">\n                        <div class="predicates btn-group btn-group-xs">\n                            <strong class="predicate btn link" ng-repeat="predicate in vm.predicates" ng-click="appendPredicate(predicate)">\n                                {{predicate}}\n                            </strong>\n                        </div>\n                    </div>\n                </label>\n\n                <small class="link pull-right"\n                    tooltip-title\n                    tooltip-options="{trigger: \'click\'}"\n                    tooltip-content-selector="#boolean-editor-keyboard-shortcuts"\n                >\n                    <em class="fa fa-info-circle col-sec"></em>\n                    Keyboard Shortcuts\n                </small>\n\n                <div style="padding-top: .5em;">\n                    <a class="btn boolean-editor-submit-button"\n                        ng-class="{\'btn-ter\': !vm.dirty && vm.result, \'btn-danger\': !vm.dirty && vm.errorMessage, \'btn-sec\': vm.dirty && !vm.errorMessage}"\n                        ng-click="checkSearchQuery()"\n                        ng-if="vm.dirty"\n                    >\n                        {{!vm.dirty && vm.result ? \'Submit Search\' : \'Validate Query\'}}\n                    </a>\n\n                    <a ng-href="{{searchLink()}}"\n                        class="btn boolean-editor-submit-button btn-pri"\n                        ng-click="vm.submitting = true"\n                        ng-class="{submitting: vm.submitting}"\n                        ng-if="vm.result && !vm.dirty"\n                    >\n                        <strong>{{vm.submitting ? \'Submitting...\' : \'Submit Search\'}}</strong>\n                    </a>\n\n                    <a ng-href="{{searchLink()}}"\n                        class="btn boolean-editor-submit-button"\n                        ng-click="vm.submitting = true"\n                        ng-class="{submitting: vm.submitting}"\n                        ng-if="vm.q && !vm.result && !vm.dirty"\n                    >\n                        <strong>{{vm.submitting ? \'Submitting...\' : \'Submit Search Anyway\'}}</strong>\n                    </a>\n                </div>\n            </form>\n\n    </div>\n\n    <div hidden>\n        <div id="boolean-editor-keyboard-shortcuts">\n            <p>Keyboard shortcuts:</p>\n            <ul>\n                <li>Ctrl + Space: autocomplete top suggested field</li>\n                <li>Ctrl + Enter: Validate query</li>\n                <li>Ctrl + Enter: Submit validated query</li>\n            </ul>\n        </div>\n    </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$state","BreadcrumbService"];_app2.default.directive("lensRouterBreadcrumbs",[].concat(deps,[function($state,service){return{template:__webpack_require__(246),replace:true,controller:["$scope",function(scope){var render=function render(previousSearch){scope.previousSearch=previousSearch};service.on("searched",render);service.on("fetched",function(article){scope.article=article})}]}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensCarousel",[function(){return{link:function link(scope,element,attrs){element.hide();setTimeout(function(){var owl=$(element);owl.owlCarousel({items:attrs.items?parseInt(attrs.items):4,navigation:false,navigationText:["<em class='fa fa-angle-left'>","<em class='fa fa-angle-right'>"],pagination:false,paginationNumbers:false,singleItem:false,scrollPerPage:false,slideSpeed:1e3,autoHeight:true,lazyLoad:true,autoPlay:1e4,transitionStyle:false});$(".owl-next").click(function(e){return owl.trigger("owl.next")});$(".owl-prev").click(function(e){return owl.trigger("owl.prev")});$(".owl-play").click(function(e){return owl.trigger("owl.play",1e3)});$(".owl-stop").click(function(e){return owl.trigger("owl.stop")});setTimeout(function(){element.show();scope.$digest()},1e3)},1e3)}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _getArticleId=__webpack_require__(142);var _getArticleId2=_interopRequireDefault(_getArticleId);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ArticleLinkouts=__webpack_require__(172);var deps=["$state"];_app2.default.directive("lensCitationItem",[].concat(deps,[function($state){return{template:__webpack_require__(496),scope:{article:"<"},link:function link(scope){scope.vm={fallbackToLinks:!$state.includes("scholar")&&!$state.includes("article")};scope.filterLink=function(article){if(!article){return"/"}return'/lens/search?q=npl_lens_id:"'+article.record_lens_id_num+'"'};scope.scholarFilterLink=function(article){var filterMap={"reference.id":_defineProperty({},article.record_lens_id_num,true)};return"/lens/scholar/search/results?filterMap="+encodeURIComponent(JSON.stringify(filterMap))};scope.getLinkout=function(k,v){return ArticleLinkouts("publisher",k,v)};scope.getArticleLink=function(article){var id=(0,_getArticleId2.default)(article).replace(/\//g,"~2F");return"/lens/scholar/article/"+id+"/main"}}}}]))},function(module,exports){module.exports='\n<header>\n    <div class="listing-header">\n\n        <div class="listing-with-sidebar">\n            <span>\n                <span ng-click="article.showMore = !article.showMore" class="expand-result">\n                    <em class="fa" ng-class="{\'fa-chevron-circle-down\': !article.showMore, \'fa-chevron-circle-up\': article.showMore}" tooltip-title="Expand View"></em>\n                </span>\n                <h3 style="font-size: 1rem;">\n                    <a ng-if="vm.fallbackToLinks" ng-href="{{::getArticleLink(article)}}">\n                        {{::article.title}}\n                    </a>\n                    <a ng-if="!vm.fallbackToLinks" ui-sref="article.main({id: article.record_lens_id})">\n                        {{::article.title}}\n                    </a>\n                </h3>\n                <ul class="list-inline header-meta">\n                    <li>\n                        <span ng-repeat="author in article.authors | limitTo:(article.showAllAuthors ? 500 : 50)">\n                            {{::author.display_name}}<span ng-if="!$last">,</span>\n                        </span>\n                        <a ng-if="article.authors.length > 50 && !article.showAllAuthors" ng-click="article.showAllAuthors = true">\n                            Show all...\n                        </a>\n                    </li>\n                    <li style="display: block;">\n                        {{::article.title_full}}\n                        <span class="article-journal-title" ng-if="article.journal.title">{{::article.journal.title}},&nbsp;</span>\n                        <span ng-if="article.issue">{{\'journal.issue\' | message}}: {{::article.issue}},&nbsp;</span>\n                        <span ng-if="article.volume">{{\'journal.volume\' | message}}: {{::article.volume}},&nbsp;</span>\n                        <span ng-if="article.pages">{{\'journal.pages\' | message}}: {{::article.pages}}.&nbsp;</span>\n                        <span>\n                            <span ng-if="!article.date_published">&nbsp;|&nbsp;{{::article.year_published}}</span>\n                            <span ng-if="article.date_published">&nbsp;|&nbsp;{{::article.date_published | date}}</span>\n                        </span>\n                    </li>\n\n                </ul>\n            </span>\n        </div>\n\n        <div class="listing-sidebar results-doc-id">\n            <div class="results-doc-id-inner">\n                <div class="link-outs" ng-if="!vm.metaLoading">\n                    <div class="doc-type">\n                        <a ui-sref="article.main({id: article.record_lens_id})">\n                            <img class="pmid-icon" ng-src="{{::$root.assetLocation}}/img/favicon-32x32.png">\n                            <span>{{article.record_lens_id}}</span>\n                        </a>\n                    </div>\n                    <a target="_blank" ng-href="{{getLinkout(\'pmid\', article.pmid[0])}}" ng-if="::article.pmid.length">\n                        <img ng-src="{{::$root.assetLocation}}/img/icon-pub-med.png"\n                            title="{{::\'patentView.citations.pubmed_alt\' | message}} {{::shortCitation}}"\n                        >\n                        {{\'scholar.common.view.via\' | message}} PubMed\n                    </a>\n                    <a target="_blank" ng-href="{{getLinkout(\'pmcid\', article.pmcid[0])}}" ng-if="::article.pmcid.length">\n                        <img ng-src="{{::$root.assetLocation}}/img/icon-open-access.png"\n                            title="{{::\'patentView.citations.plos_alt\' | message}}"\n                        >\n                        {{\'scholar.common.view.open.access\' | message}}\n                    </a>\n                    <a target="_blank" ng-href="{{getLinkout(\'doi\', article.doi[0])}}" ng-if="::article.doi.length">\n                        <img ng-src="{{::$root.assetLocation}}/img/icon-cross-ref.png"\n                            title="{{::\'patentView.citations.crossref_alt\' | message}} {{::shortCitation}}"\n                        >\n                        {{\'scholar.common.view.via\' | message}} Crossref\n                    </a>\n                    <a target="_blank" ng-href="{{getLinkout(\'magid\', article.magid[0])}}" ng-if="::article.magid.length">\n                        <img ng-src="{{::$root.assetLocation}}/img/icon-mag.png">\n                        {{\'scholar.common.view.via\' | message}} Microsoft Academic\n                    </a>\n                    <a ng-href="{{::filterLink(article)}}" class="lensLink" ng-if="::article.referenced_by_patent_count">\n                        <img ng-src="{{::$root.assetLocation}}/fonts/svg-icons/icon-lens.svg" style="padding-right: 2px; padding-left: 2px;"\n                            title="View all {{::article.referenced_by_patent_count}} Patents which cite this reference"\n                        >\n                        <strong>{{::article.referenced_by_patent_count}}</strong>\n                        Patents cite this article\n                    </a>\n\n                    <a ng-href="{{::scholarFilterLink(article)}}" class="lensLink" ng-if="::article.referenced_by_count">\n                        <img ng-src="{{::$root.assetLocation}}/fonts/svg-icons/icon-lens.svg" style="padding-right: 2px; padding-left: 2px;"\n                            title="View all {{::article.referenced_by_count}} Scholarly Works which cite this reference"\n                        >\n                        <strong>{{::article.referenced_by_count}}</strong>\n                        Scholarly Works cite this article\n                    </a>\n                    <lens-coins item="article"/>\n\n                </div>\n            </div>\n        </div>\n\n    </div>\n</header>\n\n<div class="expanded-result" ng-if="article.showMore" lens-article-item-preview item="article"></div>\n'},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var CitationsController=function(){function CitationsController($scope,$http,$q,$attrs,ScholarService,PagedResourceFactory,SharedObjectService,ZoteroService){var _this=this;_classCallCheck(this,CitationsController);var view="publications";if(window.location.hash.indexOf("#/c/")===0){view=window.location.hash.slice(4)}this.state={showOriginalCitations:false,view:view,displayKey:$attrs.displayKey,loading:true,meta:{}};$http.get("/lens/service/patent/"+$attrs.key+"/externalCitations").then(function(res){var data=_.map(res.data,function(hash,string){return{string:string,hash:hash}});_this.externalCitations.setData(data);_this.state.loading=false;var hashes=_.values(res.data);if(!hashes.length){return}_this.state.metaLoading=true;var fields=["metadata","citation_ids","is_referenced_by_patent","referenced_by_patent_count","npl_text_hashes","record_lens_id","record_lens_id_num"];var promise=ScholarService.getAll(hashes,"npl_text_hashes",fields);$q.when(promise).then(function(articles){_this.state.metaLoading=false;_this.state.articles=articles;_this.state.articles.forEach(function(item){if(!item.npl_text_hashes){return}item.npl_text_hashes.forEach(function(hash){_this.state.meta[hash]=item})});ZoteroService.notify()}).catch(function(err){_this.state.metaLoading=false;_this.state.loading=false;_this.state.scholarError=true;console.warn(err)})}).catch(function(err){_this.state.metaLoading=false;_this.state.loading=false;_this.state.error=true;_this.state.errorStatus=err.status;console.warn(err)});this.externalCitations=PagedResourceFactory.createLocal([]);SharedObjectService.set("externalCitations",this.externalCitations);this.incomingCitations=PagedResourceFactory.createRemote("/lens/service/patent/"+$attrs.key+"/incomingCitations");this.incomingCitations.fetch();SharedObjectService.set("incomingCitations",this.incomingCitations);this.outgoingCitations=PagedResourceFactory.createRemote("/lens/service/patent/"+$attrs.key+"/outgoingCitations");this.outgoingCitations.fetch();SharedObjectService.set("outgoingCitations",this.outgoingCitations)}_createClass(CitationsController,[{key:"setView",value:function setView(view){this.state.view=view;window.location.hash="#/c/"+view}}]);return CitationsController}();_app2.default.controller("CitationsController",CitationsController);_app2.default.directive("lensCitations",[function(){return{template:__webpack_require__(498),controller:"CitationsController as $ctrl",bindToController:true}}])},function(module,exports){module.exports='<div>\n\n    <ul class="table-stretch nav nav-tabs tab-nav">\n        <li ng-click="$ctrl.setView(\'publications\')" ng-class="{active: $ctrl.state.view === \'publications\'}">\n            {{\'scholar.works.cites\' | message:[$ctrl.externalCitations.size]}}\n        </li>\n        <li ng-click="$ctrl.setView(\'in\')" ng-class="{active: $ctrl.state.view === \'in\'}">\n            {{\'patent.cited\' | message:[$ctrl.incomingCitations.data.size]}}\n        </li>\n        <li ng-click="$ctrl.setView(\'out\')" ng-class="{active: $ctrl.state.view === \'out\'}">\n            {{\'patent.cites\' | message:[$ctrl.outgoingCitations.data.size]}}\n        </li>\n    </ul>\n\n    <div ng-if="$ctrl.state.loading" class="no-content">\n        <em class="fa fa-refresh fa-spin fa-fw load-icon"></em>\n        {{\'common.loading\' | message}}\n    </div>\n\n\n    \x3c!-- Cites Scholarly --\x3e\n    <a class="v_nav v_active" ng-click="$ctrl.state.view = $ctrl.state.view === \'publications\' ? null : \'publications\'" ng-class="{v_active: $ctrl.state.view === \'publications\'}">\n        {{\'scholar.works.cites\' | message:[$ctrl.externalCitations.size]}}\n    </a>\n    <div class="div-table-results table-stretch tab_content" ng-if="$ctrl.state.view === \'publications\'">\n        <div ng-if="$ctrl.state.errorStatus === 403" class="no-content alert alert-danger">\n            <em class="fa fa-exclamation-triangle"></em>\n            There was an error loading citations.\n            Please reload the page to try again.\n            If you get this error after reloading the page, please <a href="mailto:support@lens.org">Contact Support</a>\n        </div>\n        <div class="div-table-results-body">\n            <div class="div-table-results-row no-selects clearfix">\n                <h3 class="pull-left-lg">\n                    {{\'common.inThisRelease\' | message}} \n                    <strong>\n                        <span lens-flag jurisdiction="key.slice(0,2)"></span>\n                        {{$ctrl.state.displayKey}}\n                    </strong>\n                    {{\'scholar.works.cites.heading\' | message:[$ctrl.externalCitations.size]}}\n                    <div style="font-size: 1rem; padding-top: .5em;" class="col-meta" ng-if="$ctrl.state.metaLoading">\n                        <em class="fa fa-refresh fa-spin fa-fw load-icon"></em>\n                        {{\'scholar.common.meta.loading\' | message}}\n                    </div>\n                </h3>\n\n                <div ng-include="\'citation-string-toggle\'"></div>\n            </div>\n\n            <div\n                lens-citation-item\n                class="div-table-results-row"\n                ng-repeat="citation in $ctrl.externalCitations.data"\n                ng-if="!$ctrl.state.showOriginalCitations && $ctrl.state.meta[citation.hash]"\n                article="$ctrl.state.meta[citation.hash]"\n            >\n            </div>\n\n            <div class="div-table-results-row no-selects" ng-repeat="citation in $ctrl.externalCitations.data" ng-if="$ctrl.state.showOriginalCitations || !$ctrl.state.meta[citation.hash]">\n                <div class="listing-with-sidebar">\n                    {{citation.string | highlight}}\n                </div>\n            </div>\n\n            <paged-resource-pagination shared-object="externalCitations"></paged-resource-pagination>\n\n            <div ng-if="$ctrl.state.scholarError" class="no-content">\n                <em class="fa fa-exclamation-triangle"></em>\n                {{\'scholar.common.meta.error.loading\' | message}}\n            </div>\n       </div>\n    </div>\n\n\n    <a class="v_nav" ng-click="$ctrl.state.view = $ctrl.state.view === \'in\' ? null : \'in\'" ng-class="{v_active: $ctrl.state.view === \'in\'}">\n        {{\'patent.cited\' | message:[$ctrl.incomingCitations.data.size]}}\n    </a>\n    <div class="div-table-results table-stretch tab_content"  ng-if="$ctrl.state.view === \'in\'">\n        <div ng-if="$ctrl.incomingCitations.errorStatus === 403" class="no-content alert alert-danger">\n            <em class="fa fa-exclamation-triangle"></em>\n            There was an error loading citations.\n            Please reload the page to try again.\n            If you get this error after reloading the page, please <a href="mailto:support@lens.org">Contact Support</a>\n        </div>\n        <div class="div-table-results-body">\n            <div class="div-table-results-row no-selects">\n                <h3>\n                    {{\'common.inThisRelease\' | message}} \n                    <strong>\n                        <span lens-flag jurisdiction="key.slice(0,2)"></span>\n                        {{$ctrl.state.displayKey}}\n                    </strong>\n                    {{\'patent.cited.heading\' | message:[$ctrl.incomingCitations.data.size]}}\n                </h3>\n            </div>\n\n            <div class="div-table-results-row no-selects" ng-repeat="item in $ctrl.incomingCitations.data.hits">\n                <header>\n                    <div class="listing-header">\n\n                        <div class="listing-with-sidebar">\n                            <h3 style="font-size: 1rem;"><a ng-href="/lens/patent/{{item.publicationKey}}">{{::item.title}}</a></h3>\n                            <ul class="list-inline header-meta">\n                                <li>{{\'patentResults.th.published\' | message}}: {{item.publicationDate | date}}</li>\n                            </ul>\n                        </div>\n\n                        <div class="listing-sidebar results-doc-id">\n                            <div class="results-doc-id-inner">\n                                <span lens-flag jurisdiction="item.jurisdiction"></span>\n                                <a ng-href="/lens/patent/{{item.publicationKey}}">{{item.displayKey}}</a>\n                            </div>\n                            \x3c!-- <lens-coins item="item"/> --\x3e\n                        </div>\n                    </div>\n                </header>\n            </div>\n\n            <paged-resource-pagination shared-object="incomingCitations"></paged-resource-pagination>\n        </div>\n    </div>\n\n\n    <a class="v_nav" ng-click="$ctrl.state.view = $ctrl.state.view === \'out\' ? null : \'out\'" ng-class="{v_active: $ctrl.state.view === \'out\'}">\n        {{\'patent.cites\' | message:[$ctrl.outgoingCitations.data.size]}}\n    </a>\n    <div class="div-table-results table-stretch tab_content"  ng-if="$ctrl.state.view === \'out\'">\n        <div ng-if="$ctrl.outgoingCitations.errorStatus === 403" class="no-content alert alert-danger">\n            <em class="fa fa-exclamation-triangle"></em>\n            There was an error loading citations.\n            Please reload the page to try again.\n            If you get this error after reloading the page, please <a href="mailto:support@lens.org">Contact Support</a>\n        </div>\n        <div class="div-table-results-body">\n            <div class="div-table-results-row no-selects">\n                <h3>\n                    {{\'common.inThisRelease\' | message}} \n                    <strong>\n                        <span lens-flag jurisdiction="key.slice(0,2)"></span>\n                        {{$ctrl.state.displayKey}}\n                    </strong>\n                    {{\'patent.cites.heading\' | message:[$ctrl.outgoingCitations.data.size]}}\n                </h3>\n            </div>\n\n            <div class="div-table-results-row no-selects" ng-repeat="item in $ctrl.outgoingCitations.data.hits">\n                <header>\n                    <div class="listing-header">\n\n                        <div class="listing-with-sidebar">\n                            <h3 style="font-size: 1rem;"><a ng-href="/lens/patent/{{item.publicationKey}}">{{::item.title}}</a></h3>\n                            <ul class="list-inline header-meta">\n                                <li>{{\'patentResults.th.published\' | message}}: {{item.publicationDate | date}}</li>\n                            </ul>\n                        </div>\n                        <div class="listing-sidebar results-doc-id">\n                            <div class="results-doc-id-inner">\n                                <span lens-flag jurisdiction="item.jurisdiction"></span>\n                                <a ng-href="/lens/patent/{{item.publicationKey}}">{{item.displayKey}}</a>\n                            </div>\n                            \x3c!-- <lens-coins item="item"/> --\x3e\n                        </div>\n                    </div>\n                </header>\n            </div>\n\n            <paged-resource-pagination shared-object="outgoingCitations"></paged-resource-pagination>\n\n        </div>\n    </div>\n\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ApplyClassificationFilter=__webpack_require__(276);var ClassificationService=__webpack_require__(120);var LocalStorageService=__webpack_require__(7);var ClassificationAutocompleteInputView=__webpack_require__(500);var service=void 0;var link=function link($q,$window,$sce){return function(scope,element){service=new ClassificationService({cache:false,storage:new LocalStorageService("classification-viewer")});var autoComplete=new ClassificationAutocompleteInputView({el:element.find(".classification-viewer-search-input")});scope.$watch("type",function(){autoComplete.setType(scope.type)});scope.term=scope.term||"";scope.type=scope.type||"CPC";scope.searchType="search";scope.items=[];scope.loading=false;scope.symbol="";scope.classifications=scope.selected||{};scope.$watch("term",function(){scope.search()});scope.fetch=function(){scope.searchType="lookup";scope.loading=true;scope.error=null;$q.when(service.ancestorsAndSelf(scope.type,scope.symbol)).then(function(items){items.forEach(function(item){item.type=scope.type});scope.loading=false;if(!items.length){scope.items=[];return}_.each(items,function(item,i){if(items[i+1]){item.showChildren=true;item.children=[items[i+1]]}});var rootItem=items[0]?_.findWhere(scope.items,{id:items[0].id}):null;if(!rootItem){rootItem={id:items[0]?items[0].id:null,children:[]};scope.items.push(rootItem)}_.extend(rootItem,items[0]);_.defer(function(){var last=_.last(items);var id=last?last.id:"";var selector="#classification-viewer-item-"+id;var el=element.find(selector).get(0);if(el){el.scrollIntoView()}})}).catch(function(error){console.warn(error);scope.loading=false;scope.error="Could not fetch Classification Data for "+scope.type+": "+scope.symbol})};var promise=void 0;scope.fetchRoot=function(){scope.about=false;scope.error=null;scope.loading=true;scope.items=[];if(promise&&promise.abort){promise.abort()}promise=service.getChildren(scope.type);return $q.when(promise).then(function(items){items.forEach(function(item){item.type=scope.type;if(!_.isString(item.classTitle)){console.warn("item already trusted");return}item.classTitle=$sce.trustAsHtml(item.classTitle)});scope.items=_.sortBy(items,"symbol");scope.loading=false;promise=null}).catch(function(error){console.warn(error);scope.loading=false;scope.error="Could not fetch Classification Data for "+scope.type})};scope.search=function(){scope.items=[];if(!scope.term.trim()){scope.fetchRoot();return}if(looksLikeSymbol(scope.term)||scope.type==="USPC"){scope.symbol=scope.term.toUpperCase();scope.fetch();return}scope.searchType="search";scope.about=false;scope.error=null;scope.loading=true;scope.searched=true;$q.when(service.search(scope.type,scope.term)).then(function(items){items.forEach(function(item){item.type=scope.type;item.symbol=item.symbol.formatted;item.classTitle=$sce.trustAsHtml(item.classTitle);item.textBody=$sce.trustAsHtml(item.textBody)});scope.items=items;scope.loading=false}).catch(function(error){console.warn(error);scope.loading=false;scope.error="Could not find Classification Data for search term: "+scope.term})};if(scope.type){scope.searchType="lookup";scope.fetchRoot().then(function(){if(scope.term){scope.search()}})}else if(scope.items.length===0){scope.about=true}scope.hasSelected=function(){return _.values(scope.classifications).includes(true)};scope.clearSelected=function($event){$event.preventDefault();_.each(_.keys(scope.classifications),function(s){scope.classifications[s]=false})};scope.applySelections=function($event,newSearch){$event.preventDefault();var selected=_.filter(_.keys(scope.classifications),function(s){return scope.classifications[s]});var opts=_.groupBy(selected,function(symbol){return canFilter(symbol)?"symbol":"prefix"});opts.prefix=_.map(opts.prefix,replaceMainGroupWithPrefix);opts.type=scope.type;opts.newSearch=newSearch;ApplyClassificationFilter.applyFilter(opts)};scope.isSearchInitialized=isSearchInitialized}};_app2.default.directive("lensClassificationViewerExplorer",function(){return{template:__webpack_require__(247)}});_app2.default.directive("lensClassificationViewer",["$q","$window","$sce",function($q,$window,$sce){return{scope:{type:"=",term:"=",hideActionButtons:"<",selected:"="},template:__webpack_require__(249),link:link($q,$window,$sce)}}]);_app2.default.directive("lensClassificationViewerItem",["$q",function($q){return{restrict:"E",template:__webpack_require__(248),replace:true,scope:{item:"=",selected:"=",classifications:"="},link:function link(scope){scope.searchBySymbolPrefix=function($event,item,newSearch){$event.stopPropagation();$event.preventDefault();var prefix=replaceMainGroupWithPrefix(item.symbol);var opts={type:item.type,prefix:[prefix],newSearch:newSearch};ApplyClassificationFilter.applyFilter(opts)};scope.applyFilter=function($event,item,newSearch){$event.stopPropagation();$event.preventDefault();var opts=_.extend({},item);opts.newSearch=newSearch;ApplyClassificationFilter.applyFilter(opts)};scope.searchBySymbol=function($event,item,newSearch){if(canFilter(item.symbol)){scope.applyFilter($event,item,newSearch)}else{scope.searchBySymbolPrefix($event,item,newSearch)}};scope.getFilterLink=function(item){return ApplyClassificationFilter.getFilterUrl(item)};scope.toggleChildren=function(toggle){if(scope.$parent.$parent.searchType==="search"){scope.$parent.$parent.searchType="lookup";scope.$parent.$parent.symbol=scope.item.symbol;scope.$parent.$parent.items=[];scope.$parent.$parent.fetch();return}if(toggle!==undefined){scope.item.showChildren=toggle}else{scope.item.showChildren=!scope.item.showChildren}if(scope.item.showChildren&&!scope.item.childrenFetched){scope.getChildren()}};scope.getChildren=function(){if(!scope.item.id){return}scope.item.loading=true;$q.when(service.getChildren(scope.item.type,scope.item.id)).then(function(items){items.forEach(function(item){return item.type=scope.item.type});scope.item.children=items;scope.item.childrenFetched=true;scope.item.loading=false})};scope.canFilter=canFilter;scope.hasChildren=function(){return scope.item.childCount>0||scope.item.childCount===undefined};scope.isSearchInitialized=isSearchInitialized;scope.tooltipContentId=function(){return"symbol-"+scope.item.id};scope.newSearchText=function(){return window.messages.prop("classification.viewer.startNewSearch",scope.item.symbol)};scope.filterExistingSearchText=function(){return window.messages.prop("classification.viewer.filterExistingSearch",scope.item.symbol)}}}}]);module.exports=_app2.default;var looksLikeSymbol=function looksLikeSymbol(term){var r=/\d/;return term.length>1&&"ABCDEFGHY".indexOf(term[0].toUpperCase())>=0&&r.test(term[1])};var isSearchInitialized=function isSearchInitialized(){return window.LENS.searchFormInitialized};var isMainGroup=function isMainGroup(symbol){return symbol.slice(-3)==="/00"};var canFilter=function canFilter(symbol){return symbol.indexOf("/")>0&&!isMainGroup(symbol)};var replaceMainGroupWithPrefix=function replaceMainGroupWithPrefix(symbol){return isMainGroup(symbol)?symbol.replace("/00","\\/"):symbol}},function(module,exports,__webpack_require__){"use strict";var ClassificationService=__webpack_require__(120);var LocalStorageService=__webpack_require__(7);var classificationService=void 0;module.exports=Backbone.View.extend({initialize:function initialize(opts){var view=this;view.type=opts.type;classificationService=new ClassificationService({cache:true,storage:new LocalStorageService("classification-autocomplete")});if(!$(opts.el).length){return}$(opts.el).removeClass("hidden").autocomplete({search:function search(){$(this).addClass("working")},open:function open(){$(this).removeClass("working")},minLength:0,source:function source(request,response){var type=view.type||$(this.element).data("type");var term=request.term.split(" ").pop();classificationService.suggest(type||"CPC",term).done(function(items){response(items.exact.concat(items.fuzzy))})},focus:function focus(){return false},select:function select(event,ui){var val=ui.item.value;var text=$("<span>").html(val).text();if(opts.toUpperCase){text=text.toUpperCase()}var prefix=opts.el.val().split(" ").slice(0,-1).join(" ")+" ";this.value=prefix+text;return false},matchContains:"word"}).data("ui-autocomplete")._renderItem=function(ul,item){var label=item.label;if(opts.toUpperCase){label=label.toUpperCase()}return $("<li></li>").data("item.autocomplete",item).append("<a>"+label+"</a>").appendTo(ul)}},setType:function setType(type){this.type=type}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _d=__webpack_require__(38);var d3=_interopRequireWildcard(_d);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensCollaborationNetwork",[].concat(deps,[function(){return{template:__webpack_require__(502),scope:{data:"<"},link:function link(scope,element){var render=function render(){var el=element.find(".collaboration-network");el.empty();var data=scope.data;var width=800;var height=400;var strength=-1e3;var includeLabels=true;var fontColour="#444444";var colorScale=d3.scaleOrdinal(d3.schemeCategory10);var links=data.links.map(function(d){return Object.create(d)});var nodes=data.nodes.map(function(d){return Object.create(d)});var drag=function drag(simulation){function dragstarted(d){if(!d3.event.active)simulation.alphaTarget(.3).restart();d.fx=d.x;d.fy=d.y}function dragged(d){d.fx=d3.event.x;d.fy=d3.event.y}function dragended(d){if(!d3.event.active)simulation.alphaTarget(0);d.fx=null;d.fy=null}return d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended)};var simulation=d3.forceSimulation(nodes).force("link",d3.forceLink(links).id(function(d,i){return i})).force("charge",d3.forceManyBody().strength(strength)).force("x",d3.forceX()).force("y",d3.forceY()).on("tick",ticked);var svg=d3.select(el.get(0)).append("svg").attr("viewBox",[-width/2,-height/2,width,height]).style("background","white");var g=svg.append("g");var link=g.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(links).enter().append("line").attr("stroke-width",function(d){return Math.sqrt(d.value)});var node=g.append("g").selectAll("g").data(nodes).enter().append("g");var values=nodes.map(function(d){return d.value}).sort();values.unshift(0);values.pop();var domain=d3.extent(values);var sizeScale=d3.scaleLinear().domain(domain).range([10,20]);var shapes=node.append("circle").attr("r",function(d){return 20}).attr("fill",function(d,i){return colorScale(d.group)}).attr("stroke","#fff").call(drag(simulation));if(includeLabels){node.append("text").text(function(d){return d.label}).attr("fill",fontColour).attr("font-family","sans-serif").attr("font-size","14px").attr("x",15).attr("y",5)}node.append("title").text(function(d){return d.id+" ("+d.group+")"});function zoom_actions(){g.attr("transform",d3.event.transform)}var zoom_handler=d3.zoom().on("zoom",zoom_actions);zoom_handler(svg);function ticked(){link.attr("x1",function(d){return d.source.x}).attr("y1",function(d){return d.source.y}).attr("x2",function(d){return d.target.x}).attr("y2",function(d){return d.target.y});node.attr("transform",function(d){return"translate("+d.x+","+d.y+")"})}};var _render=_.debounce(render,500);$(window).resize(_render);_render()}}}]))},function(module,exports){module.exports='<div>\n    <div class="collaboration-network"></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _ExportFields=__webpack_require__(175);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var deps=["CollectionService","$rootScope"];_app2.default.directive("lensCollectionAction",[].concat(deps,[function(CollectionService,$rootScope){return{template:__webpack_require__(504),scope:{collection:"<",action:"="},link:function link(scope){var vm=scope.vm={ASYNC_EXPORT_LIMIT:1e3,exportFilename:"",exportFormat:"CSV",exportFieldsList:_ExportFields.EXPORT_FIELDS,importData:"",importType:"lens-ids",importPlaceholders:{pubkey:"e.g. US_5599670_A, EP_0571457_B1, WO_2017_177216_A1","lens-ids":"e.g. 042-081-813-275-046, 002-333-446-171-92X",doi:"e.g. 10.1109/tcsvt.2012.2221191\n10.1145/332040.332418\n10.1007/3-540-45518-3_18",pmcid:"e.g. 156379\n26536\n2195837",pmid:"e.g. 12351792\n8628236\n19002977",mag:"e.g. 2043747172\n2167898414\n2146395539"}};var handleError=function handleError(res){console.warn(res.data);vm.error=true;vm.submitting=false;var error="Unknown Collection Error";if(res.data.error){error=res.data.error}else if(res.data.errors&&res.data.errors.length){error=res.data.errors.join(", ")}notification.error(error)};scope.create=function(){vm.saving=true;CollectionService.create(scope.collection).then(function(res){scope.close()}).catch(handleError)};scope.delete=function(){vm.submitting=true;CollectionService.delete(scope.collection.id).then(function(){scope.close()}).catch(handleError)};scope.save=function(){vm.saving=true;CollectionService.save(scope.collection).then(function(res){scope.close()}).catch(handleError)};scope.import=function(){vm.submitting=true;var originalItemCount=scope.collection.itemCount;CollectionService.import(scope.collection.id,vm.importData,vm.importType).then(function(res){var data=res.data;if(data&&data.itemCount){var added=data.itemCount-originalItemCount;var message="Added "+added+" items to collection";notification.notify(message)}scope.close()}).catch(handleError)};scope.export=function(){vm.submitting=true;CollectionService.export(scope.collection.id,{exportFilename:vm.exportFilename||scope.collection.title,exportFormat:vm.exportFormat,fields:_.keys(vm.exportFields).filter(function(k){return vm.exportFields[k]}).filter(scope.exportFieldFilter).join(",")}).then(function(res){if(res.status===200){notification.notify("Export successful. Downloading now");window.location=res.data}else if(res.status===202){notification.notify(window.messages.prop("export.async.success"),{life:5e3})}scope.close()}).catch(handleError)};scope.close=function(){vm.submitting=false;CollectionService.emit("REFRESH_COLLECTIONS");scope.action=null};scope.selectAllExportFields=function(v){var exportFields={};_ExportFields.EXPORT_FIELDS.forEach(function(k){exportFields[k]=v});vm.exportFields=exportFields};scope.exportFieldFilter=function(k){var unsupportedFields=_ExportFields.UNSUPPORTED_EXPORT_FIELDS[vm.exportFormat];if(unsupportedFields&&_.includes(unsupportedFields,k)){return false}return true};scope.selectAllExportFields(true)}}}]))},function(module,exports){module.exports='<div>\n    \x3c!-- Import Modal --\x3e\n    <div ng-if="action === \'import\'" ng-include="\'import-collection\'"></div>\n\n    \x3c!-- Export Modal --\x3e\n    <div ng-if="action === \'export\'" ng-include="\'export-collection\'"></div>\n\n    \x3c!-- Publish Modal --\x3e\n    <div ng-if="action === \'publish\'" ng-include="\'publish-collection\'" include-replace></div>\n\n    \x3c!-- Create Modal --\x3e\n    <div ng-if="action === \'create\'">\n        <h3>{{\'user.collections.createNew.title\' | message}}</h3>\n        <div lens-collection-form collection="collection" submit="create" close="close"></div>\n    </div>\n\n    \x3c!-- Edit Modal --\x3e\n    <div ng-if="action === \'edit\'">\n        <h3>{{::\'user.collections.edit.longDesc\' | message}}</h3>\n        <div lens-collection-form collection="collection" submit="save" close="close"></div>\n    </div>\n\n    \x3c!-- Delete Confirmation --\x3e\n    <div ng-if="action === \'delete\'">\n        <div ng-include="\'delete-collection\'"></div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var deps=["CollectionService"];_app2.default.directive("lensCollectionControls",[].concat(deps,[function(CollectionService){return{template:__webpack_require__(250),scope:{newCollection:"=",addToCollection:"=",removeFromCollection:"=",type:"<"},link:function link(scope){var collections=window.globalCollections||[];var vm=scope.vm={collections:collections,filteredCollections:collections.filter(function(d){return d.type===scope.type})};scope.refresh=function(){CollectionService.getAll().then(function(data){vm.collections=data;vm.filteredCollections=data.filter(function(d){return d.type===scope.type})}).catch(function(res){console.warn(res.data);vm.error=true;notification.error(res.data&&res.data.error?res.data.error:"Unknown Collection Error")})};CollectionService.on("REFRESH_COLLECTIONS",scope.refresh);scope.$on("$destroy",function(){CollectionService.removeListener("REFRESH_COLLECTIONS",scope.refresh)});scope.doNewCollection=function(){scope.newCollection={type:scope.type}};scope.doAddToCollection=function(){scope.addToCollection=true};scope.doRemoveFromCollection=function(){scope.removeFromCollection=true};if(!window.globalCollections){scope.refresh()}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http","$timeout","CollectionService"];_app2.default.directive("lensCollectionDetails",[].concat(deps,[function($http,$timeout,CollectionService){return{template:__webpack_require__(507),scope:{collection:"<"},link:function link(scope){scope.vm={};var reveal=function reveal(){$timeout(function(){scope.vm.reveal=true},500)};if(scope.collection.user){scope.collection.user.type="personal"}scope.collectionAction=function(k){scope.vm.collectionAction=k};if(scope.collection.user){reveal()}var metadata=CollectionService.getAdditionalMetadata(scope.collection);if(metadata){scope.item=metadata.item;scope.vm.introText=metadata.introText;reveal()}CollectionService.getIn4mMetadata(scope.collection).then(function(metadata){if(metadata){scope.item=metadata.item;scope.vm.introText=metadata.introText;reveal()}})}}}]))},function(module,exports){module.exports='<div class="collection-details">\n\n    \x3c!-- Collection Header --\x3e\n    <div class="collection-header" ng-class="{\'collection-header-collapsed\': $root.hideQueryDetails}">\n        <div class="logo collection-header-img" ng-class="{reveal: vm.reveal}">\n            <span ng-if="item" ng-click="item.type === \'institution\' ? vm.lightbox = !vm.lightbox : null" style="background: white; display: inline-block; cursor: pointer;">\n                <img ng-if="!item.user.metadata.logoUrl" ng-src="{{$root.assetLocation}}/img/missing-user.png" alt="user">\n                <img ng-if="item.user.metadata.logoUrl" ng-src="{{item.user.metadata.logoUrl}}" alt="user">\n            </span>\n            <span ng-if="!item">\n                <img ng-if="collection.user.profilePictureKey" ng-src="{{$root.userProfilePictureUrl(collection.user.profilePictureKey)}}" alt="user">\n                <img ng-if="!collection.user.profilePictureKey" ng-src="{{$root.assetLocation}}/img/missing-user.png" alt="user">\n            </span>\n        </div>\n        <div class="btn-group btn-group-sm collection-header-controls"\n            ng-if="collection.user.id === $root.user.id"\n            ng-include="\'modify-collection-buttons\'"\n        >\n        </div>\n        <h1>{{::collection.title}}</h1>\n        <ul class="list-unstyled list-collection-header">\n            <li>\n                <em>{{\'common.curator\' | message}}:</em>\n                {{::item ? item.user.displayName : collection.user.displayName}}\n            </li>\n            <li ng-if="collection.user.metadata.GRID">\n                <div class="lens-university-grid-container">\n                    <a ng-href="https://grid.ac/institutes/{{collection.user.metadata.GRID}}">\n                        <img alt="GRID ID" class="grid-id-logo" ng-src="{{$root.assetLocation}}/fonts/svg-icons/grid-id.svg">\n                        {{collection.user.metadata.GRID}}\n                    </a>\n                </div>\n            </li>\n            <li>\n                <em>Contents:</em>\n                {{collection.itemCount | customNumber}}\n                {{\'user.collections.type.\' + collection.type | message}}\n                ({{::\'user.sharing.\' + collection.access | message}})\n            </li>\n            \x3c!--<li>\n                <em>Access:</em>\n                {{::\'user.sharing.\' + collection.access | message}}\n            </li>--\x3e\n            <li>\n                <em>{{\'common.dateCreated\' | message}}:</em>\n                {{::collection.created | date}}\n                <em style="margin-left: 5px;">{{\'common.Updated\' | message}}:</em>\n                    {{::collection.updated | date}}\n            </li>\n        </ul>\n\n        <div class="report-header-secondary-btns">\n            <div class="report-only btn btn-xxs exit-presentation-mode" ng-click="$parent.$ctrl.editDashboard()">\n                <em class="fa fa-times-circle col-error"></em>\n                Exit presentation mode\n            </div>\n            <span class="query-details-toggle btn btn-xxs" ng-click="$root.toggleQueryDetails()">\n                <em class="fa" ng-class="{\'fa-caret-down\': $root.hideQueryDetails, \'fa-caret-up col-ter\': !$root.hideQueryDetails}"></em>\n                <span ng-if="$root.hideQueryDetails">Show Query Details</span>\n                <span ng-if="!$root.hideQueryDetails">Hide Query Details</span>\n            </span>\n        </div>\n    </div>\n\n\n    \x3c!-- Collection Details --\x3e\n    <div class="tab-item listing-header collection-description" ng-hide="$root.hideQueryDetails">\n        <div class="collection-description-txt">\n            <strong>\n                {{::\'user.collections.description\' | message}}:\n            </strong>\n            <p ng-if="vm.introText">\n                {{vm.introText}}\n            </p>\n            <p ng-if="::collection.description">\n                {{::collection.description}}\n            </p>\n            <p ng-if="item.slug" ng-include="$root.institutionDataLocation + \'/public/descriptions/\' + item.slug + \'.html\'"></p>\n            <p ng-if="!collection.description && !item.slug && !vm.introText">\n                {{::\'common.alert.no.description\' | message}}\n            </p>\n        </div>\n    </div>\n\n    \x3c!-- Add / Edit / Publish / Import / Export Collection --\x3e\n    <div lens-modal size="sm" visible="vm.collectionAction">\n        <div lens-collection-action\n            collection="collection"\n            action="vm.collectionAction"\n        ></div>\n    </div>\n\n    \x3c!-- In4M Modal --\x3e\n    <div lens-modal visible="vm.lightbox">\n        <div lens-institution-details visible="vm.lightbox" item="item"></div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensCollectionForm",[].concat(deps,[function(){return{template:__webpack_require__(509),scope:{collection:"=",submit:"<",submitting:"<",close:"<",selectType:"<"}}}]))},function(module,exports){module.exports='<form ng-submit="submit(collection)">\n    <label ng-if="selectType">\n        Type\n    </label>\n    <label class="select" ng-if="selectType">\n        <select ng-model="collection.type">\n            <option value="PATENT">Patent</option>\n            <option value="SCHOLARLY_WORK">Scholar</option>\n        </select>\n        <i></i>\n    </label>\n    <label class="input">\n        Title\n        <input type="text" ng-model="collection.title" required>\n    </label>\n    <label class="textarea">\n        Description\n        <textarea ng-model="collection.description"></textarea>\n    </label>\n    <br>\n    <div class="pull-right">\n        <span class="btn btn-sm btn-danger-txt" ng-click="close()">\n            Cancel\n        </span>\n        <button class="btn btn-sm btn-pri" ng-disabled="submitting" ng-class="{\'btn-submitting\': submitting}">\n            <em class="fa fa-refresh fa-spin" ng-if="submitting"></em>\n            Save\n        </button>\n    </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _set2=__webpack_require__(104);var _set3=_interopRequireDefault(_set2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getLogoUrl=__webpack_require__(41);var BASE_URL=window.UI_CONFIG.institutionDataLocation||"";module.exports=_app2.default.directive("lensCollectionList",["$q","$http",function($q,$http){return{template:__webpack_require__(252),replace:true,scope:{items:"<",lensId:"<",loading:"<"},link:function link(scope){scope.limit=50;if(scope.lensId){$http.get("/lens/service/collection/viewable/"+scope.lensId).then(function(res){scope.items=res.data})}scope.increaseLimit=function(){scope.limit+=50}}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http","CollectionService","SettingsService"];module.exports=_app2.default.directive("lensCollectionListItem",[].concat(deps,[function($http,CollectionService,SettingsService){return{template:__webpack_require__(251),replace:true,scope:{collection:"<",isHeading:"="},link:function link(scope){if(!scope.collection){console.warn("abort");return}scope.vm={};$http({url:"/lens/service/user/"+scope.collection.user.id+"/linked-identities",cache:true}).then(function(res){scope.collection.user.linkedAccounts=res.data});scope.favourites={};scope.MAX_DESCRIPTION_LENGTH=280;scope.collection.showFullDescription=scope.collection.description&&scope.collection.description.length<scope.MAX_DESCRIPTION_LENGTH;SettingsService.get("favourites.collections").then(function(d){scope.favourites=d||{}});scope.favourite=function(id){scope.favourites[id]=!scope.favourites[id];SettingsService.set("favourites.collections["+id+"]",scope.favourites[id])};scope.starIcon=function(id){return{"fa-star col-sec":scope.favourites?scope.favourites[id]:false,"fa-star-o":scope.favourites?!scope.favourites[id]:true}};scope.collection.user.type="personal";var metadata=CollectionService.getAdditionalMetadata(scope.collection);if(metadata){scope.item=metadata.item;scope.vm.introText=metadata.introText}CollectionService.getIn4mMetadata(scope.collection).then(function(metadata){if(metadata){scope.item=metadata.item;scope.vm.introText=metadata.introText}})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensCreateAnalysisForm",[].concat(deps,[function(){return{template:__webpack_require__(513),scope:{config:"="},link:function link(scope){scope.vm=scope.config}}}]))},function(module,exports){module.exports='<form ng-submit="submit()">\n    <div class="deep-analysis-config-item">\n        <label class="small">Visualisation Type</label>\n        <label class="select x-select-sm">\n            <select ng-model="vm.view" ng-change="submit()">\n                <option value="basic">Basic Rankings</option>\n                <option value="over-time">Historical Trends</option>\n                <option value="x-by-y">Targeted Analysis</option>\n                <option value="scatter-plot">Citation Comparison</option>\n                <option value="article-scatter">Top Scholarly Works</option>\n                <option value="patent-scatter">Top Citing Patents</option>\n            </select>\n            <i></i>\n        </label>\n    </div>\n    <div class="deep-analysis-config-item" ng-if="vm.view === \'scatter-plot\'">\n        <label class="small">Metric</label>\n        <label class="select x-select-sm">\n            <select ng-model="vm.scatterPlotSort" ng-change="submit()">\n                <option value="referenced_by_patent_count">Most Citing Patents</option>\n                <option value="referenced_by_count">Most Citing Scholarly Works</option>\n            </select>\n            <i></i>\n        </label>\n    </div>\n    <div class="deep-analysis-config-item" ng-if="vm.view !== \'article-scatter\' && vm.view !== \'patent-scatter\' && vm.view !== \'patent-facets\'">\n        <label class="small">Facet</label>\n        <label class="select x-select-sm">\n            <select ng-model="vm.primaryFacet" ng-change="submit()">\n                <option ng-repeat="k in vm.scholarlyAggKeys | orderBy:vm.fieldMap[k].label" ng-value="k" ng-if="k !== \'dates\'">\n                    {{vm.fieldMap[k].label || k}}\n                </option>\n            </select>\n            <i></i>\n        </label>\n    </div>\n    <div ng-include="\'article-scatter-config\'" ng-if="vm.view === \'article-scatter\'"></div>\n    <div ng-include="\'patent-scatter-config\'" ng-if="vm.view === \'patent-scatter\'"></div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var deps=["CollectionService","$rootScope"];_app2.default.directive("lensCreateCollection",[].concat(deps,[function(CollectionService,$rootScope){return{template:__webpack_require__(515),scope:{collection:"=",lensIds:"<",search:"&",selectedAll:"<",selectType:"<",submitting:"=",visible:"="},link:function link(scope){var handleError=function handleError(err){console.warn(err);scope.submitting=false;var message=messages.prop("user.collections.create.failed");notification.error(message)};scope.createNewCollection=function(){var lensIds=scope.lensIds||[];scope.submitting=true;CollectionService.create(scope.collection).then(function(collection){var success=function success(){var message=messages.prop("user.collections.create.success");scope.submitting=false;notification.success(message);scope.collection=null;lensIds.forEach(function(lensId){if(!window.globalPatentCollectionMap){window.globalPatentCollectionMap={}}if(!window.globalPatentCollectionMap[lensId]){window.globalPatentCollectionMap[lensId]=[]}window.globalPatentCollectionMap[lensId].push(collection.id)});$rootScope.$broadcast("REFRESH_COLLECTIONS")};if(scope.selectedAll){CollectionService.addSearchToCollection(collection,scope.search).then(success).catch(handleError)}else if(lensIds.length){CollectionService.addItems(collection.id,lensIds).then(success).catch(handleError)}else{success()}}).catch(handleError)};scope.close=function(){scope.collection=null}}}}]))},function(module,exports){module.exports='<div class="create-collection">\n    <h3>{{::\'user.collections.createNew.title\' | message}}</h3>\n    <p class="alert alert-info">\n        <em class="fa fa-info-circle"></em>\n        Limit: {{$root.user.collectionSizeLimits[collection.type] | customNumber}}\n    </p>\n    <div lens-collection-form\n        collection="collection"\n        submit="createNewCollection"\n        submitting="submitting"\n        close="close"\n        select-type="selectType"\n    ></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensDatepicker",[].concat(deps,[function(){return{restrict:"A",require:"ngModel",link:function link(scope,element,attrs,ctrl){var render=function render(date){ctrl.$setViewValue(date);ctrl.$render();scope.$apply()};element.datepicker({maxDate:new Date,yearRange:"-100:+0",dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true,onSelect:function onSelect(date){render(date)},onChangeMonthYear:function onChangeMonthYear(year,month){var date=new Date(year,month-1);var d=window.moment(date).format("YYYY-MM-DD");$(this).datepicker("setDate",d);render(d)}})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensDeepAnalysisHeadingControl",[].concat(deps,[function(){return{template:__webpack_require__(518),transclude:true,scope:{label:"<",visible:"="},link:function link(scope,element){scope.click=function(){scope.visible=true;setTimeout(function(){element.find("select").focus()},100)}}}}]))},function(module,exports){module.exports='<span>\n    <span class="link heading-select-link" ng-click="click()" ng-hide="visible">\n        {{label}}\n    </span>\n    <form style="display: inline-block; width: 160px;" ng-show="visible">\n        <label class="select select-sm heading-select" style="position: relative; top: 0;">\n            <span ng-transclude></span>\n            <i></i>\n        </label>\n    </form>\n</span>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _d=__webpack_require__(38);var d3=_interopRequireWildcard(_d);var _facetFormatters=__webpack_require__(131);var _facetFormatters2=_interopRequireDefault(_facetFormatters);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _set2=__webpack_require__(104);var _set3=_interopRequireDefault(_set2);var _cloneDeep2=__webpack_require__(177);var _cloneDeep3=_interopRequireDefault(_cloneDeep2);var _ArticleScatterSpec=__webpack_require__(520);var _ArticleScatterSpec2=_interopRequireDefault(_ArticleScatterSpec);var _GroupedBarChartSpec=__webpack_require__(521);var _GroupedBarChartSpec2=_interopRequireDefault(_GroupedBarChartSpec);var _PatentScatterSpec=__webpack_require__(268);var _PatentScatterSpec2=_interopRequireDefault(_PatentScatterSpec);var _ScatterPlotSpec=__webpack_require__(532);var _ScatterPlotSpec2=_interopRequireDefault(_ScatterPlotSpec);var _StackedBarChartSpec=__webpack_require__(533);var _StackedBarChartSpec2=_interopRequireDefault(_StackedBarChartSpec);var _aggs=__webpack_require__(57);var _aggs2=_interopRequireDefault(_aggs);var _getPatentFieldType=__webpack_require__(534);var _getScholarFieldType=__webpack_require__(535);var _urlQueryHelpers=__webpack_require__(18);var _ArticleSorts=__webpack_require__(201);var _ArticleSorts2=_interopRequireDefault(_ArticleSorts);var _HistoricalAnalysisSpec=__webpack_require__(536);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var mapKeys=["jurisdiction","author.affiliation.grid.address.country_code","source.country"];var logoGridKeys=["applicant","author.affiliation.name.keyword"];var _scholarScatterPlotFields=["has_clinical_trial","has_funding","is_open_access","open_access.license","publication_type","referenced_by_count","referenced_by_patent_count","source.asjc_subject","source.country","source.publisher","source.title","title","year_published"];var configKeys=["showMissingValues","groupOtherValues","basicChartType","citingPatentScatter","colourScheme","limit","overTimeMark","primaryFacet","scaleType","scatterPlotSort","secondaryFacet","secondaryFacetLimit","barChartType","view","title","normalise","annotation","scholarArticleScatter","displayScatterLabels","alternateColours","flip"];var IsoCountries=__webpack_require__(23);var deps=["PatentService","ScholarService","$q","$rootScope","$timeout"];var Fields=__webpack_require__(60);var ArticleFields=Fields.filter(function(d){return d.type==="SCHOLAR"});var fieldMap={};Fields.forEach(function(d){fieldMap[d.key]=d});var citingPatentFieldsMap={};Fields.filter(function(d){return d.type==="PATENT"&&d.camelKey&&!d.excludedAnalysis}).forEach(function(d){d.fieldType=(0,_getPatentFieldType.getPatentFieldType)(d.camelKey);citingPatentFieldsMap[d.camelKey]=d});var scholarScatterPlotFields=_scholarScatterPlotFields.map(function(key){return fieldMap[key]||{key:key}});scholarScatterPlotFields.forEach(function(d){d.fieldType=(0,_getScholarFieldType.getScholarFieldType)(d.key)});var IsoCountriesNameLookup=__webpack_require__(119);var scholarlyAggKeys=["is_open_access","mesh_term.mesh_heading","publication_type","field_of_study","funding.organisation.keyword","author.affiliation.grid.address.country_code","open_access.colour","open_access.license","conference.name","author.display_name.keyword","author.affiliation.name.keyword","chemical.substance_name","source.title","source.publisher.keyword","source.asjc_subject","source.country"];_app2.default.directive("lensDeepAnalysisItem",[].concat(deps,[function(PatentService,ScholarService,$q,$rootScope,$timeout){return{template:__webpack_require__(537),scope:{scholarlyAggs:"<",filterMap:"<",request:"<",config:"=",analysisQueue:"=",index:"<",scholarlySearchId:"<",clickStackedBarChart:"<",clickGroupedBarChart:"<",clickSimpleBarChart:"<",applySubAnalysisDateFilter:"<",addFilter:"<",columns:"<",metrics:"<",queued:"<"},link:function link(scope,element){var getWidth=function getWidth(){var padding=50;var width=element.width()-padding;if(scope.columns){width=($(".body-content").width()-padding)/2}return width};var vm=scope.vm={vegaView:null,vegaSpec:null,fields:ArticleFields,scholarlyAggKeys:scholarlyAggKeys,fieldMap:fieldMap,sorts:_ArticleSorts2.default,citingPatentFields:_.values(citingPatentFieldsMap),citingPatentSizeFields:[{label:"None"}].concat(_toConsumableArray(_.values(citingPatentFieldsMap))),wordCloudWarning:null,metricLabels:{referenced_by_count:"Scholar Citations",referenced_by_patent_count:"Patent Citations"},openAccessColourScale:{domain:["bronze","gold","green","hybrid","unknown"],range:["#fd8d3c","#bcbd22","#74c476","#6baed6","#d9d9d9"]},scholarScatterPlotFields:scholarScatterPlotFields,filterExtent:[],config:{view:"article-scatter",primaryFacet:scope.config.primaryFacet||"field_of_study",secondaryFacet:"author.affiliation.name.keyword",limit:10,secondaryFacetLimit:10,barChartType:"grouped",basicChartType:"bar-chart",colourScheme:"auto",displayBarChartLegend:true,metric:"",flip:false,metricAggregation:"sum",overTimeMark:"line",scaleType:"linear",scatterPlotSort:"referenced_by_patent_count",citingPatentScatter:{x:{field:"citedByPatentCount"},y:{field:"simpleFamilySize"},color:{field:"kindCode"},size:{field:"score"},sort:"-cited_by_patent_count"},scholarArticleScatter:{x:{field:"referenced_by_patent_count"},color:{field:"is_open_access"},y:{field:"referenced_by_count"},sort:"+patents"}}};_.keys(scope.config).forEach(function(k){if(scope.config[k]){vm.config[k]=scope.config[k]}});if(scope.config.view==="basic"&&!scope.config.limit){vm.config.limit=20}scope._reset=function(){vm.error=null;vm.headingSelect=false;vm.articleScatterPlotSpec=null;vm.scatterPlotSpec=null;vm.historicalData=null;vm.groupedBarChartSpec=null;vm.stackedBarChartSpec=null;vm.analysisReady=false;vm.loading=true};scope.retryOverTime=function(){var request=(0,_cloneDeep3.default)(scope.request);request.scholarly_search.aggregations=_defineProperty({},vm.config.primaryFacet,{terms:{field:vm.config.primaryFacet}});delete request.scholarly_search.from;delete request.scholarly_search.highlight;var promise=ScholarService.search(request);$q.when(promise).then(function(res){var aggs=res.aggregations[vm.config.primaryFacet];scope.scholarlyAggs[vm.config.primaryFacet]=aggs;scope.performOverTimeAnalysis()}).catch(function(err){console.warn(err);scope.handleError()})};scope.performOverTimeAnalysis=function(){if(!scope.scholarlyAggs[vm.config.primaryFacet]){console.log("Refusing to render historical analysis until aggs are available");$timeout(scope.retryOverTime,1e3);return}persistConfig();var agg={dates:{date_histogram:{field:"date_published_sort",interval:"year",min_doc_count:1,format:"yyyy"},aggregations:{sub:(0,_cloneDeep3.default)(_aggs2.default[vm.config.primaryFacet])||{terms:{field:vm.config.primaryFacet}}}}};if(vm.config.metric){agg.dates.aggregations.sub.terms.order=_defineProperty({},vm.config.metricAggregation==="avg"?"_count":"sum","desc");agg.dates.aggregations.sub.aggregations={sum:_defineProperty({},vm.config.metricAggregation,{field:vm.config.metric})}}var filterMap=(0,_cloneDeep3.default)(scope.filterMap);var additionalFilters=null;vm.config.limitWarning=false;if(filterMap[vm.config.primaryFacet]){}else if(scope.scholarlyAggs[vm.config.primaryFacet]){var buckets=scope.scholarlyAggs[vm.config.primaryFacet].buckets;var keys=buckets.slice(0,vm.config.limit).map(function(d){return d.key});additionalFilters=keys}else{vm.config.limitWarning=true}var request=(0,_cloneDeep3.default)(scope.request);request.scholarly_search.aggregations=agg;delete request.scholarly_search.from;delete request.scholarly_search.highlight;if(additionalFilters&&vm.config.primaryFacet!=="is_open_access"){var field=(0,_get3.default)(_aggs2.default[vm.config.primaryFacet],"terms.field")||vm.config.primaryFacet;request.scholarly_search.query.bool.filter.push({terms:_defineProperty({},field,additionalFilters)})}var filters=request.scholarly_search.query.bool.filter;var yearFilter=filters.filter(function(d){return d.range&&d.range.year_published}).pop();if(!yearFilter){request.scholarly_search.query.bool.filter.push({range:{year_published:{gte:1950}}})}var promise=ScholarService.search(request);$q.when(promise).then(function(res){vm.loading=false;vm.analysisReady=true;var buckets=res.aggregations.dates.buckets;vm.historicalData=buckets.reduce(function(arr,bucket){var a=arr.concat(bucket.sub.buckets.map(function(item){return{color:item.key,label:bucket.key_as_string,value:vm.config.metric?item.sum.value:item.doc_count}}));return a},[]);vm.datesExtent=d3.extent(vm.historicalData.map(function(d){return d.label}));if(vm.config.limit&&scope.scholarlyAggs[vm.config.primaryFacet]){var map=scope.filterMap[vm.config.primaryFacet]||{};var _keys=_.keys(map).filter(function(k){return map[k]});if(_keys.length){vm.historicalData=vm.historicalData.filter(function(d){return _keys.includes(d.color)})}else{var _keys2=scope.scholarlyAggs[vm.config.primaryFacet].buckets.slice(0,vm.config.limit).map(function(d){return d.key});vm.historicalData=vm.historicalData.filter(function(d){return _keys2.includes(d.color)})}}var formatter=_facetFormatters2.default[vm.config.primaryFacet];if(formatter){vm.historicalData.forEach(function(d){d.color=formatter(d.color)})}initialise();scope.renderHistoricalAnalysisChart()}).catch(function(err){scope.handleError(err)})};scope._getFieldBasedOnAggregation=function(){if(vm.config.metric==="citing-patents"){return"referenced_by_patent.lens_id_num"}else if(vm.config.metric==="citing-scholarly"){return"referenced_by"}else{return""}};var initialise=function initialise(){if(!scope.initialised){scope.initialised=true;scope.analysisQueue++}};scope.performBasicAnalysis=function(){if(vm.config.basicChartType==="map"&&!_.includes(mapKeys,vm.config.primaryFacet)){vm.config.basicChartType="bar-chart"}if(vm.config.basicChartType==="logo-grid"&&!_.includes(logoGridKeys,vm.config.primaryFacet)){vm.config.basicChartType="bar-chart"}var agg=_defineProperty({},vm.config.primaryFacet,(0,_cloneDeep3.default)(_aggs2.default[vm.config.primaryFacet])||{terms:{field:vm.config.primaryFacet}});agg[vm.config.primaryFacet].terms.size=vm.config.limit||100;if(_.includes(mapKeys,vm.config.primaryFacet)&&vm.config.basicChartType==="map"){agg[vm.config.primaryFacet].terms.size=200}if(vm.config.metric){var field=scope._getFieldBasedOnAggregation();agg[vm.config.primaryFacet].terms.order=_defineProperty({},vm.config.metricAggregation==="avg"?"_count":"sum","desc");agg[vm.config.primaryFacet].aggregations={};agg[vm.config.primaryFacet].aggregations.sum=_defineProperty({},vm.config.metricAggregation,{field:field})}if(vm.config.showMissingValues&&vm.config.primaryFacet!=="is_open_access"){agg[vm.config.primaryFacet].terms.missing="Missing"}var request=scope.request;request.scholarly_search.aggregations=agg;delete request.scholarly_search.from;delete request.scholarly_search.highlight;var promise=ScholarService.search(request);$q.when(promise).then(function(res){vm.loading=false;vm.analysisReady=true;var formatter=_facetFormatters2.default[vm.config.primaryFacet];var _res$aggregations$vm$=res.aggregations[vm.config.primaryFacet],buckets=_res$aggregations$vm$.buckets,sum_other_doc_count=_res$aggregations$vm$.sum_other_doc_count;vm.basicData=buckets.map(function(d){return{key:vm.config.primaryFacet,label:formatter?formatter(d.key):d.key,value:vm.config.metric?d.sum.value:d.doc_count}});if(vm.config.groupOtherValues){vm.basicData.push({key:vm.config.primaryFacet,label:"Other",value:sum_other_doc_count})}mapCounts();initialise()}).catch(function(err){scope.handleError(err)})};var mapCounts=function mapCounts(){if(_.includes(mapKeys,vm.config.primaryFacet)){vm.map={counts:{}};vm.basicData.forEach(function(_ref){var label=_ref.label,value=_ref.value;var name=(0,_get3.default)(IsoCountries[label],"name")||label;vm.map.counts[name]=value})}};scope.performCitationComparisonAnalysis=function(){var agg={scatter:{terms:{field:(0,_get3.default)(_aggs2.default[vm.config.primaryFacet],"terms.field")||vm.config.primaryFacet,size:vm.config.limit||100,order:_defineProperty({},vm.config.scatterPlotSort,"desc")},aggs:{referenced_by_count:{cardinality:{field:"referenced_by"}},referenced_by_patent_count:{cardinality:{field:"referenced_by_patent.lens_id_num"}}}}};var request=(0,_cloneDeep3.default)(scope.request);request.scholarly_search.aggregations=agg;delete request.scholarly_search.from;delete request.scholarly_search.highlight;var promise=ScholarService.search(request);$q.when(promise).then(function(res){vm.loading=false;vm.analysisReady=true;vm.scatterPlotData=res.aggregations.scatter.buckets.map(function(d){return{doc_count:d.doc_count,key:d.key,referenced_by_count:d.referenced_by_count.value,referenced_by_patent_count:d.referenced_by_patent_count.value}});scope.renderScatterPlot();initialise()}).catch(function(err){scope.handleError(err)})};scope.performScholarlyCitationComparisonAnalysis=function(){var articleScatterKeys=_.uniq(["record_lens_id","title","year_published",vm.config.scholarArticleScatter.color.field,vm.config.scholarArticleScatter.x.field,vm.config.scholarArticleScatter.y.field]);var request=(0,_cloneDeep3.default)(scope.request);delete request.scholarly_search.from;delete request.scholarly_search.highlight;request.scholarly_search.size=vm.config.limit||100;var sort=_ArticleSorts2.default[vm.config.scholarArticleScatter.sort];var order=sort.orderByReverse?"asc":"desc";request.scholarly_search.sort=[sort.multi||_defineProperty({},sort.key,{order:order})];request.scholarly_search._source={includes:articleScatterKeys};var promise=ScholarService.search(request);$q.when(promise).then(function(res){vm.loading=false;vm.analysisReady=true;if(vm.config.view==="article-scatter"){vm.articleScatterData=res.hits.hits.map(function(d){var o={};articleScatterKeys.forEach(function(k){var v=(0,_get3.default)(d,k);if(_facetFormatters2.default[k]){v=_facetFormatters2.default[k](v)}(0,_set3.default)(o,k,v)});o.year_published=o.year_published+"";return o}).filter(function(d){return d.year_published!=="undefined"});scope.renderArticleScatterPlot();initialise()}}).catch(function(err){scope.handleError(err)})};scope.performTargetedAnalysis=function(){var agg=_defineProperty({},vm.config.primaryFacet,(0,_cloneDeep3.default)(_aggs2.default[vm.config.primaryFacet])||{terms:{field:vm.config.primaryFacet}});agg[vm.config.primaryFacet].terms.size=vm.config.limit||10;var field=scope._getFieldBasedOnAggregation();agg[vm.config.primaryFacet].aggregations=_defineProperty({},vm.config.secondaryFacet,(0,_cloneDeep3.default)(_aggs2.default[vm.config.secondaryFacet])||{terms:{field:vm.config.secondaryFacet}});if(!agg[vm.config.primaryFacet].aggregations[vm.config.secondaryFacet]){console.warn("bailing");return}agg[vm.config.primaryFacet].aggregations[vm.config.secondaryFacet].terms.size=vm.config.secondaryFacetLimit||10;if(vm.config.metric){agg[vm.config.primaryFacet].terms.order=_defineProperty({},vm.config.metricAggregation==="avg"?"_count":"sum","desc");agg[vm.config.primaryFacet].aggregations.sum=_defineProperty({},vm.config.metricAggregation,{field:field});agg[vm.config.primaryFacet].aggregations[vm.config.secondaryFacet].terms.order=_defineProperty({},vm.config.metricAggregation==="avg"?"_count":"sum","desc");agg[vm.config.primaryFacet].aggregations[vm.config.secondaryFacet].aggregations={sum:_defineProperty({},vm.config.metricAggregation,{field:field})}}var request=(0,_cloneDeep3.default)(scope.request);request.scholarly_search.aggregations=agg;delete request.scholarly_search.from;delete request.scholarly_search.highlight;var promise=ScholarService.search(request);$q.when(promise).then(function(res){vm.loading=false;vm.analysisReady=true;var primaryFormatter=_facetFormatters2.default[vm.config.primaryFacet];var secondaryFormatter=_facetFormatters2.default[vm.config.secondaryFacet];var buckets=res.aggregations[vm.config.primaryFacet].buckets;vm.groupedBarChartData=buckets.reduce(function(arr,bucket){return arr.concat(bucket[vm.config.secondaryFacet].buckets.map(function(item){return{label:secondaryFormatter?secondaryFormatter(item.key):item.key,color:primaryFormatter?primaryFormatter(bucket.key):bucket.key,value:vm.config.metric?item.sum.value:item.doc_count}}))},[]);scope.renderBarCharts();initialise()}).catch(function(err){scope.handleError(err)})};scope.performCitingPatentFacets=function(){if(!scope.scholarlySearchId){$timeout(scope.performCitingPatentScatter,1e3);return}var promise=PatentService.facets({scholarlySearchId:scope.scholarlySearchId,facets:vm.config.primaryFacet,facet_size:vm.config.limit});$q.when(promise).then(function(facets){if(scope.metrics&&scope.metrics["Works Cited by Patents"]>5e4){vm.citingPatentsCapped=true}var data=facets[vm.config.primaryFacet];vm.basicData=_.keys(data).map(function(k){return{label:data[k].displayName||k,value:data[k].count}}).sort(function(a,b){return b.value-a.value});mapCounts();vm.loading=false;vm.analysisReady=true;initialise()})};scope.performCitingPatentScatter=function(){if(!scope.scholarlySearchId){$timeout(scope.performCitingPatentScatter,1e3);return}vm.patentScatterSpec=null;var sort=vm.config.citingPatentScatter.sort;var returnFields=_.uniq(["lensId","title","filingDate",vm.config.citingPatentScatter.x.field,vm.config.citingPatentScatter.y.field,vm.config.citingPatentScatter.color.field,vm.config.citingPatentScatter.size.field]);var promise=PatentService.search({f:true,d:sort[0],s:sort.slice(1),json:1,n:vm.config.limit||100,scholarlySearchId:scope.scholarlySearchId,returnFields:returnFields.join(",")});$q.when(promise).then(function(res){vm.citingPatentsCapped=res.joinedQueryStats.SCHOLAR.capped;vm.patentScatterData=res.result.hits;vm.loading=false;vm.analysisReady=true;scope.renderPatentScatterChart();initialise()}).catch(function(err){scope.handleError(err)})};scope.submit=function(){persistConfig();if(!vm.config.limit){vm.config.limit=10}scope._reset();vm.loading=true;if(vm.config.view==="over-time"){scope.performOverTimeAnalysis()}else if(vm.config.view==="patent-facets"){scope.performCitingPatentFacets()}else if(vm.config.view==="scatter-plot"){scope.performCitationComparisonAnalysis()}else if(vm.config.view==="basic"){scope.performBasicAnalysis()}else if(vm.config.view==="x-by-y"){scope.performTargetedAnalysis()}else if(vm.config.view==="article-scatter"){scope.performScholarlyCitationComparisonAnalysis()}else if(vm.config.view==="patent-scatter"){scope.performCitingPatentScatter()}else{console.warn("Unknown view:",vm.config.view)}};scope.switchSubAnalysis=function(){var parent=vm.config.primaryFacet;vm.config.primaryFacet=vm.config.secondaryFacet;vm.config.secondaryFacet=parent;scope.submit()};scope.switchScholarScatterAxes=function(){var x=vm.config.scholarArticleScatter.x.field;vm.config.scholarArticleScatter.x={field:vm.config.scholarArticleScatter.y.field};vm.config.scholarArticleScatter.y={field:x};scope.submit()};scope.switchPatentScatterAxes=function(){var x=vm.config.citingPatentScatter.x.field;vm.config.citingPatentScatter.x={field:vm.config.citingPatentScatter.y.field};vm.config.citingPatentScatter.y={field:x};scope.renderPatentScatterChart()};scope.renderScatterPlot=function(){persistConfig();var colourScheme=vm.config.colourScheme;if(vm.config.colourScheme==="auto"){colourScheme="plasma"}vm.scatterPlotSpec=(0,_ScatterPlotSpec2.default)({values:vm.scatterPlotData,scale:vm.config.scaleType,keyTitle:vm.fieldMap[vm.config.primaryFacet].label,colourScheme:colourScheme,width:getWidth(),displayLabels:vm.config.displayScatterLabels})};var persistConfig=function persistConfig(){configKeys.forEach(function(k){scope.config[k]=vm.config[k]});if(vm.config.view!=="scatter-plot"){delete scope.config.scatterPlotSort}if(vm.config.view!=="article-scatter"){delete scope.config.scholarArticleScatter}if(vm.config.view!=="patent-scatter"){delete scope.config.citingPatentScatter}if(vm.config.view!=="over-time"){delete scope.config.overTimeMark}if(vm.config.view!=="x-by-y"){delete scope.config.secondaryFacet;delete scope.config.secondaryFacetLimit;delete scope.config.barChartType}if(vm.config.view!=="basic"&&vm.config.view!=="patent-facets"){delete scope.config.basicChartType;delete scope.config.flip;delete scope.config.groupOtherValues;delete scope.config.showMissingValues}if(vm.config.colourScheme==="auto"){delete scope.config.colourScheme}if(!vm.config.title){delete scope.config.title}if(!vm.config.annotation){delete scope.config.annotation}$rootScope.$broadcast("PERSIST_ANALYSIS_ITEMS")};scope.persistConfig=persistConfig;scope.renderArticleScatterPlot=function(){if(!vm.articleScatterData){return}persistConfig();vm.articleScatterZeros={patents:vm.articleScatterData.filter(function(d){return d.referenced_by_patent_count===0}).length,articles:vm.articleScatterData.filter(function(d){return d.referenced_by_count===0}).length};var colourScheme=vm.config.colourScheme;if(colourScheme==="auto"){if((0,_getScholarFieldType.getScholarFieldType)(vm.config.scholarArticleScatter.color.field)==="quantitative"){colourScheme="viridis"}else{var domain=_.uniq(vm.articleScatterData.map(function(d){return d[vm.config.scholarArticleScatter.color.field]}));if(domain.length<=5){colourScheme="tableau10"}else{colourScheme="category20c"}}}vm.articleScatterPlotSpec=(0,_ArticleScatterSpec2.default)({data:vm.articleScatterData,width:getWidth(),scaleType:vm.config.scaleType,displayLabels:vm.config.displayScatterLabels,x:{field:vm.config.scholarArticleScatter.x.field,type:(0,_getScholarFieldType.getScholarFieldType)(vm.config.scholarArticleScatter.x.field),axis:{title:(0,_get3.default)(fieldMap[vm.config.scholarArticleScatter.x.field],"label")||vm.config.scholarArticleScatter.x.field}},y:{field:vm.config.scholarArticleScatter.y.field,type:(0,_getScholarFieldType.getScholarFieldType)(vm.config.scholarArticleScatter.y.field),axis:{title:(0,_get3.default)(fieldMap[vm.config.scholarArticleScatter.y.field],"label")||vm.config.scholarArticleScatter.y.field}},colour:{field:vm.config.scholarArticleScatter.color.field,label:fieldMap[vm.config.scholarArticleScatter.color.field].label,type:(0,_getScholarFieldType.getScholarFieldType)(vm.config.scholarArticleScatter.color.field),scheme:colourScheme}})};scope.renderBarCharts=function(){if(!vm.groupedBarChartData){return}persistConfig();var data=vm.groupedBarChartData;var width=getWidth();var colourScale={range:{scheme:vm.config.colourScheme==="auto"?"category20c":vm.config.colourScheme}};if(vm.config.secondaryFacet==="open_access.colour"){colourScale=(0,_cloneDeep3.default)(vm.openAccessColourScale)}vm.stackedBarChartSpec=(0,_StackedBarChartSpec2.default)({values:data,width:width,xAxisLabel:"Document Count",yAxisLabel:vm.fieldMap[vm.config.primaryFacet].label,colourLabel:vm.fieldMap[vm.config.secondaryFacet].label,colourScale:colourScale,normalise:vm.config.normalise});vm.groupedBarChartSpec=(0,_GroupedBarChartSpec2.default)({width:width,data:data,colourScale:colourScale,primaryLabel:vm.fieldMap[vm.config.primaryFacet].label,secondaryLabel:vm.fieldMap[vm.config.secondaryFacet].label,title:vm.fieldMap[vm.config.secondaryFacet].label+" by "+vm.fieldMap[vm.config.primaryFacet].label,displayLegend:false,alternateColours:vm.config.alternateColours})};scope.renderPatentScatterChart=function(){if(!vm.patentScatterData){return}persistConfig();vm.patentScatterSpec=null;vm.config.citingPatentScatter.x.type=(0,_getPatentFieldType.getPatentFieldType)(vm.config.citingPatentScatter.x.field);vm.config.citingPatentScatter.y.type=(0,_getPatentFieldType.getPatentFieldType)(vm.config.citingPatentScatter.y.field);vm.config.citingPatentScatter.color.type=(0,_getPatentFieldType.getPatentFieldType)(vm.config.citingPatentScatter.color.field);vm.config.citingPatentScatter.size.type=(0,_getPatentFieldType.getPatentFieldType)(vm.config.citingPatentScatter.size.field);vm.config.citingPatentScatter.x.title=citingPatentFieldsMap[vm.config.citingPatentScatter.x.field].label;vm.config.citingPatentScatter.y.title=citingPatentFieldsMap[vm.config.citingPatentScatter.y.field].label;vm.config.citingPatentScatter.color.title=citingPatentFieldsMap[vm.config.citingPatentScatter.color.field].label;if(vm.config.citingPatentScatter.size.field){vm.config.citingPatentScatter.size.title=citingPatentFieldsMap[vm.config.citingPatentScatter.size.field].label}var colourScheme=vm.config.colourScheme;if(colourScheme==="auto"){if(vm.config.citingPatentScatter.color.type==="quantitative"){colourScheme="viridis"}else{var domain=_.uniq(vm.patentScatterData.map(function(d){return d[vm.config.citingPatentScatter.color.field]}));if(domain.length<=5){colourScheme="tableau10"}else{colourScheme="category20c"}}}$timeout(function(){vm.patentScatterSpec=(0,_PatentScatterSpec2.default)({data:vm.patentScatterData,colourScheme:colourScheme,width:getWidth(),scale:vm.config.scaleType,x:vm.config.citingPatentScatter.x,y:vm.config.citingPatentScatter.y,color:vm.config.citingPatentScatter.color,size:vm.config.citingPatentScatter.size,displayLabels:vm.config.displayScatterLabels,mark:vm.config.citingPatentScatter.mark||"circle"})})};scope.renderHistoricalAnalysisChart=function(){persistConfig();if(!vm.historicalData){console.warn("Attempting to render historical analysis with no data. aborting...");return}if(vm.config.primaryFacet==="open_access.colour"){vm.config.overTimeColourScale=(0,_cloneDeep3.default)(vm.openAccessColourScale)}else{var scheme=vm.config.colourScheme;if(scheme==="auto"){var numberOfSeries=_.uniq(vm.historicalData.map(function(d){return d.color})).length;vm.numberOfSeries=numberOfSeries;if(numberOfSeries<=5){scheme="tableau10"}else{scheme="category20c"}}vm.config.overTimeColourScale={range:{scheme:scheme}}}scope.historicalAnalysisSpec=(0,_HistoricalAnalysisSpec.HistoricalAnalysisSpec)({width:getWidth(),data:vm.historicalData,mark:vm.config.overTimeMark,yAxisLabel:"Document Count",colourAxisLabel:vm.fieldMap[vm.config.primaryFacet].label,colourScale:vm.config.overTimeColourScale})};scope.handleError=function(err){console.warn(err);vm.loading=false;vm.error=err.statusText||err};scope.selfDestruct=function(){$rootScope.$broadcast("REMOVE_ANALYSIS_ITEM",scope.index)};scope.quantitativeFieldFilter=function(d){return(0,_getPatentFieldType.getPatentFieldType)(d.camelKey)==="quantitative"||!d.camelKey};scope.patentColourFieldFilter=function(d){var keys=["docType","kindCode","familySize","citedByPatentCount","simpleFamilySize","seqExists","seqCount","jurisdiction"];return _.includes(keys,d.camelKey)};scope.changeDisplayLabels=function(){if(vm.config.view==="article-scatter"){scope.renderArticleScatterPlot()}else if(vm.config.view==="patent-scatter"){scope.renderPatentScatterChart()}else{scope.renderScatterPlot()}};scope._clickStackedBarChart=function(d){scope.clickStackedBarChart(vm.config.primaryFacet,d)};scope._clickGroupedBarChart=function(d){scope.clickGroupedBarChart(vm.config.secondaryFacet,d)};scope.clickPatentScatterPoint=function(d){if(d.lensId){vm.clickedPatent=d;scope.$digest()}};scope.clickArticleScatterPoint=function(d){if(d.record_lens_id){vm.clickedArticle=d;scope.$digest()}};scope.clickWordCloud=function(_ref3){var data=_ref3.data;var key=data.key,label=data.label;scope.addFilter(key,label)};scope.clickScatterPlot=function(d){if(d.key){scope.addFilter(vm.config.primaryFacet,d.key);document.getElementById("vg-tooltip-element").remove()}};scope.clickLogoGrid=function(k,v){console.log(k,v);scope.addFilter(k,v)};scope.clickApplicantLogoGrid=function(k,v){var params=_defineProperty({scholarlySearchId:scope.scholarlySearchId},k,v.toUpperCase());window.location="/lens/search?"+$.param(params)};scope.clickCountry=function(d){if(_.isString(d)){var k=vm.config.primaryFacet==="source.country"?d:IsoCountriesNameLookup[d];scope.addFilter(vm.config.primaryFacet,k)}};scope.export=function(){var ext=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"png";vm.vegaView.toImageURL(ext).then(function(url){var title=vm.config.title?vm.config.title.replace(/[\.\/]/g,""):"Lens Analysis Export";var link=document.createElement("a");link.setAttribute("href",url);link.setAttribute("target","_blank");link.setAttribute("download",title+"."+ext);link.dispatchEvent(new MouseEvent("click"))}).catch(function(error){console.warn(error)})};scope.viewSource=function(){console.log(vm.vegaSpec);vm.configClone=JSON.stringify(scope.config,null,2);vm.vegaSpecRaw=JSON.stringify(vm.vegaSpec,null,2);vm.vegaSpecRawData=JSON.stringify(vm.vegaSpec.data.values,null,2);vm.viewSource="data"};scope.facetChange=function(){if(scope.config.sample&&scope.config.title){vm.config.title="";vm.config.annotation="";scope.config.sample=false}};var render=_.debounce(function(){if(scope.queued){console.warn("queued");return}if(vm.config.view==="article-scatter"){scope.renderArticleScatterPlot()}else if(vm.config.view==="over-time"){scope.renderHistoricalAnalysisChart()}else if(vm.config.view==="x-by-y"){scope.renderBarCharts()}else if(vm.config.view==="patent-scatter"){scope.renderPatentScatterChart()}else if(vm.config.view==="scatter-plot"){scope.renderScatterPlot()}},500);$(window).resize(render);$rootScope.$on("SIDE_TAB_CHANGED",render);$rootScope.$on("REFRESH_ANALYSIS_VISUALISATIONS",render);var submit=_.debounce(scope.submit,100);if(!scope.queued){submit()}scope.$watch("queued",function(v){if(!v){submit()}})}}}]))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(_ref){var data=_ref.data,width=_ref.width,scaleType=_ref.scaleType,colour=_ref.colour,x=_ref.x,y=_ref.y,displayLabels=_ref.displayLabels;var fields=[x.field,y.field];var citationFields=["referenced_by_patent_count","referenced_by_count"];var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",transform:scaleType==="log"&&_.intersection(fields,citationFields).length?[{filter:{field:"referenced_by_patent_count",gt:0}},{filter:{field:"referenced_by_count",gt:0}}]:null,selection:{grid:{type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}},vconcat:[{encoding:{x:{field:x.field,type:x.type,axis:window.vegaLegend({title:x.axis.title,labelFontSize:10}),scale:{type:x.type==="temporal"?"time":scaleType}},y:{field:y.field,type:y.type,sort:{field:x.field,order:"descending"},axis:window.vegaLegend({title:y.axis.title,labelFontSize:10}),scale:{type:scaleType}}},transform:[{filter:{selection:"brush"}}],layer:[{selection:{grid:{type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}},width:width-90,height:width/3,mark:{type:"circle",size:200,cursor:"pointer"},encoding:{color:{field:colour.field,type:colour.type||"ordinal",axis:window.vegaLegend({title:colour.label,labelFontSize:10}),scale:{range:{scheme:colour.scheme||"category20c"}}},tooltip:[{field:"title",type:"nominal",axis:{title:"Title of Scholarly Work"}},{field:colour.field,type:colour.type,axis:{title:colour.label}},{field:x.field,type:x.type,axis:{title:x.axis.title}},{field:y.field,type:y.type,axis:{title:y.axis.title}}]}}]},{width:width-90,height:100,mark:"bar",selection:{brush:{encodings:["x"],type:"interval"}},encoding:{x:{field:"year_published",type:"temporal",axis:window.vegaLegend({title:"Year Published",labelFontSize:10})},y:{aggregate:"count",type:"quantitative",axis:window.vegaLegend({title:"Scholarly Works",labelFontSize:10})},color:colour.type==="quantitative"?null:{field:colour.field,type:"nominal",axis:{title:colour.label},legend:window.vegaLegend({orient:"bottom",columns:2,columnPadding:10,rowPadding:1})}}}],data:{values:data,format:{parse:{year_published:"date: '%Y'"}}}};if(displayLabels){spec.vconcat[0].layer.push({mark:{type:"text",dy:20,limit:200},encoding:{text:{field:"title",type:"nominal"}}})}return spec}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _orderBy2=__webpack_require__(522);var _orderBy3=_interopRequireDefault(_orderBy2);var _groupBy2=__webpack_require__(528);var _groupBy3=_interopRequireDefault(_groupBy2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(_ref){var width=_ref.width,data=_ref.data,colourScale=_ref.colourScale,primaryLabel=_ref.primaryLabel,secondaryLabel=_ref.secondaryLabel,displayLegend=_ref.displayLegend,alternateColours=_ref.alternateColours,title=_ref.title;var max=_.max(data,function(d){return d.value});var color=data[0].color;var length=data.filter(function(d){return d.color===color}).length;data=(0,_orderBy3.default)(data,["color","value"],["asc","desc"]);_.values((0,_groupBy3.default)(data,function(d){return d.color})).forEach(function(arr){arr.forEach(function(d,i){d.index=i})});var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",facet:{row:{field:"color",type:"nominal",sort:{op:"sum",field:"value",order:"descending"},header:window.vegaLegend({labelLimit:length<10?100:200,title:null,labelFontSize:14,labelColor:"#0f4965"})}},spec:{autosize:"fit",width:width-220,mark:{type:"bar",cursor:"pointer"},encoding:{x:{field:"value",type:"quantitative",format:",",scale:{domain:[0,max.value]},axis:window.vegaLegend({title:"Document Count",labelFontSize:10})},y:{field:"label",type:"nominal",sort:{field:"value"},axis:window.vegaLegend({title:null})},color:{field:"label",type:"nominal",legend:displayLegend?{}:false,axis:window.vegaLegend({title:secondaryLabel,titlePadding:10,labelLimit:140}),scale:colourScale||{range:{scheme:"category20c"}}},tooltip:[{field:"value",type:"quantitative",axis:{title:"Document Count"}},{field:"color",type:"nominal",axis:{title:primaryLabel}},{field:"label",type:"nominal",axis:{title:secondaryLabel}}]}},resolve:{scale:{y:"independent"}},data:{values:data}};if(alternateColours){spec.spec.encoding.color.field="index";spec.spec.encoding.color.type="nominal";spec.spec.encoding.color.scale={range:{scheme:"paired"}}}return spec}},function(module,exports,__webpack_require__){var baseOrderBy=__webpack_require__(523),isArray=__webpack_require__(6);function orderBy(collection,iteratees,orders,guard){if(collection==null){return[]}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}orders=guard?undefined:orders;if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseOrderBy(collection,iteratees,orders)}module.exports=orderBy},function(module,exports,__webpack_require__){var arrayMap=__webpack_require__(53),baseIteratee=__webpack_require__(160),baseMap=__webpack_require__(524),baseSortBy=__webpack_require__(525),baseUnary=__webpack_require__(125),compareMultiple=__webpack_require__(526),identity=__webpack_require__(103);function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(baseIteratee));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}module.exports=baseOrderBy},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(152),isArrayLike=__webpack_require__(31);function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}module.exports=baseMap},function(module,exports){function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}module.exports=baseSortBy},function(module,exports,__webpack_require__){var compareAscending=__webpack_require__(527);function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-other.index}module.exports=compareMultiple},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(19);function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1}}return 0}module.exports=compareAscending},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(42),createAggregator=__webpack_require__(529);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{baseAssignValue(result,key,[value])}});module.exports=groupBy},function(module,exports,__webpack_require__){var arrayAggregator=__webpack_require__(530),baseAggregator=__webpack_require__(531),baseIteratee=__webpack_require__(160),isArray=__webpack_require__(6);function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}module.exports=createAggregator},function(module,exports){function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}module.exports=arrayAggregator},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(152);function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)});return accumulator}module.exports=baseAggregator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(_ref){var values=_ref.values,width=_ref.width,scale=_ref.scale,keyTitle=_ref.keyTitle,displayLabels=_ref.displayLabels,colourScheme=_ref.colourScheme;var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",autosize:"fit",width:width-30,transform:[{calculate:"datum.referenced_by_patent_count / datum.doc_count",as:"average_patent_citations"}],selection:{grid:{type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}},encoding:{x:{field:"referenced_by_patent_count",type:"quantitative",axis:{title:"Citing Patents"},scale:{type:scale||"sqrt"}},y:{field:"referenced_by_count",type:"quantitative",axis:{title:"Citing Scholarly Works"},scale:{type:scale||"sqrt"}}},layer:[{selection:{grid:{type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}},width:width,height:width/2,mark:{type:"circle",size:200,cursor:"pointer"},encoding:{color:{field:"doc_count",type:"quantitative",axis:{title:"Document Count"},scale:{range:{scheme:colourScheme||"magma"}}},tooltip:[{field:"key",type:"nominal",axis:{title:keyTitle}},{field:"doc_count",type:"quantitative",format:",",axis:{title:"Number of Publications"}},{field:"referenced_by_patent_count",type:"quantitative",format:",",axis:{title:"Citing Patents"}},{field:"referenced_by_count",type:"quantitative",format:",",axis:{title:"Citing Scholarly Works"}}]}}],data:{values:values}};if(displayLabels){spec.layer.push({mark:{type:"text",dy:-10},encoding:{text:{field:"key",type:"nominal"}}})}return spec}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(_ref){var values=_ref.values,width=_ref.width,xAxisLabel=_ref.xAxisLabel,yAxisLabel=_ref.yAxisLabel,colourScale=_ref.colourScale,colourLabel=_ref.colourLabel,normalise=_ref.normalise;var length=_.uniq(values.map(function(d){return d.color})).length;var height=length*35;return{$schema:"https://vega.github.io/schema/vega-lite/v3.json",mark:{type:"bar",cursor:"pointer"},width:width-30,height:height,autosize:"fit",padding:0,encoding:{x:{field:"value",type:"quantitative",axis:window.vegaLegend({title:xAxisLabel,labelFontSize:10}),stack:normalise?"normalize":"zero"},y:{field:"color",type:"ordinal",sort:{op:"sum",field:"value",order:"descending"},axis:window.vegaLegend({title:yAxisLabel,labelLimit:140,titlePadding:10}),scale:{rangeStep:20}},color:{field:"label",type:"nominal",axis:{title:colourLabel},legend:window.vegaLegend({orient:"bottom",labelLimit:120}),scale:colourScale||{range:{scheme:"category20c"}}}},data:{values:values}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var getPatentFieldType=exports.getPatentFieldType=function getPatentFieldType(k){var quantitative=["familySize","simpleFamilySize","simpleFamilySize","citedByPatentCount","seqCount","score"];var temporal=["filingDate","publicationDate","earliestPriorityDate"];if(quantitative.includes(k)){return"quantitative"}else if(temporal.includes(k)){return"temporal"}else{return"nominal"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var getScholarFieldType=exports.getScholarFieldType=function getScholarFieldType(k){var quantitative=["referenced_by_count","referenced_by_patent_count"];var temporal=["year_published"];if(quantitative.includes(k)){return"quantitative"}else if(temporal.includes(k)){return"temporal"}else{return"ordinal"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var HistoricalAnalysisSpec=exports.HistoricalAnalysisSpec=function HistoricalAnalysisSpec(_ref){var data=_ref.data,width=_ref.width,mark=_ref.mark,height=_ref.height,yAxisLabel=_ref.yAxisLabel,colourAxisLabel=_ref.colourAxisLabel,colourScale=_ref.colourScale,hidePoint=_ref.hidePoint;var d=new Date;var thisYear=d.getFullYear();var encoding={x:{field:"label",type:"temporal",timeUnit:"year",axis:window.vegaLegend({title:"Year Published",titlePadding:10,labelFontSize:10})},y:{field:"value",type:"quantitative",axis:window.vegaLegend({title:yAxisLabel||null,titlePadding:1,labelFontSize:10})},color:{field:"color",type:"nominal",axis:{title:colourAxisLabel||null},scale:colourScale||{range:{scheme:"category20c"}},legend:window.vegaLegend({orient:"bottom",columns:4,columnPadding:10,rowPadding:1,labelFontSize:12})}};var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",config:{bar:{}},autosize:"fit",width:width-35,height:height||Math.max(400,width/2.5),layer:[{mark:{type:mark||"line",point:hidePoint?null:{size:80},strokeDash:[6,4]},encoding:encoding,selection:{grid:{encodings:["x"],type:"interval",bind:"scales",zoom:"wheel![event.shiftKey]"}}},{transform:[{filter:{timeUnit:"year",field:"label",lt:thisYear-1}}],mark:{type:mark||"line",point:hidePoint?null:{size:80}},encoding:encoding}],data:{values:data}};if(mark==="circle"){spec.mark.size=200}return spec}},function(module,exports){module.exports='<div class="deep-analysis-item analysis-tour-4" ng-class="{\'has-error\': vm.error}">\n    <div class="panel panel-default" ng-class="{[\'annotation-position-\' + vm.config.annotationPosition]: true}">\n        <div class="panel-heading">\n            <div class="clearfix analysis-configuration-container">\n                <ul class="analysis-configuration-menu pull-right">\n                    <li class="configuration-menu-item" ng-class="{\'active\': vm.configMenu}" ng-click="vm.configMenu = vm.configMenu ? null : 1">\n                        <span>Settings</span>\n                        <em ng-class="{\'fa-chevron-up\': vm.configMenu, \'fa-chevron-down\': !vm.configMenu}" class="fa"></em>\n                    </li>\n                    <li class="configuration-menu-item text-center" ng-click="!vm.configMenu ? selfDestruct() : (vm.configMenu = null)" tooltip-title="Remove Panel">\n                        <em class="fa fa-times col-danger"></em>\n                    </li>\n                </ul>\n            </div>\n            <div ng-include="\'deep-analysis-item-title\'" class=""></div>\n        </div>\n        <div class="panel-body deep-analysis-item-panel-body">\n            <div class="deep-analysis-config-panel" ng-include="\'deep-analysis-config\'"></div>\n            <div class="deep-analysis-item-content" ng-include="\'deep-analysis-item-content\'"></div>\n        </div>\n        <div class="panel-footer" ng-class="{[\'annotation-hide-\' + vm.config.annotationDisplay]: true}">\n            <div ng-hide="vm.editAnnotation || vm.loading" class="annotation-display">\n                <em class="fa fa-edit pull-right" ng-click="vm.editAnnotation = !vm.editAnnotation"></em>\n\n                <div ng-if="!vm.config.annotation && !vm.editAnnotation"\n                    ng-click="vm.editAnnotation = true">\n                    <p ng-if="vm.config.view === \'x-by-y\'" class="p-annotation">\n                        This view allows you to view facets broken down by another facet. For example the top authors per institution or top journals per country, etc. Depending on your data,\n                        this might be better suited with either a grouped or stacked bar chart.\n                    </p>\n                    <p ng-if="vm.config.view === \'scatter-plot\'" class="p-annotation">\n                        This visualisation allows you to compare Patent vs Scholarly citations and identify outliers with unusual ratios of patent/scholar citations.\n                        The colour represents the number of publications.\n                        This can allow you to identify for example institutions which may not have published a lot of literature but which are performing well in terms of number of citations.\n                    </p>\n                    <p ng-if="vm.config.view === \'over-time\'" class="p-annotation">\n                        This chart shows <strong>{{vm.fieldMap[vm.config.primaryFacet].label}}</strong>\n                        over the period of {{vm.datesExtent[0]}} to {{vm.datesExtent[1]}} ranked by\n                        Document Count\n                        \x3c!-- <strong>{{vm.metricLabels[vm.config.metric] || \'Document Count\'}}</strong>. --\x3e\n                        <span ng-if="vm.datesExtent[0] === \'1950\'">\n                            By default dates before 1950 are not shown. Explicitly set a date range for your search to include dates before 1950.\n                        </span>\n                        <span ng-if="!vm.filterExtent.length && !vm.config.annotation">\n                            Use your mouse wheel to zoom on a time period and limit the main view and allow further filtering your search.\n                        </span>\n                    </p>\n                    <p ng-if="vm.config.view === \'article-scatter\'" class="p-annotation">\n                        This scatter plot represents the top 1,000 scholarly works for this search.\n                        All axis including size and colour can be changed via the chart config.\n                        Use your mouse wheel to zoom in and identify interesting scholarly works.\n                        Click a circle to view that patent.\n                    </p>\n                    <p ng-if="vm.config.view === \'patent-scatter\'" class="p-annotation">\n                        This scatter plot shows the top 1,000 Citing Patents for this Scholarly Works result set.\n                        All axis including size and colour can be changed via the chart config.\n                        Use your mouse wheel to zoom in and identify interesting patents.\n                        Click a circle to view that patent.\n                    </p>\n                </div>\n\n                <p class="p-annotation"\n                    ng-click="vm.editAnnotation = !vm.editAnnotation"\n                    ng-repeat="p in vm.config.annotation.split(\'\\n\') track by $index"\n                    ng-if="p">\n                    {{p}}\n                </p>\n            </div>\n            <form ng-if="vm.editAnnotation" class="annotation-display">\n                <label class="textarea">\n                    <textarea class="full"\n                        ng-model="vm.config.annotation"\n                    ></textarea>\n                </label>\n                <div class="inline-group">\n                    \x3c!--Annotation Alignment --\x3e\n                    <label class="select select-sm" style="margin-right: 5px;">\n                        <select ng-model="vm.config.annotationPosition">\n                            <option value="top">Position Top of Chart</option>\n                            <option selected value="">Position Bottom of Chart</option>\n                            \x3c!--<option value="left">Left of Chart</option>\n                            <option value="right">Right of Chart</option>--\x3e\n                        </select>\n                        <i></i>\n                    </label>\n                    <label class="checkbox" style="display: inline-block; float: none;">\n                        <input type="checkbox" ng-model="vm.config.annotationDisplay" name="displayAnnotation" value="displayOn" />\n                        <i></i>\n                        Hide Annotation\n                    </label>\n                </div>\n                <span class="btn btn-sm btn-pri" style="margin-bottom: 4px;" ng-click="vm.editAnnotation = false; persistConfig()">Save Annotation</span>\n            </form>\n        </div>\n    </div>\n\n    <div lens-modal visible="vm.viewSource">\n        <h3>View Source</h3>\n        <ul class="view-source-tabs">\n            <li class=""\n                ng-class="{active: vm.viewSource === \'data\'}"\n                ng-click="vm.viewSource = \'data\'"\n            >\n                Data only\n            </li>\n            <li class=""\n                ng-class="{active: vm.viewSource === \'spec\'}"\n                ng-click="vm.viewSource = \'spec\'"\n            >\n                Vega Spec\n                <em class="fa fa-info-circle link col-sec" tooltip-title="Vega-Lite is a high-level grammar of interactive graphics. It provides a concise JSON syntax for rapidly generating visualizations to support analysis"></em>\n            </li>\n            <li class=""\n                ng-class="{active: vm.viewSource === \'config\'}"\n                ng-click="vm.viewSource = \'config\'"\n            >\n                Lens Chart Config\n            </li>\n        </li>\n        <form>\n            <label class="textarea view-source-textarea" ng-if="vm.viewSource === \'config\'">\n                <textarea class="full" ng-model="vm.configClone" readonly></textarea>\n            </label>\n            <label class="textarea view-source-textarea" ng-if="vm.viewSource === \'spec\'">\n                <textarea class="full" ng-model="vm.vegaSpecRaw" readonly></textarea>\n            </label>\n            <label class="textarea view-source-textarea" ng-if="vm.viewSource === \'data\'">\n                <textarea class="full" ng-model="vm.vegaSpecRawData" readonly></textarea>\n            </label>\n        </form>\n        <div class="pull-right">\n            <a ng-click="vm.viewSource = false" class="btn btn-sm btn-danger">\n                Close\n            </a>\n        </div>\n    </div>\n\n    <div lens-modal size="sm" visible="vm.clickedPatent">\n        <h3>View Individual Patent</h3>\n        <p class="alert alert-info">\n            {{vm.clickedPatent.title}}\n        </p>\n        <div class="pull-right">\n            <a ng-click="vm.clickedPatent = false" class="btn btn-sm btn-danger-txt">\n                Cancel\n            </a>\n            <a ng-href="/lens/patent/{{vm.clickedPatent.lensId}}" class="btn btn-sm btn-pri">\n                View Patent\n            </a>\n        </div>\n    </div>\n\n    <div lens-modal size="sm" visible="vm.clickedArticle">\n        <h3>View Individual Scholarly Work</h3>\n        <p class="alert alert-info">\n            {{vm.clickedArticle.title}}\n        </p>\n        <div class="pull-right">\n            <a ng-click="vm.clickedArticle = false; document.body.classList.remove(\'analysis-report\')" class="btn btn-sm btn-danger-txt">\n                Cancel\n            </a>\n            <a ui-sref="article.main({id: vm.clickedArticle.record_lens_id})" class="btn btn-sm btn-pri">\n                View Scholarly Work\n            </a>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _luceneQueryParser=__webpack_require__(134);var _luceneQueryParser2=_interopRequireDefault(_luceneQueryParser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Fields=__webpack_require__(60);var allFieldKeys=Fields.map(function(d){return d.key});_app2.default.directive("lensQuery",function(){return{scope:{q:"<",result:"<",depth:"<",multiline:"<"},templateUrl:"query",link:function link(scope,element){var queryType=element.attr("query-type")||"scholarly";scope.validField=function(name){var fieldName=queryType==="patents"?name.toLowerCase():name;return _.includes(allFieldKeys,fieldName)};scope.formatTerm=function(s){var hasWhitespace=s.indexOf(" ")>=0;return hasWhitespace?'"'+s+'"':s};scope.formatField=function(k){var field=Fields.filter(function(d){return d.key===k}).pop();if(field){return field.label}return k};var update=function update(){if(scope.q){try{scope.containsNot=scope.q.indexOf("NOT ")>=0;if(scope.containsNot){throw new Error("Query string contains NOT clause, refusing to display")}scope.showQuery=true;scope.result=_luceneQueryParser2.default.parse(scope.q)}catch(err){scope.showQuery=false}}};scope.$watch("q",update);update()}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensDocPreview",[].concat(deps,[function(){return{template:__webpack_require__(540),scope:{images:"<"},link:function link(scope){console.log(scope.images);scope.vm={currentImage:(0,_get3.default)(scope.images,"[0].full")}}}}]))},function(module,exports){module.exports='<div class="doc-preview">\n    <img ng-src="{{vm.currentImage}}" alt="">\n\n    <ul>\n        <li ng-repeat="image in images | limitTo:5">\n            <img ng-src="{{image.thumb}}" alt="" ng-click="vm.currentImage = image.full">\n        </li>\n    </ul>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_app2.default.directive("lensExplorerWindow",["$window",function($window){return{scope:false,link:function link(scope,element){var escapeListener=function escapeListener(e){if(e.keyCode===27){hide();scope.$digest()}};var show=function show(){scope.visible=true;$("body").on("keyup",escapeListener);$("body").toggleClass("exp-window-active",true)};var hide=function hide(){var clearHash=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;scope.visible=false;$("body").off("keyup",escapeListener);$("body").toggleClass("exp-window-active",false);if(clearHash){$window.history.replaceState({},"","#")}};element.draggable({handle:".draggable-handle"});if($window.innerWidth>768){element.css({resize:"both",overflow:"hidden"})}scope.visible=false;scope.show=show;scope.hide=hide}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["PatentFamilyResource"];var IsoCountries=__webpack_require__(23);var IsoCountriesNameLookup=__webpack_require__(119);_app2.default.directive("lensFamilyMap",[].concat(deps,[function(PatentFamilyResource){return{template:__webpack_require__(543),scope:{familyId:"<",publicationKey:"<"},link:function link(scope){var vm=scope.vm={rawData:{},counts:{},tooltipData:{}};scope.family=PatentFamilyResource.get({familyId:scope.familyId},function(family){if(family.jurisdictionFacet){Object.keys(family.jurisdictionFacet.valueCounts).forEach(function(jurisdictionCode){var count=family.jurisdictionFacet.valueCounts[jurisdictionCode].count;var country=IsoCountries[jurisdictionCode];if(country){if(!vm.rawData["Individual jurisdictions"]){vm.rawData["Individual jurisdictions"]={total:0,countries:{},totalCountries:0}}vm.rawData["Individual jurisdictions"].total+=count;vm.rawData["Individual jurisdictions"].countries[country.name]=count;vm.rawData["Individual jurisdictions"].totalCountries++}var jurisdiction=window.jur_mapping[jurisdictionCode];if(jurisdiction&&jurisdiction.countries){vm.rawData[jurisdiction.name]={total:count,countries:{}};jurisdiction.countries.forEach(function(code){var country=IsoCountries[code];if(country){vm.rawData[jurisdiction.name].countries[country.name]=count}})}});vm.selectedGroup=_.keys(vm.rawData)[0];scope.selectGroup()}});scope.selectGroup=function(k){vm.counts=vm.rawData[vm.selectedGroup].countries};scope.onClickCountry=function(data){var countryCode=IsoCountriesNameLookup[data.name];var jurisdictions={};Object.keys(scope.family.jurisdictionFacet.valueCounts).forEach(function(jurisdictionCode){var count=scope.family.jurisdictionFacet.valueCounts[jurisdictionCode].count;if(countryCode===jurisdictionCode){jurisdictions[jurisdictionCode]={code:jurisdictionCode,name:data.name,count:count}}var jurisdiction=window.jur_mapping[jurisdictionCode];if(jurisdiction&&jurisdiction.countries){jurisdiction.countries.forEach(function(code){if(code===countryCode){jurisdictions[jurisdiction.name]={code:jurisdictionCode,name:jurisdiction.name,count:count}}})}});vm.clickedCountry={countryCode:countryCode,countryName:data.name,jurisdictions:jurisdictions};scope.$digest()}}}}]))},function(module,exports){module.exports='<div class="family-map">\n    <div lens-world-map\n        counts="vm.counts"\n        world-map-markers="[]"\n        country-tooltip="false"\n        on-click-country="onClickCountry"\n        tooltip-data="vm.tooltipData"\n    ></div>\n    <form class="family-map-legend">\n        <label class="radio" ng-repeat="(k, v) in vm.rawData">\n            <input type="radio" name="jurGroup" ng-model="vm.selectedGroup" ng-value="k" ng-change="selectGroup()">\n            <i></i>\n            <strong>{{k}}</strong>\n            <span>- {{v.total}} documents</span>\n            <span ng-if="k === \'Individual jurisdictions\'"> in {{v.totalCountries}} countries</span>\n        </label>\n    </form>\n    <div class="family-map-action"\n        ng-if="vm.clickedCountry"\n    >\n        <h4>\n            <span lens-flag country="vm.clickedCountry.countryCode"></span>\n            {{vm.clickedCountry.countryName}}\n        </h4>\n        <ul>\n            <li ng-repeat="(name, jurisdiction) in vm.clickedCountry.jurisdictions">\n                <a href="/lens/search/family/{{ publicationKey }}?j={{jurisdiction.code}}">\n                    View {{::jurisdiction.count}} documents in {{::jurisdiction.name}}\n                </a>\n            </li>\n        </ul>\n        \x3c!-- <pre>{{vm.clickedCountry | json}}</pre> --\x3e\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("fauxSelect",[function(){return{link:function link(scope,element){element.on("mousedown",function(e){e.preventDefault();this.blur();window.focus()})}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["SettingsService"];module.exports=_app2.default.directive("lensFavourites",[].concat(deps,[function(SettingsService){return{template:__webpack_require__(546),scope:{type:"<"},link:function link(scope){var vm=scope.vm={type:scope.type,items:[],loading:false,settings:SettingsService.local()||null};SettingsService.fetch().then(function(data){vm.loading=false;var items=data.favourites?data.favourites[vm.type]:[];vm.items=_.keys(items).filter(function(k){return items[k]})})}}}]))},function(module,exports){module.exports="<h2>{{'common.favourite' | message}} {{vm.type}}</h2>\n\n<div ng-repeat=\"item in vm.items\">\n    {{::item}}\n</div>\n"},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IsoCountries=__webpack_require__(23);var deps=[];var assetLocation=window.UI_CONFIG.assetLocation;_app2.default.directive("lensFlag",[].concat(deps,[function(){return{scope:{country:"<",jurisdiction:"<"},link:function link(scope,element){var render=function render(){if(!scope.country&&!scope.jurisdiction){element.empty();return}var match=void 0;if(scope.jurisdiction){match={code:scope.jurisdiction}}else{var values=_.values(IsoCountries);var term=scope.country.toLowerCase();var matches=values.filter(function(d){return d.code.toLowerCase()===term||d.name.toLowerCase()===term||d.alias&&d.alias.toLowerCase()===term});match=matches.pop()}if(match&&match.code){element.html('\n                    <span class="flag '+match.code.toLowerCase()+'">\n                        <img src="'+assetLocation+"/img/flags/"+match.code+'.png" alt="'+match.code+'">\n                    </span>\n                ')}else{element.empty()}};scope.$watch("country",render);render()}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensFocus",["$rootScope",function($rootScope){return{link:function link(scope,element,attrs){$rootScope.$on("focus:"+attrs.lensFocus,function(){_.defer(function(){return element.focus()})})}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _d=__webpack_require__(38);var d3=_interopRequireWildcard(_d);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensHeatmap",[function(){return{template:__webpack_require__(202),scope:{data:"<",domain:"<",autoDomain:"<",onClickItem:"<"},link:function link(scope,element,attrs){scope.orderBy=attrs.orderBy||"label";var render=_.debounce(function(){scope._domain=scope.domain||[0,3500,37500,75e3,15e4,5e5];if(scope.autoDomain){var max=_.max(scope.data.map(function(x){return x.value}));var min=_.min(scope.data.map(function(x){return x.value}));var step=Math.round(max/7);scope._domain=_.range(min/2,max,step)}scope.max=_.max(scope._domain);var background=d3.scaleLinear().domain(scope._domain).range(["#ffffff","#fff2c5","#ffe179","#ffa279","#fd6565","#e83131"]);var color=d3.scaleQuantile().domain(scope._domain).range(["#000000","#000000","#000000","#ffffff","#ffffff","#ffffff"]);scope.max=_.max(scope._domain);scope.fieldItemStyle=function(v){return{background:background(v),color:color(v)}};scope.$digest()},100);render();scope.$watch("domain",render);scope.clickItem=function(data){if(scope.onClickItem){scope.onClickItem.apply(scope.$parent.$ctrl||undefined,[{data:data}])}}}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalStorageService=__webpack_require__(7);var service=new LocalStorageService;var iconMap={"/search":"fa-search","/patent":"fa-file-o","/collection":"fa-folder-open-o","/user":"fa-dashboard"};var iconMapKeys=_.keys(iconMap);_app2.default.directive("lensHistory",function(){return{template:__webpack_require__(254),link:function link(scope){scope.history=service.get("history")||[];scope.clear=function(){service.set("history",[]);scope.history=[]};scope.icon=function(item){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=iconMapKeys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var k=_step.value;var match=item.location.match(k);if(match&&match.length){return iconMap[k]}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return"fa-history"}}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var embed=window.vegaEmbed;_app2.default.directive("lensHorizontalBarChart",["$timeout",function($timeout){return{template:'\n    <div>\n        <div class="horizontal-bar-chart"></div>\n    </div>\n    ',scope:{data:"<",options:"=?",axisLabel:"<",yAxisLabel:"<",elementClick:"<",noExport:"<",dynamicMargin:"<",maxValue:"<",colourScheme:"<",alternateColours:"<",flip:"<",height:"<",scaleType:"<",view:"=",rawSpec:"="},link:function link(scope,element,attrs){var render=function render(){var _encoding;scope.filterExtent=null;var el=element.find(".horizontal-bar-chart");var values=scope.data[0].values;values.sort(function(a,b){return b.value-a.value}).forEach(function(d,i){d.index=i});if(!values.length){return}var title=scope.data[0].key;el.empty();var width=element.width();if(width<0){console.warn("Refusing to render chart");return}var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",mark:{type:"bar",cursor:"pointer"},title:title,height:scope.height||(scope.flip?600:Math.max(100,values.length*20)),autosize:"fit",width:width-20,encoding:(_encoding={},_defineProperty(_encoding,scope.flip?"y":"x",{field:"value",type:"quantitative",format:",",axis:{title:scope.axisLabel||null,labelFontSize:10,titleFontSize:14,titleFont:"source_sans_proregular",titleFontWeight:"normal",labelFont:"source_sans_proregular",labelFontWeight:"normal",labelColor:"#666666",titleColor:"#0f4965"}}),_defineProperty(_encoding,scope.flip?"x":"y",{field:"label",type:"nominal",sort:{field:"value"},axis:{title:scope.yAxisLabel||null,labelFontSize:12,titleFontSize:14,titleFont:"source_sans_proregular",titleFontWeight:"normal",labelFont:"source_sans_proregular",labelFontWeight:"normal",labelColor:"#666666",titleColor:"#0f4965"}}),_defineProperty(_encoding,"color",{field:"value",legend:false,type:"quantitative",axis:{title:scope.axisLabel||null},scale:{range:{scheme:(scope.colourScheme==="auto"?"viridis":scope.colourScheme)||"spectral"}}}),_encoding),data:{values:values}};spec.encoding[scope.flip?"y":"x"].scale={type:scope.scaleType||"linear"};if(scope.alternateColours){spec.encoding.color.field="index";spec.encoding.color.type="ordinal";spec.encoding.color.scale={range:{scheme:"paired"}}}if(scope.maxValue){spec.encoding.x.scale={domain:[0,scope.maxValue]}}embed(el.get(0),spec,window.VEGA_EMBED_OPTS).then(function(_ref){var view=_ref.view,spec=_ref.spec;if(scope.rawSpec!==undefined){scope.rawSpec=spec}if(scope.view!==undefined){scope.view=view}view.addEventListener("click",function(event,item){if(item&&item.datum){console.log(item.datum);if(scope.elementClick){var _item$datum=item.datum,agg=_item$datum.agg,label=_item$datum.label,key=_item$datum.key;var data={key:agg||key,label:label};scope.elementClick({data:data})}}})})};var _render=_.debounce(render,200);$(window).resize(_render);scope.$watch("data",_render);scope.$watch("colourScheme",_render);scope.$watch("alternateColours",_render);scope.$watch("flip",_render);scope.$watch("scaleType",_render);_render()}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$timeout"];var SHOW_DELAY=150;var HIDE_DELAY=200;_app2.default.directive("lensHtmlTooltip",[].concat(deps,[function($timeout){return{link:function link(scope){scope.vm=scope.vm||{};var timeout=null;var clearTimeout=null;scope.setTootip=function(item,$event,offsetTop,extraData){scope.vm.tooltip=null;$timeout.cancel(timeout);$timeout.cancel(clearTimeout);var data=_.clone(item);if(extraData){_.assign(data,extraData)}timeout=$timeout(function(){scope.vm.tooltip=data;scope.setTootipPosition($event,offsetTop)},SHOW_DELAY)};scope.setTootipPosition=function($event,offsetTop){var target=$event.target;var offsetY=(0,_get3.default)(target,"offsetParent.clientHeight")||0;scope.vm.tooltipPosition={left:target.offsetLeft+target.offsetWidth/2-150,bottom:offsetY-target.offsetTop+5}};scope.keepTooltipOpen=function(){$timeout.cancel(clearTimeout)};scope.clearTooltip=function(){clearTimeout=$timeout(function(){scope.vm.tooltip=null},HIDE_DELAY)}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_app2.default.directive("htmlToPlaintext",function(){return{link:function link(scope,element){var text=element.text();element.text(text?String(text).replace(/<[^>]+>/gm,"").replace(/&nbsp;/g," "):"");if(element.show)element.show()}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("includeReplace",[function(){return{require:"ngInclude",restrict:"A",link:function link(scope,el,attrs){el.replaceWith(el.children())}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["NotesService"];_app2.default.directive("lensInlineNotes",[].concat(deps,[function(NotesService){return{template:__webpack_require__(255),transclude:true,scope:{section:"<"},link:function link(scope,element,attrs){var section=attrs.section;var _window$globalNotes=window.globalNotes,notes=_window$globalNotes.notes,key=_window$globalNotes.key;var sectionFilter=function sectionFilter(note){return note.scope===section.toUpperCase()};notes=notes.filter(sectionFilter);var visible=section.toLowerCase()===window.location.hash.slice(2);var vm={notes:notes,section:section,key:key,visible:visible};scope.vm=vm;scope.refresh=function(){NotesService.fetch(key,"PATENT").then(function(notes){scope.vm.notes=notes.filter(sectionFilter);$(".overallNoteCount").text(notes.length)})};scope.$on("REFRESH_NOTES",function(){scope.refresh()});scope.toggleVisible=function(e){e.preventDefault();scope.vm.visible=!scope.vm.visible};var deleteNoteId=void 0;scope.delete=function(id){vm.confirm=true;deleteNoteId=id};scope._delete=function(){var id=deleteNoteId;NotesService.delete(id);scope.vm.notes=scope.vm.notes.filter(function(note){return note.id!==id});vm.confirm=false}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_app2.default.directive("lensInstitutionDetails",["$http",function($http){return{template:__webpack_require__(256),replace:true,scope:{item:"<",headingOnly:"<",claimOwnership:"<",onClickRemove:"<"},link:function link(scope){scope.vm={claimOwnership:scope.claimOwnership};scope.claimOwnership=function(){$http.post("/lens/service/in4mlead/contact",{name:scope.vm.name,email:scope.vm.email,fileLinks:[],clob:"Claim Ownership Request"}).then(function(res){scope.vm.emailSent=true;scope.vm.emailFailed=false}).catch(function(){scope.vm.emailFailed=true})}}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalStorageService=__webpack_require__(7);var service=new LocalStorageService;var deps=["$http"];var WP_URL="https://about.lens.org/wp-json/wp/v2/posts?per_page=1&categories=60";module.exports=_app2.default.directive("landingUpdateNotice",[].concat(deps,[function($http){return{template:__webpack_require__(257),link:function link(scope,element){var vm=scope.vm={visible:false};scope.ignore=function(){service.set(key,true);vm.visible=false};var key=null;$http.get(WP_URL).then(function(res){var data=res.data;if(data.length){var post=data[0];if(post.title&&post.content){var text=$(post.content.rendered).first("p").text();vm.tagline=text;vm.title=post.title.rendered;vm.slug=post.slug;key="ignore-landing-update-"+post.id;if(service.get(key)){}else{vm.visible=true}}}}).catch(function(){console.warn("Could not load landing page update notice from WordPress")})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensLazyLoad",[].concat(deps,[function(){return{restrict:"A",scope:{lensLazyLoad:"<",key:"<",activeKey:"=",visible:"="},link:function link(scope,element,attrs){var el=element.get(0);new window.Waypoint({element:el,handler:function handler(){scope.visible=true;scope.activeKey=scope.key;scope.$apply()}})}}}]))},function(module,exports,__webpack_require__){"use strict";var coinsModule=window.angular.module("lens-coins",[]);var deps=[];coinsModule.service("ZoteroService",["$timeout",function($timeout){return{notify:function notify(){$timeout(function(){document.dispatchEvent(new Event("ZoteroItemUpdated",{bubbles:true,cancelable:true}))})}}}]);coinsModule.directive("lensCoins",[].concat(deps,[function(){return{template:'<span class="Z3988" title="{{ coinsMetadata }}">'+'<a ng-if="openUrlCoins.length" class="worldcat-registry" href="http://worldcatlibraries.org/registry/gateway?{{ openUrlCoins }}" title="{{ openUrlTooltip }}" target="_blank">'+'<img ng-src="{{ ::$root.assetLocation }}/img/worldcat-logo.png" /> {{ worldcatRegistryText }}'+"</a>"+"</span>",scope:{item:"<"},link:function link(scope){var isoFromMillis=function isoFromMillis(millis){return millis?new Date(millis).toISOString():null};var coinsPart=function coinsPart(key,value){return value?key+"="+encodeURIComponent(value):[]};var coinsKey=function coinsKey(key){return function(value){return coinsPart(key,value)}};var withFormat=function withFormat(format){return"rft_val_fmt=info:ofi/fmt:kev:mtx:"+format};var withDoiExternalIds=function withDoiExternalIds(dois){return dois[0]?"rft_id=info:doi/"+dois[0]:[]};var withTitle=coinsKey("rft.title");var withBookTitle=coinsKey("rft.btitle");var withJournalBookTitle=function withJournalBookTitle(journal){return journal?coinsPart("rft.btitle",journal.title):[]};var withConferenceName=function withConferenceName(conference){return conference?coinsPart("rft.btitle",conference.name):[]};var withLensIdUrl=function withLensIdUrl(lensId){return coinsPart("rft_id","https://lens.org/"+lensId)};var withDate=coinsKey("rft.date");var withPlace=coinsKey("rft.place");var withArticleTitle=coinsKey("rft.atitle");var withIssn=function withIssn(journal){if(journal&&journal.issn&&journal.issn[0]){return coinsPart("rft.issn",journal.issn[0].value?journal.issn[0].value:journal.issn[0])}else{return[]}};var withSeries=function withSeries(journal){return journal?coinsPart("rft.series",journal.title):[]};var deepFlat=function deepFlat(arr){return arr.reduce(function(acc,val){return Array.isArray(val)?acc.concat(deepFlat(val)):acc.concat(val)},[])};var generateScholarlyCoins=function generateScholarlyCoins(item){var withGenre=coinsKey("rft.genre");var withJournalTitle=function withJournalTitle(journal){return journal?coinsPart("rft.jtitle",journal.title):[]};var withAuthors=function withAuthors(authors){return authors?authors.map(function(author){return coinsPart("rft.au",author.display_name)}):[]};var withPublisher=function withPublisher(journal){return journal?coinsPart("rft.publisher",journal.publisher):[]};var withScholarlyPlace=function withScholarlyPlace(journal){return journal?withPlace(journal.country):[]};var withLanguage=function withLanguage(language){return language?coinsPart("rft.language",language[0]):[]};var withSubjects=function withSubjects(journal){return journal&&journal.asjc_subject?journal.asjc_subject.map(function(subject){return"rft.subject="+subject}):[]};var coinsBuilder=[];switch(item.publication_type){case"journal article":case"journal issue":case"journal":case"letter":case"editorial":case"news":case"clinical study":coinsBuilder.push(withFormat("journal"));coinsBuilder.push(withArticleTitle(item.title));coinsBuilder.push(withJournalTitle(item.journal));break;case"book chapter":case"reference entry":coinsBuilder.push(withFormat("book"));coinsBuilder.push(withGenre("bookitem"));coinsBuilder.push(withArticleTitle(item.title));coinsBuilder.push(withJournalBookTitle(item.journal));break;case"conference proceedings":case"conference proceedings article":coinsBuilder.push(withFormat("book"));coinsBuilder.push(withGenre("proceeding"));coinsBuilder.push(withArticleTitle(item.title));if(item.conference){coinsBuilder.push(withConferenceName(item.conference))}else{coinsBuilder.push(withJournalBookTitle(item.journal))}break;case"report":coinsBuilder.push(withFormat("book"));coinsBuilder.push(withGenre("report"));coinsBuilder.push(withTitle(item.title));coinsBuilder.push(withJournalBookTitle(item.journal));break;case"book":case"standard":case"journal volume":coinsBuilder.push(withFormat("book"));coinsBuilder.push(withBookTitle(item.title));coinsBuilder.push(withSeries(item.journal));break;case"dissertation":coinsBuilder.push(withFormat("dissertation"));coinsBuilder.push(withTitle(item.title));break;case"unknown":case"dataset":case"component":case"clinical trial":case"other":default:coinsBuilder.push(withFormat("dc"));coinsBuilder.push(withTitle(item.title));break}coinsBuilder.push(withDoiExternalIds(item.doi));coinsBuilder.push(withLensIdUrl(item.record_lens_id));coinsBuilder.push(withDate(item.date_published));coinsBuilder.push(coinsPart("rft.volume",item.volume));coinsBuilder.push(coinsPart("rft.issue",item.issue));coinsBuilder.push(coinsPart("rft.spage",item.start_page||item.pages_start));coinsBuilder.push(coinsPart("rft.epage",item.end_page||item.pages_end));coinsBuilder.push(withIssn(item.journal));coinsBuilder.push(withAuthors(item.authors));coinsBuilder.push(withPublisher(item.journal));coinsBuilder.push(withScholarlyPlace(item.journal));coinsBuilder.push(coinsPart("rft.description",item.abstract));coinsBuilder.push(withLanguage(item.language));coinsBuilder.push(withSubjects(item.journal));return deepFlat(coinsBuilder).join("&")};var generateOpenUrlCoins=function generateOpenUrlCoins(item){var coinsBuilder=[];if(item.doi.length>=1){coinsBuilder.push(withDoiExternalIds(item.doi))}else{switch(item.publication_type){case"journal article":case"journal issue":case"journal":case"letter":case"editorial":case"news":case"clinical study":coinsBuilder.push(withArticleTitle(item.title));break;case"book chapter":case"reference entry":coinsBuilder.push(withArticleTitle(item.title));coinsBuilder.push(withJournalBookTitle(item.journal));break;case"conference proceedings":case"conference proceedings article":coinsBuilder.push(withArticleTitle(item.title));if(item.conference){coinsBuilder.push(withConferenceName(item.conference))}else{coinsBuilder.push(withJournalBookTitle(item.journal))}break;case"report":coinsBuilder.push(withTitle(item.title));coinsBuilder.push(withJournalBookTitle(item.journal));break;case"book":case"standard":case"journal volume":coinsBuilder.push(withBookTitle(item.title));coinsBuilder.push(withSeries(item.journal));break;case"dissertation":coinsBuilder.push(withTitle(item.title));break;case"unknown":case"dataset":case"component":case"clinical trial":case"other":default:coinsBuilder.push(withTitle(item.title));break}coinsBuilder.push(withDate(item.date_published));coinsBuilder.push(coinsPart("rft.volume",item.volume));coinsBuilder.push(coinsPart("rft.issue",item.issue));coinsBuilder.push(coinsPart("rft.spage",item.start_page||item.pages_start));coinsBuilder.push(coinsPart("rft.epage",item.end_page||item.pages_end));coinsBuilder.push(withIssn(item.journal))}return deepFlat(coinsBuilder).join("&")};var generatePatentCoins=function generatePatentCoins(item){return deepFlat([withFormat("patent"),withTitle(item.title),withLensIdUrl(item.lensId),withDate(isoFromMillis(item.publicationDate)),coinsPart("rft.number",item.displayKey),coinsPart("rft.appldate",isoFromMillis(item.filingDate)),withPlace(item.jurisdiction)]).join("&")};scope.openUrlTooltip=window.messages?window.messages.prop("worldcatRegistry"):"";scope.worldcatRegistryText=window.messages?window.messages.prop("worldcatRegistry.linkText"):"";scope.$watch("item",function(item){if(item){if(item.record_lens_id){scope.coinsMetadata=generateScholarlyCoins(item);scope.openUrlCoins=generateOpenUrlCoins(item)}else{scope.coinsMetadata=generatePatentCoins(item)}}})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var embed=window.vegaEmbed;var deps=["$rootScope"];_app2.default.directive("lensLineChart",[].concat(deps,[function($rootScope){return{template:__webpack_require__(561),scope:{data:"<",rawData:"<",institution:"<",height:"<",elementClick:"<",filterSelection:"<",isPreview:"<",axisLabel:"<",yAxisLabel:"<",mark:"<",hideFilterLink:"<"},link:function link(scope,element,attrs){var render=function render(){var el=element.find(".line-chart");var values=scope.data||scope.rawData[0].values;el.empty();var width=element.width()-60;var color="#3182bd";var spec={$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{values:values},mark:{type:scope.mark||"line",color:color,point:{color:color,size:80}},width:width,height:scope.height||width/2,encoding:{x:{field:"label",type:"temporal",timeUnit:"year",format:"%Y",axis:{title:scope.axisLabel||null}},y:{field:"value",type:"quantitative",axis:{title:scope.yAxisLabel||null},format:","}},selection:{brush:{encodings:["x"],color:"blue",type:"interval"}}};embed(el.get(0),spec,window.VEGA_EMBED_OPTS).then(function(_ref){var spec=_ref.spec,view=_ref.view;view.addDataListener("brush_store",function(name,value){var extent=(0,_get3.default)(value,"[0].intervals[0].extent")||(0,_get3.default)(value,"[0].values");if(_.isArray(extent[0])){extent=extent[0]}scope.filterExtent=extent;scope.$apply()})})};scope.filter=function(extent){extent=extent.map(function(d){return d.getFullYear()});if(scope.filterSelection){scope.filterSelection.apply(scope.$parent.$ctrl||undefined,[extent])}};var _render=_.debounce(render,100);$(window).resize(_render);$rootScope.$on("REFRESH_ANALYSIS_VISUALISATIONS",_render);scope.$watch("rawData",_render);_render()}}}]))},function(module,exports){module.exports='<div>\n    <div class="line-chart"></div>\n    <div ng-if="filterExtent && !hideFilterLink" class="text-center">\n        <a ng-click="filter(filterExtent)">\n            Filter from {{filterExtent[0] | date:\'yyyy\'}} to {{filterExtent[1] | date:\'yyyy\'}}\n        </a>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$q","PatentNotesService","CollectionNotesService"];_app2.default.directive("lensListNotes",[].concat(deps,[function($q,PatentNotesService,CollectionNotesService){return{scope:{collectionId:"<",isOwner:"<"},template:__webpack_require__(258),link:function link(scope,element,attrs){var key=attrs.key;var service=attrs.type==="PATENT"?PatentNotesService:CollectionNotesService;scope.vm={loading:true,type:attrs.type,key:key,notes:[]};scope.refresh=function(){if(!key&&!scope.collectionId){return}service.fetch(key||scope.collectionId).then(function(notes){scope.vm.notes=notes;scope.vm.loading=false;if(attrs.type==="PATENT"){$(".overallNoteCount").text(notes.length)}}).catch(function(err){console.warn(err);scope.vm.loading=false;scope.vm.error=err})};scope.$on("REFRESH_NOTES",function(){scope.refresh()});scope.refresh()}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensLoader",[].concat(deps,[function(){return{template:__webpack_require__(564)}}]))},function(module,exports){module.exports='<div class="result-loading">\n    \x3c!--<em class="fa fa-refresh fa-spin"></em>--\x3e\n    <div class="background-masker header-left"></div>\n    <div class="background-masker header-right"></div>\n    <div class="background-masker header-bottom"></div>\n    <div class="background-masker subheader-left"></div>\n    <div class="background-masker subheader-right"></div>\n    <div class="background-masker subheader-bottom"></div>\n    <div class="background-masker content-top"></div>\n    <div class="background-masker content-first-end"></div>\n    <div class="background-masker content-second-line"></div>\n    <div class="background-masker content-second-end"></div>\n    <div class="background-masker content-third-line"></div>\n    <div class="background-masker content-third-end"></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalStorageService=__webpack_require__(7);var localStorageService=new LocalStorageService;module.exports=_app2.default.directive("lensLocaleSelector",["$rootScope","$window","$timeout",function($rootScope,$window,$timeout){return{template:__webpack_require__(259),link:function link(scope,element){var _$window$UI_CONFIG=$window.UI_CONFIG,locale=_$window$UI_CONFIG.locale,locales=_$window$UI_CONFIG.locales,assetLocation=_$window$UI_CONFIG.assetLocation;if(!(locales&&locale)){return}scope.currentText=$rootScope.selectedText;scope.assetLocation=assetLocation;scope.locales=locales;scope.locale=scope.locales[locale];scope.languageBeta=localStorageService.get("languageBeta");scope.updateLanguageBetaPreference=function(){console.log(scope.languageBeta);localStorageService.set("languageBeta",scope.languageBeta)};scope.getSelection=function(){scope.currentText=$window.getSelection().toString()};scope.save=function(){scope.saved=true;scope.suggestedText="";scope.currentText="";$timeout(function(){scope.saved=false},3e3)}}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http","$timeout"];_app2.default.directive("lensLogoTooltip",[].concat(deps,[function($http,$timeout){return{link:function link(scope){scope.vm=scope.vm||{};var logoTimeout=null;var clearLogoTimeout=null;scope.setLogoTootip=function(item,$event,offsetTop,extraData){scope.vm.logoTooltip=null;$timeout.cancel(logoTimeout);$timeout.cancel(clearLogoTimeout);var data=_.clone(item);if(extraData){_.assign(data,extraData)}logoTimeout=$timeout(function(){scope.vm.logoTooltip=data;scope.setLogoTootipPosition($event,offsetTop)},500)};scope.setLogoTootipPosition=function($event,offsetTop){if(offsetTop===undefined){offsetTop=140}var target=$event.target;var bodyRect=document.body.getBoundingClientRect();var rect=target.getBoundingClientRect();scope.vm.logoTooltipPosition={left:rect.left+target.clientWidth/2-150,top:rect.top-bodyRect.top-offsetTop}};scope.keepLogoTooltipOpen=function(){$timeout.cancel(clearLogoTimeout)};scope.clearLogoTooltip=function(){clearLogoTimeout=$timeout(function(){scope.vm.logoTooltip=null},500)};scope.suggestLogo=function(name){scope.vm.suggestLogo=name};scope.notifyLogo=function(name){$http.post("/lens/service/in4mlead/contact",{name:scope.vm.name||"Not Supplied",email:scope.vm.email||"support@lens.org",fileLinks:[],clob:"Logo Suggestion for "+scope.vm.suggestLogo+": "+scope.vm.suggestedLogo}).then(function(res){scope.vm.logoEmailSent=true;scope.vm.logoEmailFailed=false}).catch(function(){scope.vm.logoEmailFailed=true})}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$timeout"];_app2.default.directive("lensModal",[].concat(deps,[function($timeout){return{template:__webpack_require__(260),transclude:true,scope:{visible:"=",size:"<",close:"<"},link:function link(scope,element){var handleKeyup=function handleKeyup(e){if(e.keyCode===27){scope.visible=false;scope.$digest()}};scope.$watch("visible",function(oldVal,newVal){if(newVal){window.removeEventListener("keyup",handleKeyup)}else{window.addEventListener("keyup",handleKeyup)}})}}}]))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var directive=_app2.default.directive("lensMultiSelect",["$rootScope",function($root){return{template:__webpack_require__(569),scope:{model:"=",items:"<",showFlag:"<",defaultLabel:"=",labelFormatter:"="},link:function link(scope){scope.toggle=function(){scope.showOptions=!scope.showOptions;$root.showOverlay=scope.showOptions;if(scope.showOptions){$root.hideOverlay=function(){$root.showOverlay=false;scope.showOptions=false}}};scope.$watch("model",function(){scope.selectedItems=_.keys(scope.model).filter(function(k){return scope.model[k]}).join(", ")},true)}}}]);exports.default=directive},function(module,exports){module.exports='<label class="select">\n    <select faux-select class="link" ng-click="toggle()">\n        <option value="">{{selectedItems || defaultLabel || \'Defaults to All\'}}</option>\n    </select>\n    <i></i>\n</label>\n<div ng-if="showOptions" class="select-container">\n    <div ng-repeat="key in items">\n        <label class="checkbox">\n            <input type="checkbox" ng-model="model[key]">\n            <i></i>\n            <span ng-if="showFlag" lens-flag jurisdiction="key"></span>\n            {{labelFormatter(key) || key}}\n        </label>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _isElementInViewport=__webpack_require__(571);var _isElementInViewport2=_interopRequireDefault(_isElementInViewport);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensNav",function(){return{templateUrl:"nav",replace:true,transclude:true,link:function link(scope,element){var update=function update(){var visible=element.find(".tab-nav-collapse").children().filter(function(i,el){return(0,_isElementInViewport2.default)(el)});var visibleCount=visible.length;element.find(".tab-nav-drop-menu").children().each(function(i,el){$(el).toggle(i>=visibleCount)})};angular.element(window).bind("resize",update);update()}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var isElementInViewport=function isElementInViewport(el){if(typeof window.jQuery==="function"&&el instanceof window.jQuery){el=el[0]}var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)};exports.default=isElementInViewport},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["NotesService"];_app2.default.directive("lensNoteTableRow",[].concat(deps,[function(NotesService){return{scope:{note:"<",reload:"&",showLevelUp:"<"},template:__webpack_require__(573),link:function link(scope,element,attrs){var vm={};scope.vm=vm;scope.linkUrl=NotesService.linkUrl;scope.isPatent=function(note){return note&&note.type==="PATENT"};scope.delete=function(id){vm.confirm=true};scope._delete=function(id){NotesService.delete(id).then(function(){vm.confirm=false;scope.reload()})}}}}]))},function(module,exports){module.exports='<div class="div-table-cell">\n    <div class="div-table-head-mobile">{{\'common.note\' | message}}</div>\n    <div class="div-table-cell-mobile nest">\n        <div>\n            <span class="fa fa-level-up pull-left" ng-show="showLevelUp"></span>\n            <span ng-bind-html="note.text | unsafe"></span>\n        </div>\n    </div>\n</div>\n<div class="div-table-cell">\n    <div class="div-table-head-mobile">{{\'common.assignment\' | message}}</div>\n    <div class="div-table-cell-mobile">\n        <span class="col-meta" ng-if="isPatent(note)">{{\'notes.patent.scope.\' + note.scope | message}}</span>\n    </div>\n</div>\n<div class="div-table-cell">\n    <div class="div-table-head-mobile">{{\'common.dateCreated\' | message}}</div>\n    <div class="div-table-cell-mobile">\n        <span class="col-meta">{{note.created | date:\'medium\'}}</span>\n    </div>\n</div>\n<div class="div-table-cell">\n    <div class="div-table-head-mobile">{{\'common.tools\' | message}}</div>\n    <div class="div-table-cell-mobile">\n        <div class="btn-group btn-group-xs">\n            <a ng-click="$root.editNote({type: note.type, key: note.lensId || note.collectionId, id: note.id})" class="btn" tooltip-title="Edit Note" title="Edit Note">\n                <em class="fa fa-edit"></em>\n            </a>\n            <a class="btn" tooltip-title="Delete Note" title="Delete" ng-click="delete(note.id)" ng-if="note.sharedType === \'USER\'">\n                <em class="fa fa-trash"></em>\n            </a>\n        </div>\n    </div>\n</div>\n<div lens-modal size="\'sm\'" visible="vm.confirm" ng-if="vm.confirm">\n    <h3>Are you sure?</h3>\n    <div class="alert alert-danger" ng-bind-html="(\'notes.deleteThisNote.confirm\' | message) | unsafe"></div>\n    <div>\n        <a class="btn btn-sm btn-danger-txt" ng-click="vm.confirm = false;">Cancel</a>\n        <a class="btn btn-sm btn-danger" ng-click="vm.confirmed = true; _delete(note.id) ">Delete</a>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _parseOrcidReponse=__webpack_require__(575);var parseOrcidResponse=_interopRequireWildcard(_parseOrcidReponse);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FETCH_OPTS={method:"GET",headers:{"Content-Type":"application/json"}};var deps=[];_app2.default.directive("lensOrcidAuthor",[].concat(deps,[function(){return{scope:{orcidId:"<"},link:function link(scope,element){var id=scope.orcidId;fetch("https://pub.orcid.org/v2.1/"+id+"/person",FETCH_OPTS).then(function(d){if(d.ok){return d.json()}else{throw d}}).then(function(response){var name=parseOrcidResponse.extractName(response);if(name){element.text(id+" / "+name);scope.$digest()}}).catch(function(error){return error.json().then(function(json){return scope.$apply(function(){return element.text(id+" - "+Error(json["user-message"]))})})})}}}]))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extractName=exports.extractName=function extractName(response){if(!response.name){return""}var givenNames=response.name["given-names"];var familyName=response.name["family-name"];var displayName=(givenNames?givenNames.value:"")+" "+(familyName?familyName.value:"");if(response.emails&&response.emails.email&&response.emails.email.length){displayName+=" <"+response.emails.email[0]+">"}return displayName.trim()}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PagedResourcePaginationController=function PagedResourcePaginationController($attrs,SharedObjectService){_classCallCheck(this,PagedResourcePaginationController);this.pagedResource=SharedObjectService.get($attrs.sharedObject)};_app2.default.controller("PagedResourcePaginationController",PagedResourcePaginationController);_app2.default.directive("pagedResourcePagination",[function(){return{template:__webpack_require__(577),controller:"PagedResourcePaginationController as $paginationCtrl",bindToController:true}}])},function(module,exports){module.exports=' <form class="pull-right-md">\n     <label class="select select-sm" for="n">\n         <select ng-model="$paginationCtrl.pagedResource.pageSize" class="top bottom"\n             ng-options="o as \'Show \' + o + \' Results\' for o in [10,20,50,100]"\n             ng-change="$paginationCtrl.pagedResource.fetch()"\n         ></select>\n         <i></i>\n     </label>\n </form>\n\n <ul class="pagination pull-left-md pagination-xs">\n     <li><a class="settings-button fa fa-chevron-left" ng-click="$paginationCtrl.pagedResource.previousPage()"></a></li>\n     <li ng-repeat="page in $paginationCtrl.pagedResource.pageRange">\n          <a ng-class="{active: page == $paginationCtrl.pagedResource.page}" ng-click="$paginationCtrl.pagedResource.setPage(page)">{{ page + 1 }}</a>\n     </li>\n     <li><a class="settings-button fa fa-chevron-right" ng-click="$paginationCtrl.pagedResource.nextPage()"></a></li>\n </ul>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensPatentAnalysis",function(){return{controller:"AnalysisController as $analysisCtrl",bindToController:true}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensPatentAnalysisPreview",[].concat(deps,[function(){return{template:__webpack_require__(261),scope:{loading:"<",ready:"<",fullAnalysisUrl:"<",previewTitle:"<"}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FacetsView=__webpack_require__(203);var SearchFormView=__webpack_require__(206);var deps=["$http"];_app2.default.directive("lensPatentFacetFilters",[].concat(deps,[function($http){return{scope:{url:"<"},link:function link(scope,element){var url=scope.url||"/lens/search/facetControls"+window.location.search;$http.get(url).then(function(res){element.html(res.data);var facetsView=new FacetsView;new SearchFormView({facetsView:facetsView})})}}}]))},function(module,exports,__webpack_require__){"use strict";var Sequence=__webpack_require__(277);module.exports=Backbone.View.extend({el:"#filterBiologicals",initialize:function initialize(){if(!this.$el.length)return;var freeTextInput=this.$("#sequence_organism_free_text_strings");Sequence.base.autocomplete_organism({autocompleteEl:freeTextInput,displayEl:this.$("#sequence_organism_free_text"),appendTo:this.$("#sequence_autocomplete"),showLoading:function showLoading(){freeTextInput.addClass("working")},hideLoading:function hideLoading(){freeTextInput.removeClass("working")}})}})},function(module,exports,__webpack_require__){"use strict";var excludeFieldName=__webpack_require__(204);module.exports=Backbone.View.extend({initialize:function initialize(opts){this.$el=$(opts.el);if(!this.$el.length)return;this.$(".chooseMore").fancybox({maxWidth:1200,maxHeight:800,fitToView:true,width:"94%",height:"94%",autoSize:true,closeClick:false,openEffect:"none",closeEffect:"none",afterShow:function afterShow(){var $fancybox=$(".fancybox-overlay");$fancybox.find(".cancel").on("click",function(){$.fancybox.close()});$fancybox.find(".apply").on("click",function(){var submit={};submit[opts.facetName]=_.map($fancybox.find('input:checked[name="'+opts.facetName+'"]'),function(x){return $(x).val()});submit[excludeFieldName(opts.facetName)]=_.map($fancybox.find('input:indeterminate[name="'+opts.facetName+'"]'),function(x){return $(x).val()});$.vent.trigger("filters/apply",submit)});window.initTristateCheckboxes($fancybox)}})}})},function(module,exports,__webpack_require__){"use strict";var _ScholarService=__webpack_require__(278);var _ScholarService2=_interopRequireDefault(_ScholarService);var _getArticleId=__webpack_require__(142);var _getArticleId2=_interopRequireDefault(_getArticleId);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var service=new _ScholarService2.default;var template=window.Handlebars.compile(__webpack_require__(585));module.exports=Backbone.View.extend({initialize:function initialize(opts){var _this=this;this.$el=$(opts.el);if(!this.$el.length){return}var elements=Array.prototype.slice.apply(this.$el.find("input"));var ids=elements.map(function(el){return el.value}).map(function(d){return parseFloat(d)});var articleMetadata={};var fields=service.MINIMAL_FIELDS;service.getAll(ids,"lens_ids_num",fields).then(function(articles){articles.forEach(function(article){articleMetadata[article.record_lens_id_num]=article});_this.$el.find("[data-key]").each(function(i,el){var key=$(el).data("key");var article=articleMetadata[key];if(article&&!article.displayIds){article.authors=article.authors.map(function(author){return author.display_name}).join(", ");var id=(0,_getArticleId2.default)(article);article.scholarUrl="/lens/scholar/article/"+id+"/main";article.displayIds={};article.citation_ids.forEach(function(id){if(_.includes(["pmid","doi","pmcid"],id.type)){article.displayIds[id.type]=id}});article.displayIds=_.values(article.displayIds).map(function(article){article.assetLocation=window.UI_CONFIG.assetLocation;return article});article.assetLocation=window.UI_CONFIG.assetLocation;el.innerHTML=template({article:article});window.initTooltips($(el))}})}).catch(function(err){console.warn(err)})}})},function(module,exports,__webpack_require__){"use strict";var _looksLikeAScholarlyId=__webpack_require__(205);var _looksLikeAScholarlyId2=_interopRequireDefault(_looksLikeAScholarlyId);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getLogoUrl=__webpack_require__(41);var getInstitutionName=function getInstitutionName(_ref){var slug=_ref.slug;return slug.replace(/\-/g," ")};var collectionDossierMap=__webpack_require__(279);var institutions=_.values(collectionDossierMap).map(getInstitutionName);var institutionNameMap={};_.keys(collectionDossierMap).forEach(function(id){var institution=collectionDossierMap[id];var name=getInstitutionName(institution);institution.logoUrl=getLogoUrl(name);institution.name=name;institutionNameMap[name]=institution});var aliases={has_fields_of_study:"has_field_of_study",fields_of_study:"field_of_study",keywords:"keyword",journal:"source",authors:"author",mesh_terms:"mesh_term",chemicals:"chemical",fundings:"funding",recommended_works:"recommended_work",clinical_trials:"clinical_trial",num_forward_citations:"referenced_by_count"};module.exports=function(article,highlight){Object.keys(aliases).forEach(function(k){var v=aliases[k];if(article[v]&&!article[k]){article[k]=article[v]}});if(!article.external_ids&&article.citation_ids){article.external_ids=article.citation_ids}else if(!article.external_ids&&!article.citation_ids){article.external_ids=[];article.citation_id=article.citation_id||[];article.citation_id.forEach(function(value,i){var _looksLikeAScholarlyI=(0,_looksLikeAScholarlyId2.default)(value),isDoi=_looksLikeAScholarlyI.isDoi,isPMC=_looksLikeAScholarlyI.isPMC,isMAG=_looksLikeAScholarlyI.isMAG,isPmid=_looksLikeAScholarlyI.isPmid,isCore=_looksLikeAScholarlyI.isCore;var type="";if(isDoi)type="doi";else if(isPMC)type="pmc";else if(isMAG)type="magid";else if(isPmid)type="pmid";else if(isCore)type="core";article.external_ids.push({value:value,type:type})})}var keys=["doi","pmid","pmcid","magid"];article.external_ids.forEach(function(_ref2){var type=_ref2.type,value=_ref2.value;keys.forEach(function(k){if(!article[k]){article[k]=[]}if(type===k){article[k].push(value)}})});if(!article.id&&article.external_ids.length){var ids=_.filter(article.external_ids,function(id){return id.type==="pmid"});article.id=ids[0]?ids[0].value:article.external_ids[0].value}if(article.has_mesh_term&&!article.has_mesh_terms){article.has_mesh_terms=article.has_mesh_term}article.unique_affiliations={};article.authors=article.authors||[];if(_.isArray(article.authors)){article.authors.forEach(function(author){if(author.affiliation&&!author.affiliations){author.affiliations=author.affiliation}if(!author.normalised_name){author.normalised_name=author.last_name+" "+author.initials}author.display_name=author.display_name||(author.first_name||author.initials||"")+" "+author.last_name;if(author.affiliations&&author.affiliations.length){article.has_affiliations=true;author.affiliations.forEach(function(affiliation){article.unique_affiliations[affiliation.name||affiliation]=affiliation})}})}article.unique_affiliations=_.values(article.unique_affiliations);if(_.isArray(article.authors)){article.authors.forEach(function(author){var indices=[];if(author.affiliations&&author.affiliations.length){author.affiliations.forEach(function(affiliation){var affiliationIndex=article.unique_affiliations.findIndex(function(d){return d.name===affiliation.name});if(affiliationIndex>=0){indices.push(affiliationIndex+1)}})}author.affiliationIndices=indices.join(", ")})}if(article.authors[0]&&article.authors[0].seq){article.authors=article.authors.sort(function(a,b){return a.seq-b.seq})}article.institutions={};article.unique_affiliations.forEach(function(_affiliation){var affiliation=_affiliation.name||_affiliation;institutions.forEach(function(institution){if(affiliation.indexOf(institution)>=0){article.institutions[institution]=institutionNameMap[institution];article.has_institutions=true}})});if(_.isArray(article.authors)){article.authorList=article.authors.map(function(author){return author.display_name}).join(", ")}else{article.authorList=article.authors}if(!article.chemicals){article.chemicals=[]}article.chemicals.forEach(function(chemical){if(chemical.name&&!chemical.substance_name){chemical.substance_name=chemical.name}});var pages=[article.pages_start||article.start_page,article.pages_end||article.end_page];article.pages=pages.filter(function(v){return v}).join("-");var journalAliases={title:"title_full"};Object.keys(journalAliases).forEach(function(k){var v=journalAliases[k];if(article.journal&&article.journal[v]&&!article.journal[k]){article.journal[k]=article.journal[v]}});var clinicalTrialAliases={identifier:"trial_id"};if(!article.clinical_trials){article.clinical_trials=[]}article.clinical_trials.forEach(function(trial){Object.keys(clinicalTrialAliases).forEach(function(k){var v=clinicalTrialAliases[k];if(trial[v]&&!trial[k]){trial[k]=trial[v]}})});if(!article.fundings){article.fundings=[]}article.fundings=article.fundings.map(function(item){if(!item.org){item.org=item.organisation}return item});if(!article.keywords){article.keywords=[]}article.keywords=article.keywords.map(function(value){if(!_.isObject(value)){value={value:value}}return value});if(highlight){_.keys(highlight).forEach(function(k){if(k==="fulltext"){article.fullTextSnippet=highlight[k].join(" ... ")}else{article[k]=highlight[k].join("")}})}if(article.open_access&&!article.open_access.summary){article.open_access={summary:article.open_access}}if(article.open_access&&article.open_access.summary){_.keys(article.open_access.summary).forEach(function(k){article.open_access[k]=article.open_access.summary[k]})}return article}},function(module,exports){module.exports='<div class="cited-article-facet-title">\n    {{article.title}}\n</div>\n<span class="citations-meta">\n    {{article.authors}}\n    {{article.journal.title_full}}\n    {{article.volume}}: {{article.pages_start}}-{{article.pages_end}}\n\n    <br>\n    {{#if article.date_published}}\n        {{date article.date_published}}\n    {{else}}\n        {{article.year_published}}\n    {{/if}}\n\n    <span class="cite-sep"> - </span>\n    <a title="View Article" class="btn btn-xxs lensIcon ttip-hov" href="{{article.scholarUrl}}">\n        <img src="{{article.assetLocation}}/fonts/svg-icons/icon-lens.svg"/>\n    </a>\n    {{#each article.displayIds}}\n        {{#if_eq this.type \'pmid\'}}\n        <a title="View via PubMed" class="ttip-hov pubmedIcon btn btn-xxs" data-pmid="{{this.value}}" target="_blank" href="http://www.ncbi.nlm.nih.gov/pubmed/{{this.value}}">\n            <img src="{{assetLocation}}/img/icon-pub-med.png"/>\n        </a>\n        {{/if_eq}}\n        {{#if_eq this.type \'doi\'}}\n        <a title="View via Crossref" class="ttip-hov pubmedIcon btn btn-xxs" target="_blank" href="http://dx.doi.org/{{this.value}}">\n            <img src="{{assetLocation}}/img/icon-cross-ref.png"/>\n        </a>\n        {{/if_eq}}\n        {{#if_eq this.type \'pmcid\'}}\n        <a title="View Open Access Article" class="ttip-hov pubmedIcon btn btn-xxs" target="_blank" href="http://www.ncbi.nlm.nih.gov/pmc/{{this.value}}">\n            <img src="{{assetLocation}}/img/icon-open-access.png"/>\n        </a>\n        {{/if_eq}}\n    {{/each}}\n\n</span>\n'},function(module,exports,__webpack_require__){"use strict";var _constructDateSpec2=__webpack_require__(275);var _constructDateSpec3=_interopRequireDefault(_constructDateSpec2);var _splitDateSpec2=__webpack_require__(170);var _splitDateSpec3=_interopRequireDefault(_splitDateSpec2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var moment=window.moment;module.exports=Backbone.View.extend({el:"#filterDates",today:new Date,events:{"change #datePreselects":"preselects","change .dateSelect":"change","change input:radio":"change"},splitDateSpec:function splitDateSpec(dateFilterSpec){return(0,_splitDateSpec3.default)(dateFilterSpec)},constructDateSpec:function constructDateSpec(left,right){var type=this.$(".dateType:checked").val();left=left?$.datepicker.formatDate("yymmdd",left):null;right=right?$.datepicker.formatDate("yymmdd",right):null;return(0,_constructDateSpec3.default)(left,right,type)},changed:false,initialize:function initialize(){if(!this.$el.length)return;var that=this;var opts={maxDate:new Date,yearRange:"-300:+0",dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true,onChangeMonthYear:function onChangeMonthYear(year,month,datepicker){var d=new Date(year,month-1);$(this).datepicker("setDate",d);that.change()}};this.$(".beginDate").datepicker(_.extend({defaultDate:moment().startOf("year").toDate(),onSelect:function onSelect(){that.changed=true;that.change()},onClose:function onClose(){if(that.changed){that.$(".endDate").datepicker("show")}that.changed=false}},opts));this.$(".endDate").datepicker(_.extend({defaultDate:moment().subtract(1,"month").endOf("month").toDate()},opts));this.$(".dateSelect").focus(function(){$("#ui-datepicker-div").position({my:"center top",at:"center bottom",of:$(this)})});$("#ui-datepicker-div").hide();if(this.$(".submitDate").val().length){this.$(".submitDate").removeAttr("disabled");var spec=this.splitDateSpec(this.$(".submitDate").val());$("#filterPubDate").prop("checked",spec.type==="pub_date");$("#filterFilingDate").prop("checked",spec.type==="filing_date");$("#filterEarliestPriorityDate").prop("checked",spec.type==="earliest_priority_date");this.$(".beginDate").datepicker("setDate",spec.start);this.$(".endDate").datepicker("setDate",spec.end)}},preselects:function preselects(e){e.preventDefault();var val=$(e.currentTarget).val();if(val==="3m"){this.$(".endDate").datepicker("setDate",this.today);this.$(".beginDate").datepicker("setDate","-3m")}else if(val==="ytd"){var yearBegin=new Date(this.today.getFullYear(),0,1,0,0,0,0);this.$(".endDate").datepicker("setDate",this.today);this.$(".beginDate").datepicker("setDate",yearBegin)}else if(val==="year"){this.$(".endDate").datepicker("setDate",this.today);this.$(".beginDate").datepicker("setDate","-1y")}else{return}this.change(e,true)},change:function change(e,preselected){if(e&&e.preventDefault){e.preventDefault()}if(!preselected){this.$("#datePreselects").val("custom")}if(this.$(".beginDate").val()!==""&&this.$(".endDate").val()!==""){var left=this.$(".beginDate").datepicker("getDate");var right=this.$(".endDate").datepicker("getDate");var spec=this.constructDateSpec(left,right);this.$(".submitDate").val(spec).removeAttr("disabled")}else if(this.$(".beginDate").val()){var _left=this.$(".beginDate").datepicker("getDate");var _spec=this.constructDateSpec(_left,null);this.$(".submitDate").val(_spec).removeAttr("disabled")}else if(this.$(".endDate").val()){var _right=this.$(".endDate").datepicker("getDate");var _spec2=this.constructDateSpec(null,_right);this.$(".submitDate").val(_spec2).removeAttr("disabled")}else{this.$(".submitDate").val("").attr("disabled","disabled")}}})},function(module,exports,__webpack_require__){"use strict";var excludeFieldName=__webpack_require__(204);module.exports=Backbone.View.extend({initialize:function initialize(opts){this.$el=$(opts.el);if(!this.$el.length)return;this.$(".chooseMore").fancybox({maxWidth:1200,maxHeight:800,fitToView:true,width:"94%",height:"94%",autoSize:true,closeClick:false,openEffect:"none",closeEffect:"none",afterShow:function afterShow(){$(".fancybox-overlay").find(".cancel").on("click",function(){$.fancybox.close()});$(".fancybox-overlay").find(".apply").on("click",function(e){e.preventDefault();var $box=".fancybox-overlay";var submit={};submit[opts.jurs]=_.map($($box).find('input:checked[name="'+opts.jurs+'"]'),function(x){return $(x).val()});submit[excludeFieldName(opts.jurs)]=_.map($($box).find('input:indeterminate[name="'+opts.jurs+'"]'),function(x){return $(x).val()});$.vent.trigger("filters/apply",submit);$.fancybox.close()});window.initTristateCheckboxes($(".fancybox-overlay"))},afterLoad:function afterLoad(){}})}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({events:{"keyup .firstName":"change","keyup .lastName":"change"},initialize:function initialize(opts){this.$el=$(opts.el);if(!this.$el.length)return;var x=this.$(".submitName").val();if(_.isUndefined(x)||_.isNull(x))x="";var splitOriginal=x.replace(/"/g,"").replace(/~2/g,"").split(" ");var split=Array.prototype.slice.call(splitOriginal).reverse();if(split.length>0){this.$(".submitName").removeAttr("disabled");if(this.$(".lastName").length===0){this.$(".firstName").val(splitOriginal.join(" "))}else{this.$(".firstName").val(split[0]);if(split.length>1){this.$(".lastName").val(split.slice(1,split.length).join(" "))}}}else{this.$(".submitName").attr("disabled","disabled")}},change:function change(){var f=$.trim(this.$(".firstName").val());var l=$.trim(this.$(".lastName").val());var xs=[];if(f!==""){xs.push(f)}if(l!==""){xs.push(l)}if(xs.length===2){this.$(".submitName").val('"'+xs.reverse().join(" ")+'"~2').removeAttr("disabled")}else if(xs.length===1){this.$(".submitName").val(xs[0]).removeAttr("disabled")}else{this.$(".submitName").val("").attr("disabled","disabled")}}})},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({el:"#filterWorkspace",tags:[],initialize:function initialize(){if(!this.$el.length)return;var that=this;var split=function split(val){return val.split(/,\s*/)};var extractLast=function extractLast(term){return split(term).pop()};$.ajax({url:"/lens/service/tag/autocomplete",success:function success(data){that.$("#tagFilter").bind("keydown",function(event){if(event.keyCode===$.ui.keyCode.TAB&&$(this).data("ui-autocomplete").menu.active){event.preventDefault()}}).autocomplete({minLength:0,source:function source(request,response){response($.ui.autocomplete.filter(data,extractLast(request.term)))},focus:function focus(){return false},select:function select(event,ui){var terms=split(this.value);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return false}})}})}})},function(module,exports,__webpack_require__){"use strict";var patentFamilyModule=window.angular.module("lens-patent-family",["ngResource"]);patentFamilyModule.factory("PatentFamilyResource",["$resource",function($resource){return $resource("/lens/api/patents/families/:familyId",{},{get:{cache:true}})}]);patentFamilyModule.directive("lensPatentFamilyHeading",["PatentFamilyResource",function(PatentFamilyResource){return{template:__webpack_require__(591),scope:{familyId:"<"},link:function link(scope){scope.family=PatentFamilyResource.get({familyId:scope.familyId},function(){},function(res){scope.errorStatus=res.status})}}}]);patentFamilyModule.directive("lensPatentFamilyTimeline",["PatentFamilyResource","$timeout",function(PatentFamilyResource,$timeout){return{template:__webpack_require__(592),scope:{displayKey:"<",displayKeyAndTitle:"<",familyId:"<",publicationKey:"<"},link:function link(scope){scope.family=PatentFamilyResource.get({familyId:scope.familyId},function(value){if(value.timeline){var timelineModel=value.timeline;timelineModel.events.forEach(function(event){if(event.icon){event.icon=scope.$root.assetLocation+"/img/timeline/"+(event.title===scope.publicationKey?"blue_triangle.png":event.icon)}if(event.link){event.link="/lens/patent/"+event.link}});$timeout(function(){new LENS.Views.Patent.TimelineView(timelineModel)})}})}}}]);patentFamilyModule.directive("lensPatentFamilyTables",["PatentFamilyResource",function(PatentFamilyResource){return{template:__webpack_require__(593),scope:{familyId:"<"},link:function link(scope){scope.family=PatentFamilyResource.get({familyId:scope.familyId});scope.highlighted=[];scope.filtered=[];scope.highlight=function(claim){if(scope.highlighted.includes(claim)){scope.highlighted=scope.highlighted.filter(function(value){return value!==claim})}else{scope.highlighted.push(claim)}};scope.filter=function(claim){if(scope.filtered.includes(claim)){scope.filtered=scope.filtered.filter(function(value){return value!==claim})}else{scope.filtered.push(claim)}};scope.clearSelections=function(){scope.highlighted=[];scope.filtered=[]};scope.isHighlighted=function(claims){return _.intersection(scope.highlighted,claims).length>0};scope.isFiltered=function(claims){return _.intersection(scope.filtered,claims).length>0}}}}])},function(module,exports){module.exports='<div ng-bind-html="\'patent.family.heading\' | message:[family.result.size] | unsafe" ng-if="!errorStatus"></div>\n<div class="alert alert-danger" ng-if="errorStatus === 403">\n\t<em class="fa fa-exclamation-triangle"></em>\n\tThere was an error loading family data.\n\tPlease reload the page to try again.\n\tIf you get this error after reloading the page, please <a href="mailto:support@lens.org">Contact Support</a>\n</div>\n'},function(module,exports){module.exports='<div ng-show="family.timeline">\n\t<div class="alert alert-info hide-item-content">\n\t\t{{ "patent.family.timeline.instructions" | message }} <em class="hide-item fa fa-close pull-right"></em>\n\t</div>\n\t<div id="familyTimelineContainer" style="height:150px"></div>\n\t<br/>\n\t<p class="meta"><strong>{{ "patent.family.timeline.key" | message }}</strong>\n\t\t<span class="icon fa fa-circle" style="color: #f57400;"></span> {{ "patent.family.timeline.currentPublication" | message }}\n\t\t<span class="icon fa fa-circle" style="color: #00a2b5;"></span> {{ "patent.family.timeline.familyPublications" | message }}\n\t\t<span class="icon fa fa-circle" style="color: #c065c1;"></span> {{ "patent.family.timeline.priorityApplications" | message }}\n\t</p>\n\t\x3c!--<div class="alert alert-info hide-item-content"><@spring.message "patent.family.queryLink.intro1"/> <em class="hide-item fa fa-close pull-right"></em></div>--\x3e\n\t <a class="btn btn-xs btn-sec"\n\t\ttitle="Family of {{ displayKeyAndTitle }}"\n\t\thref="/lens/search/family/{{ publicationKey }}">\n\t <span class="icon fa fa-search"></span> {{ "patent.family.search" | message }} {{ displayKey }}\n\t</a>\n</div>\n<div ng-if="!family.timeline">\n\t<div class="alert alert-warning hide-item-content">\n\t\t{{ "patent.family.tooBig.visualize" | message }} <em class="hide-item fa fa-close pull-right"></em>\n\t</div>\n\t<a class="btn btn-xs"\n\t\ttitle="Family of {{ displayKeyAndTitle }}"\n\t\thref="/lens/search/family/{{ publicationKey }}">\n\t\t<span class="icon fa fa-search"></span> {{ "patent.family.of" | message }} {{ displayKey }}\n\t</a>\n</div>\n'},function(module,exports){module.exports='<div class="col-md-6">\n    <h4>{{ "patent.family.prioritiesTable.title" | message }}</h4>\n    \n    <div class="table-responsive">\n    \x3c!-- Start Div Table --\x3e\n    <div class="div-table">\n    \t<div class="div-table-heading">\n    \t\t<div class="div-table-row">\n    \t\t\t<div class="div-table-cell">#</div>\n    \t\t\t<div class="div-table-cell">{{ "patentField.publicationNumber" | message }}</div>\n    \t\t\t<div class="div-table-cell">{{ "patentResults.th.info" | message }}</div>\n    \t\t\t<div class="div-table-cell">{{ "patentField.publicationDate" | message }}</div>\n    \t\t\t<div class="div-table-cell">{{ "patent.family.priority.claims" | message }}</div>\n    \t\t</div>\n    \t</div>\t\n    \t<div class="div-table-body">\n    \t\t<div class="div-table-row" ng-repeat="hit in family.hitsWithPriorityIndices" ng-class="{highlight: isHighlighted(hit.indices)}" ng-hide="isFiltered(hit.indices)">\n    \t\t\t<div class="div-table-cell"><div class="div-table-head-mobile">#</div> <div class="div-table-cell-mobile">{{ $index + 1 }}</div></div>\n    \t\t\t<div class="div-table-cell">\n                    <div class="div-table-head-mobile">{{ "patentField.publicationNumber" | message }}</div>\n                    <div class="div-table-cell-mobile">\n                        <div class="doc-id">\n                            <a href="/lens/patent/{{ hit.hit.publicationKey }}" title="{{ hit.hit.displayKeyAndTitle }}" class="link" ng-class="{ fullText: hit.hit.hasFullText }">\n                                <span class="flag {{ hit.hit.jurisdiction | lowercase }}">\n                                    <img ng-src="{{ ::$root.assetLocation }}/img/flags/{{ hit.hit.jurisdiction }}.png"/>\n                                </span> \n                                {{ hit.hit.displayKey }}\n                            </a>\n                        </div>\n                        \x3c!--TODO what to display for unknown/ambiguous types?--\x3e\n                        <div class="doc-type">\n                            {{ "common.doc.type" | message }}: \n                            <span ng-if="hit.hit.docType !== \'unknown\' && hit.hit.docType !== \'ambiguous\'">{{ hit.hit.docType }}</span>\n                        </div>\n                        <div class="lens-id">{{ "common.id" | message }}: <a href="/{{ hit.hit.lensId }}">lens.org/{{ hit.hit.lensId }}</a></div>\n                    </div>\n                </div>\n    \t\t\t<div class="div-table-cell"><div class="div-table-head-mobile">{{ "patentResults.th.info" | message }}</div> \n    \t\t\t\t<div class="div-table-cell-mobile">\n                        <a href="/lens/patent/{{ hit.hit.publicationKey }}/fulltext" title="{{ \'chart.title.has_full_text\' | message }}" class="icon ttip-hov fa fa-file-text-o" ng-if="hit.hit.hasFullText"></a>\n    \t\t\t\t</div>\n    \t\t\t</div>\n    \t\t\t<div class="div-table-cell"><div class="div-table-head-mobile">{{ "patentField.publicationDate" | message }}</div> \n    \t\t\t\t<div class="div-table-cell-mobile">\n    \t\t\t\t\t<span ng-if="hit.hit.publicationDate">{{ hit.hit.publicationDate | date }}</span>\n    \t\t\t\t</div>\n    \t\t\t</div>\n                <div class="div-table-cell"><div class="div-table-head-mobile">{{ "patent.family.priority.claims" | message }}</div>\n                    <span ng-repeat="i in hit.indices">{{ i + 1 }}<span ng-if="!$last">, </span></span>\n    \t\t\t</div>\n    \t\t</div>\n    \t</div>\n    </div>\n    \x3c!-- End Div Table --\x3e\n    </div>\n\n</div>\n\n<div class="col-md-6">\n    <h4>{{ "patent.family.prioritiesTable.title2" | message }}</h4>\n    \n    <div class="table-responsive">    \n    \x3c!-- Start Div Table --\x3e\n    <div class="div-table">\n    \t<div class="div-table-heading">\n    \t\t<div class="div-table-row">\n    \t\t\t<div class="div-table-cell">#</div>\n    \t\t\t<div class="div-table-cell">{{ "patent.family.prioritiesTable.priorityKey" | message }}</div>\n    \t\t\t<div class="div-table-cell">{{ "patentField.filingDate" | message }}</div>\n    \t\t\t<div class="div-table-cell">\n                    <button class="btn btn-xxs" ng-if="family.docdbPriorities.length &gt; 1 &&  family.hitsWithPriorityIndices.length &gt; 1" ng-click="clearSelections()">\n                        {{ "results.selectTool.clear" | message }}\n                    </button>\n    \t\t\t</div>\n    \t\t</div>\n    \t</div>\t\n    \t<div class="div-table-body">\n    \t\t<div class="div-table-row" ng-repeat="priority in family.docdbPriorities">\n    \t\t\t<div class="div-table-cell"><div class="div-table-head-mobile">#</div> <div class="div-table-cell-mobile">{{ $index + 1 }}</div></div>\n    \t\t\t<div class="div-table-cell"><div class="div-table-head-mobile">{{ "patent.family.prioritiesTable.priorityKey" | message }}</div> \n    \t\t\t\t<div class="div-table-cell-mobile">\n                        <a href="${rc.contextPath}/patent/${priority.docdbPriorityKey}" ng-if="priority.inDocDB">{{ priority.docdbPriorityKey }}</a>\n    \t\t\t\t\t<span ng-if="!priority.inDocDB">{{ priority.docdbPriorityKey }}</span>\n    \t\t\t\t</div>\n    \t\t\t</div>\n    \t\t\t<div class="div-table-cell">\n                    <div class="div-table-head-mobile">{{ "patentField.filingDate" | message }}</div> \n                    <div class="div-table-cell-mobile"><span ng-if="priority.publicationDate">{{ priority.publicationDate | date }}</span></div>\n                </div>\n    \t\t\t<div class="div-table-cell">\n    \t\t\t\t<div class="div-table-head-mobile">\n    \t\t\t\t    <button class="btn btn-xxs" ng-if="family.docdbPriorities.length &gt; 1 &&  family.hitsWithPriorityIndices.length &gt; 1" ng-click="clearSelections()">\n                            {{ "results.selectTool.clear" | message }}\n                        </button>\n    \t\t\t\t</div> \n    \t\t\t\t<div class="div-table-cell-mobile">\n                        <span ng-if="family.docdbPriorities.length &gt; 1 &&  family.hitsWithPriorityIndices.length &gt; 1">\n                            <button class="btn btn-xxs" ng-class="{active: isHighlighted([$index])}" ng-click="highlight($index)">{{ "common.highlight" | message }}</button>\n                            &nbsp;\n                            <button class="btn btn-xxs" ng-class="{active: isFiltered([$index])}" ng-click="filter($index)">{{ "common.filter" | message }}</button>\n                        </span>\n    \t\t\t\t</div>\n    \t\t\t</div>\n    \t\t</div>\n    \t</div>\n    </div>\n    \x3c!-- End Div Table --\x3e\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _splitDateSpec=__webpack_require__(170);var _splitDateSpec2=_interopRequireDefault(_splitDateSpec);var _patentSearchBuilder=__webpack_require__(207);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _PatentFilters=__webpack_require__(595);var _PatentFilters2=_interopRequireDefault(_PatentFilters);var _urlQueryHelpers=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AnalysisViews=__webpack_require__(269);var deps=["$q","ScholarService"];var BoolMap={true:"On",false:"Off"};_app2.default.directive("lensPatentQueryDetails",[].concat(deps,[function($q,ScholarService){return{template:__webpack_require__(596),scope:{query:"<",filters:"<",resultSize:"<",joinQuery:"<",scholarlySearchId:"<"},link:function link(scope){var filters=scope.filters;var filterMap=(0,_patentSearchBuilder.filterMapFromObject)({filters:filters});_.keys(AnalysisViews).forEach(function(k){var field=AnalysisViews[k];_PatentFilters2.default[field.filterName]=field});_PatentFilters2.default["lensIdCreatedAfter"]={label:messages.prop("filters.lensIdCreatedAfter")};_PatentFilters2.default["orcidPatents"]={label:messages.prop("filters.inventor.orcidPatents")};scope.vm={term:(0,_urlQueryHelpers.getParam)("q"),fields:_PatentFilters2.default,filterMap:filterMap,noFilters:_.keys(filterMap).length===0,scholarlyQueryStats:(0,_get3.default)(window,"searchAppConfig.joinedQueryStats.scholar")||{},valueMaps:{npl:{},sat:{N:window.messages.prop("filters.biologicals.nucleotide"),P:window.messages.prop("filters.biologicals.peptide")},citesNpl:BoolMap,f:BoolMap,ft:BoolMap},newSearchLink:"/lens/new-search"+window.location.search+"&type=PATENT"};scope.joinQueryFilterCount=function(){if(scope.joinQuery&&scope.joinQuery.filterMap){return _.keys(scope.joinQuery.filterMap).reduce(function(count,k){return count+_.keys(scope.joinQuery.filterMap[k]).length},0)}else{return null}};if(filters.npl){var ids=filters.npl;var FIELDS=["metadata.title","record_lens_id_num","citation_ids"];var promise=ScholarService.getAll(ids,"lens_ids_num",FIELDS);$q.when(promise).then(function(articles){articles.forEach(function(article){scope.vm.valueMaps.npl[article.record_lens_id_num]=article.title})}).catch(function(err){console.warn(err)})}scope.excludeFilterDisplay=function(k){var EXCLUDE_FIELDS=["dates","orcidPatents"];return _.includes(EXCLUDE_FIELDS,k)};scope.updateQueryDetailsLogo=function(){scope.vm.singleInstitutionName=null;_.keys(scope.vm.filterMap).forEach(function(k){var map=scope.vm.filterMap[k];if((k==="owner"||k==="applicant")&&_.keys(map).length===1){_.keys(map).forEach(function(v){var b=map[v];if(b){scope.vm.singleInstitutionName=v}})}})};scope.removeFilterValue=function(k,v){window.location=window.location.href.replace(new RegExp("(not)?"+k+"F?="+window.encodeURIComponent(v),"i"),"")};scope.clearDateFilter=function(){window.location.search=(0,_urlQueryHelpers._updateSearchParams)("dates","")};scope.valueMaps=function(k,v){if(k==="j"){return v.toUpperCase()}};scope.clearTerm=function(){$("#q").val("");(0,_urlQueryHelpers.setParam)("q","");window.location.reload()};if(filters.dates.length){var date=(0,_splitDateSpec2.default)(filters.dates[0]);scope.vm.fromDate=date.start;scope.vm.toDate=date.end;scope.vm.dateType=date.type}scope.updateQueryDetailsLogo()}}}]))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={f:{label:window.messages.prop("filters.family.groupSimple")},citesNpl:{label:window.messages.prop("filters.citesNpl")},ft:{label:window.messages.prop("filters.fullText.docsWith")},fj:{label:window.messages.prop("filters.family.jurisdictions")},e:{label:window.messages.prop("filters.collections.expand")},sat:{label:window.messages.prop("filters.biologicals.title")},st:{label:window.messages.prop("patentResults.queryOptions.stemming")},plist:{label:window.messages.prop("filters.landscapes.items")},note:{label:window.messages.prop("filters.workspace.filterByNotes")},list:{label:window.messages.prop("filters.workspace.filterByCollections")},tags:{label:window.messages.prop("filters.workspace.filterByTag")},pnote:{label:window.messages.prop("filters.landscapes.notes")}}},function(module,exports){module.exports='<div class="query-details-container clearfix">\n    <div lens-applicant-logo name="vm.singleInstitutionName" ng-if="vm.singleInstitutionName"></div>\n    <div class="query-details">\n        <div class="query-details-query" ng-if="!scholarlySearchId">\n            <strong>\n                {{::\'common.patents\' | message}}\n            </strong>\n            <span class="query-details-count">\n                ({{resultSize | customNumber}})\n            </span>\n            <strong class="query-details-equals">=</strong>\n            <span ng-if="!vm.term">All Docs</span>\n            <a ng-href="{{vm.newSearchLink}}" class="edit-query-link pull-right btn btn-xs btn-pri">\n                <em class="fa fa-pencil"></em>\n                Edit Query\n            </a>\n            <span class="query-details-syntax-highlight" ng-if="vm.term">\n                <span lens-query q="vm.term" depth="1" query-type="patents"></span>\n                <em class="fa fa-minus-circle col-error"\n                    tooltip-title="Clear query"\n                    ng-click="clearTerm()"\n                ></em>\n            </span>\n        </div>\n\n        <div class="query-details-query" ng-if="scholarlySearchId">\n            <strong>Scholarly Works</strong>\n            <span class="query-details-count"\n                ng-if="vm.scholarlyQueryStats.joinResultSize"\n                tooltip-title="Of the {{vm.scholarlyQueryStats.unjoinedResultSize | customNumber}} scholarly works, {{vm.scholarlyQueryStats.joinResultSize | customNumber}} are cited in these patents.">\n                ({{vm.scholarlyQueryStats.unjoinedResultSize | customNumber}})\n            </span>\n\n            <span class="count badge" ng-if="joinQueryFilterCount()" tooltip-title="{{joinQueryFilterCount()}} scholarly filters applied">\n                {{joinQueryFilterCount()}}\n            </span>\n\n            <span class="query-details-divider"></span>\n\n            <strong>Citing Patents</strong>\n\n            <span class="query-details-count">\n                ({{resultSize | customNumber}})\n            </span>\n\n            <strong class="query-details-equals">=</strong>\n\n            <span ng-if="joinQuery.term">\n                <span lens-query q="joinQuery.term" depth="1"></span>\n            </span>\n            <span ng-if="!joinQuery.term">All Docs</span>\n\n            <span ng-if="vm.term">\n                <span class="col-meta-2">(</span>\n                <em>\n                    refined by\n                    <span class="query-details-syntax-highlight">\n                        <span lens-query q="vm.term" depth="1" query-type="patents"></span>\n                        <em class="fa fa-minus-circle col-error"\n                            tooltip-title="Clear query"\n                            ng-click="clearTerm()"\n                        ></em>\n                    </span>\n                </em>\n                <span class="col-meta-2">)</span>\n            </span>\n        </div>\n        <div class="query-details-filters">\n            <strong>{{::\'search.results.filtersLabel.patent\' | message}}:</strong>\n\n            <span class="query-details-filter-label"  ng-if="vm.noFilters">No filters applied</span>\n\n            <span ng-if="vm.fromDate || vm.toDate" class="query-details-filter-label">\n                {{vm.dateType === \'earliest_priority_date\' ? \'Earliest Priority Date\' : vm.dateType === \'filing_date\' ? \'Filing Date\' : \'Publication Date\'}}\n                <strong>=</strong>\n                <span class="col-meta-2">(</span>\n                <em>{{vm.fromDate | date}} - {{vm.toDate | date}}</em>\n                <em class="fa fa-minus-circle col-error"\n                    tooltip-title="Clear filter"\n                    ng-click="clearDateFilter()"\n                ></em>\n                <span class="col-meta-2">)</span>\n            </span>\n\n            <span ng-if="filters.orcidPatents" class="query-details-filter-label">\n                {{vm.fields.orcidPatents.label}}\n                <strong>=</strong>\n                <span class="col-meta-2">(</span>\n                <em lens-orcid-author orcid-id="filters.orcidPatents">{{filters.orcidPatents}}</em>\n                <em class="fa fa-minus-circle col-error"\n                    tooltip-title="Clear filter"\n                    ng-click="removeFilterValue(\'orcidPatents\', filters.orcidPatents)"\n                ></em>\n                <span class="col-meta-2">)</span>\n            </span>\n\n            <span ng-repeat="(k, map) in vm.filterMap" ng-if="!excludeFilterDisplay(k)" class="query-details-filter-label">\n                <span ng-repeat="(value, b) in map">\n                    <span ng-if="$first">\n                        {{vm.fields[k].label || k}}\n                        <strong>=</strong>\n                        <span class="col-meta-2">(</span>\n                    </span>\n                    <em>\n                        <span ng-if="!b">excl</span>\n                        {{ vm.valueMaps[k][value] || valueMaps(k, value) || (value | titleCase) }}\n                    </em>\n                    <em class="fa fa-minus-circle col-error"\n                        tooltip-title tooltip-title-variable="\'Clear \' + (vm.fields[k].label || k)"\n                        ng-click="removeFilterValue(k, value)"\n                    ></em>\n                    <span ng-if="!$last">,</span>\n                </span>\n                <span class="col-meta-2">)</span>\n                <em hidden class="fa fa-minus-circle col-error"\n                    tooltip-title tooltip-title-variable="\'Clear \' + (vm.fields[k].label || k)"\n                    ng-click="removeFilter(k)"\n                ></em>\n            </span>\n\n            <span ng-repeat="(k, values) in filters"\n                ng-if="values.length && angular.isArray(values)"\n                hidden\n            >\n                <span ng-if="k.indexOf(\'not\') === -1">{{vm.fields[k].label || k}}</span>\n                <span ng-if="k.indexOf(\'not\') === 0">Exclude {{vm.fields[k.slice(3)].label || k.slice(3)}}</span>\n                <strong>=</strong>\n                <span class="col-meta-2">(</span>\n                <span ng-repeat="value in values">\n                    {{ value | titleCase }}<span ng-if="!$last">,</span>\n                </span>\n                <span class="col-meta-2">)</span>\n            </span>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _d=__webpack_require__(38);var d3=_interopRequireWildcard(_d);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var chartColours=__webpack_require__(50);_app2.default.directive("lensPieChart",[function(){return{template:__webpack_require__(598),scope:{key:"<",data:"<",options:"=?",donut:"<",theme:"<",limit:"<",yAxisLabel:"<",elementClick:"<",height:"<",showLegend:"<"},link:function link(scope,element,attrs){var onClick=function onClick(d){};var _render=function _render(){var data=scope.data;var color=d3.scaleOrdinal().domain(data.map(function(d){return d.label})).range(chartColours);var padding=20;var width=Math.min(element.width()-padding*2,300);var height=width;var radius=Math.min(width,height)/2;var arc=d3.arc().innerRadius(radius*0).outerRadius(radius-1);var pie=d3.pie().padAngle(.005).sort(null).value(function(d){return d.value});var arcs=pie(data);var el=element.find(".pie-chart");el.css({padding:padding});el.empty();var total=d3.sum(data.map(function(d){return d.value}));var svg=d3.select(el[0]).append("svg").attr("width",width).attr("height",height).attr("text-anchor","middle").style("font","12px sans-serif");var g=svg.append("g").attr("transform","translate("+width/2+","+height/2+")");var tooltip=svg.append("text");g.selectAll("path").data(arcs).enter().append("path").attr("class","pie-chart-slice").attr("fill",function(d){return color(d.data.label)}).attr("d",arc).on("click",onClick).on("mousemove",function(e){var d=e.data;tooltip.attr("x",d3.event.offsetX+30).attr("y",d3.event.offsetY-10).text(e.data.text+" = "+Math.round(d.value/total*100)+"%")}).on("mouseleave",function(e){tooltip.text("")}).append("title").text(function(d){return d.data.label+": "+d.data.value.toLocaleString()});var text=g.selectAll("text").data(arcs).enter().append("text").attr("transform",function(d){return"translate("+arc.centroid(d)+")"}).attr("dy","0.35em");text.filter(function(d){return d.endAngle-d.startAngle>.25}).append("tspan").attr("x",0).attr("y","-0.7em").style("font-weight","bold").text(function(d){return d.data.label});text.filter(function(d){return d.endAngle-d.startAngle>.25}).append("tspan").attr("x",0).attr("y","0.7em").attr("fill-opacity",.7).text(function(d){return d.data.value.toLocaleString()})};var render=_.debounce(_render,400);scope.render=render;render()}}}])},function(module,exports){module.exports='<div>\n    <div class="pie-chart text-center"></div>\n    <form class="hidden">\n        <label class="input hidden">\n            Maximum Slices:\n            <input type="number" ng-model="limit" ng-change="render()">\n        </label>\n    </form>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _fuse=__webpack_require__(135);var _fuse2=_interopRequireDefault(_fuse);var _institutions=__webpack_require__(600);var _fieldsOfStudy=__webpack_require__(601);var _journals=__webpack_require__(602);var _substances=__webpack_require__(603);var _funders=__webpack_require__(604);var _keywords=__webpack_require__(605);var _applicants=__webpack_require__(606);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var IsoCountries=__webpack_require__(23);var deps=["ScholarService"];_app2.default.directive("lensQuickSearch",[].concat(deps,[function(ScholarService){return{link:function link(scope){var MAX_AUTOCOMPLETE=5;var authors=[];scope.focusLanding=function(){setTimeout(function(){document.querySelector(".quick-search-form-input").focus()},600)};var countries=_.keys(IsoCountries).map(function(key){return{key:key,label:IsoCountries[key].name,field:"author.affiliation.grid.address.country_code",type:"Institution Country/Region"}});var countryNames=countries.map(function(d){return d.label});var cannedFields=[].concat(_toConsumableArray(countries),_toConsumableArray(_applicants.applicants.map(function(key){return{key:key.toUpperCase(),label:key,field:"applicant",type:"Applicant",patent:true}})),_toConsumableArray(_keywords.keywords.map(function(key){return{key:key.toLowerCase(),label:key,field:"keyword",type:"Keyword"}})),_toConsumableArray(_funders.funders.map(function(key){return{key:key,label:key,field:"funding.organisation.keyword",type:"Funder"}})),_toConsumableArray(_journals.journals.map(function(key){return{key:key,label:key,field:"source.title",type:"Journal"}})),_toConsumableArray(_substances.substances.map(function(key){return{key:key,label:key,field:"chemical.substance_name",type:"Substance"}})),_toConsumableArray(_institutions.institutions.map(function(key){return{key:key,label:key,field:"author.affiliation.name",type:"Institution"}})),_toConsumableArray(_fieldsOfStudy.fieldsOfStudy.map(function(key){return{key:key,label:key,field:"field_of_study",type:"Field of Study"}})));var updateSuggestions=function updateSuggestions(){var term=scope.quickFormInput||"";if(term.length<3){return}var records=[].concat(_toConsumableArray(cannedFields),_toConsumableArray(authors.map(function(key){return{key:key,label:key,field:"author.display_name",type:"Author"}})));var results=new _fuse2.default(records,{shouldSort:true,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["label"]}).search(term).slice(0,MAX_AUTOCOMPLETE);scope.quickFormSuggestions=results};var fetchAuthorSuggestions=_.debounce(function(){var term=scope.quickFormInput;scope.authorSuggestionsLoading=true;scope.$digest();ScholarService.suggest("author.display_name.suggest",term).then(function(suggestions){scope.authorSuggestionsLoading=false;if(term!==scope.quickFormInput){console.warn("does not match. aborting");return}authors=suggestions.map(function(d){return d.text}).filter(function(d){return!_.includes(countryNames,d)});updateSuggestions();scope.$digest()}).catch(function(err){console.warn(err);scope.authorSuggestionsLoading=false})},200);scope.quickFormChange=function(){var term=scope.quickFormInput||"";if(term.length<3){return}fetchAuthorSuggestions();updateSuggestions()};scope.clickSuggestion=function(suggestion){scope.quickFormInput=suggestion.field+': "'+suggestion.key+'"';scope.quickFormSubmitting=true;setTimeout(function(){if(suggestion.patent){window.location="/lens/search?q="+scope.quickFormInput}else{$(".quick-search-form").submit()}},10)};scope.submitLandingQuickForm=function(){}}}}]))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var institutions=exports.institutions=["Harvard University","National Institutes of Health","Stanford University","University of Washington","Massachusetts Institute of Technology","Johns Hopkins University","University of Michigan","Max Planck Society","University of Pennsylvania","University of California, San Francisco","University of California, Los Angeles","University of California, San Diego","French Institute of Health and Medical Research","Centre national de la recherche scientifique","University of Tokyo","University of California, Berkeley","Washington University in St. Louis","Cornell University","University of North Carolina at Chapel Hill","Duke University","University of Wisconsin-Madison","University of Minnesota","Yale University","Columbia University","University of Pittsburgh","University of Toronto","University of Cambridge","Mayo Clinic","University of Texas MD Anderson Cancer Center","University of Illinois at Urbana–Champaign","Northwestern University","Howard Hughes Medical Institute","University of Texas Southwestern Medical Center","Brigham and Women's Hospital","University of Oxford","Imperial College London","Spanish National Research Council","California Institute of Technology","University of Southern California","University of California, Davis","Baylor College of Medicine","Kyoto University","Osaka University","University College London","New York University","Ohio State University","Case Western Reserve University","Chinese Academy of Sciences","Boston Children's Hospital","Emory University","Scripps Research Institute","University of Chicago","Carnegie Mellon University","Karolinska Institutet","University of Utah","IBM","Vanderbilt University","University of Texas at Austin","University of British Columbia","University of Florida","Memorial Sloan Kettering Cancer Center","University of Edinburgh","University of California, Irvine","Ludwig Maximilian University of Munich","Katholieke Universiteit Leuven","Johns Hopkins University School of Medicine","Boston University","École Polytechnique Fédérale de Lausanne","Utrecht University","Purdue University","Microsoft","McGill University","Pasteur Institute","Rutgers University","University of Alabama at Birmingham","University of Copenhagen","Princeton University","University of Virginia","Oregon Health & Science University","University of Arizona","University of Zurich","Icahn School of Medicine at Mount Sinai","University of Rochester","University of Illinois at Chicago","Tohoku University","Lund University","Cleveland Clinic","Heidelberg University","University of Maryland, College Park","Pennsylvania State University","National University of Singapore","Georgia Institute of Technology","University of Amsterdam","University of Iowa","Kyushu University","Fred Hutchinson Cancer Research Center","University of Melbourne","University of Manchester","Indiana University","Erasmus University Rotterdam","Texas A&M University","Weizmann Institute of Science","Seoul National University","University of Maryland, Baltimore","Hokkaido University","Lawrence Berkeley National Laboratory","Beth Israel Deaconess Medical Center","University of Milan","University of Helsinki","University of Miami","Technische Universität München","King's College London","Ghent University","ETH Zurich","Hebrew University of Jerusalem","Rockefeller University","University of Queensland","Institut national de la recherche agronomique","University of Alberta","Michigan State University","Tufts University","Technical University of Denmark","University of Paris","Albert Einstein College of Medicine","Nagoya University","Novartis","Wayne State University","Tel Aviv University","Uppsala University","Delft University of Technology","University of Glasgow","University of Colorado Denver","University of Bristol","University of Sydney","Université de Montréal","University of Southampton","German Cancer Research Center","University of Massachusetts Medical School","Sapienza University of Rome","University of California, Santa Barbara","University of São Paulo","University of Tübingen","Centers for Disease Control and Prevention","University of Texas Health Science Center at San Antonio","Charité","University of Kentucky","University of Texas Medical Branch","University of Nottingham","University of Colorado Boulder","University of Freiburg","University of Birmingham","University of Groningen","National Taiwan University","French Institute for Research in Computer Science and Automation","Brown University","North Carolina State University","Technion – Israel Institute of Technology","University of Calgary","Stony Brook University","Leiden University Medical Center","Thomas Jefferson University","National Research Council","Laboratory of Molecular Biology","University of Georgia","United States Department of Agriculture","University of Texas Health Science Center at Houston","University of South Florida","Pfizer","Dartmouth College","University of Massachusetts Amherst","Iowa State University","Hong Kong Polytechnic University","Hoffmann-La Roche","University of Sheffield","University of Oslo","University of Kansas","University of Erlangen-Nuremberg","Merck & Co.","University of Geneva","Rice University","Okayama University","VU University Amsterdam","Aarhus University","University of New South Wales","University of Barcelona","University of Göttingen","University of Bonn","Yeshiva University","École Normale Supérieure","Leiden University","The Chinese University of Hong Kong","University of Dundee","University of Missouri","Tsinghua University","Arizona State University","Keio University","Radboud University Nijmegen","Medical Research Council","Wake Forest University","Salk Institute for Biological Studies","Medical University of South Carolina","University of Tsukuba","University of Cincinnati","Cardiff University","University of Bologna","University of Padua","Genentech","University of Turin","University of Nebraska–Lincoln","University of Hong Kong","McMaster University","University of Leeds","Los Alamos National Laboratory","University of Western Ontario","GlaxoSmithKline","State University of New York System","Peking University","University of Lausanne","University of Liège","Shanghai Jiao Tong University","Pierre-and-Marie-Curie University","Bell Labs","University of Vienna","Goethe University Frankfurt","University of London","University of Düsseldorf","Medical College of Wisconsin","Yonsei University","University of Basel","Eindhoven University of Technology","University of Cologne","Zhejiang University","Ludwig Institute for Cancer Research","RWTH Aachen University","Laval University","Newcastle University","Broad Institute","Fudan University","Philips","St. Jude Children's Research Hospital","Wageningen University and Research Centre","Virginia Tech","Umeå University","Université catholique de Louvain","University of Bern","John Radcliffe Hospital","Queen Mary University of London","Tokyo Medical and Dental University","University of Connecticut","University of New Mexico","University of Nebraska Medical Center","Virginia Commonwealth University","Australian National University","Kanazawa University","Chiba University","University of Gothenburg","Hong Kong University of Science and Technology","University of Mainz","University of Hamburg","Hiroshima University","Vita-Salute San Raffaele University","University of Würzburg","Queen's University","University of Louisville","University of California, Riverside","Colorado State University","University of Leicester","Kumamoto University","Tokyo Institute of Technology","University of Ottawa","Cedars-Sinai Medical Center","Trinity College, Dublin","Monash University","VA Medical Center","University at Buffalo","Research Triangle Park","University of Paris-Sud","Cincinnati Children's Hospital Medical Center","University of Medicine and Dentistry of New Jersey","University of Florence","Academia Sinica","University of Ulm","Autonomous University of Barcelona","Medical University of Vienna","University of Waterloo","Indiana University Bloomington","University of Tennessee","National Institute of Advanced Industrial Science and Technology","Free University of Berlin","University of Liverpool","Anschutz Medical Campus","University of Adelaide","KAIST","Georgia Regents University","Lawrence Livermore National Laboratory","Temple University","Hannover Medical School","Tulane University","Georgetown University","Maastricht University","Hewlett-Packard","University of Kiel","University of Twente","Linköping University","University of California, Santa Cruz","Commonwealth Scientific and Industrial Research Organisation","Wellcome Trust Sanger Institute","University of Tennessee Health Science Center","Amgen","Complutense University of Madrid","National Institute of Standards and Technology","Intel","Sandia National Laboratories","Université libre de Bruxelles","Korea University","Oak Ridge National Laboratory","University of Western Australia","Karlsruhe Institute of Technology","Louisiana State University","Bristol-Myers Squibb","University College Dublin","Hungarian Academy of Sciences","Nanyang Technological University","Sun Yat-sen University","Paris Descartes University","Netherlands Cancer Institute","University of Manitoba","Science Applications International Corporation","Drexel University","University of California","University of Warwick","Ruhr University Bochum","University of Aberdeen","Durham University","External Organizations","Eli Lilly and Company","University of Münster","Russian Academy of Sciences","Houston Methodist Hospital","Kobe University","Fox Chase Cancer Center","Agricultural Research Service","Humboldt University of Berlin","Washington State University","Sanford-Burnham Institute for Medical Research","Argonne National Laboratory","University of Vermont","Oregon State University","Rush University Medical Center","University of Arkansas for Medical Sciences","Siemens","Dresden University of Technology","Children's Hospital of Philadelphia","Roswell Park Cancer Institute","Royal Institute of Technology","Vanderbilt University Medical Center","University of Naples Federico II","Cold Spring Harbor Laboratory","University of Auckland","United States Department of Veterans Affairs","University of Surrey","Karolinska University Hospital","Saint Louis University","University of Turku","Northeastern University","National and Kapodistrian University of Athens","Leipzig University","National Institute for Medical Research","Pohang University of Science and Technology","Walter and Eliza Hall Institute of Medical Research","Rensselaer Polytechnic Institute","Nagasaki University","AT&T Labs","Queen's University Belfast","Chalmers University of Technology","City of Hope National Medical Center","University of Pavia","Juntendo University","University of Texas at Dallas","Aalborg University","AstraZeneca","University of Tokushima","University of South Carolina","Uniformed Services University of the Health Sciences","University of Giessen","Curie Institute","Norwegian University of Science and Technology","University of Delaware","University of Oklahoma","University of Regensburg","Ben-Gurion University of the Negev","University of Pisa","University of Oulu","Vienna University of Technology","Kitasato University","University of Oklahoma Health Sciences Center","University of Notre Dame","University of Bergen","University of Rochester Medical Center","European Bioinformatics Institute","United States Naval Research Laboratory","University Health Network","University of Guelph","University of Montpellier","University of Stuttgart","University of Connecticut Health Center","State University of Campinas","University of Antwerp","Simon Fraser University","University of Central Florida","National Cheng Kung University","University of Houston","Federal University of Rio de Janeiro","Saarland University","Bilkent University","University of Marburg","Helsinki University Central Hospital","Shinshu University","Dalhousie University","University of York","Semmelweis University","Memorial Hospital of South Bend","QIMR Berghofer Medical Research Institute","Wistar Institute","University of Alabama","VU University Medical Center","Huazhong University of Science and Technology","Nagoya City University","Autonomous University of Madrid","Polish Academy of Sciences","RMIT University","George Washington University","National Yang-Ming University","Internal Medicine","Agency for Science, Technology and Research","University of Southern Denmark","Institut Gustave Roussy","Takeda Pharmaceutical Company","National Autonomous University of Mexico","Nara Institute of Science and Technology","Instituto de Salud Carlos III","Istituto Superiore di Sanità","St George's Hospital","University of Bordeaux","Kansas State University","University of Bath","University of Konstanz","University of Lyon","University of Rome Tor Vergata","University of Coimbra","Polytechnic University of Catalonia","University of Newcastle","Google","La Jolla Institute for Allergy and Immunology","City University of New York","Max Delbrück Center for Molecular Medicine","University of Otago","Niigata University","Charles University in Prague","Alcatel-Lucent","Monash University, Clayton campus","Swedish University of Agricultural Sciences","Vrije Universiteit Brussel","Experimental Therapeutics","Indian Institute of Science","University of Cincinnati Academic Health Center","Florida State University","University of Jena","University of Strasbourg","Gunma University","Radboud University Nijmegen Medical Centre","University of St Andrews","Brookhaven National Laboratory","University Medical Center Groningen","Stockholm University","University of Genoa","University of Navarra","Martin Luther University of Halle-Wittenberg","Fraunhofer Society","University of Valencia","Aix-Marseille University","Kindai University","Mitsubishi","Loyola University Chicago","Necker-Enfants Malades Hospital","University of Cape Town","University of Porto","University of Siena","George Mason University","Universidade Federal de Minas Gerais","Gifu University","Academy of Medical Sciences, United Kingdom","Sungkyunkwan University","Mount Sinai Hospital","Schering-Plough","China Medical University","Yamaguchi University","Shandong University","University of Ferrara","University of Wollongong","National Chiao Tung University","Pacific Northwest National Laboratory","University College Cork","University of Graz","Aarhus University Hospital","Graz University of Technology","University of Verona","Food and Drug Administration","Osaka City University","Mahidol University","New York Medical College","Walter Reed Army Institute of Research","Cancer Biology","University of Texas at San Antonio","Innsbruck Medical University","University of Bari","Lippincott Williams & Wilkins","Technical University of Berlin","Nihon University","Moscow State University","Sheba Medical Center","University of Strathclyde","Yokohama City University","Federal University of São Paulo","Kyoto Prefectural University of Medicine","University of Perugia","The Catholic University of America","University of Saskatchewan","University of Science and Technology of China","Chang Gung University","Polytechnic University of Turin","West Virginia University","Hanyang University","Novo Nordisk","Ontario Institute for Cancer Research","Peking Union Medical College","Polytechnic University of Valencia","Korea Research Institute of Bioscience and Biotechnology","University of Brescia","Nanjing University","University of Toulouse","Biochemistry and Molecular Biology","Tokai University","Oklahoma Medical Research Foundation","John Innes Centre","Kagoshima University","Columbia University Medical Center","Polytechnic University of Milan","University of Wales","Hammersmith Hospital","Helsinki University of Technology","Queensland University of Technology","University of Oregon","Georgetown University Medical Center","Leibniz Association","University of Reading","Kyung Hee University","Institute for Cancer Research","Loughborough University","Wuhan University","City University of Hong Kong","Bar-Ilan University","National Tsing Hua University","Immunology","Molecular & Cellular Oncology","University of Chile","Institute of Cancer Research","Lancaster University","University of East Anglia","Mie University","Catholic University of Korea","Center for Biologics Evaluation and Research","Kurume University","SRI International","University of Debrecen","University of Tampere","Sahlgrenska University Hospital","University of Rennes","Joseph Fourier University","Sichuan University","University of Nice Sophia Antipolis","University of Sussex","Albany Medical College","Université de Sherbrooke","University of Innsbruck","Ehime University","University of Parma","Wellcome Trust Centre for Human Genetics","Technische Universität Darmstadt","Ajou University","Dublin City University","University of Szeged","Tufts Medical Center","Austrian Academy of Sciences","Oncology","Guy's Hospital","Georgia State University","Yahoo!","Academy of Sciences of the Czech Republic","Molecular Biosciences","Norwich Research Park","Oswaldo Cruz Foundation","Boehringer Ingelheim","Biogen Idec","Brandeis University","University of Seville","Montana State University","University of Duisburg-Essen","Biochemistry & Molecular Biology","LSU Health Sciences Center New Orleans","Genetics","Kyungpook National University","University of Lübeck","University of Palermo","Dalian Institute of Chemical Physics","Technische Hochschule","Otto-von-Guericke University Magdeburg","PARC","Showa University","Tottori University","University of Hawaii at Manoa","University of Ljubljana","Chonnam National University","Brigham Young University","Nokia","Teikyo University","VCU Medical Center","Central South University","Shriners Hospitals for Children","University of Exeter","Nippon Medical School","Peter MacCallum Cancer Centre","Chungnam National University","Copenhagen University Hospital","École Polytechnique","Pompeu Fabra University","Sao Paulo State University","York University","Cell Biology and Tumor Biology","Oklahoma State University–Stillwater","Universidade Federal do Rio Grande do Sul","University of Ulsan","National University of Ireland, Galway","Sapporo Medical University","University of Buenos Aires","University of Maryland, Baltimore County","Roy J. and Lucille A. Carver College of Medicine","Catholic University of the Sacred Heart","Clemson University","Hitachi","Second Military Medical University","Syracuse University","University of Zaragoza","Jilin University","University of Catania","National Presto Industries","Surgical Oncology","Pusan National University","Nanjing Medical University","St Thomas' Hospital","Institute for Academic Medicine","Royal Free Hospital","Garvan Institute of Medical Research","Urology","European Institute of Oncology","Biotechnology Institute","University of Granada","Paul Sabatier University","St George's, University of London","University of Victoria","National Defense Medical Center","Southampton General Hospital","University of Crete","Bielefeld University","Samsung","Tokyo University of Agriculture and Technology","Microbiology and Immunology","Paris Diderot University","University of Salamanca","Tampere University of Technology","University of Nevada, Reno","Pathology and Laboratory Medicine","Royal Children's Hospital","Xi'an Jiaotong University","Carleton University","School of Biological Sciences","St. Vincent's Health System","University of Modena and Reggio Emilia","University of Trieste","Children's Hospital Oakland Research Institute","National Cancer Institute United States","New York State Department of Health","Oslo University Hospital","University of Missouri–Kansas City","Scripps Health","University of Shizuoka","Istituto Giannina Gaslini","Henry Ford Health System","Forschungszentrum Jülich","Fourth Military Medical University","Konkuk University","Ames Research Center","Griffith University","Hochschule Hannover","University of Oviedo","Fukuoka University","Western General Hospital","Rega Institute for Medical Research","Aston University","University of Fribourg","Geneva College","Texas Tech University Health Sciences Center","The Royal Marsden NHS Foundation Trust","Istituto Clinico Humanitas","MedImmune","Pharmacy","University of Pretoria","Claude Bernard University Lyon 1","International Agency for Research on Cancer","London Research Institute","Baylor University","Systems Biology","Ewha Womans University","GE Healthcare","University of Hawaii","University of Nantes","Ghent University Hospital","Mount Sinai Hospital, Toronto","RIKEN","St. Jude Children Research Hospital","Bayer","Genzyme","Braunschweig University of Technology","Fondazione IRCCS Istituto Nazionale dei Tumori","University of Lisbon","Babraham Institute","Medicine","University of the Basque Country","Ciber","Waseda University","Erasmus University Medical Center","Fondazione IRCCS Ca' Granda Ospedale Maggiore Policlinico","Kettering University","Hematology","J. Craig Venter Institute","Kaiser Permanente","Stellenbosch University","DuPont","State University of New York Upstate Medical University","Radiation Oncology","Toho University","Istituto Europeo di Oncologia","International Centre for Genetic Engineering and Biotechnology","La Trobe University","University of Tartu","Capital Medical University","Institute of Microbial Chemistry","Utah State University","Technical University of Madrid","University of Texas at Arlington","Auburn University","National Scientific and Technical Research Council","University of Toyama","Children's National Medical Center","East Carolina University","Indiana University – Purdue University Indianapolis","Jagiellonian University","Medical University of Graz","École normale supérieure de Lyon","Massachusetts Eye and Ear Infirmary","University of Bradford","University of Kent","Genitourinary Medical Oncology","Statens Serum Institut","Beckman Research Institute","Hamamatsu University","IEEE#TAB#","Jikei University School of Medicine","King Saud University","University of Mississippi","Pontifical Catholic University of Chile","Translational Cancer Research","United States Military Academy","University of Eastern Finland","Osaka Prefecture University","Robert Koch Institute","Carnegie Institution for Science","Discovery Institute","Montreal Neurological Institute and Hospital","Aristotle University of Thessaloniki","Catholic University of Leuven","University of Iceland","St Mary's Hospital","University of Arkansas","General Electric","Kennedy Krieger Institute","Lincoln's Inn","Kaohsiung Medical University","Shizuoka University","Taipei Medical University","University at Albany, SUNY","San Diego State University","St. Michael's Hospital","University of Santiago de Compostela","China Agricultural University","French Alternative Energies and Atomic Energy Commission","SUNY Downstate Medical Center","Translational Genomics Research Institute","World Health Organization","CERN","Janssen Pharmaceutica","National Health Service","St Bartholomew's Hospital","Tongji University","University of Montana","Yamagata University","Korea Institute of Science and Technology","National Chung Hsing University","University of Messina","Chungbuk National University","Xiamen University","Instituto Politécnico Nacional","Pennington Biomedical Research Center","University of South Alabama","Seconda Università degli Studi di Napoli","University of Bremen","University of Patras","Kyoto Pharmaceutical University","Harbin Institute of Technology","Saitama Medical University","Slovak Academy of Sciences","Johnson & Johnson","Royal Melbourne Hospital","NewYork–Presbyterian Hospital","University of Essex","Creighton University","Mitsubishi Electric Research Laboratories","University of Cagliari","National Institute of Genetics","University of Toledo","University of Tromsø","Boston Medical Center","Flinders University","Florida International University","University of Technology, Sydney","University of Trento","Boston College","Haukeland University Hospital","Malmö University","A.O.U. San Martino - IST, Istituto Nazionale Ricerca sul Cancro","Isis Pharmaceuticals","Macquarie University","Samsung Medical Center","Hyogo College of Medicine","Molecular Genetics","Nestlé","Brunel University London","Chonbuk National University","Collège de France","Functional and Structural Genomics","Public health laboratory","Southeast University","Ajinomoto","Health Protection Agency","Heriot-Watt University","National Institute for Basic Biology, Japan","International Institute of Minnesota","Kansai Medical University","New Jersey Institute of Technology","Royal College of Surgeons in Ireland","Shiga University of Medical Science","University of the Witwatersrand","VTT Technical Research Centre of Finland","AT&T","Kaiserslautern University of Technology","Research Institute of Molecular Pathology","Toshiba","University of Mississippi Medical Center","Wright State University","North Shore-LIJ Health System","University of Hertfordshire","Buck Institute for Research on Aging","National Health Research Institutes","Southern Medical University","University of Rostock","Air Force Research Laboratory","Chulalongkorn University","Curtin University","Indian Institute of Technology Bombay","DSM","Eötvös Loránd University","Illinois Institute of Technology","King Abdullah University of Science and Technology","Stem Cell Transplantation","Third Military Medical University","Lille University of Science and Technology","Nankai University","University of Malaya","Cancer Center","Lehigh University","Massey University","Ohio University","Regeneron","Translational Molecular Pathology","University of Minho","Birkbeck, University of London","Epigenetics & Molecular Carcinogenesis","Gyeongsang National University","Neuroscience","Cairo University","Langley Research Center","McGill University Health Centre","Chung-Ang University","Japanese Foundation for Cancer Research","University of Maryland Biotechnology Institute","University of North Carolina at Charlotte","Penn State Milton S. Hershey Medical Center","St James's University Hospital","University of Udine","Xerox","Akita University","Baylor University Medical Center","Huazhong Agricultural University","Loma Linda University","Tokyo University of Science","university of lille","University of Canterbury","Nara Medical University","Hospital for Special Surgery","Monsanto","Thoracic Head & Neck Medical Oncology","University of Murcia","Fujita Health University","Inha University","Millennium Pharmaceuticals","Wellcome Trust","Concordia University","Melanoma Medical Oncology","National Defense Medical College","Partners HealthCare","University of L'Aquila","Bosch","Motorola","National Institute on Drug Abuse","Texas Biomedical Research Institute","United States Department of Energy","Ericsson","National Institute for Biological Standards and Control","University of Virginia Health System","Humboldt State University","Royal Hallamshire Hospital","Gifu Pharmaceutical University","University of the Ryukyus","Agriculture and Agri-Food Canada","Henry Ford Hospital","Royal Holloway, University of London","University of Science and Technology, Sana'a","Internal Medicine - Hematology/Oncology","Life Sciences Institute","University of South Australia","Indian Institutes of Technology","Maynooth University","Nanjing Agricultural University","Alfred Hospital","Carlsberg Laboratory","Genomic Medicine","Budapest University of Technology and Economics","Cell Biology","United States Army Medical Research Institute of Infectious Diseases","Jichi Medical University","National Institute for Materials Science","Eisai","Swiss Institute of Bioinformatics","University of Zagreb","Hematopathology","Ulster University","Kangwon National University","Pathology","Biology","Chugai Pharmaceutical Co.","Empresa Brasileira de Pesquisa Agropecuária","Kagawa University","Masaryk University","Beaumont Hospital","Binghamton University","Naval Postgraduate School","Royal Prince Alfred Hospital","University of Luxembourg","Breast Medical Oncology","Loyola University Medical Center","Mississippi State University","Tokyo Medical University","University of Wisconsin–Milwaukee","Wyss Institute for Biologically Inspired Engineering","Bioinformatics & Computational Biology","Department of Pathology","Gynecological Oncology & Reproductive Medicine","Hallym University","IRCCS Fondazione Policlinico San Matteo","Southern Illinois University Carbondale"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var fieldsOfStudy=exports.fieldsOfStudy=["Biology","Chemistry","Biochemistry","Molecular biology","Medicine","Organic chemistry","Computer science","Immunology","Internal medicine","Inorganic chemistry","Genetics","Physics","Endocrinology","Electronic engineering","Virology","Materials science","Analytical chemistry","Optics","Chromatography","Gene","Artificial intelligence","Photochemistry","Engineering","Mathematics","Surgery","Antibody","Enzyme","Cancer research","Pathology","Anatomy","Cell biology","Anesthesia","Cancer","Computer vision","Receptor","Antigen","Diabetes mellitus","Botany","Real-time computing","Nuclear magnetic resonance","Cardiology","Catalysis","Composite material","Immune system","Microbiology","Gene expression","Polymer","Amino acid","Computer network","Virus","DNA","Cell culture","Control theory","Signal transduction","Control engineering","Psychology","Cell","Pattern recognition","Distributed computing","Disease","Monoclonal antibody","Physical therapy","Pharmacology","Architecture","Peptide","Laser","Apoptosis","Inflammation","Ranging","Optoelectronics","Thin film","Mathematical optimization","Cytokine","Chemotherapy","Bioinformatics","Bacteria","Cytotoxic T cell","Machine learning","Mutation","Molecule","T cell","Aqueous solution","RNA","Theoretical computer science","Radiation","Ion","Peptide sequence","Stereochemistry","Radiology","Membrane","Nanotechnology","In vivo","Data mining","Mutant","Communication channel","Kinase","Epitope","Substrate","Ligand","Transcription factor","Parallel computing","Intensive care medicine","Metallurgy","Stem cell","Silicon","Adsorption","Escherichia coli","Nanoparticle","Complementary DNA","Binding site","Condensed matter physics","Crystallography","Hydrolysis","Tumor necrosis factor alpha","Cellular differentiation","General surgery","Phenomenon","Metabolism","Plasmid","Phosphorylation","Polymerization","Transcription","Cell growth","Atomic physics","Metal","Messenger RNA","Oxide","Genetic enhancement","Locus","Growth factor","Carcinogenesis","Breast cancer","Carcinoma","Transfection","Insulin","CMOS","Programmed cell death","Genome","Bone marrow","Neuroscience","Crystal","Solvent","Protein subunit","Mass spectrometry","Hormone","Voltage","Agonist","Nucleic acid sequence","Database","Intracellular","Angiogenesis","Simulation","Secretion","Copolymer","Carbon","Protein kinase A","Doping","Fluorescence","Image processing","Algorithm","Endothelial stem cell","Bandwidth","Oxygen","Recombinant DNA","Cell cycle","Experimental data","Immunotherapy","Monomer","Cytotoxicity","Dielectric","Extracellular","Regulation of gene expression","Metastasis","Hydrogen","Polymer chemistry","Oligonucleotide","Cholesterol","Biosynthesis","Fatty acid","Pathogenesis","Enzyme inhibitor","Glycoprotein","Ligand","Statistics","Platelet","Genotype","Psychiatry","Electrical engineering","Microstructure","Wavelength","Lymphocyte","Electrode","Antibiotics","Downregulation and upregulation","Software","Sodium","Promoter","Potency","Extracellular matrix","Optical fiber","Antioxidant","Computer security","Transgene","Detector","Indexation","B cell","Polymerase chain reaction","Geology","Attenuation","Reagent","Haematopoiesis","Oxidative stress","Interferon","Allele","Discrete mathematics","Signal processing","Protease","Pharmacokinetics","Placebo","Kidney","Ischemia","Biological activity","Electronic circuit","Lung","Scanning electron microscope","Alkyl","Fusion protein","Spectroscopy","High-performance liquid chromatography","Blood pressure","Crystal structure","Multimedia","Elevation","Proinflammatory cytokine","Prostate cancer","Fiber","Biotechnology","Modulation","Amorphous solid","In vitro","Nucleic acid","Ecology","Saccharomyces cerevisiae","Mineralogy","Fermentation","Risk factor","Effector","Chemical vapor deposition","Antenna","Cancer cell","Calcium","Semiconductor","Solubility","Biomarker","Nuclear magnetic resonance spectroscopy","Electrochemistry","Waste management","Moiety","Amplifier","Embedded system","Pi","Diode","Gel electrophoresis","Immunity","Artificial neural network","The Internet","Primer","Chloride","Electrical resistivity and conductivity","Instability","Colorectal cancer","Animal model","Membrane protein","Interleukin","Carbon nanotube","Classical mechanics","Adverse effect","Amplitude","Heart disease","Stroke","Redox","Particle","Progenitor cell","Copper","Mechanism of action","Epitaxy","Nitric oxide","Nitrogen","Melanoma","Major histocompatibility complex","Wafer","Bicyclic molecule","Integrated circuit","Transistor","Vesicle","Exon","Pulse","Affinity chromatography","Pixel","CD8","Electrolyte","Speech recognition","Myocardial infarction","Glutathione","Mitochondrion","Aryl","Antimicrobial","Central nervous system","Vaccination","Magnetic resonance imaging","Annealing","Waveguide","Monolayer","Stimulation","Binding protein","Robustness","Lung cancer","Tyrosine kinase","Molecular cloning","Agronomy","Respiratory disease","Crystallization","Protein structure","Refractive index","Heart failure","Information retrieval","Ceramic","Active site","Myocyte","Cell adhesion","Chromosome","Immunohistochemistry","Cysteine","Virulence","Feature extraction","Throughput","Coating","Telecommunications","Scattering","Chip","Enantioselective synthesis","Liposome","Nucleotide","Integrin","Yeast","Chirality","Antigen-presenting cell","Endoplasmic reticulum","Dopamine","Embryonic stem cell","Electron","Resonance","Nonlinear system","Endothelium","Mesenchymal stem cell","Reporter gene","Randomized controlled trial","Raman spectroscopy","Cell type","Beam","Dermatology","Drug delivery","Spectral line","Rheumatoid arthritis","Protein biosynthesis","Alcohol","Lithium","Scalability","Vascular endothelial growth factor","Hydrogen bond","Innate immune system","Combinatorial chemistry","Obesity","Biosensor","Clinical trial","Protein kinase B","Monocyte","Specific activity","Infrared spectroscopy","Immunogenicity","X-ray crystallography","Polarization","Drug","Signal-to-noise ratio","Image segmentation","Filter","Zinc","Peripheral blood mononuclear cell","Radiation therapy","Plasma","Band gap","Adhesion","Cationic polymerization","Gallium arsenide","Gene product","Serine","Human–computer interaction","Lesion","Magnetic field","Artery","Particle size","Cytoplasm","Protein kinase C","Stromal cell","Cellulose","Image resolution","Metabolite","Iterative reconstruction","Transition metal","Chemokine","Control system","Adenocarcinoma","Ethanol","Ether","Urology","Gene isoform","Viral replication","Lipopolysaccharide","Lipoprotein","Pregnancy","Leukemia","Epidermal growth factor","Cell surface receptor","Gene silencing","Staphylococcus aureus","Polysaccharide","Immunodeficiency","Estrogen","Network packet","Dispersion","Small molecule","Cycling","Glutamate receptor","Capacitor","Matrix","Skeletal muscle","MAPK/ERK pathway","T-cell receptor","Phospholipid","Dendritic cell","Glycosylation","Photoluminescence","Tissue engineering","Systems engineering","Scheduling","Immunoglobulin E","Alzheimer's disease","Chelation","Heterojunction","Developmental psychology","Reactive oxygen species","Radiochemistry","Nuclear medicine","Remote sensing","Dissolution","Adipose tissue","Microwave","Insulin resistance","Prostate","Phosphate","Receptor tyrosine kinase","Atom","Body weight","Embryo","Enzyme assay","Spite","Dentistry","Waveguide","Obstetrics","Type 2 diabetes","Cell membrane","Decoding methods","Radical","Vascular disease","Nanocomposite","microRNA","Wound healing","Arginine","Human leukocyte antigen","Epithelium","Computational chemistry","Bioavailability","Serotype","Diffraction","Quantum mechanics","Microscopy","Spin-½","Anisotropy","Neuroprotection","Capacitance","Pyridine","Asthma","World Wide Web","Stimulus","Single crystal","IL-2 receptor","Amide","Interferometry","Electric field","DNA repair","Liquid crystal","Cartilage","Oxidative phosphorylation","Cluster analysis","Cell adhesion molecule","Interleukin 21","Alkylation","Cell signaling","Thrombin","Activator","Adjuvant","Resonator","Palladium","Field-effect transistor","Trypsin","Urinary system","Side chain","Geotechnical engineering","Transmission electron microscopy","Immunoglobulin G","Immunoassay","User interface","DNA methylation","cDNA library","Fibronectin","Acoustics","Base pair","Chromatin","Solar cell","Intron","Central nervous system disease","Single-nucleotide polymorphism","Fibroblast","Absorption","Expression vector","Data compression","Amyloid","Viscosity","Distortion","genomic DNA","Infrared","Differential scanning calorimetry","Heparin","Nanostructure","Stereoselectivity","Graphene","Tumor suppressor gene","Autoantibody","Adenosine","Small number","PI3K/AKT/mTOR pathway","Quality of service","Serotonin","Proteomics","Fetus","Wireless","Carboxylic acid","Nucleophile","Toxicology","Nickel","Conductivity","Multiple sclerosis","Autoimmune disease","Estrogen receptor","DNA damage","Cytoskeleton","Thermodynamics","Epidermal growth factor receptor","Ketone","Myeloid","Nitric oxide synthase","Gene mapping","Porosity","Lysis","Chemical structure","Fibrosis","Leakage","Prostaglandin","Alloy","Substituent","Gene expression profiling","Interference","Actin","Computation","M.2","Viral vector","Semiconductor laser theory","Albumin","Regimen","Reverse transcriptase","Herpes simplex virus","Environmental chemistry","Urine","Visualization","Transforming growth factor","Real-time polymerase chain reaction","Anode","Carbohydrate","Very-large-scale integration","Ultrasonic sensor","Nanowire","Methanol","Homogeneous","Pancreas","Ultimate tensile strength","Intramolecular force","RNA interference","Allergy","Wireless sensor network","Enhancer","Heart rate","Gas chromatography","Surface modification","Combinatorics","Biopsy","Transcriptional regulation","Cytosol","Interferon gamma","Microfluidics","Mitogen-activated protein kinase","Biomedical engineering","X-ray photoelectron spectroscopy","Polyclonal antibodies","Proteolysis","Sputtering","Lymph node","Mobile computing","Absorption spectroscopy","Chemical synthesis","Superoxide dismutase","Drug carrier","Signal peptide","Adduct","Serology","Orthogonal frequency-division multiplexing","Aldehyde","Crystallite","Economics","Computed tomography","Hemodynamics","Toxicity","Quantum dot","Renal function","Wild type","Kidney disease","Computer hardware","Micelle","Oncogene","Hydrogen peroxide","Chinese hamster ovary cell","Pulmonary surfactant","STREAMS","Retina","Arabidopsis thaliana","Excited state","Proton NMR","Sense","Computer architecture","Denaturation","Imaging phantom","Tumor progression","Image quality","NMDA receptor","Wireless network","Tyrosine phosphorylation","Alternative splicing","Finite element method","Medical emergency","Neuron","Ultrasound","Interleukin 2","Steric effects","Phenols","Medical physics","DNA-binding protein","Electrical impedance","Cathode","Quantum well","Spleen","Heat shock protein","Operon","DNA microarray","Aluminium","Ethylene","Point mutation","Sepsis","Hepatitis C virus","Reaction rate constant","Hippocampus","Alkaline phosphatase","Ethylene glycol","Analgesic","Environmental engineering","Epigenetics","MOSFET","Lysine","Biomass","Colloid","Ageing","Enantiomer","Necrosis","Saline","Genetic marker","Food science","Dominance","Molecular physics","Sulfur","Implant","Arthritis","Drug discovery","Carbon dioxide","Interleukin 12","Neurodegeneration","Natural language processing","Conjugated system","Antigen presentation","Starch","Superconductivity","Prospective cohort study","Chemical reaction","Corrosion","Ribosomal RNA","Methylation","Titanium","Reaction mechanism","DNA replication","Repressor","Glycine","Regioselectivity","Fourier transform","Staining","Nucleoside","Elution","Methionine","Mutagenesis","Ionic bonding","Lymphoma","Programming language","Inhibitory postsynaptic potential","Plasma protein binding","Computer graphics","Acetic acid","Electronics","Polymerase","Restriction enzyme","Viral disease","Mobilization","Acquired immune system","RNA splicing","Dementia","Compromise","Phenotype","Bovine serum albumin","Isozyme","Ovarian cancer","Fading","Mammary gland","DNA sequencing","Apolipoprotein B","Lipid peroxidation","Aliphatic compound","Automotive engineering","Self-healing hydrogels","Spinal cord","Cleavage","Salmonella","In situ hybridization","Genetically modified mouse","Fibroblast growth factor","Grating","Server","Error detection and correction","Bit error rate","CD40","Crystallinity","Polyethylene","Histamine","Autoimmunity","Internet privacy","Cobalt","MHC class I","Autocrine signalling","Dimer","Motion estimation","Quantitative analysis","Halide","Arachidonic acid","Mitosis","Ruthenium","Receptor antagonist","Epidemiology","Neurotransmitter","Proteases","Matrix metalloproteinase","Gene delivery","Cyclic voltammetry","Synchronization","Boron","Sol-gel","Standardization","Estimation theory","Calibration","Drug resistance","Radioimmunoassay","Electrical conductor","Mathematical analysis","Desorption","Potassium","Ionic liquid","Retinal","Cofactor","Lens","Tyrosine","Blood vessel","Ammonium","Magnesium","Hydrocarbon","Thrombosis","G protein-coupled receptor","Hemoglobin","G protein","Structure–activity relationship","Pseudomonas aeruginosa","Vibration","Sampling","Cognitive psychology","Open reading frame","Coronary artery disease","Econometrics","Waveform","Oscillation","Blood flow","Lipid bilayer","Light-emitting diode","Nucleation","Tissue culture","Genetic analysis","Ammonia","Mycobacterium tuberculosis","Bacterial outer membrane","Magnetization","Response element","Proto-oncogene tyrosine-protein kinase Src","Vasodilation","Ionization","Multiplexing","Sintering","Glioma","Strain","Adaptive filter","Monte Carlo method","Caspase","DNA polymerase","Frequency domain","Benzene","Gynecology","Transmembrane protein","NAD+ kinase","Network topology","Self-assembly","Current density","Ion implantation","Thiol","Polyacrylamide gel electrophoresis","Glass transition","Renin–angiotensin system","Red blood cell","Phosphatidylcholine","Iterative method","Nonlinear optics","Light scattering","Medicinal chemistry","Cognition","Lag","Wavelength-division multiplexing","Testosterone","Tolerability","Blood proteins","Platelet-derived growth factor receptor","Tuberculosis","Nanocrystal","Interleukin 6","Lactic acid","Heat transfer","Fibrinogen","Thermogravimetric analysis","Actuator","Molecular medicine","Limiting","Cytochrome P450","Endogeny","Transactivation","Haplotype","Latency","Antiserum","Photonics","Methane","Doxorubicin","Ultraviolet","Viability assay","Battery","MIMO","Social psychology","Reductase","Cell wall","Platinum","Aperture","Protein secondary structure","Coding region","Quantization","Wnt signaling pathway","Molecular beam epitaxy","Logic gate","Sequence analysis","Operator","Electromagnetic coil","Oligosaccharide","Cycloaddition","Combustion","Knowledge management","Androgen","Chemotaxis","Dopaminergic","Western blot","Gene cluster","Total synthesis","Inflammatory bowel disease","Computational complexity theory","Cisplatin","Impurity","Animal studies","Structural engineering","Parkinson's disease","Dopant","Clinical Practice","Steroid","Genetic variation","Quantum efficiency","Macromolecule","Epoxy","Drop","Alanine","Polyunsaturated fatty acid","Protein folding","Ubiquitin","Biofilm","Wavelet","Grid","Adult stem cell","Fibrin","Neuropeptide","Single-mode optical fiber","Immunosuppression","Arabidopsis","Astrocyte","Functional analysis","Retinoic acid","Amphiphile","Chaperone","Triglyceride","Interpolation","Small interfering RNA","Lactam","Vitamin","Lipase","Prodrug","Lupus erythematosus","Dehydrogenase","Rendering","Osteoarthritis","Plasmodium falciparum","Growth inhibition","Osteoporosis","Luminescence","Peptide hormone","Gene family","Creatinine","Opioid","Sputter deposition","Genomic library","Excretion","Cryptography","Genomics","Emulsion","Respiratory system","Radar","Thyroid","Lectin","Thermal conduction","Human genome","Pulse-width modulation","Acetonitrile","Glycoside","Conserved sequence","Superoxide","Clinical research","Analyte","Nervous system","Radical polymerization","Cohort"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var journals=exports.journals=["ChemInform","The Lancet","BMJ","Nature","PsycEXTRA Dataset","Notes and Queries","Science","PLOS ONE","F1000 - Post-publication peer review of the biomedical literature","SSRN Electronic Journal","Journal of the American Chemical Society","Choice Reviews Online","Physical Review B","Scientific American","Bulletin of the American Physical Society","Journal of Biological Chemistry","Benezit Dictionary of Artists","Lecture Notes in Computer Science","JAMA","Angewandte Chemie","Chemical & Engineering News","Advanced Materials Research","Reactions Weekly","Journal of Applied Physics","Proceedings of the National Academy of Sciences of the United States of America","Physical Review Letters","The American Historical Review","Journal of Chemical Physics","Cancer Research","IUCN Red List of Threatened Species","Japanese Journal of Applied Physics","Applied Physics Letters","Journal of the Acoustical Society of America","Analytical Chemistry","Gastroenterology","Proceedings of SPIE","The Astrophysical Journal","Journal of Geophysical Research","Applied Mechanics and Materials","Biochimica et Biophysica Acta","Blood","Investigative Ophthalmology & Visual Science","Japanese Circulation Journal-english Edition","Circulation","Tetrahedron Letters","Journal of Clinical Oncology","The Journal of Urology","The New England Journal of Medicine","Who Was Who","Physical Review D","JAMA: The Journal of the American Medical Association","Biochemical and Biophysical Research Communications","Nursing Standard","Journal of the American College of Cardiology","Journal of Organic Chemistry","SpringerReference","Physical Review A","Annals of the New York Academy of Sciences","American Journal of Obstetrics and Gynecology","Chemical Physics Letters","Scientific Reports","Biochemistry","Journal of Immunology","Lancet","Electronic Enlightenment document collection","Monthly Notices of the Royal Astronomical Society","SAE Technical Paper Series","Physics Letters B","Plastic and Reconstructive Surgery","Deutsche Medizinische Wochenschrift","Journal of Alloys and Compounds","Supplementum Epigraphicum Graecum","The American Journal of the Medical Sciences","Nuclear Physics","Who's Who","Journal of Physics: Conference Series","MRS Proceedings","Medicine and Science in Sports and Exercise","Dictionary Geotechnical Engineering/Wörterbuch GeoTechnik","AIP Conference Proceedings","The FASEB Journal","Fuel and Energy Abstracts","Acta Horticulturae","IFAC Proceedings Volumes","Chest","Neurology","Southern Medical Journal","Art Sales Catalogues Online","Astronomische Nachrichten","Biophysical Journal","Brain Research","Astronomy and Astrophysics","Journal of Chromatography A","Inorganic Chemistry","Materials Science Forum","Medical Physics","Fresenius Journal of Analytical Chemistry","Anesthesiology","Physical Review E","Radiology","International Journal of Radiation Oncology Biology Physics","FEBS Letters","Human Rights Documents online","Journal of Applied Polymer Science","The Quarterly Review of Biology","Physical Review","Biochemical Journal","Wörterbuch GeoTechnik/Dictionary Geotechnical Engineering","Annals of Internal Medicine","Journal of the American Medical Association","Oxford Music Online","Physics Letters A","Oxford Dictionary of National Biography","European Journal of Inorganic Chemistry","Journal of the Society of Mechanical Engineers","Thin Solid Films","Inpharma Weekly","PsycTESTS Dataset","CrossRef Listing of Deleted DOIs","Tetrahedron","American Political Science Review","The Journal of Physical Chemistry","Sax's Dangerous Properties of Industrial Materials","Physics Today","Environmental Science & Technology","Chemical Communications","Transplantation","Journal of Bacteriology","AAPG Bulletin","Journal of Chemical Education","International Journal of Rock Mechanics and Mining Sciences & Geomechanics Abstracts","Applied Optics","Applied Surface Science","RSC Advances","Electronics Letters","The Oxford Dictionary of National Biography","Journal of Magnetism and Magnetic Materials","Review of Scientific Instruments","Physical Review C","The Japan Society of Applied Physics","Fertility and Sterility","Key Engineering Materials","Canadian Medical Association Journal","The English Historical Review","Cancer","UK Tree Care Mailing List","The Journal of Physiology","The Boston Medical and Surgical Journal","SSRN Electronic Journal","Journal of Organometallic Chemistry","Value in Health","Inactive DOIs","Nucleic Acids Research","Vacuum","Journal of Crystal Growth","Pediatrics","Journal of Anhui Agricultural Sciences","Japanese Journal of Radiological Technology","American Journal of Psychiatry","Journal of Education","American Journal of Ophthalmology","Experimental Biology and Medicine","Surface Science","The Journal of Pediatrics","Journal of Agricultural and Food Chemistry","Solid State Communications","IEEE Transactions on Magnetics","Journal of Virology","Pediatric Research","Journal of The Electrochemical Society","Bulletin of Experimental Biology and Medicine","Books Abroad","Journal of the Physical Society of Japan","European Respiratory Journal","Nuclear Instruments & Methods in Physics Research Section A-accelerators Spectrometers Detectors and Associated Equipment","Macromolecules","Langmuir","Proceedings of the American Mathematical Society","American Journal of Cardiology","Chemischer Informationsdienst","Critical Care Medicine","NEJM Journal Watch","British medical journal","Analytica Chimica Acta","Endocrinology","American Journal of Nursing","New Scientist","Annals of the Rheumatic Diseases","Journal of Physical Chemistry B","Nihon rinsho. Japanese journal of clinical medicine","Anesthesia & Analgesia","Electrochimica Acta","American Journal of Sociology","Gastrointestinal Endoscopy","European Journal of Organic Chemistry","Nursing times","Geophysical Research Letters","Monthly Weather Review","Journal of High Energy Physics","Physica B-condensed Matter","Journal of Hepatology","Optics Express","Ugeskrift for Læger","The Annals of Thoracic Surgery","British Journal of Psychiatry","Journal of Materials Science","Applied and Environmental Microbiology","The Journal of Allergy and Clinical Immunology","Science News","European Journal of Pharmacology","Optics Communications","Veterinary Record","New England Journal of Medicine","American Heart Journal","Journal of Physical Chemistry C","European Journal of Cancer","Journal of Molecular Structure","The Musical Times","The Medical Journal of Australia","Journal of Physics: Condensed Matter","Bulletin of the Chemical Society of Japan","American Journal of Public Health","Nuclear Instruments & Methods in Physics Research Section B-beam Interactions With Materials and Atoms","Journal of Nuclear Materials","European Heart Journal","Der Neue Pauly","Obstetrics & Gynecology","Presse Medicale","Journal of Molecular Biology","Advances in Experimental Medicine and Biology","Russian Chemical Bulletin","Neurosurgery","British Journal of Surgery","Neuroscience Letters","Journal of Molecular Medicine","Dutch Pamphlets Online","Physical Chemistry Chemical Physics","The Journal of Neuroscience","Nederlands Tijdschrift voor Geneeskunde","Brill’s New Pauly","Journal of Electroanalytical Chemistry","Annals of Surgery","The American Journal of Medicine","Journal of Nervous and Mental Disease","Archives of Biochemistry and Biophysics","Radiotherapy and Oncology","Proceedings of the Royal Society of Medicine","Journal of Dairy Science","Archives of Disease in Childhood","AJN, American Journal of Nursing","The Journal of the Acoustical Society of America","American Journal of Roentgenology","The NamesforLife Abstracts","Social Science Research Network","Archives of Dermatology","Methods of Molecular Biology","Journal of Animal Science","FEBS Journal","The Journal of Clinical Endocrinology and Metabolism","Urology","Speculum","Chemistry Letters","Science","International Affairs","Phytochemistry","JAMA Internal Medicine","IOP Conference Series: Materials Science and Engineering","Zeitschrift für anorganische und allgemeine Chemie","Stroke","Journal of the Franklin Institute","Journal of Colloid and Interface Science","Psyccritiques","The American Journal of Gastroenterology","Journal of Pediatric Surgery","Tidsskrift for Den Norske Laegeforening","Science of The Total Environment","Zeitschrift für Physikalische Chemie","Polymer","Journal of Materials Chemistry","Optics Letters","Journal of Physics A","Journal of Physical Chemistry A","The American journal of physiology","British Journal of Dermatology","Open-File Report","The Japanese Journal of Urology","The Hospital","Journal of Economic Entomology","Physica Status Solidi B-basic Solid State Physics","Academy of Management Proceedings","Materials Science and Engineering A-structural Materials Properties Microstructure and Processing","Isis","Acta Crystallographica Section E-structure Reports Online","Classical Review","Journal of Pharmacology and Experimental Therapeutics","Annals of Oncology","Naturwissenschaften","Journal of the American Ceramic Society","Materials Letters","French Studies","Industrial & Engineering Chemistry Research","Cellular and Molecular Life Sciences","Planta Medica","Journal of Hypertension","arXiv: High Energy Physics - Phenomenology","International Journal of Cardiology","Chemie Ingenieur Technik","Plant Physiology","Journal of Applied Physiology","The Journal of Infectious Diseases","Journal of Clinical Investigation","DMW - Deutsche Medizinische Wochenschrift","Annalen der Physik","Infection and Immunity","Journal of Medicinal Chemistry","Acta Crystallographica Section A","Synfacts","Läkartidningen","Synthesis","Procedia - Social and Behavioral Sciences","American Journal of Surgery","American Anthropologist","Chemistry: A European Journal","Microbiology","The American Mathematical Monthly","Life Sciences","The Journal of Thoracic and Cardiovascular Surgery","Slavic Review","Analytical and Bioanalytical Chemistry","Microelectronics Reliability","Journal of Neurochemistry","Journal of the Neurological Sciences","Geological Magazine","Journal of Power Sources","Journal of Neurosurgery","Physica Status Solidi","The Journal of Asian Studies","Transportation Research Record","Transactions of the American Mathematical Society","International Journal of Heat and Mass Transfer","Archives of Ophthalmology","The Journal of American History","InPharma","Inorganica Chimica Acta","Clinical Infectious Diseases","Journal of Clinical Microbiology","Psychological Reports","Chemosphere","Rofo-fortschritte Auf Dem Gebiet Der Rontgenstrahlen Und Der Bildgebenden Verfahren","Antimicrobial Agents and Chemotherapy","Industrial & Engineering Chemistry","World Literature Today","Procedia Engineering","Analytical Biochemistry","International Journal of Hydrogen Energy","Journal of Mathematical Analysis and Applications","IEEE Transactions on Nuclear Science","Biochemical Pharmacology","Journal of Physics D","Biochemical Society Transactions","The Classical Review","Journal of Investigative Dermatology","Organic Letters","Atherosclerosis","Organometallics","Nippon Kagaku Kaishi","Vaccine","Journal of Sound and Vibration","Transactions of the American Nuclear Society","Otolaryngology-Head and Neck Surgery","Virology","Physical review. E, Statistical, nonlinear, and soft matter physics","South African Medical Journal","Journal of Fluid Mechanics","Journal of the Optical Society of America","Annals of Emergency Medicine","Bioorganic & Medicinal Chemistry Letters","The Astronomical Journal","American Journal of Clinical Pathology","Church History","Chemical & Pharmaceutical Bulletin","Alzheimers & Dementia","Journal of The Chemical Society-perkin Transactions 1","International Journal of Computer Applications","International Journal of Cancer","Anaesthesia","Clinical Orthopaedics and Related Research","Zootaxa","European Psychiatry","ACS Symposium Series","Perceptual and Motor Skills","Oxford Handbooks Online","Physica C-superconductivity and Its Applications","Gene","Journal of the American Statistical Association","Nephrology Dialysis Transplantation","Encyclopedic Dictionary of Polymers","Orvosi Hetilap","Lexicon Gregorianum Online","Langenbeck's Archives of Surgery","Computer Engineering","Encyclopédie de l’Islam","Acta Paediatrica","Food Chemistry","Poultry Science","The SHAFR Guide Online","AIAA Journal","Talanta","Laryngoscope","The Journal of Nuclear Medicine","Modern healthcare","European Urology Supplements","Revue de Médecine Interne","Eos, Transactions American Geophysical Union","Journal of Non-crystalline Solids","Heart","Helvetica Chimica Acta","Water Science and Technology","European Neuropsychopharmacology","Journal of Vascular Surgery","Gut","Diabetes","American Journal of Botany","The Mathematical Gazette","Physics of Fluids","Khirurgii︠a︡","Hepatology","Wear","bioRxiv","Journal of Vision","Oxford Art Online","Electrical Engineering","British Journal of Pharmacology","Toxicology Letters","Chemical Engineering Science","Archiv der Pharmazie","Methods in Enzymology","Journal of Bone and Joint Surgery, American Volume","Journal of Cell Biology","Javma-journal of The American Veterinary Medical Association","Communications in Computer and Information Science","Canadian Journal of Chemistry","The Journal of Modern History","Physica Scripta","Transplantation proceedings","British Dental Journal","Colloids and Surfaces A: Physicochemical and Engineering Aspects","Journal of Physics B","Aquaculture","Critical Care","JAMA Pediatrics","Anthropology News","American Journal of Physics","Oncotarget","IEEE Transactions on Electron Devices","Hydrobiologia","La Revue du praticien","Conference proceedings : ... Annual International Conference of the IEEE Engineering in Medicine and Biology Society. IEEE Engineering in Medicine and Biology Society. Annual Conference","Neuroscience","Thrombosis and Haemostasis","Journal of Urology","Spectrochimica Acta Part A: Molecular and Biomolecular Spectroscopy","Pflügers Archiv: European Journal of Physiology","British Journal of Cancer","Annals of The American Academy of Political and Social Science","Contemporary Sociology","ACS Applied Materials & Interfaces","Journal of Membrane Science","Surgery","Thermochimica Acta","Journal of Neurology, Neurosurgery, and Psychiatry","The Journal of Ecclesiastical History","IUPAC Standards Online","Experimental Cell Research","The Journal of Economic History","Journal of Oral and Maxillofacial Surgery","Dalton Transactions","Journal of the American Academy of Dermatology","Schizophrenia Research","Earth and Planetary Science Letters","Behavioral and Brain Sciences","Medicine","International Journal of Gynecology & Obstetrics","Sensors and Actuators B-chemical","Advances in Intelligent Systems and Computing","Naunyn-schmiedebergs Archives of Pharmacology","Archives of Surgery","Academic Medicine","Journal of Pharmaceutical Sciences","The Auk","Chemical Engineering Journal","Journal of the National Cancer Institute","Acta Medica Scandinavica","Hortscience","Clinical Chemistry","British Journal of Haematology","Journal of The Chemical Society, Chemical Communications","Carbon","Public Health","Synlett","The Modern Language Journal","Acta Radiologica","Atmospheric Environment","Geochimica et Cosmochimica Acta","The Geographical Journal","Cell","Physica A-statistical Mechanics and Its Applications","Journal of Food Science","Journal of Experimental Medicine","Review & Expositor","Dictionary of Gems and Gemology","Journal of Hydrology","Analyst","Ecology","Chemical Physics","Fuel","The American Journal of Clinical Nutrition","Synthetic Metals","Journal of Mathematical Physics","Kidney International","Psychiatric Services","Ceramics International","Seibutsu Butsuri","Journal of Surgical Research","American Journal of Physiology","Computer Knowledge and Technology","The Journal of Religion","Journal of The American Academy of Dermatology","Archives of Physical Medicine and Rehabilitation","Molecular and Cellular Biology","arXiv: Astrophysics","Seg Technical Program Expanded Abstracts","NeuroImage","British Journal of Ophthalmology","The American Naturalist","Acta Crystallographica Section C-crystal Structure Communications","Advanced Materials","PharmacoEconomics & Outcomes News","Journal of Nutrition","Environmental Health Perspectives","Biological Psychiatry","Bulletin of the American Meteorological Society","Colloid and Polymer Science","Acta crystallographica. Section E, Structure reports online","Clinica Chimica Acta","Medicina Clinica","Vestnik khirurgii imeni I. I. Grekova","United Nations Treaty Series","Nursing","Arthritis & Rheumatism","School Science and Mathematics","Minerva Medica","Nature Communications","Solid State Ionics","Monatshefte Fur Chemie","Archiv Der Pharmazie","Journal of Trauma-injury Infection and Critical Care","Journal of The Chemical Society","Oxford Scholarship Online","Surface & Coatings Technology","Journal of Materials Processing Technology","Measurement Techniques","Obstetrical & Gynecological Survey","Journal of Molecular and Cellular Cardiology","Modern Language Review","Energy Procedia","The Journal of Agricultural Science","Developmental Biology","Lexikon des gesamten Buchwesens Online","BJA: British Journal of Anaesthesia","IEEE Transactions on Microwave Theory and Techniques","Lung Cancer","Circulation Research","IEEE Transactions on Antennas and Propagation","Physics of Plasmas","British Journal of Radiology","Journal of Bone and Joint Surgery-british Volume","Social Forces","Journal of Radioanalytical and Nuclear Chemistry","Bioresource Technology","Advances in Space Research","Spine","Applied Mathematics and Computation","Virchows Archiv","Springer-Lehrbuch","Journal of the American Geriatrics Society","Journal of Polymer Science Part A","Military Medicine","Optics and Spectroscopy","Cochrane Database of Systematic Reviews","IEEE Transactions on Automatic Control","Archives of Gynecology and Obstetrics","Journal of Vacuum Science and Technology","National Bureau of Economic Research","Lecture Notes in Electrical Engineering","Bollettino della Società italiana di biologia sperimentale","Ultrasound in Obstetrics & Gynecology","Endoscopy","Journal of The Franklin Institute-engineering and Applied Mathematics","Journal of Solid State Chemistry","Klinicheskaia meditsina","Postgraduate Medical Journal","Discrete Mathematics","Crop Science","Molecular Crystals and Liquid Crystals","Digestive Diseases and Sciences","Theology","Ophthalmology","Astrophysics and Space Science","Computer Science and Communications Dictionary","BJUI","Journal of Biomechanics","Journal of Natural History","The Indian medical gazette","The Journal of Theological Studies","Acta Ophthalmologica","Chemistry of Materials","Wiener Klinische Wochenschrift","Journal of Hazardous Materials","Materials Chemistry and Physics","Polyhedron","The Journal of Comparative Neurology","The International Journal of Advanced Manufacturing Technology","Journal of the American Dental Association","Journal of the American Oil Chemists' Society","Zeitschrift Fur Gastroenterologie","Medizinische Klinik","Carbohydrate Research","Survey of Anesthesiology","Collection of Czechoslovak Chemical Communications","Postgraduate Medicine","Electroencephalography and Clinical Neurophysiology","European Journal of Operational Research","Bulletin of the American Mathematical Society","Journal of Neurophysiology","Water Research","Journal of Physics and Chemistry of Solids","American Journal of Epidemiology","European Journal of Endocrinology","Rheumatology","Anticancer Research","Gynecologic Oncology","Microscopy and Microanalysis","Clinical Science","AORN Journal","Optometry and Vision Science","Gigiena i sanitariia","British Journal of Obstetrics and Gynaecology","Clinical Cancer Research","Australian Veterinary Journal","IEEE Photonics Technology Letters","MATEC Web of Conferences","Chemische Berichte","Social Science & Medicine","Cell and Tissue Research","Journal of Political Economy","Polski tygodnik lekarski","Genetics","Free Radical Biology and Medicine","Macromolecular Chemistry and Physics","Africa","Molecular Therapy","Harvard Law Review","Archives of Otolaryngology-head & Neck Surgery","Journal of Catalysis","Journal of the Royal Society of Medicine","Journal of Clinical Pathology","Journal of Cell Science","Biology of Reproduction","IOP Conference Series: Earth and Environmental Science","Foreign Affairs","The EMBO Journal","American Journal of Physiology-heart and Circulatory Physiology","Agronomy Journal","American Psychologist","Hypertension","Oncogene","American Journal of Tropical Medicine and Hygiene","Plant Disease","International Journal of Pharmaceutics","Development","Tectonophysics","Computer Simulation","arXiv: Quantum Physics","Journal of the Science of Food and Agriculture","Journal of Petroleum Technology","The Proceedings of JSME annual Conference on Robotics and Mechatronics","Mmw-fortschritte Der Medizin","Sensors","Journal of Dental Research","American Journal of Agricultural Economics","Thorax","American National Biography Online","EPL","Revista Clinica Espanola","Journal of Biochemistry","European Physical Journal A","The Journal of Higher Education","Transplantation Proceedings","Physical Therapy","Proceedings of the IEEE","Journal of Thermal Analysis and Calorimetry","Comptes rendus des séances de la Société de biologie et de ses filiales","Clinical Neurophysiology","Molecular Physics","Nippon Jibiinkoka Gakkai Kaiho","Praxis Journal of Philosophy","World Journal of Gastroenterology","American Mathematical Monthly","Metal Finishing","American Journal of Kidney Diseases","Water Resources Research","Lecture Notes in Mathematics","Human Reproduction","American Journal of Veterinary Research","Progress of Theoretical Physics","Physica D: Nonlinear Phenomena","Marine Pollution Bulletin","Journal American Water Works Association","Zeitschrift für Naturforschung B","The Journal of Experimental Biology","Americas","Physiology & Behavior","Diabetes Care","Forest Ecology and Management","American Journal of Hypertension","Gan to kagaku ryoho. Cancer & chemotherapy","Journal of Nanoscience and Nanotechnology","Mycologia","IEEE Transactions on Applied Superconductivity","Microwave and Optical Technology Letters","The Economic Journal","Journal of Luminescence","Zhurnal mikrobiologii epidemiologii i immunobiologii","American Journal of Pathology","Parasitology","Optical Engineering","Soil Science Society of America Journal","Catalysis Today","Energy","The Science News-Letter","Journal of Algebra","Theoretical Computer Science","Dermatology","Journal of Hand Surgery","Schweizerische Medizinische Wochenschrift","Drug Research","Journal of Cleaner Production","Journal of Heart and Lung Transplantation","Chinese Physics Letters","Journal of Pharmacy and Pharmacology","Neurocomputing","IEEE Spectrum","The Journal of Politics","Proceedings of the Water Environment Federation","Encyclopedia of Genetics, Genomics, Proteomics and Informatics","Journal of Antimicrobial Chemotherapy","Revue Belge De Philologie Et D Histoire","Journal of Neurology","Journal of Materials Research","Chinese Science Bulletin","Journal of Hydraulic Engineering","BioScience","The American Journal of Nursing","Metal Powder Report","Nihon Rinsho Geka Gakkai Zasshi","Biomaterials","International Journal of Quantum Chemistry","Applied Thermal Engineering","Pain","Ferroelectrics","Encyclopedia of Cancer","Michigan Law Review","Acta Chemica Scandinavica","Publications of the Astronomical Society of the Pacific","Journal of Parasitology","Biological Chemistry","Fems Microbiology Letters","American Journal of Human Genetics","Journal of Vascular and Interventional Radiology","Materials Research Bulletin","IEEE Transactions on Communications","European Journal of Immunology","Terapevticheskii Arkhiv","Nanotechnology","IEEE Transactions on Information Theory","ICPSR Data Holdings","European Journal of Anaesthesiology","Political Science Quarterly","Plant and Soil","Case Reports","The Journal of Antibiotics","Archives De Pediatrie","Epilepsia","Current Biology","Harefuah","Journal of Geography","Geburtshilfe Und Frauenheilkunde","Computer Engineering and Applications","Construction and Building Materials","Chemistry of Heterocyclic Compounds","Thrombosis Research","Journal of General Virology","Philosophical Magazine Series 1","The Journal of Rheumatology","Journal of Lightwave Technology","Microelectronic Engineering","Hawley's Condensed Chemical Dictionary","International Journal of Molecular Sciences","Desalination","arXiv: High Energy Physics - Theory","New Phytologist","Il Nuovo Cimento","Applied Microbiology and Biotechnology","Journal of Chemical & Engineering Data","Bone","Chinese Medical Journal","Yakugaku Zasshi-journal of The Pharmaceutical Society of Japan","BioMed Research International","Carbohydrate Polymers","Journal of The Chemical Society-dalton Transactions","European Food Research and Technology","Nanoscale","Animal Behaviour","Geophysics","Annales De Dermatologie Et De Venereologie","Journal of Laryngology and Otology","Synthetic Communications","IEEE Journal of Quantum Electronics","Geophysical Journal International","Journal of The American Dietetic Association","American Journal of International Law","Information Sciences","Acta Psychiatrica Scandinavica","American Antiquity","Japan Geoscience Union","Psychopharmacology","Journal of the American Oriental Society","Casopís lékar̆ů c̆eských","Quarterly Journal of the Royal Meteorological Society","European Journal of Pediatrics","English Journal","Social Service Review","Bulletin of the School of Oriental and African Studies","Physics World","Revue Philosophique de Louvain","Schweizerische Ärztezeitung","Bulletin des Médecins Suisses","Gynecologic and Obstetric Investigation","Philosophical Magazine","IEEE Transactions on Computers","Brain","Toxicon","SciVee","Fusion Engineering and Design","Transfusion","Journal of Heterocyclic Chemistry","Business History Review","Clinical Radiology","Akusherstvo i ginekologiia","Nature Biotechnology","Encyclopedic Dictionary of Landscape and Urban Planning","Journal of the Royal Asiatic Society","Revue Neurologique","Toxicology and Applied Pharmacology","Neuroscience Research","Münchener medizinische Wochenschrift","Transactions of The Royal Society of Tropical Medicine and Hygiene","American Journal of Respiratory and Critical Care Medicine","Journal of Theoretical Biology","American Journal of Medical Genetics","Molecules","F1000Research","Theriogenology","Sovetskaia meditsina","Biotechnology Advances","Biotechnology and Bioengineering","IEICE Transactions on Fundamentals of Electronics, Communications and Computer Sciences","Transportation Research Record: Journal of the Transportation Research Board","Journal of Symbolic Logic","Zamm-zeitschrift Fur Angewandte Mathematik Und Mechanik","Comptes rendus hebdomadaires des séances de l'Académie des sciences","Journal of Mathematical Sciences","Journal of Computational Physics","IEEE Transactions on Biomedical Engineering","IEICE Transactions on Communications","Planta","Journal of Endocrinology","The proceedings of the JSME annual meeting","Powder Technology","Nuclear Engineering and Design","Zeitschrift für Gastroenterologie","Textile Research Journal","Zeitschrift für Angewandte Chemie","Applied Physics A","Acta Oto-laryngologica","Aiche Journal","Arteriosclerosis, Thrombosis, and Vascular Biology","Hot Working Technology","Bioorganic & Medicinal Chemistry","Transactions of the Japan Society of Mechanical Engineers. C","ECS Transactions","Marine Ecology Progress Series","JAMA Neurology","Ophthalmologica","Notes","Ethics","Journal Fur Praktische Chemie-chemiker-zeitung","National Medical Journal of China","Nuclear Instruments and Methods","The American review of respiratory disease","Physiologia Plantarum","Corrosion","Phytopathology","Materials Science and Engineering: A","Le Journal De Physique Colloques","Evolution","Canadian Journal of Zoology","Klinische Monatsblatter Fur Augenheilkunde","Journal of Nuclear Science and Technology","Physics in Medicine and Biology","Mind","Molecular Genetics and Genomics","Clinical Nuclear Medicine","Journal of Pediatric Gastroenterology and Nutrition","Classical Philology","Linear Algebra and its Applications","Journal of Chemical Technology & Biotechnology","European Physical Journal C","Dictionary of Minor Planet Names","Expository Times","Physica B: Condensed Matter","Food Science","Radiation Protection Dosimetry","Cancer Letters","Journal of Experimental and Theoretical Physics","Vision Research","Irish Journal of Medical Science","International Journal of Modern Physics B","Acta Materialia","Canadian Journal of Physics","The Physics Teacher","The Journal of the American Dental Association","Energy & Fuels","Developmental Medicine & Child Neurology","International Journal of Solids and Structures","Journal of The American College of Surgeons","Journal of Cellular Physiology","Diabetologia","Revista Medica De Chile","Russian Physics Journal","Bulletin of The School of Oriental and African Studies-university of London","Hispania","Metallurgical and Materials Transactions A-physical Metallurgy and Materials Science","Human Immunology","International journal of engineering research and technology","Journal of Applied Spectroscopy","Zeitschrift für Naturforschung A","Landolt-Börnstein - Group III Condensed Matter","Solid State Phenomena","Materials & Design","Experimental Brain Research","Clinical Pharmacology & Therapeutics","Palaeogeography, Palaeoclimatology, Palaeoecology","Agricultural and biological chemistry","Journal of Cardiovascular Pharmacology","Journal of Molecular Spectroscopy","Journal of Experimental Botany","Oral Surgery, Oral Medicine, Oral Pathology","Environmental Toxicology and Chemistry","Music Educators Journal","Indian Journal of Medical Research","Bulletin of Environmental Contamination and Toxicology","Journal of Marketing","European Archives of Oto-rhino-laryngology","IEEE Transactions on Power Electronics","The Economic History Review","IEEE Transactions on Signal Processing","Digestive and Liver Disease","The Biochemical journal","Vox Sanguinis","Journal of the Marine Biological Association of the United Kingdom","Journal of Computational and Applied Mathematics","Plant and Cell Physiology","Victorian Reports","Vrachebnoe delo","Language","Kardiologiia","Journal of Cardiac Failure","Aircraft Engineering and Aerospace Technology","Journal of Vacuum Science & Technology B","Antiquity","Annals of Neurology","Journal of Prosthetic Dentistry","Annals of Otology, Rhinology, and Laryngology","Journal of Personality and Social Psychology","Procedia Computer Science","Botanical Gazette","Environmental Science and Pollution Research","AIDS"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var substances=exports.substances=["RNA, Messenger","Anti-Bacterial Agents","DNA","Calcium","Antineoplastic Agents","Biomarkers","Recombinant Proteins","Proteins","Antibodies, Monoclonal","Insulin","Bacterial Proteins","Oxygen","Transcription Factors","Blood Glucose","Peptides","Glucose","Water","Membrane Proteins","DNA-Binding Proteins","Cytokines","Amino Acids","Biomarkers, Tumor","Enzyme Inhibitors","Immunoglobulin G","Tumor Necrosis Factor-alpha","Cholesterol","Carrier Proteins","Culture Media","Antioxidants","DNA, Bacterial","Lipids","Peptide Fragments","DNA Primers","Sodium","Plant Extracts","Adenosine Triphosphate","Potassium","Antibodies","Immunosuppressive Agents","Ligands","Recombinant Fusion Proteins","Iron","Water Pollutants, Chemical","Collagen","RNA","DNA, Viral","Nitric Oxide","Nerve Tissue Proteins","Ethanol","Norepinephrine","Carbon Dioxide","Contrast Media","Isoenzymes","Fatty Acids","Estradiol","Nuclear Proteins","Polymers","Reactive Oxygen Species","RNA, Viral","Lipopolysaccharides","Antiviral Agents","Anti-Inflammatory Agents","Tritium","Antibodies, Viral","Triglycerides","DNA, Complementary","Plant Proteins","Cyclic AMP","Anticoagulants","Hydrocortisone","Glycoproteins","Drug Combinations","Fluorescent Dyes","Blood Proteins","Dopamine","Neoplasm Proteins","Testosterone","Hemoglobins","Serotonin","Antigens","Receptors, Cell Surface","Magnesium","Interferon-gamma","Membrane Glycoproteins","Copper","Nitrogen","Autoantibodies","Anti-Inflammatory Agents, Non-Steroidal","Viral Proteins","MicroRNAs","Antihypertensive Agents","Antigens, CD","Adrenal Cortex Hormones","Phospholipids","Phosphates","Epitopes","Glucocorticoids","RNA, Small Interfering","Interleukin-6","Hypoglycemic Agents","Sodium Chloride","NF-kappa B","Zinc","Proto-Oncogene Proteins","Progesterone","Protein-Serine-Threonine Kinases","Macromolecular Substances","Carbon Isotopes","Estrogens","Biocompatible Materials","Solutions","Epinephrine","Hydrogen Peroxide","Antifungal Agents","Creatinine","Glutathione","Actins","Genetic Markers","Alkaline Phosphatase","Heparin","Indoles","Pyridines","Indicators and Reagents","Pharmaceutical Preparations","Polyethylene Glycols","Antipsychotic Agents","Anti-Infective Agents","Solvents","Immunoglobulin M","Imidazoles","Dexamethasone","Iodine Radioisotopes","Tumor Suppressor Protein p53","Cisplatin","Doxorubicin","Acetylcholine","Anticonvulsants","Carbon","Soil","Adrenocorticotropic Hormone","Cyclophosphamide","Superoxide Dismutase","Radiopharmaceuticals","Antibodies, Bacterial","Immune Sera","Dietary Fats","Vascular Endothelial Growth Factor A","Serum Albumin","Analgesics","Green Fluorescent Proteins","Phenols","Saccharomyces cerevisiae Proteins","Oxidoreductases","Oligopeptides","Repressor Proteins","Luteinizing Hormone","Sulfonamides","Fungal Proteins","RNA, Ribosomal, 16S","Coloring Agents","Trans-Activators","Chlorides","Carcinogens","DNA, Neoplasm","Piperazines","Insecticides","Aspirin","Escherichia coli Proteins","Growth Hormone","Antigens, Bacterial","Immunoglobulins","Adenosine Triphosphatases","Antigens, Neoplasm","Transforming Growth Factor beta","Urea","C-Reactive Protein","Vasodilator Agents","Pyrimidines","Metals","Histones","Tyrosine","Liposomes","Arginine","Air Pollutants","Phosphoproteins","Trypsin","Organometallic Compounds","Cytochrome P-450 Enzyme System","Ascorbic Acid","Antidepressive Agents","Lactic Acid","Anti-HIV Agents","Cell Cycle Proteins","Protein Kinase C","Phosphorus","L-Lactate Dehydrogenase","Penicillins","Fluorouracil","Polysaccharides","Protein Kinase Inhibitors","Drugs, Chinese Herbal","Immunoglobulin E","Protein Kinases","Adrenergic beta-Antagonists","Antigens, Viral","Lipoproteins","Prolactin","Allergens","Acetates","Analgesics, Opioid","Prednisone","Interleukin-2","DNA, Mitochondrial","Drug Carriers","Protein Isoforms","ErbB Receptors","Glutamic Acid","Morphine","Proto-Oncogene Proteins c-akt","gamma-Aminobutyric Acid","Flavonoids","Histamine","Dietary Proteins","Thyroxine","Methotrexate","Adjuvants, Immunologic","Receptors, Estrogen","Calcium Channel Blockers","Cysteine","Hormones","Chromatin","Steroids","Angiotensin II","Titanium","Intracellular Signaling Peptides and Proteins","Catecholamines","Follicle Stimulating Hormone","Interleukin-1","Lactates","Drosophila Proteins","Delayed-Action Preparations","Ion Channels","Radioisotopes","Antitubercular Agents","Gold","Piperidines","Placebos","Environmental Pollutants","Protein-Tyrosine Kinases","Membranes, Artificial","Ions","Nitric Oxide Synthase","Platelet Aggregation Inhibitors","Homeodomain Proteins","Phosphatidylinositol 3-Kinases","Thymidine","Lysine","Antibodies, Monoclonal, Humanized","Soil Pollutants","Enzymes","Anesthetics, Local","Peptide Hydrolases","Insulin-Like Growth Factor I","Antineoplastic Agents, Phytogenic","Free Radicals","Immunoglobulin A","Carbohydrates","Carbon Radioisotopes","Propranolol","Neuroprotective Agents","Glycated Hemoglobin A","Prednisolone","HLA Antigens","Fibrinogen","Silicon Dioxide","Glycine","Vitamin D","Catalase","Angiotensin-Converting Enzyme Inhibitors","Proto-Oncogene Proteins c-bcl-2","Antigens, Surface","Tetradecanoylphorbol Acetate","Phosphatidylcholines","Sulfhydryl Compounds","Alanine Transaminase","Lead","Tumor Suppressor Proteins","Cell Adhesion Molecules","Isoproterenol","Thiazoles","Lectins","Thyrotropin","Muscle Proteins","Tryptophan","Vitamins","Adaptor Proteins, Signal Transducing","Caspase 3","Arabidopsis Proteins","Inflammation Mediators","Sewage","Protons","Aerosols","Mutagens","Protein Precursors","Aspartate Aminotransferases","Cyclosporine","Adenosine","Alkaloids","Fibrinolytic Agents","Mitogen-Activated Protein Kinases","Cadmium","Renin","Surface-Active Agents","RNA-Binding Proteins","GTP-Binding Proteins","Interferon-alpha","Indomethacin","Hypnotics and Sedatives","Diuretics","Proteome","NAD","Chorionic Gonadotropin","Nitrates","Dinoprostone","Gels","Neurotransmitter Agents","Hydroxymethylglutaryl-CoA Reductase Inhibitors","Endopeptidases","Fatty Acids, Nonesterified","Parathyroid Hormone","Fluorodeoxyglucose F18","Lipoproteins, LDL","Cholesterol, HDL","Gonadotropin-Releasing Hormone","Prostaglandins","Amyloid beta-Peptides","DNA, Ribosomal","Anti-Arrhythmia Agents","Leucine","Androgens","Membrane Transport Proteins","Receptors, N-Methyl-D-Aspartate","Complement System Proteins","Cellulose","Amines","Edetic Acid","Serum Albumin, Bovine","Atropine","Thrombin","Vitamin E","Interleukin-10","Folic Acid","Bacterial Toxins","Ammonia","Cholesterol, LDL","Pyrazoles","Methionine","RNA, Bacterial","Potassium Channels","Glutathione Transferase","Calcium Channels","Neuropeptides","Fluorides","Caspases","Heat-Shock Proteins","Intercellular Signaling Peptides and Proteins","Triiodothyronine","Antibiotics, Antineoplastic","Dietary Carbohydrates","Sucrose","Endotoxins","Sulfates","Corticosterone","Glucagon","Electrolytes","Mercury","Paclitaxel","Viral Vaccines","Iodine","Nicotine","Glycogen","Glycerol","Antimalarials","Antigen-Antibody Complex","DNA, Fungal","Amides","Glycosaminoglycans","Cross-Linking Reagents","Lipid Bilayers","Dextrans","Malondialdehyde","Hydrogen","Quaternary Ammonium Compounds","Creatine Kinase","Organic Chemicals","Acid Phosphatase","Oligodeoxyribonucleotides","Oxides","Prostate-Specific Antigen","Glutamates","Lidocaine","Aldosterone","Manganese","Vitamin A","Bilirubin","Cocaine","Oligosaccharides","Fibronectins","Superoxides","Growth Substances","Uric Acid","Adenosine Diphosphate","Angiogenesis Inhibitors","Serine Endopeptidases","Protease Inhibitors","DNA Transposable Elements","Pyrroles","Receptors, Immunologic","Erythropoietin","Dermatologic Agents","Epidermal Growth Factor","Calcium-Binding Proteins","DNA Restriction Enzymes","Metals, Heavy","Protein Subunits","Vincristine","Caffeine","DNA Probes","Composite Resins","Cytoskeletal Proteins","Leptin","Muramidase","Receptor, ErbB-2","Nitriles","Interleukin-4","Minerals","Cyclooxygenase 2","Phenylalanine","Receptors, Antigen, T-Cell","Receptors, G-Protein-Coupled","Protozoan Proteins","Nickel","Serine","Silver","Triazoles","Aspartic Acid","Histocompatibility Antigens Class II","Streptomycin","Quinolines","Alanine","Antirheumatic Agents","Acrylic Resins","Chelating Agents","Interferons","Buffers","Tretinoin","Lithium","Nucleotides","Biological Products","Bicarbonates","Bile Acids and Salts","Vasopressins","Tablets","Influenza Vaccines","Acetylcholinesterase","Cyclic GMP","Keratins","Adenylyl Cyclases","Cations","Anesthetics","Benzodiazepines","Benzimidazoles","Ribonucleases","Dust","Microtubule-Associated Proteins","Benzamides","Immunologic Factors","Gases","Histidine","Lipase","NADP","Codon","Interleukin-8","Formaldehyde","Vaccines","p38 Mitogen-Activated Protein Kinases","RNA, Ribosomal","Organophosphorus Compounds","Vitamin B 12","Aldehydes","Sodium-Potassium-Exchanging ATPase","Nerve Growth Factors","Oligonucleotides","Plant Oils","Cadherins","Proteoglycans","Esters","Receptors, Cytoplasmic and Nuclear","Psychotropic Drugs","Interleukin-1beta","Free Radical Scavengers","Nitric Oxide Synthase Type II","RNA, Transfer","Technetium","Cholinesterase Inhibitors","Hyaluronic Acid","Luciferases","Proline","Bacterial Outer Membrane Proteins","Phosphoric Monoester Hydrolases","Selenium","gamma-Globulins","Electron Transport Complex IV","Cortisone","Thyroid Hormones","Tetracycline","Theophylline","beta-Galactosidase","Fatty Acids, Unsaturated","Luminescent Proteins","Antimetabolites, Antineoplastic","Chloramphenicol","Cobalt","Pesticides","Dental Implants","Naphthalenes","beta-Lactamases","Hepatitis B Surface Antigens","Contraceptives, Oral","Central Nervous System Stimulants","Oxytocin","Peroxidase","Cycloheximide","Cephalosporins","Albumins","Bronchodilator Agents","Vasoconstrictor Agents","Somatostatin","Dactinomycin","Purines","Ferritins","Ferric Compounds","BCG Vaccine","Glutathione Peroxidase","Autoantigens","Serotonin Uptake Inhibitors","Extracellular Matrix Proteins","Guanidines","Melatonin","Receptors, GABA-A","Viral Envelope Proteins","Histocompatibility Antigens Class I","HLA-DR Antigens","ATP-Binding Cassette Transporters","Tamoxifen","Arachidonic Acid","Naloxone","Adenine","Receptors, Progesterone","Warfarin","Polyesters","Isoniazid","Methylprednisolone","Anti-Anxiety Agents","Multienzyme Complexes","Proteasome Endopeptidase Complex","Matrix Metalloproteinase 9","Nitrites","Bacterial Vaccines","Industrial Waste","Choline","Carotenoids","Gentamicins","Phenobarbital","Tissue Plasminogen Activator","Cardiotonic Agents","Potassium Chloride","Membrane Lipids","Concanavalin A","Mitochondrial Proteins","Quinazolines","Disulfides","Ovalbumin","Diazepam","Polysaccharides, Bacterial","Glycosides","Gonadal Steroid Hormones","Chitosan","Micelles","Peptides, Cyclic","Lactones","Heme","Mixed Function Oxygenases","Carbon Monoxide","TOR Serine-Threonine Kinases","Adrenergic beta-Agonists","Tubulin","Chlorophyll","Chlorpromazine","Intercellular Adhesion Molecule-1","Amylases","Lymphokines","Sirolimus","Myosins","Transforming Growth Factor beta1","Lipoproteins, HDL","Peroxidases","Rifampin","Acetaminophen","Detergents","Apolipoproteins E","Ubiquitin-Protein Ligases","Aluminum","Adenine Nucleotides","Extracellular Signal-Regulated MAP Kinases","DNA, Plant","Glutamine","Substance P","beta Catenin","Blood Group Antigens","Transferrin","Glycoside Hydrolases","Emulsions","Verapamil","DNA-Directed RNA Polymerases","Dental Materials","RNA, Neoplasm","Microfilament Proteins","Receptor Protein-Tyrosine Kinases","Benzoates","Reagent Kits, Diagnostic","Excitatory Amino Acid Antagonists","Forkhead Transcription Factors","Anti-Infective Agents, Local","Arachidonic Acids","Herbicides","Ouabain","Etoposide","Fructose","Isoquinolines","Receptors, Serotonin","Cyclic AMP-Dependent Protein Kinases","Galactose","Starch","Narcotics","Porphyrins","Pyruvates","DNA, Recombinant","Deoxycytidine","Trace Elements","Antibiotics, Antitubercular","Factor VIII","Colloids","Methane","Arsenic","Citrates","Levodopa","Apoptosis Regulatory Proteins","Tyrosine 3-Monooxygenase","Calcitonin","Cysteine Endopeptidases","Methanol","DNA, Single-Stranded","Antineoplastic Agents, Hormonal","Antigens, CD34","Virulence Factors","Aniline Compounds","Haloperidol","Eye Proteins","Sulfides","alpha-Fetoproteins","Nifedipine","Cardiovascular Agents","Reserpine","Receptors, Adrenergic, beta","Anticholesteremic Agents","Terpenes","Diphosphonates","Cyclooxygenase Inhibitors","Biphenyl Compounds","Plastics","Ki-67 Antigen","Caseins","Interleukins","Sulfones","Histamine H1 Antagonists","ATP Binding Cassette Transporter, Subfamily B, Member 1","Insect Proteins","Glial Fibrillary Acidic Protein","Tacrolimus","Horseradish Peroxidase","Alcohols","Tissue Extracts","Amphotericin B","Carcinoembryonic Antigen","Granulocyte-Macrophage Colony-Stimulating Factor","Atrial Natriuretic Factor","Sulfur","Glucuronidase","Fluoresceins","Thiophenes","Phosphotransferases","Granulocyte Colony-Stimulating Factor","Morpholines","Receptors, Drug","Air Pollutants, Occupational","Sesquiterpenes","Ketones","Anions","bcl-2-Associated X Protein","HSP70 Heat-Shock Proteins","Serotonin Antagonists","Guanine","ABO Blood-Group System","Molecular Chaperones","Dipeptides","Receptors, Tumor Necrosis Factor","Fibroblast Growth Factor 2","Fibrin","Polychlorinated Biphenyls","Bleomycin","Dimethyl Sulfoxide","Integrins","Chymotrypsin","Receptors, Androgen","Hypolipidemic Agents","Antibodies, Antinuclear","Prostaglandins E","Photosensitizing Agents","Brain-Derived Neurotrophic Factor","Halothane","Chemokines","Azathioprine","Collagen Type I","Particulate Matter","Adrenergic alpha-Antagonists","Homocysteine","Water Pollutants","Cytarabine","Durapatite","Proto-Oncogene Proteins c-fos","Nucleosides","Amyloid","Anthelmintics","CD4 Antigens","Laminin","Guanosine Triphosphate","Culture Media, Conditioned","Receptors, Nicotinic","Propionates","Calmodulin","Propofol","Prostaglandin-Endoperoxide Synthases","Triazines","Calcitriol","Chloroquine","Antibodies, Protozoan","Valine","Bradykinin","Human Growth Hormone","Calcium, Dietary","Esterases","Parasympatholytics","Colchicine","Mitogen-Activated Protein Kinase 1","Carbachol","Sodium Channels","Receptors, Dopamine","Matrix Metalloproteinase 2","Nucleic Acids","Coated Materials, Biocompatible","Erythromycin","Metalloendopeptidases","Nitrous Oxide","Ozone","Chromium","Interferon Type I","Methacrylates","Neuraminidase","Biotin","Waste Water","Antibodies, Anti-Idiotypic","Capsid Proteins","Barbiturates","Receptors, Cholinergic","Dietary Fiber","Phenytoin","Mitogen-Activated Protein Kinase 3","Coumarins","Iodine Isotopes","STAT3 Transcription Factor","Blood Coagulation Factors","Ophthalmic Solutions","Ampicillin","Glucosephosphate Dehydrogenase","Acids","Nitric Oxide Synthase Type III","Antigens, Protozoan","Diterpenes","Multiprotein Complexes","Colforsin","Phenylephrine","Clonidine","Alcohol Oxidoreductases","Pyrrolidines","Oligonucleotide Probes","Natriuretic Peptide, Brain","Anti-Ulcer Agents","Salts","Phosphatidylinositols","Fentanyl","Cations, Divalent","Oxidants","Hydrogels","Receptors, Muscarinic","Succinate Dehydrogenase","Powders","Vancomycin","Bromodeoxyuridine","Isoantibodies","Salicylates","Fluoroquinolones","Narcotic Antagonists","Carboxylic Acids","Thyrotropin-Releasing Hormone","Furans","Antigens, Differentiation","Interleukin-12","Hypoxia-Inducible Factor 1, alpha Subunit","Taxoids","Receptors, Opioid","Bone Density Conservation Agents","Polycyclic Aromatic Hydrocarbons","Ubiquitin","Oligonucleotides, Antisense","Tetrodotoxin","Anesthetics, Inhalation","Azo Compounds","Nicotinic Acids","Enterotoxins","Gastrins","Cancer Vaccines","Toll-Like Receptor 4","CD3 Complex","Stilbenes","Ointments","DNA, Protozoan","Analgesics, Non-Narcotic","Acetylcysteine","Epoprostenol","Receptors, Glucocorticoid","Tobacco Smoke Pollution","Transaminases","Receptors, Dopamine D2","Vinblastine","Ciprofloxacin","Basic Helix-Loop-Helix Transcription Factors","Amphetamine","Deuterium","Complement C3","Cyanides","Glucosides","3' Untranslated Regions","Rituximab","Phosphatidylethanolamines","Metronidazole","Immunoglobulins, Intravenous","Uridine","Mannitol","Ribosomal Proteins","Sodium Dodecyl Sulfate","Cholinesterases","tau Proteins","Calcium Phosphates","Disinfectants","Mucins","Peptidyl-Dipeptidase A","Fatty Acids, Omega-3","JNK Mitogen-Activated Protein Kinases","Nitroglycerin","NG-Nitroarginine Methyl Ester","Neurotoxins","Phosphodiesterase Inhibitors","Niacinamide","Capsules","Fibroblast Growth Factors","Vaccines, Synthetic","Nanotubes, Carbon","Triterpenes","Valproic Acid","Telomerase","DNA-Directed DNA Polymerase","Antigens, Differentiation, T-Lymphocyte","Endothelin-1","NADPH Oxidases","Silicones","Arginine Vasopressin","Calcium-Calmodulin-Dependent Protein Kinases","fas Receptor","Globins","Organoplatinum Compounds","Tranquilizing Agents","Bone Morphogenetic Proteins","Calcimycin","Polyamines","Type C Phospholipases","Benzofurans","Receptor, Insulin","Platelet-Derived Growth Factor","Receptors, Interleukin-2","Chemokine CCL2","Methadone","Nitroprusside","ras Proteins","Phospholipases A","Mitomycin","von Willebrand Factor","Immunoglobulin Fab Fragments","Reverse Transcriptase Inhibitors","Proliferating Cell Nuclear Antigen","Graphite","Corticotropin-Releasing Hormone","Metformin","Saponins","Oils","Hydrocarbons","Furosemide","PPAR gamma","Hemolysin Proteins","Macrolides","Gadolinium DTPA","Gonadotropins","Pigments, Biological","Anesthetics, Intravenous","Antilymphocyte Serum","Carbamates","Enzymes, Immobilized","Estrogen Receptor alpha","Tetrazoles","Bupivacaine","Melanins","Hydrolases","Ketamine","Adiponectin","Cyclin-Dependent Kinase Inhibitor p21","Mitogens","Phosphoprotein Phosphatases","Plant Growth Regulators","Antibodies, Monoclonal, Murine-Derived","titanium dioxide","Urokinase-Type Plasminogen Activator","Camptothecin","S100 Proteins","Toll-Like Receptors","Oils, Volatile","Silicon","Excipients","Vitamin K","Wnt Proteins","Cytochrome c Group","Milk Proteins","Amyloid beta-Protein Precursor","Vaccines, Attenuated","Gelatin","Immunoglobulin Heavy Chains","Caenorhabditis elegans Proteins","Phytohemagglutinins","Aryl Hydrocarbon Hydroxylases","Proto-Oncogene Proteins c-myc","Calcitonin Gene-Related Peptide","gamma-Glutamyltransferase","Thiazolidinediones","Ethanolamines","Phosphorus Isotopes","Cyclins","Dinoprost","Glycolipids","Lactose","Deoxyglucose","Vimentin","Calcium-Transporting ATPases","Propanolamines","Carboplatin","Succinates","Methyltransferases","Adrenergic alpha-Agonists","Gadolinium","Quinolones","Ribavirin","Digoxin","Polytetrafluoroethylene","Deoxyribonucleases","DNA Helicases","Hydrazines","Antimicrobial Cationic Peptides","Monoamine Oxidase","Bone Cements","Palladium","Histocompatibility Antigens","Chromosomal Proteins, Non-Histone"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var funders=exports.funders=["National Natural Science Foundation of China","NCI NIH HHS","NIGMS NIH HHS","NHLBI NIH HHS","NIAID NIH HHS","NIDDK NIH HHS","NINDS NIH HHS","NCRR NIH HHS","NICHD NIH HHS","NIMH NIH HHS","National Science Foundation","NIA NIH HHS","Wellcome Trust","Medical Research Council","NIDA NIH HHS","PHS HHS","NEI NIH HHS","NIEHS NIH HHS","NIAMS NIH HHS","Deutsche Forschungsgemeinschaft","Canadian Institutes of Health Research","Intramural NIH HHS","NCATS NIH HHS","NIADDK NIH HHS","National Research Foundation of Korea","NIAAA NIH HHS","Japan Society for the Promotion of Science","NIDCR NIH HHS","Natural Sciences and Engineering Research Council of Canada","U.S. Department of Energy","Fundamental Research Funds for the Central Universities","Biotechnology and Biological Sciences Research Council","NIBIB NIH HHS","Conselho Nacional de Desenvolvimento Científico e Tecnológico","NIDCD NIH HHS","European Research Council","China Postdoctoral Science Foundation","Australian Research Council","Engineering and Physical Sciences Research Council","Ministerio de Economía y Competitividad","Ministry of Education, Culture, Sports, Science and Technology","Howard Hughes Medical Institute","Coordenação de Aperfeiçoamento de Pessoal de Nível Superior","National Basic Research Program of China","Ministry of Science and Technology of the People's Republic of China","NHGRI NIH HHS","NIH HHS","Fundação de Amparo à Pesquisa do Estado de São Paulo","National Institutes of Health","China Scholarship Council","Schweizerischer Nationalfonds zur Förderung der Wissenschaftlichen Forschung","Department of Health","Agence Nationale de la Recherche","Seventh Framework Programme","Ministry of Science and Technology, Taiwan","Chinese Academy of Sciences","Russian Foundation for Basic Research","AHRQ HHS","FIC NIH HHS","Cancer Research UK","European Commission","Natural Science Foundation of Jiangsu Province","British Heart Foundation","NINR NIH HHS","Ministry of Education of the People's Republic of China","European Regional Development Fund","National Key Research and Development Program of China","NIMHD NIH HHS","Air Force Office of Scientific Research","Vetenskapsrådet","National Aeronautics and Space Administration","Basic Energy Sciences","Fundação para a Ciência e a Tecnologia","National Science Council","Bundesministerium für Bildung und Forschung","Consejo Nacional de Ciencia y Tecnología","NLM NIH HHS","Office of Naval Research","Narodowe Centrum Nauki","Russian Science Foundation","National Health and Medical Research Council","Grantová Agentura České Republiky","NSF","Academy of Finland","H2020 European Research Council","Telethon","NCCIH NIH HHS","Ministry of Science, ICT and Future Planning","Natural Science Foundation of Guangdong Province","National Research Foundation","Ministry of Education","Council of Scientific and Industrial Research","University Grants Commission","JSPS KAKENHI","Science and Engineering Research Board","Ministerio de Ciencia e Innovación","Nederlandse Organisatie voor Wetenschappelijk Onderzoek","Army Research Office","CIHR","Division of Chemistry"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var keywords=exports.keywords=["Experimental Lab Study","Inflammation","Pregnancy","Population","Cancer","Child","Demographic Factors","Developing Countries","Epidemiology","Obesity","Apoptosis","Research Methodology","Pharmacology","Depression","Mortality","Family Planning","Physiology","Pathology","Oxidative Stress","Breast Cancer","Prognosis","Children","Population Dynamics","Diagnosis","Metabolism","Developed Countries","Treatment","Rats","Meta-analysis","Aging","Adolescence","Stroke","Diseases","Economic Factors","Hypertension","Population Characteristics","Quality Of Life","Health","Behavior","Toxicologic Report","Biology","Diabetes","Genetics And Reproduction","Contraception","Surgery","Health Care And Public Health","Surgery, Operative","Biomedical And Behavioral Research","Infant","Risk Factors","Legal Approach","Magnetic Resonance Imaging","Public Health","Blood","Education","Asia","Review","Schizophrenia","Diabetes Mellitus","Geriatrics","Radiotherapy","Professional Patient Relationship","Heart Failure","Rehabilitation","Americas","Hiv","United States","Anxiety","Pain","Migration","Nutrition","Tuberculosis","Urine","Electrocardiography","Mice","Mitochondria","Studies","Chemotherapy","Antibiotics","Survival","Liver","Death And Euthanasia","Prostate Cancer","Drug Therapy","Europe","Genetics","Blood Pressure","Africa","Stress","North America","Asthma","Statistics","Biomarker","Adolescents","Prevalence","Gene Expression","Hospitals","Age Factors","Clinical Research","Epilepsy","Biomarkers","Exercise","Mri","Colorectal Cancer","Systematic Review","Autophagy","Reproduction","Socioeconomic Factors","Fertility","Hepatocellular Carcinoma","Multiple Sclerosis","Dogs","Infant, Newborn","Atrial Fibrillation","Physical Activity","Chromatography","Dementia","Atherosclerosis","Cognition","Brain","Lung Cancer","Ultrasound","Infection","Prevention","Bacteria","Rabbits","Electroencephalography","Radiography","Metastasis","Northern America","Elderly","Nanoparticles","Cardiovascular Disease","Cytokines","Screening","Mental Health","Biographies","Immunohistochemistry","Empirical Approach","Delivery Of Health Care","Alzheimer’s Disease","Reactive Oxygen Species","Hippocampus","Kidney","Pediatrics","Pharmacokinetics","Organization And Administration","China","Mass Spectrometry","Angiogenesis","Rheumatoid Arthritis","Research Report","India","Heart","Immunotherapy","Proliferation","Type 2 Diabetes","Bioethics And Professional Ethics","Alzheimer's Disease","Smoking","Microrna","Cytotoxicity","Anesthesia","Computed Tomography","Development","Communication","Myocardial Infarction","Learning","Escherichia Coli","Outcome","Angiography","Epigenetics","Policy","Complications","Insulin","Safety","History","Abnormalities","Calcium","Osteoporosis","Fmri","Melanoma","Outcomes","Gastric Cancer","Youth","Diet","Osteoarthritis","Trauma","Medicine","Memory","Evaluation","Measurement","Non-nasa Center","Skin","Insulin Resistance","Diagnosis, Differential","Socioeconomic Status","Pediatric","Evolution","Growth","Tissue Culture","Proteomics","Coronary Artery Disease","Erythrocytes","Metabolic Syndrome","Neoplasms","Nitric Oxide","Antioxidant","Africa South Of The Sahara","Polymorphism","Blood Proteins","Nursing","Rat","Programs","Microscopy, Electron","Sleep","Dna Methylation","Primary Care","Classification","Gender","Hypoxia","Alcohol","Parkinson's Disease","Incidence","Chronic Kidney Disease","Adolescent","Toxicity","Drug Delivery","Psychotherapy","Immunity","Qualitative Research","Obituaries","Transplantation","Crystal Structure","Vitamin D","Thrombosis","Health Services","Histology","Hormones","Malaria","Women","Antibodies","Postoperative Complications","Primary Health Care","Imaging","Echocardiography","Vaccine","Personality","Stem Cells","Pregnancy/complications","Psychiatry","Blood Transfusion","Glucose","Tuberculosis, Pulmonary","Mouse","Fluorescence","Human","Respiration","Hospital Administration","Viral Diseases","Biopsy","Cholesterol","Body Mass Index","Amino Acids","Dopamine","Allergy","Climate Change","Examinations And Diagnoses","Recurrence","Blood Chemical Analysis","Laparoscopy","Liver/metabolism","Sepsis","Electrophysiology","Mutation","Wounds And Injuries","Vaccination","Environment","Geographic Factors","Anatomy","Southern Asia","Cattle","Temperature","Uterus","Latin America","Education, Medical","Psychological Factors","Innate Immunity","Parkinson’s Disease","Contraceptive Methods","Infections","Dna","Management","Equipment And Supplies","Iron","Enzymes","Risk Assessment","Oncology","Endocrine System","Iran","Hemorrhage","Fish","Ovarian Cancer","Research","Metabolomics","Lung","Glaucoma","Differentiation","Viruses","Body Weight","Vision","Clinical Trials","Ultrasonography","Suicide","Nf-κb","Leukemia","Neurodegeneration","Macrophages","Cerebrospinal Fluid","Endoscopy","Physicians","Traumatic Brain Injury","Fertility Control, Postconception","Influenza","Air Pollution","Proteins","Cervical Cancer","Reliability","Pancreatic Cancer","Wound Healing","Palliative Care","Family And Household","Lipids","Therapy","Resistance","Hemoglobin","Fibrosis","Anemia","Copper","Electrophoresis","Cardiovascular Diseases","Chromosomes","Attention","Clinical Trial","Intervention","Psychology","Retina","Mycobacterium Tuberculosis","Cell Cycle","Serotonin","Tissue Engineering","Adsorption","Assessment","Pneumonia","Ethics","Knowledge","Regeneration","Collagen","Testosterone","Inflammatory Bowel Disease","Analytical Approach","Invasion","Autism","Comparative Studies","Therapeutics","Fatigue","Chitosan","Aneurysm","Plants","Estrogens","Mental Disorders","Self-assembly","Chemistry","Muscles","Liver Cirrhosis","Neuroprotection","Zebrafish","Neoplasm Diagnosis","Fatty Acids","Ovary","Perception","English Speaking Africa","Penicillin","Placenta","Older Adults","Pregnancy Complications","Genetics, Human","Potassium","Decision Making","Ros","Biofilm","Mesenchymal Stem Cells","Knee","Spatial Distribution","Sex","Attitude","Biomechanics","Abortion, Induced","Electromyography","Social Policy","Neurosurgery","Fractures","Validation","Pancreas","Microglia","Fungi","Surveillance","Bipolar Disorder","Adherence","Randomized Controlled Trial","Glioma","Leukocytes","Aged","Guinea Pigs","Mental Health Therapies","Adrenal Cortex Hormones","Morphology","Macrophage","Eastern Asia","Extracellular Matrix","Drosophila","Age","Transcriptome","Type 2 Diabetes Mellitus","Drugs","Stability","Neoplasms/experimental","Infant Mortality","Training","Culture","Copd","Eeg","P53","Genomics","Fetus","Family Planning Programs","Multiple Myeloma","Psoriasis","Lymphoma","Drug Resistance","Lipid Metabolism","Spinal Cord Injury","Tuberculosis, Pulmonary/therapy","Contraceptive Usage","Stains And Staining","Glioblastoma","Blood Circulation","Motivation","Antibiotics/therapeutic Use","Neuroinflammation","Kinetics","Macroeconomic Factors","Chemistry, Pharmaceutical","Fertility Measurements","Machine Learning","Antioxidants","Stomach","Phylogeny","Graphene","Streptomycin","Industrial Hygiene","Cats","Risk","Japan","Staphylococcus Aureus","Systemic Lupus Erythematosus","Survey","Percutaneous Coronary Intervention","Risk Factor","Cytokine","Acute Kidney Injury","Simulation","Taxonomy","Skin/diseases","Family Characteristics","Mirna","Sodium","Immunology","Quality Improvement","Efficacy","Urogenital System","Flow Cytometry","Central Nervous System","Cytology","Bone","Infant, Newborn/diseases","Milk","Labor","Thoracic Radiography","Cortisone/therapeutic Use","Comorbidity","Psychological Tests","Health Education","Mediterranean Countries","Dna Damage","Blood Coagulation","Adaptation","Molecular Dynamics","Patient Safety","Rna","Occupational Diseases","Antibiotic Resistance","Radiometry","Antioxidant Activity","Morbidity","Spleen","Peptides","Surveys","Biochemistry","Cystic Fibrosis","Progesterone","Chronic Obstructive Pulmonary Disease","Validity","Population Policy","Complication","Hemodialysis","Non-small Cell Lung Cancer","Food","Canada","Breast Neoplasms","Non-programmatic","Southeastern Asia","Peptic Ulcer","Infertility","Political Factors","Immune Response","Disability","Gastrectomy","Ulcerative Colitis","Genitalia","Biography","Program Activities","Rna-seq","Neoplasm Metastasis","Spinal Cord","Pcr","Infant Nutrition","Guidelines","Adult","Carcinoma","Histocytochemistry","Technology","Australia","General Practice","Next-generation Sequencing","Epinephrine","Western Europe","Psychosis","Zinc","Lung Neoplasms","Laboratory Examinations And Diagnoses","Blood Groups","Congenital Heart Disease","Medical Education","Molecular Docking","Emotion","Spine","Prediction","Sheep","Autoimmunity","Popular Approach/source","Adenocarcinoma","Microbiome","Tumor","Parents","Dermatology","Migraine","Skeletal Muscle","Animal Model","Literature Review","Photosynthesis","Heart Surgery","Sampling Studies","Critique","Emergency Department","Ischemic Stroke","Bleeding","Neuroimaging","Optical Coherence Tomography","Arteriosclerosis","Pulmonary Embolism","Poisoning","Chronic Pain","Carbon Dioxide","Phosphorylation","Ethnic Groups","Head And Neck Cancer","Coronary Disease","Salmonella","Colon Cancer","Tobacco","Sex Behavior","Bone Marrow","Cell Proliferation","Hiv Infections","Myocardium","Targeted Therapy","Dentistry","Cell Division","Neoplasm Radiotherapy","Social Support","Microarray","Autism Spectrum Disorder","Economic Development","Cesarean Section","Arthritis, Rheumatoid","Physical Therapy","Industrial Medicine","Gene Therapy","Spectrophotometry","Language","Embryo","Organizations","Diarrhea","Endometriosis","Testis","Ischemia","Hemagglutination","Bladder Cancer","Cortisol","Signal Transduction","Histamine","Arrhythmia","Histopathology","Microbiota","Hypothalamus","Bariatric Surgery","Health Promotion","Acute Coronary Syndrome","Cisplatin","Bioinformatics","Breast","Working Memory","Renal Cell Carcinoma","Microscopy","Fracture","Northern Europe","Liver Function Tests","Radiation Effects","Pseudomonas Aeruginosa","Antigens","Positron Emission Tomography","Adipose Tissue","Nigeria","Type 1 Diabetes","Body Temperature","Kidney Diseases","Nmr","Water","Addiction","Hepatitis C Virus","Acth/therapeutic Use","Pet","Oxygen","Nitrogen","Adhd","Skin Transplantation","Resuscitation","Cadmium","Radiation","Arthritis","Heparin","Squamous Cell Carcinoma","Burns","Chemistry, Analytical","Carbon Isotopes","Nuptiality","France","Heavy Metals","Vaccines","Pancreatitis","Culture Media","Case Report","Oral Contraceptives","Religion","Liver Transplantation","Cultural Background","Gait","Contraceptive Methods--side Effects","Dog","Kidney Transplantation","Qualitative","Sarcoma","Functional Connectivity","Cirrhosis","Immunization","Sterilization, Sexual","Pulmonary Hypertension","Norepinephrine","Cost-effectiveness","Menopause","Cerebellum","Rural Population","Magnesium","Marriage","Bacteriophage","Eastern Africa","Eye","Contraceptive Agents","Pathogenesis","Syphilis","Transcription","Glutathione","Ageing","Curcumin","Religious Approach","Elisa","Emotions","Immunosuppression","Stomach Neoplasms","Egfr","Cerebral Palsy","Cysts","Hospitalization","Lipopolysaccharide","Vascular Diseases","Helicobacter Pylori","Roentgen Rays/effects","Phagocytosis","Akt","Headache","Human Resources","Dendritic Cells","Health Personnel","South America","Complement","Mild Cognitive Impairment","Dialysis","Contraceptive Agents, Female","Protein Metabolism","Brazil","Saliva","Family","Meningitis","Ussr","Population Growth","Spermatozoa","Ct","Bioavailability","Obstructive Sleep Apnea","Genitalia, Female","Plasma","South Africa","Internet","Single Nucleotide Polymorphism","Proteins/metabolism","C-reactive Protein","Health-related Quality Of Life","Antigens And Antibodies","Myocardial Infarct","Nanoparticle","Body Composition","Ophthalmology","Chronic Disease","Gastric Juice","Cartilage","Injury","Models, Theoretical","Antineoplastic Agents","Decision-making","Heart Rate","Cornea","Heart Diseases","Antimicrobial Resistance","Infant, Newborn, Diseases","Preeclampsia","Amyotrophic Lateral Sclerosis","Critical Care","Treatment Outcome","Lung Diseases","Prostate","Melatonin","Contrast Media","Cognitive Impairment","Nurses","Diffusion Tensor Imaging","Italy","Data Collection","Estradiol","Overweight","Acetylcholine","Kidney Function Tests","Recovery","Malnutrition","Neuroscience","Data Analysis","Arabidopsis","Mtor","Probiotics","Respiration/physiology","Endothelial Cells","Reflex","Yeast","Brain/diseases","Cortisone/effects","Dental Caries","Hepatitis C","Virulence","Arsenic","Hydrogen Peroxide","Leptin","Alcoholism","Cerebral Cortex","Steroids","Monitoring","Methylation","Sensitivity","Weight Loss","Human Papillomavirus","Catheter Ablation","Carbohydrate Metabolism","Lactation","Metformin","Glutamate","Hemolysis","Poultry","Inhibition","Program Evaluation","Neurology","Periodontitis","Jurisprudence, Medical","Thyroid","Radiation Therapy","Flavonoids","Liver Diseases","Plasticity","Prefrontal Cortex","Resilience","Rice","Telemedicine","Anticoagulants","Total Knee Arthroplasty","Blood Platelets","Performance","Hplc","Oxytocin","Aorta","Synthesis","Sex Differences","Mexico","Migrants","Neoplasms, Experimental","Reproductive Behavior","Antigen-antibody Reactions","Hiv/aids","Adults","Quality","Cohort Study","Vegf","Antibody","Radiology","Bmi","Obituary","Cell Death","Pneumonectomy","Reflex, Conditioned","Fistula","T Cells","Radiation Protection","Nicotine","Hepatitis B Virus","Photodynamic Therapy","Sarcoidosis","Micrornas","Neurogenesis","Students","Doxorubicin","Microbiology","Hip","Neurons","Obstetrics","Cardiac Surgery","Urban Population","Schools","Bone Mineral Density","Esophagus","Menstruation","Light","Amygdala","Breastfeeding","Overall Survival","Edema","Ptsd","Acute Myeloid Leukemia","Legislation","Hysterectomy","Gold Nanoparticles","In Vitro","Subarachnoid Hemorrhage","Intellectual Disability","Dna Repair","Preventive Medicine","Delivery","Vascular Surgery","Tumor Microenvironment","Soil","Attitudes","Protein","Postoperative Care","Ethanol","Autonomic Nervous System","Pharmacy","Mercury","Modeling","Natural Products","England","United Kingdom","Vital Statistics","Immune Serums","Cortisone","Lymphocytes","Venous Thromboembolism","Intensive Care Unit","Poliomyelitis","Analgesia","Health Policy","Phosphorus","Gamma Globulin","Insects","Antibacterial Activity","Arabidopsis Thaliana","Parity","Liver/diseases","Hypertension/therapy","Questionnaire","Gut Microbiota","International Migration","Nsclc","Transcription Factor","Tnf-α","Hydrogen-ion Concentration","Neuropathic Pain","Metals","Abortion","Oral Contraceptives--side Effects","Cardiomyopathy","Chloramphenicol","Anti-inflammatory","Blood Sugar","Gynecology","Mechanical Properties","Drug Discovery","Heart/physiology","Hemodynamics","Antimicrobial Activity","Dexamethasone","Longitudinal","Exosomes","Staphylococcus","Antimicrobial","Necrosis","Ascorbic Acid","Signaling","Acquired Immunodeficiency Syndrome","Hospitals, Psychiatric","Methotrexate","Aggression","Shoulder","Heart Rate Variability","Editorials","Major Depressive Disorder","Genotype","Cardiac Arrest","Muscles/physiology","Intestinal Obstruction","Arthroplasty","Calcification","Monoclonal Antibody","Optimization","Bronchoscopy","Phospholipids","Posture","Serum","Animal Models","Humans","Androgens","Estimation Technics","Resveratrol","Gene Regulation","Hyperglycemia","Teeth","Personalized Medicine","Hydrogel","Implementation","Western Africa","Osteosarcoma","Aspirin","Nrf2","Systems Biology","Lymph Nodes","Disease","Crohn’s Disease","Antibacterial","Antibiotics/effects","Lungs/diseases","Hearing Loss","Chromatin","Estrogen","Heart Defects, Congenital","Snp"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var applicants=exports.applicants=["Schlumberger Technology Corp","Vertex Pharma","Toshiba Kk","Daewoo Electronics Corp","Max Co Ltd","Toyoda Automatic Loom Works","Nokia Telecommunications Oy","Cabot Corp","Valeo Vision","Lg Philips Lcd Co Ltd","Lely Nv C Van Der","Exxonmobil Upstream Res Co","Takenaka Komuten Co","Seiko Epson Corp","St Microelectronics Srl","Idemitsu Petrochemical Co","Digital Equipment Corp","Sap Ag","Teva Pharma","Autoliv Dev","Hitachi Ltd","Tdk Corp","Toshiba Machine Co Ltd","Rhone Poulenc Ind","Shinetsu Chemical Co","Nestle Sa","Hitachi Chemical Co Ltd","Delta Electronics Inc","엘지전자 주식회사","Metallgesellschaft Ag","Japan Tobacco Inc","Shell Oil Co","Combustion Eng","Windmoeller & Hoelscher","Kansai Paint Co Ltd","Nsk Ltd","Kyocera Document Solutions Inc","Univ South China Tech","Univ Shanghai","Borgwarner Inc","Siemens Ag","Renault","Bendix Aviat Corp","Yahoo Inc","Matsushita Electric Ind Co Ltd","Advanced Risc Mach Ltd","Astra Ab","Nissan Motor","Yeda Res & Dev","Nortel Networks Ltd","Consejo Superior Investigacion","Corning Glass Works","Japan Radio Co Ltd","Ugine Kuhlmann","Union Carbide Corp","Standard Telephones Cables Ltd","Gen Electric","Merrell Dow Pharma","Deutsche Telekom Ag","Funai Electric Co","Whirlpool Co","Corning Inc","Univ Jiangnan","Amada Co Ltd","Samsung Sdi Co Ltd","Centre Nat Rech Scient","Burroughs Corp","Norton Co","Hitachi Seisakusho Kk","Honeywell Int Inc","Ici Plc","Univ Wuhan Tech","コニカミノルタ株式会社","本田技研工業株式会社","Sophia Co Ltd","Univ Illinois","Toray Industries","Nissan Chemical Ind Ltd","Sony Ericsson Mobile Comm Ab","Petrochina Co Ltd","トヨタ自動車株式会社","Gillette Co","Lsis Co Ltd","Kt Corp","Dell Products Lp","Beecham Group Ltd","Fiat Auto Spa","Nippon Kokan Kk","Byd Co Ltd","三菱電機株式会社","Tyco Electronics Corp","Univ Florida","Hamamatsu Photonics Kk","Ericsson Telefon Ab L M (publ)","China Nat Petroleum Corp","Ge Med Sys Global Tech Co Llc","Toyo Boseki","Rolls Royce Plc","Owens Corning Fiberglass Corp","Sk Telecom Co Ltd","Exxon Research Engineering Co","Roche Diagnostics Gmbh","Univ Jinan","Telefunken Gmbh","Univ Zhejiang Science & Tech","Huawei Tech Co Ltd","Hughes Aircraft Co","Tyco Healthcare","Nok Corp","Semiconductor Mfg Int Shanghai","Oracle Int Corp","Mediatek Inc","Yoshida Kogyo Kk","Novartis Ag","Nxp Bv","Tetra Laval Holdings & Finance","株式会社デンソー","京セラ株式会社","Univ Beijing","Unilever Plc","Oji Paper Co","Rolls Royce","Ricoh Kk","Univ Shanghai Science & Tech","Messerschmitt Boelkow Blohm","Sumitomo Metal Mining Co","Delphi Tech Inc","Henkel & Cie Gmbh","Merck Patent Gmbh","Hynix Semiconductor Inc","Thales Sa","Wacker Chemie Ag","Univ Jilin","Bp Chem Int Ltd","Meidensha Electric Mfg Co Ltd","Tokyo Ohka Kogyo Co Ltd","Emc Corp","Nippon Electric Glass Co","Konica Minolta Opto Inc","Lg Display Co Ltd","Teijin Ltd","Linde Ag","Hewlett Packard Co","Tokyo Electric Co Ltd","Interdigital Tech Corp","Asea Ab","Smithkline Beecham Corp","Secr Defence","Tokyo Sanyo Electric Co","Sanyo Product Co Ltd","Nec Corp","Colgate Palmolive Co","Smithkline Beecham Plc","Null, Null","Nippon Electric Co","Brother Ind Ltd","Shinetsu Handotai Kk","Goodyear Tire & Rubber","Univ Fudan","Renesas Electronics Corp","Nippon Kayaku Kk","Bayer Ip Gmbh","United Technologies Corp","Roehm Gmbh","Hino Motors Ltd","Samsung Electronics Co Ltd","China Electric Power Res Inst","Kolon Inc","Baker Hughes Inc","Lg Innotek Co Ltd","Fuji Photo Optical Co Ltd","Skf Ab","Asea Brown Boveri","Scania Cv Ab","Gen Electric Canada","Minebea Co Ltd","Bell Telephone Labor Inc","Chevron Res","Hoffmann La Roche","シャープ株式会社","Solvay","Medtronic Inc","United Shoe Machinery Corp","Sankyo Co","Sony Computer Entertainment Inc","Univ Xi An Jiaotong","Plasser Bahnbaumasch Franz","Inax Corp","Dow Chemical Co","Exxon Chemical Patents Inc","Univ Tohoku","Matsushita Refrigeration","Univ East China Science & Tech","Allied Chem","Denki Kagaku Kogyo Kk","Kanebo Ltd","Thomson Licensing Sa","Seiko Instr Inc","Inventio Ag","Arkema France","Daewoo Motor Co Ltd","Dainippon Printing Co Ltd","Snam Progetti","Univ Zhejiang Ocean","Mahle Int Gmbh","Union Carbide Chem Plastic","Bendix Corp","Kyowa Hakko Kogyo Kk","Univ Beihang","Sanden Corp","Dart Ind Inc","Freescale Semiconductor Inc","Ngk Insulators Ltd","Gen Hospital Corp","Bausch & Lomb","Outokumpu Oy","Bosch Gmbh Robert","Philips Nv","Applied Materials Inc","Japan Science & Tech Corp","Asahi Optical Co Ltd","Sanofi Aventis Deutschland","Hitachi Medical Corp","Olympus Medical Systems Corp","Lg Chemical Ltd","Phillips Petroleum Co","Lucas Industries Ltd","Black & Decker Inc","Fuji Photo Film Co Ltd","Monsanto Co","Univ Pennsylvania","Scripps Research Inst","Renesas Tech Corp","Kogyo Gijutsuin","Freudenberg Carl Kg","Eaton Corp","Microsoft Technology Licensing Llc","Lundbeck & Co As H","Ind Tech Res Inst","Jfe Steel Corp","Zte Corp","Alibaba Group Holding Ltd","Abb Research Ltd","Council Scient Ind Res","Asahi Chemical Ind","Shin Kobe Electric Machinery","Abbott Lab","Chevron Usa Inc","Hitachi Automotive Systems Ltd","Squibb & Sons Inc","Texaco Development Corp","Michelin Soc Tech","Ford Global Tech Llc","Amazon Tech Inc","Mitsubishi Gas Chemical Co","Cree Inc","Univ Tianjin","Du Pont","Fujitsu Ten Ltd","Hamilton Sundstrand Corp","Upjohn Co","Hyundai Electronics Ind","Rhodia Chimie Sa","Nippon Steel Corp","Pioneer Electronic Corp","Polaroid Corp","Telefonaktiebolaget Lm Ericsson Publ","Tokyo Shibaura Electric Co","Raytheon Co","キヤノン株式会社","Hitachi Maxell","Shiseido Co Ltd","Philips Electronics Nv","Hilti Ag","Dow Global Technologies Llc","Dainippon Ink & Chemicals","Ibm","Yazaki Corp","Us Health","Sanofi Aventis","Minnesota Mining & Mfg","Aluminum Co Of America","Westinghouse Canada Ltd","Samsung Heavy Ind","Janssen Pharmaceutica Nv","Glory Kogyo Kk","Unilever Nv","Clarion Co Ltd","Univ Kunming Science & Tech","China Petrochemical Corp","Hoechst Ag","Anhui Jianghuai Automobile Co","Ingersoll Rand Co","Saint Gobain","Harbin Inst Of Technology","Nifco Inc","Daido Steel Co Ltd","Inst Nat Sante Rech Med","Nat Semiconductor Corp","Boe Technology Group Co Ltd","Samsung Mobile Display Co Ltd","International Business Machines Corporation","Matsushita Denki Sangyo Kk","Ici Ltd","Baxter Int","Lg Electronics Inc","Globalfoundries Inc","Nippon Denki Kk","Sagem","Sumitomo Heavy Industries","Central Glass Co Ltd","Harvard College","Mitsumi Electric Co","Rieter Ag Maschf","Chugoku Electric Power","Wellcome Found","Aventis Pharma Sa","Johnson Controls Tech Co","Warner Lambert Co","Shinko Electric Ind Co","Ethicon Endo Surgery Inc","Ciba Geigy Corp","Monsanto Technology Llc","Evonik Degussa Gmbh","Mitsubishi Chem Ind","Univ Columbia","Suwa Seikosha Kk","Gm Global Tech Operations Llc","Fujikura Ltd","Schott Ag","Asustek Comp Inc","Peugeot","Nippon Electric Eng","Japan Broadcasting Corp","Jsr Corp","Kureha Chemical Ind Co Ltd","Nintendo Co Ltd","Richter Gedeon Vegyeszet","Acer Inc","Topcon Corp","Atomic Energy Authority Uk","Silverbrook Res Pty Ltd","Mitsubishi Paper Mills Ltd","Boehringer Ingelheim Pharma","Univ China Mining","Ohbayashi Corp","Kone Corp","Chisso Corp","California Inst Of Techn","Boehringer Mannheim Gmbh","Babcock & Wilcox Co","Universal Oil Prod Co","Kuraray Co","Lear Corp","Bayer Ag","Caterpillar Inc","Yokogawa Electric Corp","Oki Data Kk","Metso Paper Inc","Honeywell Inc","Beiersdorf Ag","Asahi Kasei Chemicals Corp","Bosch Siemens Hausgeraete","Shenzhen China Star Optoelect","Caterpillar Tractor Co","Heidelberger Druckmasch Ag","Panasonic Elec Works Co Ltd","Univ Shandong","Facebook Inc","Mitsui Chemicals Inc","Fanuc Corp","Igt Reno Nev","Visteon Global Tech Inc","Univ Electronic Science & Tech","Univ China Petroleum","Mitsubishi Electric Corp","State Grid Corp China","Kimberly Clark Co","Daifuku Kk","Daimler Chrysler Ag","Airbus Operations Gmbh","Akzo Nv","Schering Ag","Kyocera Mita Corp","Guangdong Oppo Mobile Telecommunications Corp Ltd","Nippon Sheet Glass Co Ltd","Hewlett Packard Development Co","American Home Prod","Riso Kagaku Corp","Tokai Rika Co Ltd","Huels Chemische Werke Ag","Amgen Inc","Uop Llc","Nec Electronics Corp","Univ Xidian","Boston Scient Scimed Inc","Japan Science & Tech Agency","Dsm Nv","Calsonic Kansei Corp","Singer Co","Gd Spa","Mitutoyo Corp","Nat Res Dev","Broadcom Corp","Thomson Houston Comp Francaise","Nisshin Steel Co Ltd","Kennametal Inc","Eastman Kodak Co","Philip Morris Products Sa","Kia Motors Corp","Yokohama Rubber Co Ltd","Univ Michigan","Hitachi Koki Kk","Bae Systems Plc","Nvidia Corp","Ford Motor Co","Michelin & Cie","Siemens Ag, 1000 Berlin Und 8000 Muenchen","Univ Huazhong Science Tech","Dow Agrosciences Llc","Rockwell International Corp","Battelle Memorial Institute","Koyo Seiko Co","Nasa","Teves Gmbh Alfred","Jtekt Corp","Wistron Corp","Nippon Soken","Standard Oil Co","Toyoda Gosei Kk","Midea Group Co Ltd","Res Inst Ind Science & Tech","Sumitomo Wiring Systems","Cit Alcatel","Taiyo Yuden Kk","Hyundai Mobis Co Ltd","Tokai Rubber Ind Ltd","Schaeffler Technologies Ag","Western Electric Co","Univ California","United Microelectronics Corp","Ethicon Inc","Lohmann Therapie Syst Lts","Alza Corp","Fujitsu Ltd","Hitachi Cable","Covidien Lp","Sony Corp","Gen Instrument Corp","Toyota Motor Co Ltd","Coca Cola Co","Kubota Kk","Chugai Pharmaceutical Co Ltd","Saint Gobain Vitrage","クゥアルコム・インコーポレイテッドｑｕａｌｃｏｍｍ Ｉｎｃｏｒｐｏｒａｔｅｄ","British Petroleum Co","Hon Hai Prec Ind Co Ltd","Valeo","Konica Minolta Business Tech","Nippon Steel & Sumitomo Metal Corp","Daimler Ag","Univ Johns Hopkins","Panasonic Ip Man Co Ltd","Montedison Spa","British Thomson Houston Co Ltd","Nokia Technologies Oy","Kawasaki Heavy Ind Ltd","China Nat Offshore Oil Corp","Nikon Corp","Univ Shaanxi Science & Tech","Rhone Poulenc Agrochimie","Koito Mfg Co Ltd","Seagate Technology Llc","Norsk Hydro As","Thomson Csf","Mita Industrial Co Ltd","Hongfujin Prec Ind Shenzhen","Kubota Ltd","Inst Francais Du Petrole","Fichtel & Sachs Ag","Univ Southeast","Sandvik Intellectual Property","Toshiba Tec Kk","Rhone Poulenc Chimie","Lg Electronics Tianjin","China Petroleum & Chem Corp","St Microelectronics Sa","Abb Technology Ag","Agency Science Tech & Res","Sanyo Chemical Ind Ltd","Geigy Ag J R","Koninkl Philips Electronics Nv","China Mobile Comm Corp","Max Planck Gesellschaft","Squibb Bristol Myers Co","Novozymes As","Hitachi High Tech Corp","Johnson & Son Inc S C","Grace W R & Co","Bayer Cropscience Ag","Ppg Ind Ohio Inc","Michelin Rech Tech","Univ China Agricultural","Rhone Poulenc Sa","Terumo Corp","Us Navy","Univ Tokyo","Sony Electronics Inc","Licentia Gmbh","Zhuhai Gree Elec Appliances","Henkel Kgaa","Ushio Electric Inc","Airbus Operations Sas","Pfizer","Thomson Brandt Gmbh","Yaskawa Denki Seisakusho Kk","Toyota Ind Corp","Bbc Brown Boveri & Cie","Mitsubishi Motors Corp","Yamaha Corp","セイコーエプソン株式会社","Idemitsu Kosan Co","Thomson Consumer Electronics","Daikin Ind Ltd","Molex Inc","At & T Ip I Lp","Oceans King Lighting Science","Nippon Telegraph & Telephone","Daewoo Shipbuilding & Marine","Hyundai Motor Co Ltd","Xerox Corp","Google Inc","Volkswagen Ag","Infineon Technologies Ag","Seikosha Kk","Toyo Tire & Rubber Co","Makita Corp","Suzuki Motor Corp","Aerospatiale","Raychem Corp","Mead Corp","Mando Corp","Beijing Inst Technology","Inventec Corp","Sms Demag Ag","Hyun Dai Heavy Ind Co Ltd","Shin Meiwa Ind Co Ltd","Hoya Corp","Asml Netherlands Bv","Stauffer Chemical Co","Continental Automotive Gmbh","Korea Electronics Telecomm","Nippon Kogaku Kk","Wisconsin Alumni Res Found","Misawa Homes Co","Alps Electric Co Ltd","Fuji Electric Co Ltd","Samsung Electronic","Luk Lamellen & Kupplungsbau","Univ Hohai","Pirelli","Kaneka Corp","Voith Patent Gmbh","Fraunhofer Ges Forschung","Tokyo Electron Ltd","Takeda Pharmaceutical","Schering Corp","Sekisui Chemical Co Ltd","Itt","Continental Teves Ag & Co Ohg","Monsanto Chemicals","Mcneil Ppc Inc","Nokia Mobile Phones Ltd","Rinnai Kk","Nippon Denso Co","Oki Electric Ind Co Ltd","Basf Se","Daihatsu Motor Co Ltd","Citizen Watch Co Ltd","Ube Industries","Lion Corp","Stanley Electric Co Ltd","Aeg","Degussa","Tencent Tech Shenzhen Co Ltd","Tokyo Gas Co Ltd","Osram Opto Semiconductors Gmbh","Miele & Cie","Chunghwa Picture Tubes Ltd","Ericsson Telefon Ab L M","Aisan Ind","Matsushita Electric Works Ltd","Commw Scient Ind Res Org","Merck Sharp & Dohme","Otis Elevator Co","Owens Illinois Inc","Mitsubishi Rayon Co","Sanofi Sa","日本電気株式会社","Searle & Co","Procter & Gamble","Patent Treuhand Ges Fuer Elektrische Gluehlampen Mbh","Panasonic Ip Man Corp","Asahi Glass Co Ltd","Alpine Electronics Inc","Aisin Aw Co","Apple Inc","Trw Inc","Research In Motion Ltd","Nippon Soda Co","Lubrizol Corp","Sca Hygiene Prod Ab","Microsoft Corp","Ntn Toyo Bearing Co Ltd","Fujitsu General Ltd","Au Optronics Corp","Tokico Ltd","Pasteur Institut","Halliburton Energy Serv Inc","Nat Inst Of Advanced Ind Scien","Schlumberger Ca Ltd","Mitsubishi Petrochemical Co","Semiconductor Energy Lab","Telefunken Patent","Mitsubishi Chem Corp","Thomson Licensing","Amp Inc","Sankyo Seiki Seisakusho Kk","Tno","Ford Werke Ag","Hercules Inc","Blackberry Ltd","Sandvik Ab","Daicel Chem","Philips Intellectual Property","Lockheed Corp","Ciba Sc Holding Ag","Shimano Kk","Ericsson Inc","Sumitomo Rubber Ind","Posco","Schaeffler Technologies Gmbh","Kvasenkov Oleg Ivanovich","Schlumberger Technology Bv","Exxonmobil Res & Eng Co","Univ Harbin Eng","Westinghouse Electric Corp","Standard Oil Dev Co","Nippon Zeon Co","Univ Guangxi","G Obrazovatel Noe Uchrezhdenie","Hitachi Int Electric Inc","Mitsui Shipbuilding Eng","Univ Sichuan","Osaka Gas Co Ltd","Sandoz Ltd","Tanaka Precious Metal Ind","Peugeot Citroen Automobiles Sa","Lintec Corp","Japan Steel Works Ltd","富士通株式会社","华为技术有限公司","Krones Ag","Servier Lab","Chinoin Gyogyszer Es Vegyeszet","Johnson & Johnson","Mitsui Petrochemical Ind","Univ Beijing Technology","Nike Inc","Toshiba Kawasaki Kk","Ihi Corp","Komatsu Mfg Co Ltd","Ykk Corp","Kayaba Industry Co Ltd","珠海格力电器股份有限公司","Westinghouse Air Brake Co","Boehringer Sohn Ingelheim","Sumitomo Electric Industries","Taiwan Semiconductor Mfg Co Ltd","Sandoz Ag","Schneider Electric Ind Sas","Becton Dickinson Co","Fuji Xerox Co Ltd","Snecma","Shionogi & Co","British Telecomm","Lexmark Int Inc","Sumitomo Metal Ind","Denso Corp","Citroen Sa","Unitika Ltd","Ricoh Co Ltd","Whitaker Corp","Konishiroku Photo Ind","Univ Tongji","Intel Corp","Ngk Spark Plug Co","Mitsubishi Materials Corp","Praxair Technology Inc","パナソニックｉｐマネジメント株式会社","Gree Electric Appliances Inc Zhuhai","Bayer Materialscience Ag","Novo Nordisk As","国家电网公司","Nippon Catalytic Chem Ind","Eisai Co Ltd","Suzuki Motor Co","Seb Sa","Univ Beijing Science & Tech","Kowa Co","Univ Jiangsu","Agfa Gevaert Nv","Uni Charm Corp","Weatherford Lamb","Cheil Ind Inc","Cisco Tech Inc","Electrolux Ab","Dainippon Screen Mfg","Samsung Display Co Ltd","Advanced Micro Devices Inc","Essilor Int","Adobe Systems Inc","Baoshan Iron & Steel","Benq Corp","Olin Corp","Lam Res Corp","Schlumberger Services Petrol","Illinois Tool Works","Minolta Co Ltd","Univ Zhejiang Technology","Takata Corp","Tsubakimoto Chain Co","Atochem Elf Sa","Toyoda Machine Works Ltd","Fmc Corp","Carrier Corp","Japan Aviation Electron","Harris Corp","Rohm & Haas","Mobil Oil Corp","Nippon Paint Co Ltd","Ajinomoto Kk","Basf Corp","株式会社日立製作所","Univ Shanghai Jiaotong","Nissin Electric Co Ltd","Massachusetts Inst Technology","Univ Leland Stanford Junior","Koenig & Bauer Ag","Glaxo Group Ltd","Boehringer Ingelheim Int","Alstom Technology Ltd","Isuzu Motors Ltd","Toyota Central Res & Dev","Ig Farbenindustrie Ag","Stamicarbon","Iseki Agricult Mach","Fanuc Ltd","Boeing Co","Adc Telecommunications Inc","Oreal","Chery Automobile Co Ltd","Agfa Gevaert Ag","Toyo Ink Mfg Co","Univ Donghua","Firestone Tire & Rubber Co","Sanyo Electric Co","Mitsubishi Heavy Ind Ltd","Uop Inc","Akzo Nobel Nv","Ciba Geigy Ag","Sun Microsystems Inc","Kloeckner Humboldt Deutz Ag","Us Army","Asmo Co Ltd","Univ Dalian Tech","Qualcomm Inc","Showa Denko Kk","Advantest Corp","Daewoo Electronics Co Ltd","Nordson Corp","Mattel Inc","Astrazeneca Ab","Maschf Augsburg Nuernberg Ag","Philips Patentverwaltung","Konica Minolta Holdings Inc","Dsm Ip Assets Bv","Hitachi Shipbuilding Eng Co","Northern Telecom Ltd","Bsh Bosch Siemens Hausgeraete","Schlumberger Holdings","Mars Inc","Micron Technology Inc","Kenwood Corp","Shinko Electric Co Ltd","Gore & Ass","Fujifilm Corp","Dyson Technology Ltd","Honda Motor Co Ltd","株式会社東芝","Univ Chongqing","Victor Company Of Japan","Elpida Memory Inc","At & T Corp","China Petroleum & Chemical","Tosoh Corp","Aruze Corp","Syngenta Participations Ag","Olympus Corp","Htc Corp","3m Innovative Properties Co","Canon Kk","Zahnradfabrik Friedrichshafen","Wyeth Corp","Yamaha Motor Co Ltd","株式会社リコー","Univ Texas","Toto Ltd","Omron Tateisi Electronics Co","Autonetworks Technologies Ltd","Allied Signal Inc","Avery Dennison Corp","Takeda Chemical Industries Ltd","Audi Ag","Rohm Co Ltd","Alcatel Lucent","Yanmar Agricult Equip","Huawei Device Co Ltd","Pitney Bowes Inc","Gen Motors Corp","Gen Electric Co Ltd","Samsung Electro Mech","Philips Corp","Aisin Seiki","Pioneer Hi Bred Int","Nhk Spring Co Ltd","Shell Int Research","Toshiba Medical Sys Corp","Kobe Steel Ltd","Univ Xiamen","Roussel Uclaf","Dow Corning","Kajima Corp","Rca Corp","Otsuka Pharma Co Ltd","Toyo Seikan Kaisha Ltd","Johnson & Johnson Vision Care","British American Tobacco Co","Beecham Group Plc","Ncr Co","Goodrich Co B F","Mitsui Toatsu Chemicals","Merck & Co Inc","Kanegafuchi Chemical Ind","Osram Gmbh","Basf Ag","Voith Gmbh J M","中国石油化工股份有限公司","Murata Machinery Ltd","Macronix Int Co Ltd","Ppg Industries Inc","Ishikawajima Harima Heavy Ind","Hitachi Metals Ltd","富士フイルム株式会社","Murata Manufacturing Co","Taisei Corp","Yissum Res Dev Co","Sulzer Ag","Daimler Benz Ag","Emerson Electric Co","Konica Minolta Inc","Siemens Ag, 1000 Berlin Und 8000 Muenchen, De","Tektronix Inc","Exxonmobil Chem Patents Inc","Toyota Motor Corp","Univ Wuhan","United Shoe Machinery Ab","Texas Instruments Inc","Univ Shandong Science & Tech","Koninkl Philips Nv","Sekisui Plastics","Air Prod & Chem","Mazda Motor","Deere & Co","Pfizer Prod Inc","Univ Central South","Univ Northeastern","Noritsu Koki Co Ltd","Int Harvester Co","Porsche Ag","Philips Electronic Associated","Chem Ind Basel","Dresser Ind","Univ Zhejiang","Commissariat Energie Atomique","Air Liquide","Agency Ind Science Techn","Motorola Inc","Lucas Ind Plc","Agilent Technologies Inc","Wacker Chemie Gmbh","Yaskawa Electric Corp","Shimadzu Corp","Lucent Technologies Inc","Ebara Corp","American Telephone & Telegraph","Nitto Denko Corp","Celanese Corp","Sharp Kk","Nokia Corp","Allergan Inc","Univ Nanjing","Korea Inst Sci & Tech","Kawasaki Steel Co","Eastman Chem Co","Sumitomo Bakelite Co","Juki Kk","Renault Sas","Renault Sa","Pioneer Corp","Ciba Geigy","Via Tech Inc","Furukawa Electric Co Ltd","Henkel Ag & Co Kgaa","Dynamit Nobel Ag","Univ Washington","Intel Ip Corp","삼성전자주식회사","Dow Global Technologies Inc","Mitsui Mining & Smelting Co","パナソニック株式会社","Yoshino Kogyosho Co Ltd","Lonza Ag","Knorr Bremse Systeme","Korea Advanced Inst Sci & Tech","Alusuisse","Minolta Camera Kk","Toyota Jidoshokki Kk","Bayerische Motoren Werke Ag","Zeneca Ltd","Seiko Instr & Electronics","Yanmar Co Ltd","Kyocera Corp","American Cyanamid Co","Bridgestone Corp","Panasonic Corp","Heiwa Corp","Mannesmann Ag","Ntt Docomo Inc","Gold Star Co","Dana Corp","Johnson Matthey Plc","Japan Display Inc","Pentax Corp","Univ Duke","Matsushita Electronics Corp","Ibiden Co Ltd","Casio Computer Co Ltd","Babcock Hitachi Kk","Giesecke & Devrient Gmbh","Boston Scient Ltd","Fuji Heavy Ind Ltd","Borg Warner","Thomae Gmbh Dr K","Sperry Rand Corp","Toppan Printing Co Ltd","Kao Corp","Gm Global Tech Operations Inc","Hitachi Construction Machinery","Koninklijke Philips Nv","Bristol Myers Co","Tokyo Electric Power Co","Westinghouse Electric & Mfg Co","Fujisawa Pharmaceutical Co","Sgs Thomson Microelectronics","France Telecom","Shimizu Construction Co Ltd","Toshiba Lighting & Technology","Danfoss As","Cardiac Pacemakers Inc","Nestec Sa","Roland Man Druckmasch","Sk Hynix Inc","United Aircraft Corp","Showa Electric Wire & Cable Co","Daiichi Shokai Kk","Lilly Co Eli","Taiwan Semiconductor Mfg","Toshiba Corp","Genentech Inc","Sumitomo Chemical Co","Olympus Optical Co","Nubia Technology Co Ltd","Rohm & Haas Elect Materials","Halliburton Energy Services Inc","Kurita Water Ind Ltd","Univ Tsinghua","Nat Inst Of Adv Ind & Technol","Int Standard Electric Corp","Analog Devices Inc"]},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensRangeSlider",[].concat(deps,[function(){return{scope:{from:"=",to:"="},link:function link(scope,element){var d=new Date;var min=1900;var max=d.getFullYear();element.slider({range:true,min:min,max:max,values:[scope.from||min,scope.to||max],slide:function slide(event,ui){var _ui$values=_slicedToArray(ui.values,2),from=_ui$values[0],to=_ui$values[1];scope.from=from;scope.to=to;scope.$apply()}})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["CollectionService"];_app2.default.directive("lensRecentCollections",[].concat(deps,[function(CollectionService){return{template:__webpack_require__(609),scope:{},link:function link(scope){var vm=scope.vm={collections:window.globalCollections||[],show:true};scope.refresh=function(){vm.loading=true;CollectionService.getAll().then(function(collections){vm.collections=collections;vm.loading=false}).catch(function(err){console.warn(err);vm.loading=false})};CollectionService.on("REFRESH_COLLECTIONS",scope.refresh);scope.$on("$destroy",function(){CollectionService.removeListener("REFRESH_COLLECTIONS",scope.refresh)});if(!window.globalCollections){scope.refresh()}}}}]))},function(module,exports){module.exports='<h3>{{\'collectionManageWidget.titleWidget\' | message}}</h3>\n\n<div ng-if="vm.collections.length" class="widget collections-sidebar-widget">\n    <form>\n        <label class="input">\n            <i class="icon_append fa fa-search"></i>\n            <input type="text" ng-model="vm.filter.title" placeholder="Filter Collections">\n        </label>\n    </form>\n\n    <div class="collection-controls" ng-show="vm.show">\n        <ul class="drop-list-scroll-sidebar">\n            <li ng-repeat="collection in vm.filteredCollections = (vm.collections | filter:vm.filter | orderBy:\'updated\':true | limitTo:10)">\n                <a ng-href="{{::collection | collectionUrl}}">\n                    {{::collection.title}}\n\n                    <div class="collectionType" ng-class="{ \'is-patent\': collection.type === \'PATENT\', \'is-scholar\': collection.type === \'SCHOLARLY_WORK\' }">\n                        <em class="fa fa-circle"></em>\n                        {{ collection.type | collectionType }} -\n                        <span>\n                            ({{::collection.itemCount | customNumber}})\n                        </span>\n                    </div>\n\n                    <div class="collectionMeta">\n                        <span class="collectionDate">\n                            {{::collection.updated | date}}\n                        </span>\n\n                        <span class="collectionShared pull-right" tooltip-title="{{\'user.sharing.\' + collection.access + \'.info\' | message}}">\n                            {{\'user.sharing.\' + collection.access | message}}\n                            <em class="fa {{\'user.sharing.\' + collection.access | message}}"></em>\n                        </span>\n                    </div>\n\n                </a>\n            </li>\n        </ul>\n        <div class="alert alert-info" ng-if="!vm.filteredCollections.length && vm.collections.length && !vm.loading">\n            <em class="fa fa-info-circle"></em>\n            No collection items match that filter\n            <a href="/lens/user/collections">View All Collections</a>\n        </div>\n    </div>\n\n    <div class="btn btn-pri btn-xs" ng-click="vm.newCollection = {type: \'PATENT\'}">Create Collection</div>\n    <div>\n        <small>\n            <a class="col-meta" href="/lens/user/collections">\n                {{::\'collectionManageWidget.manage\' | message}}\n            </a>\n        </small>\n    </div>\n</div>\n\n\n\n<div ng-if="!vm.collections.length && !vm.loading" class="sidebar-walk-through">\n    <strong>No Collections Yet</strong>\n    <ul class="list-styled">\n        <li>Add search results to a collection</li>\n        <li>Collections can be public or private</li>\n        <li><a href="/lens/user/registration">Register</a> or <a href="/lens/user/login" class="login-link">Login</a> to use collections</li>\n    </ul>\n</div>\n\n<hr ng-if="$root.isAnon" >\n\n<div\n    class="widget"\n    ng-if="$root.isAnon"\n    ng-include="\'registration-widget\'">\n</div>\n\x3c!--\n<div ng-if="!vm.collections.length && !vm.loading && !$root.isAnon">\n    <div class="alert alert-info">\n        <em class="fa fa-info-circle"></em> {{::\'user.collections.none\' | message}}\n    </div>\n</div>\n--\x3e\n\n\n\x3c!-- New Collection Modal --\x3e\n<div lens-modal ng-cloak size="\'sm\'" visible="vm.newCollection">\n    <div lens-create-collection\n        collection="vm.newCollection"\n        select-type="true"\n    ></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["NotesService"];_app2.default.directive("lensRecentNotes",[].concat(deps,[function(NotesService){return{template:__webpack_require__(611),scope:{lensId:"<"},link:function link(scope){var vm=scope.vm={notes:[],loading:true,show:true};scope.linkUrl=NotesService.linkUrl;scope.refresh=function(){NotesService.recent().then(function(notes){vm.notes=notes;vm.loading=false}).catch(function(err){console.warn(err);vm.loading=false})};scope.$on("REFRESH_NOTES",function(){scope.refresh()});scope.refresh()}}}]))},function(module,exports){module.exports='<div ng-cloak>\n    <div class="widget recent-notes">\n        <h3>\n            Your Notes\n        </h3>\n        <div ng-show="vm.show" ng-if="vm.notes.length">\n            <form>\n                <label class="input">\n                <i class="icon_append fa fa-search"></i>\n                <input type="text" ng-model="vm.filter.text" placeholder="Filter Notes">\n                </label>\n            </form>\n            \n            <ul class="drop-list-scroll-sidebar">\n                <li ng-repeat="note in vm.filteredNotes = (vm.notes | filter:vm.filter | limitTo:10)">\n                    <a ng-href="{{linkUrl(note)}}">\n                        <p>\n                            <div ng-show="note.collectionId">\n                                <em class="fa fa-folder-open" ng-class="{ \'is-patent\': note.collectionType === \'PATENT\', \'is-scholar\': note.collectionType === \'SCHOLARLY_WORK\' }"></em>\n                                <strong >\n                                    {{note.collectionTitle}}\n                                </strong>\n                            </div>\n                            <div ng-show="!note.collectionId">\n                                <strong >\n                                    {{note.patentTitle}}\n                                    <small>\n                                        <br>\n                                        <em class="fa fa-circle" ng-class="{ \'is-patent\': note.type === \'PATENT\', \'is-scholar\': note.type === \'SCHOLARLY_WORK\' }"></em>\n                                        {{note.key}}\n                                    </small>\n                                </strong>\n                            </div>\n                        </p>\n                        \n                        \n                        \n                        <div>\n                            <em>{{note.text}}</em>\n                        </div>\n                        \n                        <div class="collectionMeta">\n                            <span ng-show="note.collectionId">\n                                Collection -\n                                \x3c!-- <a ng-href="/lens/collection/{{note.collectionId}}"></a> --\x3e\n                            </span>\n                            \n                            <span ng-if="note.scope">{{note.scope === \'BASE\' ? \'Document\' : note.scope}} - </span>\n                            <span>{{note.updated | date}}</span>\n                        </div>\n                    </a>\n                    \n                </li>\n            </ul>\n            \n            <div>\n                <small>\n                    <a class="col-meta" href="/lens/user/notes">\n                        Manage Notes\n                    </a>\n                </small>\n            </div>\n            \n            <div class="alert alert-info" ng-if="!vm.filteredNotes.length && vm.notes.length">\n                <em class="fa fa-info-circle"></em>\n                No notes match that filter\n                <a href="/lens/user/notes">View All Notes</a>\n            </div>\n        </div>\n        \n        <div ng-if="!vm.notes.length" class="clearfix sidebar-walk-through">\n            <strong>No Notes Yet</strong>\n            <ul class="list-styled">\n                <li>Add notes to individual results</li> \n                <li>Apply notes to your collections</li> \n                <li><a href="/lens/user/registration">Register</a> or <a href="/lens/user/login" class="login-link">Login</a> to create notes</li> \n            </ul>\n        </div>\n        \n    </div>\n    \n    <hr ng-if="$root.isAnon" >\n    \n    <div \n        class="widget" \n        ng-if="$root.isAnon" \n        ng-include="\'registration-widget\'">\n    </div>\n             \n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var deps=["CollectionService","$q"];_app2.default.directive("lensRemoveFromCollection",[].concat(deps,[function(CollectionService,$q){return{template:__webpack_require__(613),scope:{lensIds:"<",selectedAll:"<",visible:"=",type:"<",search:"&"},link:function link(scope){var vm=scope.vm={collections:window.globalCollections||[],collectionFilter:{title:"",type:scope.type},checkedCollections:{}};if(window.currentCollection){vm.checkedCollections[window.currentCollection.id]=true}scope.filter=function(collection){if(collection.type!==scope.type){return false}var term=vm.collectionFilter.title.toLowerCase();var title=collection.title.toLowerCase();if(term&&!title.indexOf(term)>=0){return false}if(collection.type==="SCHOLARLY_WORK"){return true}var lensIds=scope.lensIds;var ok=false;lensIds.forEach(function(key){var ids=window.globalPatentCollectionMap[key]||[];if(ids.indexOf(collection.id)>=0){ok=true;return false}});return ok};scope.removeFromCollection=function(){vm.submitting=true;vm.valid=true;var keys=scope.lensIds;var collectionIds=_.keys(vm.checkedCollections).filter(function(k){return vm.checkedCollections[k]});if(!collectionIds.length){vm.submitting=false;vm.valid=false;return}if(scope.selectedAll){var _promises=collectionIds.map(function(id){var collection=vm.collections.filter(function(collection){return parseInt(id)===collection.id}).pop();return CollectionService.removeSearchFromCollection(collection,scope.search)});$q.all(_promises).then(function(){vm.submitting=false;scope.visible=false});return}var removingCount=keys.length;var promises=[];collectionIds.forEach(function(id){var collection=vm.collections.filter(function(collection){return parseInt(id)===collection.id}).pop();var originalItemCount=collection.itemCount;var promise=CollectionService.removeItems(id,keys).then(function(data){var removed=originalItemCount-data.itemCount;if(removed){var message="Removed "+removed+" of "+removingCount+" items from collection";notification.notify(message)}else{var _message=window.messages.prop("user.collections.remove.exists");notification.info(_message)}keys.forEach(function(key){if(window.globalPatentCollectionMap){var a=window.globalPatentCollectionMap[key];if(a){window.globalPatentCollectionMap[key]=_.reject(a,function(n){return n===collection.id})}}});vm.checkedCollections={};console.warn("REFRESH_COLLECTION")}).catch(function(err){console.warn(err);notification.error("Could not remove from collection: "+collection.title)});promises.push(promise)});$q.all(promises).then(function(){scope.visible=false;vm.submitting=false}).catch(function(err){console.warn(err);scope.visible=false;vm.submitting=false})};scope.close=function(){scope.visible=false};var handleError=function handleError(res){console.warn(res.data)};scope.refresh=function(){CollectionService.getAll().then(function(data){vm.collections=data}).catch(handleError)};CollectionService.on("REFRESH_COLLECTIONS",scope.refresh);scope.$on("$destroy",function(){CollectionService.removeListener("REFRESH_COLLECTIONS",scope.refresh)});if(!window.globalCollections){scope.refresh()}}}}]))},function(module,exports){module.exports='<div>\n    <h3>Remove {{selectedAll ? \'all\' : checkedItems.length}} Items from Collection</h3>\n    <div>\n        <div ng-if="vm.collections.length > 1">\n            <form>\n                <label class="input">\n                    <em class="fa fa-search icon_append"></em>\n                    <input type="text"\n                        placeholder="Filter collections"\n                        class="search-term"\n                        ng-model="vm.collectionFilter.title"\n                    >\n                </label>\n            </form>\n            <br>\n            \x3c!--\n            THESE ARE TROUBLE\n            <em class="fa fa-check-circle col-ter link pull-right"\n                ng-click="selectAllCollections(true)"\n                tooltip-title="Select All"\n            ></em>\n            <em class="fa fa-minus-circle col-error link pull-right"\n                ng-click="selectAllCollections(false)"\n                tooltip-title="Deselect All"\n            ></em>\n            --\x3e\n        </div>\n\n        <label>{{::\'user.collections.select\' | message}}</label>\n\n        <div lens-select-collections-list\n            collections="vm.collections"\n            filter="filter"\n            checked="vm.checkedCollections"\n        ></div>\n\n        <div ng-if="!vm.collections.length" class="alert alert-info">\n            {{::\'user.collections.hasnone\' | message}}\n        </div>\n        <br>\n        <div class="pull-right">\n            <a class="btn btn-sm btn-danger-txt" ng-click="close()">\n                {{::\'common.action.cancel\' | message}}\n            </a>\n            <a class="btn btn-sm btn-danger"\n                ng-click="removeFromCollection()"\n                ng-disabled="vm.submitting"\n                ng-class="{\'btn-submitting\': vm.submitting}">\n                <em class="fa fa-refresh fa-spin" ng-if="vm.submitting"></em>\n                Remove\n            </a>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _domToImage=__webpack_require__(615);var _domToImage2=_interopRequireDefault(_domToImage);var _fileSaver=__webpack_require__(616);var _fileSaver2=_interopRequireDefault(_fileSaver);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensSaveAsImage",[].concat(deps,[function(){return{scope:{title:"<lensSaveAsImage"},link:function link(scope,element){if(!window.Promise){element.find(".save-as-image-trigger").remove();return}element.on("click",".save-as-image-trigger",function(){element.find(".save-as-image-watermark-target").addClass("active");element.find(".btn,.fa,.save-as-image-hide").hide();_domToImage2.default.toBlob(element[0]).then(function(blob){_fileSaver2.default.saveAs(blob,(scope.title||"Untitled Lens Analysis Export")+".png");done()}).catch(function(err){console.warn(err);done()})});var done=function done(){element.find(".btn,.fa,.save-as-image-hide").show();element.find(".save-as-image-watermark-target").removeClass("active")}}}}]))},function(module,exports,__webpack_require__){(function(global){"use strict";var util=newUtil();var inliner=newInliner();var fontFaces=newFontFaces();var images=newImages();var defaultOptions={imagePlaceholder:undefined,cacheBust:false};var domtoimage={toSvg:toSvg,toPng:toPng,toJpeg:toJpeg,toBlob:toBlob,toPixelData:toPixelData,impl:{fontFaces:fontFaces,images:images,util:util,inliner:inliner,options:{}}};if(true)module.exports=domtoimage;else global.domtoimage=domtoimage;function toSvg(node,options){options=options||{};copyOptions(options);return Promise.resolve(node).then(function(node){return cloneNode(node,options.filter,true)}).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone){return makeSvgDataUri(clone,options.width||util.width(node),options.height||util.height(node))});function applyOptions(clone){if(options.bgcolor)clone.style.backgroundColor=options.bgcolor;if(options.width)clone.style.width=options.width+"px";if(options.height)clone.style.height=options.height+"px";if(options.style)Object.keys(options.style).forEach(function(property){clone.style[property]=options.style[property]});return clone}}function toPixelData(node,options){return draw(node,options||{}).then(function(canvas){return canvas.getContext("2d").getImageData(0,0,util.width(node),util.height(node)).data})}function toPng(node,options){return draw(node,options||{}).then(function(canvas){return canvas.toDataURL()})}function toJpeg(node,options){options=options||{};return draw(node,options).then(function(canvas){return canvas.toDataURL("image/jpeg",options.quality||1)})}function toBlob(node,options){return draw(node,options||{}).then(util.canvasToBlob)}function copyOptions(options){if(typeof options.imagePlaceholder==="undefined"){domtoimage.impl.options.imagePlaceholder=defaultOptions.imagePlaceholder}else{domtoimage.impl.options.imagePlaceholder=options.imagePlaceholder}if(typeof options.cacheBust==="undefined"){domtoimage.impl.options.cacheBust=defaultOptions.cacheBust}else{domtoimage.impl.options.cacheBust=options.cacheBust}}function draw(domNode,options){return toSvg(domNode,options).then(util.makeImage).then(util.delay(100)).then(function(image){var canvas=newCanvas(domNode);canvas.getContext("2d").drawImage(image,0,0);return canvas});function newCanvas(domNode){var canvas=document.createElement("canvas");canvas.width=options.width||util.width(domNode);canvas.height=options.height||util.height(domNode);if(options.bgcolor){var ctx=canvas.getContext("2d");ctx.fillStyle=options.bgcolor;ctx.fillRect(0,0,canvas.width,canvas.height)}return canvas}}function cloneNode(node,filter,root){if(!root&&filter&&!filter(node))return Promise.resolve();return Promise.resolve(node).then(makeNodeCopy).then(function(clone){return cloneChildren(node,clone,filter)}).then(function(clone){return processClone(node,clone)});function makeNodeCopy(node){if(node instanceof HTMLCanvasElement)return util.makeImage(node.toDataURL());return node.cloneNode(false)}function cloneChildren(original,clone,filter){var children=original.childNodes;if(children.length===0)return Promise.resolve(clone);return cloneChildrenInOrder(clone,util.asArray(children),filter).then(function(){return clone});function cloneChildrenInOrder(parent,children,filter){var done=Promise.resolve();children.forEach(function(child){done=done.then(function(){return cloneNode(child,filter)}).then(function(childClone){if(childClone)parent.appendChild(childClone)})});return done}}function processClone(original,clone){if(!(clone instanceof Element))return clone;return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function(){return clone});function cloneStyle(){copyStyle(window.getComputedStyle(original),clone.style);function copyStyle(source,target){if(source.cssText)target.cssText=source.cssText;else copyProperties(source,target);function copyProperties(source,target){util.asArray(source).forEach(function(name){target.setProperty(name,source.getPropertyValue(name),source.getPropertyPriority(name))})}}}function clonePseudoElements(){[":before",":after"].forEach(function(element){clonePseudoElement(element)});function clonePseudoElement(element){var style=window.getComputedStyle(original,element);var content=style.getPropertyValue("content");if(content===""||content==="none")return;var className=util.uid();clone.className=clone.className+" "+className;var styleElement=document.createElement("style");styleElement.appendChild(formatPseudoElementStyle(className,element,style));clone.appendChild(styleElement);function formatPseudoElementStyle(className,element,style){var selector="."+className+":"+element;var cssText=style.cssText?formatCssText(style):formatCssProperties(style);return document.createTextNode(selector+"{"+cssText+"}");function formatCssText(style){var content=style.getPropertyValue("content");return style.cssText+" content: "+content+";"}function formatCssProperties(style){return util.asArray(style).map(formatProperty).join("; ")+";";function formatProperty(name){return name+": "+style.getPropertyValue(name)+(style.getPropertyPriority(name)?" !important":"")}}}}}function copyUserInput(){if(original instanceof HTMLTextAreaElement)clone.innerHTML=original.value;if(original instanceof HTMLInputElement)clone.setAttribute("value",original.value)}function fixSvg(){if(!(clone instanceof SVGElement))return;clone.setAttribute("xmlns","http://www.w3.org/2000/svg");if(!(clone instanceof SVGRectElement))return;["width","height"].forEach(function(attribute){var value=clone.getAttribute(attribute);if(!value)return;clone.style.setProperty(attribute,value)})}}}function embedFonts(node){return fontFaces.resolveAll().then(function(cssText){var styleNode=document.createElement("style");node.appendChild(styleNode);styleNode.appendChild(document.createTextNode(cssText));return node})}function inlineImages(node){return images.inlineAll(node).then(function(){return node})}function makeSvgDataUri(node,width,height){return Promise.resolve(node).then(function(node){node.setAttribute("xmlns","http://www.w3.org/1999/xhtml");return(new XMLSerializer).serializeToString(node)}).then(util.escapeXhtml).then(function(xhtml){return'<foreignObject x="0" y="0" width="100%" height="100%">'+xhtml+"</foreignObject>"}).then(function(foreignObject){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+width+'" height="'+height+'">'+foreignObject+"</svg>"}).then(function(svg){return"data:image/svg+xml;charset=utf-8,"+svg})}function newUtil(){return{escape:escape,parseExtension:parseExtension,mimeType:mimeType,dataAsUrl:dataAsUrl,isDataUrl:isDataUrl,canvasToBlob:canvasToBlob,resolveUrl:resolveUrl,getAndEncode:getAndEncode,uid:uid(),delay:delay,asArray:asArray,escapeXhtml:escapeXhtml,makeImage:makeImage,width:width,height:height};function mimes(){var WOFF="application/font-woff";var JPEG="image/jpeg";return{woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JPEG,jpeg:JPEG,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function parseExtension(url){var match=/\.([^\.\/]*?)$/g.exec(url);if(match)return match[1];else return""}function mimeType(url){var extension=parseExtension(url).toLowerCase();return mimes()[extension]||""}function isDataUrl(url){return url.search(/^(data:)/)!==-1}function toBlob(canvas){return new Promise(function(resolve){var binaryString=window.atob(canvas.toDataURL().split(",")[1]);var length=binaryString.length;var binaryArray=new Uint8Array(length);for(var i=0;i<length;i++)binaryArray[i]=binaryString.charCodeAt(i);resolve(new Blob([binaryArray],{type:"image/png"}))})}function canvasToBlob(canvas){if(canvas.toBlob)return new Promise(function(resolve){canvas.toBlob(resolve)});return toBlob(canvas)}function resolveUrl(url,baseUrl){var doc=document.implementation.createHTMLDocument();var base=doc.createElement("base");doc.head.appendChild(base);var a=doc.createElement("a");doc.body.appendChild(a);base.href=baseUrl;a.href=url;return a.href}function uid(){var index=0;return function(){return"u"+fourRandomChars()+index++;function fourRandomChars(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function makeImage(uri){return new Promise(function(resolve,reject){var image=new Image;image.onload=function(){resolve(image)};image.onerror=reject;image.src=uri})}function getAndEncode(url){var TIMEOUT=3e4;if(domtoimage.impl.options.cacheBust){url+=(/\?/.test(url)?"&":"?")+(new Date).getTime()}return new Promise(function(resolve){var request=new XMLHttpRequest;request.onreadystatechange=done;request.ontimeout=timeout;request.responseType="blob";request.timeout=TIMEOUT;request.open("GET",url,true);request.send();var placeholder;if(domtoimage.impl.options.imagePlaceholder){var split=domtoimage.impl.options.imagePlaceholder.split(/,/);if(split&&split[1]){placeholder=split[1]}}function done(){if(request.readyState!==4)return;if(request.status!==200){if(placeholder){resolve(placeholder)}else{fail("cannot fetch resource: "+url+", status: "+request.status)}return}var encoder=new FileReader;encoder.onloadend=function(){var content=encoder.result.split(/,/)[1];resolve(content)};encoder.readAsDataURL(request.response)}function timeout(){if(placeholder){resolve(placeholder)}else{fail("timeout of "+TIMEOUT+"ms occured while fetching resource: "+url)}}function fail(message){console.error(message);resolve("")}})}function dataAsUrl(content,type){return"data:"+type+";base64,"+content}function escape(string){return string.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function delay(ms){return function(arg){return new Promise(function(resolve){setTimeout(function(){resolve(arg)},ms)})}}function asArray(arrayLike){var array=[];var length=arrayLike.length;for(var i=0;i<length;i++)array.push(arrayLike[i]);return array}function escapeXhtml(string){return string.replace(/#/g,"%23").replace(/\n/g,"%0A")}function width(node){var leftBorder=px(node,"border-left-width");var rightBorder=px(node,"border-right-width");return node.scrollWidth+leftBorder+rightBorder}function height(node){var topBorder=px(node,"border-top-width");var bottomBorder=px(node,"border-bottom-width");return node.scrollHeight+topBorder+bottomBorder}function px(node,styleProperty){var value=window.getComputedStyle(node).getPropertyValue(styleProperty);return parseFloat(value.replace("px",""))}}function newInliner(){var URL_REGEX=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:inlineAll,shouldProcess:shouldProcess,impl:{readUrls:readUrls,inline:inline}};function shouldProcess(string){return string.search(URL_REGEX)!==-1}function readUrls(string){var result=[];var match;while((match=URL_REGEX.exec(string))!==null){result.push(match[1])}return result.filter(function(url){return!util.isDataUrl(url)})}function inline(string,url,baseUrl,get){return Promise.resolve(url).then(function(url){return baseUrl?util.resolveUrl(url,baseUrl):url}).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(url))}).then(function(dataUrl){return string.replace(urlAsRegex(url),"$1"+dataUrl+"$3")});function urlAsRegex(url){return new RegExp("(url\\(['\"]?)("+util.escape(url)+")(['\"]?\\))","g")}}function inlineAll(string,baseUrl,get){if(nothingToInline())return Promise.resolve(string);return Promise.resolve(string).then(readUrls).then(function(urls){var done=Promise.resolve(string);urls.forEach(function(url){done=done.then(function(string){return inline(string,url,baseUrl,get)})});return done});function nothingToInline(){return!shouldProcess(string)}}}function newFontFaces(){return{resolveAll:resolveAll,impl:{readAll:readAll}};function resolveAll(){return readAll(document).then(function(webFonts){return Promise.all(webFonts.map(function(webFont){return webFont.resolve()}))}).then(function(cssStrings){return cssStrings.join("\n")})}function readAll(){return Promise.resolve(util.asArray(document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules){return rules.map(newWebFont)});function selectWebFontRules(cssRules){return cssRules.filter(function(rule){return rule.type===CSSRule.FONT_FACE_RULE}).filter(function(rule){return inliner.shouldProcess(rule.style.getPropertyValue("src"))})}function getCssRules(styleSheets){var cssRules=[];styleSheets.forEach(function(sheet){try{util.asArray(sheet.cssRules||[]).forEach(cssRules.push.bind(cssRules))}catch(e){console.log("Error while reading CSS rules from "+sheet.href,e.toString())}});return cssRules}function newWebFont(webFontRule){return{resolve:function resolve(){var baseUrl=(webFontRule.parentStyleSheet||{}).href;return inliner.inlineAll(webFontRule.cssText,baseUrl)},src:function(){return webFontRule.style.getPropertyValue("src")}}}}}function newImages(){return{inlineAll:inlineAll,impl:{newImage:newImage}};function newImage(element){return{inline:inline};function inline(get){if(util.isDataUrl(element.src))return Promise.resolve();return Promise.resolve(element.src).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(element.src))}).then(function(dataUrl){return new Promise(function(resolve,reject){element.onload=resolve;element.onerror=reject;element.src=dataUrl})})}}function inlineAll(node){if(!(node instanceof Element))return Promise.resolve(node);return inlineBackground(node).then(function(){if(node instanceof HTMLImageElement)return newImage(node).inline();else return Promise.all(util.asArray(node.childNodes).map(function(child){return inlineAll(child)}))});function inlineBackground(node){var background=node.style.getPropertyValue("background");if(!background)return Promise.resolve(node);return inliner.inlineAll(background).then(function(inlined){node.style.setProperty("background",inlined,node.style.getPropertyPriority("background"))}).then(function(){return node})}}}})(this)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;var saveAs=saveAs||function(view){"use strict";if(typeof view==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},is_safari=/constructor/i.test(view.HTMLElement)||view.safari,is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},force_saveable_type="application/octet-stream",arbitrary_revoke_timeout=1e3*40,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};setTimeout(revoker,arbitrary_revoke_timeout)},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob([String.fromCharCode(65279),blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,force=type===force_saveable_type,object_url,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");var popup=view.open(url,"_blank");if(!popup)view.location.href=url;url=undefined;filesaver.readyState=filesaver.DONE;dispatch_all()};reader.readAsDataURL(blob);filesaver.readyState=filesaver.INIT;return}if(!object_url){object_url=get_URL().createObjectURL(blob)}if(force){view.location.href=object_url}else{var opened=view.open(object_url,"_blank");if(!opened){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)};filesaver.readyState=filesaver.INIT;if(can_use_save_link){object_url=get_URL().createObjectURL(blob);setTimeout(function(){save_link.href=object_url;save_link.download=name;click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE});return}fs_error()},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){name=name||blob.name||"download";if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name)}}FS_proto.abort=function(){};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if("function"!=="undefined"&&__webpack_require__(617)!==null&&__webpack_require__(618)!==null){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}},function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(exports,{})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http"];_app2.default.directive("lensSavedQueries",[].concat(deps,[function($http){return{template:__webpack_require__(620),link:function link(scope){var vm=scope.vm={items:[],loading:true,show:true};scope.refresh=function(){return $http({url:"/lens/service/query"}).then(function(res){vm.items=res.data;vm.loading=false}).catch(function(err){console.warn(err);vm.loading=false})};$.vent.on("refresh-saved-queries",scope.refresh);scope.refresh()}}}]))},function(module,exports){module.exports='<div ng-cloak>\n    <div class="widget recent-notes">\n        <h3>\n            Saved Queries\n        </h3>\n        <div ng-show="vm.show" ng-if="vm.items.length">\n            <form>\n                <label class="input">\n                    <i class="icon_append fa fa-search"></i>\n                    <input type="text" ng-model="vm.filter.title" placeholder="Filter Saved Queries">\n                </label>\n            </form>\n\n            <ul class="drop-list-scroll-sidebar">\n                <li ng-repeat="item in vm.filteredItems = (vm.items | filter:vm.filter)">\n                    <a ng-href="/lens{{item.uri}}">\n                        {{item.title}}\n\n                        <div class="collectionType" ng-class="{ \'is-patent\': item.queryType === \'PATENT\', \'is-scholar\': item.queryType === \'SCHOLARLY\' }">\n                            <em class="fa fa-circle"></em>\n                            {{item.queryType | collectionType}}\n                        </div>\n                    </a>\n                    <div class="collectionMeta">\n                        <span>\n                            {{item.created | date}}\n                        </span>\n\n                        <a href="/lens/user/saved-queries" class="pull-right">\n                            <em class="fa fa-bell col-ter" ng-if="item.notificationsEnabled" tooltip-title="Notifications Enabled"></em>\n                            <em class="fa fa-bell-slash col-error" ng-if="!item.notificationsEnabled" tooltip-title="Notifications Disabled"></em>\n                        </a>\n                    </div>\n                </li>\n            </ul>\n\n            <div>\n                <small>\n                    <a class="col-meta" href="/lens/user/saved-queries">\n                        Manage Saved Queries\n                    </a>\n                </small>\n            </div>\n\n            <div class="alert alert-info" ng-if="!vm.filteredItems.length && vm.items.length">\n                No saved queries match that filter\n                <a href="/lens/user/saved-queries">View All Saved Queries</a>\n            </div>\n        </div>\n\n\n        <div ng-if="!vm.items.length && !vm.loading" class="clearfix sidebar-walk-through">\n            <strong>No Saved Queries Yet</strong>\n            <ul class="list-styled">\n                <li>Save any list of search results</li>\n                <li>Get query alerts for new data</li>\n                <li>Turn saved queries into collections</li>\n            </ul>\n        </div>\n    </div>\n\n    <hr ng-if="$root.isAnon" >\n\n    <div\n        class="widget"\n        ng-if="$root.isAnon"\n        ng-include="\'registration-widget\'">\n    </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ArticleFields=__webpack_require__(137);var IsoCountriesNameLookup=__webpack_require__(119);var deps=["ScholarService","$timeout","$rootScope"];_app2.default.directive("lensScholarAnalysis",[].concat(deps,[function(ScholarService,$timeout,$rootScope){return{template:__webpack_require__(622),scope:{aggregations:"<",isPreview:"<",isCited:"<"},link:function link(scope,element){var vm=scope.vm={analysisChartKeys:ScholarService.analysisChartKeys,analysisItems:ScholarService.analysisItems,chartData:{},fields:ArticleFields,loadingFacet:{}};scope.selectedFacetFilter=function(k){return vm.analysisItems[k]};scope._buildAggCharts=function(aggregations){var _ScholarService$build=ScholarService.buildAggCharts(aggregations),aggs=_ScholarService$build.aggs,metrics=_ScholarService$build.metrics,chartData=_ScholarService$build.chartData;vm.aggs=_.assign(vm.aggs,aggs);vm.chartData=_.assign(vm.chartData,chartData);vm.metrics=metrics;vm.aggsReady=true;vm.aggsFailed=false;$timeout(function(){vm.analysisReady=true},200)};scope.onClickLineChartPoint=function(point){var ctrl=scope.$parent.$parent.$ctrl;if(ctrl){ctrl.state.fromYear=point.x;ctrl.state.toYear=point.x;ctrl.state.dateFilterField="year_published";ctrl.search()}};scope.onFilterYearRange=function(extent){$rootScope.setSideTabsView("st-filters");var ctrl=scope.$parent.$parent.$ctrl;if(ctrl){ctrl.state.fromYear=extent[0];ctrl.state.toYear=extent[1];ctrl.state.dateFilterField="year_published";ctrl.search()}};scope.onClickBarChartItem=function(point){var label=(0,_get3.default)(point,"data.label");var agg=(0,_get3.default)(point,"data.key")||(0,_get3.default)(point,"data.agg");scope.addFilter(agg,label)};scope.onClickCountry=function(label){scope.addFilter("author.affiliation.grid.address.country_code",IsoCountriesNameLookup[label])};scope.addFilter=function(k,v){$rootScope.setSideTabsView("st-filters");var ctrl=scope.$parent.$parent.$ctrl;if(ctrl){ctrl.addFilter(k,v)}else{var filterMap=JSON.stringify(_defineProperty({},k,_defineProperty({},v,true)));var _scope$$parent$$paren=scope.$parent.$parent.$patentSearchCtrl.state,patentQueryId=_scope$$parent$$paren.patentQueryId,scholarlySearchId=_scope$$parent$$paren.scholarlySearchId;var params={filterMap:filterMap,preview:true};if(scholarlySearchId){params.scholarlySearchId=scholarlySearchId}else{params.patentQueryId=patentQueryId}window.location="/lens/scholar/search/results?"+$.param(params)}};scope.removeAnalysisItem=function(k){console.log("removeAnalysisItem",k);ScholarService.toggleAnalysisItem(k)};scope.getTopFacets=function(k){vm.loadingFacet[k]=true;ScholarService.getTopFacets(k)};var updateAnalysisItems=function updateAnalysisItems(analysisItems){scope.vm.analysisItems=analysisItems};ScholarService.on("UPDATE_ANALYSIS_ITEMS",updateAnalysisItems);scope.$on("$destroy",function(){ScholarService.removeListener("UPDATE_ANALYSIS_ITEMS",updateAnalysisItems)});var render=function render(){scope._buildAggCharts(scope.aggregations)};scope.$watch("aggregations",render,true);render()}}}]))},function(module,exports){module.exports='<div>\n    <div lens-analysis-item\n        ng-repeat="k in vm.analysisChartKeys"\n        ng-if="selectedFacetFilter(k) && vm.chartData[k]"\n        k="k"\n        field="vm.fields[k]"\n        label-field-key="isCited ? \'citedLabel\' : \'label\'"\n        loading="vm.loadingFacet[k]"\n        data="vm.chartData[k]"\n        class="masonry-card"\n        on-click-country="onClickCountry"\n        on-click-item="onClickBarChartItem"\n        on-click-logo-grid-item="addFilter"\n        on-click-get-more="getTopFacets"\n        on-click-line-chart-point="onClickLineChartPoint"\n        on-click-toggle-facet="removeAnalysisItem"\n        on-filter-year-range="onFilterYearRange"\n        is-preview="isPreview"\n    ></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["ScholarService"];_app2.default.directive("lensScholarAnalysisSelector",[].concat(deps,[function(ScholarService){return{template:__webpack_require__(262),scope:{minimal:"<"},link:function link(scope){scope.vm={analysisChartKeys:ScholarService.analysisChartKeys,analysisItems:ScholarService.analysisItems,fields:ScholarService.ArticleFields,hasChartData:{}};scope.toggleItem=function(k){var persistDropdown=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;ScholarService.toggleAnalysisItem(k);if(persistDropdown){scope.showCustomiseDropdown()}};scope.selectAll=function(){ScholarService.selectAllAnalysisItems()};scope.reset=function(){ScholarService.resetAnalysisItems()};scope.showCustomiseDropdown=function(){_.defer(function(){return $(".dropdown-toggle").trigger("click")})};var updateAnalysisItems=function updateAnalysisItems(analysisItems){scope.vm.analysisItems=analysisItems};ScholarService.on("UPDATE_ANALYSIS_ITEMS",updateAnalysisItems);var updateChartData=function updateChartData(chartData){scope.vm.chartData=chartData;_.keys(chartData).forEach(function(k){var d=chartData[k][0];scope.vm.hasChartData[k]=d&&d.values.length>2})};ScholarService.on("UPDATE_CHART_DATA",updateChartData);scope.$on("$destroy",function(){ScholarService.removeListener("UPDATE_ANALYSIS_ITEMS",updateAnalysisItems);ScholarService.removeListener("UPDATE_CHART_DATA",updateChartData)})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$q","ScholarService"];_app2.default.directive("lensScholarlyWorkTitle",[].concat(deps,[function($q,ScholarService){return{scope:{lensIdNum:"<"},link:function link(scope,element){var ids=[scope.lensIdNum];var FIELDS=["metadata.title","citation_ids"];var promise=ScholarService.getAll(ids,"lens_ids_num",FIELDS);$q.when(promise).then(function(articles){if(articles.length){var title=articles[0].title;element.text("/ "+title)}}).catch(function(err){console.warn(err)})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensSearchBar",[].concat(deps,[function(){return{scope:{},link:function link(scope,element){var input=element.find("#q");var button=element.find("#searchButton .search-bar-button-label");var setInputPlaceholder=function setInputPlaceholder(message){input.attr("placeholder",window.messages.prop(message))};var setButtonText=function setButtonText(message){button.text(window.messages.prop(message))};scope.setSearchInitialised=function(){setInputPlaceholder("search.refinePlaceholder");setButtonText(input.val()?"searchBar.refineSearch":"search.new")};scope.showCitedWorksSearch=function(){setInputPlaceholder("searchBar.citedWorks.placeholder");setButtonText("searchBar.searchWithin.button")};scope.setCollection=function(){setInputPlaceholder("search.refineCollectionPlaceholder");setButtonText("search.refineCollectionButton")};scope.$root.searchBarScope=scope}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http"];_app2.default.directive("lensSearchHistory",[].concat(deps,[function($http){return{template:__webpack_require__(627),link:function link(scope){var vm=scope.vm={items:[],loading:true,show:true};scope.refresh=function(){return $http({url:"/lens/api/user/work-area/patent-search-history"}).then(function(res){vm.items=res.data;vm.loading=false}).catch(function(err){console.warn(err);vm.loading=false})};scope.refresh()}}}]))},function(module,exports){module.exports='<div ng-cloak>\n    <div class="widget recent-notes">\n        <h3>\n            Recent Search History\n        </h3>\n\n        <div ng-show="vm.show" ng-if="vm.items.length">\n            <form>\n                <label class="input">\n                    <i class="icon_append fa fa-search"></i>\n                    <input type="text" ng-model="vm.filter.reference" placeholder="Filter Search History">\n                </label>\n            </form>\n\n            <ul class="drop-list-scroll-sidebar">\n                <li ng-repeat="item in vm.filteredItems = (vm.items | filter:vm.filter | limitTo:10)">\n                    <a ng-href="/lens/{{item.fullUri}}">\n\n                        <div>{{::item.reference}}</div>\n\n                        <div class="collectionType is-patent">\n                            <em class="fa fa-circle"></em>\n                            {{item.queryType | collectionType}}\n                            - ({{::item.resultSize | customNumber}})\n                        </div>\n\n                        <div class="collectionMeta">\n                            <span>\n                                {{::item.created | date}}\n                            </span>\n                        </div>\n                    </a>\n\n                    <div class="nested-history" ng-if="item.nested.length">\n                        <div ng-repeat="nested in item.nested">\n                            <a ng-href="/lens/{{nested.fullUri}}">\n                                {{nested.filtersReference}}\n                            </a>\n                        </div>\n                    </div>\n\n                </li>\n            </ul>\n\n            <div>\n                <small>\n                    <a class="col-meta" href="/lens/user/history">\n                        Manage Search History\n                    </a>\n                </small>\n            </div>\n\n            <div class="alert alert-info" ng-if="!vm.filteredItems.length && vm.items.length">\n                <em class="fa fa-info-circle"></em>\n                No history items match that filter\n                <a href="/lens/user/history">View All History</a>\n            </div>\n\n        </div>\n\n        <div ng-if="!vm.items.length && !vm.loading" class="clearfix sidebar-walk-through">\n             <strong>No Search History Yet</strong>\n             <ul class="list-styled">\n                 <li>Convert a search into a saved query</li>\n                 <li>Recall past searches in history</li>\n                 <li>Opt in/out of recording search history</li>\n             </ul>\n\n            <div class="alert alert-info" ng-if="!$root.settings.recordHistory">\n                <em class="fa fa-info-circle"></em>\n                Your search history is not enabled, to enable history\n                <a href="/lens/user/settings">please update your user settings</a>.\n            </div>\n         </div>\n\n    </div>\n\n    <hr ng-if="$root.isAnon" >\n\n    <div\n        class="widget"\n        ng-if="$root.isAnon"\n        ng-include="\'registration-widget\'">\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["OrcidService","$timeout"];_app2.default.directive("lensSearchOrcid",[].concat(deps,[function(OrcidService,$timeout){return{template:__webpack_require__(629),scope:{orcidId:"="},link:function link(scope,element){var LIMIT=12;var vm=scope.vm={name:"",start:0,loading:false,showResultsList:false};var search=function search(){if(vm.name){element.closest("form").off(".SearchOrcid");vm.loading=true;vm.showResultsList=true;if(OrcidService.isOrcidId(vm.name)){OrcidService.lookupPersonName(vm.name.trim()).then(function(name){scope.$apply(function(){vm.loading=false;vm.results=[{id:vm.name.trim(),name:name}]})})}else{OrcidService.searchByName(vm.name,vm.start,LIMIT).then(function(result){Promise.all([Promise.all(result.map(OrcidService.lookupPersonName)),Promise.all(result.map(OrcidService.lookupPersonUrls)),Promise.all(result.map(OrcidService.lookupAffiliations)),Promise.all(result.map(OrcidService.lookupPositions))]).then(function(_ref){var _ref2=_slicedToArray(_ref,4),names=_ref2[0],urls=_ref2[1],affiliations=_ref2[2],positions=_ref2[3];scope.$apply(function(){vm.loading=false;vm.results=vm.results.concat(result.map(function(id,i){return{id:id,name:names[i],affiliations:affiliations[i],positions:positions[i],urls:urls[i]}}))});window.initTooltips(element)})})}$timeout(function(){element.closest("form").one("click.SearchOrcid",function(){scope.$apply(function(){vm.showResultsList=false})})},1)}};scope.newSearch=function(){vm.start=0;vm.results=[];search()};scope.loadMore=function(){vm.start+=LIMIT;search()};scope.selectOrcidId=function(orcidId){vm.showResultsList=false;OrcidService.lookupPersonName(orcidId).then(function(name){scope.$apply(function(){vm.name=name+" / "+orcidId})});scope.orcidId=orcidId;element.closest("form").off(".SearchOrcid")};element.find("input").keydown(function(event){if(event.keyCode===13){event.preventDefault();scope.newSearch()}})}}}]))},function(module,exports){module.exports='<div class="input-group search-orcid-lookup">\n    <input class="form-control" ng-model="vm.name" placeholder="{{\'search.orcid.placeholder\' | message}}" />\n    <span class="input-group-btn">\n        <button class="btn btn-sec" type="button" ng-click="newSearch()" ng-disabled="vm.loading || !vm.name">\n            <em class="fa fa-search"></em>\n        </button>\n    </span>\n</div>\n\n    \n<div class="search-orcid-results-list" ng-show="vm.showResultsList">\n    <div ng-repeat="result in vm.results" class="search-orcid-result">\n        <div ng-click="selectOrcidId(result.id)" ng-class="{\'ttip-hov\': result.affiliations.length || result.positions.length || result.urls.length }" data-tooltip-content="#orcid-result-{{result.id}}">\n            {{result.name}}\n            <small>{{result.id}}</small>\n        </div>\n        <div style="display: none">\n            <div id="orcid-result-{{result.id}}">\n                <b ng-if="result.affiliations.length">{{\'search.orcid.results.affiliations\' | message }}:</b>\n                <ul>\n                    <li ng-repeat="affiliation in result.affiliations track by $index">{{affiliation}}</li>\n                </ul>\n                <b ng-if="result.positions.length">{{\'search.orcid.results.positions\' | message }}:</b>\n                <ul>\n                    <li ng-repeat="position in result.positions track by $index">{{position}}</li>\n                </ul>\n                <b ng-if="result.urls.length">{{\'search.orcid.results.links\' | message }}:</b>\n                <ul>\n                    <li ng-repeat="url in result.urls track by $index"><a ng-href="{{url.url}}">{{url.label}}</a></li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div ng-if="vm.loading" class="no-content">\n        <em class="fa fa-refresh fa-spin fa-fw load-icon"></em>\n        Loading...\n    </div>\n    \n    <p style="margin: .75em 0em;" ng-if="vm.results.length && !vm.loading">\n        <a class="styled-link" ng-click="loadMore()">Load more results from the ORCID registry</a>\n    </p>\n    \n    <div class="alert alert-danger" style="width: 100%;" ng-if="vm.results.length == 0 && !vm.loading">\n        {{\'search.orcid.noResults\' | message}}\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _findReservedCharacters=__webpack_require__(281);var _luceneQueryParser=__webpack_require__(134);var _luceneQueryParser2=_interopRequireDefault(_luceneQueryParser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensSearchTips",[function(){return{template:__webpack_require__(263),replace:true,scope:{view:"<"},link:function link(scope){if(!scope.view){scope.view="tips"}scope.vm={type:window.location.pathname.indexOf("/lens/scholar")===0?"SCHOLAR":"PATENT"};var checkSearchQuery=function checkSearchQuery(){var q=$("#q").val();scope.vm.q=q;var ids=(0,_findReservedCharacters.findReservedSubStrIdxs)(q);if(ids.size){scope.warnings=(0,_findReservedCharacters.sortBySubStrIndex)(ids);try{scope.queryParserError=null;_luceneQueryParser2.default.parse(q)}catch(err){scope.queryParserError=err}}else{scope.warnings=null}};$("#q").on("keyup",checkSearchQuery);checkSearchQuery()}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensSelectCollectionsList",[].concat(deps,[function(){return{template:__webpack_require__(632),scope:{collections:"<",filter:"<",checked:"="}}}]))},function(module,exports){module.exports='<div class="window-scroll window-collections">\n    <div ng-repeat="collection in visible = (collections | filter:filter | orderBy:\'updated\':true)"\n        lens-select-collections-list-item\n        collection="collection"\n        checked="checked[collection.id]"\n    ></div>\n    \n</div>\n\n<div style="margin-top: -2px;" class="alert alert-danger" ng-if="!visible.length">\n    No collections contain the selected items or match the filter\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensSelectCollectionsListItem",[].concat(deps,[function(){return{template:__webpack_require__(634),scope:{collection:"<",checked:"="}}}]))},function(module,exports){module.exports='<div class="clearfix collectionItem" ng-class="{viewing: viewing}">\n    <form class="pull-left">\n        <label class="checkbox">\n            <input type="checkbox" ng-model="checked">\n            <i></i>\n        </label>\n    </form>\n\n    <span class="collectionTitle">{{collection.title}}</span>\n    <span class="collectionCount itemCount">({{collection.itemCount | customNumber}})</span>\n\n    <div class="collectionMeta" ng-class="{ \'is-patent\': collection.type === \'PATENT\', \'is-scholar\': collection.type === \'SCHOLARLY_WORK\' }">\n        <span class="collectionType">\n            {{ collection.type | collectionType }} -\n        </span>\n        <span class="collectionShared">\n            {{collection.sharedType === \'USER\' ? \'Private\' : \'Public\'}} -\n        </span>\n        <span class="collectionDate">\n            {{::\'common.Updated\' | message}}:\n            {{collection.updated | date}}\n        </span>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("selectOnClick",[].concat(deps,[function(){return{link:function link(scope,element){element.on("click",function(){return element.select()})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_app2.default.directive("lensSidebarContent",function(){return{template:__webpack_require__(265)}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensSideTabs",[].concat(deps,[function(){return{template:__webpack_require__(264),replace:true,scope:{type:"<"}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChartColours=__webpack_require__(50);var deps=[];var themes={report:["#ADC9EA","#6496D6","#1269B7","#D356BC","#A454D3"]};_app2.default.directive("lensSimpleBarChart",[].concat(deps,[function(){return{scope:{data:"<",theme:"<",elementClick:"<",elementTooltip:"<"},template:__webpack_require__(639),link:function link(scope){var chartColours=themes[scope.theme]||ChartColours;var max=void 0;var render=function render(){var values=scope.data[0].values.map(function(d){return d.value});max=_.max(values)};scope.barStyle=function(item,i){var percent=Math.floor(item.value/max*100);var width=percent+"%";return{width:width,"background-color":chartColours[i%chartColours.length],cursor:scope.elementClick?"pointer":"default"}};render();scope.$watch("data",render);if(scope.elementClick){scope.clickItem=function(point){scope.elementClick.apply(scope.$parent.$ctrl||undefined,[point])}}}}}]))},function(module,exports){module.exports='<div class="simple-bar-chart">\n    <div ng-repeat="(i, item) in data[0].values">\n        {{item.displayName || item.label}}\n        <div class="simple-bar-chart-bar"\n            ng-style="barStyle(item, i)"\n            ng-click="clickItem({data:item})"\n            tooltip-title\n            tooltip-title-variable="elementTooltip(item)"\n        >\n            <span class="simple-bar-chart-value">{{item.value | customNumber}}</span>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensSlider",[].concat(deps,[function(){return{scope:{min:"@",max:"@",value:"=lensSlider"},link:function link(scope,element,attrs){element.slider({min:parseInt(scope.min),max:parseInt(scope.max),step:1,value:scope.value||100,slide:function slide(event,ui){scope.value=ui.value;scope.$apply()}});scope.$watch("value",function(value){element.slider("value",value)})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensStateActive",["$state","$transitions",function($state,$transitions){return{scope:{state:"<lensStateActive"},link:function link(scope,element,attrs){var render=function render(){var active=false;if(_.isArray(scope.state)){scope.state.forEach(function(k){if($state.includes(k)===true){active=true}})}else{active=$state.includes(scope.state)===true}element.toggleClass("active",active)};var deregisterTransitionSuccess=$transitions.onSuccess({},function(event){render()});scope.$on("$destroy",function(){deregisterTransitionSuccess()});render()}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensSticky",["$window",function($window){return{link:function link(scope,element){var el=element;var top=null;var abort=false;var resize=function resize(){top=el.offset().top;abort=false;if(element.height()>$(window).height()){console.warn("element height",element.height(),"greater than window",$(window).height());abort=true}};var scroll=function scroll(){if(top===null){resize()}el.toggleClass("stuck",!abort&&top<window.pageYOffset)};$(window).resize(resize);$(window).scroll(scroll);setTimeout(resize,1e3)}}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http"];_app2.default.directive("lensTagsList",[].concat(deps,[function($http){return{template:__webpack_require__(644),link:function link(scope){var vm=scope.vm={items:[],loading:true,show:true};scope.refresh=function(){return $http({url:"/lens/service/tag"}).then(function(res){vm.items=res.data;vm.loading=false}).catch(function(err){console.warn(err);vm.loading=false})};$.vent.on("refresh-tags",scope.refresh);scope.refresh()}}}]))},function(module,exports){module.exports='<div ng-cloak>\n    <div class="widget widget-tags">\n        <h3>\n            Your Tags\n        </h3>\n        \n        <div ng-show="vm.show">\n            <form ng-if="vm.items.length" >\n                <label class="input">\n                    <i class="icon_append fa fa-search"></i>\n                    <input type="text" ng-model="vm.filter.tag" placeholder="Filter Tags">\n                </label>\n            </form>\n            \n            <ul class="list-inline-alt">\n                <li ng-repeat="item in vm.filteredItems = (vm.items | filter:vm.filter)">\n                    <a ng-href="/lens/search?tags={{item.tag}}">\n                        #{{item.tag}}\n                        <small class="col-meta">\n                            ({{item.countPatents | customNumber}})\n                        </small>\n                    </a>\n                </li>\n            </ul>    \n            \n            <div ng-if="vm.items.length">\n                <small>\n                    <a class="col-meta" href="/lens/user/tags">\n                        Manage Tags\n                    </a>\n                </small>\n            </div>\n        \n\n            <div ng-if="!vm.items.length" class="clearfix sidebar-walk-through">\n                \n                <strong>No Tags Yet</strong>\n                <ul class="list-styled">\n                    <li>Add tags to your search results</li>\n                    <li>Tags are comma separated</li> \n                    <li>Organise and filter results by tags</li> \n                </ul>  \n                \n            </div>\n\n\n            <div class="alert alert-info" ng-if="!vm.filteredItems.length && vm.items.length">\n                <em class="fa fa-info-circle"></em>\n                No tags match that filter\n                <a href="/lens/user/tags">View All tags</a>\n            </div>\n            \n        </div>\n    </div>\n    \n    <hr ng-if="$root.isAnon" >\n    \n    <div \n        class="widget" \n        ng-if="$root.isAnon" \n        ng-include="\'registration-widget\'">\n    </div>\n\n    \n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_app2.default.directive("tooltipTitle",function(){return{restrict:"A",scope:{tooltipTitle:"@",tooltipTitleVariable:"=",tooltipOptions:"=",tooltipContentSelector:"@"},link:function link(scope,element,attrs){var isTooltipDynamicVariable=scope.tooltipTitleVariable!==undefined;if(!scope.tooltipTitle&&!isTooltipDynamicVariable&&!scope.tooltipContentSelector){return}if(scope.tooltipOptions){scope.tooltipOptions=_.defaults(scope.tooltipOptions,window.tooltipsterConfig)}var tooltipOptions=scope.tooltipOptions||_.clone(window.tooltipsterConfig)||{};var message=scope.tooltipTitle;if(isTooltipDynamicVariable){message=scope.tooltipTitleVariable;scope.$watch("tooltipTitleVariable",function(value){element.tooltipster("content",value);if(!value){element.tooltipster("disable")}else{element.tooltipster("enable")}})}scope.$watch("tooltipContentSelector",function(value){if(value){element.tooltipster("content",$(value))}});if(message){tooltipOptions.content=message}element.tooltipster(tooltipOptions);scope.$on("$destroy",function(){if(element.is(".tooltipstered")){try{element.tooltipster("destroy")}catch(e){}}})}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensTristateCheckbox",[].concat(deps,[function(){return{scope:{model:"="},link:function link(scope,element){element.tristate({state:scope.model?true:scope.model===false?null:false});element.on("change",function(){if(element.is(":checked")){scope.model=true}else if(element.is(":indeterminate")){scope.model=false}else{scope.model=undefined}})}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensTruncate",function(){return{link:function link(scope,element,attrs){var text=element.text();var max=attrs.lensTruncate;var length=element.text().length;if(length>max){element.text(text.substr(0,max)+"...");var handle=angular.element('<a style="cursor:pointer">Show All</a>');element.append(handle);handle.on("click",function(){element.text(text)})}element.removeClass("hidden")}}})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.directive("lensUrlSafe",[].concat(deps,[function(){return{require:"ngModel",link:function link(scope,elm,attrs,ctrl){ctrl.$validators.lensUrlSafe=function(modelValue){if(ctrl.$isEmpty(modelValue)){return true}return modelValue===encodeURIComponent(modelValue)}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _dropzone=__webpack_require__(208);var _dropzone2=_interopRequireDefault(_dropzone);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;_dropzone2.default.autoDiscover=false;var deps=["$http"];module.exports=_app2.default.directive("lensUserProfilePicture",[].concat(deps,[function($http){return{template:__webpack_require__(650),scope:{key:"@"},link:function link(scope,element){var setScopeUrl=function setScopeUrl(){scope.url=scope.$root.userProfilePictureUrl(scope.key)+"?"+Date.now()};var completeUpload=function completeUpload(file,done){scope.vm.uploading=false;done();dz.removeFile(file)};var dz=new _dropzone2.default(element.find(".dropzone")[0],{url:"/lens/service/user/profile/picture",autoProcessQueue:false,addRemoveLinks:true,acceptedFiles:"image/*",accept:function accept(file,done){scope.vm.error=null;var formData=new FormData;formData.append("file",file);scope.vm.uploading=true;$http.post("/lens/service/user/profile/picture",formData,{headers:{"Content-Type":undefined}}).then(function(response){notification.success(window.messages.prop("user.profile.image.uploadedSuccessfully"));completeUpload(file,done);if(!scope.key){scope.key=response.data}setScopeUrl()},function(response){notification.error(response.data);completeUpload(file,done)})},error:function error(file,err){notification.error(err||"Could not upload files");scope.vm.uploading=false;scope.$digest()}});setScopeUrl();scope.vm={};scope.delete=function(){$http.delete("/lens/service/user/profile/picture").then(function(){scope.key="";notification.success(window.messages.prop("user.profile.image.deletedSuccessfully"))})}}}}]))},function(module,exports){module.exports='<div class="alert alert-success" ng-if="updated">{{\'common.updated.successfully\' | message}}</div>\n\n    <div class="panel panel-default">\n        <div class="panel-heading">\n            <strong>{{\'user.profile.image\' | message}}</strong>\n        </div>\n        <div class="panel-body">\n            <div ng-show="vm.uploading">\n                <h2>Uploading...</h2>\n                <p>This may take some time depending on the size of your file. Please be patient.</p>\n            </div>\n            \n            <div class="clearfix avatar-upload">\n                <div class="form-group" ng-if="key">\n                    <em tooltip-title="{{ \'common.action.delete\' | message}}" aria-label="{{\'common.action.delete\' | message}}" class="fa fa-minus-circle col-error" ng-click="delete()" ng-if="key"></em>\n                    <img class="is-profile-picture" ng-src="{{url}}" />\n                </div>    \n                <div class="dropzone"></div>\n            </div>     \n            \n            <small>\n                Supported file types: .png, .jpg. Image must be square (width must be the same as the height), at least 200 pixels wide, and less than 100KB.\n                By sharing this data with Lens.org and the public, you acknowledge that you are authorized to do so.\n            </small>\n            \n        </div>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var FlashMessagesService=__webpack_require__(282);var flashMessages=new FlashMessagesService;var deps=["SettingsService","$timeout","$window"];module.exports=_app2.default.directive("lensUserSettings",[].concat(deps,[function(SettingsService,$timeout,$window){return{template:__webpack_require__(266),link:function link(scope,element){var vm=scope.vm={loading:false,settings:SettingsService.local()||null};SettingsService.fetch().then(function(data){vm.settings=data;scope.originalTheme=vm.settings.theme;vm.loading=false});scope.update=function(){SettingsService.update(vm.settings).then(function(data){var message=window.messages.prop("common.updated.successfully");notification.notify(message);if(vm.settings.theme!==scope.originalTheme){flashMessages.addNotification(message);$window.location.reload()}})}}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var embed=window.vegaEmbed;var deps=["$rootScope"];_app2.default.directive("lensVegaChart",[].concat(deps,[function($rootScope){return{template:'\n        <div class="scroll-notice-container">\n            <div class="scroll-notice-content">Hold shift key while scrolling to zoom</div>\n            <div class="chart-target"></div>\n        </div>\n    ',scope:{spec:"<",onClick:"<",scrollNotice:"<",view:"=",rawSpec:"=",filterExtent:"="},link:function link(scope,el){var element=el.find(".chart-target");if(scope.scrollNotice){el.on("wheel",function(e){el.toggleClass("scroll-notice-active",!e.shiftKey)});var removeNotice=_.debounce(function(){el.toggleClass("scroll-notice-active",false)},100);el.on("mouseout",function(e){el.toggleClass("scroll-notice-active",false)});el.on("mousemove",function(e){removeNotice()})}var render=function render(){element.empty();embed(element.get(0),scope.spec,window.VEGA_EMBED_OPTS).then(function(_ref){var view=_ref.view,spec=_ref.spec;if(scope.rawSpec!==undefined){scope.rawSpec=spec}if(scope.view!==undefined){scope.view=view}view.addEventListener("click",function(event,item){if(item&&item.datum){if(scope.onClick){scope.onClick(item.datum)}}});if(scope.filterExtent){scope.view.addDataListener("grid_store",function(name,value){var extent=(0,_get3.default)(value,"[0].intervals[0].extent")||(0,_get3.default)(value,"[0].values");if(_.isArray(extent[0])){extent=extent[0]}extent=[extent[0],extent[extent.length-1]];if(scope.filterExtent){scope.filterExtent=extent.map(function(d){return new Date(d)});debouncedDigest()}})}})};var debouncedDigest=_.debounce(function(){scope.$apply()},500);var _render=_.debounce(render,100);scope.$watch("spec",_render);_render()}}}]))},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.directive("lensVersionCheck",["$http",function($http){return{template:__webpack_require__(267),link:function link(scope,element,attrs){if(window.location.pathname.includes("build.lens.org/lens-ui/LENSUI-")){$http({url:"../latest/build.json",cache:false}).then(function(_ref){var data=_ref.data;var assetLocation=data.assetLocation.split("//").pop();var href=window.location.href.split("//").pop();var schema=window.location.href.split("//").shift()+"//";if(!href.includes(assetLocation)){scope.newVersionUrl=schema+assetLocation+(attrs.path||"/index.html")}else{console.log("assetLocation up to date with latest")}}).catch(function(e){console.warn("Could not fetch build.json to check for new version")})}}}}])},function(module,exports,__webpack_require__){"use strict";var _d=__webpack_require__(38);var d3=_interopRequireWildcard(_d);var _d3Layout=__webpack_require__(655);var _d3Layout2=_interopRequireDefault(_d3Layout);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var chartColours=["#1f9cac","#001e3c","#1b75bc"];_app2.default.directive("lensWordCloud",[function(){return{scope:{data:"=",warning:"=",height:"<",renderVersion:"<",onClickItem:"<"},template:"Loading...",controller:["$scope","$element","$timeout",function(scope,element,$timeout){var render=_.debounce(function(){element.empty();var data=scope.data;if(!data.length){return}if(!element.is(":visible")){return}var xMax=50;var xMin=8;var values=data.map(function(d){return d.count||d.value});var max=_.max(values);var min=_.min(values);data.forEach(function(d){var percent=((d.count||d.value)-min)/(max-min);d.outputX=percent*(xMax-xMin)+xMin;d.text=d.text||d.label+" ("+(d.count||d.value.toLocaleString())+")"});var width=element[0].clientWidth;var layout=(0,_d3Layout2.default)().size([width,scope.height||700]).words(data).padding(5).rotate(function(){return 0}).font("sans-serif").fontSize(function(d){return d.outputX}).on("end",draw);layout.start();function draw(words){var svg=d3.select(element[0]).append("svg");svg.attr("width",layout.size()[0]).attr("height",layout.size()[1]).append("g").attr("transform","translate("+layout.size()[0]/2+","+layout.size()[1]/2+")").selectAll("text").data(words).enter().append("text").style("font-size",function(d){return d.outputX+"px"}).style("font-family","sans-serif").style("fill",function(d,i){return chartColours[i%chartColours.length]}).attr("text-anchor","middle").attr("transform",function(d){return"translate("+[d.x,d.y]+")rotate("+d.rotate+")"}).text(function(d){return d.text}).on("click",function(data){if(scope.onClickItem){scope.onClickItem({data:data})}});var diff=data.length-words.length;if(diff){var message="\n                        Warning: "+diff+" item"+(diff>1?"s":"")+" dropped from this cloud due to size constraints.\n                        This is a known issue with this word cloud which we are investigating. Please consider viewing\n                        this data using one of the other views above, or if possible, increasing your browser window size.\n                    ";scope.warning=message}}},50);render();scope.$watch("data",render);scope.$watch("renderVersion",render);scope.getElementDimensions=function(){return{h:element.height(),w:element.width()}};scope.$watch(scope.getElementDimensions,function(newValue,oldValue){if(oldValue.h===0){return}if(oldValue.w!==newValue.w){render()}},true);element.bind("resize",function(){scope.$apply()})}]}}])},function(module,exports,__webpack_require__){var dispatch=__webpack_require__(656).dispatch;var cloudRadians=Math.PI/180,cw=1<<11>>5,ch=1<<11;module.exports=function(){var size=[256,256],text=cloudText,font=cloudFont,fontSize=cloudFontSize,fontStyle=cloudFontNormal,fontWeight=cloudFontNormal,rotate=cloudRotate,padding=cloudPadding,spiral=archimedeanSpiral,words=[],timeInterval=Infinity,event=dispatch("word","end"),timer=null,random=Math.random,cloud={},canvas=cloudCanvas;cloud.canvas=function(_){return arguments.length?(canvas=functor(_),cloud):canvas};cloud.start=function(){var contextAndRatio=getContext(canvas()),board=zeroArray((size[0]>>5)*size[1]),bounds=null,n=words.length,i=-1,tags=[],data=words.map(function(d,i){d.text=text.call(this,d,i);d.font=font.call(this,d,i);d.style=fontStyle.call(this,d,i);d.weight=fontWeight.call(this,d,i);d.rotate=rotate.call(this,d,i);d.size=~~fontSize.call(this,d,i);d.padding=padding.call(this,d,i);return d}).sort(function(a,b){return b.size-a.size});if(timer)clearInterval(timer);timer=setInterval(step,0);step();return cloud;function step(){var start=Date.now();while(Date.now()-start<timeInterval&&++i<n&&timer){var d=data[i];d.x=size[0]*(random()+.5)>>1;d.y=size[1]*(random()+.5)>>1;cloudSprite(contextAndRatio,d,data,i);if(d.hasText&&place(board,d,bounds)){tags.push(d);event.word(d);if(bounds)cloudBounds(bounds,d);else bounds=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}];d.x-=size[0]>>1;d.y-=size[1]>>1}}if(i>=n){cloud.stop();event.end(tags,bounds)}}};cloud.stop=function(){if(timer){clearInterval(timer);timer=null}return cloud};function getContext(canvas){canvas.width=canvas.height=1;var ratio=Math.sqrt(canvas.getContext("2d").getImageData(0,0,1,1).data.length>>2);canvas.width=(cw<<5)/ratio;canvas.height=ch/ratio;var context=canvas.getContext("2d");context.fillStyle=context.strokeStyle="red";context.textAlign="center";return{context:context,ratio:ratio}}function place(board,tag,bounds){var perimeter=[{x:0,y:0},{x:size[0],y:size[1]}],startX=tag.x,startY=tag.y,maxDelta=Math.sqrt(size[0]*size[0]+size[1]*size[1]),s=spiral(size),dt=random()<.5?1:-1,t=-dt,dxdy,dx,dy;while(dxdy=s(t+=dt)){dx=~~dxdy[0];dy=~~dxdy[1];if(Math.min(Math.abs(dx),Math.abs(dy))>=maxDelta)break;tag.x=startX+dx;tag.y=startY+dy;if(tag.x+tag.x0<0||tag.y+tag.y0<0||tag.x+tag.x1>size[0]||tag.y+tag.y1>size[1])continue;if(!bounds||!cloudCollide(tag,board,size[0])){if(!bounds||collideRects(tag,bounds)){var sprite=tag.sprite,w=tag.width>>5,sw=size[0]>>5,lx=tag.x-(w<<4),sx=lx&127,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),last;for(var j=0;j<h;j++){last=0;for(var i=0;i<=w;i++){board[x+i]|=last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0)}x+=sw}delete tag.sprite;return true}}}return false}cloud.timeInterval=function(_){return arguments.length?(timeInterval=_==null?Infinity:_,cloud):timeInterval};cloud.words=function(_){return arguments.length?(words=_,cloud):words};cloud.size=function(_){return arguments.length?(size=[+_[0],+_[1]],cloud):size};cloud.font=function(_){return arguments.length?(font=functor(_),cloud):font};cloud.fontStyle=function(_){return arguments.length?(fontStyle=functor(_),cloud):fontStyle};cloud.fontWeight=function(_){return arguments.length?(fontWeight=functor(_),cloud):fontWeight};cloud.rotate=function(_){return arguments.length?(rotate=functor(_),cloud):rotate};cloud.text=function(_){return arguments.length?(text=functor(_),cloud):text};cloud.spiral=function(_){return arguments.length?(spiral=spirals[_]||_,cloud):spiral};cloud.fontSize=function(_){return arguments.length?(fontSize=functor(_),cloud):fontSize};cloud.padding=function(_){return arguments.length?(padding=functor(_),cloud):padding};cloud.random=function(_){return arguments.length?(random=_,cloud):random};cloud.on=function(){var value=event.on.apply(event,arguments);return value===event?cloud:value};return cloud};function cloudText(d){return d.text}function cloudFont(){return"serif"}function cloudFontNormal(){return"normal"}function cloudFontSize(d){return Math.sqrt(d.value)}function cloudRotate(){return(~~(Math.random()*6)-3)*30}function cloudPadding(){return 1}function cloudSprite(contextAndRatio,d,data,di){if(d.sprite)return;var c=contextAndRatio.context,ratio=contextAndRatio.ratio;c.clearRect(0,0,(cw<<5)/ratio,ch/ratio);var x=0,y=0,maxh=0,n=data.length;--di;while(++di<n){d=data[di];c.save();c.font=d.style+" "+d.weight+" "+~~((d.size+1)/ratio)+"px "+d.font;var w=c.measureText(d.text+"m").width*ratio,h=d.size<<1;if(d.rotate){var sr=Math.sin(d.rotate*cloudRadians),cr=Math.cos(d.rotate*cloudRadians),wcr=w*cr,wsr=w*sr,hcr=h*cr,hsr=h*sr;w=Math.max(Math.abs(wcr+hsr),Math.abs(wcr-hsr))+31>>5<<5;h=~~Math.max(Math.abs(wsr+hcr),Math.abs(wsr-hcr))}else{w=w+31>>5<<5}if(h>maxh)maxh=h;if(x+w>=cw<<5){x=0;y+=maxh;maxh=0}if(y+h>=ch)break;c.translate((x+(w>>1))/ratio,(y+(h>>1))/ratio);if(d.rotate)c.rotate(d.rotate*cloudRadians);c.fillText(d.text,0,0);if(d.padding)c.lineWidth=2*d.padding,c.strokeText(d.text,0,0);c.restore();d.width=w;d.height=h;d.xoff=x;d.yoff=y;d.x1=w>>1;d.y1=h>>1;d.x0=-d.x1;d.y0=-d.y1;d.hasText=true;x+=w}var pixels=c.getImageData(0,0,(cw<<5)/ratio,ch/ratio).data,sprite=[];while(--di>=0){d=data[di];if(!d.hasText)continue;var w=d.width,w32=w>>5,h=d.y1-d.y0;for(var i=0;i<h*w32;i++)sprite[i]=0;x=d.xoff;if(x==null)return;y=d.yoff;var seen=0,seenRow=-1;for(var j=0;j<h;j++){for(var i=0;i<w;i++){var k=w32*j+(i>>5),m=pixels[(y+j)*(cw<<5)+(x+i)<<2]?1<<31-i%32:0;sprite[k]|=m;seen|=m}if(seen)seenRow=j;else{d.y0++;h--;j--;y++}}d.y1=d.y0+seenRow;d.sprite=sprite.slice(0,(d.y1-d.y0)*w32)}}function cloudCollide(tag,board,sw){sw>>=5;var sprite=tag.sprite,w=tag.width>>5,lx=tag.x-(w<<4),sx=lx&127,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),last;for(var j=0;j<h;j++){last=0;for(var i=0;i<=w;i++){if((last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0))&board[x+i])return true}x+=sw}return false}function cloudBounds(bounds,d){var b0=bounds[0],b1=bounds[1];if(d.x+d.x0<b0.x)b0.x=d.x+d.x0;if(d.y+d.y0<b0.y)b0.y=d.y+d.y0;if(d.x+d.x1>b1.x)b1.x=d.x+d.x1;if(d.y+d.y1>b1.y)b1.y=d.y+d.y1}function collideRects(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function archimedeanSpiral(size){var e=size[0]/size[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function rectangularSpiral(size){var dy=4,dx=dy*size[0]/size[1],x=0,y=0;return function(t){var sign=t<0?-1:1;switch(Math.sqrt(1+4*sign*t)-sign&3){case 0:x+=dx;break;case 1:y+=dy;break;case 2:x-=dx;break;default:y-=dy;break}return[x,y]}}function zeroArray(n){var a=[],i=-1;while(++i<n)a[i]=0;return a}function cloudCanvas(){return document.createElement("canvas")}function functor(d){return typeof d==="function"?d:function(){return d}}var spirals={archimedean:archimedeanSpiral,rectangular:rectangularSpiral}},function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.d3_dispatch={})})(this,function(exports){"use strict";function dispatch(){return new Dispatch(arguments)}function Dispatch(types){var i=-1,n=types.length,callbacksByType={},callbackByName={},type,that=this;that.on=function(type,callback){type=parseType(type);if(arguments.length<2){return(callback=callbackByName[type.name])&&callback.value}if(type.type){var callbacks=callbacksByType[type.type],callback0=callbackByName[type.name],i;if(callback0){callback0.value=null;i=callbacks.indexOf(callback0);callbacksByType[type.type]=callbacks=callbacks.slice(0,i).concat(callbacks.slice(i+1));delete callbackByName[type.name]}if(callback){callback={value:callback};callbackByName[type.name]=callback;callbacks.push(callback)}}else if(callback==null){for(var otherType in callbacksByType){if(callback=callbackByName[otherType+type.name]){callback.value=null;callbacks=callbacksByType[otherType];i=callbacks.indexOf(callback);callbacksByType[otherType]=callbacks.slice(0,i).concat(callbacks.slice(i+1));delete callbackByName[callback.name]}}}return that};while(++i<n){type=types[i]+"";if(!type||type in that)throw new Error("illegal or duplicate type: "+type);callbacksByType[type]=[];that[type]=applier(type)}function parseType(type){var i=(type+="").indexOf("."),name=type;if(i>=0)type=type.slice(0,i);else name+=".";if(type&&!callbacksByType.hasOwnProperty(type))throw new Error("unknown type: "+type);return{type:type,name:name}}function applier(type){return function(){var callbacks=callbacksByType[type],callbackValue,i=-1,n=callbacks.length;while(++i<n){if(callbackValue=callbacks[i].value){callbackValue.apply(this,arguments)}}return that}}}dispatch.prototype=Dispatch.prototype;var version="0.2.6";exports.version=version;exports.dispatch=dispatch})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExportDialogView=__webpack_require__(151);var deps=["CollectionService","$rootScope"];_app2.default.directive("lensWorkAreaCollections",[].concat(deps,[function(CollectionService,$rootScope){return{template:__webpack_require__(658),link:function link(scope){var vm=scope.vm={view:"table",filter:{},collections:[]};scope.load=function(){vm.loading=true;CollectionService.getAll().then(function(data){vm.loading=false;vm.collections=data;vm.loadedOnce=true}).catch(function(err){vm.loading=false;console.warn(err)})};scope.collectionAction=function(action,item){vm.currentCollection=_.clone(item);vm.action=action};scope.export=function(item){var dialog=new ExportDialogView({exportUrlPathFn:function exportUrlPathFn(){return"/lens/export/collection/"+item.id}});dialog.render()};scope.create=function(){vm.newCollection={type:vm.filter.type||"PATENT"}};CollectionService.on("REFRESH_COLLECTIONS",scope.load);scope.load()}}}]))},function(module,exports){module.exports='<div class="lens-work-area-collections">\n\n    <div class="clearfix">\n        <h1 class="pull-left-lg">\n            {{::\'user.collections\' | message}}\n        </h1>\n        <form class="filter-form pull-right-lg">\n            <a class="btn btn-pri btn-icon"\n                tooltip-title tooltip-title-variable="\'user.collections.createNew.title\' | message"\n                ng-click="create()"\n                ng-if="!$root.isAnon"\n            >\n                <em class="fa fa-plus"></em>\n                {{::\'collectionManageWidget.btnCreateAlt\' | message}}\n            </a>\n\n            <label class="select select-sm">\n                <select ng-model="vm.filter.type">\n                    <option value="">{{::\'common.all\' | message}}</option>\n                    <option value="SCHOLARLY_WORK">{{::\'common.scholar\' | message}}</option>\n                    <option value="PATENT">{{::\'common.patents\' | message}}</option>\n                </select>\n                <i></i>\n            </label>\n\n            <label class="input">\n                <i class="icon_append fa fa-search"></i>\n                <input ng-model="vm.filter.title" placeholder="{{::\'user.collections.filter\' | message}}">\n            </label>\n        </form>\n    </div>\n\n    \x3c!-- No Filter Hits --\x3e\n    <div ng-if="vm.collections.length && vm.filteredCollections.length < vm.collections.length">\n        <div class="alert alert-info" role="alert">\n            <em class="fa fa-info-circle"></em>\n            Hiding {{vm.collections.length - vm.filteredCollections.length}} rows.\n            <a ng-click="vm.filter.title = \'\'; vm.filter.type = \'\'">\n                {{::\'filters.common.clear.filter\' | message}}\n            </a>\n        </div>\n    </div>\n\n    <div class="table-responsive table-stretch" ng-hide="!vm.collections.length && vm.loading">\n\n        \x3c!-- Table --\x3e\n        <div class="div-table">\n            <div class="div-table-heading">\n                <div class="div-table-row">\n                    <div class="div-table-cell">{{::\'user.collections.collectionName\' | message}}</div>\n                    <div class="div-table-cell">{{::\'common.numberItems\' | message}}</div>\n                    <div class="div-table-cell">{{::\'common.dateCreated\' | message}}</div>\n                    <div class="div-table-cell">{{::\'common.lastUpdated\' | message}}</div>\n                    <div class="div-table-cell">{{::\'common.sharedWith\' | message}}</div>\n                    <div class="div-table-cell">{{::\'common.tools\' | message}}</div>\n                </div>\n            </div>\n            <div class="div-table-body">\n                <div class="div-table-row"\n                    ng-repeat="collection in vm.filteredCollections = (vm.collections | filter:vm.filter | orderBy:\'updated\':true)"\n                    ng-include="\'collection-row-item\'"\n                ></div>\n            </div>\n        </div>\n    </div>\n\n    <div ng-if="$root.isAnon">You must be logged in to manage collections</div>\n\n    \x3c!-- No Content --\x3e\n    <div ng-include="\'about-collections\'" ng-if="!vm.collections.length && !vm.loading && !$root.isAnon"></div>\n\n    <div lens-modal size="sm" visible="vm.action">\n        <div lens-collection-action\n            collection="vm.currentCollection"\n            action="vm.action"\n        ></div>\n    </div>\n\n    \x3c!-- New Collection Modal --\x3e\n    <div lens-modal ng-cloak size="\'sm\'" visible="vm.newCollection">\n        <div lens-create-collection\n            collection="vm.newCollection"\n            submitting="vm.creatingCollection"\n            select-type="true"\n        ></div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["NotesService"];_app2.default.directive("lensWorkAreaNotes",[].concat(deps,[function(NotesService){return{template:__webpack_require__(660),link:function link(scope){scope.vm={};scope.isPatent=function(noteGroup){return noteGroup.type==="PATENT"};scope.isCollection=function(noteGroup){return noteGroup.type==="COLLECTION"};scope.jurisdiction=function(patentKey){return patentKey.substring(0,2)};scope.load=function(){NotesService.fetchGrouped().then(function(response){scope.vm.noteGroups=response.data;scope.loaded=true})};scope.load()}}}]))},function(module,exports){module.exports='<em class="fa fa-refresh fa-spin" ng-hide="loaded"></em>\n<div class="table-responsive table-stretch" ng-show="vm.noteGroups.length > 0">\n    <div class="div-table div-table-notes" id="listTable">\n        <div class="div-table-heading">\n            <div class="div-table-row">\n                <div class="div-table-cell">{{\'common.note\' | message}} {{\'common.total\' | message}}: {{vm.notes.length}}</div>\n                <div class="div-table-cell">{{\'common.assignment\' | message}}</div>\n                <div class="div-table-cell" style="min-width: 8rem;">{{\'common.dateCreated\' | message}}</div>\n                <div class="div-table-cell" style="min-width: 8rem;">{{\'common.tools\' | message}}</div>\n            </div>\n        </div>\n        <div class="div-table-body">\n            <div class="div-table-row" ng-repeat-start="noteGroup in vm.noteGroups">\n                <div class="div-table-cell">\n                    <div class="div-table-head-mobile">{{\'common.note\' | message}}</div>\n                    <div class="div-table-cell-mobile">\n                        <a ng-href="/lens/patent/{{noteGroup.patentPublicationKey}}" class="note-parent" ng-if="isPatent(noteGroup)">\n                            <b>{{noteGroup.patentTitle}}</b>\n                            <div class="note-doc-type">\n                                <span class="flag" ng-class="{{jurisdiction(noteGroup.patentPublicationKey).toLowerCase()}}">\n                                    <img class="doc-type-flag" ng-src="{{::$root.assetLocation}}/img/flags/{{jurisdiction(noteGroup.patentPublicationKey)}}.png"/>\n                                </span>\n                                {{noteGroup.patentDisplayKey}}\n                            </div>\n                        </a>\n                        <a ng-href="/lens/collection/{{noteGroup.collectionId}}" class="note-parent" ng-if="isCollection(noteGroup)">\n                            <b>{{noteGroup.collectionTitle}}</b>\n                        </a>\n                    </div>\n                </div>\n                <div class="div-table-cell">\n                    <div class="div-table-head-mobile">{{\'common.assignment\' | message}}</div>\n                    <div class="div-table-cell-mobile" ng-if="isPatent(noteGroup)">{{\'notes.patentDocument\' | message}}</div>\n                    <div class="div-table-cell-mobile" ng-if="isCollection(noteGroup)">{{\'notes.collection\' | message}}</div>\n                </div>\n                <div class="div-table-cell"></div>\n                <div class="div-table-cell"></div>\n            </div>\n            <div class="div-table-row" lens-note-table-row note="note" reload="load()" show-level-up="true" ng-repeat="note in noteGroup.notes">\n            </div>\n            <div ng-repeat-end></div>\n        </div>\n    </div>\n</div>\n<div class="panel panel-alert panel-info" ng-show="vm.noteGroups.length == 0">\n    <div class="panel-heading"><em class="fa fa-info-circle"></em> {{\'notes.user.none\' | message}}</div>\n    <div class="panel-body">\n        <div class="row">\n            <div class="col-lg-6">\n                <img ng-src="{{::$root.assetLocation}}/img/guide-notes.png" alt="notes" />\n            </div>\n            <div class="col-lg-6">\n                <strong>{{\'notes.user.guide.title\' | message}}</strong>\n                <ul class="list-styled" ng-bind-html="\'notes.user.guide\' | message | unsafe"></ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http"];_app2.default.directive("lensWorkAreaSummary",[].concat(deps,[function($http){return{template:__webpack_require__(662),link:function link(scope){scope.vm={summary:{},labels:{tagCount:window.messages.prop("user.tags")||"Tags",noteCount:window.messages.prop("notes.savedCount")||"Notes",collectionCount:window.messages.prop("user.collections")||"Collections",savedQueryCount:window.messages.prop("user.queries")||"Saved Queries",historyCount:window.messages.prop("user.history")||"History Items"}};var url="/lens/api/user/work-area/summary";$http({url:url}).then(function(res){scope.vm.summary=res.data}).catch(function(err){console.warn(err)})}}}]))},function(module,exports){module.exports='<div class="work-area-summary">\n    <h3>{{::\'common.summary\' | message}}</h3>\n    <div ng-repeat="(k, v) in vm.summary" class="work-area-summary-item">\n        {{vm.labels[k] || k}}:\n        <strong>{{v | customNumber}}</strong>\n    </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _d=__webpack_require__(38);var d3=_interopRequireWildcard(_d);var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var topojson=__webpack_require__(664);_app2.default.directive("lensWorldMap",[function(){return{template:__webpack_require__(665),scope:{counts:"=",tooltipData:"=",worldMapMarkers:"<",filter:"<",countryFilter:"<",countryTooltip:"<",stateFilter:"<",additionalFilter:"<",onClickCountry:"<",fieldName:"<",height:"<",minZoom:"<",colourScheme:"<"},controller:["$scope","$element","$timeout","$http","$rootScope",function(scope,element,$timeout,$http,$rootScope){element.on("wheel",function(e){element.toggleClass("scroll-notice-active",!e.shiftKey)});var removeNotice=_.debounce(function(){element.toggleClass("scroll-notice-active",false)},100);element.on("mouseout",function(e){element.toggleClass("scroll-notice-active",false)});element.on("mousemove",function(e){removeNotice()});var world=void 0;var width=void 0;var height=void 0;var svg=void 0;var g=void 0;var markers=void 0;var _mousewheelhandler=void 0;var MIN_ZOOM=scope.minZoom||1;var MAX_ZOOM=500;scope.disableWheelScroll=false;var s=1;function zoomed(){_hideTooltip();g.attr("transform",d3.event.transform);s=d3.event.transform.k;g.selectAll(".boundary").style("stroke-width",1/s);g.selectAll(".marker").style("stroke-width",1/s);g.selectAll("circle").attr("r",5/s)}var zoom=d3.zoom().scaleExtent([MIN_ZOOM,MAX_ZOOM]).filter(function(){if(d3.event.type==="wheel"){return d3.event.shiftKey}return true}).on("zoom",zoomed);$http.get(window.UI_CONFIG.institutionDataLocation+"/public/countries.topo.json",{cache:true}).then(function(res){world=res.data;render()});var render=function render(){if(!world){return}element.find(".inner-map").empty();width=element[0].clientWidth;height=400;if(width>1e3){height=500}if(scope.height){height=scope.height}var maxValue=_.max(_.values(scope.counts));var domain=[0,6,maxValue];var colourScheme=scope.colourScheme||"schemeBlues[3]";var scheme=(0,_get3.default)(d3,colourScheme);var countryColourScale=d3.scaleLinear().domain(domain).range(scheme);var scale=width<800?100:width<1200?150:200;var projection=d3.geoMercator().scale(scale).translate([width/2,height/1.5]);svg=d3.select(element.find(".inner-map")[0]).append("svg").attr("width",width).attr("height",height).call(zoom);if(!_mousewheelhandler){_mousewheelhandler=svg.on("wheel.zoom")}var path=d3.geoPath().projection(projection);g=svg.append("g");var features=topojson.feature(world,world.objects["countries.geo"]).features;features.forEach(function(d){var map={"United States of America":"United States"};var key=d.properties.name;var name=map[key]||key;var count=scope.counts[name]||scope.counts[key];d.properties.count=count;d.properties.code=key});g.append("g").attr("class","boundary").selectAll("boundary").data(features).enter().append("path").attr("name",function(d){return d.properties.name}).attr("fill",function(d){return countryColourScale(d.properties.count||0)}).attr("id",function(d){return d.id}).on("mousemove",scope.countryTooltip?showCountryTooltip:null).on("click",function(d){return scope.clickCountry(d.properties)}).attr("d",path);markers=g.append("g");markers.selectAll("circle").data(scope.worldMapMarkers).enter().append("circle").attr("r",5).attr("class",function(d){return"marker "+d.type.toLowerCase()}).attr("transform",function(d){return"translate("+projection([d.lng,d.lat])+")"}).on("mouseenter",showTooltip).on("mouseout",function(d){return $timeout.cancel(timeout)});var timeout=void 0;function showTooltip(d,e){d.position={left:Math.min(d3.event.layerX+10,width-300)+"px",top:Math.max(d3.event.layerY-400,0)+"px"};timeout=$timeout(function(){if(scope.tooltipData&&d){scope.tooltipData=d;scope.tooltipData.context="map";scope.$apply()}},100)}var dbDigest=_.debounce(function(){return scope.$digest()},50,true);function showCountryTooltip(d,e){var label=d.properties.name;var count=d.properties.count;scope.countryTooltipPosition={left:Math.min(d3.event.offsetX+10,width-300)+"px",top:Math.max(d3.event.offsetY,0)+"px"};scope.countryLabel=label;scope.countryCount=count;scope.countryCode=label;dbDigest()}svg.on("wheel.zoom",_mousewheelhandler);_.defer(filterMarkers);$timeout(function(){scope.reveal=true},10)};scope.render=render;scope.clickCountry=function(d){if(scope.onClickCountry){scope.onClickCountry.apply(scope.$parent.$ctrl||undefined,[d])}};scope.clickCountryTooltip=function(){if(scope.onClickCountry){scope.onClickCountry.apply(scope.$parent.$ctrl||undefined,[scope.countryCode])}};var _hideTooltip=_.debounce(function(){scope.tooltipData={visible:false};scope.$apply()},100,true);var filterMarker=function filterMarker(d){if(scope.filter.user&&scope.filter.user.displayName&&!d.displayName.toUpperCase().includes(scope.filter.user.displayName.toUpperCase())){return true}if((0,_get3.default)(scope.filter,"user.metadata.city")&&d.city){if(!d.city.toUpperCase().includes(scope.filter.user.metadata.city.toUpperCase())){return true}}if(scope.countryFilter&&_.values(scope.countryFilter).filter(function(x){return x}).length&&!scope.countryFilter[d.countryCode]){return true}if(scope.stateFilter&&_.values(scope.stateFilter).filter(function(x){return x}).length&&!scope.stateFilter[d.state]){return true}return false};var filterMarkers=function filterMarkers(){if(!g){return}scope.tooltipData={visible:false};g.selectAll(".marker").classed("hidden",filterMarker);setTimeout(function(){if($(".marker:visible").length===1){var event=document.createEvent("SVGEvents");event.initEvent("mouseenter",true,true);var _element=$(".marker:not(.hidden)")[0];_element.dispatchEvent(event)}},360)};scope.$watch("filter",filterMarkers,true);scope.$watch("countryFilter",filterMarkers,true);scope.$watch("stateFilter",filterMarkers,true);var _render=_.debounce(render,500);scope.$watch("colourScheme",_render);scope.$watch("counts",_render,true);$(window).resize(_render);$rootScope.$on("REFRESH_ANALYSIS_VISUALISATIONS",_render);_render()}]}}])},function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.topojson=global.topojson||{})})(this,function(exports){"use strict";var identity=function(x){return x};var transform=function(transform){if(transform==null)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){if(!i)x0=y0=0;var j=2,n=input.length,output=new Array(n);output[0]=(x0+=input[0])*kx+dx;output[1]=(y0+=input[1])*ky+dy;while(j<n)output[j]=input[j],++j;return output}};var bbox=function(topology){var t=transform(topology.transform),key,x0=Infinity,y0=x0,x1=-x0,y1=-x0;function bboxPoint(p){p=t(p);if(p[0]<x0)x0=p[0];if(p[0]>x1)x1=p[0];if(p[1]<y0)y0=p[1];if(p[1]>y1)y1=p[1]}function bboxGeometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(bboxGeometry);break;case"Point":bboxPoint(o.coordinates);break;case"MultiPoint":o.coordinates.forEach(bboxPoint);break}}topology.arcs.forEach(function(arc){var i=-1,n=arc.length,p;while(++i<n){p=t(arc[i],i);if(p[0]<x0)x0=p[0];if(p[0]>x1)x1=p[0];if(p[1]<y0)y0=p[1];if(p[1]>y1)y1=p[1]}});for(key in topology.objects){bboxGeometry(topology.objects[key])}return[x0,y0,x1,y1]};var reverse=function(array,n){var t,j=array.length,i=j-n;while(i<--j)t=array[i],array[i++]=array[j],array[j]=t};var feature=function(topology,o){return o.type==="GeometryCollection"?{type:"FeatureCollection",features:o.geometries.map(function(o){return feature$1(topology,o)})}:feature$1(topology,o)};function feature$1(topology,o){var id=o.id,bbox=o.bbox,properties=o.properties==null?{}:o.properties,geometry=object(topology,o);return id==null&&bbox==null?{type:"Feature",properties:properties,geometry:geometry}:bbox==null?{type:"Feature",id:id,properties:properties,geometry:geometry}:{type:"Feature",id:id,bbox:bbox,properties:properties,geometry:geometry}}function object(topology,o){var transformPoint=transform(topology.transform),arcs=topology.arcs;function arc(i,points){if(points.length)points.pop();for(var a=arcs[i<0?~i:i],k=0,n=a.length;k<n;++k){points.push(transformPoint(a[k],k))}if(i<0)reverse(points,n)}function point(p){return transformPoint(p)}function line(arcs){var points=[];for(var i=0,n=arcs.length;i<n;++i)arc(arcs[i],points);if(points.length<2)points.push(points[0]);return points}function ring(arcs){var points=line(arcs);while(points.length<4)points.push(points[0]);return points}function polygon(arcs){return arcs.map(ring)}function geometry(o){var type=o.type,coordinates;switch(type){case"GeometryCollection":return{type:type,geometries:o.geometries.map(geometry)};case"Point":coordinates=point(o.coordinates);break;case"MultiPoint":coordinates=o.coordinates.map(point);break;case"LineString":coordinates=line(o.arcs);break;case"MultiLineString":coordinates=o.arcs.map(line);break;case"Polygon":coordinates=polygon(o.arcs);break;case"MultiPolygon":coordinates=o.arcs.map(polygon);break;default:return null}return{type:type,coordinates:coordinates}}return geometry(o)}var stitch=function(topology,arcs){var stitchedArcs={},fragmentByStart={},fragmentByEnd={},fragments=[],emptyIndex=-1;arcs.forEach(function(i,j){var arc=topology.arcs[i<0?~i:i],t;if(arc.length<3&&!arc[1][0]&&!arc[1][1]){t=arcs[++emptyIndex],arcs[emptyIndex]=i,arcs[j]=t}});arcs.forEach(function(i){var e=ends(i),start=e[0],end=e[1],f,g;if(f=fragmentByEnd[start]){delete fragmentByEnd[f.end];f.push(i);f.end=end;if(g=fragmentByStart[end]){delete fragmentByStart[g.start];var fg=g===f?f:f.concat(g);fragmentByStart[fg.start=f.start]=fragmentByEnd[fg.end=g.end]=fg}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else if(f=fragmentByStart[end]){delete fragmentByStart[f.start];f.unshift(i);f.start=start;if(g=fragmentByEnd[start]){delete fragmentByEnd[g.end];var gf=g===f?f:g.concat(f);fragmentByStart[gf.start=g.start]=fragmentByEnd[gf.end=f.end]=gf}else{fragmentByStart[f.start]=fragmentByEnd[f.end]=f}}else{f=[i];fragmentByStart[f.start=start]=fragmentByEnd[f.end=end]=f}});function ends(i){var arc=topology.arcs[i<0?~i:i],p0=arc[0],p1;if(topology.transform)p1=[0,0],arc.forEach(function(dp){p1[0]+=dp[0],p1[1]+=dp[1]});else p1=arc[arc.length-1];return i<0?[p1,p0]:[p0,p1]}function flush(fragmentByEnd,fragmentByStart){for(var k in fragmentByEnd){var f=fragmentByEnd[k];delete fragmentByStart[f.start];delete f.start;delete f.end;f.forEach(function(i){stitchedArcs[i<0?~i:i]=1});fragments.push(f)}}flush(fragmentByEnd,fragmentByStart);flush(fragmentByStart,fragmentByEnd);arcs.forEach(function(i){if(!stitchedArcs[i<0?~i:i])fragments.push([i])});return fragments};var mesh=function(topology){return object(topology,meshArcs.apply(this,arguments))};function meshArcs(topology,object$$1,filter){var arcs,i,n;if(arguments.length>1)arcs=extractArcs(topology,object$$1,filter);else for(i=0,arcs=new Array(n=topology.arcs.length);i<n;++i)arcs[i]=i;return{type:"MultiLineString",arcs:stitch(topology,arcs)}}function extractArcs(topology,object$$1,filter){var arcs=[],geomsByArc=[],geom;function extract0(i){var j=i<0?~i:i;(geomsByArc[j]||(geomsByArc[j]=[])).push({i:i,g:geom})}function extract1(arcs){arcs.forEach(extract0)}function extract2(arcs){arcs.forEach(extract1)}function extract3(arcs){arcs.forEach(extract2)}function geometry(o){switch(geom=o,o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"LineString":extract1(o.arcs);break;case"MultiLineString":case"Polygon":extract2(o.arcs);break;case"MultiPolygon":extract3(o.arcs);break}}geometry(object$$1);geomsByArc.forEach(filter==null?function(geoms){arcs.push(geoms[0].i)}:function(geoms){if(filter(geoms[0].g,geoms[geoms.length-1].g))arcs.push(geoms[0].i)});return arcs}function planarRingArea(ring){var i=-1,n=ring.length,a,b=ring[n-1],area=0;while(++i<n)a=b,b=ring[i],area+=a[0]*b[1]-a[1]*b[0];return Math.abs(area)}var merge=function(topology){return object(topology,mergeArcs.apply(this,arguments))};function mergeArcs(topology,objects){var polygonsByArc={},polygons=[],groups=[];objects.forEach(geometry);function geometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(geometry);break;case"Polygon":extract(o.arcs);break;case"MultiPolygon":o.arcs.forEach(extract);break}}function extract(polygon){polygon.forEach(function(ring){ring.forEach(function(arc){(polygonsByArc[arc=arc<0?~arc:arc]||(polygonsByArc[arc]=[])).push(polygon)})});polygons.push(polygon)}function area(ring){return planarRingArea(object(topology,{type:"Polygon",arcs:[ring]}).coordinates[0])}polygons.forEach(function(polygon){if(!polygon._){var group=[],neighbors=[polygon];polygon._=1;groups.push(group);while(polygon=neighbors.pop()){group.push(polygon);polygon.forEach(function(ring){ring.forEach(function(arc){polygonsByArc[arc<0?~arc:arc].forEach(function(polygon){if(!polygon._){polygon._=1;neighbors.push(polygon)}})})})}}});polygons.forEach(function(polygon){delete polygon._});return{type:"MultiPolygon",arcs:groups.map(function(polygons){var arcs=[],n;polygons.forEach(function(polygon){polygon.forEach(function(ring){ring.forEach(function(arc){if(polygonsByArc[arc<0?~arc:arc].length<2){arcs.push(arc)}})})});arcs=stitch(topology,arcs);if((n=arcs.length)>1){for(var i=1,k=area(arcs[0]),ki,t;i<n;++i){if((ki=area(arcs[i]))>k){t=arcs[0],arcs[0]=arcs[i],arcs[i]=t,k=ki}}}return arcs})}}var bisect=function(a,x){var lo=0,hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(a[mid]<x)lo=mid+1;else hi=mid}return lo};var neighbors=function(objects){var indexesByArc={},neighbors=objects.map(function(){return[]});function line(arcs,i){arcs.forEach(function(a){if(a<0)a=~a;var o=indexesByArc[a];if(o)o.push(i);else indexesByArc[a]=[i]})}function polygon(arcs,i){arcs.forEach(function(arc){line(arc,i)})}function geometry(o,i){if(o.type==="GeometryCollection")o.geometries.forEach(function(o){geometry(o,i)});else if(o.type in geometryType)geometryType[o.type](o.arcs,i)}var geometryType={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(arcs,i){arcs.forEach(function(arc){polygon(arc,i)})}};objects.forEach(geometry);for(var i in indexesByArc){for(var indexes=indexesByArc[i],m=indexes.length,j=0;j<m;++j){for(var k=j+1;k<m;++k){var ij=indexes[j],ik=indexes[k],n;if((n=neighbors[ij])[i=bisect(n,ik)]!==ik)n.splice(i,0,ik);if((n=neighbors[ik])[i=bisect(n,ij)]!==ij)n.splice(i,0,ij)}}}return neighbors};var untransform=function(transform){if(transform==null)return identity;var x0,y0,kx=transform.scale[0],ky=transform.scale[1],dx=transform.translate[0],dy=transform.translate[1];return function(input,i){if(!i)x0=y0=0;var j=2,n=input.length,output=new Array(n),x1=Math.round((input[0]-dx)/kx),y1=Math.round((input[1]-dy)/ky);output[0]=x1-x0,x0=x1;output[1]=y1-y0,y0=y1;while(j<n)output[j]=input[j],++j;return output}};var quantize=function(topology,transform){if(topology.transform)throw new Error("already quantized");if(!transform||!transform.scale){if(!((n=Math.floor(transform))>=2))throw new Error("n must be ≥2");box=topology.bbox||bbox(topology);var x0=box[0],y0=box[1],x1=box[2],y1=box[3],n;transform={scale:[x1-x0?(x1-x0)/(n-1):1,y1-y0?(y1-y0)/(n-1):1],translate:[x0,y0]}}else{box=topology.bbox}var t=untransform(transform),box,key,inputs=topology.objects,outputs={};function quantizePoint(point){return t(point)}function quantizeGeometry(input){var output;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(quantizeGeometry)};break;case"Point":output={type:"Point",coordinates:quantizePoint(input.coordinates)};break;case"MultiPoint":output={type:"MultiPoint",coordinates:input.coordinates.map(quantizePoint)};break;default:return input}if(input.id!=null)output.id=input.id;if(input.bbox!=null)output.bbox=input.bbox;if(input.properties!=null)output.properties=input.properties;return output}function quantizeArc(input){var i=0,j=1,n=input.length,p,output=new Array(n);output[0]=t(input[0],0);while(++i<n)if((p=t(input[i],i))[0]||p[1])output[j++]=p;if(j===1)output[j++]=[0,0];output.length=j;return output}for(key in inputs)outputs[key]=quantizeGeometry(inputs[key]);return{type:"Topology",bbox:box,transform:transform,objects:outputs,arcs:topology.arcs.map(quantizeArc)}};var bounds=function(objects){var x0=Infinity,y0=Infinity,x1=-Infinity,y1=-Infinity;function boundGeometry(geometry){if(geometry!=null&&boundGeometryType.hasOwnProperty(geometry.type))boundGeometryType[geometry.type](geometry)}var boundGeometryType={GeometryCollection:function(o){o.geometries.forEach(boundGeometry)},Point:function(o){boundPoint(o.coordinates)},MultiPoint:function(o){o.coordinates.forEach(boundPoint)},LineString:function(o){boundLine(o.arcs)},MultiLineString:function(o){o.arcs.forEach(boundLine)},Polygon:function(o){o.arcs.forEach(boundLine)},MultiPolygon:function(o){o.arcs.forEach(boundMultiLine)}};function boundPoint(coordinates){var x=coordinates[0],y=coordinates[1];if(x<x0)x0=x;if(x>x1)x1=x;if(y<y0)y0=y;if(y>y1)y1=y}function boundLine(coordinates){coordinates.forEach(boundPoint)}function boundMultiLine(coordinates){coordinates.forEach(boundLine)}for(var key in objects){boundGeometry(objects[key])}return x1>=x0&&y1>=y0?[x0,y0,x1,y1]:undefined};var hashset=function(size,hash,equal,type,empty){if(arguments.length===3){type=Array;empty=null}var store=new type(size=1<<Math.max(4,Math.ceil(Math.log(size)/Math.LN2))),mask=size-1;for(var i=0;i<size;++i){store[i]=empty}function add(value){var index=hash(value)&mask,match=store[index],collisions=0;while(match!=empty){if(equal(match,value))return true;if(++collisions>=size)throw new Error("full hashset");match=store[index=index+1&mask]}store[index]=value;return true}function has(value){var index=hash(value)&mask,match=store[index],collisions=0;while(match!=empty){if(equal(match,value))return true;if(++collisions>=size)break;match=store[index=index+1&mask]}return false}function values(){var values=[];for(var i=0,n=store.length;i<n;++i){var match=store[i];if(match!=empty)values.push(match)}return values}return{add:add,has:has,values:values}};var hashmap=function(size,hash,equal,keyType,keyEmpty,valueType){if(arguments.length===3){keyType=valueType=Array;keyEmpty=null}var keystore=new keyType(size=1<<Math.max(4,Math.ceil(Math.log(size)/Math.LN2))),valstore=new valueType(size),mask=size-1;for(var i=0;i<size;++i){keystore[i]=keyEmpty}function set(key,value){var index=hash(key)&mask,matchKey=keystore[index],collisions=0;while(matchKey!=keyEmpty){if(equal(matchKey,key))return valstore[index]=value;if(++collisions>=size)throw new Error("full hashmap");matchKey=keystore[index=index+1&mask]}keystore[index]=key;valstore[index]=value;return value}function maybeSet(key,value){var index=hash(key)&mask,matchKey=keystore[index],collisions=0;while(matchKey!=keyEmpty){if(equal(matchKey,key))return valstore[index];if(++collisions>=size)throw new Error("full hashmap");matchKey=keystore[index=index+1&mask]}keystore[index]=key;valstore[index]=value;return value}function get(key,missingValue){var index=hash(key)&mask,matchKey=keystore[index],collisions=0;while(matchKey!=keyEmpty){if(equal(matchKey,key))return valstore[index];if(++collisions>=size)break;matchKey=keystore[index=index+1&mask]}return missingValue}function keys(){var keys=[];for(var i=0,n=keystore.length;i<n;++i){var matchKey=keystore[i];if(matchKey!=keyEmpty)keys.push(matchKey)}return keys}return{set:set,maybeSet:maybeSet,get:get,keys:keys}};var equalPoint=function(pointA,pointB){return pointA[0]===pointB[0]&&pointA[1]===pointB[1]};var buffer=new ArrayBuffer(16);var floats=new Float64Array(buffer);var uints=new Uint32Array(buffer);var hashPoint=function(point){floats[0]=point[0];floats[1]=point[1];var hash=uints[0]^uints[1];hash=hash<<5^hash>>7^uints[2]^uints[3];return hash&2147483647};var join=function(topology){var coordinates=topology.coordinates,lines=topology.lines,rings=topology.rings,indexes=index(),visitedByIndex=new Int32Array(coordinates.length),leftByIndex=new Int32Array(coordinates.length),rightByIndex=new Int32Array(coordinates.length),junctionByIndex=new Int8Array(coordinates.length),junctionCount=0,i,n,previousIndex,currentIndex,nextIndex;for(i=0,n=coordinates.length;i<n;++i){visitedByIndex[i]=leftByIndex[i]=rightByIndex[i]=-1}for(i=0,n=lines.length;i<n;++i){var line=lines[i],lineStart=line[0],lineEnd=line[1];currentIndex=indexes[lineStart];nextIndex=indexes[++lineStart];++junctionCount,junctionByIndex[currentIndex]=1;while(++lineStart<=lineEnd){sequence(i,previousIndex=currentIndex,currentIndex=nextIndex,nextIndex=indexes[lineStart])}++junctionCount,junctionByIndex[nextIndex]=1}for(i=0,n=coordinates.length;i<n;++i){visitedByIndex[i]=-1}for(i=0,n=rings.length;i<n;++i){var ring=rings[i],ringStart=ring[0]+1,ringEnd=ring[1];previousIndex=indexes[ringEnd-1];currentIndex=indexes[ringStart-1];nextIndex=indexes[ringStart];sequence(i,previousIndex,currentIndex,nextIndex);while(++ringStart<=ringEnd){sequence(i,previousIndex=currentIndex,currentIndex=nextIndex,nextIndex=indexes[ringStart])}}function sequence(i,previousIndex,currentIndex,nextIndex){if(visitedByIndex[currentIndex]===i)return;visitedByIndex[currentIndex]=i;var leftIndex=leftByIndex[currentIndex];if(leftIndex>=0){var rightIndex=rightByIndex[currentIndex];if((leftIndex!==previousIndex||rightIndex!==nextIndex)&&(leftIndex!==nextIndex||rightIndex!==previousIndex)){++junctionCount,junctionByIndex[currentIndex]=1}}else{leftByIndex[currentIndex]=previousIndex;rightByIndex[currentIndex]=nextIndex}}function index(){var indexByPoint=hashmap(coordinates.length*1.4,hashIndex,equalIndex,Int32Array,-1,Int32Array),indexes=new Int32Array(coordinates.length);for(var i=0,n=coordinates.length;i<n;++i){indexes[i]=indexByPoint.maybeSet(i,i)}return indexes}function hashIndex(i){return hashPoint(coordinates[i])}function equalIndex(i,j){return equalPoint(coordinates[i],coordinates[j])}visitedByIndex=leftByIndex=rightByIndex=null;var junctionByPoint=hashset(junctionCount*1.4,hashPoint,equalPoint),j;for(i=0,n=coordinates.length;i<n;++i){if(junctionByIndex[j=indexes[i]]){junctionByPoint.add(coordinates[j])}}return junctionByPoint};var cut=function(topology){var junctions=join(topology),coordinates=topology.coordinates,lines=topology.lines,rings=topology.rings,next,i,n;for(i=0,n=lines.length;i<n;++i){var line=lines[i],lineMid=line[0],lineEnd=line[1];while(++lineMid<lineEnd){if(junctions.has(coordinates[lineMid])){next={0:lineMid,1:line[1]};line[1]=lineMid;line=line.next=next}}}for(i=0,n=rings.length;i<n;++i){var ring=rings[i],ringStart=ring[0],ringMid=ringStart,ringEnd=ring[1],ringFixed=junctions.has(coordinates[ringStart]);while(++ringMid<ringEnd){if(junctions.has(coordinates[ringMid])){if(ringFixed){next={0:ringMid,1:ring[1]};ring[1]=ringMid;ring=ring.next=next}else{rotateArray(coordinates,ringStart,ringEnd,ringEnd-ringMid);coordinates[ringEnd]=coordinates[ringStart];ringFixed=true;ringMid=ringStart}}}}return topology};function rotateArray(array,start,end,offset){reverse$1(array,start,end);reverse$1(array,start,start+offset);reverse$1(array,start+offset,end)}function reverse$1(array,start,end){for(var mid=start+(end---start>>1),t;start<mid;++start,--end){t=array[start],array[start]=array[end],array[end]=t}}var dedup=function(topology){var coordinates=topology.coordinates,lines=topology.lines,line,rings=topology.rings,ring,arcCount=lines.length+rings.length,i,n;delete topology.lines;delete topology.rings;for(i=0,n=lines.length;i<n;++i){line=lines[i];while(line=line.next)++arcCount}for(i=0,n=rings.length;i<n;++i){ring=rings[i];while(ring=ring.next)++arcCount}var arcsByEnd=hashmap(arcCount*2*1.4,hashPoint,equalPoint),arcs=topology.arcs=[];for(i=0,n=lines.length;i<n;++i){line=lines[i];do{dedupLine(line)}while(line=line.next)}for(i=0,n=rings.length;i<n;++i){ring=rings[i];if(ring.next){do{dedupLine(ring)}while(ring=ring.next)}else{dedupRing(ring)}}function dedupLine(arc){var startPoint,endPoint,startArcs,startArc,endArcs,endArc,i,n;if(startArcs=arcsByEnd.get(startPoint=coordinates[arc[0]])){for(i=0,n=startArcs.length;i<n;++i){startArc=startArcs[i];if(equalLine(startArc,arc)){arc[0]=startArc[0];arc[1]=startArc[1];return}}}if(endArcs=arcsByEnd.get(endPoint=coordinates[arc[1]])){for(i=0,n=endArcs.length;i<n;++i){endArc=endArcs[i];if(reverseEqualLine(endArc,arc)){arc[1]=endArc[0];arc[0]=endArc[1];return}}}if(startArcs)startArcs.push(arc);else arcsByEnd.set(startPoint,[arc]);if(endArcs)endArcs.push(arc);else arcsByEnd.set(endPoint,[arc]);arcs.push(arc)}function dedupRing(arc){var endPoint,endArcs,endArc,i,n;if(endArcs=arcsByEnd.get(endPoint=coordinates[arc[0]])){for(i=0,n=endArcs.length;i<n;++i){endArc=endArcs[i];if(equalRing(endArc,arc)){arc[0]=endArc[0];arc[1]=endArc[1];return}if(reverseEqualRing(endArc,arc)){arc[0]=endArc[1];arc[1]=endArc[0];return}}}if(endArcs=arcsByEnd.get(endPoint=coordinates[arc[0]+findMinimumOffset(arc)])){for(i=0,n=endArcs.length;i<n;++i){endArc=endArcs[i];if(equalRing(endArc,arc)){arc[0]=endArc[0];arc[1]=endArc[1];return}if(reverseEqualRing(endArc,arc)){arc[0]=endArc[1];arc[1]=endArc[0];return}}}if(endArcs)endArcs.push(arc);else arcsByEnd.set(endPoint,[arc]);arcs.push(arc)}function equalLine(arcA,arcB){var ia=arcA[0],ib=arcB[0],ja=arcA[1],jb=arcB[1];if(ia-ja!==ib-jb)return false;for(;ia<=ja;++ia,++ib)if(!equalPoint(coordinates[ia],coordinates[ib]))return false;return true}function reverseEqualLine(arcA,arcB){var ia=arcA[0],ib=arcB[0],ja=arcA[1],jb=arcB[1];if(ia-ja!==ib-jb)return false;for(;ia<=ja;++ia,--jb)if(!equalPoint(coordinates[ia],coordinates[jb]))return false;return true}function equalRing(arcA,arcB){var ia=arcA[0],ib=arcB[0],ja=arcA[1],jb=arcB[1],n=ja-ia;if(n!==jb-ib)return false;var ka=findMinimumOffset(arcA),kb=findMinimumOffset(arcB);for(var i=0;i<n;++i){if(!equalPoint(coordinates[ia+(i+ka)%n],coordinates[ib+(i+kb)%n]))return false}return true}function reverseEqualRing(arcA,arcB){var ia=arcA[0],ib=arcB[0],ja=arcA[1],jb=arcB[1],n=ja-ia;if(n!==jb-ib)return false;var ka=findMinimumOffset(arcA),kb=n-findMinimumOffset(arcB);for(var i=0;i<n;++i){if(!equalPoint(coordinates[ia+(i+ka)%n],coordinates[jb-(i+kb)%n]))return false}return true}function findMinimumOffset(arc){var start=arc[0],end=arc[1],mid=start,minimum=mid,minimumPoint=coordinates[mid];while(++mid<end){var point=coordinates[mid];if(point[0]<minimumPoint[0]||point[0]===minimumPoint[0]&&point[1]<minimumPoint[1]){minimum=mid;minimumPoint=point}}return minimum-start}return topology};var delta=function(arcs){var i=-1,n=arcs.length;while(++i<n){var arc=arcs[i],j=0,k=1,m=arc.length,point=arc[0],x0=point[0],y0=point[1],x1,y1;while(++j<m){point=arc[j],x1=point[0],y1=point[1];if(x1!==x0||y1!==y0)arc[k++]=[x1-x0,y1-y0],x0=x1,y0=y1}if(k===1)arc[k++]=[0,0];arc.length=k}return arcs};var extract=function(objects){var index=-1,lines=[],rings=[],coordinates=[];function extractGeometry(geometry){if(geometry&&extractGeometryType.hasOwnProperty(geometry.type))extractGeometryType[geometry.type](geometry)}var extractGeometryType={GeometryCollection:function(o){o.geometries.forEach(extractGeometry)},LineString:function(o){o.arcs=extractLine(o.arcs)},MultiLineString:function(o){o.arcs=o.arcs.map(extractLine)},Polygon:function(o){o.arcs=o.arcs.map(extractRing)},MultiPolygon:function(o){o.arcs=o.arcs.map(extractMultiRing)}};function extractLine(line){for(var i=0,n=line.length;i<n;++i)coordinates[++index]=line[i];var arc={0:index-n+1,1:index};lines.push(arc);return arc}function extractRing(ring){for(var i=0,n=ring.length;i<n;++i)coordinates[++index]=ring[i];var arc={0:index-n+1,1:index};rings.push(arc);return arc}function extractMultiRing(rings){return rings.map(extractRing)}for(var key in objects){extractGeometry(objects[key])}return{type:"Topology",coordinates:coordinates,lines:lines,rings:rings,objects:objects}};var geometry=function(inputs){var outputs={},key;for(key in inputs)outputs[key]=geomifyObject(inputs[key]);return outputs};function geomifyObject(input){return input==null?{type:null}:(input.type==="FeatureCollection"?geomifyFeatureCollection:input.type==="Feature"?geomifyFeature:geomifyGeometry)(input)}function geomifyFeatureCollection(input){var output={type:"GeometryCollection",geometries:input.features.map(geomifyFeature)};if(input.bbox!=null)output.bbox=input.bbox;return output}function geomifyFeature(input){var output=geomifyGeometry(input.geometry),key;if(input.id!=null)output.id=input.id;if(input.bbox!=null)output.bbox=input.bbox;for(key in input.properties){output.properties=input.properties;break}return output}function geomifyGeometry(input){if(input==null)return{type:null};var output=input.type==="GeometryCollection"?{type:"GeometryCollection",geometries:input.geometries.map(geomifyGeometry)}:input.type==="Point"||input.type==="MultiPoint"?{type:input.type,coordinates:input.coordinates}:{type:input.type,arcs:input.coordinates};if(input.bbox!=null)output.bbox=input.bbox;return output}var prequantize=function(objects,bbox,n){var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3],kx=x1-x0?(n-1)/(x1-x0):1,ky=y1-y0?(n-1)/(y1-y0):1;function quantizePoint(input){return[Math.round((input[0]-x0)*kx),Math.round((input[1]-y0)*ky)]}function quantizePoints(input,m){var i=-1,j=0,n=input.length,output=new Array(n),pi,px,py,x,y;while(++i<n){pi=input[i];x=Math.round((pi[0]-x0)*kx);y=Math.round((pi[1]-y0)*ky);if(x!==px||y!==py)output[j++]=[px=x,py=y]}output.length=j;while(j<m)j=output.push([output[0][0],output[0][1]]);return output}function quantizeLine(input){return quantizePoints(input,2)}function quantizeRing(input){return quantizePoints(input,4)}function quantizePolygon(input){return input.map(quantizeRing)}function quantizeGeometry(o){if(o!=null&&quantizeGeometryType.hasOwnProperty(o.type))quantizeGeometryType[o.type](o)}var quantizeGeometryType={GeometryCollection:function(o){o.geometries.forEach(quantizeGeometry)},Point:function(o){o.coordinates=quantizePoint(o.coordinates)},MultiPoint:function(o){o.coordinates=o.coordinates.map(quantizePoint)},LineString:function(o){o.arcs=quantizeLine(o.arcs)},MultiLineString:function(o){o.arcs=o.arcs.map(quantizeLine)},Polygon:function(o){o.arcs=quantizePolygon(o.arcs)},MultiPolygon:function(o){o.arcs=o.arcs.map(quantizePolygon)}};for(var key in objects){quantizeGeometry(objects[key])}return{scale:[1/kx,1/ky],translate:[x0,y0]}};var topology=function(objects,quantization){var bbox=bounds(objects=geometry(objects)),transform=quantization>0&&bbox&&prequantize(objects,bbox,quantization),topology=dedup(cut(extract(objects))),coordinates=topology.coordinates,indexByArc=hashmap(topology.arcs.length*1.4,hashArc,equalArc);objects=topology.objects;topology.bbox=bbox;topology.arcs=topology.arcs.map(function(arc,i){indexByArc.set(arc,i);return coordinates.slice(arc[0],arc[1]+1)});delete topology.coordinates;coordinates=null;function indexGeometry(geometry$$1){if(geometry$$1&&indexGeometryType.hasOwnProperty(geometry$$1.type))indexGeometryType[geometry$$1.type](geometry$$1)}var indexGeometryType={GeometryCollection:function(o){o.geometries.forEach(indexGeometry)},LineString:function(o){o.arcs=indexArcs(o.arcs)},MultiLineString:function(o){o.arcs=o.arcs.map(indexArcs)},Polygon:function(o){o.arcs=o.arcs.map(indexArcs)},MultiPolygon:function(o){o.arcs=o.arcs.map(indexMultiArcs)}};function indexArcs(arc){var indexes=[];do{var index=indexByArc.get(arc);indexes.push(arc[0]<arc[1]?index:~index)}while(arc=arc.next);return indexes}function indexMultiArcs(arcs){return arcs.map(indexArcs)}for(var key in objects){indexGeometry(objects[key])}if(transform){topology.transform=transform;topology.arcs=delta(topology.arcs)}return topology};function hashArc(arc){var i=arc[0],j=arc[1],t;if(j<i)t=i,i=j,j=t;return i+31*j}function equalArc(arcA,arcB){var ia=arcA[0],ja=arcA[1],ib=arcB[0],jb=arcB[1],t;if(ja<ia)t=ia,ia=ja,ja=t;if(jb<ib)t=ib,ib=jb,jb=t;return ia===ib&&ja===jb}var prune=function(topology){var oldObjects=topology.objects,newObjects={},oldArcs=topology.arcs,newArcs=[],newArcIndex=-1,newIndexByOldIndex=new Array(oldArcs.length),key;function pruneGeometry(input){var output;switch(input.type){case"GeometryCollection":output={type:"GeometryCollection",geometries:input.geometries.map(pruneGeometry)};break;case"LineString":output={type:"LineString",arcs:pruneArcs(input.arcs)};break;case"MultiLineString":output={type:"MultiLineString",arcs:input.arcs.map(pruneArcs)};break;case"Polygon":output={type:"Polygon",arcs:input.arcs.map(pruneArcs)};break;case"MultiPolygon":output={type:"MultiPolygon",arcs:input.arcs.map(pruneMultiArcs)};break;default:return input}if(input.id!=null)output.id=input.id;if(input.bbox!=null)output.bbox=input.bbox;if(input.properties!=null)output.properties=input.properties;return output}function pruneArc(oldIndex){var oldReverse=oldIndex<0&&(oldIndex=~oldIndex,true),newIndex;if((newIndex=newIndexByOldIndex[oldIndex])==null){newIndexByOldIndex[oldIndex]=newIndex=++newArcIndex;newArcs[newIndex]=oldArcs[oldIndex]}return oldReverse?~newIndex:newIndex}function pruneArcs(arcs){return arcs.map(pruneArc)}function pruneMultiArcs(arcs){return arcs.map(pruneArcs)}for(key in oldObjects){newObjects[key]=pruneGeometry(oldObjects[key])}return{type:"Topology",bbox:topology.bbox,transform:topology.transform,objects:newObjects,arcs:newArcs}};var filter=function(topology,filter){var oldObjects=topology.objects,newObjects={},key;if(filter==null)filter=filterTrue;function filterGeometry(input){var output,arcs;switch(input.type){case"Polygon":{arcs=filterRings(input.arcs);output=arcs?{type:"Polygon",arcs:arcs}:{type:null};break}case"MultiPolygon":{arcs=input.arcs.map(filterRings).filter(filterIdentity);output=arcs.length?{type:"MultiPolygon",arcs:arcs}:{type:null};break}case"GeometryCollection":{arcs=input.geometries.map(filterGeometry).filter(filterNotNull);output=arcs.length?{type:"GeometryCollection",geometries:arcs}:{type:null};break}default:return input}if(input.id!=null)output.id=input.id;if(input.bbox!=null)output.bbox=input.bbox;if(input.properties!=null)output.properties=input.properties;return output}function filterRings(arcs){return arcs.length&&filterExteriorRing(arcs[0])?[arcs[0]].concat(arcs.slice(1).filter(filterInteriorRing)):null}function filterExteriorRing(ring){return filter(ring,false)}function filterInteriorRing(ring){return filter(ring,true)}for(key in oldObjects){newObjects[key]=filterGeometry(oldObjects[key])}return prune({type:"Topology",bbox:topology.bbox,transform:topology.transform,objects:newObjects,arcs:topology.arcs})};function filterTrue(){return true}function filterIdentity(x){return x}function filterNotNull(geometry){return geometry.type!=null}var filterAttached=function(topology){var uniqueRingByArc={},ringIndex=0,name;function testGeometry(o){switch(o.type){case"GeometryCollection":o.geometries.forEach(testGeometry);break;case"Polygon":testArcs(o.arcs);break;case"MultiPolygon":o.arcs.forEach(testArcs);break}}function testArcs(arcs){for(var i=0,n=arcs.length;i<n;++i,++ringIndex){for(var ring=arcs[i],j=0,m=ring.length;j<m;++j){var arc=ring[j];if(arc<0)arc=~arc;var uniqueRing=uniqueRingByArc[arc];if(uniqueRing>=0&&uniqueRing!==ringIndex)uniqueRingByArc[arc]=-1;else uniqueRingByArc[arc]=ringIndex}}}for(name in topology.objects){testGeometry(topology.objects[name])}return function(ring){for(var j=0,m=ring.length,arc;j<m;++j){if(arc=ring[j],uniqueRingByArc[arc<0?~arc:arc]<0){return true}}return false}};function planarTriangleArea(triangle){var a=triangle[0],b=triangle[1],c=triangle[2];return Math.abs((a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1]))/2}function planarRingArea$1(ring){var i=-1,n=ring.length,a,b=ring[n-1],area=0;while(++i<n)a=b,b=ring[i],area+=a[0]*b[1]-a[1]*b[0];return Math.abs(area)/2}var filterWeight=function(topology,minWeight,weight){minWeight=minWeight==null?Number.MIN_VALUE:+minWeight;if(weight==null)weight=planarRingArea$1;return function(ring,interior){return weight(feature(topology,{type:"Polygon",arcs:[ring]}).geometry.coordinates[0],interior)>=minWeight}};var filterAttachedWeight=function(topology,minWeight,weight){var a=filterAttached(topology),w=filterWeight(topology,minWeight,weight);return function(ring,interior){return a(ring,interior)||w(ring,interior)}};function compare(a,b){return a[1][2]-b[1][2]}var newHeap=function(){var heap={},array=[],size=0;heap.push=function(object){up(array[object._=size]=object,size++);return size};heap.pop=function(){if(size<=0)return;var removed=array[0],object;if(--size>0)object=array[size],down(array[object._=0]=object,0);return removed};heap.remove=function(removed){var i=removed._,object;if(array[i]!==removed)return;if(i!==--size)object=array[size],(compare(object,removed)<0?up:down)(array[object._=i]=object,i);return i};function up(object,i){while(i>0){var j=(i+1>>1)-1,parent=array[j];if(compare(object,parent)>=0)break;array[parent._=i]=parent;array[object._=i=j]=object}}function down(object,i){while(true){var r=i+1<<1,l=r-1,j=i,child=array[j];if(l<size&&compare(array[l],child)<0)child=array[j=l];if(r<size&&compare(array[r],child)<0)child=array[j=r];if(j===i)break;array[child._=i]=child;array[object._=i=j]=object}}return heap};function copy(point){return[point[0],point[1],0]}var presimplify=function(topology,weight){var point=topology.transform?transform(topology.transform):copy,heap=newHeap();if(weight==null)weight=planarTriangleArea;var arcs=topology.arcs.map(function(arc){var triangles=[],maxWeight=0,triangle,i,n;arc=arc.map(point);for(i=1,n=arc.length-1;i<n;++i){triangle=[arc[i-1],arc[i],arc[i+1]];triangle[1][2]=weight(triangle);triangles.push(triangle);heap.push(triangle)}arc[0][2]=arc[n][2]=Infinity;for(i=0,n=triangles.length;i<n;++i){triangle=triangles[i];triangle.previous=triangles[i-1];triangle.next=triangles[i+1]}while(triangle=heap.pop()){var previous=triangle.previous,next=triangle.next;if(triangle[1][2]<maxWeight)triangle[1][2]=maxWeight;else maxWeight=triangle[1][2];if(previous){previous.next=next;previous[2]=triangle[2];update(previous)}if(next){next.previous=previous;next[0]=triangle[0];update(next)}}return arc});function update(triangle){heap.remove(triangle);triangle[1][2]=weight(triangle);heap.push(triangle)}return{type:"Topology",bbox:topology.bbox,objects:topology.objects,arcs:arcs}};var quantile=function(topology,p){var array=[];topology.arcs.forEach(function(arc){arc.forEach(function(point){if(isFinite(point[2])){array.push(point[2])}})});return array.length&&quantile$1(array.sort(descending),p)};function quantile$1(array,p){if(!(n=array.length))return;if((p=+p)<=0||n<2)return array[0];if(p>=1)return array[n-1];var n,h=(n-1)*p,i=Math.floor(h),a=array[i],b=array[i+1];return a+(b-a)*(h-i)}function descending(a,b){return b-a}var simplify=function(topology,minWeight){minWeight=minWeight==null?Number.MIN_VALUE:+minWeight;var arcs=topology.arcs.map(function(input){var i=-1,j=0,n=input.length,output=new Array(n),point;while(++i<n){if((point=input[i])[2]>=minWeight){output[j++]=[point[0],point[1]]}}output.length=j;return output});return{type:"Topology",transform:topology.transform,bbox:topology.bbox,objects:topology.objects,arcs:arcs}};var pi=Math.PI;var tau=2*pi;var quarterPi=pi/4;var radians=pi/180;var atan2=Math.atan2;var cos=Math.cos;var sin=Math.sin;function halfArea(ring,closed){var i=0,n=ring.length,sum=0,point=ring[closed?i++:n-1],lambda0,lambda1=point[0]*radians,phi1=point[1]*radians/2+quarterPi,cosPhi0,cosPhi1=cos(phi1),sinPhi0,sinPhi1=sin(phi1);for(;i<n;++i){point=ring[i];lambda0=lambda1,lambda1=point[0]*radians;phi1=point[1]*radians/2+quarterPi;cosPhi0=cosPhi1,cosPhi1=cos(phi1);sinPhi0=sinPhi1,sinPhi1=sin(phi1);var dLambda=lambda1-lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,k=sinPhi0*sinPhi1,u=cosPhi0*cosPhi1+k*cos(adLambda),v=k*sdLambda*sin(adLambda);sum+=atan2(v,u)}return sum}function sphericalRingArea(ring,interior){var sum=halfArea(ring,true);if(interior)sum*=-1;return(sum<0?tau+sum:sum)*2}function sphericalTriangleArea(t){var sum=halfArea(t,false);return(sum<0?tau+sum:sum)*2}exports.bbox=bbox;exports.feature=feature;exports.mesh=mesh;exports.meshArcs=meshArcs;exports.merge=merge;exports.mergeArcs=mergeArcs;exports.neighbors=neighbors;exports.quantize=quantize;exports.transform=transform;exports.untransform=untransform;exports.topology=topology;exports.filter=filter;exports.filterAttached=filterAttached;exports.filterAttachedWeight=filterAttachedWeight;exports.filterWeight=filterWeight;exports.planarRingArea=planarRingArea$1;exports.planarTriangleArea=planarTriangleArea;exports.presimplify=presimplify;exports.quantile=quantile;exports.simplify=simplify;exports.sphericalRingArea=sphericalRingArea;exports.sphericalTriangleArea=sphericalTriangleArea;Object.defineProperty(exports,"__esModule",{value:true})})},function(module,exports){module.exports='<div style="position: relative;" class="lens-inner-world-map scroll-notice-container" ng-class="{reveal: reveal}">\n    <div class="scroll-notice-content">Hold shift key while scrolling to zoom</div>\n    <div style="position: absolute; z-index: 1;"\n        ng-if="countryLabel && countryCount"\n        ng-style="countryTooltipPosition"\n        class="countryTooltipPosition"\n    >\n\n        <a ng-click="clickCountryTooltip()" class="link">\n            <span lens-flag country="countryLabel"></span>\n            {{::\'common.filterBy\' | message}} {{::fieldName || \'Jurisdiction\'}} = {{countryLabel}} ({{countryCount | customNumber}})\n        </a>\n\n    </div>\n    <div class="inner-map"></div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";module.exports={FacetDataModel:__webpack_require__(283),Inventorship:__webpack_require__(667),Patent:__webpack_require__(284),SavedQuery:__webpack_require__(63),Tag:__webpack_require__(215)}},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.Model.extend({url:function url(){var base="/lens/service/patent-entity/inventorship";if(this.isNew())return base;return base+"/"+this.get("id")}})},function(module,exports,__webpack_require__){"use strict";module.exports={ClassificationService:__webpack_require__(120),Dates:__webpack_require__(285),IsoCountries:__webpack_require__(23),LanguageService:__webpack_require__(669),LoadingSpinner:__webpack_require__(139),LocalStorageService:__webpack_require__(7),LogoutWarning:__webpack_require__(670),Menu:__webpack_require__(286),Notification:__webpack_require__(10),SearchApp:__webpack_require__(671),Sequence:__webpack_require__(277),Tooltip:__webpack_require__(140),UniqueSplit:__webpack_require__(138)}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.run(["$rootScope","$window","$state",function($rootScope,$window,$state){var languageBeta=true;var _$window$UI_CONFIG=$window.UI_CONFIG,locale=_$window$UI_CONFIG.locale,locales=_$window$UI_CONFIG.locales;if(!(locales&&locale)){return}locale=locales[locale]||locales["en"];if(languageBeta&&!locale.active){angular.element($window).on("mouseup",function(e){$rootScope.suggestEditPosition=e;$rootScope.selectedText=$window.getSelection().toString();$rootScope.$digest()})}$rootScope.suggestEdit=function(){$state.go("localeSelector");_.defer(clearSelection)}}]);var clearSelection=function clearSelection(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}else if(document.selection){document.selection.empty()}}},function(module,exports,__webpack_require__){"use strict";var LocalStorageService=__webpack_require__(7);var localStorageService=new LocalStorageService;var Notification=__webpack_require__(10);module.exports=function(isAnon){var wasAuthed=localStorageService.get("wasAuthed");localStorageService.set("wasAuthed",!isAnon);if(wasAuthed&&isAnon){var notification=new Notification;notification.error("Warning! You have been logged out",{life:5e3});localStorageService.set("wasAuthed",false)}}},function(module,exports,__webpack_require__){"use strict";var FacetDataModel=__webpack_require__(283);var SavedQuery=__webpack_require__(63);var ResultsRouter=__webpack_require__(287);var FacetsLoadingView=__webpack_require__(292);var FacetsView=__webpack_require__(203);var SavedQueryControlsView=__webpack_require__(293);var SearchFormView=__webpack_require__(206);var facetLoadingErrorTemplate=window.Handlebars.compile(__webpack_require__(672));module.exports=function(){return{init:function init(opts){var canonicalUrl=opts.contextPath+opts.searchUrl;window.facetDataUrl=canonicalUrl+"/facetData"+document.location.search;window.searchAppConfig=opts;window.searchAppResultSize=opts.resultSize;window.searchAppFacetData=opts.facets;var facetData=new FacetDataModel({url:canonicalUrl+"/facetData"+document.location.search});facetData.set(opts.facet);new SavedQueryControlsView({el:$("#saveQuery"),model:opts.savedQuery?new SavedQuery(opts.savedQuery):undefined,defaultTitle:$("#q").val(),queryType:"PATENT",searchUrl:opts.searchUrl,queryText:opts.queryText});new ResultsRouter({view:opts.view,opts:opts});Backbone.history.start({pushState:false});if(facetData.isNew()){var loading=new FacetsLoadingView;$.get({url:canonicalUrl+"/facetControls"+window.location.search,timeout:20*1e3}).done(function(html){var openFacets=loading.stop();$("#facetsForm").html($(html).html());var facetsView=new FacetsView({openFacets:openFacets});new SearchFormView({facetsView:facetsView})}).fail(function(err){console.warn(err);$("#facetsForm").html(facetLoadingErrorTemplate())})}else{var facetsView=new FacetsView;new SearchFormView({facetsView:facetsView})}}}}()},function(module,exports){module.exports='<div class="facet-loading-error">\n   <b>\n       {{message \'filters.title.scholar\'}} \n   </b>\n   \n    <div class="alert alert-danger" style="margin-top: .5em;">\n        <em class="fa fa-exclamation-triangle"></em>\n        {{message \'error.filters\'}}\n        {{message \'error.filters.txt\'}}\n    </div>\n    <a href="javascript:window.location.reload()" class="btn btn-pri btn-xs">\n        <em class="fa fa-refresh"></em>\n        {{message \'common.refresh\'}}\n    </a>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";module.exports={ResultsRouter:__webpack_require__(287)}},function(module,exports,__webpack_require__){"use strict";module.exports={BreadcrumbService:__webpack_require__(675),CollectionNotesService:__webpack_require__(676),CollectionService:__webpack_require__(677),FlashMessagesService:__webpack_require__(282),NotesService:__webpack_require__(679),OrcidService:__webpack_require__(680),PagedResourceFactory:__webpack_require__(681),PatentNotesService:__webpack_require__(682),PatentService:__webpack_require__(683),QueryResource:__webpack_require__(684),SavedQueryResource:__webpack_require__(685),ScholarService:__webpack_require__(278),SettingsService:__webpack_require__(686),SharedObjectService:__webpack_require__(687)}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EventEmitter=__webpack_require__(136);var BreadcrumbService=function(_EventEmitter){_inherits(BreadcrumbService,_EventEmitter);function BreadcrumbService(){_classCallCheck(this,BreadcrumbService);return _possibleConstructorReturn(this,(BreadcrumbService.__proto__||Object.getPrototypeOf(BreadcrumbService)).apply(this,arguments))}return BreadcrumbService}(EventEmitter);_app2.default.service("BreadcrumbService",BreadcrumbService);module.exports=BreadcrumbService},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.factory("CollectionNotesService",["$http","CollectionService",function($http,CollectionService){var baseUrl=function baseUrl(collectionId){return"/lens/service/collection/"+collectionId};return{fetch:function fetch(id){return CollectionService.fetch(id).then(function(collection){return collection.notes})},create:function create(collectionId,note){return $http({url:baseUrl(collectionId)+"/note",method:"POST",data:JSON.stringify(note)}).then(function(res){}).catch(function(err){console.warn(err)})},update:function update(collectionId,note){return $http({url:baseUrl(collectionId)+"/note/"+note.id,method:"PUT",data:JSON.stringify(note)}).then(function(res){}).catch(function(err){console.warn(err)})},delete:function _delete(collectionId,note){return $http({url:baseUrl(collectionId)+"/note/"+note.id,method:"DELETE"}).then(function(res){}).catch(function(err){console.warn(err)})}}}])},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _formatAddresses=__webpack_require__(678);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var BASE_URL="/lens/service/collection";var VALID_TYPES=["PATENT","SCHOLARLY_WORK"];var collectionDossierMap=__webpack_require__(279);var getLogoUrl=__webpack_require__(41);var EventEmitter=__webpack_require__(136);var CollectionService=function(_EventEmitter){_inherits(CollectionService,_EventEmitter);function CollectionService($http){_classCallCheck(this,CollectionService);var _this=_possibleConstructorReturn(this,(CollectionService.__proto__||Object.getPrototypeOf(CollectionService)).call(this));_this.$http=$http;_this._getAll=null;_this._collectionPromise={};return _this}_createClass(CollectionService,[{key:"fetch",value:function fetch(id){var _this2=this;if(this._collectionPromise[id]){return this._collectionPromise[id]}if(!id){throw new Error("Attempting to fetch Collection with no ID. Aborting.")}this._collectionPromise[id]=this.$http.get(BASE_URL+"/"+id).then(function(response){_this2._collection=response.data;_this2._collectionPromise[id]=null;return _this2._collection});return this._collectionPromise[id]}},{key:"getAll",value:function getAll(){var _this3=this;if(this._getAll){return this._getAll}this._getAll=this.$http({url:BASE_URL}).then(function(res){_this3._getAll=null;return res.data});return this._getAll}},{key:"create",value:function create(data){var _this4=this;if(!_.includes(VALID_TYPES,data.type)){throw new Error("Collection type must be one of: "+VALID_TYPES.join(", "))}return this.$http({url:BASE_URL,method:"POST",data:JSON.stringify(data)}).then(function(res){_this4.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"save",value:function save(data){var _this5=this;return this.$http({url:BASE_URL+"/"+data.id,method:"PUT",data:JSON.stringify(data)}).then(function(res){_this5.emit("REFRESH_COLLECTION",res.data);_this5.emit("REFRESH_COLLECTIONS");return res})}},{key:"delete",value:function _delete(id){var _this6=this;return this.$http({url:BASE_URL+"/"+id,method:"DELETE"}).then(function(res){_this6.emit("REFRESH_COLLECTIONS");_this6.emit("DELETE_COLLECTION",id);return res})}},{key:"import",value:function _import(id,items){var _this7=this;var importType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"lens-ids";var url=BASE_URL+"/"+id+"/import/"+importType;if(_.isArray(items)){items=items.join(",")}return this.$http({url:url,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:"items="+items.split("\n").join(",")}).then(function(res){_this7.emit("REFRESH_COLLECTION",res.data);_this7.emit("REFRESH_COLLECTIONS");return res})}},{key:"addItems",value:function addItems(id,items){var _this8=this;if(_.isArray(items)){items=items.join(",")}return this.$http({url:BASE_URL+"/"+id+"/item",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:"items="+items}).then(function(res){_this8.emit("REFRESH_COLLECTION",res.data);_this8.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"removeItems",value:function removeItems(id,items){var _this9=this;if(_.isArray(items)){items=items.join(",")}return this.$http({url:BASE_URL+"/"+id+"/item/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:"items="+items}).then(function(res){_this9.emit("REFRESH_COLLECTION",res.data);_this9.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"addSearchToCollection",value:function addSearchToCollection(collection,search){if(collection.type==="PATENT"){return this._addPatentSearchToCollection(collection.id,document.location.search.slice(1))}else{return this._addScholarlySearchToCollection(collection.id,search)}}},{key:"_addPatentSearchToCollection",value:function _addPatentSearchToCollection(id,search){var _this10=this;search=$.deparam(search);search.destCollectionId=id;search=$.param(search,true);return this.$http({url:window.location.pathname+"/addSearchToCollection?"+search,method:"GET"}).then(function(res){_this10.emit("REFRESH_COLLECTION",res.data);_this10.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"_addScholarlySearchToCollection",value:function _addScholarlySearchToCollection(id,search){var _this11=this;var body=search();body.view="scholar";return this.$http({url:"/lens/api/multi/addToCollection/"+id,method:"POST",data:body}).then(function(res){_this11.emit("REFRESH_COLLECTION",res.data);_this11.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"removeSearchFromCollection",value:function removeSearchFromCollection(collection,search){if(collection.type==="PATENT"){return this._removePatentSearchFromCollection(collection.id,document.location.search.slice(1))}else{return this._removeScholarlySearchFromCollection(collection.id,search)}}},{key:"_removePatentSearchFromCollection",value:function _removePatentSearchFromCollection(id,search){var _this12=this;search=$.deparam(search);search.destCollectionId=id;search=$.param(search,true);return this.$http({url:"/lens/search/removeSearchFromCollection?"+search,method:"GET"}).then(function(res){_this12.emit("REFRESH_COLLECTION",res.data);_this12.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"_removeScholarlySearchFromCollection",value:function _removeScholarlySearchFromCollection(id,search){var _this13=this;var body=search();body.view="scholar";return this.$http({url:"/lens/api/multi/deleteFromCollection/"+id,method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},data:body}).then(function(res){_this13.emit("REFRESH_COLLECTION",res.data);_this13.emit("REFRESH_COLLECTIONS");return res.data})}},{key:"export",value:function _export(id,params){return this.$http({url:BASE_URL+"/"+id+"/export",method:"GET",params:params})}},{key:"getAdditionalMetadata",value:function getAdditionalMetadata(collection){var id=collection.id;if(id===27083){return{introText:'"We’re a global charitable foundation, both politically and financially independent. We support scientists and researchers, take on big problems, fuel imaginations, and spark debate. Our funding supports over 14,000 people in more than 70 countries. In the next five years, we aim to spend up to £5 billion helping thousands of curious, passionate people all over the world explore ideas in science, population health, medical innovation, the humanities and social sciences and public engagement." Source: Wellcome Trust website',item:{type:"faux",link:"https://wellcome.ac.uk/",created:new Date(2018,0,23),updated:new Date,user:{displayName:"Wellcome Trust",metadata:{logoUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Wellcome_Trust_logo.svg/1024px-Wellcome_Trust_logo.svg.png"}}}}}if(id===27084){return{introText:'"We work with partners worldwide to tackle critical problems in five program areas. Our Global Health Division aims to reduce inequities in health by developing new tools and strategies to reduce the burden of infectious disease and the leading causes of child mortality in developing countries. Our Global Development Division focuses on improving the delivery of high-impact health products and services to the world’s poorest communities and helps countries expand access to health coverage. Our Global Growth & Opportunity division focuses on creating and scaling market-based innovations to stimulate inclusive and sustainable economic growth. Our United States Division works to improve U.S. high school and postsecondary education, and support vulnerable children and families in Washington State. And our Global Policy & Advocacy Division seeks to build strategic relationships and promote policies that will help advance our work. Our approach to grantmaking in all five areas emphasizes collaboration, innovation, risk-taking, and, most importantly, results." Source: Gates Foundation website',item:{type:"faux",link:"https://www.gatesfoundation.org",created:new Date(2018,0,23),updated:new Date,user:{displayName:"Bill and Melinda Gates Foundation",metadata:{logoUrl:"https://www.gatesfoundation.org/~/media/GFO/Site/Logo-Images/Gates_logo_1200x1200.jpg"}}}}}return null}},{key:"getIn4mMetadata",value:function getIn4mMetadata(collection){var link=collectionDossierMap[collection.id];if(!link){return Promise.resolve(null)}var slug=link.slug,dataset=link.dataset,type=link.type,datasetAlias=link.datasetAlias;if(!slug){return Promise.resolve(null)}var displayName=slug.replace(/\-/g," ");var introText="";if(type==="Patent Portfolio"){introText="This is a patent collection created by searching for owners or applicants related to this institution’s names. For more details on the search terms used, please see the attached “Notes” below."}else if(type==="Citing Patent Collection"){introText="This collection encompasses patents that cite the scholarly works of "+displayName+"."}var url=window.UI_CONFIG.institutionDataLocation+"/public/"+dataset+"/institutions/"+slug+".json";return this.$http.get(url).then(function(_ref){var data=_ref.data;var item=data;item.slug=slug;item.type="institution";item.datasetAlias=datasetAlias;item.dossierUrl="/lens/in4m/dossier/"+datasetAlias+"/"+slug+"/analysis";item.user.metadata.logoUrl=getLogoUrl(displayName);(0,_formatAddresses.formatAddresses)(item);return{item:item,introText:introText}})}}]);return CollectionService}(EventEmitter);_app2.default.service("CollectionService",CollectionService);module.exports=CollectionService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatAddresses=undefined;var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var formatAddresses=exports.formatAddresses=function formatAddresses(item){var data=(0,_get3.default)(item,"user.metadata");if(data&&data.address){data.address=data.address.replace("\n",",")}if(data&&data.tto&&data.tto.address){data.tto.address=data.tto.address.replace("\n",",")}}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var deps=["$http","$rootScope","CollectionNotesService","PatentNotesService"];_app2.default.factory("NotesService",[].concat(deps,[function($http,$rootScope,CollectionNotesService,PatentNotesService){var GROUPED_URL="/lens/api/user/work-area/notes/grouped";var promises={};return{fetch:function fetch(id){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"PATENT";var service=type==="COLLECTION"?CollectionNotesService:PatentNotesService;var key=type+":"+id;if(!promises[key]){promises[key]=service.fetch(id).then(function(d){delete promises[key];return d})}return promises[key]},fetchGrouped:function fetchGrouped(){return $http({url:GROUPED_URL,method:"GET"})},recent:function recent(){return $http({url:"/lens/api/user/work-area/notes/recent?size=10"}).then(function(d){return d.data})},delete:function _delete(noteId){var _this=this;return $http.delete("/lens/api/user/work-area/notes/"+noteId).then(function(d){_this.broadcast("REFRESH_NOTES");notification.notify("Note Deleted");return d})},linkUrl:function linkUrl(note){if(note.type==="PATENT"){if(note.scope!=="BASE"){return"/lens/patent/"+note.lensId+"#/"+note.scope.toLowerCase()}return"/lens/patent/"+note.lensId+"/notes"}else if(note.type==="COLLECTION"){return"/lens/collection/"+note.collectionId}},broadcast:function broadcast(){$rootScope.$broadcast.apply($rootScope,arguments)}}}]))},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=[];_app2.default.factory("OrcidService",[].concat(deps,[function(){var FETCH_OPTS={method:"GET",headers:{"Content-Type":"application/json"}};var searchUrl=function searchUrl(name,start,limit){return"https://pub.orcid.org/v2.1/search/?q=%7B!edismax%20qf%3D%22given-and-family-names%5E50.0%20family-name%5E10.0%20given-names%5E5.0%20credit-name%5E10.0%20other-names%5E5.0%20text%5E1.0%22%20pf%3D%22given-and-family-names%5E50.0%22%20mm%3D1%7D"+encodeURIComponent(name)+"&start="+start+"&rows="+limit};var personUrl=function personUrl(id){return"https://pub.orcid.org/v2.1/"+id+"/person"};var activitiesUrl=function activitiesUrl(id){return"https://pub.orcid.org/v2.1/"+id+"/activities"};var extractName=function extractName(response){if(!response.name){return""}var givenNames=response.name["given-names"];var familyName=response.name["family-name"];var displayName=(givenNames?givenNames.value:"")+" "+(familyName?familyName.value:"");return displayName.trim()};var extractUrls=function extractUrls(person){return person["researcher-urls"]["researcher-url"].map(function(url){return{url:url.url.value,label:url["url-name"]}})};var extractAffiliations=function extractAffiliations(activities){return activities.educations["education-summary"].map(function(summary){return summary.organization.name})};var extractPositions=function extractPositions(activities){return activities.employments["employment-summary"].map(function(summary){return summary["role-title"]+", "+summary.organization.name})};var searchCache={};var personCache={};var activitiesCache={};var getPerson=function getPerson(id){if(!personCache[id]){personCache[id]=fetch(personUrl(id),FETCH_OPTS).then(function(d){return d.json()})}return personCache[id]};var getActivities=function getActivities(id){if(!activitiesCache[id]){activitiesCache[id]=fetch(activitiesUrl(id),FETCH_OPTS).then(function(d){return d.json()})}return activitiesCache[id]};return{searchByName:function searchByName(name,start,limit){var cacheKey=name+"-"+start;if(!searchCache[cacheKey]){searchCache[cacheKey]=fetch(searchUrl(name,start,limit),FETCH_OPTS).then(function(res){return res.json()}).then(function(response){return response.result.map(function(d){return d["orcid-identifier"].path})})}return searchCache[cacheKey]},lookupPersonName:function lookupPersonName(id){return getPerson(id).then(extractName)},lookupPersonUrls:function lookupPersonUrls(id){return getPerson(id).then(extractUrls)},lookupAffiliations:function lookupAffiliations(id){return getActivities(id).then(extractAffiliations)},lookupPositions:function lookupPositions(id){return getActivities(id).then(extractPositions)},search:function search(name,start){return fetch(searchUrl(name,start),FETCH_OPTS).then(function(res){return res.json()}).then(function(response){var personIds=response.result.map(function(d){return d["orcid-identifier"].path});Promise.all([Promise.all(personIds.map(function(id){return fetch(personUrl(id),FETCH_OPTS).then(function(d){return d.json()})})),Promise.all(personIds.map(function(id){return fetch(activitiesUrl(id),FETCH_OPTS).then(function(d){return d.json()})}))]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),persons=_ref2[0],activities=_ref2[1];console.log({persons:persons,activities:activities});var affiliations=activities.map(function(d){return d.educations["education-summary"].map(function(summary){return summary.organization.name})});var positions=activities.map(function(d){return d.employments["employment-summary"].map(function(summary){return summary["role-title"]+", "+summary.organization.name})});var urls=persons.map(function(d){var urls=d["researcher-urls"]["researcher-url"];return urls.map(function(url){return{url:url.url.value,label:url["url-name"]}})});return personIds.map(function(name,i){return{id:personIds[i],name:extractName(persons[i]),affiliations:affiliations[i].join("; "),positions:positions[i].join("; "),urls:urls[i]}})})})},isOrcidId:function isOrcidId(value){var ORCID_REGEX=/^(\d{4}-){3}\d{4}$/;return ORCID_REGEX.test(value.trim())}}}]))},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PagedResourceFactory=function(){function PagedResourceFactory($http){_classCallCheck(this,PagedResourceFactory);this._$http=$http}_createClass(PagedResourceFactory,[{key:"createRemote",value:function createRemote(url){return new PagedResource(this._$http,url)}},{key:"createLocal",value:function createLocal(data){return new LocalPagedResource(data)}}]);return PagedResourceFactory}();_app2.default.service("PagedResourceFactory",PagedResourceFactory);var PagedResource=function(){function PagedResource($http,url){_classCallCheck(this,PagedResource);this._$http=$http;this._url=url;this.loading=false;this.data={};this.page=0;this.pageRange=[];this.pageSize=50;this._maxPage=0}_createClass(PagedResource,[{key:"fetch",value:function fetch(){var _this=this;var config={params:{n:this.pageSize,p:this.page}};this.loading=true;this._$http.get(this._url,config).then(function(res){_this.data=res.data;_this.pageRange=_this._pages();_this.loading=false}).catch(function(err){_this.loading=false;_this.errorStatus=err.status;console.warn(err)})}},{key:"previousPage",value:function previousPage(){if(this.page>0){this.page--;this.fetch()}}},{key:"setPage",value:function setPage(page){this.page=page;this.fetch()}},{key:"nextPage",value:function nextPage(){if(this.page<this._maxPage){this.page++;this.fetch()}}},{key:"_pages",value:function _pages(){this._maxPage=Math.floor(this.data.size/this.pageSize);var startRange=Math.max(0,this.page-4);var stopRange=Math.min(Math.max(10,this.page+6),this._maxPage)+1;return _.range(startRange,stopRange)}}]);return PagedResource}();var LocalPagedResource=function(){function LocalPagedResource(data){_classCallCheck(this,LocalPagedResource);this.page=0;this.pageSize=50;this._maxPage=0;this.setData(data)}_createClass(LocalPagedResource,[{key:"setData",value:function setData(data){this._data=data;this.size=data.length;this.fetch()}},{key:"fetch",value:function fetch(){var begin=this.page*this.pageSize;var end=begin+this.pageSize;this.data=this._data.slice(begin,end);this.pageRange=this._pages()}},{key:"previousPage",value:function previousPage(){if(this.page>0){this.page--;this.fetch()}}},{key:"setPage",value:function setPage(page){this.page=page;this.fetch()}},{key:"nextPage",value:function nextPage(){if(this.page<this._maxPage){this.page++;this.fetch()}}},{key:"_pages",value:function _pages(){this._maxPage=Math.floor(this.size/this.pageSize);var startRange=Math.max(0,this.page-4);var stopRange=Math.min(Math.max(10,this.page+6),this._maxPage)+1;return _.range(startRange,stopRange)}}]);return LocalPagedResource}()},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var deps=["$http","$rootScope"];_app2.default.factory("PatentNotesService",[].concat(deps,[function($http,$rootScope){var baseUrl=function baseUrl(lensId){return"/lens/service/patent-entity/"+lensId+"/note"};var URL="/lens/service/patent-entity/note";return{fetch:function fetch(lensId){return $http({url:baseUrl(lensId),method:"GET"}).then(function(d){return d.data})},create:function create(lensId){var note=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return $http({url:URL,method:"POST",data:JSON.stringify({lensId:lensId,scope:note.scope?note.scope.toUpperCase():"BASE",text:note.text||"",published:true})})},update:function update(lensId,note){note.scope=(note.scope||"BASE").toUpperCase();return $http({url:URL+"/"+note.id,method:"PUT",data:JSON.stringify(note)})},delete:function _delete(lensId,note){return $http({url:URL+"/"+note.id,method:"DELETE"})},recent:function recent(){return $http({url:"/lens/api/user/work-area/notes/recent?size=10"}).then(function(d){return d.data})}}}]))},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var sessionCache=[];try{var sessionCacheHit=sessionStorage.getItem("patent-cache");sessionCache=sessionCacheHit?JSON.parse(sessionCacheHit):[]}catch(error){console.warn("Session Cache init failure")}var EventEmitter=__webpack_require__(136);var LocalStorageService=__webpack_require__(7);var storage=new LocalStorageService("patent-service");var PatentService=function(_EventEmitter){_inherits(PatentService,_EventEmitter);function PatentService(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,PatentService);var _this=_possibleConstructorReturn(this,(PatentService.__proto__||Object.getPrototypeOf(PatentService)).call(this));_this.API_BASE_URL="/lens/";_this.cache=sessionCache;return _this}_createClass(PatentService,[{key:"_checkCache",value:function _checkCache(bucket,key){try{key=btoa(window.encodeURIComponent(key))}catch(err){console.warn("Could not encode cache key:",key);return null}var hits=this.cache.filter(function(d){return d.key===key&&d.bucket===bucket});if(hits[0]){console.log("cache hit!");return hits[0].value}}},{key:"_updateCache",value:function _updateCache(bucket,key,value){try{key=btoa(window.encodeURIComponent(key))}catch(err){console.warn("Could not encode cache key:",key);return null}if(this.cache){if(this.cache.length>20){this.cache.shift()}this.cache.push({bucket:bucket,key:key,value:value});try{sessionStorage.setItem("patent-cache",JSON.stringify(this.cache))}catch(e){console.warn("session cache exceeding quota");this.cache.pop()}}}},{key:"suggest",value:function suggest(field,prefix){}},{key:"search",value:function search(query){var _this2=this;if(!query){return}var cacheKey=JSON.stringify(query);var cached=this._checkCache("search",cacheKey);if(cached){var d=new $.Deferred;return d.resolve(cached)}var search=$.param(query);return fetch("/lens/search?"+search).then(function(res){var reloadingPageKey="reloadingScholarlyPage";if(res.status===403){if(!window.sessionStorage.getItem(reloadingPageKey)){window.sessionStorage.setItem(reloadingPageKey,"true");window.location.reload(true)}throw res}window.sessionStorage.removeItem(reloadingPageKey);return res.json()}).then(function(res){console.log(res);_this2._updateCache("search",cacheKey,res);return res})}},{key:"facets",value:function facets(params){var _this3=this;var search=$.param(params);var cacheKey=JSON.stringify(search);var cached=this._checkCache("facets",cacheKey);if(cached){var d=new $.Deferred;return d.resolve(cached)}var promise=fetch("/lens/search/facets?"+search);return promise.then(function(d){return d.json()}).then(function(res){_this3._updateCache("facets",cacheKey,res.facets);return res.facets})}},{key:"get",value:function get(id){}}]);return PatentService}(EventEmitter);_app2.default.service("PatentService",PatentService);module.exports=PatentService},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.service("QueryResource",["$resource",function($resource){return $resource("/lens/api/search-request/:searchId/query",{searchId:"@id"})}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.service("SavedQueryResource",["$resource",function($resource){return $resource("/lens/service/query/:queryId",{queryId:"@id"})}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);var _get2=__webpack_require__(4);var _get3=_interopRequireDefault(_get2);var _set2=__webpack_require__(104);var _set3=_interopRequireDefault(_set2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ENDPOINT="/lens/service/user/preferences";var LocalStorageService=__webpack_require__(7);var storage=new LocalStorageService;var storageKey="user-settings";var DEFAULT={beta:false,fontSize:100};_app2.default.service("SettingsService",["$q","$http",function($q,$http){var _fetching=null;var local=function local(){return storage.get(storageKey)};var get=function get(path){return fetch().then(function(d){return(0,_get3.default)(d,path)})};var set=function set(path,value){return fetch().then(function(d){(0,_set3.default)(d,path,value);update(d)})};var fetch=function fetch(){if(_fetching){return _fetching}_fetching=$http({url:ENDPOINT,method:"GET"}).then(function(response){_fetching=null;return response.data||_.clone(DEFAULT)});return _fetching};var update=function update(data){storage.set(storageKey,data);return $http({url:ENDPOINT,method:"POST",data:data}).then(function(response){return response.data})};return{local:local,fetch:fetch,update:update,get:get,set:set}}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.service("SharedObjectService",Map)},function(module,exports,__webpack_require__){"use strict";module.exports={Patent:__webpack_require__(689),Results:__webpack_require__(692),Workspace:__webpack_require__(694),AdvancedSearchView:__webpack_require__(297),StructuredSearchView:__webpack_require__(297),StructuredSearchRowView:__webpack_require__(298),EditDialogView:__webpack_require__(109),ExportDialogView:__webpack_require__(151),DialogView:__webpack_require__(26),PatSeqEmbedView:__webpack_require__(707),TagsInputView:__webpack_require__(209),TagsListView:__webpack_require__(708)}},function(module,exports,__webpack_require__){"use strict";module.exports={TimelineView:__webpack_require__(690),SequencePageView:__webpack_require__(691)}},function(module,exports,__webpack_require__){"use strict";var Timeline=window.Timeline;module.exports=Backbone.View.extend({el:"#familyTimelineContainer",_monkeyPatch:function _monkeyPatch(){if(Timeline.CAMBIA_HACK)return;var mp=function mp(orig_fn){return function(){arguments[1]="";return orig_fn.apply(this,arguments)}};Timeline.OriginalEventPainter.prototype._paintEventLabel=mp(Timeline.OriginalEventPainter.prototype._paintEventLabel);Timeline.GregorianDateLabeller.prototype.labelPrecise=function(date){return $.datepicker.formatDate("M d, yy",date)};window.SimileAjax.History.enabled=false;Timeline.CAMBIA_HACK=true},initialize:function initialize(timelineData){this._monkeyPatch();var eventSource=new Timeline.DefaultEventSource;var theme=this.createTheme(timelineData.windowStart,timelineData.windowEnd);var bandInfos=this.createBandInfos(theme,eventSource,timelineData.windowCenter);var timeline=Timeline.create(this.$el[0],bandInfos,Timeline.HORIZONTAL);timeline.showLoadingMessage();eventSource.loadJSON({dateTimeFormat:"iso8601",events:timelineData.events},document.location.href);timeline.hideLoadingMessage();$(window).on("resize",_.debounce(function(){timeline.layout()},500))},createTheme:function createTheme(windowStart,windowEnd){var theme=Timeline.ClassicTheme.create();theme.autoWidth=true;theme.autoWidthMargin=10;theme.mouseWheel="default";theme.event.bubble.width=220;theme.event.bubble.height=10;theme.ether.backgroundColors=["#E6E6E6","#F7F7F7"];theme.timeline_start=window.SimileAjax.DateTime.parseIso8601DateTime(windowStart);theme.timeline_stop=window.SimileAjax.DateTime.parseIso8601DateTime(windowEnd);theme.event.tape.height=6;theme.event.track.height=theme.event.tape.height+6;return theme},createBandInfos:function createBandInfos(theme,eventSource,windowCenter){var centerDate=window.SimileAjax.DateTime.parseIso8601DateTime(windowCenter);var bandInfos=[Timeline.createBandInfo({layout:"original",eventSource:eventSource,date:centerDate,width:100,intervalUnit:Timeline.DateTime.YEAR,intervalPixels:100,trackHeight:2,theme:theme,zoomIndex:2,zoomSteps:[{pixelsPerInterval:100,unit:Timeline.DateTime.WEEK},{pixelsPerInterval:100,unit:Timeline.DateTime.MONTH},{pixelsPerInterval:100,unit:Timeline.DateTime.YEAR}]}),Timeline.createBandInfo({layout:"overview",date:centerDate,trackHeight:.5,trackGap:.2,eventSource:eventSource,width:50,intervalUnit:Timeline.DateTime.YEAR,intervalPixels:100,theme:theme})];bandInfos[1].highlight=true;bandInfos[1].syncWith=0;bandInfos[1].decorators=[new Timeline.SpanHighlightDecorator({startDate:theme.timeline_start,endDate:theme.timeline_stop,inFront:false,color:"#FFC080",opacity:30,startLabel:"",endLabel:"",theme:theme})];return bandInfos}})},function(module,exports,__webpack_require__){"use strict";var _clipboardPolyfill=__webpack_require__(118);var _clipboardPolyfill2=_interopRequireDefault(_clipboardPolyfill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notification=__webpack_require__(10);var notification=new Notification;var Tooltip=__webpack_require__(140);module.exports=Backbone.View.extend({el:"#sequences",initialize:function initialize(opts){if(!this.$el.length)return;this.patentKey=opts.patentKey||"";this.seqListPubKey=opts.seqListPubKey||"";_.extend(this,opts);new SequenceTabFilters({seqListPubKey:this.seqListPubKey});this.initDownloadLinks();this.initHomologyTooltips();this.initDataSourceTooltips()},initDataSourceTooltips:function initDataSourceTooltips(){this.$(".datasources span").each(function(index){var sourceSpan=this;Tooltip({target:this,tooltipPosition:"bottomfit",type:"local",content:function content(){var el=$(sourceSpan);if(el.data("entrydate")){return"published on "+el.data("entrydate")}return null}})})},initDownloadLinks:function initDownloadLinks(){var _this=this;this.$(".download").click(function(){var url="/lens/patent/"+_this.patentKey+"/sequences/download";var sequenceType=$(this).data("seqtype");var downloadForm=$("#filterForm").clone().hide().attr("id","downloadForm");downloadForm.find('input[name="t"]').val([sequenceType]);downloadForm.attr("action",url);console.log("Download FASTA for ",sequenceType,downloadForm.serializeObject());$("body").remove("#downloadForm").append(downloadForm);downloadForm.submit()})},initHomologyTooltips:function initHomologyTooltips(){window.initTooltips(this.$el);var that=this;var $homologyhits=this.$("ul.homologyhits");$homologyhits.each(function(i,el){that.hideMaxListItems(el,{moreText:"more... ([COUNT])",lessText:"less..."})});$homologyhits.show()},hideMaxListItems:function hideMaxListItems(el,options){var defaults={max:3,speed:300,moreText:"READ MORE ([COUNT])",lessText:"READ LESS",moreHTML:'<p class="maxlist-more" style="margin-top: -10px"><a href="#"></a></p>'};options=$.extend(defaults,options);var op=options;var totalListItems=$(el).children("li").length;var speedPerLI;if(totalListItems>0&&op.speed>0){speedPerLI=Math.round(op.speed/totalListItems);if(speedPerLI<1){speedPerLI=1}}else{speedPerLI=0}if(totalListItems>0&&totalListItems>op.max){$(el).children("li").each(function(index){if(index+1>op.max){$(this).hide(0);$(this).addClass("maxlist-hidden")}});var howManyMore=totalListItems-op.max;var newMoreText=op.moreText;var newLessText=op.lessText;if(howManyMore>0){newMoreText=newMoreText.replace("[COUNT]",howManyMore);newLessText=newLessText.replace("[COUNT]",howManyMore)}$(el).after(op.moreHTML);$(el).next(".maxlist-more").children("a").text(newMoreText);$(el).next(".maxlist-more").children("a").click(function(e){var listElements=$(this).parent().prev("ul, ol").children("li");listElements=listElements.slice(op.max);var text=$(this).text();$(this).text(text===newLessText?newMoreText:newLessText);listElements.slideToggle();e.preventDefault()})}}});var SequenceTabFilters=Backbone.View.extend({el:"#filterForm",events:{submit:"onSubmit","click .clearFilter":"clear"},initialize:function initialize(opts){if(!this.$el.length)return;this.seqListPubKey=opts.seqListPubKey||"";_.extend(this,opts);var allowed=[];_.each(this.$("input"),function(x){var attr=$(x).attr("name");if(attr){allowed.push(attr)}});_.each(this.$("select"),function(x){var attr=$(x).attr("name");if(attr){allowed.push(attr)}});var unmanaged={};_.each($.deparam.querystring(),function(v,k){if(!_.contains(allowed,k)){unmanaged[k]=v}});this.unmanaged=unmanaged;new SequenceTabSpeciesFilterAutocompleteView({el:this.$("#sequencetab_species_autocomplete_text"),seqListPubKey:this.seqListPubKey,limit:10,form:this})},onSubmit:function onSubmit(e){e.preventDefault();this._process(this._cloneForm())},clear:function clear(e){e.preventDefault();var $clonedForm=this._cloneForm();_.each($("input"),function(x){var $x=$(x);var name=$x.attr("name");_.each($clonedForm.find('input[name="'+name+'"]'),function(x){$(x).attr("disabled","disabled")})});$("input:checked").prop("checked",false);$('input[type="text"]').val("");this._process($clonedForm)},_process:function _process($clonedForm){_.each($clonedForm.find("input"),function(x){var $x=$(x);if($.trim($x.prop("value"))===""){$x.attr("disabled","disabled")}});$("body").remove("#clonedForm").append($clonedForm);this.unmanaged["p"]=0;_.each(this.unmanaged,function(v,k){$clonedForm.append("<input name='"+k+"' value='"+v+"' />")});$clonedForm.submit()},_cloneForm:function _cloneForm(){return $(this.$el.clone()).hide().attr("id","clonedForm")}});var SequenceTabSpeciesFilterAutocompleteView=Backbone.View.extend({initialize:function initialize(opts){var cache={};var form=opts.form;$(opts.el).autocomplete({autoFocus:true,search:function search(){$(this).addClass("working")},open:function open(){$(this).removeClass("working")},minLength:0,source:function source(request,response){var term=request.term;if(term in cache){response(cache[term]);return}var lastXhr=$.getJSON("/lens/service/sequence/autocomplete",{query:term,pubkey:opts.seqListPubKey,limit:opts.limit},function(data,status,xhr){var organisms=_.map(data.organisms,function(value,key,list){return{label:key+" ("+value+")",value:key}});cache[term]=organisms;if(xhr===lastXhr){response(organisms)}})},change:function change(event,ui){if(!ui.item){$(this).val("")}},select:function select(event,ui){$(this).val(ui.item.value);form.el.submit()}})}});window.SequenceDetailView=Backbone.View.extend({el:"#sequenceDetails",events:{"click #copyFasta":"copyText"},initialize:function initialize(){this.$(".tab-container").cleanTabs({afterActivate:function afterActivate(){}})},copyText:function copyText(){var text=$("#fastaBody").html().replace(/\s+/g,"");_clipboardPolyfill2.default.writeText(text);var message=messages.prop("patent.sequenceDisplay.FASTA.copied");notification.notify(message)}})},function(module,exports,__webpack_require__){"use strict";module.exports={EmbedView:__webpack_require__(693),FacetsView:__webpack_require__(203),FacetsLoadingView:__webpack_require__(292),InventorshipLinkView:__webpack_require__(291),ResultRowView:__webpack_require__(290),SearchFormView:__webpack_require__(206),SearchPageView:__webpack_require__(288),TableTabView:__webpack_require__(289)}},function(module,exports,__webpack_require__){"use strict";var EmbedModel=Backbone.Model.extend({});module.exports=Backbone.View.extend({temp:window.Handlebars.compile('<iframe src="{{{path}}}/embed?facet={{facet}}&type={{type}}&title={{title}}&{{{params}}}" width="{{width}}px" height="{{height}}px" frameborder=0></iframe>'),el:"#embedControls",events:{"click .embedToggle":"toggle","change input":"change","keyup input":"change"},initialize:function initialize(location,canonicalUrl){location=location||window.location;_.bindAll(this,"reRender","toggle");this.model=new EmbedModel;if(!location.origin){location.origin=location.protocol+"//"+location.host}this.path=location.origin+canonicalUrl;this.params=location.search.substr(1);this.model.bind("change",this.reRender);$.vent.on("embed/toggle",this.toggle)},remove:function remove(){$.vent.off("embed/toggle",this.toggle);this.stopListening();this.model.destroy()},reInit:function reInit(opts){this.model.set(opts)},reRender:function reRender(){this.$(".embedHeight").val(this.model.get("height"));this.$(".embedWidth").val(this.model.get("width"));this.$(".embedTitle").val(this.model.get("title"));this.$(".embedText").text(this.buildIframe())},buildIframe:function buildIframe(){return this.temp(_.extend(this.model.toJSON(),{path:this.path,params:this.params}))},change:function change(){this.model.set({title:this.$(".embedTitle").val(),height:this.$(".embedHeight").val(),width:this.$(".embedWidth").val()})},toggle:function toggle(){this.$el.toggle()},hide:function hide(){this.$el.hide()}})},function(module,exports,__webpack_require__){"use strict";module.exports={HistoryView:__webpack_require__(695),LinkedIdentitiesView:__webpack_require__(697),RegistrationView:__webpack_require__(698),SavedQueriesView:__webpack_require__(699),SavedQueryControlsView:__webpack_require__(293),SubscriptionRequestView:__webpack_require__(296),UserBlasts:__webpack_require__(701),UserSubscriptions:__webpack_require__(702),UserTableView:__webpack_require__(110),UserTags:__webpack_require__(703),OAuthRegistrationView:__webpack_require__(704),PasswordInputView:__webpack_require__(210),ProfileView:__webpack_require__(705),PublishModelFn:__webpack_require__(211),PatCiteHistoryView:__webpack_require__(706)}},function(module,exports,__webpack_require__){"use strict";var SavedQuery=__webpack_require__(63);var DialogView=__webpack_require__(26);var EditDialog=__webpack_require__(109);var deleteTemplate=window.Handlebars.compile(__webpack_require__(295));var deleteWithSavedQueryTemplate=window.Handlebars.compile(__webpack_require__(696));module.exports=Backbone.View.extend({el:$("#userContent"),events:{"submit .filter-form":"submitFilter","keyup .filter-form input":"filter","click .fa-search":"submitFilter","click #clearFilter":"clearFilter","click #expand":"expandAll","click #contract":"contractAll","click .saveQuery":"saveQuery","click .delete-all":"deleteAllHistory","click .delete-item":"deleteHistoryItem"},initialize:function initialize(){},submitFilter:function submitFilter(e){e.preventDefault();this.filter();return false},filter:function filter(){var term=this.$("#filter").val().toLowerCase();this.$(".div-table-body .div-table-row").removeClass("hidden");this.$('.div-table-body .div-table-row:not(:Contains("'+term+'"))').addClass("hidden");this.filterNotification()},filterNotification:function filterNotification(){this.$("#filteredRow").remove();var c=this.$(".div-table-row.hidden").length;if(c>0){this.$("#listTable").after(ich["filteredTemplate"]({count:c}))}},clearFilter:function clearFilter(){this.$("#filter").val("");this.filter()},saveQuery:function saveQuery(e){var $target=$(e.currentTarget);window.tt=$target;e.preventDefault();var defaultTitle=$target.parents(".div-table-row").find(".description").text().trim();new EditDialog({title:messages.prop("user.queries.createNew"),onApply:function onApply(event,$dialog){new SavedQuery({title:$dialog.find("#title").val(),description:$dialog.find("#text").val(),uri:$target.parents(".div-table-cell").attr("data-uri"),queryText:$target.parents(".div-table-row").find(".description").html().trim()}).save().then(function(){location.reload()},function(xhr,status,error){$.jGrowl("An error occurred saving your query",{theme:"jGrowl-error"})})}}).render(ich["editTemplate"]({title:defaultTitle}),".redactor_editor")},deleteAllHistory:function deleteAllHistory(e){e.preventDefault();new DialogView({title:messages.prop("user.history.deleteAll.title"),width:400,noButton:{text:messages.prop("common.action.delete"),onClick:function onClick(){$.ajax({method:"DELETE",url:"/lens/api/user/work-area/history"}).done(function(){window.location="/lens/user/history"}).fail(function(){$.jGrowl(messages.prop("user.history.delete.error"),{theme:"jGrowl-error"})})}},otherButtons:[{text:messages.prop("common.action.cancel")}]}).render(deleteTemplate())},deleteHistoryItem:function deleteHistoryItem(e){var $target=$(e.currentTarget);var itemId=$target.closest(".div-table-row").data("history-id");e.preventDefault();var withSavedQuery=$target.closest(".div-table-cell").find('[data-with-saved-query="true"]').length;var templateToUse=withSavedQuery?deleteWithSavedQueryTemplate():deleteTemplate();new DialogView({title:messages.prop("user.history.deleteItem.title"),width:400,noButton:{text:messages.prop("common.action.delete"),onClick:function onClick(){$.ajax({method:"DELETE",url:"/lens/api/user/work-area/history/"+itemId}).done(function(){window.location="/lens/user/history"}).fail(function(){$.jGrowl(messages.prop("user.history.delete.error"),{theme:"jGrowl-error"})})}},otherButtons:[{text:messages.prop("common.action.cancel")}]}).render(templateToUse)}})},function(module,exports){module.exports="<div>\n    <p>{{message 'user.history.deleteItem.withSavedQuery'}}</p>\n    <div class=\"alert alert-danger\">{{{message 'common.alert.deletion'}}}</div>\n</div>\n"},function(module,exports,__webpack_require__){"use strict";var DialogView=__webpack_require__(26);var Notification=__webpack_require__(10);var notification=new Notification;var LinkedIdentities=function(){var availableServices={LINKEDIN:"LinkedIn",ORCID:"ORCID"};var LinkedIdentitiesApp=Backbone.View.extend({el:"#userContent #identities",initialize:function initialize(opts){this.opts=opts||{};this.views=[];this.identities=new Identities;this.refresh()},refresh:function refresh(){var self=this;this.identities.fetch().done(function(){self.createUnlinkedModels();self.render()})},render:function render(){this.destroyViews();this.views=this.identities.map(this.createView,this);this.$el.append(_.map(this.views,this.renderView,this))},createView:function createView(model){var identityView=new IdentityView({model:model,parent:this});model.on("remove",identityView.remove,identityView);return identityView},renderView:function renderView(view){return view.render().el},destroyViews:function destroyViews(){this.$el.empty();this.views.length=0},createUnlinkedModels:function createUnlinkedModels(){var self=this;var linkedServices=this.identities.map(function(i){return i.get("provider")});var unlinkedServices=_.difference(Object.keys(availableServices),linkedServices);unlinkedServices.forEach(function(service){self.createFakeModel(service)})},createFakeModel:function createFakeModel(provider){var model=new Identity({provider:provider,neverLinked:true});model.collection=this.identities;this.identities.push(model);return model}});var IdentityView=Backbone.View.extend({initialize:function initialize(options){_.extend(this,options)},events:{"click .relink":"linkService","click .remove":"removeService","click .link":"linkService","change .publish-identity":"publishIdentity","click .import-picture":"importPicture"},translateServiceCode:function translateServiceCode(code){return availableServices[code]},render:function render(){var className=this.model.get("neverlinked")?"neverlinked":this.model.get("active")?"active":"inactive";this.setElement("<li></li>");this.$el.addClass(this.model.get("provider")).addClass(className);var username=this.model.get("provider")!=="ORCID"&&this.model.get("email")?this.model.get("email"):this.model.get("providerUserId");var extendedAttributes={providerHuman:this.translateServiceCode(this.model.get("provider")),username:username,lastUsed:this.model.get("lastUsed")?this.model.get("lastUsed")/1e3:null};this.$el.html(ich["identity-provider-service-template"](_.extend(this.model.toJSON(),extendedAttributes)));return this},linkService:function linkService(e){e.preventDefault();var provider=this.model.get("provider");$.oauthpopup({path:"/lens/oauth/"+provider.toLowerCase(),tryResize:false,callback:function callback(){LinkedIdentities.init()}});return false},publishIdentity:function publishIdentity(e){this.model.set({published:this.$el.find(".publish-identity").is(":checked")});this.model.save()},importPicture:function importPicture(e){var provider=this.model.get("provider");$.ajax("/lens/service/user/profile/picture/from-linked-profile",{method:"POST",data:{provider:provider},success:function success(){notification.success(window.messages.prop("user.linkedServices.importProfilePicture.success"));window.location.search="updated=true"},error:function error(request,status,_error){notification.error("Error importing profile picture")}})},removeService:function removeService(e){e.preventDefault();var provider=this.translateServiceCode(this.model.get("provider"));var that=this;new DialogView({title:"Are you sure you want to remove "+provider+" ?",width:400,yesButton:{text:"I understand, remove this service",onClick:function onClick(){var d=new $.Deferred;that.model.destroy({wait:true,error:function error(model,response){$.jGrowl("Cannot remove linked service.",{theme:"jGrowl-error"})},success:function success(model,response,options){that.parent.refresh();LinkedIdentities.init()}});d.resolve()}},noButton:{text:messages.prop("common.action.cancel")}}).render(ich["deleteTemplate"](this.model.toJSON()))}});var Identity=Backbone.Model.extend({});var Identities=Backbone.Collection.extend({model:Identity,url:"/lens/service/identity"});return{init:function init(opts){return new LinkedIdentitiesApp(opts)}}}();module.exports=LinkedIdentities},function(module,exports,__webpack_require__){"use strict";var PasswordInputView=__webpack_require__(210);module.exports=Backbone.View.extend({el:"#registration_form",events:{submit:"validate"},initialize:function initialize(){this.passwordInputView=new PasswordInputView({el:$("#passwordContainer")})},validate:function validate(){this.$(".formWarning").hide();if(!$("#actualTerms:checked").length){this.$(".termsAgreeWarning").show();return false}return true}})},function(module,exports,__webpack_require__){"use strict";var SavedQueryView=__webpack_require__(700);var UserTableView=__webpack_require__(110);var SavedQueryCollection=__webpack_require__(213);module.exports=Backbone.View.extend({el:"#userContent",initialize:function initialize(){new UserTableView({el:this.el,collection:new SavedQueryCollection,viewConstructor:SavedQueryView})}})},function(module,exports,__webpack_require__){"use strict";var DialogView=__webpack_require__(26);var EditDialog=__webpack_require__(109);var TagsInputView=__webpack_require__(209);var editSavedQueryTemplate=window.Handlebars.compile(__webpack_require__(294));module.exports=Backbone.View.extend({el:'<div class="div-table-row"></div>',events:{"click a":"close","click .delete":"doDelete","click .edit":"doEdit"},initialize:function initialize(){this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"change:hidden",this.onHiddenChange);$.vent.on("filters/apply",function(opts){if(opts.tags){window.location="/lens/search?tags="+opts.tags}})},onHiddenChange:function onHiddenChange(){this.$el.toggleClass("hidden",this.model.get("hidden")===true)},render:function render(){this.$el.html(ich["rowTemplate"](this.model.toJSON()));new TagsInputView({el:this.$(".tags"),model:this.model,render:true});window.initTooltips(this.$el);this.onHiddenChange();return this},doDelete:function doDelete(e){e.preventDefault();var that=this;new DialogView({title:"Delete Your Saved Query?",width:400,yesButton:{text:"Delete",onClick:function onClick(){var d=new $.Deferred;that.model.destroy();d.resolve()}},noButton:{text:messages.prop("common.action.cancel")}}).render(ich["deleteTemplate"](this.model.toJSON()))},doEdit:function doEdit(e){e.preventDefault();var that=this;var d=_.clone(this.model.toJSON());d.isAnon=window.UI_CONFIG.isAnon;new EditDialog({title:messages.prop("common.editTitleAndDescription"),onApply:function onApply(event,$dialog){var data={title:$dialog.find("#title").val(),description:$dialog.find("#text").val(),notificationsEnabled:$dialog.find("#notificationsEnabled").prop("checked")};return that.model.save(data)}}).render(editSavedQueryTemplate(d))}})},function(module,exports,__webpack_require__){"use strict";var PublishModelFn=__webpack_require__(211);var DialogView=__webpack_require__(26);var UserTableView=__webpack_require__(110);module.exports=function(){var Blast=Backbone.Model.extend({url:function url(){if(this.isNew())return"/lens/service/blast";return"/lens/service/blast/"+this.id},publish:function publish(_publish){_publish=_publish||false;var that=this;return $.ajax({type:"GET",url:this.url()+"/publish/"+_publish}).done(function(data){that.set("published",data.published)})}});var Blasts=Backbone.Collection.extend({model:Blast,comparator:function comparator(model){return-model.get("updated")},initialize:function initialize(){},url:function url(){return"/lens/service/blast"}});var BlastsView=Backbone.View.extend({el:"#userContent",events:{"click #clearFilter":"clearFilter","click .delete-all":"doDeleteAll"},collection:new Blasts,initialize:function initialize(){var blasts=this.collection;var $deleteAll=this.$("a.delete-all");new UserTableView({el:this.el,collection:blasts,viewConstructor:BlastView});blasts.on("sync remove reset",function(){$deleteAll.toggle(blasts.length>0)})},doDeleteAll:function doDeleteAll(e){e.preventDefault();var blasts=this.collection;new DialogView({title:messages.prop("user.blast.deleteAll.title"),width:400,noButton:{text:messages.prop("common.action.delete"),onClick:function onClick(){$.ajax({method:"DELETE",url:"/lens/service/blast"}).done(function(){blasts.reset()}).fail(function(){$.jGrowl(messages.prop("user.blast.delete.error"),{theme:"jGrowl-error"})})}},otherButtons:[{text:messages.prop("common.action.cancel")}]}).render(ich["deleteTemplate"]())}});var BlastView=Backbone.View.extend({el:'<div class="div-table-row"></div>',events:{"click .delete":"doDelete","click .share":"doPublish"},initialize:function initialize(){this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"change",this.render)},render:function render(){this.$el.html(ich["rowTemplate"](this.model.toJSON()));this.$el.toggleClass("hidden",this.model.get("hidden")===true);window.initTooltips(this.$el);return this},doDelete:function doDelete(e){e.preventDefault();var that=this;new DialogView({title:"Delete Your PatSeq Finder Query?",width:400,noButton:{text:"Delete",onClick:function onClick(){var d=new $.Deferred;that.model.destroy();d.resolve()}},otherButtons:[{text:messages.prop("common.action.cancel")}]}).render(ich["deleteTemplate"](this.model.toJSON()))},doPublish:function doPublish(e){e.preventDefault();PublishModelFn({published:this.model.get("published"),uri:"biological_search/search/"+this.model.get("uid"),title:'Sharing Settings for "'+this.model.get("uid")+'"',model:this.model})}});return{init:function init(){new BlastsView}}}()},function(module,exports,__webpack_require__){"use strict";var SubscriptionRequestView=__webpack_require__(296);var UserTableView=__webpack_require__(110);var DialogView=__webpack_require__(26);module.exports=function(){var availableProducts={PATSEQ_BULKDOWNLOADS:"PatSeq Bulk Download"};var mixins={translateProductCode:function translateProductCode(code){return availableProducts[code]}};_.extend(Backbone.View.prototype,mixins);var SubscriptionApp=Backbone.View.extend({el:"#userContent #downloads",initialize:function initialize(opts){this.opts=opts||{};var self=this;this.subscriptions=new Subscriptions;this.subscriptions.fetch().done(function(){self.render()})},render:function render(){var self=this;var availableSubscriptions=Object.keys(availableProducts);var subscribedProducts=[];if(this.opts.empty){self.$el.empty()}this.subscriptions.each(function(s){var childView=void 0;if(s.get("active")){childView=new SubscriptionView(s.get("product"),s);self.$el.append(childView.render().el)}else{childView=new SubscriptionTeaserView(s.get("product"),s);self.$el.append(childView.render().el)}subscribedProducts.push(s.get("product"))});var unsubscribedProducts=_.difference(availableSubscriptions,subscribedProducts);unsubscribedProducts.forEach(function(product){var childView=new SubscriptionTeaserView(product);self.$el.append(childView.render().el)})}});var SubscriptionTeaserView=Backbone.View.extend({initialize:function initialize(product,inactiveSubscription){this.product=product;if(inactiveSubscription){this.alreadyRequested=inactiveSubscription.get("status")==="REQUESTED";this.pendingSubscription=inactiveSubscription}},events:{"click .pending-btn":"loadProcessingNote","click .request-btn":"loadRequestWizard"},render:function render(){this.$el.html(ich[this.product+"-teaser"]({requested:this.alreadyRequested}));return this},loadRequestWizard:function loadRequestWizard(e){e.preventDefault();var requestView=new SubscriptionRequestView(this.product);requestView.render()},loadProcessingNote:function loadProcessingNote(e){e.preventDefault();$.fancybox({content:ich[this.product+"-pendingNote"](_.extend(this.pendingSubscription.toJSON(),{productHuman:this.translateProductCode(this.product)})),title:"We're processing your request."})}});var SubscriptionView=Backbone.View.extend({initialize:function initialize(product,model){this.product=product;this.model=model},events:{"click .request-btn":"loadRequestWizard"},render:function render(){this.$el.html(ich[this.product+"-normal"](this.model.toJSON()));var tokens=new Tokens([],{subscription:this.model});this.tokensView=new TokensView({el:this.$(".tokens"),collection:tokens});return this},loadRequestWizard:function loadRequestWizard(e){e.preventDefault();var requestView=new SubscriptionRequestView(this.product);requestView.render()}});var Subscription=Backbone.Model.extend({});var Subscriptions=Backbone.Collection.extend({model:Subscription,url:"/lens/service/subscription"});var TokensView=Backbone.View.extend({events:{"click #clearFilter":"clearFilter","click #addNewToken":"addNewToken"},initialize:function initialize(opts){this.utv=new UserTableView({el:$(opts.el),collection:opts.collection,viewConstructor:TokenView})},addNewToken:function addNewToken(e){e.preventDefault();var that=this;new TokenEditDialog({title:"Create a new access token",onApply:function onApply(event,$dialog){return that.utv.collection.create({description:$dialog.find("#description").val()},{wait:true,error:function error(){$.jGrowl("An error occurred creating new access token",{theme:"jGrowl-error"})}})}}).render(ich["editTokenTemplate"](),"#title")}});var Token=Backbone.Model.extend({});var Tokens=Backbone.Collection.extend({model:Token,initialize:function initialize(models,options){this.subscription=options.subscription},url:function url(){return"/lens/service/subscription/"+this.subscription.id+"/token"}});var TokenView=Backbone.View.extend({el:"<tr></tr>",events:{"click .delete":"doDelete","click .share":"doPublish","click .edit":"doEdit"},initialize:function initialize(){this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"change",this.render)},render:function render(){if(!this.model.get("isTruncated")){this.$el.html(ich["rowTemplateNewToken"](this.model.toJSON()));this.$el.addClass("new-entry")}else{this.$el.html(ich["rowTemplate"](this.model.toJSON()))}return this},doDelete:function doDelete(e){e.preventDefault();var that=this;new DialogView({title:"Are you sure you want to delete this token?",width:400,yesButton:{text:"I understand, delete this token",onClick:function onClick(){var d=new $.Deferred;that.model.destroy();d.resolve()}},noButton:{text:messages.prop("common.action.cancel")}}).render(ich["deleteTemplate"](this.model.toJSON()))},doEdit:function doEdit(e){e.preventDefault();var that=this;new TokenEditDialog({title:"Edit access token description",onApply:function onApply(event,$dialog){return that.model.save({description:$dialog.find("#description").val()})}}).render(ich["editTokenTemplate"](this.model.toJSON()))}});var TokenEditDialog=Backbone.View.extend({defaults:{maxWidth:1200,maxHeight:800,minWidth:300,fitToView:true,closeClick:false,openEffect:"none",closeEffect:"none"},initialize:function initialize(opts){this.dialogOpts=_.extend({},this.defaults,opts)},render:function render(content,focusOn){var onApply=this.dialogOpts.onApply;var validate=function validate($dialog){return true};var beforeShow=function beforeShow(){var $dialog=$(this.inner);$dialog.find(".apply").text(messages.prop("common.action.save")).show().on("click",function(e){if(validate($dialog)){$.when(onApply(e,$dialog)).done($.fancybox.close)}});$dialog.find(".cancel").text(messages.prop("common.action.cancel")).show().on("click",function(){$.fancybox.close()});$dialog.on("keydown",function(e){if(e.which===$.ui.keyCode.ESCAPE){$.fancybox.close()}});if(focusOn){setTimeout(function(){$dialog.find(focusOn).focus()},0)}};$.fancybox(_.extend({},this.dialogOpts,{beforeShow:beforeShow,content:ich["fancyboxTemplate"]({content:$("<div></div>").append($(content)).html(),title:this.dialogOpts.title}),title:undefined}))},remove:function remove(){}});return{init:function init(opts){return new SubscriptionApp(opts)}}}()},function(module,exports,__webpack_require__){"use strict";var DialogView=__webpack_require__(26);module.exports=function(){var TagsView=Backbone.View.extend({el:"#userContent",events:{"submit .filter-form":"submitFilter","keyup .filter-form input":"filter","click #clearFilter":"clearFilter"},initialize:function initialize(opts){this.collection=new TagsCollection;_.bindAll(this,"addOne");this.render=_.debounce(this._render,10);this.listenTo(this.collection,"add",this.render);this.collection.on("remove",this.emptyChecker,this);var that=this;this.collection.fetch().done(function(){that.$("#loadingRow").remove();that.emptyChecker()})},_render:function _render(){this.$("#listTable .div-table-body").empty();this.collection.each(this.addOne)},submitFilter:function submitFilter(e){e.preventDefault();this.filter();return false},filter:function filter(){var term=this.$("#filter").val().toLowerCase();document.location.hash="#filter="+term;this.collection.each(function(item){var serialised=item.values().join(" ").toLowerCase();item.set("hidden",term&&serialised.indexOf(term)<0)});this.filterNotification()},filterNotification:function filterNotification(){$("#filteredRow").remove();var c=this.$(".div-table-row.hidden").length;if(c>0){this.$("#listTable").after(ich["filteredTemplate"]({count:c}))}},clearFilter:function clearFilter(){this.$("#filter").val("");this.filter()},emptyChecker:function emptyChecker(){if(this.collection.isEmpty()){this.$(".div-table").after(ich["emptyTemplate"]())}},addOne:function addOne(model,i){this.$("#missingRow").remove();var view=new TagRowView({model:model}).render();this.$(".div-table-body").append(view.$el);model.on("remove",view.remove,view)}});var TagRowView=Backbone.View.extend({el:'<div class="div-table-row"></div>',events:{"click .rename":"doRename","click .delete":"doDelete"},initialize:function initialize(){this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"change:hidden",this.onHiddenChange)},onHiddenChange:function onHiddenChange(){this.$el.toggleClass("hidden",this.model.get("hidden")===true)},render:function render(){this.$el.html(ich["rowTemplate"](this.model.toJSON()));window.initTooltips(this.$el);return this},doRename:function doRename(e){e.preventDefault();var that=this;new DialogView({title:"Renaming Tag",width:400,yesButton:{text:"Rename",onClick:function onClick(event,$dialog){that.model.rename($dialog.find(".tagRename").val()).then(function(x){that.model.set(x)})},validate:function validate(event,$dialog){var x=$dialog.find(".tagRename").val();var b=!x.match(/[^\d\w]/g);if(!b){$dialog.find(".error").show()}return b}},noButton:{text:messages.prop("common.action.cancel")}}).render(ich["renameTemplate"](this.model.toJSON()))},doDelete:function doDelete(e){e.preventDefault();var that=this;new DialogView({title:"Deleting Tag",width:400,yesButton:{text:"Delete",onClick:function onClick(){var d=new $.Deferred;that.model.destroy();d.resolve()}},noButton:{text:messages.prop("common.action.cancel")}}).render(ich["deleteTemplate"](this.model.toJSON()))}});var TagCountModel=Backbone.Model.extend({isNew:function isNew(){return false},comparator:function comparator(x){return-x.get("lastCreated")},url:function url(){if(_.isUndefined(this.get("tag")))throw Error("Need a tag");return"/lens/service/tag/"+this.get("tag")},rename:function rename(newTag){if(_.isUndefined(this.get("tag")))throw Error("Don't rename without saving!");return $.ajax({type:"POST",url:this.url(),data:"newTag="+newTag})}});var TagsCollection=Backbone.Collection.extend({url:"/lens/service/tag",model:TagCountModel,comparator:function comparator(model){return-model.get("lastCreated")}});return{initPage:function initPage(){new TagsView}}}()},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({el:"#registration_form",events:{submit:"validate","click a.duplicateRegistration":"linkAccountLogin"},initialize:function initialize(options){this.options=options},validate:function validate(){this.$(".formWarning").hide();return true},linkAccountLogin:function linkAccountLogin(e){e.preventDefault();var user=$(e.target).parent().next().val();var url="/lens/oauth/registration/login?state="+this.options.state+"&u="+encodeURIComponent(user);window.location.href=url}})},function(module,exports,__webpack_require__){"use strict";var PasswordInputView=__webpack_require__(210);module.exports=Backbone.View.extend({el:"#profile_form",events:{submit:"validate"},initialize:function initialize(){this.piv=new PasswordInputView({el:$("#passwordContainer")})},validate:function validate(){this.$(".formWarning").hide();return $("#oldPassword").val().length===0||this.piv.validate()}})},function(module,exports,__webpack_require__){"use strict";var PublishModelFn=__webpack_require__(211);var DialogView=__webpack_require__(26);var EditDialog=__webpack_require__(109);var UserTableView=__webpack_require__(110);var deleteTemplate=window.Handlebars.compile(__webpack_require__(295));module.exports=function(){var PatCiteQuery=Backbone.Model.extend({url:function url(){if(this.isNew())return"/lens/service/patcite-query";return"/lens/service/patcite-query/"+this.id},publish:function publish(_publish){_publish=_publish||false;var that=this;return $.ajax({type:"GET",url:this.url()+"/publish/"+_publish}).done(function(data){that.set("published",data.published)})}});var PatCiteQueries=Backbone.Collection.extend({model:PatCiteQuery,initialize:function initialize(){},comparator:function comparator(pc){return-pc.get("updated")},url:function url(){return"/lens/service/patcite-query"}});var PatCiteHistoryView=Backbone.View.extend({el:"#userContent",events:{"click #clearFilter":"clearFilter","click .delete-all":"doDeleteAll"},collection:new PatCiteQueries,initialize:function initialize(){var history=this.collection;var $deleteAll=this.$("a.delete-all");new UserTableView({el:this.el,collection:history,viewConstructor:PatCiteQueryView});history.on("sync remove reset",function(){$deleteAll.toggle(history.length>0)})},doDeleteAll:function doDeleteAll(e){e.preventDefault();var that=this;new DialogView({title:messages.prop("user.patcite-query.deleteAll.title"),width:400,noButton:{text:messages.prop("common.action.delete"),onClick:function onClick(){$.ajax({method:"DELETE",url:"/lens/service/patcite-query"}).done(function(){that.collection.reset()}).fail(function(){$.jGrowl(messages.prop("user.patcite-query.delete.error"),{theme:"jGrowl-error"})})}},otherButtons:[{text:messages.prop("common.action.cancel")}]}).render(deleteTemplate())}});var PatCiteQueryView=Backbone.View.extend({el:'<div class="div-table-row"></div>',events:{"click .delete":"doDelete","click .edit":"doEdit","click .share":"doPublish"},initialize:function initialize(){this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model,"change",this.render)},render:function render(){this.$el.html(ich["rowTemplate"](this.model.toJSON()));window.initTooltips(this.$el);return this},doDelete:function doDelete(e){e.preventDefault();var that=this;new DialogView({title:"Delete Your PatCite Query?",width:400,noButton:{text:"Delete",onClick:function onClick(){var d=new $.Deferred;that.model.destroy();d.resolve()}},otherButtons:[{text:messages.prop("common.action.cancel")}]}).render(ich["deleteTemplate"](this.model.toJSON()))},doEdit:function doEdit(e){e.preventDefault();var that=this;new EditDialog({title:messages.prop("common.editName"),onApply:function onApply(event,$dialog){return that.model.save({name:$dialog.find("#name").val()})}}).render(ich["patciteEditTemplate"](this.model.toJSON()))},doPublish:function doPublish(e){e.preventDefault();PublishModelFn({published:this.model.get("published"),uri:"patcite?uid="+this.model.get("uid"),title:'Sharing Settings for "'+this.model.get("uid")+'"',model:this.model})}});return{init:function init(){new PatCiteHistoryView}}}()},function(module,exports,__webpack_require__){"use strict";module.exports=Backbone.View.extend({el:".bio-embeds",events:{"keyup input":"update","change input":"update","click .embedToggle":"toggle"},initialize:function initialize(){this.update()},update:function update(){var height=this.$("input.seqembed-height").val();var width=this.$("input.seqembed-width").val();if(width>0&&height>0){this.$(".embedText").html('<iframe width="'+width+'" height="'+height+'" src="'+$("input.shareUrl").val()+'" frameborder="0"></iframe>')}},toggle:function toggle(e){e.preventDefault();this.$(".embedContent").toggle()}})},function(module,exports,__webpack_require__){"use strict";var LoadingSpinner=__webpack_require__(139);module.exports=Backbone.View.extend({initialize:function initialize(opts){_.bindAll(this,"render");this.col=opts.col;this.$el.append(LoadingSpinner.render("small"));var ctx=this;this.col.fetch({success:function success(){ctx.render()},error:function error(){ctx.render()}})},render:function render(){this.$(".spinner").remove();if(this.col.length>0){this.$el.append(ich["tagsList"]({tags:this.col.toJSON()})).show()}else{this.$el.hide()}}})},function(module,exports,__webpack_require__){"use strict";$.vent=_.extend({},Backbone.Events);$.expr[":"].Contains=$.expr.createPseudo(function(arg){return function(elem){return $(elem).text().toUpperCase().indexOf(arg.toUpperCase())>=0}});window.Handlebars.registerHelper("get",function(obj,field){return obj[field]});window.Handlebars.registerHelper("date",function(v){return window.moment(v).format("MMM D, YYYY")});window.Handlebars.registerHelper("message",window.messages.prop);window.Handlebars.registerHelper("ifGT",function(v1,v2,options){if(v1>v2){return options.fn(this)}return options.inverse(this)});window.Handlebars.registerHelper("message_concat",function(){return window.messages.prop(Array.prototype.slice.call(arguments,0,-1).join(""))});window.RedactorSettings={buttons:["formatting","|","bold","italic","|","unorderedlist","orderedlist","|","table","link","|","horizontalrule","alignment"],plugins:["fullscreen"],tabFocus:true};$.datepicker.setDefaults($.extend({changeMonth:true,changeYear:true,dateFormat:"d M yy",showMonthAfterYear:true,showOn:"focus"}));$.cookie("TZ",window.jstz.determine().name(),{path:"/"});$(function(){$(".js-cloak").removeClass("js-cloak");$(".js-cloak-mobile").removeClass("js-cloak-mobile");var Menu=__webpack_require__(286);Menu.init();$("div.expandable ol, div.expandable p").expander({slicePoint:1500,expandPrefix:"…",expandEffect:"fadeIn",expandSpeed:250,collapseEffect:"fadeOut",collapseSpeed:200,preserveWords:true,expandText:"Read More",collapseTimer:0,userCollapseText:"Read Less"})});$(function(){return $("body").removeClass("loading")});$(window).on("beforeunload",function(){$("body").addClass("unloading")})},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.filter("message",function(){return function(k){var tokens=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var message=window.messages.prop(k)||"";return message.replace(/(\{[0-9]\})/g,function(token){var index=token[1];return tokens[index]})}});_app2.default.filter("unsafe",["$sce",function($sce){return $sce.trustAsHtml}]);_app2.default.filter("customNumber",["$filter",function($filter){return function(input,fractionSize){input=input||0;if(!fractionSize&&parseInt(input)!==parseFloat(input)&&fractionSize!==0){fractionSize=1}return $filter("number")(input,fractionSize)}}]);_app2.default.filter("capitalise",function(){return function(s){return s[0].toUpperCase()+s.slice(1)}});_app2.default.filter("titleCase",function(){return function(s){return s.split(" ").map(function(s){return s[0].toUpperCase()+s.slice(1).toLowerCase()}).join(" ")}});_app2.default.filter("simpleList",function(){return function(arr,k){return arr.map(function(d){return k?d[k]:d}).join(", ")}});_app2.default.filter("highlight",function(){return function(s){return s.replace(/\[[\/]*hl\]/g,"")}});_app2.default.filter("truncate",function(){return function(s,length){return s.length<=length?s:s.slice(0,length)+"..."}});_app2.default.filter("collectionType",function(){return function(v){var key=v==="SCHOLARLY_WORK"||v==="SCHOLARLY"?"common.scholar":"common.patents";return window.messages.prop(key)}});_app2.default.filter("collectionUrl",function(){return function(item){var path="/lens/collection/"+item.id;if(item.type==="SCHOLARLY_WORK"){path="/lens/scholar/search/results?collectionId="+item.id}return window.location.origin+path}});_app2.default.filter("formatGridAddress",function(){return function(item){return(item.city+" "+item.state_code+" "+item.country_code).trim()}});_app2.default.filter("slugify",function(){return function(s){return s.replace(/\s+/g,"-").toLowerCase()}});_app2.default.filter("urlHost",function(){return function(s){return s.split("//")[1].split("/")[0]}})},function(module,exports,__webpack_require__){"use strict";var _findReservedCharacters=__webpack_require__(281);var _luceneQueryParser=__webpack_require__(134);var _luceneQueryParser2=_interopRequireDefault(_luceneQueryParser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}$(function(){$("#q").on("keyup",function(el){var q=$("#q").val();var ids=(0,_findReservedCharacters.findReservedSubStrIdxs)(q);if(ids.size){try{$(".search-tips-trigger").toggleClass("danger",false);_luceneQueryParser2.default.parse(q)}catch(err){$(".search-tips-trigger").toggleClass("danger",true)}}$(".search-tips-trigger").toggleClass("warn",ids.size>0)});$("#q").trigger("keyup");$("body").on("click",".newSearch, .filterSearch",function(){$.cookie("SIDE_TAB_VIEW","st-filters",{path:"/"})})});$(function(){$(".redactor").redactor(window.RedactorSettings)});$(document).ready(function(){$(".fa-level-up").closest(".div-table-cell-mobile").addClass("nest");$(".hide-item").click(function(){$(this).closest(".hide-item-content").hide(200)})});$(document).ready(function(){$("input.search-field-main").inputAutogrow({maxWidth:$("div").width(),minWidth:$("input.search-field-main").width(),trailingSpace:10})});window.beSticky=function(){var selector=arguments.length>0&&arguments[0]!==undefined?arguments[0]:".be-sticky";var el=$(selector);var top=null;var resize=function resize(){top=el.offset().top};var scroll=function scroll(){el.toggleClass("stuck",top<window.pageYOffset)};$(window).resize(resize);$(window).scroll(scroll);resize()};window.initSticky=function(){var el=$("#side-tabs");var top=null;var resize=function resize(){top=el.offset().top};var scroll=function scroll(){var contentTallerThanViewport=$("#main-column").height()+48+59>window.innerHeight;var stuck=top<window.pageYOffset&&window.innerWidth>768&&contentTallerThanViewport;el.toggleClass("stuck",stuck);$(".sidebar-sticky").toggleClass("stuck",stuck);$("#main-column").toggleClass("sidebar-stuck",stuck)};$(window).resize(resize);$(window).scroll(scroll);resize()};$(function(document){window.beSticky();window.initSticky()});$(document).ready(function(){$.scrollUp({scrollName:"scrollUp",scrollDistance:0,scrollFrom:"top",scrollSpeed:200,easingType:"linear",animation:"none",animationSpeed:200,scrollTrigger:false,scrollTarget:false,scrollText:'<em class="fa fa-angle-up"></em>',scrollTitle:false,scrollImg:false,activeOverlay:false,zIndex:2147483647})});$(document).ready(function(){var theYear=(new Date).getFullYear();$(".copy-year").html(theYear)});$(document).ready(function(){$(".toggle-btn").click(function(e){e.preventDefault();$(this).closest("li").find(".toggle-content").not(":animated").slideToggle()});$(".toggle-btn").click(function(){$(this).toggleClass("active")})});window.initAccordion=function(){$(".accordion-btn").click(function(e){e.preventDefault();var $this=$(this);var $thisAccordionContent=$this.closest("li").find(".accordion-content");var currentStatus="";if($this.attr("class").indexOf("active")!==-1){currentStatus="active"}$this.closest(".accordion").find("li").each(function(){var $thisLi=$(this);$thisLi.find(".accordion-btn").removeClass("active");$thisLi.find(".accordion-content").slideUp("400",function(){$(this).removeClass("active")})});if(currentStatus!=="active"){$thisAccordionContent.not(":animated").slideDown();$this.addClass("active");$thisAccordionContent.addClass("active")}})};$(document).ready(window.initAccordion);window.tooltipsterConfig={animation:"grow",theme:"tooltipster-shadow",trigger:"hover",interactive:true,maxWidth:400,animationDuration:300,side:"top"};window.initTooltips=function(dom){if(!dom){return}dom.find(".ttip-hov:not(.tooltipstered)").tooltipster(window.tooltipsterConfig);dom.find(".ttip-clk:not(.tooltipstered)").tooltipster(_.extend(_.clone(window.tooltipsterConfig)),{trigger:"click"})};window.closeAllTooltips=function(){var instances=$.tooltipster.instances();$.each(instances,function(i,instance){instance.close()})};$(document).ready(function(){window.initTooltips($("body"))});$(document).ready(function(){$(".fancybox").fancybox()});$(document).ready(function(){var owl=$(".owl-carousel");owl.owlCarousel({items:3,navigation:false,navigationText:["<em class='fa fa-angle-left'>","<em class='fa fa-angle-right'>"],pagination:true,paginationNumbers:false,singleItem:false,scrollPerPage:true,autoHeight:true,lazyLoad:true,autoPlay:3e3,transitionStyle:false});$(".owl-next").click(function(){owl.trigger("owl.next")});$(".owl-prev").click(function(){owl.trigger("owl.prev")});$(".owl-play").click(function(){owl.trigger("owl.play",1e3)});$(".owl-stop").click(function(){owl.trigger("owl.stop")})});$(document).ready(function(){var owl=$(".chart-carousel");owl.owlCarousel({items:2,itemsDesktop:[1200,2],itemsDesktopSmall:[992,1],itemsTablet:[768,1],itemsMobile:[479,1],navigation:false,navigationText:["<em class='fa fa-angle-left'>","<em class='fa fa-angle-right'>"],pagination:false,paginationNumbers:false,singleItem:false,scrollPerPage:true,autoHeight:true,lazyLoad:true,autoPlay:false,transitionStyle:false});$(".owl-next").click(function(){owl.trigger("owl.next")});$(".owl-prev").click(function(){owl.trigger("owl.prev")});$(".owl-play").click(function(){owl.trigger("owl.play",1e3)});$(".owl-stop").click(function(){owl.trigger("owl.stop")})});$(document).ready(function(){$(".hover-box-content, .vert-middle").flexVerticalCenter()});$(document).ready(function(){$("#date").datepicker({dateFormat:"dd.mm.yy",prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>'});$("#start").datepicker({dateFormat:"dd.mm.yy",prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',onSelect:function onSelect(selectedDate){$("#finish").datepicker("option","minDate",selectedDate)}});$("#finish").datepicker({dateFormat:"dd.mm.yy",prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',onSelect:function onSelect(selectedDate){$("#start").datepicker("option","maxDate",selectedDate)}});$("#inline").datepicker({dateFormat:"dd.mm.yy",prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>'});$("#inline-start").datepicker({dateFormat:"dd.mm.yy",prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',onSelect:function onSelect(selectedDate){$("#inline-finish").datepicker("option","minDate",selectedDate)}});$("#inline-finish").datepicker({dateFormat:"dd.mm.yy",prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',onSelect:function onSelect(selectedDate){$("#inline-start").datepicker("option","maxDate",selectedDate)}});$(".regular-slider").slider({min:0,max:500,slide:function slide(event,ui){$("#slider1-value").text(ui.value)}});$(".range-slider").slider({min:0,max:500,range:true,values:[75,300],slide:function slide(event,ui){$("#slider2-value1").text(ui.values[0]);$("#slider2-value2").text(ui.values[1])}})});window.initTristateCheckboxes=function(dom,opts){dom.find(".tristate").tristate(opts||{})};$(function(){window.initTristateCheckboxes($("body"))});$(function(){$("body").on("click",".login-link",function(e){e.preventDefault();$("#login").click()})});$(function(){$("body").on("click",".checkbox-class",function(e){$(this).toggleClass("active")})});function checkEnter(e){e=e||event;var txtArea=/textarea/i.test((e.target||e.srcElement).tagName);return txtArea||(e.keyCode||e.which||e.charCode||0)!==13}var input=document.querySelector(".landing-form form");if(input){input.onkeypress=checkEnter}},function(module,exports,__webpack_require__){"use strict";var onbeforeprint=function onbeforeprint(){$(".sliderImg img.lazy").each(function(){var $el=$(this);var original=$el.data("original");if(original){$el.attr("src",original)}})};window.onbeforeprint=onbeforeprint;try{var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(mql){if(mql.matches){onbeforeprint()}})}catch(e){console.warn("Could not add onbeforeprint handler")}},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalStorageService=__webpack_require__(7);var localStorageService=new LocalStorageService;var history=localStorageService.get("history")||[];_app2.default.run(["$rootScope","$window",function($rootScope,$window){history.unshift({time:new Date,title:document.title,location:window.location.pathname,href:window.location.href});if(history.length>100){history=history.slice(0,100)}localStorageService.set("history",history)}])},function(module,exports,__webpack_require__){"use strict";var _app=__webpack_require__(0);var _app2=_interopRequireDefault(_app);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_app2.default.config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$stateProvider.state("empty",{url:"/"}).state("classificationViewer",{url:"/classification-viewer/:type/{term:any}",views:{explorer:{controller:["$stateParams","$rootScope",function($stateParams,$rootScope){var type=$stateParams.type;var typeMap={US:"USPC",NAT:"USPC",IPCR:"IPC"};if(typeMap[type]){type=typeMap[type]}$rootScope.classificationViewer={type:type,term:$stateParams.term};console.log($rootScope.classificationViewer)}]}}}).state("localeSelector",{url:"/locale-selector",views:{explorer:{template:"<div lens-locale-selector></div>"}}}).state("collectionSearchEntry",{url:"/collection-search",views:{main:{controller:["$state",function($state){$state.go("collectionSearch")}]}}}).state("collectionSearch",{url:"/collection-search/:page/:limit/:orderBy/{term:any}",views:{main:{controller:"CollectionSearchController as $ctrl",template:__webpack_require__(715)}},params:{page:"0",term:"",limit:"10",orderBy:"-score"}})}])},function(module,exports){module.exports='\n<div id="main-column">\n    <div class="container body-content">\n\n        <nav class="greedy">\n            <ul class="tabs-pages">\n                <li class="">\n                    <a href="/lens/search">{{\'results.tabTitlePatents\' | message }}</a>\n                </li>\n                <li class="disabled ttip-hov" title="{{\'common.soon\' | message }}">\n                    <a href="">{{\'results.tabTitleScholarly\' | message }}</a>\n                </li>\n                <li class="active">\n                    <a href="">{{\'results.tabTitleCollections\' | message }}</a>\n                </li>\n            </ul>\n            <button class="hidden"><em class="fa fa-bars"></em></button>\n            <ul class=\'hidden-links hidden\'></ul>\n        </nav>\n\n        <div class="clearfix" ng-if="!$ctrl.state.term">\n            <h1>{{\'common.action.search\' | message }} <span>{{\'user.collections\' | message }}</span></h1>\n        </div>\n\n        <div class="clearfix" ng-if="$ctrl.state.term">\n            <h1>{{\'user.collections.results\' | message }} <span>"{{::$ctrl.state.term}}"</span></h1>\n        </div>\n\n        <div id="collections-tab-view">\n            <div class="div-table-results table-stretch" data-filter="#filter">\n                <div class="div-table-results-heading be-sticky">\n                    <div class="div-table-results-row">\n                        <div class="pull-left hide-768">\n                            <div class="selectionToolWrapper">\n                                <a class="selectionTool settings-button"><em class="fa fa-check"></em></a>\n                            </div>\n                        </div>\n\n                        \x3c!-- Start Table Tools --\x3e\n                            <div class="table-tools">\n                                <ul class="list-inline view-tool">\n                                    <li id="saveQuery">\n                                        <a title="{{\'results.save.query\' | message }}" href="#" class="ttip-hov edit settings-button fa fa-save"></a>\n                                    </li>\n                                    <li id="view-results-list-btn">\n                                        <a id="tableLink" title="{{\'results.view.summary\' | message }}" href="" class="ttip-hov settings-button">\n                                            <em class="fa fa-list"></em>\n                                            <span>{{\'results.view.list\' | message}}</span>\n                                        </a>\n                                    </li>\n                                    <li id="view-analysis-btn">\n                                        <a id="analysisLink" title="{{\'results.graphical\' | message }}" href="" class="ttip-hov settings-button">\n                                            <em class="fa fa-bar-chart-o"></em>\n                                            <span>{{\'results.graphical.view\' | message}}</span>\n                                        </a>\n                                    </li>\n                                </ul>\n\n                            <form>\n                                <label class="select select-sm">\n                                    <select name="sortBy" id="sortBy" ng-model="$ctrl.state.orderBy" ng-change="$ctrl.search()">\n                                        <option value="-score">{{\'sorting.rank\' | message }} </option>\n                                        <option value="+title">{{\'sorting.title.asce\' | message }}</option>\n                                        <option value="-title">{{\'sorting.title.desc\' | message }}</option>\n                                        <option value="+created">{{\'sorting.created.asce\' | message }}</option>\n                                        <option value="-created">{{\'sorting.created.desc\' | message }}</option>\n                                        <option value="+updated">{{\'sorting.updated.asce\' | message }}</option>\n                                        <option value="-updated">{{\'sorting.updated.desc\' | message }}</option>\n                                    </select>\n                                    <i></i>\n                                </label>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div class="alert alert-danger"\n                    ng-if="$ctrl.state.error"\n                    ng-cloak\n                >\n                    <em class="fa fa-warning"></em>\n                    {{\'error.server\' | message }}\n                    {{$ctrl.state.error.slice(0, 100)}}...\n                </div>\n\n                <div lens-collection-list\n                    raw-items="$ctrl.state.items"\n                    loading="$ctrl.state.loading"\n                ></div>\n\n            </div>\n\n            <div ng-include="\'collection-search-pagination\'"></div>\n\n        </div>\n    </div>\n</div>\n\n<aside class="sidebar">\n\n    <div class="widget hidden">\n        <h3>Include Widgets</h3>\n        <p class="well"><strong>Registration widget</strong><br>\n        <strong>Refine collection/facets widget</strong></p>\n    </div>\n\n    <div class="widget">\n        <h3>About Collection Search</h3>\n        <p class="well well-register">\n            Published Collections can be found using this screen.\n            Upon opening a collection, the regular Lens search facets will be available in this sidebar.\n        </p>\n    </div>\n    <hr/>\n    <div class="widget">\n        <h3>Search Suggestions</h3>\n        <div class="well clearfix">\n            Use the search bar at the top of the screen to begin your search.\n            <br><br>\n            Not sure what to search? How about:\n            <br>\n            <ul class="list-styled">\n                <li>\n                    <a ui-sref="collectionSearch({term:\'\', sort:\'-created\'})">Sorted Newest</a>\n                </li>\n                <li>\n                    <a ui-sref="collectionSearch({term:\'Portfolio\'})">Patent Porfolios</a>\n                </li>\n                <li>\n                    <a ui-sref="collectionSearch({term:\'Citing\', sort:\'+title\'})">Citing Patent Collections</a>\n                </li>\n            </ul>\n            <br>\n            <em>Dev Note: this panel is a temporary experiment only.</em>\n        </div>\n    </div>\n    <hr/>\n    <div id="facetsSidebar" class="widget facetsSidebar" ng-cloak>\n        <form id="facetsForm" class="facetsForm" ng-submit="$ctrl.search()" method="get" accept-charset="UTF-8">\n\n            <div id="facets" class="facets-container">\n                <a ng-click="$ctrl.state.term=\'\'"\n                    title="${spring.m(\'filters.common.clearAll\')}"\n                    class="ttip-hov clear-all col-error"\n                >\n                    <em class="fa fa-minus-circle"></em>\n                </a>\n                <h3>\n                    {{\'common.action.search\' | message }} {{\'user.collections\' | message }}\n                </h3>\n\n                <ul id="facets-list" class="no-bullet facets clearfix facets-list">\n                    <li class="ui-accordion ui-widget ui-helper-reset">\n                        <h5 rel="#filterQuery" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons ui-accordion-header-active ui-state-active">\n                            {{\'common.search.term\' | message }}\n                        </h5>\n                        <div id="filterQuery" class="filterGroup">\n                            <div class="panel panel-default">\n                                <div class="panel-body">\n                                    <legend>{{\'common.search.term\' | message }}</legend>\n                                    <label class="input">\n                                        <input name="q" ng-model="$ctrl.state.term" placeholder="{{$ctrl.state.placeholder}}">\n                                    </label>\n                                    <div class="facetBottomButtons clearfix">\n                                        <button class="btn btn-pri">{{\'common.action.search\' | message }}</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        </form>\n    </div>\n</aside>\n'}]);