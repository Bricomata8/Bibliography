Influence of Interference among LoRa Systems under Indoor Environments
Shota Okuda and Kohei Ohno
Department of Network Design, School of interdisciplinary mathematical Sciences,
Meiji University, Tokyo, Japan

Abstract— This paper discusses LoRa systems for indoor usage. RSSIs from a LoRa transmitter to receivers are measured in a large building, and influence of the interference from the other LoRa device are evaluated by the experiments. From the results, LoRa systems can cover the most parts of the buildings over the floors, however it is difficult to reach the center of the building apart from the stairs or windows. An effect of interference is considered when two LoRa systems are used in the same channel in the same building. The packet error rate is deteriorated by overlapping the frequency band.
Keywords—LoRa, LPWA (Low Power Wide Area), Interference, RSSI, Spectrum.
I. INTRODUCTION
LPWA (Low Power Wide Area) system is attractive for communication systems for IoT (Internet of Things) devises since it has low power consumption and long range communication capabilities. LoRa is one of the strong candidates of the communication systems for IoT systems [1]. It can be used easier without registration to the base stations comparing with NB-IoT or Sigfox[2][3]. Therefore, it has potential to exist many LoRa networks in narrower area and interference problem would occur when the LoRa systems use the same channels. The influence of interference will become one of the problem like the case of wireless LAN systems because coverage area of LoRa is wider.
In previous researches, LoRa is considered using outdoor and mobile usage and the performances have been evaluated. Reference [4] shows that LoRa devises can communicate over 2km in the mountain area using multi-hop networks. In reference [5], the vehicle location information sharing system using Lora had been proposed. Lora communications between the vehicles and hospital could be carried out in an urban area. In reference [6], propagation characteristics have been measured in the university campus. The signal was not achieved behind the building.
In this study, the case that the LoRa is used in a large building is considered. The RSSI (Received Signal Strength Indicator) are measured in the building. Moreover, we evaluated effect of interference when more than one LoRa networks are used in the same building.

elevators and stairs elevators and stairs

II. EXPERIMENT SETUP A. RSSI Mesurements
In this study, we assume that LoRa devises used in a large building. Rooms are used as company offices or residential rooms. The experiments were done in the high raised building of Meiji University Nakano Campus [7]. Figure 1 and 2 show the sectional view of the building and floor map, respectively. It is 14 story building and made from steel structure. The size of building shows Table 1. The LoRa transmitter is located at 12th floor pointed by the blue point in Figure 2(b). The receivers are set at all floors. The numbers in the floor map are positions of the receivers. The measurement positions on 1st floor (Figure 2 (f)) are different with other floors since floor arrangement is different that the large entrance of the building, open space and student lounge are existed on the floor. Figure 3 shows the photos of the building overview from the transmitter, the receiver and the transmitter.
In this experiment, Dragino LoRa development kit LG01 and LoRa Shield are used [8]. The receiver is connected to a lap-top PC. RSSIs can be observed from the PC when the packet can be received successfully.
open ceiling space
Figure 1 sectional view of the building [7]

978-1-7281-1340-1/19/$31.00 ©2019 IEEE

16

ICUFN 2019

20m
⑥
⑨

10m
⑤ ⑧

0m
⑦

④

③

30m

20m

(a) 14th floor

Interference

②

①

10m

0m

⑨
⑥
20m

⑧

⑦

⑤

④

③

10m

0m

30m

20m

(b) 12th floor

Transmitter

②

①

10m

0m

⑨

⑧

⑦

⑥

⑤

④

③

②

①

20m

10m

0m

30m

20m

10m

0m

(c) 9th floor

(c) 9th floor

⑨

⑦

⓪

(d) 5th floor

multi-purpose room

⑨

⑦

⓪

(e) 2nd floor

B

open space A

gym

⓪

class room

students lounge

guard's room

(f) 1st floor Figure 2 Floor map of the campus [7]

B. Influence of Interference
We assume that there are many companies or residential rooms are existed in one building, and they use the LoRa networks just as they like. Therefore, they have potentials that they use LoRa networks in the same channels. In this consideration, RSSI and PAR (Packet Arrival Rate) are evaluated.
In this experiment, we assume that two LoRa networks are existed in the same building. As a desired system, Dragino LoRa development kit LG01 and LoRa Shield are used as well as the experiment of RSSI measurements. Whereas, LoRa Technology Evaluation Kit 900 is used as an interfering system [9].

(b) Transmitter

(a) Building overview from the transmitter

(c) Receiver at 2 in 12th floor
Figure 3 Photos of building, transmitter and receiver

Table 1 Detail of the building

Building Area Gross Floor Area
Floors
Height of Building

4294.97 [m2]
32180.51 [m2] above grade: 14 below grade: 1
59.95 [m]

III. RSSI MEASUREMENTS IN BUILDING
Settings of LoRa devices are shown Table 2. The transmitted power is set as 3dBm and the spreading factor is 7, which is higher data rate mode for LoRa modulation. The cannel is set #15 (The center frequency is 923.4MHz) that is mandatory supported channel. For this setting in the experiment derives, minimum bound of the receiving power is -95dBm. The transmitter is set at 12th floor into the passageway. The receivers are set at all floors in the building. Representative positions of the transmitter and receivers are shown in Figure 2. The numbers in each floor map indicate the

17

positions of the receivers. The RSSIs are averaged from obtained more than 100 values. The transmitter and receiver set 1.16[m] height using styrene foam as shown in Figure 3 (b) and (c).
First, RSSIs of the LoRa devises from the transmitter to the receivers are measured in the same 12th floor which is shown in Figure 4(a). It is confirmed that the power is attenuated extending the distance from the transmitter to the receiver basically. The power of signal at the receiver positions ○8 and ○9 is smaller because those positions are shadowed by the walls. In Figure 4(b), the RSSIs transmitted from the transmitter on 12th floor to the receivers on 9th floor are shown. The RSSIs in 9th floor are larger than the RSSIs on lower floor since the signals propagate through the open ceiling space. The RSSIs become smaller when the receivers set under the 8th floor because the floor is interrupted by the ceiling except the stars and elevator shafts. Notice that the signal reaches to the 1st floor as shown in Figure 4(c)
Figure 4(d) shows RSSIs comparison among 14th, 12th, 9th, 5th and 2nd floor, and Figure 5 shows the RSSIs at positions ○9 in each floor. The LoRa signal is covered from 1st floor to 14th floor. However, the signal does not reach at position ○7 on 5th floor. They are difficult to receive the packets when the receivers are set at the center of the building on 4th and 5th floor. The signal may propagate through the open celling, stairs, passageway and outside of the building. And also, the position ○7 is surrounded three-direction by the pillar and walls of the rooms, thus the signal is shadowed by those obstacles.
The RSSIs are compared when there are many people present or not. RSSIs are measured on weekday that many students stay in the rooms and walk around into the passageway, and on holiday that no students around the devices and in the rooms. As shown in Figure 4(a) and (b), the RSSIs are varied depending on the receiver positions. However, difference is a little and tendency of the effect of people cannot be observed from the results.

IV. INFLUENCE OF INTERFERENCE
In this section, influences of interference are evaluated by the experiments. The receiver of the desired system is set on 12th floor as shown in Figure 2(b), which is the same position as the previous section. The transmitter of the interfering system is set on the 14th floor. It is the same position as the transmitter of desired system in horizontal surface. The signal of the interring system is transmitted continuously during the measurements.

Table 2 Parameters of LoRa Devices

Transmitted Power Frequency (Channel)
Bandwidth Spreading Factor (SF)
Antenna Height

3dBm 923.4MHz (#15)
125kHz 7
1.162m

RSSI[dBm]

RSSI[dBm]

RSSI[dBm]

-35

-40

Weekday

-45

Holiday

-50

-55

-60

-65

-70

-75

-80

-85

-90

-95

-100

1

2

3

4

5

6

7

8

9

Measurement Position

(a) RSSIs when the receivers set on 12th floor

-35

-40

Weekday

-45

Holiday

-50

-55

-60

-65

-70

-75

-80

-85

-90

-95

-100

1

2

3

4

5

6

7

8

9

Measurement Position

(b) RSSIs when the receivers set on 9th floor

RSSI[dBm]

-35

-40

-45

-50

-55

-60

-65

-70

-75

-80

-85

-90

-95

-100

0

A

B

Measurement Position

(c) RSSIs when the receivers set on 1st floor

-35

-40

14th floor

-45

12th Floor

9th floor

-50

5th floor

-55

2nd Floor

-60

-65

-70

-75

-80

-85

-90

-95

-100

0

1

2

3

4

5

6

7

8

9

Measurement Poisition

(d) RSSI in the building

At position ○7 on 5th floor, packets do not reach.

Another points which is not drown in the graph cannot measured because the receivers are cannot put on the points. Figure 4 RSSI measurement results

18

RSSI[dBm]
Packet Arrival Rate [%]

-70
-75
-80
-85
-90
-95
-100 2 3 4 5 6 7 8 9 10 11 12 13 14 Floor
Figure 5 RSSI at position ○9 on each floor

The frequency band of the LoRa devices are set the cases shown in Table 3. The channel of the desired system is fixed 923.4MHz (#15). The frequency band of interfering system is set four cases as 920.6MHz (#1), 923MHz (#14), 923.4MHz (#15) and 923.3MHz which is a half point between channel #14 and #15. Therefore, half of the spectrum is then shared with the both systems in the case(iii). The transmitting power and spreading factor of the interfering LoRa is set the same as desired LoRa.
The influence of interference is evaluated by the packet arrival rate (PAR) and the signal to interference signal power ratio (SIR). LG01 that is used for the desired system return ACK signal in 5 second if a packet is received successfully. Thus, PAR is calculated as follows;

PAR[%]

Number of packets which ACK is received Number of all transmitted packets

100.

(2)

SIR is measured at each receiver position as follows;

SIR [dB] = Pd [dBm] – Pi [dBm], (3)

where Pd denotes received desired signal power and Pi denotes interfering signal power in dBm.

In Figure 6, the PARs on 12th floor are shown. We confirm that the PAR is 100% when the interfering system is not existed and the interfering band is apart from the frequency band used by the desired system like channel #1 and #15. The case that interfering band is set as adjacent channel as #14 in case(ii) of Table 3, the effect of interference can be observed where the receiver is near from the transmitter of the interferer. However, the PARs are achieved over 80%.

Notice that the PARs are deteriorated less than 50% when the frequency band is overlapped with the both systems as the case (iii) and (iv). In Figure 7, the relationship of the PAR and SIR are then shown. In the case (iii), correlation between PAR and SIR cannot be observed. When the same frequency band is shared as the case (iv), proportional relation between them
except the positions ○7 and ○9 . The approximated line is then

shown in Figure 7(b). At the position ○7 , the desired signal propagates thorough the open selling under line of sight (LOS) environment. Therefore, signal to noise ratio (SNR) is higher . The interfering power is also larger than other positions,
however the PAR at ○7 becomes better. Whereas, the desired
signal power at the position ○9 is smaller, thus SNR also becomes low. Therefore, packets are not arrived because the interference even when SIR is higher.

Table 3 frequency band of desired and interfering LoRa

Desired Lora

Interfering Lora

(ⅰ)

920.6MHz (#1)

(ⅱ) 923.4MHz (#15)
(ⅲ)
(ⅳ)

923.2MHz (#14)
923.3MHz (between #14 and #15)
923.4MHz (#15)

without interference

(i) interference #1

(ii) interference #14

(iii) interference b/w #14,15

(iv) interference #15

100

90

80

70

60

50

40

30

20

10

0

1

2

3

4

5

6

7

8

9

Measurement Position

Figure 6 PARs when LoRa system interfered with by the other LoRa system

V. CONCLUSION
In this paper, RSSIs of LoRa systems are measured considering for indoor usage. From the results, the signal of LoRa is covered most positions in the building, however it is not reached to the center of the building. The position is surrounded by the wall of the rooms, and apart from the stairs or windows. The signal propagate through the open celling, stairs, passageway and outside of the building. The communications can be done between 12th floor and 1st floor in the building.
The influences of the interference are evaluated when different LoRa systems are used in the same building. Form the result, when the spectrum of the LoRa system is shared in the same frequency band with by two systems, the PAR is degraded. Relationship of the PAR and SIR becomes then proportional, however influence of SNR for the desired system also should be considered for more accurate evaluation. When

19

more than one LoRa systems are used in the same building simultaneously, the interference avoidance function is necessary.
In future works, the parameters of LoRa systems and various usage conditions should be considered for when the LoRa devices are used under indoor environments.

Packet Arrival Rate [%]

45

40

3 4

5 1

35

7

30

9

2

25

8

6

20

15

10

5

0

0

5

10

15

20

25

30

35

SI R[dB]

(a) Frequency band of interfering Lora is 923.3MHz (iii)

45

40

35

30

7

3

1

24

25

5

6

20

15

10
5
0 0

8

9

5

10

15

20

25

30

35

SIR[dB]

(b) Frequency band of interfering Lora is 923.4MHz (iv)

Figure 7 Packet arrival rate vs. SIR Numbers in the figures indicate positions of the receivers in
Figure2(b)

Packet Arrival Rate [%]

REFERENCE

[1] LoRa alliance, https://lora-alliance.org/.

[2] Almudena Diaz Zayas, Pedro Merino, "The 3GPP NB-IoT system architecture for theInternet of Things," IEEE, ICC2017, May 2017.

[3] Sigfox, https://www.sigfox.com.

[4] Susumu Matsui, “Performance Evaluation of a Wireless Multi-hop Network using LoRa,” IEICE technical report, ASN2017-121, Feb. 2018.

[5] Yasunori Owada, Goshi Sato, Katsuhiro Temma, Toshiaki Kuri, Masugi
Inoue “A Vehicle Location Information Sharing System Using LoRa,” IEICE technical report, IEICE-ASN2018-21, Jul. 2018.

[6] Mai Ohta, Shogo Ohta, Osamu Takyu, Takeo Fujii, “A Repot of
Propagation performance with 920MHz LoRa,” IEICE General Conference, B-17-15, 2018.

[7] Meiji

University

Nakano

Campus,

http://www.meiji.ac.jp/cip/english/about/campus/nakano.html

and

https://www.meiji.ac.jp/koho/campus_guide/nakano/floor.html

(Japanese).

[8] Dragino, http://www.dragino.com/.

[9] “RN2903 LoRa Technology Transceiver Module Data Sheet,” Microchip Technology Incorporated, 2016.

20

