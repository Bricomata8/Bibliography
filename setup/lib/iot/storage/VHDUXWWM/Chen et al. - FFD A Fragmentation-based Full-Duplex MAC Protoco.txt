FFD: A Fragmentation-based Full-Duplex MAC Protocol for Asymmetric IEEE 802.11 WLANs
Yen-Da Chen†, Jie-Min Cao‡, I-Ju Chen‡, and Kuei-Ping Shih‡
†Department of Computer Information and Network Engineering, Lunghwa University of Science and Technology, Taiwan ‡Department of Computer Science and Information Engineering, Tamkang University, Taiwan Email: †ydchen@mail.lhu.edu.tw, ‡kpshih@mail.tku.edu.tw

Abstract—In-band full-duplex (IBFD) technology allows a wireless device transmitting and receiving packets at the same time and on the same frequency. The advantage of using IBFD in wireless local area networks (WLANs) is to increase channel utilization and therefore achieve higher throughput. However, due to the asymmetric hardware capability and DATA length between AP and stations, the channel wastage problem and collision problem may happen, which will degrade network throughput. As a result, a Fragmentation-based Full-Duplex MAC protocol, named FFD MAC, is proposed in the paper. FFD cannot only enhance the channel utilization but also increase network throughput for asymmetric IBFD WLANs. Simulation results conducted by OMNET++ simulator show that FFD MAC performs much better than the related work in terms of network throughput as well as the transmission delay.

STA1

DATA1 to AP

TX STA1 RX

DATA1 to AP

TX

RX

AP DATA2 to STA2 DATA1 to AP
STA2 DATA2 to STA2 DATA1
(a)

AP DATA2 to STA2 DATA1 to AP ACK

SIFS

STA2

ACK

t

DATA2 to STA2

t

(b)

Fig. 1. The concept of (a) Inter-Station Interference, and (b) DATA-ACK collision problems for IBFD WLANs.

I. INTRODUCTION
Full-Duplex (FD) wireless communication, which allows a wireless station (STA) transmitting and receiving packets at the same time, has been recognized as an important transmission technology in wireless local area networks (WLANs). FD communication can double the network capacity with respect to traditional half-duplex transmission. However, due to the self-interference problem (SIP), the FD communication cannot serve well in the same frequency, where the reception of an incoming signal will collide with its own transmitting signal. Recently, thanks to the development of the self-interference cancellation technique, FD communication can be further extended to be used at the same frequency without SIP and is so-called in-band full-duplex (IBFD) communication.
Some IBFD MAC protocols [1], [2] assume that Access Point (AP) operates in FD transmission, but STAs are only equipped with Half-Duplex (HD) radios because of hardware constraints and legacy of the previous IEEE 802.11 standard. Therefore, to support the coexistence of FD AP and HD STAs, the IBFD wireless transmission is designed to as that FD AP is able to simultaneously transmit and receive DATA from different STAs. Unfortunately, as shown in Fig. 1(a), to double network capacity is not easily achieved in FD AP because the signal from the transmitting HD STA (ST A1) may collide with another HD STA (ST A2) while it is receiving data from AP. This collision problem is termed as Inter-Station Interference Problem (ISIP) [3].
Recently, ISIP is able to be alleviated efﬁciently thanks to the capture effect phenomenon [4] or modulation and

coding scheme [5]. The detail of the capture effect will be further introduced in the next section. However, due to the variable DATA rate and DATA size, the transmission time of uplink may be longer than that of the downlink. As shown in Fig. 1(b), suppose ST A1 has DATA to AP , and AP also has data to ST A2. When AP ﬁnishes its transmission ﬁrst, ST A2 will immediately replay ACK frame to conﬁrm the transmission after an SIFS period. One can see that the time that ST A2 replies the ACK frame overlaps with that of the uplink transmission. In this case, the ACK frame may interfere with the DATA received by AP . This collision problem is termed as the DATA-ACK collision problem.
In [2], the authors proposed an FD MAC protocol, named A-Duplex MAC protocol, to avoid the DATA-ACK collision. The concept of A-Duplex protocol is that AP immediately transmits a busy tone signal after its DATA transmission to ensure that the two transmissions from AP and ST A1 can ﬁnish at the same time. Therefore, the ACK transmission will not overlap with the DATA transmission, and then the DACK-ACK collision can be avoided. However, busy tone transmission will degrade the channel utilization. In fact, during the period of the busy tone transmission, AP is able to transmit to another HD STA without causing ISIP. As a result, the paper proposes a Fragmentation-based Full-Duplex MAC protocol, named FFD MAC protocol, which can not only avoid ISIP but also alleviate the channel wastage problem for IBFD WLANs.
The rest of this paper is organized as follows. Section II formally describes the capture effect phenomenon. The concept

978-1-7281-1340-1/19/$31.00 ©2019 IEEE

387

ICUFN 2019

STA1

DATA1 to AP

DATA3 to AP t

AP STA2

DATA1

DATA2 AP DATA3
10 dB

Preamble

Time

DATA2 to AP

TX

RX

Fig. 2. An example to illustrate the capture effect.

of FFD MAC is proposed in Section III as well. Simulation results are presented in Section IV. Finally, Section V concludes the paper.
II. PRELIMINARIES
In the early version of radio technology, if multiple signals are transmitted from different STAs over a shared channel at the same time, the collision may happen at the receiver. Therefore, to alleviate this collision problem, the capture effect mechanism is born. The capture effect is a phenomenon that the receiver can demodulate the stronger signal if two signals received simultaneously.
Two cases are considered below to further illustrate the capture effect. As shown in Fig. 2, both ST A1 and ST A2 have packets to AP . The ﬁrst case is that the target signal is transmitted early. Suppose ST A1 transmits ﬁrst, and ST A2 also starts transmitting to AP after a preamble period passing. If the received signal of DAT A1 is greater than that of DAT A2, AP is able to decode DAT A1 successfully. Conversely, the second case is that the target signal is transmitted later. As shown in Fig. 2, the transmission time of DAT A3 is later than that of DAT A2. If the received signal of DAT A3 is 10 dB stronger than that of DAT A2, DAT A3 can be received correctly by AP .
Basically, it is easier to decode the target signal in case 1. As a result, the target signal will be transmitted later to avoid ISIP in the proposed FFD MAC protocol.
III. FRAGMENTATION-BASED FULL-DUPLEX (FFD) MAC
PROTOCOL
Channel wastage problem and Inter-Station interference problem are two challenges in designing IBFD MAC protocols. Therefore, to overcome these two challenges, two ideas are proposed in FFD MAC protocol for IBFD WLANs. Firstly, to alleviate channel wastage problem, AP is allowed to transmit multiple DATAs to the same or different HD STAs in one IBFD transmission process when the transmission time of the uplink is longer than that of the downlink. However, it is difﬁcult for AP to transmit multiple DATAs before an uplink DATA transmitting if the previous capture effect schemes directly apply to this asymmetric transmission time scenario for preventing ISIP. As a result, the second idea to avoid ISIP in FFD MAC is that the uplink DATA will be fragmented into multiple segments, and each segment uplink DATA will be

transmitted after a downlink DATA transmitting. Take Fig. 3

as an example to further illustrate FFD MAC protocol in detail.

ST A1 has DATA to AP , and AP also intends to transmit

to ST A2, ST A3, and ST A4, respectively. Assume that ST A1

wins the contention followed by IEEE 802.11 DCF, and

then broadcasts a RTS frame after DIFS period. If channel

is free for reception and transmission, AP will broadcast

a Full-Duplex CTS (FCTS) control frame to conﬁrm the

IBFD transmission. From duration ﬁeld in the RTS frame, the

length of DAT A1 is available for AP . Then AP can decide

how many DATAs (DAT A2, DAT A3, and DAT A4) can be

transmitted in one IBFD transmission and attaches receiver ID

and duration information in the FCTS frame. After FCTS, AP

directly starts DATA transmissions in turn.

On the other hand, due to fragmentation, the transmission

time of DAT A1 will be extended. A slight modiﬁcation is

needed for the duration ﬁeld in the RTS frame. Therefore, a

new control frame (FRTS) is proposed in FFD MAC protocol

to correct the NAV information. The duration in FRTS is set

to

TDAT A2 + TDAT A3 + TDAT A4 + TSIF S +

(1)

4 ∗ TACK − 2 ∗ TP reamble − TF RT S ,

where TP reamble is the preamble time. TDAT A2 , TDAT A3 , TDAT A4 , TF RT S and TACK are the transmission time of DAT A2, DAT A3, DAT A4, FRTS, and ACK, respectively.
Finally, after FRTS, ST A1 also starts DAT A1 transmission as shown in Fig. 3.

IV. PERFORMANCE EVALUATIONS
To verify the effectiveness of the proposed FFD MAC protocol, A-Duplex MAC [2] and CSMA based half-duplex MAC protocol are simulated and compared. The simulations are conducted by the OMNeT++ [6]. The simulation is the random topology, where one AP and some STAs around it. The general simulation settings are shown in Table I.

TABLE I SIMULATION SETTINGS.

Parameter Trafﬁc Model Uplink DATA Length RTS, FRTS CTS, ACK FCTS DATA Rate Base Rate Channel Bandwidth

Value CBR 1500 Bytes 20 Bytes 14 Bytes Dynamic 54 Mbps 12 Mbps 20 MHz

Fig. 4 illustrates the comparisons of network throughput among HD CSMA based, A-Duplex, and FFD MAC protocols in terms of the different number of stations. Due to AP with the full duplex ability, we can see that A-Duplex MAC and FFD MAC protocols always have better throughput than HD CSMA based MAC protocol. In addition, FFD MAC performs the best in all cases because of that the an extra busy tone signal is needed in A-Duplex MAC protocol to avoid Inter-Station

388

SIFS STA1 RTS

Preamble FRTS Data1 to AP

AP STA2

FCTS

Data2 to STA2

STA3

STA4 Others

NAV ( RTS )

Preamble

Preamble

Data1

Data1

t

Data3 to STA3

Data4 to STA4

ACK

SIFS

ACK

Preamble

ACK ACK

NAV(FRTS) NAV ( FCTS )

Fig. 3. The concept of FFD MAC protocol.

Throughput (Mbps) Delay Time (ߤ s)

80 70 60 50 40 30 20 10 0
0

FFD (UL/DL : 1/3) A-Duplex (UL/DL : 1/2) A-Duplex (UL/DL : 1/3) HD

5

10

15

20

Number of STA

350 300 250 200 150 100 50
0 0

FFD (UL/DL : 3/1) A-Duplex (UL/DL : 2/1) A-Duplex (UL/DL : 3/1)

500

1000

Uplink DATA Size (bytes)

1500

Fig. 4. The comparisons of network throughput among CSMA based, A- Fig. 5. The comparisons of packet delay between A-Duplex, and FFD MAC Duplex, and FFD MAC protocols in terms of different number of stations. protocols in terms of the different uplink DATA lengths.

Interference Problem. It is worth mentioning that the longer length of downlink DATA is, the better of throughput gets. Note that the throughput of A-Duplex MAC and FFD MAC do not improve apparently with the number of STAs increasing because of that the contention among STAs becomes seriously.
Fig. 5 shows the comparisons of packet delay between ADuplex, and FFD MAC protocols in terms of the different DATA length in downlink transmission. We can observe that the packet delay of A-Duplex MAC protocol is always higher than that of FFD MAC protocol because of that multiple DATA can be transmitted in one channel competition. Nevertheless, no matter in downlink or uplink, as the DATA length increasing, the channel competition increasing, and then packet delay also becomes seriously.
V. CONCLUSIONS
In the next-generation wireless networks, In-Band FullDuplex is a key wireless technology to improve the network performance. However, the signal from the transmitting STA may collide with another STA in receiving. Hence, two collision problems, Inter-Station Interference Problem (ISIP) and ACK collision problem, furthermore, channel wastage problem may happen. As a result, a Fragmentation-based Full Duplex (FFD) MAC protocol is proposed in this paper not only to prevent ISIP and ACK collision problems but also to in-

crease network performance without channel wastage problem. Simulation results show that FFD outperforms against other protocols in network throughput and transmission delay.
ACKNOWLEDGEMENT
This work was partially supported by National Science Council of the Republic of China under Grant MOST 1072221-E-262-002 and MOST 107-2221-E-032-015.
REFERENCES
[1] W. Cheng, X. Zhang, and H. Zhang, “RTS/FCTS mechanism based fullduplex MAC protocol for wireless networks,” in Proceedings of the IEEE Global Telecommunications Conference (GLOBECOM), 2013, pp. 4732– 4737.
[2] A. Tang and X. Wang, “A-duplex: Medium access control for efﬁcient coexistence between full-duplex and half-duplex communications,” IEEE Transactions on Wireless Communications, vol. 14, pp. 5871–5885, 2015.
[3] K. M. Thilina, H. Tabassum, E. Hossain, and D. I. Kim, “Medium access control design for full duplex wireless systems: Challenges and approaches,” IEEE Communications Magazine, vol. 53, pp. 112 – 120, 2015.
[4] S. Kim, M. S. Sim, C.-B. Chae, and S. Choi, “Asymmetric simultaneous transmit and receive in WiFi networks,” IEEE Access, vol. 5, pp. 14 079 – 14 094, 2017.
[5] A. Aijaz and P. Kulkarni, “Simultaneous transmit and receive operation in next generation IEEE 802.11 WLANs: A MAC protocol design approach,” IEEE Wireless Communications, vol. 24, pp. 128 – 1135, 2017.
[6] OMNeT++: Discrete Event Simulator, [Online] Available: https://omnetpp.org.

389

