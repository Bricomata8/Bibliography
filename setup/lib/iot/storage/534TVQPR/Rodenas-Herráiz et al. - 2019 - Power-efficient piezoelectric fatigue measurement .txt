Smart Materials and Structures
ACCEPTED MANUSCRIPT • OPEN ACCESS
Power-efficient piezoelectric fatigue measurement using long-range wireless sensor networks
To cite this article before publication: David Rodenas-Herráiz et al 2019 Smart Mater. Struct. in press https://doi.org/10.1088/1361-665X/ab2c46
Manuscript version: Accepted Manuscript
Accepted Manuscript is “the version of the article accepted for publication including all changes made as a result of the peer review process, and which may also include the addition to the article by IOP Publishing of a header, an article ID, a cover sheet and/or an ‘Accepted Manuscript’ watermark, but excluding any other editing, typesetting or other changes made by IOP Publishing and/or its licensors” This Accepted Manuscript is © 2019 IOP Publishing Ltd.
As the Version of Record of this article is going to be / has been published on a gold open access basis under a CC BY 3.0 licence, this Accepted Manuscript is available for reuse under a CC BY 3.0 licence immediately. Everyone is permitted to use all or part of the original content in this article, provided that they adhere to all the terms of the licence https://creativecommons.org/licences/by/3.0 Although reasonable endeavours have been taken to obtain all necessary permissions from third parties to include their copyrighted content within this article, their full citation and copyright line may not be present in this Accepted Manuscript version. Before using any content from this article, please refer to the Version of Record on IOPscience once published for full citation and copyright details, as permissions may be required. All third party content is fully copyright protected and is not published on a gold open access basis under a CC BY licence, unless that is specifically stated in the figure caption in the Version of Record. View the article online for updates and enhancements.
This content was downloaded from IP address 91.199.6.245 on 02/07/2019 at 11:00

Accepted Manuscript

Page 1 of 20
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1
Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks
David Rodenas-Herr´aiz 1, Xiaomin Xu 1, Paul R A Fidler 1 and Kenichi Soga 2
1 Department of Engineering, University of Cambridge, Cambridge CB2 1PZ, UK; 2 Department of Civil and Environmental Engineering, University of California at Berkeley, Berkeley, CA, USA. E-mail: david.rodenas@eng.cam.ac.uk (D.R.-H.), xx787@cam.ac.uk (X.X.)
Abstract. In this paper we describe the design of a proof-of-concept wireless embedded sensor system for continuous strain cycle monitoring as a method for fatigue life assessment on civil structures. Monitoring of strain cycles is energy demanding, and therefore not suited to energy-constrained devices, as it requires continuous acquisition of strain data with a high sampling rate, followed by data processing using algorithms for peak-trough detection and cycle counting. To overcome this drawback, at the core of our proposed design is a piezoelectricbased analogue sensor system that can achieve as much as a factor of 9 increase in energy eﬃciency compared with the conventional approach. The key component is an analogue peak-trough detector that oﬄoads the computation in peak-trough detection from the microcontroller, thus eliminating the need for continuous sampling. The function of the detector is coupled with an energy-eﬃcient interrupt-driven software design for acquisition and strain cycles calculation, which is carried out by using a standard form of the rainﬂow cycle counting algorithm. For wireless communication and networking, LoRa and LoRaWAN are adopted as core modules. We illustrate the performance of our proposed solution by way of simulation and laboratory experiments. Results show a good agreement in measurement of strain cycles between our proposed system and the conventional approach. Thus, our solution proves to be promising for real fatigue measurement applications.
Keywords: Fatigue, strain cycles, PVDF, analogue peak-trough detector, interruptdriven, rainﬂow cycle counting algorithm, LoRa. Submitted to: Smart Mater. Struct.

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 2 of 20

Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

2

1

2

1. Introduction

gauges (VWSGs) or conventional electrical resistance

3

metal foil strain gauges. In either of these solutions,

4

In-situ monitoring of mechanical strain is important the conventional approach for monitoring fatigue strain

5

in the study of metal fatigue, where the objective is cycles requires continuous data acquisition of strain

6

to understand the progressive failure and degradation by using a relatively high sampling frequency of

7

mechanisms of civil structures like steel bridges, the order of tens of Hz, which is necessary for

8

oﬀshore platforms, cranes, lighting poles, gantries, achieving an eﬀective strain cycles resolution [4, 12,

9

or other high-proﬁle engineering structures [1, 2, 14, 24]. This draws substantial amounts of power,

10

3, 4, 5]. Although metal fatigue is a well-known thus deeming VWSGs and electrical resistance strain

11

engineering problem, its complete understanding gauges inappropriate for long-term monitoring unless

12

remains a challenging and unsolved issue with much compromises are made, such as wired power, high

13

of the research looking at the eﬀects of fatigue in steel capacity, high voltage batteries (which may need

14

bridges [6, 3, 7, 8, 9, 10, 11, 12, 13, 14, 15]. Steel regular replacement or recharging) or, if conditions are

15

bridges are subjected to a large number of repetitive suitable, using energy harvesting techniques, e.g., a

16

local strain concentrations of diﬀerent magnitude solar panel.

17

caused mainly by vehicle loads. These cycling

In this paper, we introduce an original design of a

18

strain concentrations may lead to crack initiation and wireless sensor system for monitoring of fatigue strain

19

growth, corrosion, and eventual structural failure. cycles. Our design uses a piezoelectric transducer to

20

The consequences of structural failure may come sense mechanical strain continuously. A piezoelectric

21

in many diﬀerent forms, for example, material and transducer is a device which generates an electrical

22

structural damage, human injuries and fatalities, loss signal proportional to the mechanical strain of the

23

of the functionality of the structure and environmental surface to which it is bonded. Unlike electrical

24

damage. An example is the closure in November resistance strain gauges, piezoelectric transducers do

25

2015 of the 55-year-old Forth Road Bridge in Scotland not need any external voltage excitation source in

26

because of a fatigue-induced crack found in the truss order to operate. In addition, research has shown

27

end linkage under the carriageway during a routine that the major advantage of using piezoelectric

28

visual inspection [16]. The bridge was completely sensors as opposed to electrical resistance strain

29

closed for three weeks with traﬃc restrictions imposed gauges lies in their superior performance in terms of

30

for several months while repairs were carried out, sensitivity, signal-to-noise ratio and high frequency

31

provoking major travel disruptions and a signiﬁcant noise rejection [26].

32

cost impact [17].

The key novelty of our proposed solution lies in

33

Several methods for assessing fatigue of civil struc- the interaction between the built-in microcontroller

34

tures have been proposed in the literature [18], which (MCU) in the wireless platform and a custom-

35

include non-destructuve testing (NDT) [19], piezoelec- built analogue sensor system speciﬁcally designed for

36

tric actuators [6], acoustic emission [20], surface-mount reducing sampling and computation workload at the

37

piezoelectric paint sensors [21], vibration analysis [22], MCU while minimising the power consumption of

38

ﬁbre Bragg grating sensing [23], and computer vision- the whole system. As previously mentioned, the

39

based methods [24]. However, deployment cost and in conventional approach for monitoring fatigue strain

40

most cases inability of these solutions to operate au- cycles requires continuous strain measurements at

41

tonomously and/or remotely for long periods of time relatively high sampling frequencies. Acquired data

42

are key barriers to large-scale adoption in the civil en- are then processed by extracting the local maxima

43

gineering industry.

(peaks) and minima (troughs) and using such points

44

With merits of low cost sensing, ease of to obtain strain cycles by way of a standard-based

45

deployment and operation, and timeliness of data, cycle counting method, such as the rainﬂow cycle

46

wireless sensor networks (WSNs) have become a counting algorithm [2, 27]. Finally, obtained strain

47

popular choice of remote instrumentation for civil cycles are grouped in the form of a histogram that

48

engineering applications [25], including fatigue strain- reﬂects the number of strain cycles over the period

49

cycle sensing [7, 8, 4, 12]. Two common approaches are of time covered by all the sampled data. For

50

wireless sensors that use either vibrating wire strain energy constrained wireless devices, both sampling

51

52

53

54

55

56

57

58

59

60

Page 3 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

3

1

2

and computing tasks can demand excessive energy events whose strain level exceeds pre-selected levels.

3

consumption, which adversely aﬀects their operational These measurements are stored internally and can

4

lifetime and consequently the success and application only be retrieved by a service vehicle equipped with a

5

of this solution.

Radio Frequency Identiﬁcation (RFID) scanner. Our

6

To overcome this issue, our analogue sensor system approach diﬀers from the above in that we aim to

7

design has the ability to detect peaks and troughs in recover the strain time series history by solely sampling

8

the strain signal sensed by the piezoelectric transducer peaks and troughs without any pre-deﬁned thresholds

9

with no involvement of the MCU. The sought-after and within the framework of long-term operation of

10

beneﬁt of this approach is the elimination of the need low-power systems. In addition, our solution takes

11

for continuous data acquisition. Instead, the MCU advantage of long-range wireless IoT technology for

12

remains in low-power energy saving mode most of the remote data retrieval.

13

time and is only activated by our analogue sensor

14

system to perform a single data acquisition of any 1.1. Contributions

15

detected peaks or troughs. Sampled peak/trough data

16

are then processed by our embedded implementation This paper makes three contributions:

17

of the rainﬂow cycle counting algorithm, and the • To our knowledge, this is the ﬁrst attempt

18

results used to create and/or update a fatigue strain

to apply the idea of a hardware-based peak-

19

cycles histogram stored locally in our system. Finally,

trough detection to applications such as fatigue

20

our solution is designed to transmit the generated

strain-cycle monitoring that require continuous

21

histogram information using Long Range (LoRa) and

information about the times and/or amplitudes

22

LoRaWAN technologies, thus allowing for connectivity

of the peaks and/or troughs in low frequency

23

to other Internet of Things (IoT) technologies [28].

sensor signals. Our approach is supported by

24

Similar work –and also an example of a conven-

mathematical formulation, and can be validated

25

tional system– by Bai et al [7] describes a piezoelectric-

both in simulation and experimentally.

26

based wireless sensor system for local computation of • Through our hardware-based peak-trough detec-

27

fatigue strain characteristics using a digital signal pro-

tion approach, we leverage on-board computa-

28

cessor (DSP). Although we were unable to compare our

tional capacity of energy-constrained data acquisi-

29

power consumption results with those of their exper-

tion systems such as WSNs with the aim of reduc-

30

iments (not reported in their paper), we demonstrate

ing power consumption, and thus achieving a long

31

experimentally that it is possible to oﬄoad from the

operational lifetime. As such, we believe this pa-

32

processor in a uniprocessor system the computational

per both expands the scope of wireless IoT sensor

33

burden of continuous data acquisition and peak-trough

systems and advances the ﬁeld of fatigue monitor-

34

detection, achieving as a result as much as a factor of

ing and assessment.

35 36 37 38 39 40 41

9 reduction in power consumption while having a reasonable measurement accuracy.
Liu et al [13] designed a prototype of an NDT and piezoelectric-based wireless sensor for early detection of fatigue-induced cracks. The detection performance of their proposed solution is shown to be very promising both in the laboratory and by way of a case study

• The paper also presents a study of the peak-trough detection accuracy achieved by our system by way of extensive computer simulations, followed by a system performance evaluation through laboratory experiments that compare our proposed solution with the conventional approach.

42

on a real bridge structure. However, reported power

The remainder of this paper is organized as

43

consumption values are signiﬁcantly higher (of the follows. Section 2 provides background on fatigue

44

order of several hundreds of mW) than our results strain-cycle monitoring and analysis. Section 3

45

(5 mW on average). In fact, their design is intended to describes our solution, giving implementation details

46

perform individual readings only once every week (or on the main hardware and software components. In

47

certain number of weeks), while our solution has the Section 4 we validate and show the performance

48

ability to sense continuously.

of our system by way of simulation and laboratory

49

Finally, Alavi et al [9, 10, 11] presented a proof- experiments. Finally, Section 5 concludes the paper.

50

of-concept wireless sensor and a data interpretation

51

framework for early detection of distortion-induced 2. Background on fatigue analysis

52

fatigue cracks. The system is based on a self-powered

53

piezo-ﬂoating-gate (PFG) sensor, initially devised by It is quite common for components of engineering

54

Michigan State University for smart health monitoring structures to be subjected to repeated cyclic loads.

55

of pavement systems [29]. Their approach consists These loads induce cyclic stresses within the material

56

of cumulatively measuring the duration of loading that result in microscopic physical damage, even when

57

the gross stresses are well below the ultimate strength

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 4 of 20

Stress Accepted Manuscrip amplitude-!"/t

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

4

1

2

of the material. This microscopic damage accumulates

3

over time as the cyclic stress continues until eventually

4

a macroscopic crack or other visible damage appears.

5

The process of permanent damage accumulation due

6

to cyclic loading is known as fatigue.

!$"% !" !$
!$'(

!"

#

!$"%

& !$'( )

!$

#

!$"%

* !$'( )

+ # !$"%,!$'(

7

While these discussions pertain to micromechani-

8

cal processes, phenomenological continuum approaches

REGION I

REGION II

REGION III

9

are widely used to characterize the total fatigue life as

Low-cycle fatigue

High-cycle fatigue

10

a function of variables such as the applied stress range,

11

strain range, mean stress and the environment. The

Endurance limit -!./

12 13 14

fatigue life of a structure or a component is deﬁned as 103 the total number of cycles or time to induce fatigue damage and to initiate a dominant fatigue ﬂaw which

104

105

106

Cycles to failure -01/

107

15

is propagated to ﬁnal failure. The general view is that Figure 1. S-N curve, cyclic stress versus number of cycles to

16

in a high-stress regime (commonly referred to as the failure for fatigue characterisation.

17

low-cycle fatigue, LCF), fatigue life is primarily deter-

18 19

mined by crack propagation, whereas in a low-stress regime (referred to as the high-cycle fatigue, HCF), fa-

2.2. Mean stress eﬀect

20

tigue life is mainly dominated by crack initiation. This It is noted that most basic S-N fatigue data collected

21

arbitrary division may vary from material to material in the laboratory is generated using a fully-reversed

22

depending upon its mechanical properties. From de- stress cycle, where the mean stress of the fatigue cycle

23

sign viewpoint, the main concern for engineers is the σm is zero (R = −1). However, this is not always

24

high cycle region. However, low cycle fatigue data can representative of many applications. The mean level

25

be advantageous when only a short service life is re- of the imposed fatigue cycle is known to play an

26

quired [1].

important role in inﬂuencing the fatigue behaviour of

27

engineering materials. To overcome this issue, one can

28

2.1. S-N curve and fatigue limit of stress-life approach apply the modiﬁed Goodman relationship, as expressed

29

by:

30

The widely used stress-life approach in fatigue analysis

31 32

was ﬁrst introduced in the 1860s by W¨ohler, mostly in HCF applications [2, 3]. This method is adopted

σa = σa|σm=0

1 − σm σT S

(1)

33

in our research. The basis of the stress-life method where σa is the stress amplitude denoting the fatigue

34 35

is the W¨ohler S-N diagram, as schematically shown in Figure 1, which plots the nominal stress amplitude

strength for a non-zero mean stress, σa|σm=0 is the stress amplitude for fully-reversed loading (σm = 0

36 37

σa versus the number of cycles to failure Nf . It can be expressed as σa = σf (2Nf )b, where σf and b are

and R = −1), and σT S is the tensile strength of the material.

38

the fatigue strength coeﬃcient and fatigue exponent,

39

respectively. There are numerous testing procedures to 2.3. Varying amplitude

40

generate the required data for a proper S-N diagram.

41

S-N test data are usually displayed on a log-log plot, The principles of stress-based characterization of

42

with the actual S-N line representing the mean of the total fatigue life are only relevant for constant

43

data from several tests. Under constant amplitude amplitude fatigue loading. In reality, however,

44

loading conditions, the specimen under testing exhibits engineering components are invariably subjected to

45

a plateau in the stress-life plot typically beyond about varying cyclic stress amplitudes, mean stresses and

46

106 fatigue cycles. Below this plateau level, the loading frequencies. A simple criterion for predicting

47

specimen may be cycled indeﬁnitely without causing the extent of fatigue damage induced by a particular

48

failure. This stress amplitude is known as the fatigue block of constant amplitude cyclic stresses, in a loading

49

limit or endurance limit, σe, as indicated in Figure 1. sequence consisting of various blocks of diﬀerent stress

50

Deﬁnitions of other key terms include stress range amplitudes, is provided by the so-called Palmgren-

51

∆σ (the diﬀerence between the maximum stress and Miner cumulative damage rule [30]. Miner’s rule states

52

minimum stress), mean stress σm (the average of the that the cumulative damage index, CD, is given by:

53 54 55

maximum and minimum stresses), stress amplitude σa (half of the stress range), and stress ratio R (the ratio of minimum stress to maximum stress).

CD = ni = 1 i Ni

(2)

56

where ni is the speciﬁed number of cycles for the ith

57

stress range, Si, and Ni is the corresponding number

58

59

60

Page 5 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Accepted Manuscript Application

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

5

1

2

of cycles to failure for the ith stress range. This rule

Wireless sensor platform

3 4

assumes that, when CD is equal to one, the cumulative damage should cause failure. Several structures

Piezoelectric sensor

Either built into the MCU or external

Long-range wireless RF transceiver

5

design standards follow this methodology, such as the

Microcontroller unit (MCU) Software

6

British Standard EN 1993-1-9 [31] and the American

Peak detection

GPIOx

Fatigue strain-

7

Association of State Highway and Transportation

Signal conditioning

cycles histogram

8

Oﬃcials (AASHTO) Bridge Design Speciﬁcations [32].

Phase shift

ADC

9

Rainflow cycle counting algorithm

10

2.4. Strain monitoring and rainﬂow cycle counting

11

Analogue sensor system Analogue connection

Digital connection

12

Prior to calculation of fatigue life, it is necessary

13

to monitor strain over a signiﬁcant period of time Figure 2. System overview.

14

(of the order of days or even weeks). A cycle

15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45

counting algorithm, such as the rainﬂow cycle counting algorithm [27], is then used to process the strain time series and extract a stress range histogram. A stress range histogram presents the occurrence of stress cycles in terms of the number of cycles for each stress range magnitude captured during the measurement period. Then, this variable amplitude loading in the histogram is converted to an eﬀective constant amplitude stress cycle using Miner’s rule. This eﬀective stress is used to calculate the total number of cycles that the structural (or mechanical) component could experience through all its lifetime by using the aforementioned SN curves. Finally, the total number of cycles to failure is converted to the remaining lifetime in years.
The authors are aware of a number of sources of uncertainty in the analysis of fatigue results, in general, and in the use of the stress-life approach, including the estimation of material properties, service conditions and environment. Such uncertainties could be analysed using known statistical approaches to derive the level of reliability or probability of failure. These factors are beyond the scope of the current work, but will be considered in future analytical work on fatigue data captured using our proposed approach.
Other commonly used methods are the strain-life and the fracture mechanics methods. The strain-life method is used for the study of the process of crack initiation, whereas the fracture mechanics method is used for the study of crack propagation mechanisms over time. The latter may be combined with the strainlife method in order to consider crack initiation.

through the analogue sensor system. The analogue sensor system converts the output current from the sensor into a measurable voltage signal, and then generates a hardware interrupt whenever it detects a peak or trough (local maximum or minimum) in such voltage signal. For every signal interrupt, the MCU embedded in the wireless sensor platform triggers an analogueto-digital converter (ADC) reading. The measured data point is input to the rainﬂow cycle counting algorithm [27]. Results from the algorithm are used to create and/or update a histogram that represents the cumulative strain distribution over time.
The ﬁnal step is the wireless transmission of the generated histogram information. The transmission interval is application-speciﬁc, e.g., hourly, daily or even weekly. In our work, wireless communication and networking are based on Long Range (LoRa) and LoRaWAN [33], respectively, but other wireless technologies, such as Narrowband IoT (NB-IoT) [34], may be adopted. LoRa is a proprietary radio modulation technology developed by Semtech Corporation. LoRa has become the underlying physical layer technology proposed for use in LoRaWAN, an open-source PHY and MAC protocol stack actively supported by the LoRa Alliance. Compared to other low-power wireless systems (e.g., IEEE 802.15.4-based radios), LoRa brings many sought-after beneﬁts for outdoor monitoring applications, which include: longer communication range (of the order of several km in rural areas) with similar power consumption, increased robustness against interference and noise, and higher multipath, fading and

46

Doppler resistance [35].

47

3. Proposed architectural design

In the following subsections, we describe each

48

component in detail.

49

Figure 2 shows the block diagram of our proposed wire-

50 51

less sensor system for fatigue strain-cycles monitoring consisting of three distinct components: a piezoelectric 3.1. Piezoelectric thin ﬁlm sensor

52

transducer, an analogue sensor system, and a wireless The fundamental operating principle of piezoelectric

53

sensor platform. The piezoelectric sensor is to be at- materials is that they generate an electrical charge or

54

tached to a structural element where fatigue damage electrical polarization in response to an external force,

55

is likely to occur. At this attachment point, any me- i.e., a mechanical stress. This phenomenon is known

56

chanical strain would be converted by the piezoelectric as the direct piezoelectric eﬀect. When the material is

57

sensor into an alternating current (AC), and passed

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 6 of 20

Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

6

1

2

compressed, it creates a charge of the same polarity generated by the sensor, considering the Poisson’s and

3

as the polar axis. When the force is reversed, i.e., the shear lag eﬀects, is given by the Equation 3. In this

4

material is stretched, it outputs a charge of opposite Equation, Sq = d31Y11Ap is deﬁned as a sensitivity

5

polarity. Thus, a reciprocating mechanical force results parameter, whereas the capacitance Cp is given by

6

in an alternating output current, whose amplitude and Cp = ε0εrAp/tp, where tp is the thickness of the sensor,

7

frequency are directly proportional to the mechanical ε0 is the vacuum permittivity and εr is the relative

8

deformation of the material. There is also a converse permittivity of the piezoelectric material.

9 10

eﬀect, called the indirect piezoelectric eﬀect, whereby an applied electrical ﬁeld produces a proportional

ε = vpCp

(3)

11

deformation of the material. For measuring strain, we

Sq Kp Kb

12

take advantage of the direct piezoelectric eﬀect.

Piezoelectric sensors have typically a very high

13

From the electrical point of view, a piezoelectric output impedance that results in a very small electrical

14

ceramic thin ﬁlm sensor, such as a Polyvinylidene charge, which is diﬃcult to measure using ordinary

15

ﬂuoride (PVDF)-based sensor, can be modelled by two oscilloscopes and voltmeters. To measure vp the

16

types of equivalent circuits: either a current source output signal of the piezoelectric sensor needs to be

17

in parallel with a capacitance, or a voltage source in passed through some signal conditioning electronics

18

series with a capacitance. As shown in Figure 3a, we with suﬃcient high impedance (of the order of M Ω or

19

choose to use the second circuit type consisting of a even GΩ) in its input and low impedance in its output.

20

voltage source, vp, representing the induced voltage With this conﬁguration, it is possible to produce an

21

across the sensor terminals, and a series capacitance, output voltage that is large enough to be measured

22

Cp, indicating the capacitance of the ﬁlm. In such with most ADCs. Details of the signal conditioning

23

model, we also consider a capacitance Cc in parallel design used in this work are given below.

24

with vp, to model the capacitance of the cables which

25

carry the output signal of the sensor. The vp is related 3.2. Analogue sensor system

26

to Cp and the charge generated by the ﬁlm sensor, q,

27

as vp = q/Cp.

Our analogue sensor system design has one input, i.e.,

28

The mathematical expression of the generated the AC current output signal from the piezoelectric

29

charge q can be found by integrating the electrical ﬁlm, and two outputs: (i) a hardware interrupt to

30

displacement, D, over the area of the ﬁlm, Ap (= lpbp, signal the occurrence of peaks and troughs, and (ii)

31

where lp and bp are the length and width of the a voltage signal that is proportional to the current

32 33

ﬁlm, respectively), as vp = Ap D dAp, where d is the coeﬃcient of proportionality. Rigorous deﬁnitions

signal of the piezoelectric sensor and that can be measured using an ADC. The two main building blocks

34

of the electrical displacement and the coeﬃcient of of our analogue sensor system are signal conditioning

35

proportionality, as well as their relation to the strain and peak-trough detection. The ﬁrst block allows

36

ε may be found elsewhere [36, 26]. Considering the matching of the output impedance and range of

37

eﬀects of longitudinal (1-direction) and transverse (2- the piezoelectric ﬁlm to the input impedance and

38

direction) strains, the actual deﬁnition of the electrical measurement range requirements of the ADC that is

39 40 41

displacement is D = d31Y11ε1 + d32Y22ε2, where Y ≈ Y11 ≈ Y22 is the Young’s modulus of the piezoelectric material. For a longitudinal stress, there will be a

to be used, while the second building block implements our analogue circuit design for continuous peak-trough detection. Please note that, in our wireless sensor

42

lateral strain due to the Poisson’s eﬀect at the location system design, we consider the ADC to be part

43 44

of the sensor, such that ε2 = −vε1, where v is the Poisson’s ratio of the material to which the sensor is

of the wireless sensor platform rather than being integrated into the analogue sensor system itself, such

45

attached (typically 0.2 for steel). To account for the that the dimensions and power requirements of the

46

Poisson’s eﬀect in the total strain, a correction factor system are kept to a minimum. An additional beneﬁt

47 48 49

Kp may be applied. For PVDF, this correction factor is Kp = (1 − v d31/d32).
Shear lag eﬀects caused by ﬁnite thickness bond

of this approach is that our design can be easily interfaced with any MCU with an on-chip ADC, such as the ARM Cortex-M3-based MCUs, which

50

may also be accounted for by way of the derivation are becoming commonplace in most IoT low-power

51 52

of another correction factor Kb. The value of Kb is dependent only on the geometry of the sensor.

embedded systems. In this work, we use the NZ32L151 platform from Modtronix Engineering [37], which

53 54

For PVDF, it has been shown that Kb is very close to unity and therefore the shear lag eﬀect could be

uses the ST Microelectronics ARM Cortex-M3-based STM32L151RC MCU featuring a 12-bit successive-

55

neglected [26].

approximation-register (SAR) ADC, but other MCU

56

The relation between the strain and voltage chips and/or ADC types could be adopted.

57

58

59

60

Page 7 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Strainu (με) script

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

7

1

2

R2

oﬀ of the charge on the feedback capacitor, while

3

the latter prevents the capacitor from charging and

4

5

Sensor model

C1

discharging at excessive rates [39]. LPV811 [40] from

Texas Instruments is a single-supply op-amp with

6 7 8

Cp vp
Cc

POS R1

+Vcc − OA1
vo1

nano-current consumption (∼450 nA) that fulﬁls these requirements and is chosen for this circuit. The resistor R1 is also added in series with the op-amp inverting

9

+

input to improve the stability of the circuit and further

10

NEG

increase its input resistance by limiting input currents

11

12

R8

R9

+Vcc/2

13

+Vcc

14

+Vcc/2

due to accidental high input voltage [41]. On the other hand, the output voltage of the charge-mode ampliﬁer, vo1, is shifted to the middle of the input range of the ADC by using a DC reference voltage. This reference

15

Voltage divider

Charge-mode amplifier

voltage is equal to half of the input supply voltage, i.e.,

16

(a)

+Vcc/2, which is obtained by halving the input supply

17

voltage using a voltage divider (resistors R8 and R9).

18

19

100

Output ignal from piezoelectric en or (ε)

Note that the circuit design, which also includes the peak-trough detection and sampling stages described

20

50

later, allows single supply operation. In our design, the

21

0

supply source is taken from the same power source as

22 23

−50

the wireless platform. Figure 3b illustrates an example of operation.

24 25 26

−100 012345
4.0 vo1

From [41, 26], the output voltage of the charge ampliﬁer can be derived as:

27

3.0

28

2.0

29

+Vcc/2 ADC's input range

vo1

=

+Vcc 2

−

jωR2C1 1 + jωR2C1

Sq ε C1

30

1.0

31

0.0

= +Vcc − H(jw) Sqε

(4)

2

C1

Voltage Accepted M(V)an

32

0

1

2

3

4

5

where H(jw) is the complex transfer function of

33

Time (s)

the charge ampliﬁer and ω is the angular frequency

34

(b)

of operation. One important advantage of the charge

35

ampliﬁer circuit is that its transfer function, and hence

36 37

Figure 3. Sensor signal conditioning: (a) equivalent electrical circuit; (b) example of operation, where the top side shows the sensor’s output and the bottom side the output from the signal

its output, are neither aﬀected by the capacitance of the ﬁlm Cp nor of the connecting cable Cc. This fact

38

conditioning circuit. For this example, the sensor model is based is reﬂected in Equation 4. As seen, the output of

39 40

on the PVDF sensor DT1-028K from TE Connectivity [38], C1 = 4nF , R2 = 1GΩ and Vcc = 3.3V . Conversion from strain to voltage output, and vice versa, is based on Equation 4.

the circuit depends only on the value of the feedback capacitor C1. Thus, with the appropriate choice of

41

C1 (while assuming a ﬁxed value of the feedback

42

resistance R2) it is possible to adjust the sensitivity

43

3.2.1. Signal conditioning stage

of the circuit and provide the required measurement

44 45 46 47 48 49 50

The circuit shown in Figure 3a represents the input signal conditioning for the piezoelectric ﬁlm sensor. The circuit collects the charge input signal from the ﬁlm and produces a measurable voltage that is proportional to the input charge.
To be able to convert the input current from the

range. However, it is to be noted that the circuit exhibits a low cut-oﬀ frequency, flH = 1/(2πR2C1). As stated in [26], this sets a design trade-oﬀ between
the achievable sensitivity and the values that can be
selected for R2 and C1 mainly due to operational constraints.

51 52

ﬁlm, a charge-mode ampliﬁer is used. The chargemode ampliﬁer consists of an operational ampliﬁer 3.2.2. Peak detection and sampling stages

53

(‘op-amp’ for short) (component OA1 in the Figure), Our proposed peak-trough detector consists of a non-

54

with a negative feedback loop based on a feedback inverting op-amp comparator with positive feedback,

55

resistor (R2) and a feedback capacitor (C1) in parallel. also called non-inverting Schmitt trigger, and a linear

56

The op-amp is required to have a high input resistance resistor-capacitor (RC) delay circuit connected to the

57

and low bias current. The former avoids bleed- inverting input terminal of the op-amp comparator.

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 8 of 20

Voltageu (V) script

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

8

1

2

Figure 4a (top) shows the equivalent electrical circuit.

3

The basic functionality of the op-amp comparator (op-

Inverting Schmitt R4 trigger

4

amp OA2 in the Figure) is to compare two input

5

analogue signals (one at each op-amp’s input terminal)

6

and give a binary output signal as a result of the

7

comparison. The output signal vo2 has two possible

8

levels, VOH and VOL (where VOH > VOL), representing

9

the high-level and low-level outputs of the comparator,

vo1

R3

+Vcc

vo2

+ OA2 R6

R5

vφo1 −

Interrupt-driven

GPIO pin C2

10

respectively. The circuit requires a rail-to-rail op-

11

amp such that its output swings closer to the positive

12

(VOH ≈ +Vcc) and negative (VOL ≈ Vee; in our

13

design Vee is tied to ground) rails, and thus output

14

state transitions can be better identiﬁed and used to

vφo1
Voltage follower

+Vcc + OA3
−

vo3 R7
C3

ADC (AINx)

15

trigger hardware interrupts. OPA333 [42] from Texas

16

Instruments is a fast rail-to-rail, single-supply op-amp

(a)

17 18

with micro-current consumption and is chosen for both op-amps OA2 and OA3 in Figure 4a.

3

vo1

vo1 crosses voϕ1

19

The operation of the circuit is as follows. The

voϕ1≈vo3

20

analogue output signal from the charge ampliﬁer

2

21

circuit vo1 is applied to the non-inverting terminal of

1

22

the op-amp comparator. The same signal vo1 is also

23

applied to the RC delay circuit formed by the resistor

0

24

R5 and the capacitor C2. The output signal, that

0.0

0.5

1.0

1.5

2.0

2.5

3.0

25

we denote as voφ1, lags behind vo1 in phase, and is

3

26 27 28 29

applied to the inverting terminal of the op-amp. The
signal vo2 results from the comparison between vo1 and voφ1. Transitions from low to high and high to low are used to signal the occurrence of a peak or

2

vo2 VOH

1

VOL

Voltage Accepted Ma (V) n

30

trough, respectively. For every transition, an interrupt

0

31

to the MCU followed by a single ADC conversion of

0.0

0.5

1.0

1.5

2.0

2.5

3.0

Time (s)

32

the signal vo3 is generated. The signal vo3 is eﬀectively

33

voφ1 after being passed through a buﬀer ampliﬁer, also

(b)

34

called voltage follower (op-amp OA3). The buﬀer Figure 4. Peak-trough detection: (a) equivalent electrical

35

ampliﬁer is used to avoid loading eﬀects arising from circuit; (b) example of operation, where the top side shows the

36 37

the direct connection of voφ1 to the ADC, which can signiﬁcantly aﬀect the reliability of the peak-trough

input to the op-amp OA2, i.e., vo1 and voφ1, and the bottom side the output signal vo2, resulting from comparing vo1 and voφ1. For

38

detection. A single-pole low-pass RC ﬁlter (R7/C3)

this example, the two possible states of vo2 depend on the supply voltage for the op-amp OA2, i.e., VOH = +Vcc = 3.3 V while

39

follows the buﬀer ampliﬁer to further reduce out-of- VOL = Vee = 0 V.

40

band noise.

41

It is important to note that the series RC delay

42

circuit in our design is in fact another ﬁrst-order low- is the signal frequency of vo1. This phase lag is

43

pass ﬁlter, with cut-oﬀ frequency:

important in our case to ﬁnd peaks and troughs. The

44 45 46

flF

=

1 (2πR5C2)

op-amp looks at any voltage value of vo1 and compares (5) it with the voltage level at voφ1, which corresponds to
an earlier level of vo1. Thus, we can determine whether

47

and no signal gain. This has the following two the polarity of slope of vo1 is either positive (i.e.,

48

implications. First, the circuit only passes unaltered the signal voltage is increasing thus approaching to a

49

low frequency signals from 0 Hz to its cut-oﬀ frequency, peak), negative (i.e., the signal voltage is decreasing

50

while attenuating or weakening others. This means thus approaching to a trough), or whether the polarity

51

that R5 and C2 must be appropriately chosen such changes (a peak or trough has been reached). One

52

that those frequencies of interest to fatigue strain disadvantage of this circuit is that the phase lag is

53

monitoring (typically from 1 Hz to 20 Hz [7, 29, 4, not constant over the range of frequencies of vo1,

54

24, 14, 15]) pass through the RC circuit unaﬀected. being smaller at lower values. Nonetheless, with the

55

Second, as the ﬁlter contains a capacitor, there appropriate choice of R5 and C2, it is possible to design

56 57

exists a lagging phase diﬀerence between vo1 and voφ1 determined by φ = − arctan(2πfvo1 R5C2), where fvo1

an RC circuit with the desired phase lag at the sensor signal frequencies of monitoring interest. The impact

58

59

60

Page 9 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

9

1

2

of selection of R5 and C2 on performance is discussed a peak. As seen, in this case the polarity of the slope of

3

in Section 4.

vo1 is positive. In addition, the op-amp comparator’s

4

We next describe the operation of our peak-trough output vo2 is at its high voltage state, VOH , and will

5

detector circuit analytically [43]. The comparator’s remain at this state as long as the voltage of both

6

output signal vo2 is given by:

signals is the same. At the moment in time where the

7 8 9 10

vo2 = AOA2 (v+ − v−)

(6)

where v+ and v− are the voltage signals at the noninverting and the inverting terminals, respectively, and

voltage of vo1 reaches its peak and starts decreasing towards the next trough, the voltage level of voφ1 is still increasing. When vo1 crosses voφ1, the op-amp immediately changes its output from high to low (i.e.,

11 12

AOA2 is the circuit’s gain. The signal v+ at the non-inverting terminal is a

from VOH to VOL). Shortly after, voφ1 is also at its peak value and starts decreasing. The voltages of both

13

combination of the op-amp’s output vo2, its input vo1, signals are now the same and therefore the op-amp’s

14

and the voltage divider formed by resistors R3 and R4: output remains at its low state. The same reasoning,

15 16 17

v+

=

vo1

R4 R3 +

R4

+

vo2

R3

R3 +

R4

(7) in reverse, applies to the occurrence of a trough.

18

The signal v− at the inverting terminal corre- 3.3. Software Architecture

19 20

sponds to the voltage output of the preceding passive low-pass RC ﬁlter, voφ1. The governing equation for voφ1

We designed the software architecture to be easily extendable to other embedded platforms that may be

21

can be found to be [44]:

programmed with a C-based operating system (OS)

22 23

voφ1 =

1 1 + jωR5C2

vo1 = F (jω) vo1

24

such as Contiki OS [45] or freeRTOS [46]. In our (8) work, all software modules including the ﬁrmware for
the NZ32-L151 platform and the LoRa transceiver

25

where F (jω) is the transfer function of the RC ﬁlter. module used (i.e., SX1276-based module also from

26 27

From Expression 6, we see that the transitions will occur when v+ crosses voφ1, then:

Modtronix Engineering), as well as the LoRaWAN endpoint protocol stack [47], were implemented and/or

28 29

voφ1

=

VT→

R4 R3 + R4

+

vo2

R3 R3 + R4

(9)

ported for the Contiki OS. Source code is available online [48].

30 31 32

where VT→ is the transition voltage. From [43], the transition voltage from VOH to VOL, and vice versa, can be derived, respectively, as:

Data acquisition and wireless transmission tasks are executed in an interrupt-driven manner. Data acquisition is primarily triggered by external interrupts

33

from the analogue sensor system, whereas wireless

34

35 36

VTOH→OL

=

Vs

−

VOH

R3 R4

(10a)

transmission may be triggered by internal interrupts generated by the running application. For data acquisition, the GPIO line connected to the output

37 38

VTOL→OH

=

Vs

−

VOL

R3 R4

(10b) signal vo2 of the analogue sensor system is set as input to the MCU and conﬁgured to detect changes in vo2

39 40

where Vs = voφ1 (1 + R3/R4). The non-inverting Schmitt trigger circuit inher-

from low to high (trough) and from high to low (peak). In this way, an interrupt to the MCU is generated

41

ently exhibits hysteresis, which depends on the values when a peak or trough occurs. This interrupt wakes

42

for resistors R3 and R4 (Equation 11) but also on the up the MCU from low-power mode (we use the stop

43 44 45

frequency of the input signal vo1. This characteristic can be used to ignore any noise introduced in vo1, as well as very small peak-to-peak strain signals with

mode in our implementation [49]) and then triggers the acquisition of a single data point using the MCU’s built-in ADC. The acquired data point is stored in a

46

limited or no contribution to fatigue strain-range cal- buﬀer in the RAM memory for later analysis by using

47

culation. This has an advantage that interrupt triggers the rainﬂow cycle counting algorithm. Such analysis

48

for sampling and subsequent strain range cycle compu- will be carried out when the buﬀer is full. Results

49

tation, and hence the overall power consumption, can from the algorithm will then be grouped in the form

50

be further reduced.

of a histogram that will be updated as new results

51 52 53

Vhyst

=

VTOL→OH

−

VTOH→OL

=

(VOH

−

VOL)

R3 R4

(11)

are obtained. Finally, the MCU is allowed to go into low-power mode to save energy when there are neither any interrupt calls to be serviced nor any computation

54

Figure 4b illustrates an example of the operation tasks in progress.

55

of our peak-trough detector circuit. For ease of

Details of the rainﬂow cycle counting algorithm

56

explanation, let us assume that the voltage levels of are given next.

57

vo1 and voφ1 are both increasing and thus approaching

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 10 of 20

Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

10

1

2

3.3.1. The rainﬂow cycle counting algorithm

Algorithm 1: Rainﬂow cycle counting algorithm

3 4

Our implementation of the rainﬂow cycle counting

Initialization : Set three-point sequence s = {0}, n = 0, K = 0

5

algorithm is based on the three-point algorithm

Data: Vector S containing peaks and troughs

6

presented by Bannantine et al [2]. However, our

1 if (At the end of S) then

7 8

implementation diﬀers from Bannantine et al in that no re-arrangement of the series of peaks and troughs

Go to 6; else
Assign next peak or trough from S to s, n = n + 1;

9

is necessary prior to analysis. Our implementation

Set K to point to the ﬁrst element in S;

10

also diﬀers in that it requires an extra point to be

2 if (n < 3) then

11

considered at each iteration of the algorithm in order to

Go to 1;

12 13 14 15

discern between one-half and full cycles, as described in Section 5.4.4 of the ASTM E1049-85 standard [27].
In each iteration, a sequence s[ ] containing the three most recently acquired consecutive points in the

else Xn = |s[n] − s[n − 1]|; Yn = |s[n − 1] − s[n − 2]|;
3 if (Xn ≥ Yn) then Go to 4;

16

series of peaks and troughs S (i.e., the buﬀer stored in

else

17

the RAM memory) is analysed. The storage data size

Go to 1;

18

of S is limited to a vector length of NS values in order

4 if (K ⊂ Yn) then

19 20

to minimise memory overheads of the algorithm. The parameter NS can be conﬁgured at compile time (as a

Go to 5;
else Store Yn as one cycle for later histogram

21

power of two) and is speciﬁc to the deployment in which

creation/update;

22

the wireless sensor system is used. Each iteration of

23

the algorithm involves comparing the magnitude of

Remove s[n − 2, n − 1] from S so that s only contains s[n], n = n − 2;
Go to 2;

24 25

two strain ranges Xn and Yn formed by the sequential strain values s[n − 2, n − 1, n], such that

5 Store Yn as one-half cycle for later histogram creation/update;

26

Xn = |s[n] − s[n − 1]|

27 28

Yn = Xn−1 = |s[n − 1] − s[n − 2]|

(12)

Remove s[n − 2] from S so that s only contains s[n − 1, n], n = n − 1;
Go to 2; 6 Store each range that has not been previously counted

29

where n is an index to the series S. As aforementioned,

as one-half cycle, then STOP;

30

our implementation requires an extra point K, which

31

is always the ﬁrst element in the series. A cycle is

32

identiﬁed if Xn ≥ Yn, being Yn its strain range. If 32-bit integer arrays, one per each cycle type, that map

33

the sequence s contains K (i.e., K = s[n − 2]), the from a strain range interval to its associated number

34

cycle is counted as a one-half cycle; otherwise, the of cycles. This allows us to count up to 232 − 1 strain

35

cycle is a full cycle. For each one-half cycle, the point cycles per bin, or equivalently, per strain range interval.

36

K = s[n − 2] is removed from the series, in which case Given a cycle with strain range rε, we ﬁnd the bin i it

37

K points to s[n − 1] and the algorithm proceeds, in belongs to by dividing rε by the histogram’s bin width.

38

a similar manner, with the sequence of three points This approach has O(1) runtime performance and

39

s[n − 1, n, n + 1]. Conversely for each full cycle, the requires O(nbins) space, where nbins is the number

40

points s[n − 2] and s[n − 1] are removed from the of bins or strain range intervals in the histogram.

41

series, and the algorithm proceeds with the sequence

The lower and upper range values (minimum and

42

s[n − 4, n − 3, n]. If no cycle is identiﬁed, then the maximum strain range values of monitoring interest) of

43

next iteration of the algorithm considers the sequence the histogram, as well as the bin width are application-

44

s[n − 1, n, n + 1] and so on until the entire series is speciﬁc parameters and should be chosen such that the

45

processed. Our implementation of the rainﬂow cycle distribution of strain cycles over any desired period

46

counting algorithm runs in O(NS) time and requires of time (e.g., an hour, a day or a week) can be

47

O(NS) space. Algorithm 1 shows the pseudo-code observed clearly from the histogram. In particular,

48

of our implementation of the rainﬂow cycle counting cycles with a strain range falling below the lower

49

algorithm.

bound of the histogram are discarded and hence not

50

transmitted via wireless. This lower bound may

51

3.3.2. Histogram representation and wireless transmis- be chosen simply by applying engineering judgement

52

sion of strain cycles

based on prior knowledge of the strain ranges that are

53

typically encountered in the monitored asset, including

54

A histogram with equally sized bins is constructed their relevance to potential fatigue damage. Our

55

and continuously updated with the strain cycle values current software implementation allows speciﬁcation of

56

computed using the rainﬂow cycle counting algorithm. these parameters only at compile time. Future work

57

More speciﬁcally, we build and maintain two unsigned

58

59

60

Page 11 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

11

1

2

considers providing support for over-the-air parameter

While the operation of the entire analogue sensor

3

conﬁguration to adapt to potential changing strain system including signal conditioning can be simulated

4

conditions over time as well as to civil engineer(s) at once, in this part we only consider the peak-trough

5

requirements for strain data collection and information detector circuit. We do so in order to have full

6

processing.

control of the characteristics (i.e., signal amplitude and

7

An important choice to make is the number of frequency) of the signal vo1 that is input to the circuit.

8

histogram bins. A trade-oﬀ exists between this and the The evaluation is performed using extensive transient

9

maximum possible data payload of a LoRa/LoRaWAN simulations with Tina-TI by Texas Instruments and

10

data frame, which in turns depends on the selected DesignSoft, a SPICE-based simulation tool designed

11

transceiver settings. These settings include the to build and simulate analogue circuits.

12

modulation type (i.e., either LoRa or frequency-shift

We ﬁrst study the eﬀect of having diﬀerent R5C2

13

keying (FSK) modulation), carrier frequency, transmit delay network conﬁgurations. For the sake of brevity,

14

power, spreading factor, coding rate and channel we will only show the results for diﬀerent capacitor

15

bandwidth. Selection of these parameters can be made sizes, from 1 µF to 10 µF , while the rest of circuit

16

to meet end application requirements, but the link parameters including R5 remain ﬁxed. The applied

17

between these poses an important performance-related input signal vo1 is sinusoidal with varying amplitude

18

trade-oﬀ between transmission throughput, energy Avo1 , from 0.2 V to 1.6 V in individual steps of 0.2 V,

19

consumption, communication range and resilience to and frequency fvo1 , from 1 Hz to 20 Hz, in 1 Hz steps.

20

noise [50]. Therefore, if the application message The selected amplitudes were chosen to match the

21

size, which is dependent on the number of histogram ADC input range (it is worth remarking that the zero

22

bins, exceeds the maximum available data payload in of the circuit is shifted to the middle of the ADC input

23

the resulting LoRa data frame, more transmissions range, using a reference of Vcc/2), whereas the selected

24

are required in order to send the entire histogram. frequencies cover the range of frequencies of interest

25

This choice can lead to increased energy consumption, for typical applications of fatigue damage monitoring.

26

possibly compromising operational lifetime where the

In Figure 5 we plot the average absolute and

27

power source relies on the sole use of batteries.

relative measurement error, deﬁned as the average

28

absolute (in Volts) and the percentage diﬀerence

29

4. Results

30

between the peak/trough amplitudes when post processing vo1 with both a standard peak-trough

31

In this section we use extensive computer simulation detection software algorithm, and with our hardware-

32

and laboratory experiments on real hardware to based peak-trough detector circuit. Since our

33

validate our proposed solution. All the simulation hardware is simulated, the latter are obtained using

34

scripts, the scripts for data analysis, and the a post-processing algorithm that computes peaks and

35

generated simulation and experimental data are troughs from the simulated values of vo2 and voφ1

36

available online [48].

signals as output from Tina-TI simulator. These

37

results represent a best-case performance in real-world

38

4.1. Simulation: Evaluation of detection performance deployments since other factors such as interrupt

39

latency and the latency and settling time of the ADC

40

An important consideration in the operation of our are not captured.

41

proposed system is the inherent short time lag that

In the ﬁrst instance, the measurement error

42

exists between when a signal peak (or trough) occurs increases almost linearly with frequency as the

43

and when the ADC obtains the subsequent strain capacitor size is increased. This behaviour is expected

44

reading from the signal vo3. The ﬁrst source of lag is in of an RC delay circuit – given a ﬁxed resistance R5,

45

the peak-trough detection since peaks and troughs are the bigger the capacitance C2, the smaller the cut-

46

signalled shortly after the actual points occur. Lags oﬀ frequency flF of the circuit (see Table 1), and

47 48 49 50

in the electronics, interrupt latency and the latency and settling time of the ADC also add to the total time lag. The above adversely aﬀects the detection performance of our system in terms of measurement

consequently, the more attenuated the amplitude of voφ1 becomes as fvo1 approaches flF . It is to be noted that the signal to be sampled, vo3, is voφ1 after a voltage follower and another series RC network with a much

51

accuracy, which is deﬁned as the closeness of the higher low cut-oﬀ frequency hence with no signiﬁcant

52 53 54

measured value to the true value of the signal peak or trough. Therefore, our initial objective is to evaluate the detection performance of our system and the

inﬂuence over voφ1 for the range of frequencies of interest. Therefore, the detection error at higher fvo1 is eﬀectively due to the fact that the system is sampling

55

inﬂuence of choosing diﬀerent hardware components, a signal whose amplitude has been lowered because of

56 57

such as the resistances R3 and R5 and the capacitance C2, on the measurement accuracy.

the proximity of fvo1 to flF .

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 12 of 20

Voltagep (V) t

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

12

1

2

μ2: 1 μF

μ2: 3 μF

μ2: 5 μF

μ2: 7 μF

μ2: 9 μF

3

μ2: 2 μF

μ2: 4 μF

μ2: 6 μF

μ2: 8 μF

μ2: 10 μF

4 5

0.4

vo1's amplitude: 0.4V (~31.13 με)

100

vo1's amplitude: 0.4V (~31.13 με)

6

0.3

80

7

60

(%)

8

0.2

9

40

10

0.1

20

Voltages (V) cri

11

12

0.0 1 2 3 4 5 6 7 8 9 1011121314151617181920

0 1 2 3 4 5 6 7 8 9 1011121314151617181920

13

Frequency (Hz)

Frequency (Hz)

14

(a)

(b)

15

0.8

vo1's amplitude: 0.8V (~62.25 με)

100

vo1's amplitude: 0.8V (~62.25 με)

16

17

0.6

80

(%)

Voltage Accepted M (V)anu

18

60

(%)

19

0.4

40

20 21

0.2

20

22

0.0

0

23

1 2 3 4 5 6 7 8 9 1011121314151617181920

1 2 3 4 5 6 7 8 9 1011121314151617181920

24

Frequency (Hz) (c)

Frequency (Hz) (d)

25

26

1.5

vo1's amplitude: 1.6V (~124.51 με)

100

vo1's amplitude: 1.6V (~124.51 με)

27

80

28

1.0

29

60

30

40

31

0.5

32

20

33

0.0

0

34

1 2 3 4 5 6 7 8 9 1011121314151617181920 Frequency (Hz)

1 2 3 4 5 6 7 8 9 1011121314151617181920 Frequency (Hz)

35

(e)

(f)

36

37

Figure 5. Measurement error when varying C2: (a,c,e) Absolute and (b,d,f ) percentage diﬀerence. R3 is set to 47 kΩ. Conversion

38

to strain units is done considering C1 equal to 2.5 nF.

39

40

Schmitt trigger toggles at an undesired value or does

41 42

Table 1. Capacitor C2 selection: Simulated capacitor sizes and related cut-oﬀ frequency, for R5 equal to 1 kΩ.

not toggle at all. The reason for this has been found to be related to the hysteresis of the circuit, as illustrated

43

C2 (µF) flF (Hz) C2 (µF) flF (Hz)

in the simulation results of Figure 6. The peak detector

44 45

1

159.15

6

2

79.58

7

26.53 22.74

is driven with a synthetically generated input signal vo1 which may reﬂect a typically encountered strain signal

46 47

3

53.05

8

19.89

4

39.79

9

17.68

on a real application. In this case, diﬀerent R3 values are evaluated while all remaining circuit parameters

48

5

31.83

10

15.92

are ﬁxed. It can be observed that for certain small

49

amplitude signal variations the Schmitt trigger stops

50 51 52 53 54 55 56 57

A priori, it appears that smaller capacitor sizes, e.g., of the order of 2-5 µF allow only measurement over a wider range of frequencies with relatively low error. However, one problem that is encountered is that for small input signals (low amplitude and low frequency), which may be of monitoring interest, the

toggling as R3 is increased. The Figure also depicts the case where the hysteresis is too high (for R3 equal to 300 kΩ) and the circuit fails in accurately toggling at the right peak or trough.
The ﬁnal set of simulation experiments considers that all circuit parameters are ﬁxed. This implies that the circuit performance will only depend on the

58

59

60

Page 13 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Voltaget (V)

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

13

1

2 3

2.09

vo1

0.2 V: ~15.56 με

1.0 V: ~77.82 με

0.4

0.4 V: ~31.13 με

1.2 V: ~93.38 με

4

1.65

0.6 V: ~46.69 με

1.4 V: ~108.94 με

Voltagei (V)p

5 6 7 8

1.22 0.0

0.2

3.3

vo2 (R3=22k )

0.4 Time (s) 0.6

0.8

1.0

0.3 0.2

Voltage (V)

0.8 V: ~62.25 με

1.6 V: ~124.51 με

Voltagec(V)r

9

0.1

10 11 12 13

0.0 0.0

0.2

3.3

vo2 (R3=47k )

0.4 Time (s) 0.6

0.8

1.0

0.0
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 Frequency (Hz)

14

(a)

Voltage Accepted Man (V) u

Voltage (V)s

15 16 17 18

0.0 0.0

0.2

3.3

vo2 (R3=100k )

0.4 Time (s) 0.6

0.8

1.0

100 80

0.2 V: ~15.56 με 0.4 V: ~31.13 με 0.6 V: ~46.69 με

1.0 V: ~77.82 με 1.2 V: ~93.38 με 1.4 V: ~108.94 με

19

0.8 V: ~62.25 με

1.6 V: ~124.51 με

20 21 22 23

60

(%)

0.0 0.0

0.2

3.3

vo2 (R3=300k )

0.4 Time (s) 0.6

0.8

1.0

40 20

24

25

0

26 27

0.0 0.0

0.2

0.4 Time (s) 0.6

0.8

1.0

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 Frequency (Hz)

28

(b)

29

Figure 6. Measurement error when varying R3. R4, R5 and

30

C2 are 10 M Ω, 1 kΩ and 5 µF , respectively.

Figure 7. Measurement error when varying the voltage amplitude of vo1: (a) Absolute and (b) percentage diﬀerence.

31

C1, C2 and R3 are set to 2.5 nF, 4 µF , and 47 kΩ, respectively.

32

amplitude and frequency of the input signal. Similarly

33

to the previous experiments, we consider diﬀerent

34

voltage amplitudes and oscillation frequencies. The vo2 and vo3 signals, respectively. Table 2 lists the

35

results are plotted in Figure 7, which presents the components and circuit parameters of the prototype.

36

same variation of measurement error with increasing The NZ32-L151 device is programmed with a speciﬁc

37

frequency as discussed above. It also shows that the application developed in the Contiki OS and based on

38

variation in relative measurement error is proportional the software architecture described in Subsection 3.3.

39

to the amplitude of the applied input signal, which However, for these experiments, RF transmissions are

40

could be useful for calibration and data post-processing disabled. In addition, the NZ32-L151 device sends

41

purposes.

all the ADC readings as well as the output of the

42

rainﬂow cycle counting algorithm to a laptop via a

43

4.2. Validation on real hardware

44

serial-to-usb connection. All the arriving data at the laptop are timestamped and logged on ﬁles for later

45

Next, we describe the experimental procedure used data analysis. It is worth remarking that this is for

46

in our validation, followed by a discussion on the evaluation purposes; in a real-world application, only

47

performance evaluation results for our system.

strain-cycle information would be transmitted.

48

For comparison, an alternative prototype, repre-

49

4.2.1. Laboratory experimental setup

senting a conventional system was created utilizing

50 51 52 53 54 55 56 57

Figure 8a illustrates the experimental procedure, whereas Figure 8b shows a picture of the experimental setup. A prototype of the analogue sensor system was assembled on a solderless breadboard with the electrical scheme of Figures 3a and 4a, and connected to a NZ32-L151 device using the ADC channel 0 (PA0-WKUP1 pin) and GPIO line 1 (PA1 pin) for

the same signal conditioning block from our previous setup. The output signal vo1 is passed through an additional op-amp in a voltage follower conﬁguration followed by a low-pass RC ﬁlter (of similar R7/C3 values), and its output connected to the ADC channel 0 of a separate NZ32-L151 device. This device is programmed with speciﬁc application software that has also been developed in Contiki OS and which takes

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 14 of 20

9 22 9 40

50 Accepted Manuscript

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

14

1

2

83*3,"1)&BE311&BE&D$

3

Tektronix TDS2004C

Table 2. Components and circuit parameters of the analogue

4 5

0&12#3+2134$+$)%15&'34$)

ADC (!"%) External

J&+#$+,3&+"1)B2B,$( Signal conditioning
+ NZ32-L151 platform

sensor system prototype.

Parameter

Value

Parameter Value

6 7

60789:)8;<=>?@A)B$+B&') C&+4$4),&)B,$$1)BD$E3($+

interrupt (!"$) ADC (!"#)

F5')D'&,&,2D$ Analogue sensor system + NZ32-L151 platform

Op-amp (OA1) LPV811 Op-amp (OA2/3) OPA2333

R5,R7 R6

1 kΩ 50 Ω

8 -."/$'

-$'3"1=,&=L-M E&++$E,3&+

Vcc

3.3 V

R8,R9 10 kΩ

9

Ling Dynamic Systems (25N)

8",")1&**3+*)"+4)

Vee

0V

C1

4 nF

10

K1$E,'3E"1)&')4"," E&++$E,3&+

#3B5"13B",3&+)B&%,G"'$

R1,R3

47 kΩ

C2

4 µF

11

I"D,&D

R2

1 GΩ

C3

2 µF

12

!"#$%&'()*$+$'",&'

0&G$')(&+3,&'

Agilent Technologies 33522A Monsoon Solutions

0&G$')(&+3,&')B&%,G"'$

R4

10 MΩ

13

14 15

FBE311&BE&D$) D'&C$

H Test #1: Sinusoidal wave with varying peak-to-peak voltage (Vpp) and frequency at pre-defined steps

160

55

75

30

10

30

15 15

30

20 10 7 13 10

16

H Test #2: Synthetically generated wave

17

(a)

10

15

10

18

6.5

19

Polyvinylidene fluoride (PVDF) DT1-028K sensor bonded to

30

4

20

steel specimen

21

Shaker

22

Digital oscilloscope

Power monitor

Ling Dynamic

Tektronix TDS2004C

Monsoon Solutions Systems (25N)

23

10

15

10

Plan view (unit: mm)

0.5 0.5 0.5

24

3

25

55

15 1 30

20 10

30

26

Sectional view (unit: mm)

27

(a)

28

29

30 31

Waveform generator Agilent Technologies 33522A

Contains: i) Prototype (our proposed solution) ii) Conventional system (of similar hardware

32

characteristics than our prototype solution)

33

(b)

34

Figure 8. Laboratory experimental setup: (a) Schematics and

35

(b) photo of the experimental setup.

36

37

38

samples continuously at a sampling frequency of 64 Hz.

39

All the sampled data is stored in a temporal buﬀer

(b)

40

and later pre-processed using a C-based implementa-

41 42

tion of a typical peak-trough detection algorithm [51] prior to executing our implementation of the rainﬂow

Figure 9. Test specimen used for laboratory experiments: (a) Dimensions (mm); (b) Modelling of strain distribution across the specimen using Abaqus version 6.12 [53].

43

cycle counting algorithm. Similarly, all the obtained

44

ADC readings as well as the output of both algorithms

45

are sent to a laptop for further data analysis.

with base attached to the laboratory bench as well as

46

Both prototypes are connected to a single PVDF onto a vibration shaker system. An Agilent 33522A

47

DT1-028K sensor [38]. The sensor is bonded onto waveform generator is used to drive the shaker while a

48

the surface of a dog-bone shaped steel specimen digital oscilloscope records the signal outputs from vo1,

49

(mild steel EN 3B) using a cyanoacrylate-based (super vo2 and vo3. Finally power consumption measurements

50

glue) adhesive. The specimen, whose geometric of each individual prototype were performed using a

51

characteristics are given in Figure 9a, has been power monitor from Monsoon Solutions [52]. Power

52

speciﬁcally manufactured for fatigue testing and its consumption results are given later in Subsection 4.2.3.

53

design is speciﬁed to reduce the residual stress and

54

work-hardening. Figure 9b shows the distribution of 4.2.2. Performance results under sinusoidal excitation

55 56 57

longitudinal strain (along x axis) of the specimen with 1 mm of displacement in the shaker. As shown in the Figure 8b, the specimen is both ﬁxed onto a steel beam

The performance of the analogue peak-trough detection was ﬁrst characterised under varying sinusoidal

58

59

60

Page 15 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Voltage (V)t

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

15

1

(%) Accepted Manuscrip

2

excitation. Following a similar procedure as in our

0.20

3

simulations, a series of driving waveforms, each with

4

a diﬀerent peak-to-peak voltage (Vpp) and oscillation

0.15

5

frequency, were generated by the signal generator in

6

turn. We chose Vpp to be 600 mV and 1.6 V, which

0.10

7

yielded strain amplitudes of approximately 25-35 µε

Strain amplitude: 25-35με Strain amplitude: 100-130με

8

and 100-130 µε depending on the signal frequency. For

0.05

9

each Vpp, the frequency was varied from 1 Hz to 20 Hz,

10

in steps of 1 Hz. For each setting, data generated by

0.00

11

both prototypes were recorded for over 1 minute and

12

later analysed to show the average absolute and rela-

13

tive measurement error between them.

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
Frequency (Hz)
(a)

14

Results are depicted in Figure 10. It can be

15

seen that both experimental and simulation results

50

16 17

are in good agreement with each other, which help us validate and benchmark our design. It is also

40

Strain amplitude: 25-35με Strain amplitude: 100-130με

18

worth noting that our proposed system seemed to

30

19 20

reach its performance limit at the frequency of 20 Hz.

20

In investigating this issue further, it was found that

21

the latency that is introduced in transferring the

10

22 23

sampled data to the laptop caused an unintended behaviour in our system. This was to have been

0
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19

24

expected since our system operates using hardware

Frequency (Hz)

25

interrupts whereas operations such data transfer via

(b)

26 27

serial are known to be non-re-entrant and non-thread- Figure 10. Experimental results: Average (a) absolute and safe when used in a real-time OS. Due to the diﬃculty (b) relative measurement error. The error bars denote 95%

28

of accurately synchronising both prototype systems, we conﬁdence intervals.

29

have disregarded the computation of the measurement

30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57

error at such frequency for Figure 10. While previous experimental work provides a
framework to quantify the performance of our peaktrough detector, the goal of this experiment is to evaluate the performance and applicability of our entire system in a reasonably realistic scenario. We illustrate this by comparing the number of strain cycles that are captured by both approaches over a suﬃciently long period of time. In order to do so, the vibration shaker system is driven with the synthetically generated signal of Figure 11a for a total duration of 2 hours. The distribution of signal frequencies over time is shown by way of the shorttime Fourier transform (STFT) in Figure 11b. The circuit parameters from the previous setup remain the same (see Table 2). It is worth noting that the strain cycle data captured by our system can immediately be plotted (only conversion from voltage to strain units is necessary). For the conventional method, the experimental procedure has been to collect all sampled data as in previous experiments and post-processing them using a peak-trough detection algorithm followed by our implementation of the rainﬂow cycle counting algorithm. For both systems, the latter has been conﬁgured with a buﬀer size NS equal to 256, although no signiﬁcant variation was found with other sizes.
Histograms of full strain cycles versus strain range

obtained by both systems are plotted in Figure 11c. The number of half cycles was very small for both systems and is therefore not presented here for the sake of brevity. A comprehensive comparative analysis of these data, along with a fatigue test-bed study that seeks to predict the level of damage and the closeness to failure of a similar test specimen using our sensor solution, is the subject of ongoing work.
Figure 11c shows a good agreement between the histograms of full cycles for both systems. It can be seen that for strain ranges bigger than 140 µε our system progressively reports smaller numbers of full cycles or does not report any values. This diﬀerence is due to the peak-trough measurement error that our system has with respect to the conventional approach. As suggested at the end of Subsection 4.1, it could be possible to apply a data correction factor on the strain cycle data (thus accounting for any peak-trough measurement errors) given prior knowledge of the signal frequencies that will be encountered at the location where the sensor is being installed. In practical applications –and not exclusive to fatigue monitoring– such knowledge is usually obtained prior to installation of any sensing instrumentation [25], therefore it is possible to obtain similar results as if using the conventional approach of fatigue measurement. This is demonstrated in

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 16 of 20

Voltage (V)t

Power-eﬃcient piezoelectric fatigue measurement using long-range wireless sensor networks

16

1

Magnitude (dB)

Number of cycles

Number Accepted Manus ofcyclescrip

2 3 4 5 6 7 8 9 10 11

1.6

20

20

0.8

15

40

Frequency (Hz)

0.0

10

60 80

−0.8

5

100

120

−1.6 0

2

4

6

Time (s)

8

10

02

4Time (s)6

8

140

12

(a)

(b)

13

14

105

15 16

104

17

103

Conventional method Our solution (no correction)

105

104

103

Conventional method Our solution (10% correction)

18

102

102

19

20

101

101

21 22

100 0 20 40 60 Ra8n0ge1(00) 120 140 160 180

100 0 20 40 60 Ra8n0ge1(00) 120 140 160 180

23

(c)

(d)

24

25

Figure 11. Rainﬂow cycle counting performance: (a) Synthetically generated input signal and (b) its distribution of frequencies

26

over time; full cycle histograms over a 2-hour test (c) with no measurement error correction and (d) with a 10% error correction

27

applied over all strain range values. The bin size is 10 µε.

28

29

Figure 11d, where a simple correction factor of +10% ﬁeld [55, 56, 25]. As observed, the improvement

30

strain range has been chosen and linearly applied to concerning power consumption is correlated to a

31

the data. Equivalently, this factor means that a +5% reduction in the computational workload of the MCU,

32

increase in strain amplitude is applied to peaks and which allows it to switch to low-power saving mode in

33

troughs, according to our previous simulation and between consecutive hardware interrupts. This boosts

34

experimental study.

the operational lifetime of our proposed system as

35

much as a factor of 9 (approximately up to 2 years of

36

4.2.3. Power proﬁling

operation) as compared to the conventional approach.

37

Finally, the experimental average power consump-

38

Power consumption measurements were obtained for tion of our analogue sensor system when disconnected

39

each prototype individually. Because our solution is from the NZ32-L151 platform is 0.58 mW, approxi-

40

not exclusively intended for use with LoRa/LoRaWAN, mately eight times smaller than our reported system

41

for these experiments the LoRa transceiver is turned oﬀ power consumption. This suggests that the overall

42

and therefore no power consumed in LoRa/LoRaWAN power consumption of the entire prototype including

43

transmissions are captured by our measurements. We the wireless platform and the analogue sensor system

44

refer to Casals et al [54] for a comprehensive power could be further reduced with hardware and software

45

consumption study of LoRa and LoRaWAN for several improvements in the wireless platform in use.

46

transceiver and protocol settings, which include the

47 48

spreading factor, coding rate, the duration of reception windows and the number of retransmission attempts. 5. Conclusions

49

Figure 12a shows a snapshot of the instantaneous This paper proposes a potential solution to deploy

50

consumption for diﬀerent oscillation frequencies of the WSNs for long-term fatigue life assessment of civil

51

sinusoidal input signal generated with the oscilloscope, engineering structures, which uses a power-eﬃcient

52

whereas Figure 12b presents the average results. The design of a LoRa-based embedded sensor system

53

latter ﬁgure also includes an estimation of battery having the ability to measure fatigue strain cycles in

54

life considering a single 19 Ah-3.6 V lithium battery a continuous manner. At the core of our design is a

55

(although we consider sustained operation at 3.3 V). hardware module which uses analogue electronics to

56

We chose this battery based on our previous experience condition and ﬁnd both peaks and troughs of a strain

57

with WSN deployments in the civil engineering

58

59

60

Page 17 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Powerp(mW)t

REFERENCES

17

1 2 3 4 5 6 7 8 9

45

40

35

30

Conventional method

25 20

4 Hz

5 Hz

6 Hz

7 Hz

15

Our solution

10

embedded prototype of similar hardware and software characteristics that was built based on the conventional approach. Our proposed solution achieved a 9x reduction in power consumption thereby enabling almost up to two years of continuous operation on a single battery. Therefore, our proposed solution proves to be promising to be applied in real-world civil engineering deployments. For our immediate future

10

5

research, we plan to perform a comprehensive long-

11 12

04.0 4.5 5.0 5.5 Tim6e.0(s) 6.5 7.0 7.5 8.0

term fatigue study both in the laboratory, and through the placement of a large number of wireless sensor

13

(a)

devices based on our design on a real structure.

14

Power Accepted Man(mW)uscri

15 16 17 18 19 20 21 22 23 24 25

Our solution

45

Conventional method

40

35 30 25 20

~196070d0amysAwh ibthatatery

~po9wxedrifcfoenresnucmepitnion

15 10

~19600050dmayAshwbiathtteary

5

Acknowledgments
This research has been made possible through the Innovation and Knowledge Centre for Smart Infrastructure and Construction (CSIC) funded by EPSRC (EP/N021614/1) and Innovate UK (920035). The authors would like to thank Dr Tzu-Hsuan Lin of National Central University (Taiwan) for his input on signal conditioning of piezoelectric ﬁlm sensors and Dr Seiji Yamada of the Japan Railway Technical Research Institute for his input on fatigue sensing. The authors

26 27

0 1 2 3 4 5 6 7 F8req9ue1n0cy11(H1z2)13 14 15 16 17 18 19

are also grateful to Mr Peter Knott and Mr Alistair Ross of the University of Cambridge for their valuable

28

(b)

support in setting up the laboratory test bed.

29

30

Figure 12. Power consumption: (a) One second snapshot of References

31

instant consumption at diﬀerent excitation frequencies. Spikes

32

in the data obtained with our solution are the interrupt triggers for sampling of peaks and troughs. (b) Average results. The

[1] S. Suresh. Fatigue of Materials. Cambridge

33

conventional approach has an average power consumption of

University Press, Cambridge, 2nd edition, 1998.

34 35

40 mW, while our proposed solution achieves up to 5 mW on average.

[2] Julie A. Bannantine, Jess J. Comer, and James L. Handrock. Fundamentals of metal fatigue

36

analysis. Prentice Hall Englewood Cliﬀs, NJ,

37

signal measured with a piezoelectric sensor. Peaks and

1990.

38 39 40 41

troughs are signalled by way of hardware interrupts to the MCU, which is conﬁgured to remain in lowpower mode most of the time to eﬃciently reduce overall power consumption. The MCU then wakes up

[3] X. W. Ye, Y. H. Su, and J. P. Han. A State-of-theArt Review on Fatigue Life Assessment of Steel Bridges. Mathematical Problems in Engineering, 2014:1–13, 2014.

42 43 44 45 46 47 48 49 50 51 52

and triggers a single ADC measurement corresponding to the voltage level of the signalled peak or trough. These measurements are processed locally using the rainﬂow cycle counting algorithm, a standard method for counting fatigue strain cycles. With appropriate hardware parameter settings, our design provides a power-eﬃcient alternative to the conventional approach for fatigue strain-cycle measurement, which requires continuous acquisition of strain data with a high sampling rate, followed by data pre-processing using standard peak-trough detection algorithms

[4] Yihui Zhou, Mina Dawood, and Bora Gencturk. High-cycle fatigue performance of highmast illumination pole bases with pre-existing cracks. Journal of Constructional Steel Research, 138:463–472, 2017.
[5] Kyle T. Wieghaus, John B. Mander, and Stefan Hurlebaus. Damage avoidance solution to mitigate wind-induced fatigue in steel traﬃc support structures. Journal of Constructional Steel Research, 138:298–307, 2017.

53

before actual strain-cycle measurement. Extensive [6] Jeong-Beom Ihn and Fu-Kuo Chang. Detection

54

computer simulation and laboratory experiments

and monitoring of hidden fatigue crack growth

55

showed good agreement between the strain-cycle

using a built-in piezoelectric sensor/actuator

56

histograms obtained for both our system and an

network: I. Diagnostics. Smart Materials and

57

Structures, 13(3):609–620, 2004.

58

59

60

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Page 18 of 20

Accepted Manuscript

REFERENCES

18

1

2

[7] Shi Bai, Xuan Li, Zhaohui Xie, Zhi Zhou, and [17] National Infrastructure Commission. Data

3

Jinping Ou. A wireless fatigue monitoring system

for the Public Good. Technical report:

4

utilizing a bio-inspired tree ring data tracking

https://www.nic.org.uk/publications/

5

technique. Sensors (Basel), 14(3):4364–83, 2014.

data-public-good/, 2017. [Online; accessed

6 7 8 9

[8] Glauco Feltrin, Nemanja Popovic, Kallirroi Flouri, and Piotr Pietrzak. A Wireless Sensor Network with Enhanced Power Eﬃciency and Embedded Strain Cycle Identiﬁcation for Fatigue

12-April-2019].
[18] Yao Yao, Shue-Ting Ellen Tung, and Branko Glisic. Crack detection and characterization techniques – An overview. Structural Control and

10

Monitoring of Railway Bridges. Journal of

Health Monitoring, 21(12):1387–1413, 2014.

11

Sensors, 2016:1–14, 2016.

12

[19] J. D Achenbach. Quantitative nondestructive

13

[9] Amir H. Alavi, Hassene Hasni, Nizar Lajnef,

evaluation. International Journal of Solids and

14

Karim Chatti, and Fred Faridazar. An intelligent

Structures, 37(1-2):13–27, 2000.

15

structural damage detection approach based on [20] Michael B. Johnson, Didem Ozevin, Glenn A.

16

self-powered wireless sensor data. Automation in

Washer, Kanji Ono, Richard S. Gostautas, and

17

Construction, 62:24–44, 2016.

Terry A. Tamutus. Acoustic Emission Method

18

[10] Amir H. Alavi, Hassene Hasni, Nizar Lajnef,

for Real-Time Detection of Steel Fatigue Crack in

19

Karim Chatti, and Fred Faridazar. Damage

Eyebar. Transportation Research Record: Journal

20

detection using self-powered wireless sensor data:

of the Transportation Research Board, 2313(1):72–

21

An evolutionary approach. Measurement, 82:254–

79, 2012.

22

283, 2016.

[21] Yunfeng Zhang. In Situ Fatigue Crack Detection

23

[11] Amir H. Alavi, Hassene Hasni, Pengcheng Jiao,

using Piezoelectric Paint Sensor. Journal

24

Wassim Borchani, and Nizar Lajnef. Fatigue

of Intelligent Material Systems and Structures,

25

cracking detection in steel bridge girders through

17(10):843–852, 2006.

26

a self-powered sensing concept. Journal of [22] Matjaˇz Mrˇsnik, Janko Slaviˇc, and Miha Bolteˇzar.

27

Constructional Steel Research, 128:19–38, 2017.

Frequency-domain methods for a vibration-

28

[12] Nemanja Popovic, Glauco Feltrin, Khash-Erdene

fatigue-life estimation Application to real data.

29

Jalsan, and Michal Wojtera. Event-driven strain

International Journal of Fatigue, 47:8–17, 2013.

30 31 32 33

cycle monitoring of railway bridges using a wireless sensor network with sentinel nodes. Structural Control and Health Monitoring, 24(7):e1934, 2017.

[23] Bahareh Marzbanrad, Hamid Jahed, and Ehsan Toyserkani. On the sensitivity and repeatability of ﬁber Bragg grating sensors used in strain and

34

[13] Peipei Liu, Hyung Jin Lim, Suyoung Yang, Hoon

material degradation measurement of magnesium

35

Sohn, Cheul Hee Lee, Yung Yi, Daewoo Kim,

alloys under cyclic loads. The International

36

Jinhwan Jung, and In-hwan Bae. Development of

Journal of Advanced Manufacturing Technology,

37

a stick-and-detect wireless sensor node for fatigue

86(9-12):3453–3461, 2016.

38

crack detection. Structural Health Monitoring, [24] Xiangxiong Kong and Jian Li. Vision-Based

39

16(2):153–163, 2017.

Fatigue Crack Detection of Steel Structures Using

40

[14] Sattar Dorafshan, Robert J. Thomas, and

Video Feature Tracking. Computer-Aided Civil

41

Marc Maguire. Fatigue Crack Detection Using

and Infrastructure Engineering, 33(9):783–799,

42

Unmanned Aerial Systems in Fracture Critical

2018.

43

Inspection of Steel Bridges. Journal of Bridge [25] David Rodenas-Herr´aiz, Kenichi Soga, Paul

44

Engineering, 23(10):04018078, 2018.

Fidler, and Nicholas de Battista. Wireless Sensor

45

[15] Xiangxiong Kong, Jian Li, Caroline Bennett,

Networks for Civil Infrastructure Monitoring – A

46

William Collins, Simon Laﬂamme, and Hongki

Best Practice Guide. ICE Publishing, 2016.

47

Jo. Thin-Film Sensor for Fatigue Crack Sensing [26] Jayant Sirohi and Inderjit Chopra. Fundamental

48

and Monitoring in Steel Bridges under Varying

understanding of piezoelectric strain sensors.

49

Crack Propagation Rates and Random Traﬃc

Journal of Intelligent Material Systems and

50

Loads. Journal of Aerospace Engineering,

Structures, 11(4):246–257, 2000.

51 52 53 54 55 56 57

32(1):04018116:1–11, 2019.
[16] Infrastructure and Capital Investment Committee. Inquiry into the circumstances surrounding the closure of the Forth Road Bridge. Technical Report 4, Scottish Parliamentary Corporate Body, 2016.

[27] ASTM E1049-85. Standard practices for cycle counting in fatigue analysis, volume 85. American Society for Testing And Materials (ASTM) International, 2017.
[28] Ala Al-Fuqaha, Mohsen Guizani, Mehdi Mohammadi, Mohammed Aledhari, and Moussa Ayyash.

58

59

60

Page 19 of 20

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

Accepted Manuscript

REFERENCES

19

1

2

Internet of Things: A Survey on Enabling Tech-

Acquisition System for Piezoelectric

3

nologies, Protocols, and Applications. IEEE Com-

Sensors.

http://www.analog.com/en/

4

munications Surveys & Tutorials, 17(4):2347–

design-center/reference-designs/

5

2376, 2015.

hardware-reference-design/

6 7 8 9

[29] Amir H. Alavi, Hassene Hasni, Nizar Lajnef, and Karim Chatti. Continuous health monitoring of pavement systems using smart sensing technology. Construction and Building Materials, 114:719–

circuits-from-the-lab/cn0350.html. [Online; accessed 12-April-2019].
[42] Texas Instruments. OPA2333: 1.8 V, 17 µA, 2 channels, microPower, Precision, Zero Drift

10 11 12

736, 2016. [30] M. A. Miner. Cumulative fatigue damage. Journal

CMOS Op Amp. http://www.ti.com/product/ OPA2333. [Online; accessed 12-April-2019].

13

of applied mechanics, 12(3):A159–A164, 1945.

[43] Manos Chaniotakis and David Cory. Operational

14

[31] BS EN 1993-1-9:2005 - Eurocode 3. Design of steel

Ampliﬁer Circuits Comparators and Positive

15

structures. Fatigue. British Standards Institution,

Feedback. MIT Open Courseware, 2006.

16

2005.

[44] Adel S. Sedra and Kenneth Carless Smith.

17

[32] Load and Resistance Factor Design (LRFD)

Microelectronic circuits. The Oxford Series in

18

Bridge Design Speciﬁcations - SI Units. American

Electrical and Computer Engineering. New York:

19

Association of State Highway and Transportation

Oxford University Press, 7 edition, 2015.

20

Oﬃcials (AASHTO), 8 edition, 2017.

[45] Adam Dunkels, Bj¨orn Gr¨onvall, and Thiemo

21

[33] LoRa Alliance Technical Committee.

Voigt. Contiki - a lightweight and ﬂexible operat-

22

LoRaWANTM 1.1 Speciﬁcation. LoRa Alliance,

ing system for tiny networked sensors. In Proceed-

23

2017.

ings of the 29th Annual IEEE International Con-

24 25 26 27 28 29 30

[34] Y.-P. Eric Wang, Xingqin Lin, Ansuman Adhikary, Asbjorn Grovlen, Yutao Sui, Yufei Blankenship, Johan Bergman, and Hazhir S. Razaghi. A Primer on 3GPP Narrowband Internet of Things. IEEE Communications Magazine, 55(3):117–123, 2017.

ference on Local Computer Networks, LCN 2004, pages 455–462, Tampa, Florida, USA, 2004. IEEE Computer Society.
[46] The freertos kernel. http://www.freertos.org/. [Online; accessed 12-April-2019].
[47] Semtech Corporation. LoRaWAN endpoint stack

31

[35] Xing Ouyang, Octavia A. Dobre, Yong Liang

implementation and example projects. https://

32

Guan, and Jian Zhao. Chirp Spread Spectrum

github.com/Lora-net/LoRaMac-node. [Online;

33

Toward the Nyquist Signaling Rate – Orthogonal-

accessed 12-April-2019].

34

ity Condition and Applications. IEEE Signal Pro- [48] Source code, simulation and data

35

cessing Letters, 24(10):1488–1492, 2017.

analysis scripts, and relevant data.

36

[36] ANSI/IEEE Std 176-1987. IEEE Standard on

https://bitbucket.org/csic-wifat/

37

Piezoelectricity. 1988.

csic-wireless-fatigue-sensor-system/

38

[37] Modtronix Engineering. NZ32-SC151 breakout

src/master/ (also https://doi.org/10.17863/

39

board. http://wiki.modtronix.com/doku.php?

CAM.40017). [Online; accessed 20-May-2019].

40

id=products:nz-stm32:nz32-sc151. [Online; [49] STMicroelectronics.

STM32L151/152.

41

accessed 12-April-2019].

https://www.st.com/en/

42

[38] TE Connectivity.

Piezoelectric Sensors.

microcontrollers-microprocessors/

43

http://www.te.com/usa-en/products/

stm32l151-152.html, 2017. [Online; accessed

44

sensors/piezo-film-sensors.html.

[On-

12-April-2019].

45

line; accessed 12-April-2019].

[50] Martin C. Bor and Utz Roedig. LoRa Trans-

46 47 48 49 50 51

[39] Measurement Specialties. Piezo Film Sensors – Technical Manual. https://www.strainsense. co.uk/wp-content/uploads/2017/08/Piezo_ Technical_Manual.pdf, 2008. [Online; accessed 12-April-2019].

mission Parameter Selection. In Proceedings of the 13th International Conference on Distributed Computing in Sensor Systems, DCOSS, pages 27– 34, Ottawa, ON, 2017. IEEE.
[51] Hong Xu. peakdetect: Peak detection

52

[40] Texas Instruments. LPV811: Single Channel

in a wave. https://github.com/xuphys/

53 54

450 nA Precision Nanopower Operational Ampliﬁer. http://www.ti.com/product/LPV811. [On-

peakdetect, 2013. [Online; accessed 12-April2019].

55

line; accessed 12-April-2019].

[52] Monsoon Solutions. http://www.msoon.com/.

56

[41] Analog Devices.

CN-0350: 12-Bit, 1

[Online; accessed 12-April-2019].

57

MSPS, Single-Supply, Two-Chip Data

58

59

60

Accepted Manuscript

AUTHOR SUBMITTED MANUSCRIPT - SMS-108409.R1

REFERENCES 1

2

[53] Dassault Syst`emes. Abaqus Uniﬁed FEA.

3

https://www.3ds.com/products-services/

4

simulia/products/abaqus/. [Online; accessed

5

12-April-2019].

6 7 8 9

[54] Llu´ıs Casals, Bernat Mir, Rafael Vidal, and Carles Gomez. Modeling the Energy Performance of LoRaWAN. Sensors, 17(10):2364, 2017.

10

[55] Sarfraz Nawaz, Xiaomin Xu, David Rodenas-

11

Herr´aiz, Paul R. A. Fidler, Kenichi Soga, and Ce-

12

cilia Mascolo. Monitoring A Large Construction

13

Site Using Wireless Sensor Networks. In Proceed-

14

ings of the 6th ACM Workshop on Real World

15

Wireless Sensor Networks, RealWSN ’15, pages

16

27–30, Seoul, South Korea, 2015. ACM.

17

[56] Xiaomin Xu, Kenichi Soga, Sarfraz Nawaz,

18

Neil Moss, Keith Bowers, and Mohammed

19

Gajia. Performance monitoring of timber

20

structures in underground construction using

21

wireless SmartPlank. Smart Structures and

22

Systems, 15:769–785, 2015.

23

24

25

26

27

28

29

30

31

32

33

34

35

36

37

38

39

40

41

42

43

44

45

46

47

48

49

50

51

52

53

54

55

56

57

58

59

60

Page 20 of 20 20

