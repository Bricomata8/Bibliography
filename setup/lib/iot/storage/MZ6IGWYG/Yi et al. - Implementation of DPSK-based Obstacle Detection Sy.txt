Implementation of DPSK-based Obstacle Detection System using UItrasound for Vehicles

Donghee Yi
Department of Electric and Electronic Engineering
Pusan National University Busan, Korea
ldh2717@pusan.ac.kr

Jaehan Joo
Department of Electric and Electronic Engineering
Pusan National University Busan, Korea
sckim@pusan.ac.kr

Suk Chan Kim
Department of Electric and Electronic Engineering
Pusan National University Busan, Korea
sckim@pusan.ac.kr

Abstract—When an obstacle is detected by using an ultrasonic sensor, a signal other than that transmitted by the other ultrasonic sensor may act as an interference signal. Therefore, it is possible to distinguish the signal by inserting the ID into the ultrasonic signal and mainly use the DSSS. However, since the bandwidth of the ultrasonic sensor is very narrow, the data rate is very low when data is transmitted, which makes it difficult to detect a near obstacle due to a long transmission time. Therefore, the detection interval, the modulation method and the code length are biased so as to detect both near and far obstacles. Experiments were conducted using DBPSK and FDM at near and DQPSK at far distance, and it was confirmed that signal detection was possible by the correlation peak of the signal.
Keywords—Ultrasound, DSSS, FDM, DBPSK, DQPSK
I. INTRODUCTION
Recently autonomous vehicle has become a hot topic. It recognizes all the circumstances around it and judges the driving. LiDAR is used as an eye for this.[1] On the other hand, electronic systems in existing automobiles use ultrasonic sensors to recognize the surroundings. However, due to the limitation of the measurement distance and the measurement angle, it was mainly used only for obstacle detection when reversing. Therefore, supersonic sensors are expected to disappear in autonomous vehicles, but ultrasonic sensors are still used as an auxiliary means together with camera sensors as an auxiliary means.[2] Obstacle detection using an ultrasonic sensor basically measures the time that a transmission waveform is reflected on an object and returns the distance between the obstacle and the transmitter. However, when an

ultrasonic wave having the same frequency is transmitted from an external sensor, superposition or reception error may occur with the reflected wave. In order to solve this problem, ID is assigned to each signal. Mapping ID to orthogonal code using Direct Sequence Spread Spectrum (DSSS) and then applying this code to Amplitude Shift Keying (ASK), Phase Shift Keying (PSK), Frequency Shift Keying (FSK) or the like.[3] This method is mainly used for position recognition using ultrasonic waves. Generally, a transducer with a narrow bandwidth of 2.5 kHz or less is used for the ultrasonic communication in the air [4]. However, there is a limit of data rate due to the narrow bandwidth. Therefore, when transmission time is increased compared to other communication, if there is an obstacle in a short distance, there is a problem in recognizing the ID because the reflected wave returns to the sensor before the transmission is completed. Conversely, if the code is short, the processing gain is low, so it cannot cope with long-distance obstacles. Therefore, in order to implement a method to overcome this trade-off, this paper proposes an algorithm that can be used for a vehicle ultrasonic sensor with a wide measurement range. Section 2 introduces the modulation scheme used, and Section 3 briefly describes the hardware implementation method. Section 4 identifies the measurement results and Section 5 summarizes the measurement results and presents future research directions.
II. THE MODULATION SCHEME
Since ultrasonic sensors for automobiles are used in actual vehicle production, cost as well as performance are important factors to consider. It uses an asynchronous modulation

Fig 1. DQPSK demodulation and detection

978-1-7281-1340-1/19/$31.00 ©2019 IEEE

614

ICUFN 2019

scheme that does not require a phase locked loop (PLL). Therefore, FSK modulation without phase information may be suitable for the constraint conditions. However, the characteristic that the used bandwidth is larger than the PSK does not satisfy the bandwidth constraint of the general transducer. Differential BPSK (Differential BPSK) / Differential QPSK (DQPSK), on the other hand, satisfy both the narrow bandwidth and the no need for synchronization.

III. IMPLEMENTATION OF ULTRASONIC MODEM

A. Hardware
The center frequency supported by the transducer is 48 kHz, and the available bandwidth is 2.5 kHz. The output signal is 12Vpp, And The received signal is amplified by Programmable Gain Amplifier(PGA). This signal passes through a bandpass filter implemented in a Field Programmable Gate Array (FPGA) based on the Cyclone V 5CEFA9F23C7N provided by Altera. ABOV's 8051-based MCU performs demodulation and bit decision.

B. Modulation

The orthogonal code is mapped to the ID to distinguish the

interference due to the signal transmitted from other transducer

or the multipath. Gold code is selected for orthogonality

between codes. The polynomial for generating the code is

,

and the code length N is

31bit. In near measurement, Barker code is used because it has

orthogonality even for short lengths and gold code cannot be

used in the near range. The generated orthogonal code is

converted into a differential code and a symbol with a phase

corresponding to each code bit is generated. At last, code is

modulated and transmitted.

C. Modulation
The signal is amplified by 91.5dB using a PGA to amplify the attenuated received signal. And pass through a bandpass filter implemented in the FPGA. This process reduces the noise of the signal. Finally, the signal sampled by the ADC is demodulated in the MCU, and then the correlation with the orthogonal code is checked if the signal transmitted by the ADC is returned.

Fig 2. DBPSK demodulation and correlation of received signal (48kHz).
IV. EXPERIMENT RESULT
A. Near Distance
Since the number of Barker code set is only one in specific length, Frequency Division Multiplexing(FDM) is applied in near measurement. The test frequency range was determined from 47kHz to 49kHz in consideration of the bandwidth of the transducer. Basically, the frequency of transmitted signal is 48kHz and demodulation and correlation results are below when reception frequency is 47kHz and 49kHz. The demodulated signal is degraded when the frequency of the received signal is 48 kHz and the demodulation reference frequency is 47 kHz or 49 kHz and the correlation peak is lower than that at 48 kHz. However, false alarm probability can be increased according to the detection threshold on correlation and more researches about near measurement are needed.
B. Far distance
Gold code is used for a far distance, and FDM is not used because the number of code sets per a specific length is sufficiently large. The measurement was performed at a center frequency of 48 kHz. The measurement was performed at 1m with restriction on the specification of prototype modem. The result is as follows. The demodulated signal and the correlation peak are correctly detected at the reception timing in Fig. 5. However, since the measurement in this paper is only conducted on a short distance, it is necessary to measure a distance of 5 m or more between the ultrasonic sensor and obstacle in future experiments, and an environment in which

TABLE I. N 31 63 127 511
1023 2047

PREFERRED POLYNOMIAL WHEN GOLD CODE GENERATED

Polynomial 1

Polynomial 2

Fig 3. DBPSK demodulation and correlation of received signal (49kHz).

615

Fig 2. DBPSK demodulation and correlation of received signal (47kHz).

an interference should be added.

V. CONCLUSION
In this paper, a simple experiment was carried out by suggesting improvement measures of ultrasonic sensor for vehicle. When an obstacle is detected by using an ultrasonic sensor, a signal other than that transmitted by the other ultrasonic sensor may act as an interference signal. Therefore, it is possible to distinguish the signal by inserting the ID into the ultrasonic signal and mainly use the DSSS. However, since the bandwidth of the ultrasonic sensor is very narrow, the data rate is very low when data is transmitted, which makes it difficult to detect a near obstacle due to a long transmission time. Therefore, the detection interval, the modulation method and the code length are biased so as to detect both near and far obstacles. Experiments were conducted using DBPSK and FDM at near and DQPSK at far distance, and it was confirmed that signal detection was possible by the correlation peak of the signal. However, due to hardware limitations, measurement was possible up to 1 m. So, research should be conducted to detect distant obstacles in the interference environment on the future experiments.
ACKNOWLEDGMENT
This work was supported by the Technology Innovation Program (or Industrial Strategic Technology Development

Fig 3. DQPSK demodulation and correlation of received signal (48kHz)
Program-Material Component Technology Development Project) (10077641, Development of piezoelectric material and self recognition ultrasonic sensor to improve sensing range for smart car) funded By the Ministry of Trade, Industry & Energy. (MOTIE, Korea)
REFERENCES
[1] Guang Lu ; Masayoshi Tomizuka, “LIDAR Sensing for Vehicle Lateral Guidance: Algorithm and Experimental Study”, IEEE/ASME Transactions on Mechatronics , vol. 11, no. 6, pp. 653-660, Dec. 2006.
[2] Chuan Li, David A. Hutchins and Roger J. Green, “Short-range ultrasonic digital communications in air,” in IEEE Transactions on Ultrasonics, Ferroelectrics, and Frequency Control, vol. 5, no.4, April 2008, pp. 908–918.
[3] Chuan Li, David A. Hutchins and Roger J. Green, “Short-Range Ultrasonic Communications in Air Using Quadrature Modulation,” in IEEE Transactions on Ultrasonics, Ferroelectrics, and Frequency Control, vol. 56, no.10, Oct, 2009, pp. 2060–2072.
[4] Laurent Segers, Jelmer Tiete, et al., “Ultrasonic Multiple-Access Ranging System Using Spread Spectrum and MEMS Technology for Indoor Localization,” in Sensors, vol.14, no.2. Feb. 2014, pp. 3172-3187.

616

