New Waveforms for Selective-RoI-Signaling Highrate Optical Camera Communication System

Minh Duc Thieu, Trang Nguyen, Thanh Luan Vu, Van Thang Nguyen, Yeong Min Jang Department of Electronics Engineering, Kookmin University, Seoul, South Korea
thieuminhduc2011@gmail.com, trang@kookmin.ac.kr, vuthanhluan999@gmail.com, thang.nguyenvan.hust@gmail.com, yjang@kookmin.ac.kr

Abstract—In this paper, we briefly discuss the potential of applying hybrid waveform into Optical Camera Communication, which can simultaneously transmit both low-rate and high-rate data streams for a challenging communication channel condition such as vehicular environment. The proper selection of suitable modulation schemes for these two simultaneous data streams along with the discussion on the impact of integrating data streams are overviewed.
Keywords—Optical wireless communication (OWC), optical camera communication (OCC), hybrid waveform, vehicular communication, IEEE 802.15.7r1, spatial-2-phase-shift-keying (S2PSK), camera-on-off-keying (C-OOK), hybrid-spatial-phase-shiftkeying (HS-PSK), dimming.
I. INTRODUCTION
Nowadays, Vehicle-to-Vehicle (V2V) communications have become a research topic of interest. V2V communications have promised to be a solution for avoiding accidents and easing traffic congestion in the future. It has been expected that there will be 381 million connected cars on the road by 2020 [1]. The rapid growth in ‘smart vehicles’ would open up a lucrative market for automotive industry.
In current vehicular communication systems, RF networks are widely implemented. However, Optical Camera Communication (OCC) and Visible Light Communication (VLC), which have been developed rapidly, would become a promised technology for vehicular communication system due to its advantages over RF. For examples, LED systems in vehicular can support lighting purpose and communication simultaneously [2]. In OCC field, applying hybrid waveform for high-rate OCC system for vehicles can bring the benefits of cost-effectiveness because it allows to achieved high speed data stream while reducing the cost of computation for the systems.

The hybrid waveform consists of two data streams: low-rate data stream, which is used for Rx to extract RoI information, and high-rate data stream. The use of hybrid waveform in highspeed OCC system for vehicles will be discussed in the next section of this paper.
The remainder of this paper consists of three sections which are organized as follow. In the Sections II, we discussed about the architecture of high-rate OCC system for vehicles in which hybrid waveform is applied. In Section III, we introduced new modulation schemes which can be deployed to detect/track the RoI and transmit high-rate data stream. In Section IV, we presented some experimental results of modulating hybrid waveform. Finally, the Section V concluded our work.
II. REFERENCE ARCHITECTURE
The frequency range which is greater than 200 Hz can be considered as a safe range for human eyes [3]. Therefore, the optical modulation rate for OCC is required to be more than 200 Hz for eye safety. Consequently, to sample optical signal at such frequency (equal to the frame rate of camera), cameras whose frame rate are at least two times higher than the modulation rate need to be implemented according to Nyquist’s theorem. In practice, a hundreds-fps or a kilo-fps frame rate camera should be used [2]. However, the use of a high-speed camera in receiver side for Tx data detecting and demodulating, which can increase the computational workload, would not be a cost-effectiveness scheme. Thus, the selective-RoI-signaling technique may be applied in Rx to mitigate the computational workload while high-rate data stream still be received. The RoI signaling technique allows Rx to receive two data streams simultaneously: a low-rate data stream is used to detect the RoI, then a high-rate data stream is received through the selected RoI.

Fig. 1. The reference architecture of vehicular communication system using hybrid waveform

978-1-5386-4646-5/18/$31.00 ©2018 IEEE

132

ICUFN 2018

An overall architecture of an OCC system for vehicles using hybrid waveform is presented in Fig. 1. In this system, vehicles that have two LED arrays (LED headlights, LED tail lights, etc.) can transmit optical signal including low-rate and high-rate data streams to nearby vehicles. The low-frame-rate Rx camera of these nearby vehicles will detect/track RoI, extract low-rate Tx data stream to set up the communication link then the high-frame-rate Rx camera will be activated to receive high-speed data stream which can bring many helpful information to guarantee the safety driving such as the locations or distances between vehicles.
III. SELECTION OF MODULATION SCHEMES
As we mentioned above, the RoI signaling is critical for further processes. Detecting RoI can helps Rx cameras identify the interested area to set up the communication link. In a vehicular communication system, after the RoI is detected, the RoI information such as vehicular identification, which is carried in low-rate data stream, should be extracted. When the RoI information is received by low-frame-rate Rx camera, high-rate data stream can be received by Rx high-frame-rate camera. By deploying this solution, the computational cost of systems can also be decreased compared to an OCC system, which only uses high-rate data stream with high-speed Rx cameras.
A. Low-rate data stream
Undeniably, the computational complexity of image processing limits the maximum processing frame rate of an object detection algorithm. Such a hundred frame-per-second processing is typically acceptable for supporting vehicular mobility. Suitable low-rate modulation and coding schemes for selective-RoI-signaling, which is designed intendedly for light sources detection and tracking should achieve the required frame-processing rate. Also, it is desired to support a large range of low-frame-rate cameras which are existing in the market. Currently, there are two shutter type of cameras, rolling shutter type and global shutter type, those have significant impact to the communication. Rolling shutter cameras are ubiquitous compared to global shutter cameras because of the inexpensive hardware of them [4]. They should also be detectable by Rx camera of vehicles in fast moving condition. New modulation schemes, which are called as spatial-2-phaseshift-keying (S2-PSK), and camera-on-off-keying (C-OOK), can be feasible modulation schemes for modulating low-rate data stream. The notable contribution of these modulation schemes will be discussed in the next two sections of this paper.
1) S2-PSK for RoI signaling Spatial-2-phase-shift-keying (S2-PSK) is a modulation scheme, which is proposed to support a car in detecting the RoI area. S2-PSK can support low-rate rolling shutter cameras by modulating LED lights at a constant clock rate, usually 200 Hz that are flicker-free to human eyes. This modulation scheme is being contributed to the modification of IEEE 802.15.7-2011 standard [5], which is operated by IEEE 802.15.7r1 Task Group (TG7r1).
A reference architecture to implement S2-PSK is shown in Fig. 2 below.

Fig. 2. The reference architecture of S2-PSK transmitter
The transmitter transmits data by controlling the relationship between a pair of LED waveform. In this modulation scheme, bit 0 is transmitted through waveforms with the two same-phase waveforms, when bit 1 is transmitted through two inverse-phase waveforms.



s1

(tk

)



1, 0,

0  tk  T / 2  T / 2  tk  0



The full waveform of LED-1 is expressed by the equation (2) [4]. An interval of a bit (Tbit) which is used to guarantee no flicker, is multiple times of the waveform cycle (T) (i.e. Tbit = NT).

N



  s1(t) s1(tk  kT) 



k 0

where

  s1

0t  (tk  kT)

Tbit  s1 (tk

)

The full waveform of LED-2 is showed in the equation (3) [4] where s2(tk) is the cycle #k among N cycles. s1(tk) is the inverse form of s1(tk).

N
  s2 (t) s2 (tk  kT)  k 0

where 

0  t  Tbit

 s2 

(tk

)



s1(tk)   s1(tk )

if (bit  0) if (bit 1)

The bit interval (Tbit) can be customized to change the frame rate of receiver, while the modulation clock rate is fixed. For example, 200 Hz clock rate with N = 20 can provide a 10 bps link which can support higher frame rate camera at 20 fps.
RLL coding at the 1/2-code rate proposed in this modulation scheme, is not only similar to general RLL coding that is to provide DC balance but also to overcome the probability of error caused by the time deviation between two light sources [6]. The advantage of the proposed RLL coding scheme will be discussed in the “Decoding guidance” section of this paper.
2) C-OOK for RoI Signaling In a vehicular communication system using OCC, when vehicles require more information via selective-RoI, a

133

modulation scheme called C-OOK, can be used in such circumstances. Due to the limitation of the shutter speed of these cameras, for example, most of the available smartphone cameras have a limit of 8 kHz on the shutter speed [7], we need a suitable modulation schemes for supporting such rolling shutter camera series in OCC. Consequently, a modulation scheme which is called as Camera On-Off Keying (C-OOK) is proposed. C-OOK is a modulation scheme which is based on On-Off Keying. It is proposed to support larger types of image sensors. The block diagram of the transmitter side is shown as Fig. 3 below.
Fig. 3. The reference architecture of C-OOK transmitter
A packet modulated by C-OOK consists of multiple repeated data sub-packet (DS) to avoid missing data in the gap time between two consecutive captured images. The packet rate is defined as the number of different packets with different payloads, which is transmitted during a period of time. This data packet structure is proposed to support both oversampling scheme, in which the frame rate of camera is much greater than the packet rate of transmitted data, and undersampling, in which the frame rate of camera is much smaller than the packet rate of transmitted data [7].
RLL coding is proposed to use in DS for maintaining the brightness constant at 50%. Some well-known RLL coding schemes such as Manchester code, 4B6B code and 8B10B code need to be consider to apply. The data rate efficiency of RLL coding schemes is expressed by equation (4) [7].
  Actual _ data _ rate .100%  Throughput
Using the equation (4), we can see that Manchester code has the smallest data rate efficiency (50%), the 8B10B code has the most data rate efficiency (80%) among three RLL coding schemes. However, due to the limitation of shutter speed of rolling shutter camera as we have mentioned in the previous section, the selection of coding scheme needs to be suitable to use in the limited bandwidth without flickering for the human eye.
The preamble (Start-of-frame) of a DS is also proposed with an equal ratio between bit 0 and bit 1 to maintain the average brightness 50% and avoid flickering. The payload of DS consists of three sub-parts: a front Ab, data, and a rear Ab. The front Ab and rear Ab include two asynchronous bits Ab1 and Ab2 in each. They are proposed to avoid errors in Rx when sampling incoming signal and to detect missed payload an. The detail use of them will be discuss in the “Decoding guidance” section of this paper.
B. High-rate data stream
To achieve high-speed data rate, a high-rate data stream shall be embedded into the low-rate data stream. This can be called as hybrid modulation. To perform hybrid modulation, a

particular dimming method can be deployed to generate the resulting average amplitude of the high-rate waveform for integrating the low-rate data. Many modulation schemes can be properly applied to generate a high-rate data stream, such notable schemes are introduced by IEEE TG7m such as Twinkle-VPPM [8] and HS-PSK [9]. Besides these (dimmable) single carrier modulation scheme, a (dimmable) multi-carrier modulation such as OFDM [10] can also be consider as another solution for our hybrid modulation system.
1) VPPM for high-rate transfer over selected ROI Twinkle-VPPM, introduced by Intel, is a combination of a low-rate based OOK modulation scheme and VPPM. The rapid change of VPPM clock rate generates the high-rate data stream while the low-rate change of pulse amplitude generates the low-rate data stream for RoI-signaling. Therefore, at a same time, while an Rx camera with fast exposure time can decode the high pulse rate data, an Rx camera with slow exposure time (e.g. 30fps camera) can only receive an optical signal with constant intensity.
2) HS-PSK for high-rate transfer Hybrid Spatial Phase-shift Keying (HS-PSK) is a combination of S2-PSK and Dimmable Spatial Multiple-PSK (DSM-PSK). HS-PSK waveform is transmitted by a pair of light source in a vehicle. The DSM-PSK performs pulse-width dimming to generate the low-rate S2-PSK waveform. Notably, it is designed to guarantee a stable performance under dimming. The outcome data rate of HS-PSK system can be achieved up to 22 kbps [2].
3) Carrier modulation for high-rate transfer OFDM for optical communication is promised to deliver very high data rate in OCC systems. According to [11], Rx high-speed image sensor in a vehicular communication system can achieve Mbps-level data rate from Tx using OFDM carrier. The amplitude of the OFDM waveform should be modulated by a dimming method called reversed-dimming to carry the RoI signaling data.
IV. EXPERIMENTAL RESULTS
A. Low-rate data stream implementation using S2-PSK Fig. 4 shows the demodulation process of LED bulbs,
which are modulated by S2-PSK modulation scheme. From our experiment, the distance at which the size of LEDs on the captured image is greater than three pixels (in height) can provide an acceptable performance for the XOR decoder. Therefore, 20m distance transmission can be achieved.
(a)

134

(b)
Fig. 4. Extracting waveforms from a pair of LEDs (a) LED bulbs, (b) Waveform extracted from Tx LEDs
B. Hybrid modulation using S2-PSK and OFDM Fig. 5 below presents an illustrative hybrid waveform using
S2-PSK and OFDM carrier with 0.5 scale reverse dimming level. S2-PSK waveform is generated with DC-balance by modulating the amplitude of OFDM.
Fig. 5. Extracting waveforms from a pair of LEDs (a) LED bulbs, (b) Waveform extracted from Tx LEDs
V. CONCLUSION AND DISCUSSION In this paper, we discussed about the potential of hybrid waveform, which consists of low-rate data stream, and highrate data stream for high-rate OCC systems. In this technical approach, the low-rate data stream can be sampled by low-rate rolling shutter camera system to set up communication link by detecting/tracking RoI while the high-rate data stream, which carries Mbps-level data link, can be demodulated by high-speed camera system. Next, we have summarized the technical approaches of some new modulation schemes (S2-PSK and COOK), which can fully support the low-rate rolling shutter camera system for selective-RoI signaling. Some types of modulation schemes and carrier modulation using for high-rate data stream (VPPM, HS-PSK and OFDM) are also discussed in our paper. Finally, some experimental results of low-rate and high-rate data streams have presented to prove the feasible of using hybrid waveform in a high-rate OCC system. Implementing hybrid waveform in high-rate OCC systems for vehicles may opened up opportunities to implement feasible systems, which not only guarantee the safety driving but also have the benefits of cost-effectiveness. This technical approach is promised to be an important communication technology for automotive industry in the future.
ACKNOWLEDGMENT This work was supported by Institute for Information & communications Technology Promotion (IITP) grant funded

by the Korea government (MSIT) (No. 2017-0-00824, Development of Intelligent and Hybrid OCC-LiFi Systems for Next Generation Optical Wireless Communications).

REFERENCES

[1] Amirul Islam, Md. Tanvir Hossan, Yeong Min Jang, “Introduction of Optical Camera Communication for Internet of Vehicles (IOV)”, Ubiquitous and Future Networks (ICUFN), July 2017.

[2] Trang Nguyen, Amirul Islam, Md. Tanvir Hossan, Yeong Min Jang, “Current Status and Performance Analysis of Optical Camera Communication Technologies for 5G Networks”, IEEE Access, vol. 5, March 2017, pp. 4574-4594.

[3] Sridhar Rajagopal-Samsung Electronics, Richard D. Roberts-Intel and Sang Kyu Lim-ETRI, “IEEE 802.15.7 Visible Light Communication: Modulation and Dimming Support,” IEEE Communication Magazine, March 2012.
[4] Trang Nguyen, Amirul Islam, Yeong Min Jang, “Region-of-Interest Signaling Vehicular System Using Optical Camera Communication”, IEEE Photon. J., vol. 9, no. 1, February 2017, Art. no. 7900720.

[5] 802.15.7-2011—IEEE Standard for Local and Metropolitan Area

Networks—Part 15.7: Short-Range Wireless Optical Communication

Using

Visible

Light.

Available

online:

http://standards.ieee.org/findstds/standard/802.15.7-2011.html (accessed

on April 15, 2017).

[6] “IEEE

802.15

Documents”,

Available

online:

https://mentor.ieee.org/802.15/documents (accessed on 15 April, 2017).

[7] Trang Nguyen, Mohammad Arif Hossain, Yeong Min Jang, “Design and Implementation of a Novel Compatible Encoding Scheme in the Time Domain for Image Sensor Communication”, Sensors 2016, 16(5), 736, May 2016.

[8] R. D. Roberts. Intel Proposal in IEEE 802.15.7r1, Slide 1-129, Available online: https://mentor.ieee.org/802.15/dcn/16/15-16-0006-01-007a-intelocc-proposal.pdf (accessed on April. 16, 2017).

[9] Kookmin University, PHY sub-proposal for ISC using Dimmable Spatial

M-PSK

(DSM-PSK),

2016.

Available

online:

https://mentor.ieee.org/802.15/dcn/16/15-16-0015-02-007a-kookmin-

university-phy-sub-proposal-for-isc-using-dimmablespatial-m-psk-dsm-

psk.pptx (accessed on April 16, 2017).

[10] J. Armstrong, “OFDM for optical communications,” J. Lightw. Technol., vol. 27, no. 3, pp. 189–204, Feb. 2009.

[11] Y. Goto et al., “A New Automotive VLC System Using Optical Communication Image Sensor”, IEEE Photon. J., vol. 8, no. 3, June 2016, Art. no. 6802716.

[12] John G. Proakis, Masoud Salehi, Communication Systems Engineering, 2nd ed., Prentice Hall, 2002, pp. 376-378.

DECODING GUIDANCE

A. S2-PSK Decoding method
To decode S2-PSK signal, the bit value is decided by the XOR operation. The output bit is 0 if the captured states of two LEDs are the same and the output bit is 1 for other captured states.
B. C-OOK Decoding method
The decoding and the data recovery procedure of C-OOK receiver side is shown in Fig. 6 below. The decoding method starts by down-sampling of a received image. Then, the downsampled image is de-trended to get the output data signal for Start-of-frame (SF) detection. The packet demodulator process consists of two parallel processes, forward and backward decoding, which can be deployed based on the position of the detected SF and Ab bits. As we mentioned above, the data packet structure is proposed to support both oversampling and undersampling schemes by using front/rear Ab bits and transmitting the same DS N times.

135

simultaneously. However, if Rx is a rolling shutter camera, the rotation problem need to be considered. In a vehicular system using rolling shutter camera for Rx, we may usually endure this rotation problem.
When the rotation problem occurs, the deviation in sampling time of two light sources need to be considered. The sampling time deviation caused by rotation can be calculated by equation (5) [4].

Fig. 6. C-OOK RX block diagram
In the oversampling scheme, the packet demodulated process depends on the exposure time of the rolling shutter camera. When the exposure time of a rolling shutter camera is approximate equivalent to the time interval of a DS, the rolling image should be able to recover the full length of a DS. In this case, two types of fusion algorithm is proposed to recover data symbols at different sampling times, and they are called interframe and intra-frame data fusion. These data fusion algorithms are illustrated in Fig. 7 below.
 Inter-frame data fusion: Merging two sub-parts of a DS payload at two different images into a complete DS payload. It is deployed when two Ab bits in an image is different.
 Intra-frame data fusion: Recovering a complete DS payload from an image. It is deployed when two Ab bits in an image are similar.

 t

N

pixel



1 Fs





where Npixel is the number of different pixel rows between two light source which is captured in a same image, Fs is the sampling rate of the rolling shutter camera.
As we mentioned above, the RLL coding is applied in Tx to resolve the rotation problem. Therefore, RLL decoder is necessary after XOR operation. If two RLL binaries belong to a bit are affected, the bit is still correct. Error only occurs if only one of two RLL binaries is affected. In addition, the bit sequence is still correct even the synchronization in grouping a pair of RLL binaries is loss.

2) C-OOK sampling error correction In undersampling scheme, if the frame rate of camera is lower than the packet rate of transmitted data, a data packet may be lost. In this case, two asynchronous bits in front and rear Ab that carry the same information can help to detect missing packet. The square signal Ab1 changes from zero/one into one/zero every time of single data packet, while square signal Ab2 changes every time of two data packets. It means that the combination of two asynchronous bits generates four different values, 00 01 10 and 11. Thus, they can detect a maximum of two missed packets continuously. Fig. 8 is an example of using two asynchronous bits to detect a missed data packet.

Fig. 7. The illustration of data fusion algorithms

C. Matched filter decoding
Matched filter can be applied to sampling process of Rx. Based on matched filter’s property [12], it can be applied to helps Rx sample the input signal with less error by increasing the SNR of incoming signal if the impulse response of Tx is matched to Tx pulse shape. The matched filter can also increase the overall SNR of the system by mitigating some amount of noise of the incoming signal.
D. Correction of sampling error
1) S2-PSK sampling error correction This section describes the decoding algorithm for S2-PSK modulation scheme. If Rx is a global shutter camera, it is easier to decode the data from Tx when two LEDs on Tx are captured

Fig. 8. An example of the detection of a missed data packet by using two asynchronous bits Ab
In addition, the Ab bits are also deploying in the majority voting procedure to correct any mismatched data errors. The majority voting is a kind of error correction that is simple to implement.

136

