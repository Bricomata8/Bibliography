Performance Evaluation of Kademlia in Mobile Ad Hoc Networks

Mohammad Al Mojamed
Computer Science Department UMM AL-QURA UNIVERSITY
Alqunfudhah, Saudi Arabia mmmojamed@uqu.edu.sa

Awwadh Al-shehri
Computer Technology Department Technical and vocational Training Corporation
Alqunfudhah, Saudi Arabia Aalshehri15@tvtc.gov.sa

Abstract— MANET is a decentralized network optimized for an infrastructure-less area. Its applications are designed to operate in a distributed manner. Peer-to-peer (P2P) overlays are a possible addition to MANETs to aid in managing resources and information sharing in distributed networks. In this paper, the Kademlia P2P overlay is deployed over a dynamic and different MANET underlaying technologies. This overlay was combined with two different types of MANET routing: OLSR and AODV. An extensive evaluation is carried out for the performance of these combinations in different dynamic network settings. The results show that in most cases, Kademlia achieves its best performance when layered over AODV. However, OLSR-based Kademlia outperforms AODV in terms of delay and network load.
Keywords—Kademlia; P2P; MANET; P2P over MANET.
I. INTRODUCTION
A mobile ad hoc network (MANET) is a collection of mobile devices that communicate with each other using wireless technology. In this paradigm, there is no need for existing infrastructure or centralized components to organize and manage the network. Mobile nodes work as hosts and routers at the same time, forwarding traffic to other participating mobile nodes that are outside the sender’s transmission range.
MANETs are a promising solution for cheaper connectivity to a wide area, due to their low-cost and lack of infrastructure requirements. They can be used to build a network where there is no infrastructure, such as emergency rescue operations, disaster areas and forests.
Since these are decentralized networks, applications for MANETs are designed to operate in a distributed manner. The P2P paradigm is seen as the most suitable approach to manage MANET applications, as it distributes network management tasks among participating nodes. A P2P network is a system that is distributed in nature, and does not involve a centralized management scheme.
There are certain similarities between the two structures, since both networks are dynamic, self-organized and decentralized. These similarities mean that P2P is a good candidate approach for managing MANET applications. The synergy between P2P and MANET has been well studied in the literature, and several P2P systems have been deployed over MANET in recent years. Several P2P systems have been

deployed over MANET without alteration, while others have been modified to better meet the needs of MANETs.
In this paper, we deploy the Kademlia P2P system over a MANET. Kademlia is one of the most widespread P2P system due to its simplicity and efficiency [1][2]. It has been deployed widely on popular internet applications, such as BitTorrent and eMule. The original contributions of this paper are the deployment of this P2P system over different MANET routing systems for the first time, an extensive evaluation of its performance in a dynamic network and identification of the most suitable settings. We therefore deploy Kademlia using two different MANET routing technologies; more specifically, the performance of the system is evaluated for reactive (AODV) and proactive (OLSR) MANET routing. Kademlia over MANET was evaluated using a simulation based on the OMNET++ network simulator. The results indicate that AODV-based Kademlia outperforms the OLSR-based version in terms of managing the retrieval of shared keys in most of the networks simulated. However, in terms of end-to-end delay and network load, the OLSR-based system achieves better results.
The remaining sections of the paper are organized as follows. Section II gives a background for both MANET and P2P networks, and discusses related work. Section III presents the Kademlia overlay over MANET, and discusses the setup of the simulation environment, performance metrics and experimental results. Finally, the conclusion and future work for this study are presented in Section IIII.
II. BACKGROUND
A. P2P and MANET
P2P networks are distributed in nature [3][4][5] and centralized components are not required to manage the network. P2P networks enable participants to find services and resources, and are used for various purposes such as file sharing, voice over IP (VoIP), messaging and gaming. P2P networks operate as an independent overlay on top of an existing underlying physical network. In general, P2P protocols can be categorized into two main classes: structured and unstructured.
In unstructured P2P, a relationship does not exist between the overlay structure and the contents of the peers. Consequently, it is difficult to find a specific location via a

978-1-5386-4646-5/18/$31.00 ©2018 IEEE

458

ICUFN 2018

given query; the only way to find the location is to search the entire network or subset of the network. Query-broadcasting is a technique used by most P2P protocols that do not involve a structure. The original Gnutella [6] Freenet [7] and Gia [8] networks are examples of unstructured P2P.
Structured P2P protocols employ specific mechanisms to decide where services or keys should be located on the network, hence enhancing the efficiency of key lookups [4]. In structured overlays, peers cooperate with each other by maintaining routing information to all peers in the overlay. Peers and keys are placed in a logical address space, which is organized into a specific geometry according to the developed protocol. Pastry [9], Chord [10], EpiChord [11] and Kademlia [12] are examples of structured P2P.
MANETs, on the other hand, consist of independent mobile nodes that move freely, causing disruption to connectivity. A MANET is infrastructure-less network in which no fixed components are needed, and can therefore be formed at will if two or more devices are within each other’s radio range. MANETs can be used for military purposes, disaster applications, vehicular ad hoc networks and delay-tolerant networks.
MANET routing is traditionally divided into two main categories; proactive and reactive. More details of MANET routing can be found in [13][14]. Proactive MANET routing employs a system where participating nodes in the network maintain routes to all the other nodes within the network. Proactive protocols are preferable for low latency, since routes are available in advance. However, this comes at a cost of a high volume of traffic, which is required to build and maintain routing table entries, especially when the network size increases. OLSR [15], BATMAN [16] and DSDV [17] are examples of this category.
In reactive routing, routes between nodes are calculated when needed, thus generating less traffic than in proactive routing. However, this comes at the cost of higher latency as a result of the route discovery that a source node must undertake to find the route to a destination. AODV [18], DYMO [19] and DSR [20] are common examples of reactive routing.

over DSR MANET routing by Burresi et al. [30]. EpiChord is another P2P system that was deployed over OLSR by Al Mojamed and Kolberg [22]. The Bamboo system was also used in a MANET by Millar et al. [31], Millar et al. [32] and Castro et al. [33], where it was layered over OLSR and AODV. Kademlia was also deployed over low dynamism MANET using AODV by [34]. Finally, the CAN [35] and Pastry P2P systems were layered ‘as is’ over OLSR and DSR by Shah and Qian [24] and Pucha et al. [36], respectively.
The straight deployment of these P2P systems aimed to investigate the pure performance of traditional P2P systems in MANETs or to compare the performance of certain modified P2P systems with the original systems in a MANET environment. However, the performance of P2P Kademlia has not yet been investigated within Dynamic MANET networks and varying underlaying technologies. Kademlia has only been reported in the MANET literature as improving MANET routing at the network layer [37], integrated at the network layer using a DSR MANET routing protocol, or over low dynamism network.
III. KADEMLIA OVER MANET
A. Simulation Setup
An OMNET++ [38] network simulator was used to carry out a performance analysis of Kademlia in a MANET. An Oversim module [39] was used to simulate the overlay, i.e. the Kademlia P2P system, and the INET [40] framework was used to simulate the underlying network. INET supports wired, wireless and mobile network simulations. Network nodes in the simulated network followed the TCP/IP reference module. Fig. 1 shows the network stack for a mobile node in the simulated networks.

B. Related Work
P2P systems have been deployed over MANET for many different purposes [21]. Some proposals have deployed P2P protocols to provide P2P functionality at the application layer, in a similar way to their original use; others have used P2P systems to improve MANET routing performance at the network layer. In this work, we give a general review of systems that have deployed structured P2P systems ‘as is’ over MANET.
The Chord P2P protocol is the most commonly used system in the MANET field. It has been deployed as is by Al Mojamed and Kolberg [22], Thaalbi et al. [23], Shah and Qian [24] and Shah and Qian [25] over OLSR. The performance of Chord layered over AODV MANET routing was investigated by JingQing et al. [26], Da Hora et al. [27], Fantar and Youssef [28] and Lee et al. [29]. Additionally, Chord has been deployed

Fig. 1: Network stack for a mobile node
Extensive simulations were conducted to investigate the performance of Kademlia over MANET. In terms of MANET technology, two different MANET routing protocols belonging to different MANET routing categories were used: Kademlia was layered over reactive MANET routing (AODV) and layered over proactive MANET routing (OLSR).
A range of values were explored for the two main parameters of network size and frequency of sending key lookups in the network. For the former, network sizes of 25, 50, 75 and 100 nodes were used to investigate the performance for different network intensities. For the latter, the key lookup frequency was varied (10, 20 and 30 s) to investigate the performance of Kademlia for both relaxed and heavy overlay usage. For example, in a scenario with a lookup frequency of

459

10 s, key lookups are sent almost every 10 seconds by each individual mobile node in the network. All scenarios were simulated in a dynamic network where nodes set to move randomly at speed of 5 m\s. Table 1 shows the values of the different parameters used in the simulated networks.

Table 1: Simulation Configuration

Simulator

OMNeT++

MANET protocols

OLSR and AODV

Network size

1000 m x 1000 m

Propagation model

Two ray grounds

Number of nodes

25, 50, 75 and 100

Mobility model

Random way point

Node speed

5 m/s

Measurement time

900 s

Transmission range

250 m

Network stabilization

120 s

Simulation repetitions

5

MAC Layer

IEEE 802.11

Lookup frequency

10, 20 and 30 s

Kademlia K

4

Kademlia S

2

Kademlia b

1

results than the OLSR-based version. Kademlia’s performance decreases for both underlays as a function of the network size.
However, the drop in performance as the network size increases is less marked when Kademlia is layered over OLSR than in the AODV-based version. The success ratio of AODVbased Kademlia is reduced by about 20% when the number of mobile nodes increases to 100 (from 90%+ to 70%+). On the other hand, OLSR-based Kademlia is more stable, and loses less than 10% across the range of network sizes.
In terms of lookup frequency, Kademlia achieves its best performance when key lookups are issued every 30 s, for both MANET underlays. However, as more key lookups are sent (i.e. a decrease in lookup frequency), fewer key lookups are answered.
Fig. 2:Success ratio vs. network size for OLSR-based Kademlia

B. Performance Metrics
The following performance metrics were evaluated in the simulations:
• Latency: This is the average time that a mobile node requires to solve a key lookup query. It covers the total journey time, from the time the key lookup query is sent until the answer to that particular key lookup is received. This measures the ability of the overlay/underlay combination to find a shared key in the network.
• Network traffic: This is the total number of packets transmitted at the routing layer by all nodes in the network. It is used to analyze the effect of network load on the performance of Kademlia.
• Success rate: This is the ratio between the number of key lookup queries successfully retrieved for keys that exist in the network and the overall number of key lookup queries initiated during the network’s lifetime.

Fig. 3: Success ratio vs. network size for AODV-based Kademlia

C. Experimental Results
Fig. 2 and 3 show the ability of Kademlia, layered over OLSR and AODV respectively, to retrieve shared keys from the overlay. Overall, AODV-based Kademlia achieves better

Fig. 4: Success ratio vs. lookup frequency for 100 nodes

460

Fig. 4 shows the success rate for a network consisting of 100 mobile nodes for three different lookup intervals (10, 20 and 30 s). As the graph shows, when lookups are sent every 20 or 30 s, AODV-based Kademlia achieves a better performance than the OLSR-based version. However, when key lookups are sent more frequently (every 10 s), the performance of AODVbased Kademlia deteriorates, and yields the worst performance. An obvious reason for this deterioration is that AODV is a reactive routing protocol and searches for routes on demand. Thus, more route discovery is required to handle high demand from the overlay, resulting in more traffic in the network and a higher probability of packet loss. This is reflected in the performance of the overlay.
Fig. 5, 6 and 7 illustrate the average time in milliseconds required to solve key lookups for a range of network sizes with different lookup intervals. Figure 5 shows the performance of Kademlia layered over OLSR; this combination can answer key lookups in less than 50 ms, even for a network consisting of 100 mobile nodes.
Fig. 6 shows the performance of AODV-based Kademlia. As the figure shows, the delay reaches its highest (around 200 ms) for a network of 100 nodes. The main reason for this large delay is that AODV is a reactive routing protocol that works on demand; hence, routes between the source and destination will only be discovered when needed. Thus, more time is needed to find a path between physical nodes, and this inevitably results in a higher delay in the performance of the overlay, especially when overlay key lookups are not resolved from the first logical hop. In contrast, OLSR is proactive and makes routes available in advance of their usage, resulting in smaller delays when retrieving shared keys.

Fig. 7 shows the delay for the Kademlia overlay based on both underlays, for a network size of 100 nodes. Overall, OLSR-based Kademlia achieves better performance for all simulated lookup intervals. As can be seen, the delay in the AODV-based overlay increases when lookups are sent more frequently (every 20 and 10 ms). One reason for this is that as demand from the overlay increases (sending more key lookups), more route discovery messages are sent from the underlay to satisfy the overlay requirement. This increases the rates of collision and packet loss, and affects the performance of the overlay in terms of both delay and success ratio (see Fig. 4). If route discoveries are solved, there is a higher delay, and consequently, the overlay lookups incur a higher delay.
Fig. 7: Delay vs. lookup frequency for 100 nodes
The network loads for the simulated scenarios are shown in Fig. 8, 9 and 10. The values represent the total number of network layer packets sent over the network by all participating nodes. The results of the simulation show that the AODVbased overlay sends a huge amount traffic over the network compared to the OLSR-based overlay. This is not surprising, as AODV is a reactive routing protocol that works on demand and imposes regular updates for route entries in the routing table.

Fig. 5: Delay vs. network size for OLSR-based Kademlia

Fig. 6: Delay vs. network size for AODV-based Kademlia

Fig. 8: Traffic vs. network size for OLSR-based Kademlia
For a network size of 25 nodes, both combinations give similar performance regardless of the lookup interval. However, for a larger network size, OLSR-based Kademlia outperforms the AODV-based version, giving a lower load for all network sizes.

461

Sybil attack in Kademlia,” Comput. Networks, vol. 94, pp. 205–218, 2016.

[3]

Q. H. Vu, M. Lupu, and B. C. Ooi, Peer-to-peer computing:

Principles and applications. Berlin, Heidelberg : Springer-Verlag,

2010.

[4]

J. F. Buford and H. Yu, “Peer-to-Peer Networking and Applications:

Synopsis and Research Directions,” in Handbook of Peer-to-Peer

Networking, Springer US, 2010, pp. 3–45.

[5]

J. F. Buford, H. Yu, and E. K. Lua, P2P Networking and

Applications. Burlington, USA: Morgan Kaufmann, Elsevier, 2009.

Fig. 9: Traffic vs. network size for AODV-based Kademlia

[6]

“The Annotated Gnutella Protocol Specification v0.4.” [Online].

Available: http://rfc-gnutella.sourceforge.net/developer/stable/.

[7]

I. Clarke, O. Sandberg, B. Wiley, and T. Hong, “Freenet: A

distributed anonymous information storage and retrieval system,” in

Designing Privacy Enhancing Technologies, Berlin Heidelberg:

Springer, 2001, pp. 46–66.

[8]

Y. Chawathe, S. Ratnasamy, L. Breslau, N. Lanham, and Shenker,

“Making gnutella-like P2P systems scalable,” in Proceedings of the

2003 conference on Applications, technologies, architectures, and

protocols for computer communications, 2003, pp. 407–418.

Fig. 10: Traffic vs. network size for a lookup frequency of 30

[9]

A. Rowstron and P. Druschel, “Pastry: Scalable, decentralized

object location, and routing for large-scale peer-to-peer systems,” in

Middleware, vol. 2218, Berlin Heidelberg: Springer, 2001, pp. 329–

350.

[10] I. Stoica, R. Morris, D. Karger, M. F. Kaashoek, and H.

IV. CONCLUSION AND FUTURE WORK

Balakrishnan, “Chord : A Scalable Peer-to-peer Lookup Service for Internet,” in Applications, technologies, architectures, and protocols

In this paper, the performance of the Kademlia P2P overlay

for computer communications (SIGCOMM), 2001, pp. 149–160.

is extensively evaluated for both reactive and proactive [11] B. Leong, B. Liskov, and E. D. Demaine, “EpiChord: Parallelizing

MANET routing protocols, namely AODV and OLSR. The

the Chord lookup algorithm with reactive routing state

results of simulations indicate that the Kademlia P2P protocol generally achieves its best performance in terms of retrieving a key from the overlay when it is combined with AODV.

management,” Comput. Commun., vol. 29, no. 9, pp. 1243–1259, May 2006.

However, the performance of AODV-based Kademlia [12] P. Maymounkov and D. Mazieres, “Kademlia: A peer-to-peer

deteriorates as the network size increases, and it performs

information system based on the xor metric,” Peer-to-Peer Syst., pp.

worse than the OLSR-based overlay for heavy usage settings.

53–65, 2002.

In terms of end-to-end delay and network load, OLSR-based [13] A. Boukerche, B. Turgut, N. Aydin, M. Z. Ahmad, L. Bölöni, and

Kademlia outperforms the AODV-based overlay for all

D. Turgut, “Routing protocols in ad hoc networks: A survey,”

networks simulated.

Comput. Networks, vol. 55, no. 13, pp. 3032–3080, 2011.

This evaluation forms a base for further study, allowing [14] E. Alotaibi and B. Mukherjee, “A survey on routing algorithms for

many interesting questions to be investigated. The possibility

wireless Ad-Hoc and mesh networks,” Comput. Networks, vol. 56,

of optimizing underlay routing information using cross-

no. 2, pp. 940–965, 2012.

layering to build the overlay will be examined in future work.

The goal is to reduce the network load to a minimum while [15] T. Clausen and P. Jacquet, “Optimized link state routing protocol

achieving reasonable performance when Kademlia is combined

(OLSR),” RFC 3626, doi10.17487/RFC3626, 2003.

with AODV, and enhances the success ratio when combined [16] A. Neumann, C. Aichele, M. Lindner, and S. Wunderlich, “Better

with OLSR.

approach to mobile ad-hoc networking (BATMAN),” IETF Draft,

2008.

REFERENCES

[17] C. E. Perkins and P. Bhagwat, “Highly Dynamic Destination-

Sequenced Distance-Vector (DSDV) for Mobile Computers,” in the

[1]

A. Delgado Peris, J. M. Hernández, and E. Huedo, “Evaluation of

ACM conference on Communications architectures, protocols and

alternatives for the broadcast operation in Kademlia under churn,”

applications (SIGCOMM), 1994, pp. 234–244.

Peer-to-Peer Netw. Appl., vol. 9, no. 2, pp. 313–327, 2016.

[18] S. Das, C. Perkins, and E. Belding-Royer, “Ad hoc on-demand

[2]

R. Pecori, “S-Kademlia: A trust and reputation method to mitigate a

distance vector (AODV) routing,”

462

http://www.ietf.org/rfc/rfc3561.txt, 2003.

[30] S. Burresi, C. Canali, M. E. Renda, and P. Santi, “M ESH C

[19] C. Perkins, S. Ratliff, and J. Dowdell, “Dynamic MANET On-

HORD : A Location-Aware , Cross-Layer Specialization of Chord

demand Routing Protocol (DYMO),” Draft-ietf-manet-dymo, 2005.

for Wireless Mesh Networks,” in Sixth Annual IEEE International

[20] D. Johnson, Y. Hu, and D. Maltz, “The Dynamic Source Routing Protocol (DSR) for Mobile Ad Hoc Networks for IPv4,” RFC 4728,

Confrence on Pervasive Computing and Communications, 2008, pp. 206–212.

doi10. 17487/RFC4728, 2007.

[31] G. P. Millar, E. A. Panaousis, and C. Politis, “ROBUST: Reliable

[21] M. AL Mojamed and M. Kolberg, “Structured Peer-to-Peer overlay deployment on MANET: A survey,” Comput. Networks, Elsevier,

overlay based utilisation of services and topology for emergency MANETs,” in Future Network & Mobile Summit, 2010, pp. 1–8.

vol. 96, pp. 29–47, 2016.

[32] G. P. Millar, E. Panaousis, and C. Politis, “Distributed Hash Tables

[22] M. Al Mojamed and M. Kolberg, “OnehopMANET: One-hop Structured P2P over Mobile ad hoc Networks,” Next Gener. Mob.

for Peer-to-Peer Mobile Ad-hoc Networks with Security Extensions,” J. Networks, vol. 7, no. 2, pp. 288–299, 2012.

Apps, Serv. Technol. IEEE(NGMAST), 2014 Eighth Int. Conf., pp.

[33] M. C. Castro, E. Villanueva, I. Ruiz, S. Sargento, and A. J. Kassler,

159–163, 2014.

“Performance Evaluation of Structured P2P over Wireless Multi-

[23] M. Thaalbi, N. Tabbane, T. Bejaoui, and A. Meddahi, “Enhanced Backtracking Chord protocol for mobile Ad hoc networks,” in 2nd International Conference on Communications and Information

hop Networks,” in Second International Conference on Sensor Technologies and Applications (SENSORCOMM), 2008, pp. 796– 801.

Technology (ICCIT), 2012, pp. 191–195.

[34] A. Sewak, M. Pandey, and M. Gore, “Performance Evaluation of

[24] N. Shah and D. Qian, “Cross-Layer Design to Merge Structured P2P Networks over MANET,” 2010 IEEE 16th Int. Conf. Parallel Distrib. Syst., pp. 851–856, Dec. 2010.

Peer-to-Peer Structured Overlays over Mobile Ad Hoc Networks Having Low Dynamism,” in Lecture Notes in Computer Science, vol. 10026 LNCS, 2016, pp. 208–223.

[25] N. Shah and D. Qian, “An efficient structured P2P overlay over MANET,” in the Ninth ACM International Workshop on Data Engineering for Wireless and Mobile Access (MobiDE), 2010, pp. 57–64.

[35] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker, “A scalable content-addressable network,” in Applications, technologies, architectures, and protocols for computer communications (SIGCOMM), 2001, pp. 161–172.

[26] M. Jing-qing, J. Hong, and L. Ting, “Cross-layer optimized Chord protocol for separated ring convergence in MANET,” J. China Univ. Posts Telecommun., vol. 16, no. 4, pp. 84–90, 2009.
[27] D. N. da Hora, D. F. Macedo, L. B. Oliveira, I. G. Siqueira, A. a. F. Loureiro, J. M. Nogueira, and G. Pujolle, “Enhancing peer-to-peer content discovery techniques over mobile ad hoc networks,” Comput. Commun., vol. 32, no. 13–14, pp. 1445–1459, 2009.
[28] S. G. Fantar and H. Youssef, “Locality-aware Chord over Mobile Ad Hoc Networks,” in Global Information Infrastructure Symposium (GIIS), 2009, pp. 1–6.

[36] H. Pucha, S. Das, and Y. Hu, “Ekta: An efficient dht substrate for distributed applications in mobile ad hoc networks,” in the sixth IEEE workshop on mobile computing systems and applications (WMCSA), 2004, pp. 163–173.
[37] B. Zhao, Y. Wen, and H. Zhao, “KDSR: An Efficient DHT-Based Routing Protocol for Mobile Ad Hoc Networks,” in Ninth International Conference on Hybrid Intelligent Systems (HIS), 2009, pp. 245–249.
[38] “OMNET++ network simulator.” [Online]. Available: http://omnetpp.org/.

[29] M. Li, W.-C. Lee, and A. Sivasubramaniam, “Efficient peer-to-peer information sharing over mobile ad hoc networks,” in the Second

[39] “The Overlay Framework (OverSim).” [Online]. Available: http://www.oversim.org/.

Workshop on Emerging Applications for Wireless and Mobile

[40] "INET Framework for OMNeT++" [Online]. Available:

Access (MobEAII), 2004.

https://inet.omnetpp.org/.

463

