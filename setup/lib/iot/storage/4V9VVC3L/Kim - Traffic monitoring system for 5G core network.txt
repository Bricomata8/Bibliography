Traffic monitoring system for 5G core network

Eungha Kim
Network Research Division ETRI
Daejeon, Korea ehkim@etri.re.kr

Young-il Choi
Network Research Division ETRI
Daejeon, Korea yichoi@etri.re.kr

Abstract— The standalone(SA) 5G system is a true 5G system that uses 5G radio between the user terminal and the base station, and the core network also uses a 5G core network. In the 5G core network of the SA 5G system, traffic is transmitted to the user terminal through various methods such as a switching method and a splitting method which use wired and 5G, WIFI wireless BS interfaces in a fusion. However, the 5G system operator has no way of knowing whether traffic delivery methods such as switching and splitting are normally performed. Therefore, this paper proposes a 5G core network traffic monitoring system that allows operators to easily identify switching and splitting traffic using the traffic monitoring messages delivered from the 5G core network functions that make up the 5G core network.
Keywords—5G system, traffic moniotring system, traffic switching, traffic splitting
I. INTRODUCTION
5G systems are divided into NA (Non-Standalone) systems and SA (Standalone) systems [1]. The NA 5G system uses 5G radio between the user terminal (UE) and the base station (BS), while the core network uses a 4G core network and is not a perfect 5G system [2]. The SA 5G system is a true 5G system that uses 5G radio between the user terminal and the base station, and the core network also uses a 5G core network [2]. In the 5G core network of the SA 5G system, traffic is transmitted to the user terminal through various methods such as a switching method and a splitting method which use wired and 5G, WIFI wireless BS interfaces in a fusion. The switching method is a method of transferring traffic from one wireless BS interface to another wireless or wired BS interface. The splitting method is a method of transmitting traffic to two BS interfaces rather than one interface. However, the 5G system operator has no way of knowing whether various traffic delivery methods such as switching and splitting are normally performed.
Therefore, this paper proposes a 5G core network traffic monitoring system that allows operators to easily identify switching and splitting traffic using the traffic monitoring messages delivered from the 5G core network functions that make up the 5G core network. The 5G core network traffic monitoring system receives the common traffic monitoring transmission message from each 5G core network functions and visually expresses the signal message handling process, the session handling process, and the traffic flow handling process for switching and splitting. So, operators can monitor switching and splitting traffics through this visual representation.

II. RELATED WORKS
3GPP has been standardizing access traffic steering, switching and splitting (ATSSS) through TR23.793 documents as a study item until 2018 [3]. Starting from 2019, the application of ATSSS standardization work will be carried out based on TS23.501 (Architecture), TS23.502 (Procedure) and TS23.503 (Policy and Charging) standards, which are core standard documents of 5G system. In TR 23.793, steering, switching, and splitting are applied between 3GPP and non3GPP access, and their functions are defined as follows. Access traffic steering selects an access network for a new data flow and transfers the traffic of this data flow over the selected access network. Access traffic switching moves all traffic of an ongoing data flow from one access network to another access network in a way that maintains the continuity of the data flow. Access traffic splitting splits the traffic of a data flow across multiple access networks. When traffic splitting is applied to a data flow, some traffic of the data flow is transferred via one access and some other traffic of the same data flow is transferred via another access.
ATSSS uses multi-access(MA) PDU. MA PDU is a type of PDU session that allows application to send/receive traffic either over 3GPP access, or non-3GPP access, or both accesses simultaneously. MA PDU session comprises of a PDU session over 3GPP access and a linked PDU session over non-3GPP access, or vice versa. Each of the PDU sessions may have its own set of UPFs, but both PDU sessions share a common PDU session anchor. For MA PDU session, applications in UE and the host server are not aware of traffic split across multiple accesses.
III. 5G CORE NETWORK VISUALIZATION TARGETS
In the visualization function of the 5G core network traffic monitoring system, the network topology similar to the 5G network reference model is visualized, and the sending and receiving states of signaling messages between the 5G core functions are shown. The main visualization elements for representing the 5G network state and the signaling messages associated with these visualization elements are described below. The 5G core network traffic monitoring system basically monitors all the signal messages on the 5G network and visualizes the collected signal messages on the screen through the graphic. This signal message consists of header information including information needed for visualization and payload information, which is a body that contains the content of messages exchanged between 5G core functions. The header

978-1-7281-1340-1/19/$31.00 ©2019 IEEE

671

ICUFN 2019

information includes a sender 5G core network function identifier, a receiver 5G core network function identifier, a message category corresponding to the message number between the sender 5G core network function and the receiver 5G core network function, a message type corresponding to the message name delivered between the sender 5G core network function and the receiver 5G core network function, and a session identifier. Elements to be visualized include a terminal connection state, a session connection state, a flow connection state, and a signal message.
The terminal connection state visualization element visualizes the state where the terminal UE is connected to the base station BS. Visualization of the terminal connection state visualizes the state of connection to a specific BS when the 5G core network traffic monitoring system receives the terminal registration completion message, which is the time point at which the registration procedure of the UE is completed. And, as shown in figure 1, the color associated with the UE is displayed differently for each BS.

A switching traffic delivery method that transfers traffic from one wireless BS interface to another wireless or wired BS interface through visualization of UE connection state, session connection state, and flow connection state is as shown in figure 4. Figure 4 is visualized in the 5G network configuration that the traffic is switched from the existing 5G interface to the WIFI interface.
Figure 4. Visualization of switching traffic delivery method
In addition, the splitting delivery method that transmits traffic to two BS interfaces rather than one BS interface can be visualized in the 5G network configuration that traffic is simultaneously delivered to the fixed interface as well as the existing 5G interface as shown in figure 5.

Figure 1. Visualization of terminal connection state
Next, the session connection state visualization element visualizes the session connection state between UE and GW. The session indicates the connection state between UE, BS and GW. The session visualization is performed when the 5G core network traffic monitoring system receives the session connection completion message, which is the time point at which the session connection procedure is completed. And as shown in figure 2, the colors are displayed differently for each session.
Figure 2. Visualization of session connection state
The flow connection state visualization element visualizes the application connection state used by the UE. The flow shows the connection state between UE, BS, GW, and application server(APP). When the 5G core network traffic monitoring system receives the application connection completion message transmitted from the UE, it visualizes the flow connection state between UE, BS, GW and the application server. As shown in figure 3, the connection state of the flow is displayed together with the specific session.
Figure 3. Visualization of flow connection state

Figure 5. Visualization of splitting traffic delivery method
IV. 5G CORE NETWORK TRAFFIC MONITORING SYSTEM
The proposed 5G core network traffic monitoring system consists of a signal message reception function, a signal message processing function, a network traffic visualization function, a signal sequence production function, and a network configuration information repository as shown in figure 6.
The signal message reception function receives a signal message transmitted from the 5G core network function, the BS and the terminal UE to the 5G core network traffic monitoring system. The type of signal message received by the signaling message reception function receives all the signaling messages used in the 5G core network. Especially, there is the N01RegAcpt message, which is a message related to UE registration visualization, and the N01DregAcpt message, which is related to UE deregistration visualization, as a message for terminal connection state visualization related to 5G core network traffic monitoring visualization. There are N04SsnEstbReq message related to session setup visualization and N04SsnRelReq message related to session release visualization as a message for session connection state visualization. Messages for flow connection state visualization include the N50AppConnected message, which is related to application connection flow state visualization, and the

672

N50AppDisconnected message, which is related to application disconnection flow state visualization. N50AppSwitched message is related to application switching flow state visualization, and an N50AppSplitted message is related to application splitting flow state visualization. The signal message reception function transmits the received signal message to the signal message processing function.
Figure 6. Architecture of 5G core network traffic monitoring system
The signal message processing function analyzes the signal message transmitted from the signal message receiving function and transmits all signal messages except the signal message for the flow connection state visualization to the signal sequence making function and the network traffic visualization function. The signal message processing function only transmits the signal message for the flow connection state visualization to the network traffic visualization function.
The network traffic visualization function brings the 5G core network configuration information from the network configuration information repository to the operator screen when the operator accesses the 5G core network traffic monitoring system. Then it receives a signal message from the signal message processing function. Upon receiving the terminal connection state message (UE registration message), it processes the terminal connection state visualization by making a connection mark with the UE and the BS to which the UE is registered. Upon receiving the session state message (session setup message), a connection mark is displayed with the selected GW and the BS. In addition, a session connection state visualization between the UE, the BS, and the GW is handled by displaying the connection between the BS and the UE. When receiving the application connection flow message, the application server displays a connection with the GW. In addition, the GW searches for a session corresponding to the session identifier using the session identifier in the header information, and displays the connection to GW, BS and UE. Thus, it handles flow connection state visualization between UE, BS, GW, and application server. When the application switching flow message is received, the session connection mark of the BS and the UE is cleared before switching, the session is newly displayed to switched BS and UE, and the same color is displayed to indicate that the session is the same as the previous session. Thus, it handles application switching flow visualization between UE, switched BS, GW and

application server. When receiving the application splitting flow message, the session connection mark of the BS and the UE is maintained before splitting, and the session between the newly selected BS and the UE is newly displayed for splitting. The newly created session is also marked with the same color to indicate that it is the same session as the previous session. It handles application splitting flow connection state visualization with added flow connection between UE, new BS, GW, application server as well as flow connection between UE, BS, GW, application server.
When the signal sequence production function receives a signal message from the signal message processing function, it displays signal mark from sender 5G core network function to receiver 5G core network function on the signal sequence chart using sender 5G core network function identifier and the receiver 5G core network function identifier in the header information.
The network configuration information repository stores the 5G core network configuration information to be displayed on the operator screen when the operator accesses the 5G core network traffic monitoring system. If the 5G core network configuration information is changed, 5G core network configuration information newly changed in the network configuration information repository must be stored.
V. CONCLUSION
In this paper, we proposed 5G core network traffic monitoring system that enables operators to visually monitor traffic through signaling message processing, session processing and traffic flow processing, as the traffic transmission method such as switching and splitting is provided in 5G system. The 5G core network traffic monitoring system can verify instantly received signal message sequences and 5G core network traffic processing. Therefore, the operator can easily monitor the traffic in 5G system, which is a convergence system of wireless and wired systems, and is provided with a new visual operator management environment that can track whether the received signal message is normal or abnormal. In addition, the 5G core network traffic monitoring system can easily be extended to 6G and future networks with 6G or new future network configuration information
ACKNOWLEDGMENT
This work was supported by ETRI R&D Program funded by the Government of Korea (1711081029, Development of Wired-Wireless Converged 5G Core Technologies).
REFERENCES
[1] Lee Hyeyoung, Chung Youngjun, Kim Daejung, Ha Reeda, Jo Young Ik, Kim Dami., “The Status and Future Prospects of 5G Standardization in 3GPP,” 2017 KICS Summer General Conference, pp.803-804, 2017. 06.
[2] Hyunsook Kim, “3GPP 5G System Standard Trend Overview,” KICS 5G Standard Workshop II Network and Systems, pp.3-15. 2018. 04.
[3] 3GPP TR 23.793 Study on access traffic steering, switch and splitting support in the 5G system architecture v16.0.0, 2018. 12.

673

