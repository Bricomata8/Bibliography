A Probabilistic Model of File Transfer Time Based on Markov Chain in Vehicular Ad Hoc Networks
Xinyu Wu, Meiju Yu, Ru Li *
College of Computer Science, Inner Mongolia University, Hohhot, China

Abstract—There has been increasing interest in Vehicular Ad Hoc networks（VANET）.The sharing of resources among vehicles is one of the most crucial topics in VANET when two vehicles transfer files to each other for some demands. However,due to the high speed mobility of vehicles, the link between two vehicles is frequently disconnected, which makes the transmission time of files unpredictable. This paper analyzes the probability that one packet can be recieved, which is labile due to instability of the link based on the lower-layer of VANET. And we use nonhomogeneous Markov model to research aforementioned probability. The probability is obtained and confirmed by some experiments and will provide a theoretical basis for the file transfer time.
Keywords-VANET; Markov chain; File transfer time; log-normal distribution
I. INTRODUCTION
MANET is an abbreviation for Mobile Ad Hoc network. Ad Hoc network is a special self-organizing wireless mobile network. The network removes the central node mechanism, where all nodes are equal. In addition to the nodes in the network with the function of ordinary mobile client, there is a certain ability to forward packets. MANET is an Ad Hoc network but with mobility, and nodes in that network have high mobility. Imagine a scenario that there are a number of interconnected smart phones. If owners of the phone do not move, both the topology composed of several mobile phones and routing will be fixed. Imagine another scenario, in larger space where each taxi are equipped with a wireless network adapter, the network’s topology composed of all the taxies should be constantly changing and routing should become very complicated. VANET’s full name is Vehicular Ad Hoc network.It applies Ad Hoc network to Internet of Vehicle. It is a special mobile Ad Hoc network, using the Vehicular computer as a mobile client, and applying the traditional MANET to the traffic.
According to existing researches, the problems of VANET are different from other self-organizing network. It is a mobile Ad Hoc network in the field of road application so it has mobile Ad Hoc network’s various characteristics such as autonomy,unfixed structure, multi-hop routing, dynamic topology, limited network capacity, good scalability and so on. But some special scenarios such as narrow roads and the area
This research is supported by the National Nature Science Foundation of China (Project No. 61363079).
*Ru Li is the Corresponding Author

with highly dense node group can directly affects the network’s capacity for transmitting information and increase the packet loss and delay.
In recent years, researchers have studied various problems about transmission in mobile Ad Hoc networks. As the mobile self-organizing network being more special, it’s easier to find the design points and ideas of transmission control protocol in VANET’s field. You can find some practical ideas and solutions in VANET such as location-based routing GPSR (greedy perimeter stateless routing) protocol [1]and distance vector routing protocol DSDV (Destination
sequenced distance Vector protocol ） [2]. Although these
studies are extensive and in-depth, there is a lack of specialized research on the nature of VANET's mobile Ad Hoc networks.
The main contributions of this paper are as follows: In view of low success rate, high latency and violent delay jitter of data transmission under VANET, the time expectation of file transfer is researched. Based on the signal attenuation of the underlying radio link, Markov chain model is established to research the transmission time of vehicle file by some theoretical and simulation experiments.
II. RELATED WORK
In [3], the link and route based on signal strength were researched. [4] changed the received power level and improved the antenna gain to find a better link. [5] proposed a model of path duration distribution in MANET. On the basis of these researches, [6] defined the distance between two vehicles in the VANET environment and assumed that headway distance is subject to a log-normal distribution but without specific verification. [7] affirmed the hypothesis and used theoretical analysis and experimental proof to determine the parameters of the log-normal distribution.
In this paper, the idea of applying Markov chain to VANET mainly comes from literature [8] [9], both of which carried out a theoretical research on VANET. In [8], the non-homogeneous Markov chain is used to classify the level of confidence of vehicle nodes to implement a confidence mechanism by a probabilistic manner. The main purpose in [9] is to make use of the vehicle computing resources maximumlly.

978-1-5386-4646-5/18/$31.00 ©2018 IEEE

537

ICUFN 2018

In that article, vehicle should complete the task assigned by the data center in parallel. It established a Markov model and theoretically analyzed the expectations of total computation time.
III. CONTRIBUTION
In the process of message transmission, the instability of wireless link will cause the loss of the messages. This paper makes a theoretical analysis for messages’ success rate. The massages which have to go through the underlying link are accepted by the receiver in some probability. Than the Markov chain model is established to introduce the situation of interruption in inter-vehicle links. In this case, we analyzes the total time expectation of file transfer in VANET scenario further.
A. Analysis of the probability of packet reception

Each accepted packet must have some bit errors. For this, we set an error correction threshold r. After a packet is received by the receiver, if the number of bit errors is less than the error correction threshold r, it is considered that these bit errors can be restored so the packet is defined as a receivable packet. We assumed that the number of bits added by the underlying encapsulation of the packet is ignored in this study, that is to say, specific number of bits transmitted through underlying layer is equal to the number of bits of the packet.

Assume that the packet reception probability is PAB which is expressed as a formula:

r

PA B 

Pk

k 0

(1)

Where Pk is the probability and k is the number of bit errors,

Pk



C

k n

p

k

(1



p )nk

(2)

Where n is the number of bits in a single packet and p is the bit error rate.

Combine formula(1) and formula(2), we can get formula(3):

r

PAB 

C

k n

p k (1 

p)nk

k 0

(3)

Computing the combinatorial number in formula(3) is awfully difficult, because n is too large. But noticing that n is much greater than p. In this condition, it can be calculated by using Poisson approximation:

  PAB



r
Cnk pk (1
k 0

p)nk



r k 0

k e k!

(4)

Among them, λ= n×p

B. Link break probability

In [7], a vehicle chase model was established in the urban

traffic environment. The probability distribution of the distance between two nodes in the VANET scene was described. The probability distribution of the distance d between two vehicles follows a log-normal distribution f(d) at
anyone time. The log-normal distribution is：

f

(d)



(0.8d



1 2.93)0.55

2

(ln(0.8d 2.93)2.95)2

e

2*0.552

(5)

To combine the distribution f(d) and the packet reception probability formula, we can get that for each tk which is the time after the kth packet has been transmitted. We will calculate the distance between two cars according to the probability distribution f(d), and for each specific value of the distance, there is a packet reception probability corresponding it.

[10] says that the communication range of the vehicle network is 100~500 meters. In this paper, the median 300 meters of this range is selected as the critical range of vehicle communication. Assuming that the distance between two vehicles is greater than 300 meters, the link between the two vehicles will be looked as a broken link. So we can set the break probability of the link to the frequency of the numbers which is larger than 300 from 10000 numbers, and the 10000 numbers is randomly acquired from the log-normal distribution f(d). The probability of state i to state 0 is obtained. The probability is refers to pi,0(t), i≦N, and the probability
value is about 0.00067 by using matlab.

C. Markov chain model for file transfer time

1) The Establishment of Markov Model

In VANET, It’s almost impossible that two vehicles can not reconnect by each other if the link has disconnected, which will cause the entire file’s retransmission. This produces a elastic probability transfer expressed as state 0 in our Markov chain. When the file is completely received, the packet of the file will no longer be sent or received, that means the Markov chain model has reached the absorbing state. When a file is sent from one vehicle to another vehicle, there exists the probability of success and failure , and Markov chain can express the result of this probability as a transition of states. Therefore, this paper uses the Markov chain to establish the mathematical model of file transfer time.

A file is divided into N packets. Assuming that the size of each packet is n bits, every other time T sender sends one packet to receiver. Due to unreliability of underlying link, receiver may receive the packet completely during a time period or not. If not, the packet will be discarded. We assume that the file cannot be persisted after the connection has disconnected. It must wait for another vehicle which carries the file to start from the beginning. We assume that the waiting time obey the exponential distribution with the parameter μ, the distribution function is:

P( X  t)  1 et

(6)

538

1 The expectation of the exponential distribution is  ,
1 indicating that vehicle will wait  seconds before re-receiving a file.
The link between two vehicles may be interrupted. In that case, we can simulate the process of the task as a N+1-state Markov process. The following is a description of the model:
State 0 is the initial state.
b) When the link is interrupted, it returns to state 0 directly.
c) When the ith packet is successfully received by the receiver, the model will be in the ith state.
d) State N is absorbing state.
e) The model will definitely reach the absorption state N.
Tk refers to the time at which the vehicle node sending the kth packet of a file. Pm,n(tk) is the probability of transition from state m to state n after the period in which k packets have been transmitted. The Markov chain’s state transition diagram is shown below:

Figure 1. Markov chain’s state transition diagram

The probability of the one-step transition of the Markov chain at the end of the kth packet transmission period is Pi,i+1(tk), and the probability of the state i at time t is Pi(t).

Let PN(tk) be the probability that means the model is in state N at time tk, and our ultimate goal is to find the expectation of time:


E(t)  PN (tk )tk

(7)

k0

2) The transfer probability of Markov chain

As shown in Fig 1, in fact, the probability of state i to state i + 1 is just PAB which means the probability that packet is correctly received. Based on this probability, the transition probability of each state can be established in a mathematical form:

pi,i1(tk )  pi (tk  T ) * pAB (tk )

(8)

pi,i (tk )  pi (tk  T ) *[1  pAB (tk )]

(9)

T is the transmission period of a packet. Since the

vehicular computer in vehicle network transmit information

by electromagnetic waves and the velocity of the

electromagnetic wave is approximately 3.0*108 m/s. The

communication range between vehicles is 0~ 300 m, so the

range of T is

1 3.0 108

~

1.0

1 106

s,

and

the

maximum

1

value 1.0 106 s of this range is selected in this paper.

3) The expectation of file transfer time

The purpose of this paper is to analyze the time of a complete transfer of files, so we can use the Chapman-Colemogluv equation [11] to calculate the probability that the system is in state i at time tk:

N
pi (tk )  P0, j (tks )  Pj,i (ts ), (0  s  k)

j0

(10)

Cause we have already initialized the probability which is from state 0 to state 1, we can solve the goal time value by combining formula (7),(8),(9).
 Because N is absorbing state, so it can not be arrived from state N + 1 or the state N. It only can arrive from the previous time N-1 state. So formula (10) can be simplified:

N
pN (tk )  p0, j (tk  sT ) * p j,N (ts )
j0

(11)

 p0,N 1 (tk  sT )*p N 1,N (ts ), (0  s  k ) (12)

 In addition, state 0 can only arrive from state 1 and its own state. So we can write:

p0 (tk )  p0,0 (tk )  p1,0 (tk  sT )*p0,1(ts ), (0  s  k) (13)

 Similarly, for the state m other than the state N and the state 0, according to Fig 1, we write:

pm (tk )  p0,m1 (tk  s1T )*pm1， m (s1T )  p0,m1 (tk  s2T )*pm1， m (s2T )  p0,m (tk ),(0  s1 ,s2  k )

(14)

D. Transfer time between two vehicles

The time to reach the absorbing state N is equal to the sum of time consumed by the vehicle under both situation of without broken link and in link break.

1) The situation with link interruption

This section discusses the time expectation for a successful transmission in the situation of link interruption.

The two vehicle nodes have a probability of interruption in each packet transmission period. Let Ei be the time that the model is about to reach state i (but finally it won’t reach the state i). It is clear that the packet transmission of the vehicle

539

follows an n-fold bernoulli trials, so the random variable i follows the geometric distribution. According to the assumptions previously presented in this paper, the formula for Ei is given as follows:

 Ei



i k 1

pikq  ((i

k

 1)T



1 

)

(15)

Where p is the probability that the link will not break in interval time T, and q is the probability of link breaking in the interval time T.

2) The situation without link interruption

Assuming that the distance between two vehicles is independently subordinate to the log-normal distribution f(d), the distance d can be generated for each time according to the distribution. By using the analysis of underlying link of vehicle network, the success rate of the packet transmission can be calculated correspondingly for the different distances d at each time.

Equations (12), (13), (14) respectively represent the probability calculation formula that model reaching the initial state 0, the intermediate state m and the absorbing state N at a certain time. But in the condition of link interruption, the three formula above can be simplified as:

pN (tk )  p0,N1 (tk  sT )*pN1,N (ts ), (0  s  k)

(16)

p0 (tk )  p0,0 (tk )

(17)

pm(tk )  p0,m1(tk  s1T)*pm1，m(s1T)  p0,m(tk ),(0  s1  k) (18)

IV. EXPERIMENTAL RESULT ANALYSIS

A. Packet acceptance probability PAB

We have gradually derived the relationship among distance, SNR and bit error rate to find the relationship between distance and PAB. This relationship requires the use of Matlab to get.

1)The relationship between distance and SNR

First, the relationship between SNR and distance under VANET is simulated. According to the Friis equation of free space wireless signal propagation, the received power of single-hop link is:

Pr



PtGtGr 2 (4 )2 d 2L

(19)

The formula (19) and the thermal noise formula (20) are integrated to obtain the function of the relationship between distance and SNR:

N0  FKT0

(20)

SNR 

Pr N0



Pt Gt Gr 2 (4 )2 d2 LFKT0

(21)

The parameters are set as shown in Table I

TABLE I. EQUATION (19) OF THE PARAMETERS

PARAMETERS

Value PARAMETERS

Value

Transmit gain Gt

antenna

1

Receive antenna gain Gr 1

Path loss factor L 1

Interference bandwidth B 1(M)

System Index F

Noise 6 dB

Ambient temperature T0

300 (Kelvins)

Carrier frequency 2.4

fc

GHz

Node transmit power Pt

2(μW)

In addition, the Boltzmann constant K=1.38×10-23(J/K); d is the distance between two vehicle nodes.We take the parameters into Matlab, and the relationship between distance and SNR is as Fig 2 shows:

Figure 2. The relationship between distance and SNR
2) The relationship between SNR and bit error rate
The LMS algorithm [12] is very common in the field of communication signal processing. In this paper, the symbol LMS algorithm is used to simulate the correspondence between SNR and bit error rate:

Figure 3. The relationship between SNR and bit error rate
3) The relationship between the distance and PAB
According to the previous analysis, the function relationship between bit error rate and packet reception probability is “(4)”. In this paper, the parameter r in “(4)” is set to 25 and n is 1024 bits. By combining the distance, SNR, bit error rate and PAB, we can establish a mapping relation between the source node’s and the

540

destination node’s distance d and the packet reception probability PAB:

PAB





( x40950 )2

0.009953e 143500

 

1



1

.0

0

7

e



(

x

23.1 101.2

5

)2

,

,

x  36.2724 36.2724  x  0

(22)

The segment function image is shown in Fig 4:

(b)

Figure 4. The relationship between distance and PAB
Fig 4 shows that the probability that a vehicle receives a packet form the sender who is 300 meters away is almost 0, and it also consistents with previously assumed vehicle communication distance range in section Ⅲ .
B. The relationship between file size and transfer time
A recursive solution is used by matlab, and the time expectation of the model to reach the final state N in the absence of link interruption is obtained. By integrating this value with the time consumed by the link with interruption, we can get the total time expectation from the state 0 in time 0 to the final state N. In this paper, N is set to 20000. Because each packet size is 1024(bit)=1(Kb)=1/8(KB), so the state 20000 here means that 20000 packets have been completed, and the file is fully received, that is, the file size is 1/ 8(KB)*20000=2500(KB) ≈ 2.44(MB). Poisson distribution’s parameter μis set to 1/50 (in Fig 5 (a)), 1/100 (in Fig 5 (b)), 1/200 (in Fig 5 (c)), the images are as follows:

(c)
Figure 5. the value of the total transmission time
According to the experimental results, it can be seen that the slope of the function relationships between average consumption time and state decrease gradually with the change of the target state value (file size) regardless of the value of μ . The function curve is convex upwards and convergent. In addition, as the velue of μ increases (or decreases), the transmission consumption of the same file also increases (or decreases). The data obtained from experiment are summarized in Table II.
TABLE II. EXPERIMENTAL RESULTS

parameter μ
1/50 1/100 1/200

2.44
48.2528 (sec)
96.4696
192.9032

File size (MB)

1.83

1.22

0.61

45.9229 40.5737 28.2787

91.8195 183.6127

81.1313 162.2463

56.5502 113.0935

V. CONCLUSION

In this paper, we analyzed the probability of the packet

reception and the packet which is unreachable due to the

instability of the link based on the bottom of VANET, then

we established the nonhomogeneous Markov model according

(a)

to the probability and took full account of the factors that

could affect packet’s reception. The probability of the packet

reception is obtained and confirmed by some experiments and

it will provide the theoretical basis for the file transfer time.

541

ACKNOWLEDGMENT This research is supported by the National Nature Science Foundation of China, NSFC (Grant No. 61363079) and the Research Project of Higher Education School of Inner Mongolia Autonomous Region under Grant NJZY16020.
REFERENCES
[1] Karp B, Kung H.T, “GPSR: greedy perimeter stateless routing for wireless networks[C]” International Conference on Mobile Computing and NETWORKING. ACM, 2000,pp.243-254.
[2] Perkins C E, Bhagwat P, “Highly dynamic Destination-Sequenced Distance-Vector routing (DSDV) for mobile computers[J]”. Acm Sigcomm Computer Communication Review, 1994, 24(4),pp.234-244.
[3] M. Kiese, C. Hartmann, J. Lamberty, and R. Vilzmann, “On connectivity limits in Ad Hoc networks with beamforming antennas,” EURASIP J.Wirel. Commun. Netw., vol. 2009, pp. 1–1, 2009
[4] Moritz K, Christian H, “On Connectivity Limits in Ad Hoc Networks with Beamforming Antennas[J]”. EURASIP Journal on Wireless Communications and Networking, 2009, 2009(1):7.
[5] I.Gruber and L.Hui, “Link expiration times in mobile Ad Hoc networks,”Nov. 2002, pp. 743–750
[6] I.Greenberg,“The log-normal distribution of headways,” AustralianRoad Research, vol. 2, no. 7, pp. 14–18, 1966.
[7] Yan G, Olariu S, “A Probabilistic Analysis of Link Duration in Vehicular Ad Hoc Networks[J]”. IEEE Transactions on Intelligent Transportation Systems, 2011, 12,pp.1227-1236.
[8] Gazdar T, Rachedi A, Benslimane A, et al. “A distributed advanced analytical trust model for VANETs[C] ” Global Communications Conference. IEEE, 2012,pp.201-206.
[9] Ghazizadeh P, Olariu S, Zadeh A G, et al. “Towards Fault-Tolerant Job Assignment in Vehicular Cloud[C]” IEEE International Conference on Services Computing. IEEE, 2015,pp.17-24.
[10] Wang L, Wakikawa R, Kuntz R, et al. “Data naming in Vehicle-to-Vehicle communications[C]” Computer Communications Workshops. IEEE, 2012,pp.328-333.
[11] G. Hachtel, E. Macii, A. Pardo and F. Somenzi, “Markovian Analysis of Large Finite State Machines, Computer-Aided Design of Integrated Circuits and Systems”, IEEE Transactions on , Volume 15, Number 12, December 1996.
[12] Dallal G E. “LMS: Least Median of Squares Regression[J]”. Journal of the American Statistical Association, 1994, pp.871-880.
542

