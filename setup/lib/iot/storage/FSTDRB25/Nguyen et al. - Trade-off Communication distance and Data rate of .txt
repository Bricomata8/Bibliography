Trade-off Communication distance and Data rate of Rolling shutter OCC

Hoan Nguyen
Department of Electronics Engineering Kookmin University Seoul, Korea conghoan.tdhbka@gmail.com
Huy Nguyen
Department of Electronics Engineering Kookmin University Seoul, Korea ngochuy.hust@gmail.com

Tung Lam Pham
Department of Electronics Engineering Kookmin University Seoul, Korea lampham_95@kookmin.ac.kr
Yeong Min Jang
Department of Electronics Engineering Kookmin University Seoul, Korea yjang@kookmin.ac.kr

Abstract— Unlike visible light communication (VLC), optical camera communication (OCC) utilizes an image sensor as receiver. In this paper, we will discuss trade-off communication distance and data rate which occurs when using rolling shutter camera. Beside we proposed comparison and an improvement to over data frame format.
Keywords—optical camera communication; visible light communication; rolling shutter camera
I. INTRODUCTION
Being a part of non-flicker modulation series, with the enormous usage of rolling shutter cameras in the camera market, the use of rolling shutter cameras in OCC systems takes advantage of the high sampling rate of the rolling shutter mechanism, which sequentially exposes pixel lines to the incoming light. In the systems, The Rx sampling rate which reflects the pixel sampling rate of the rolling shutter, is much higher than the Tx optical clock rate. In principle, the frame rate of a high-speed camera Rx must be higher than the Tx optical clock rate to satisfy the Nyquist rate.
For rolling shutter OCC systems, some modulation schemes are submitted to TG7m such as Camera-OOK (COOK) from Kookmin University [1], Pulse Width/Position Modulation (PWM/PPM, or MPM mode) from Panasonic [2], rolling shutter-FSK (RS-FSK) from National Taiwan University and the camera M-FSK series (CM-FSK) from Kookmin University. Related works discuss OOK based line coding developed by PureLiFi [3] and M-FSK developed by Carnegie Mellon University [4].

Fig. 1. Rolling shutter OCC reference architecture employing CM-FSK Fig. 2. Rolling shutter OCC reference architecture employing OOK

II. DATA RATE – DISTANCE TRADEOFF
Given the operation of the rolling shutter camera, the actual number of samples (pixel rows) acquired from the captured image of the light source at distance d, Nrow(d), is calculated as

978-1-7281-1340-1/19/$31.00 ©2019 IEEE

148

ICUFN 2019

L (2 tan( FOV ))

Nrow (d )  w

2 d

(1)

where w is the image width (in case the rolling axis is

along the width of the image sensor), L is the normalized

length (diameter) of the light source along the width of the

image sensor, d is the distance between the light source Tx

and the camera Rx, and FOV is the field of view of the

camera.

The actual number of samples acquired from an image, Nrow (d), determines the amount of information that an image can capture. Two different approaches to demodulation, frequency domain and time domain based demodulations are described as follows.

A. Performance Limitation of Frequency Demodulation
The sampling rate of the image sensor, which is the frequency at which a row of pixels is sampled, following Nyquist’s theorem, it must be at least twice the rate of the highest signal frequency. This is described by the following equation:

 fmax

f Nyquist

fs 2

(2)

Where fmax is the maximum solvable frequency, fNyquist is the Nyquist frequency, and fs is the sampling rate of the image sensor (i.e., the sampling rate of lines of pixel).

The frequency resolution (df) is dictated by the acquisition time and given as

f 1

fs

(3)

T Nrow(d)

where T is the acquisition time (of a rolling image), Nrow is the number of samples (i.e., pixel lines) acquired throughout the diameter of the light source along the rolling direction of the image sensor.

From those two above equations, the condition for the camera Rx to differentiate a frequency is that the size of the light source on the captured image is large enough, namely,

Nrow (d ) 

fs f

(4)

Accordingly, the requirement of the light source size on the captured image leads to the upper-limited communication distance, which can be computed as follows

d  ( f ) w L (2 tan( FOV ))

(5)

fs

2

Thus, the maximum distance of transmission is proportional to the frequency resolution and the size (diameter) of the light source.

B. Performance Limit of Temporal Demodulation
Unlike FSK, wherein a single frequency symbol is demodulated per image, OOK or Packet PWM/PPM systems demodulate the entire packet including multiple symbols per image. Thus, the size of the data sub-packet shall be short enough to be captured entirely by an image in the case where data fusion technique is not applied. The conditional size of the light source on the captured image is expressed as.

Nrow (d)  2 f Ts sub_ packet  2 fs RDS

(6)

where R(DS) is the data sub-packet rate, and Tsub_packet is the length in time of the data sub-packet.

Consequently, the communication distance is limited as a function of the data sub-packet size as follows:

d  w RDS  L (4 tan( FOV ))

(7)

fs

2

Moreover, besides the distance limitation which is linearly proportional to the data sub-packet length as shown in (14), the temporal rolling shutter decoder shall require the number of samples to clearly differentiate between the on and off states of the captured waveform in the time domain. A minimum of four samples per clock is suggested to identify whether the transmitted state during the clock time is on or off. The condition is expressed as,

fsTsub _ packet fs RDS  4NB sub _ packet

(8)

where N (B/sub_packet) is the number of binary clocks per data sub-packet.

III. COMPARISION

Fig. 3. BER against Eb/N0 curves of rolling shutter sampling techniques
Fig. 3 presents the simulated bit error rate against the pixel Eb/No performance of the OCC systems employing OOK, VPPM, and FSK with various dimming levels. We applied pulse width control for VPPM and FSK dimming; however, we

149

applied the amplitude control for OOK dimming as it is suitable for an OCC system. Undeniably, Binary FSK (BFSK) shows the best performance because it requires the lowest pixel Eb/No to achieve the desired BER. VPPM outperforms under dimming. VPPM dimmed at 10% provided a better performance than OOK dimmed at 25%. This is because the amplitude dimming control is applied for OOK to maintain the link rate. Fortunately, our experiment of pixel intensity along with the calculation of pixel Eb/No always guarantee the pixel Eb/No at greater than 30dB for the light-of-sight link at a predetermined indoor distance such as 10 m, ensuring that the OCC systems perform well under low dimming.

Fig. 5. Data fusion technique to recover a longer-length symbol from multiple images

Fig. 4. Link capacity of rolling shutter OCC modes versus distance
IV. AN IMPROVEMENT OVER DATA FRAME FORMAT To extend the maximum distance of communication, a fusion technique has been proposed in which the sub-packet is merged from two adjacent images using asynchronous bits (Ab). This sub-packet is decodable if every image captures no less than half of the data sub-packet size. Hence, the size of the image allowed is two times smaller than that of the typical data sub-packet:

Fig. 5 describes how data fusion is applied to collect and recover data from different images. Each data symbol shall be transmitted along with its clock information, allowing the camera decoder to group together images belonging to a data symbol. Each image provides a part of the data sub-packet; however, adjacent images are fused into a complete data sub packet. The fusion technique is beneficial in terms of distance because at a further distance the decoder operates well even if a part of the data recovered from the captured image is incomplete.

Nrow,withAb (d )  f Ts sub_ packet  fs RDS (9)

Consequently, the communication distance is limited as a function of the data sub-packet size with Ab as follows:

d  w RDS  L (2 tan( FOV ))

(10)

fs

2

Within the maximum communication distance, the decoder

shall also require the number of samples to clearly

differentiate between the on and off states of the OOK or the

VPPM signal in the time domain as expressed the previous

equation.

Fig. 6. Distance improvement using the packet-fusion technique
In Fig. 6, we present bit rate as a function of distance performances of the OOK modulation schemes. Our comparisons are performed against conventional OOK modulation formats, i.e., the data sub packet shall comprise a preamble and a payload. The fusion technique is implemented by inserting a single asynchronous bit at the start and end of each payload. OOK modulations using the fusion technique significantly outperform conventional OOK modulations. Especially, at the same required data rate, the maximum distance is markedly enhanced with the fusion. Similarly, at the same distance needed, the amount of actual information data is increased for each image (i.e., the sub packet payload after the overhead part is removed) and the fusion technique gains twice the data rate achieved by the typical method.

150

V. CONCLUSION
The distance-data rate tradeoff is problematic for OCC system designers implementing rolling shutter camera. PHY IV modes within IEEE 802.15.7m result from the best efforts of the technical contributors. The customization of PPDU for OCC without overhead subfields has its reason. We have quickly gone through Rolling-shutter-OCC modes, the next post will discuss Screen OCC modes (i.e., Screen-to-Camera Communication).
ACKNOWLEDGMENT
This research was supported by the MSIT (Ministry of Science and ICT), Korea, under the ITRC (Information Technology Research Center) support program(IITP-2018-001396) supervised by the IITP (Institute for Information & communications Technology Promotion).

[2] H. Aoyama and M. Oshima, “Visible light communication using a conventional image sensor,” in Proc. 12th Annu. IEEE Consumer Commun. Netw. Conf., Las Vegas, NV, USA, 2015, pp. 103–108.
[3] I. C. Danakis, M. Afgani, G. Povey, I. Underwood, and H. Haas, ‘‘Using a CMOS camera sensor for visible light communication,’’ in Proc. IEEE Globecom Workshops, Anaheim, CA, USA, Dec. 2012, pp. 1244–1248).
[4] N. Serafimovski et al., LiFi—Light Communications for 802.11, document IEEE 802.11-16/1499r1, Nov. 2016.

REFERENCES
[1] T. Nguyen, M. Arif Hossain, and Y. M. Jang, “Design and implementation of a novel compatible encoding scheme in the time domain for image sensor communication,” Sens.. J., vol. 16, no. 5, May 2016, Art. no. 736.

151

