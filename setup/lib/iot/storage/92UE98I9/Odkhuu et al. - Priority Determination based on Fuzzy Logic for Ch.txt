Priority Determination based on Fuzzy Logic for Charging Electric Vehicles

Nandinkhuu Odkhuu
Department of Computer Engineering Chonbuk National University Jeonju 561-756, South Korea o.nandinkhuu@jbnu.ac.kr

Mohamed A. Ahmed
Department of Electronic Engineering Universidad T√©cnica Federico Santa Mar√≠a,
Valpara√≠so 2390123, Chile mohamed.abdelhamid@usm.cl

Young-Chon Kim
Smart Grid Research Center Chonbuk National University Jeonju 561-756, South Korea
yckim@jbnu.ac.kr

Abstract‚ÄîManaging electric vehicles charging represents many challenges for electric power utilities considering battery charging load and charging behavior. Intelligent charging strategies are needed in order to minimize electric vehicles charging cost without violating the operational constraints of the electric power grid with an extra burden. This work aims to design an optimal scheduling algorithm for managing electric vehicles charging in a residential grid. The system consists of two parts: priority determination and scheduling. A fuzzy logic control system is developed to determine the charging priority of each electric vehicle based on vehicle arrival time, battery state-of-charge (SoC), and vehicle departure time. The performance of the proposed scheduling algorithm is evaluated with respect to peak power and charging cost. The proposed scheduling algorithm enables electric vehicles charging while preventing the power grid from overloading.
Keywords‚Äî EV charging, Fuzzy inference system, priority determination, Timeslot allocation, real-time price
I. INTRODUCTION
Electric vehicles have received a great attention considering the growing concern in reducing greenhouse gas emissions and decreasing dependence on fossil fuels [1]. As the number of electric vehicles is continuously increasing, battery charging will have a significant impact on the electric power generation, transmission, and distribution infrastructure including feeders and transformer overloading, voltage fluctuation, harmonics, and extra energy losses [2]. Increasing the generating power and upgrading the distribution power system are among the difficult and expensive solutions to deal with the new peak demand [3]. In order to minimize the increase in the peak load due to uncontrolled charging, it is necessary to avoid the simultaneous charging of electric vehicles [4].
There are four basic types of charging schemes: uncontrolled charging, indirectly controlled charging, smart charging, and bidirectional charging [5, 6]. In uncontrolled charging schemes, electric vehicles begin to charge immediately upon their arrival from charging stations. Controlling some parameters such as energy price and charging cost aim to control the charging operation indirectly in indirectly controlled charging schemes. However, smart charging and bidirectional charging support a direct control of charging/discharging parameters such as output power from charging station, charging duration, and charging time.

Several research papers considered fuzzy logic based systems for controlling electric vehicles charging [7-10]. Authors in [7] proposed a fuzzy logic based charging scheme to manage the aggregated charging loads in a parking station. The fuzzy inference system was developed to compute the charging/discharging priority of each electric vehicle based on state-of-charging (SoC), remaining charging time and electricity price. Authors in [8] proposed a fuzzy based energy management algorithm for electric vehicle charging in an intelligent workplace parking station. The charging rates of electric vehicles were designed based on the output power from photovoltaic panel, required power for electric vehicle charging and the utility energy price. Authors in [9] proposed a fuzzy optimization model to maximize the profit of parking lot operator while satisfying the charging requirements of electric vehicle owners. Two cases were studied: a fixed charging price for all electric vehicles and multi-tier charging price to support fast charging with a high price. Authors in [10] proposed a two-stage charging strategy for electric vehicles. In the first stage, the optimal charging power of each electric vehicle is calculated based on Bee Algorithm. In the second stage, the aggregated power is distributed among electric vehicles using a fuzzy logic controller.
In this work, we proposed a scheduling algorithm for electric vehicles charging in a residential grid. A fuzzy logicbased system is developed for priority determination of electric vehicle charging based on vehicle arrival time, the battery SoC, and vehicle departure time. The proposed system allocates the charging service to electric vehicles with higher priorities without violating the operation constraints of the electric power grid. A case study of a residential power grid with 100 electric vehicles is considered and the performance of the proposed scheduling algorithm is evaluated and discussed. The simulation results show that the proposed system achieves better performance compared with uncontrolled charging scheme.
II. SYSTEM MODEL
Figure 1 shows the system architecture of a residential power system with 100 households. The aggregator is a local controller responsible for gathering information from both electric power grid as well as charging stations. Upon the arrival of electric vehicles, each charging station updates the aggregator with information related to the vehicle arrival time,

978-1-7281-1340-1/19/$31.00 ¬©2019 IEEE

295

ICUFN 2019

SoC and the requested departure time by vehicle owner. The aggregator receives all monitoring information from charging stations and power grid through communication networks. The major roles of the aggregator are defined as:
ÔÇ∑ Receive information from new arrival electric vehicles
ÔÇ∑ Determine the charging priority for each electric vehicle based on battery state-of-charge and stay time
ÔÇ∑ Allocate the charging time slots for each electric vehicle considering their priority and grid load profile
ÔÇ∑ Update the grid load profile

B. Proposed Algorithm
The description of the proposed algorithm is given in Fig.2. The main objective is to determine the best time slots with minimum cost to be allocated for electric vehicles charging while preventing the power grid from overloading.

Figure 1. System architecture of electric vehicle system in a residential grid

A. Problem Formulation

The main objective of this work is to minimize the electric

vehicle charging cost while balancing the load profile of the

power grid. We assume that time is slotted and indexed by an

integer in T = {1, ..., T}, where T is the time-horizon

considered. The T time period is 48 hours (2 days) with time

slots. The time slot length is ‚àÜts = 15 minutes. Equation 1

shown below the required number of charging timeslots (Ì†µÌ±ÅÌ†µÌ±ÅÌ†µÌ±°Ì†µÌ±°) for each electric vehicle based on vehicle trip distance.

Ì†µÌ±ÅÌ†µÌ±ÅÌ†µÌ±°Ì†µÌ±°

=

(Ì†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±üÌ†µÌ±üÌ†µÌ±üÌ†µÌ±üÌ†µÌ±üÌ†µÌ±ü‚àíÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ñÌ†µÌ±ñ)‚àóÌ†µÌ∞µÌ†µÌ∞µÌ†µÌ±íÌ†µÌ±í Ì†µÌ±ÉÌ†µÌ±ÉÌ†µÌ±êÌ†µÌ±ê‚àóŒ∑‚àó‚àÜts

(1)

where Ì†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±üÌ†µÌ±üÌ†µÌ±üÌ†µÌ±üÌ†µÌ±üÌ†µÌ±ü is desired SoC of electric vehicle battery by the user for the next trip (trip distance), Ì†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ÜÌ†µÌ±ñÌ†µÌ±ñ is initial SOC of electric vehicle, Bev is battery capacity, Pc is charging rate and Œ∑ is the coefficient of charging power rate.
For the minimum EV‚Äôs charging cost shown in Equation 2.

C = min ‚àëÌ†µÌ†µÌ±°Ì±ÅÌ†µÌ±°Ì†µÌ†µÌ±ÅÌ±°Ì†µÌ†µÌ±°Ì±°Ì†µ=Ì±° 1(Eprice(ts) ‚àó P ‚àó ‚àÜts/H)

(2)

where C is the minimum electric vehicle charging cost,

Eprice(ts) is electricity price at current ts, P is charging power

and H is 1 hour.

Figure 2. Flowchart of proposed algorithm
Step 1: - Initiation. ÔÉò New day begins ts=0 ÔÉò Get the day-ahead historical data of Power grid profile (Baseload and cost)
Step 2: - Check EVs at current ts. ÔÉò If new arrival EVs arrived at that ts go to next step ÔÉò If there is not EVs arrived at that ts go to step 6
Step 3: - EV set. ÔÉò EV set (V) collects all new arrived EVs index. ÔÉò If V set consists of EVs index greater than 1 go to next step ÔÉò If V set consists of just a one EV go to step 5
Step 4: - Determine priority by using Fuzzy logic. ÔÉò Each EVs information (arrival, departure time and SoC) will be become for inputs of Fuzzy logic. ÔÉò The fuzzy logic inference system‚Äôs output will to determine priority of all new arrived EVs.

296

ÔÉò Descending sort V set according to priority Step5: - Allocate charging time slots.
ÔÉò Choose EV with highest priority from V set. ÔÉò Allocate number of required charging time slots
under minimum cost on power grid profile ÔÉò Update power grid profile. ÔÉò Remove chosen EV then check V set, if EV available
go to step 5, if V set empty go to next step. Step 6: - Check scheduling time.
ÔÉò if ts index equals to 95 the algorithm/program finished.
ÔÉò If ts less than 95 increased by one. Go to step 2.
C. Fuzzy based Priority Determination
A fuzzy based system is developed for priority determination of electric vehicle charging. The inputs are the vehicle SoC and the vehicle stay time while the output is the charging priority, as shown in Fig. 3. The inputs are fuzzified and passed through an inference system with fuzzy rules to obtain the fuzzy charging priority of each electric vehicle.

functions with five fuzzy states: Very Short (VS), Short (S), Medium (M), Long (L), and Very long (VL). The output of the fuzzy inference system is the charging priority which is defined using triangular membership functions with five fuzzy states: Very Low (VL), Low (L), Medium (M), High (H), and Very High (VH). Table 2 shows the fuzzy rules used for priority determination.

Table 2. Fuzzy rules used for priority determination

Stay time SoC

VS

S

M

L VL

VL

VH VH H

H

M

L

VH H

H

M

L

M

H

H

M

L

L

H

H

M

L

L VL

VH

M

L

L VL VL

III. SIMULATION RESULTS
In this work, we considered the historical data for a distribution power system consists of commercial and residential loads, as shown in Fig. 4. The residential load is given in ‚ÄúRed‚Äù color that consists of 100 houses while the commercial load is given in ‚ÄúBlue‚Äù color. The summation of both the commercial and residential loads is given in ‚ÄúGreen‚Äù color and entitled as the base load.

Figure 3. Proposed Mamdani-type fuzzy inference system

Table 1. Description of input and output of fuzzy inference system.

Input

Output

SoC (%)

State

Symbol

Stay Time (hr)

State

Symbol

Priority

State

Symbol

Very Low

VL

Very Short

VS

Very Low

VL

Low

L

Short

S

Low

L

Medium

M

Medium

M

Medium

M

High

H

Long

L

High

H

Very High

VH

Very Long

VL

Very High VH

The two inputs are fuzzified and represented by their membership functions. Table 1 shows the description of both input and output variables of fuzzy inference system. The first input is SoC that is defined by triangular membership functions with five fuzzy states: Very Low (VL), Low (L), Medium (M), High (H), and Very High (VH). The second input is stay time that is defined by triangular membership

Figure 4. Power consumption of commercial and residential loads (base load).
Figure 5. Arrival and Departure time of 100 EVs. The driving behavior of electric vehicle owners depends on arrival time, departure time initial SOC and daily trip distance. Figure 5 illustrates the arrival time (¬µ=19:00, œÉ=2)

297

and departure time (¬µ=07:00, œÉ=1) of 100 EVs. The average daily trip distance is considered as 50 km with a standard deviation of 10 km (¬µ=50, œÉ =10). Also, the initial SOCs of EVs is considered as random generation from 10% to 80%.

The characteristics of arrival time, departure time and trip distance are defined by a Gaussian normal distribution where x is the current value of arrival time, departure time or trip distance, as given in Equation 3.

G(x,

¬µ,

œÉ)

=

1 Ì†µÌºéÌ†µÌºé‚àö2Ì†µÌºãÌ†µÌºã

Ì†µÌ±íÌ†µÌ±í ‚àí(Ì†µÌ±•Ì†µ2Ì±•‚àíÌ†µÌºéÌ†µÌ†µÌºéÌºá2Ì†µÌºá)2

(3)

proposed algorithm eliminates the high peak demand by shifting electric vehicles charging load to lower demand periods considering the grid load profile as well as the realtime price where the electricity cost is cheap. A comparison between conventional FCFS and proposed charging algorithm with respect to charging profile and charging cost is given in Table 3.

Figure 6 shows the average daily trip distance considered as 40 km with a standard deviation of 10 km (¬µ=40, œÉ =10).

Figure 6. Trip distance of 100 EVs
Figure 7 shows the total power consumption for firstcome-first serve (FCFS) scheme (immediate charging) with 100 electric vehicles. The results show a high peak load and a severe power grid fluctuation due to electric vehicle charging of about 356 kW at 19:30.

Figure 8. Power consumption for proposed charging scheme

(100 electric vehicles)

Table 3. Comparison between conventional and proposed charging

scheme

Scenario

Conventional

Proposed

Parameter

charging

charging

Continuously charged

100 EVs

6 EVs

Discrete charged

0

94 EVs

CHARGING PROFILE

PRICE PROFILE

No charged
Total charging cost [KRW]
Average charging cost/EV [KRW]

0 94308.8 943.088

0 62186.8 621.868

IV. CONCLUSION
This paper proposed an optimal charging algorithm for electric vehicles charging based on their priority. A fuzzy logic based system has been developed for priority determination of electric vehicle charging based on vehicles arrival time, battery SoC, and vehicles departure time. We considered a case study of a residential power grid with 100 electric vehicles. The proposed algorithm allocated the charging service to electric vehicles with higher priorities without violating the power grid operation constraints. The proposed algorithm outperformed the conventional method with respect to peak load and charging cost.

Figure 7. Power consumption for immediate charging (100
electric vehicles). Considering the proposed charging algorithm, Fig. 8 shows the total power consumption with 100 electric vehicles. The

ACKNOWLEDGMENT
This work was supported by the National Research Foundation of Korea (NRF) grant funded by the Korea government (MSIT) (No. 2017R1A2B4004868).

298

REFERENCES
[1] M. H. Rehmani, M. Reisslein, A. Rachedi, M. Erol-Kantarci, and M. Radenkovic, ‚ÄúIntegrating Renewable Energy Resources Into the Smart Grid: Recent Developments in Information and Communication Technologies,‚Äù IEEE Trans. Ind. Informatics, vol. 14, no. 7, pp. 2814‚Äì 2825, Jul. 2018.
[2] M. Muratori, ‚ÄúImpact of uncoordinated plug-in electric vehicle charging on residential power demand,‚Äù Nat. Energy, vol. 3, no. 3, pp. 193‚Äì201, 2018.
[3] J. C. Mukherjee and A. Gupta, ‚ÄúA Review of Charge Scheduling of Electric Vehicles in Smart Grid,‚Äù IEEE Syst. J., vol. 9, no. 4, pp. 1541‚Äì 1553, Dec. 2015.
[4] E. Blasius and Z. Wang, ‚ÄúEffects of charging battery electric vehicles on local grid regarding standardized load profile in administration sector,‚Äù Appl. Energy, vol. 224, pp. 330‚Äì339, 2018.
[5] P.-Y. Kong and G. K. Karagiannidis, ‚ÄúCharging Schemes for Plug-In Hybrid Electric Vehicles in Smart Grid: A Survey,‚Äù IEEE Access, vol. 4, pp. 6846‚Äì6875, 2016.
[6] W. Shuai, P. Maille, and A. Pelov, ‚ÄúCharging Electric Vehicles in the Smart City: A Survey of Economy-Driven Approaches,‚Äù IEEE Trans. Intell. Transp. Syst., vol. 17, no. 8, pp. 2089‚Äì2106, Aug. 2016.
[7] L. Yao, Z. Damiran, and W. H. Lim, ‚ÄúA fuzzy logic based charging scheme for electric vechicle parking station,‚Äù in 2016 IEEE 16th International Conference on Environment and Electrical Engineering (EEEIC), 2016, pp. 1‚Äì6.
[8] M. M. Kaleeswari and D. K. Lakshmi, ‚ÄúFuzzy Based Energy Management Algorithm For Plug In Hybrid Electric Vehicles,‚Äù Int. J. Res. Eng., vol. 2, no. 4, pp. 79‚Äì82, 2015.
[9] S. Faddel, A. T. Al-Awami, and M. A. Abido, ‚ÄúFuzzy Optimization for the Operation of Electric Vehicle Parking Lots,‚Äù Electr. Power Syst. Res., vol. 145, pp. 166‚Äì174, 2017.
[10] M. F. Bandpey and K. G. Firouzjah, ‚ÄúTwo-stage charging strategy of plug-in electric vehicles based on fuzzy control,‚Äù Comput. Oper. Res., vol. 96, pp. 236‚Äì243, 2018.
299

