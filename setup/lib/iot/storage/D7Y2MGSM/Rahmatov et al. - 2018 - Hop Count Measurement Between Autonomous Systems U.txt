Hop Count Measurement between Autonomous Systems Using a Combination of Active and Passive
Monitoring

Nematullo Rahmatov dept. of Computer Engineering
Keimyung University Daegu, Republic of Korea
nemat.90@kmu.ac.kr

Hyenwoo Kim dept. of Computer Engineering
Keimyung University Daegu, Republic of Korea
hwkim84@kmu.ac.kr

Meryam Essaid dept. of Computer Engineering
Keimyung University Daegu, Republic of Korea meryamesd@stu.kmu.ac.kr

Shuhratjon Qurbonov dept. of Computer Engineering
Keimyung University Daegu, Republic of Korea shuhratomsk@gmail.com

Hongtaek Ju dept. of Computer Engineering
Keimyung University Daegu, Republic of Korea
juht@kmu.ac.kr

Wooguil Pak dept. of Computer Engineering
Keimyung University Daegu, Republic of Korea
wooguipak@kmu.ac.kr

Abstract— End-to-end Internet Quality of Service (QoS) is likely to rely on the hop count, the number of traversed routers. In this paper, we pose the results of the measurements of hop count from a source at Keimyung University towards several destinations spread over the world by using both active and passive measurements. In case of active data, we used traceroute base inferring to measure hops between host IP-addresses, while for passive data, we utilise shortest path approach from BGPview AS graph to infer exact hop count between ASes.
Keywords— hop count; active measurement; passive measurement; AS topology
I. INTRODUCTION
To understand the behavior of the Internet, the properties of qualifiers such as the hop count between arbitrary nodes and the corresponding end-to-end QoS may enhance our insight. Knowledge of the hop count may help to unravel the Internet topology and to dimension and propose a more efficient network infrastructure than the current one. This knowledge would also be beneficial to simulate more realistic network topologies. By combining the active and passive monitoring based on delay estimates and hop count measurements, we anticipate being able to specify how to guarantee the QoS in the current Internet.
Usually, ISPs or network operators manage the traffic of peer-to-peer (P2P) application by bandwidth blocking to reduce the cross of ISP traffic. To realise this issue, P2P applications must be equipped with AS locality-aware neighbour peer selection scheme. To solve the problem, many approaches have existed [1-3]. Especially modifying the P2P application to improve the quality of the current neighbour peer selection scheme for employ RTTs (round trip time) based

strategies. Fig. 1 described the principle of hop count technique between Ases.
In recent past years there were fewer research attempts to get a better insight of the Internet topology. End-to-end performance studies were rare. Most of the topology related measurements were based on the hop-limited probes with the aim to create a router level map of the Internet. Performance related measurements mainly involved measurements of RTT’s between pairs of hosts to investigate how the RTT changes depending on the path, time of day, amount of traffic and other parameters.
Fig. 1. Example of hop count measurement among Ases
In this paper, we proposed a novel approach of combined active and passive measurement data for hop count between 300 ASes. Our discovery method has been ensuring essential characteristics of Internet AS topology including hop counts among AS, existed IP-addresses of intermediate routers, round time trips (RTTs) information. The paper is organised as follows. We introduce briefly related work in Section II. We describe our investigation approach algorithm in Section III. Moreover, we explain our experiment and findings in Section IV. Finally, we summarise this paper with a conclusion and future work in Section V.

978-1-5386-4646-5/18/$31.00 ©2018 IEEE

728

ICUFN 2018

II. RELATED WORK
Most prior approaches have considered the inferring of the Internet in router level estimation [2-3], these approaches have interrelation with hop-count measurement by using active based traceroute by traversing AS routers for identification of characteristics of the Internet. In [4] they proposed a method where participant ASes at the IXP network are identified by extracting IP-addresses of the hops only before and after the IXP IP address and after it mapping the IP to its corresponding AS number. The primary purpose of the proposed approach is the end to end latency estimation for IXP paths and obtain from the completed traceroutes to the destination host for recording it. In [5] they proposed a method for end to end measurement of hop-by-hop available bandwidth. The proposed method checked the accuracy of the work under various bandwidth setting including circumstances where the available bandwidth of the source network is smaller than the destination network. An extension of the measurement principle used in existing measurement tools by adding a timestamp function to intermediate routers along the path by which the departure time of every packet is recorded in each packet. H. Kim et al. [6] proposed ICMP identification regarding permission or deny to the globally different type of Ass, in where they send ICMP packet to the DNS IP address of different type of AS around the globe. In [7] they proposed a priority scheme under experiencing a good and bad channel of two type of wireless connectivity, identifying how to get faster access for P2P users through higher data rate for downloading the bit-torrent file, they also describe the Markov chain which evaluate the system in term of the number of leeches and seeds in different coverage zones. More recent work [8] a novel caching algorithm is used, which provides the state of local P2P into account. The proposed algorithm supporting less distributed contents and allocates storage and bandwidth of cache at the same time. Inter ASs and users both benefit via decreasing inter-ISP traffic and upgrading user’s access to bandwidth. In [9] they disputed the indispensability of globally 13 root DNS servers, where they send an ICMP echo request packet to 13 root DNS server to identify RTT. They send ICMP packet from CAIDA skitter monitor to Top Level Domain servers around the globe and collect median RTT values as a representative metric of the latency among clients and root servers.
Our embedded approach unlike [2,7] used passive monitoring approach as the shortest path for measuring hop count between ASes from the first AS neighbor till the target destination, and finally, we compare the findings of both the active traceroute-based measurement with the passive measurement to infer AS routing accuracy.
III. METHODOLOGY
We derived data related to autonomous system number (ASN) and AS organisational name from Center for applied Internet data analysis (CAIDA) for classifying AS types [10]. This study distributed ASs by six type including Content delivery networks (CDN), Telecom companies, Universities, Internet Exchange Points (IXPs), Research centres, IT Enterprises.

In our study, we focused more on discovering DNS server IP address information from BGPview, for the reason that DNS server is always in the ON situation. Therefore sending packets for analysing routing path at any time is not an issue. Moreover, BGPview AS topology graph was an assistant database used for comparing active based traceroute results. Fig. 2 shows flow chart diagram of our work.
Fig. 2. Flowchart for the AS hop count measurement system
We utilized Linux OS dig (domain information groper) command for sending troubleshoot messages to every IP prefix which collected from BGP-view. The dig command has multiple option especially dig –x was helpful for discovering DNS IP addresses. The problem is some ASes configured DNS server on the outside of their location. For that reason, we checked every DNS IP address in WHOIS database [11]. In case not existing DNS IP addresses in the target AS, we skipped it, and instead we tried to send a troubleshoot packet to another IP prefixes of the target AS. WHOIS database is a helpful source to identifying the location of every type of IP addresses. Additionally, if the DNS IP address exists in the target AS we sanded ICMP packet to that DNS IP to extract ASN, hop, RTT information. Finally, we combined active monitoring with passive monitoring to correct decision making regarding AS hop counts and RTT data which is the primary purpose of this research.

729

IV. EXPERIMENTAL RESULTS
The main goal of our research is to provide hop count between different types of ASs and RTT. By sending ICMP packet to approximately 300 AS of different types, e.g., containing CDN, Telecom companies, Universities, IXPs, Research centres, IT Enterprises we gain information regarding AS hop count and RTT difference. According to traceroute and BGPview AS graph results our finding shows that from 300 ASs 61% of them have similar results. Unlike 39% of ASs according to traceroute-based inference and BGPview AS graph shows a different result.
Another mandatory point is, we tried to discover the reason for 39% difference occurring hop count among 116 ASs. Our finding shows that 73% of the reason because of configuring firewall infrastructure between edge routers in a different type of ASs. The firewall policy is an essential aspect of filtering out coming traffic to the inside AS. Then we discovered a reason for 18 % hop count difference due to AS path prepending. AS path prepending is the concept of BGP best path algorithm. BGP best path algorithm decides how the best path to next AS is selected.
AS path prepending technique via network operation engineers inserts into the next ASNs prefix advertising multiple time. The significant reason, of the technique, is to handle with congestion linked and finding the best path to reach destination target AS. Another reason for hop count difference is due to IXP policy appeared around 8%. The IXP is a network organisation which multi Internet service providers (ISPs) are connected to it. IXPs decrease the portion of an ISP’s traffic which must be delivered through their upstream transit providers. Figs. 3 and 4 show the fraction of hop count difference classification.

Fig. 4. Variance comparison among combined active & passive monitoring similar VS different hop count measurement between ASes.

We found 1% hop count difference due to not existing Angola IXP in BGPview database. Moreover, we computed our main object which is a comparison of RTT data of this study via down formula (1).
(1)

Furthermore, we subtracted from each observation data a

unique mean data as

, for the next step computed

whole data as

Square root. Finally, for the

finding variance sample , the total number of

divided to the

. As a result, every AS types due to

multiple problems shows different RTT variance.

Moreover, every RTT data collected as observation. For
the sake discovering mean of the RTT variance, we divided the total number of the observation to the sample size. As mentioned above this paper have six type of different sample size. For instance, figs. 5, 6 and 7 demonstrates RTT variance of six type of ASs by classifying hop count difference classification.

Fig. 3. Fraction of AS hop count difference classification.

Fig. 5. RTT comparison and ICMP traverse difference due to firewall infrastructure.
730

We tried to discover those reasons with RTT information. It is hoped that our work would be helpful for global Internet ASs distance estimation. In a particular way, it would be also useful for network operation engineers, network analysing researchers for network optimisation problems including traffic engineering, AS path length through hop count and RTT. As future work, we have the plan to propose a framework for discovering blocked ICMP packets due to firewall infrastructure among intermediate routers.

Fig. 6. RTT comparison and ICMP traverse difference due to AS path prepending.

ACKNOWLEDGMENT
This research was supported by Basic Science Research Program through the National Research Foundation of Korea (NRF) funded by the Ministry of Education (NRF2015R1D1A1A01059786), and Institute for Information & communications Technology Promotion (IITP) grant funded by the Korea government (MSIP) (No.2018-0-00539, Development of Blockchain Transaction Monitoring and Analysis Technology).

Fig. 7. RTT comparison and ICMP traverse difference due to IXP policy.
Though the traceroute, and the BGPview programs are rather easy to use and the hop count is easily extracted from its output, reliably measuring the hop count is not an easy task due to many internet security policies. One of the major problems is the fact that not all the routers forward the ICMP messages and that the firewalls deny these messages. This has limited the number of addresses suitable for our experiment and complicated the completion of the experiment sets.
V. CONCLUSION
Internet ecosystem day by day is booting up. There is much reason to analyse Internet topology map. Mainly, scientific validation inference of Internet AS routing issues still have difficulty due to not enough supporting network measurement tools. This paper proposed a method to visualise hop count among 300 ASes which typically they are different. We send ICMP to troubleshoot packet from Keimyung University via traceroute-based inference to 300 AS including CDN, Telecom Company, University, Research Center, IXP and IT Enterprise to extract hop count and RTT information differences.
Also, we utilised BGPview database AS graph to improve our estimation regarding hop count between ASes. BGPview AS graph supported us to accurate estimating ICMP traverse from source AS to the destination AS. During our estimation, we found the different inference of hop count by combining traceroute-based inference with BGPview AS graph.

REFERENCES

[1] H. Hiep, M. Takumi, F. Olivier, A Hierarchical P2P Traffic Localization

Method with

Bandwidth Limitation, International conf, on

Computing & Communication Tech, 2013

[2] . Erikson, P. Barford, R. Nowak, Estimating Hop Distance between Arbitrary Host Pairs, In proc. IEEE Infocom 2009.

[3] B. Erikson, P. Barford, J. Sommers, R. Nowak, Inferring Unseen component of the Internet Core, In Proc. IEEE, October 2011.

[4] Mohammad Zubair Ahmad and Ratan Guha, A Tale of Nine Internet Exchange Points: Studying Path Latencies Trough Major Regional IXPs, In Proc. Annual IEEE conference on local Computer Network, 2012.
[5] K. Koitani, G. Hasegawa and M. Murata, End to end measurement of hop by available hop bandwidth, International conf, on advanced information networking and applications, 2014
[6] H.Kim, D. Kwon, H. Ju, Analysis of ICMP Policy for Edge Firewalls using Active Probing In proc. APNOMS 2014.
[7] Edgar E. Baez Esquivel, Mario E. Rivero-Angeles, Alfonso Fernandez V ´ azquez, Priority Scheme for Mobile Nodes in P2P Bit-Torrent Based Networks, 28th International Conference on Advanced Information Networking and Applications Workshops, 2014
[8] Shaoduo Gan, Jiexin Zhang, Jie Yu, Xiaoling Li, Jun Ma, Lei Luo, Qingbo Wu, A Novel Optimization Scheme for Caching in Localityaware P2P Networks, IEEE Symposium on Computers and Communication (ISCC), 2016

[9] Tony Lee, Bradley Huffaker, Marina Fomenkov, kc claffy, On the problem of optimisation of DNS root servers’ placement, in Passive and Active Network Measurement Workshop (PAM), Apr 2003
[10] X. Dimitropoulos, D. Krioukov, G. Riley, and k. claffy, "Revealing the Autonomous System Taxonomy: The Machine Learning Approach", in Passive and Active Network Measurement Workshop (PAM), Mar 2006.

[11] BGPVIEW, December 2017. [Online]. Available: www.bgpview.io
[12] Domain Names & Identity for Everyone , December 2017. [Online]. Available: www.whois.com

731

