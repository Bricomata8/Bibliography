Routing Redundancy Reducing Method for U-Bus Air using Cloud Cooperation

Hiroshi Sanada and Takeo Fujii Advanced Wireless and Communication research Center (AWCC)
The University of Electro-Communications 1-5-1 Chofugaoka, Chofu, Tokyo, 182-8585 Japan
Email: h.sanada@awcc.uec.ac.jp

Reina Aizawa and Takuya Kawata Smart system Research & Development Center
Tokyo Gas Co., Ltd. Yokohama, Japan

Abstract—U-Bus Air is a wireless communication standard for metering systems, targeting gas supplies with a multi-hop network function. As a multi-hop wireless network, U-Bus Air gathers meter reading information connected to a monitoring center. The terminal with the function of connecting to a monitoring center is called a gateway (GW). The multi-hop function is used to connect GWs; this reduces the cost of connecting wide-area wireless networks. However, the order of installing a new terminal is random because it is determined by timing of replacement on meter in individual homes on meters in individual homes. As a result, the installing location of GWs cannot be speciﬁed in advance. Consequently, any created network topology will exhibit redundancies, such as unnecessary GWs, or generate many small networks. In this paper, we propose two different redundancy reducing methods that use information of terminals on cloud to reconstruct a network topology. The proposed methods consists of three steps: gathering information, emulating the topology to reduce redundancy using cloud, and providing feedback to rebuild information of each smart meter. We perform a computer simulation to evaluate the packet delivery ratio (PDR) and the reduction ratio of the number of GWs. We conﬁrm that the redundancy can be reduced by using the proposed methods without affecting the performance of the network topology.
Index Terms—Ad hoc networks, Multi-hop, Cloud computing, Network topology, Smart meters
I. INTRODUCTION
The smart meter is a meter with a communication function
installing at each home with the aim of reducing labor cost
and energy consumption[1][2]. U-Bus Air exists as a com-
munication standard for a smart gas meter protocol that is
standardized as a part of Wi-SUN (Wireless Smart Utility
Network) and is also implemented in a ﬁeld[3][4]. In this
paper, we deﬁne “GW (Gateway)” as a terminal with a relay
function using a speciﬁed low power radio on the 920 MHz
band and a wide-area wireless communication function using
a mobile communication service. We also deﬁne “node” as a
terminal with only a relay function. U-Bus air system creates
the multi-hop networks. Fig. 1 shows U-Bus Air system. On
the U-Bus air system, a packet holding terminal selects a
communicable terminal that is closer to GW using a routing
table, and send to the terminal. When the selected node
received the packet, it iteratively selects a node that is more
closer to GW and sends the packet until the GW receives
the packet. After the GW gathers its packets from nodes in
the same network, the GW sends to the data center using a

*: QRGH

^ƉĞĐŝĨŝĞĚ >Žǁ WŽǁĞƌ ZĂĚŝŽ

DŽďŝůĞ ĐŽŵŵƵŶŝĐĂƚŝŽŶ
ŶĞƚǁŽƌŬ

ŽŶƐƵŵƉƚŝŽŶ DĞĂƐƵƌĞŵĞŶƚ

Fig. 1. Multi-hop of U-Bus Air system.
mobile communication service like 3G. By creating the multihop networks, the number of GW is less, and extra cost and running cost of mobile communication are decreased. A smart gas meter cannot use an external power source. Thus, to obtain a long lifetime without changing battery, U-Bus Air adapts F-RIT (Feathery Receiver Initiated Transmission) as a time asynchronous MAC protocol for intermittent operation [5], [6]. On F-RIT, when the terminal holds a packet, its state changes to the receiver mode and waits for a short beacon signal from surrounding terminals. When a terminal does not have a packet, an intermittent process by switching in between a ”sleep” and ”wakeup” mode is periodically operated and the beacon signal called RNO (Radio Number) is sent. After the beacon signal is received successfully at the holding terminal, handshake and data transmissions are performed between them. In this sequence, the holding terminal needs to wait until the beacon signal is received. The waiting time for reception is longer than the transmitting time, and hence, the power consumption for reception and waiting periods increases. To solve this problem, a method that reduces the reception and waiting periods have been widely studied [7]. However, the previous research only simpliﬁed the network topology and did not consider the redundancy of the network topology at the time of initial network construction.
Installing sequence of smart meters is depending on the demand of a constructor. When the constructor installs the

978-1-5386-4646-5/18/$31.00 ©2018 IEEE

223

ICUFN 2018

͗ 't ͗ EŽĚĞ
^ŵĂůů ŶĞƚǁŽƌŬƐ
DĂŶǇ 'tƐ
Fig. 2. An example of redundancy at initial construction.

function. The routing table consists of the received signal strength indicator (RSSI) information from the surrounding terminals in the same network and the number of hops to the GW of each terminal. Because the number of hops can be generated by RSSI, only RSSI is necessary to collect for emulating reconstruction on cloud.
U-Bus Air must periodically exchange information for route update among terminals belonging to the same network because opportunistic routing is static routing. Because this process needs more power consumption, there is a possibility that the power consumption increases exponentially with respect to the number of terminals in the same network.

new terminal in the ﬁeld, if terminals already exist in the the ﬁeld, new terminal installs as a node and connects to existing network. If terminals do not exist, the new terminal installs as a GW because the new terminal cannot communicate the data center using existing networks in the ﬁeld. After installing all terminals, in case of the installed node between the multiple networks with multiple GWs, terminals in a network can connect to the GW through another network via the installed node. Therefore, some GWs may become unnecessary. Additionally, many small networks may exist because of the generation of many GWs. We refer to these networks as redundancy networks. Fig. 2 shows an example of a redundancy by installing sequence.
In this paper, to reduce these redundancies, we propose two network topology reconstruction methods using a cloud network. One reconstruction method is simple one which leaves some GWs and increases the number of hops from the remaining GWs. This method is called total reconstruction method. The other reconstruction method leaves some networks and surrounding network is interconnect to the remaining network. This method is called partial reconstruction method. We conﬁrm the effectiveness of the proposed methods by computer simulations and evaluate the performance of the reconstructed network topology. The simulation results show the proposed method can reduce the number of GWs while maintaining the Packet Delivery Ratio (PDR). Also, we conﬁrm the number of packets using partial reconstruction method is less than that using the total reconstruction method when routing update.
II. ROUTING PROTOCOL FOR U-BUS AIR
The routing protocol for U-Bus Air is opportunistic routing. The maximum number of terminals that can be registered as the same network is 50 units. Each terminal has a unique routing table of all terminals that belong to the same network. The routing table of a terminal consists of information of the surrounding terminals and information of the number of hops compared to itself. When a terminal attempts to send a packet or relay it to the destination, the routing table to the destination is checked. If the candidate terminal has smaller number of hops than the packet holding terminal, the holding terminal sends the packet to the candidate terminal. By using this approach, U-Bus Air can implement a multi-hop relay

III. PROCESS OF FLOW RECONSTRUCTION
This section describes a process of ﬂow reconstruction. Here, we assume that only GWs directly connect to the cloud using mobile communication and server exist on cloud. All terminals connect to cloud via the GW and communicate to server on cloud. Reconstruction is implemented on server on cloud to suppress the power consumption of each terminal. The process of reconstruction ﬂow is executed in the following three steps.
(1) Each terminal sends RSSI information to the cloud for reproducing a real topology at a server on cloud.
(2) Server emulates network reconstruction. (3) Server feedbacks the reconstructed information to each
terminal through a GW. ɹ Step (1) is needed to correctly grasp the real network topology on the cloud. After Step (1), the server on the cloud emulates the network reconstruction. The speciﬁc procedure in Step (2) is described in detail in Section 5. After Step (2), an appropriate topology is selected by using the emulation results to update information from each terminal. The feedback of the reconstructed topology information is given in Step (3).
IV. INITIAL CONSTRUCTION
First, the inﬂuence of the initial network construction is explained to verify existing redundancies in a real installing sequence. The initial construction is based on the following processes,
(1) A new terminal receiving the signal from the existing terminal is installed as a node to the network through the existing terminal. If the new terminal can receive the signals from multiple existing terminals, it is installed to the network through the terminals with the minimum number of hops. If the new terminal can receive the signals from multiple existing terminals with the same number of hops, it is installed on the network through the existing terminal with the strongest RSSI.
(2) If the condition described in Step (1) is not satisﬁed, a new terminal is installed as a new GW and then a new network is constructed.
Because there is one GW per network, the number of GWs is the same as the number of networks.

224

V. PROPOSED RECONSTRUCTION METHODS
The cloud gathers RSSI information from terminals through multi-hop networks to grasp a real network topology. Thereafter, to reduce redundancy on the real network topology, the cloud executes network reconstruction emulations. Because the data from nodes to a GW occupy most of the trafﬁc, it is required to minimize the index information of reconstruction on the network. We propose two network reconstruction methods: a total reconstruction method, and a partial reconstruction method. The total reconstruction method leaves some GWs and combines multiple networks into one. The partial reconstruction method interconnects networks to reduce the number of GWs. While the total reconstruction method needs a new routing table, the partial reconstruction method can use an existing routing table of the initially constructed network. In the case of the partial reconstruction method, there is no need to feedback a new routing table so the power consumption for feedback can be reduced. Additionally, unlike the total reconstruction method that combines multiple networks into one, the partial reconstruction method maintains and interconnects the respective network structures. Because information exchange for route updating is performed among the terminals within the same network, there is a possibility that the partial reconstruction method can reduce the power consumption at the time of route updating compared to the total reconstruction method. The details of these reconstruction methods are described in the following subsection.

A. Total reconstruction method

The total reconstruction method is simple. The total reconstruction method selects and leaves some GWs, and each terminal reconnects to one of the GWs. The total reconstruction method is implemented as follows.

(1) Server selects some GWs randomly. Server checks

terminals on its adjacent terminals list, and checked

terminals are regarded as a “adjacent checked terminals.”

Server repeatedly checks terminals on adjacent terminal

list of adjacent checked terminals until there are not

newly adjacent checked terminals. Here, a group of

adjacent checked terminals are referred to as a GROUP

from now on.

(2) Server on cloud counts the number of nodes and GWs.

The number of counted nodes and GWs deﬁnes as N ,

the number of counted GWs deﬁne as n. Now, remaining

GWs after the total reconstruction method is denoted as

r, and r is deﬁned by the following equation,

⌈⌉

N

r=

,

(1)

Nlim

where Nlim denotes the maximum number of terminals in a network, Nlim can be arbitrarily changed. (3) Server decided the number of hops of each terminal. If the terminals have links from other multiple terminals, to reduce the number of hops, the server selects the route that minimizes the its number of hops.

(4) Server leaves nCr combinations of GWs in each network, and repeatedly implement step (3). In the created various network topology, the network topology of the minimum number of hops is selected, and it is regarded as the total reconstruction result.
B. Partial reconstruction method
The partial reconstruction method selects and leaves some networks with connection to the existing networks. Here, the remaining network is referred to as the connection source network (CSN), and the network with the function to connect to the CSN is referred to as the connection object network (CON). In the partial reconstruction method, the terminal is operated as the connection terminal to other networks. The connection terminal transfers data from the CON to the CSN. The partial reconstruction process is described as follows.
(1) Server selects some GWs randomly. Server checks terminals on its adjacent terminals list, and checked terminals are regarded as a “adjacent checked terminals.” Server repeatedly checks terminals on adjacent terminal list of adjacent checked terminals until there are not newly adjacent checked terminals. Here, a group of adjacent checked terminals are referred to as a GROUP from now on.
(2) Server on cloud counts the number of nodes and GWs in the GROUP. The number of counted nodes and GWs in the GROUP deﬁne as N , and the number of counted of GWs in the GROUP deﬁne as n. Now, remaining networks after the partial reconstruction method is denoted as r, and r is deﬁned by the equation (1).
(3) In the GROUP, server selects and leaves r pieces of CSNs. For each CON, server counts the number of terminals in each CON that the terminals in CSNs has link and is not belong to CSN. Server selects the CON that is belongs the number of terminals as maximum.
(4) Server selects a terminal, and server calculates the number of hops for each terminal in selected CON of in case of the terminal is destination, and adds the all number of hops. After that, server selects the terminal that the added number of hops is minimizing, and the terminal is regarded as pseudo GW. Server creates the network topology that the pseudo GW is destination, and interconnect the selected CON to the CSN through the pseudo GW.
(5) Server repeatedly implements step (3) and (4) until there are not interconnected new CON.
(6) Server leaves networks of nCr combination, and repeatedly implement from step (3) to (5). After that, server selects the network topology that minimizes the counted number of hops of all terminals in the GROUP, and it is regarded as the partial reconstruction result in the GROUP.
(7) Server combines each partial reconstruction result in each GROUP, and it is regarded as the result of the partial reconstruction.

225

TABLE II PARAMETER OF CURRENT-VOLTAGE MADE BY SILICON LAB IC
ʢ446X)[8].

Parameter RX Mode CurrentʢHigh Performance Modeʣ TX Mode Currentʢ+13 dBm output powerʣ
Operating voltage

values
13.7mA 29mA 3.3V

6

Fig. 3. (a) Topology of initial construction, (b) Total reconstruction, (c) Partial reconstruction.

TABLE I SIMULATION CONDITIONS.

Parameter
Analysis area Wave reaching range D
Nlim Poisson distribution density λ Packet generating time interval Number of Resend of DATA packet
Simulation times Number of trials

Values
100 m × 100 m 30 m 35units
0.001-0.01 1-30 min 3 times 20 min 100 times

Number of GWs

4 64.5㸣

2

INITIAL TOTAL PARTIAL

0

0.005

0.01

Poisson distribution density Ȣ

Fig. 3 shows network topology after implemented each reconstruction method. (a) is topology of initial construction. (b) shows that the GW of NET1 is left and surrounding terminals reconnects to the GW. (c) shows that NET1 is left and interconnect surrouinding network via each pseudo GW in each network.
VI. THE NUMBER OF PACKETS WHEN ROUTE UPDATE
Routing protocol for U-BUS Air is proactive type. Proactive type becomes lower reliability as time proceeds. Thus, route update is needed to be implemented at regular intervals. Table of the number of hops (TNH) exchanges on U-BUS Air correspond route update. In TNH at each terminal, TNH from itself to all the terminals in the same network is described. TNH exchange is implement after the two terminals exchange TNH. Update procure is shown as follows. First, the number of hops of directly connected terminals is 1. Next, the terminal compares the number of hops on own TNH and the number of hops +1 on exchanged TNH, and select minimum, and regards the minimum as the own number of hops. After the number of hops of all terminals are decided, if the number of hops is not continuous, it is deleted as not exist on the network. Routing table of the terminal is created by TNH and the information of surrounding terminals. By using new TNH, the routing table is updated.
When a TNH of a terminal is renewed, the TNH exchange occurs between the terminal that has new TNH and the terminal that has the old TNH. Thus, If TNH of a terminal is renewed, TNH exchanges at all terminals in the same network.

Fig. 4. Number of GWs in entire network.

So, if the number of terminals in each network decreases, the trafﬁc by TNH exchange also decreases. There are two assumptions. One is that all terminal renews the own TNH at once. The other one is that communication for replacing TNH is always completed at once between the terminal has new TNH and the other terminal has old TNH. Under those assumption, the number of exchange of TNH is represented by the following equation.

1

NR = N N ETi(N N ETi − 1),

(2)

i=m

where NR denotes the number of exchange of TNH, N N ETi
denotes the number of terminals in the same network, and m denotes the number of networks. ɹ

VII. COMPUTER SIMULATION

In this section, packet transmission and reception simulation are performed using protocols of U-Bus Air to evaluate the performance of the two proposed methods. Because communication from each node to GW occupies a most part, the simulation is implemented using the trafﬁc from nodes to the GW. We assume that the radio propagation follows free space path-loss, which is not affected by fading and shadowing. Additionally, the position of the terminals is given by a Poisson Point Process (PPP). Tables I and II, respectively, show the simulation parameters and the parameters for calculating the transmitting and receiving power consumption.

226

Average transmission reception power consumption

Total number of hops

INITIAL TOTAL PARTIAL 100
50

0

0.005

0.01

Poisson distribution density Ȣ

Fig. 5. Number of hops obtained by adding each terminal in entire network.

1

1.5 INITIAL TOTAL PARTIAL
1

0.5

0

0.005

0.01

Poisson distribution density Ȣ

Fig. 7. Average power consumption.

1

PDR

PDR

0.5 0.5

INITIAL TOTAL PARTIAL

0

0.005

0.01

Poisson distribution density Ȣ

Fig. 6. Packet delivery ratio.

INITIAL TOTAL PARTIAL

0

10

20

30

Packet generating timing [min]

Fig. 8. Packet delivery ratio with different packet generation timing.

Fig. 4 shows the number of GWs in the entire network, from which we can observe that both reconstruction methods reduce the number of GWs compared to the initial construction. The reduction rate is 64.5% at λ = 0.005 at a maximum. Fig. 5 shows the number of hops in the entire network, from which we can observe that both proposed methods have a larger number of hops than the initial construction. The partial reconstruction method has the largest number of hops because the method has to connect to the pseudo GW. Fig. 6 shows the result of the PDR. The PDR is deﬁned as the number of delivered packets at the GW divided by the number of packets generated in the entire network according to the Poisson distribution density. Despite reducing the number of GWs, both proposed reconstruction methods have the same performance as the initial construction. Fig. 7 shows the power consumption for communication, where we can observe that both proposed methods increase power consumption than the initial construction because of increasing the number of hops.

Fig. 8 shows the result of the PDR when the Poisson distribution density is ﬁxed at λ = 0.005. When the packet generation time interval is changed, from 10 to 30 min, both proposed methods have the same performance as the initial construction. If we consider a time interval from 1 to 9 min, both proposed methods degrade the PDR compared with the initial construction. Fig. 9 shows the average power consumption for data transmission. From 10 to 30 min, the same power consumption performance can be obtained as the initial construction. However, if we consider the time interval from 1 to 9 min, both proposed methods have higher power consumption than the initial construction. The PDR and power consumption performance deteriorate from 1 to 9 min because the number of GWs decreases and the number of hops increases. Fortunately, the usual collection period of the smart meter system is 2 or 3 times per hour from each node to GW. Furthermore, both proposed methods can reduce the number

227

Average power consumption for communication [W]

INITIAL

TOTAL

100

PARTIAL

50

0

0

10

20

30

Packet generating timing [min]

Fig. 9. Average power consumption with different packet generation timing.

3000 2000

INITIAL TOTAL PARTIAL

The number of Exchange of the number of hops table [times]

1000

00

0.005

0.01

Poisson distribution density Ȣ

Fig. 10. Thenumber of exchange of number of hops.

method is the partial reconstruction method that leaves some networks and interconnects the remaining networks. Both reconstruction methods can reduce the number of GWs while maintaining the packet delivery ratio performance compared to the initial construction. The proposed method can reduce the number of GWs up to 64.5%. The partial reconstruction method includes more hops compared with the total reconstruction method, which introduces negative elements owing to the large number of hops. However, PDR of both reconstruction method is kept as when the initial construction. In case of TNH exchange, the partial reconstruction method can reduce the number of exchange of TNH than the total reconstruction method. Therefore, we conﬁrmed that the partial reconstruction method is better than the total reconstruction method.
REFERENCES
[1] F. Zhong, P. Kulkarni, S. Gormus, C. Efthymiou, G. Kalogridis, M. Sooriyabandara, et al., “Smart Grid Communications: Overview of Research Challenges, Solutions, and Standardization Activities,” IEEE Communications Surveys & Tutorials, IEEE, vol. 15, pp. 21-38, 2013.
[2] F. Benzi, N. Anglani, E. Bassi, and L. Frosini “Electricity smart meters interfacing the households,” IEEE Transactions on industrial electronics, vol. 58, no.10, Oct. 2011.
[3] H. Hayashi, “Evolution of next-generation gas metering system in japan,” Proc. of 2014 IEEE MTT-S International Microwave Symposium (IMS), pp. 1-4, June 2014.
[4] http://www.wi-sun.org [5] T. Kawata, “Use of Wi-SUN technology and future prospects for
gas smart meter,” ITU journal. vol.47. no.2, pp.14-17, 2017. [6] J. Fujiwara, R. Okumura, K. Mizutani, H. Harada, S. Tsuchiya,
T. Kawata, “Ultra-low power MAC protocol complied with RIT in IEEE 802.15.4e for wireless smart utility networks,” Proc. of PIMRC, Sept. 2016. [7] T. Moriyama, A. Nakayama, T. Fujii, “Receiver beacon transmission interval design for multi-stage wireless sensor networks,” Proc. of ICUFN, July 2016. [8] http://www.silabs.com/documents/public/data-sheets/Si4464-6361-60.pdf

of GWs and many small networks without affecting the PDR. Fig. 10 shows the number of exchange of TNH. The num-
ber of exchange times of the total reconstruction method is increased compared to the initial construction and partial reconstruction method. it is caused by increasing the number of terminals in the same network using the total reconstruction method. The partial reconstruction achieves the same number of exchange as the initial construction because the network topology at the initial construction is used in the case of partial reconstruction method. The increasing rate is 74.1% at Е=0.0025 at the maximum.
VIII. CONCLUSION
In this paper, we proposed two network reconstruction methods for U-Bus Air using the cloud server. We implemented and evaluated our proposed reconstruction methods. One method was the total reconstruction method, which is simple network reconstruction method. The total reconstruction method leaves some GWs and reconnects the remaining GWs. The other

228

