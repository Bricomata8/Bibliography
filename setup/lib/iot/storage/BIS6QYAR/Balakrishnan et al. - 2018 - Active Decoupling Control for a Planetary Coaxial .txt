Active Decoupling Control for a Planetary Coaxial
Helicopter using Force Feedback
Brijith Balakrishnan∗, Shamrao†, Aditya R†, Narendra Nath S∗, Sujay Narayana‡ and R. Venkatesh Prasad‡ ∗Department of Mechanical Engineering
National Institute of Technology Karnataka, India Email: brijithbalakrishnan@gmail.com, snnath88@yahoo.co.in
†ISRO Satellite Centre, Bengaluru, India Email: shamrao@isac.gov.in, adityar@isac.gov.in ‡EEMCS, Delft University of Technology, The Netherlands Email:sujay.narayana, r.r.venkateshaprasad@tudelft.nl

Abstract—Drones developed for interplanetary space missions require full autonomy of operations including safe landing and hovering due to the delay in communication. For operation in low atmospheric densities, coaxial helicopters are best suited and they are capable of handling manoeuvres due to their small footprints and ease of operation. However, the dynamics of the helicopter is coupled in lateral axes which need to be compensated for precise control. The present solutions include vision-based tracking in order to decouple the dynamics, which needs additional hardware. In this paper, a decoupling controller is presented that employs an accelerometer-based force feedback system for measuring the undesired forces in off-axis which does not need any additional hardware. The simulation results indicate that the force feedback methodology is very effective in controlling the off-axis drift of the coaxial helicopter.
Index Terms—Coaxial helicopter, decoupling controller, force based decoupling, six degrees of freedom model, force measurement, accelerometer.
I. INTRODUCTION
Space agencies are actively developing drones suitable for interplanetary missions, especially for Mars exploration [1]. At present, a coaxial helicopter drone is considered as a scout for Mars rovers to enhance the rover capabilities in exploring the planet [2]. The path planning and the scientiﬁc site selection using a body-mounted navigation camera is considerably limited due to its short ﬁeld of view. In many cases, the rover may have to deviate because of obstacles such as big rocks. A scout drone, on the other hand, can ﬂy to a higher altitude and provide a larger ﬁeld of view. Furthermore, such drones have the visibility over kilometres and can guide the rover, thereby saving mission time and energy. A coaxial micro helicopter has the advantage of small footprint area due to its tailless design. In addition, the design provides an increased thrust force and efﬁciency compared to single or quad-rotor conﬁgurations for the given area. Considering Mars, the task of designing such a drone is highly challenging because of the following reasons. (i) The helicopter must be fully autonomous because of the communication delay between Earth and Mars; (ii) Mars has an atmosphere which is one-hundredth of the density of air on earth and an acceleration due to gravity which is approximately one-third of the Earth’s gravitational

acceleration; (iii) The end to end testing of the helicopter design and its navigation algorithms may be possible only in the simulated Mars environment and not on the actual location; and (iv) Any unconsidered disturbances may fail the drone operation. All these challenges lead us to the development of an autonomous and adaptive drone.
Incorporating autonomy on control needs a thorough understanding of the dynamics, sensors used and the computational resource available. Design of an autonomous helicopter for Mars has challenges in each of the aforementioned aspects. Due to the thin atmosphere, the swept area of the blades needs to be larger in order to generate sufﬁcient lift to keep the copter aﬂoat. However, higher lengths of the blades produces undesirable vibrations due to ﬂapping action. The large length of the blades along with mechanical misalignment of the cyclic input and the different airﬂow on the rotor blades at high velocities stimulate off-axis dynamics, hence coupling the helicopter dynamics in lateral axes. The real-time processing from visual sensor needs considerable computational resources on board for active decoupling control. The capabilities of a radiation hardened processor are limited, requiring the control to be based on relatively simple sensor inputs.
Various dynamic and control models have been proposed for coaxial helicopters. Daniel et al. identiﬁed the parameters of a miniaturized UAV helicopter and an incremental Proportional Integral Derivative (PID) based controller was designed [7]. Schafroth et al. [3] developed a nonlinear model of a micro coaxial helicopter for all degrees of freedom. However, the model described only parameter identiﬁcation and system conﬁguration near the hover and thus neglect important coupling sources. The reasons behind coupling were explored by Fankhauser et al. [4] and they presented a model based on active decoupling. The paper proposed a decoupling controller using a vision-based motion tracking system to estimate the deviation from actual path or trajectory. The drawback of the vision-based motion tracking system is that it requires additional hardware for implementation. In this study, an alternative method of active decoupling based on the force feedback using the measurement from an Inertial Measurement Unit (IMU) is proposed. The advantage of this

978-1-5386-4646-5/18/$31.00 ©2018 IEEE

53

ICUFN 2018

over the vision-based system is that it does not require any additional hardware. The methodology for force calculation through acceleration measurement has been discussed in [9].
The rest of this paper is organized as follows, Section II introduces the basic concept of a coaxial helicopter, Section III presents the details of the dynamic model of coaxial helicopter. The proposed active decoupling controller is presented in Section IV, and the simulation results are discussed in Section V and we ﬁnally conclude in Section VI.
II. COAXIAL HELICOPTER

nonlinear dynamic model for coaxial helicopters based on rigid body equation for six degrees of freedom (DoF), as given in [3]. The model captures all the existing forces and torques resulting from different subsystems of the helicopter.
A. Coordinate frame
The coordinate systems are deﬁned as shown in Figure 2. The inertial reference frame is denoted as J and the body ﬁxed coordinate system located at the center of gravity (CoG) as B. A well known transformation matrix presented in [6] is used to transfer components from the body ﬁxed to inertial frame.

Fig. 1. CAD model of coaxial helicopter being developed.

The coaxial helicopter has a cuboid of dimension 200 mm3 which houses the electronics of various subsystems. The 3D model of the helicopter is developed using Siemens PLM Software NX [11] and is illustrated in Figure 1. The assembly of the helicopter is in progress, and so as the validation of the developed control methodology on a real hardware. The sweep diameter of the rotor is designed to be 1 m in order to generate the sufﬁcient thrust to lift a helicopter of 1 kg mass under Mars gravity. Since high power motors are required for easy manoeuvrability and agility and considering thrust to weight ratio of greater than two, the two counter-rotating rotors are driven independently using two 300W Brushless Direct Current (BLDC) motors. The speed of the motors is controlled using Electronic Speed Controllers (ESCs) which is driven by using Pulse Width Modulation (PWM) signals generated by a microcontroller. A swash plate is used for tilting the thrust vectors of the lower rotor using cyclic pitch input. Two axes tilt of the rotor is achieved by driving two servo motors arranged at 90°, connected to a plate ﬂoated with a spherical bearing on the upper rotor shaft. The upper rotor is attached to a stabilizer bar acting as a passive regulator for the roll and pitch of the helicopter.
The helicopter houses a digital IMU sensor MPU-6050 which contains an accelerometer and a gyroscope. The altitude of the helicopter is measured using an ultrasonic sensor HCSR04. The ultrasonic sensor is also used for safe autonomous landing of the helicopter.
III. DYNAMIC MODEL
In this section, we present the dynamic model that we consider in our work. The dynamic model needs to capture all relevant dynamics of the hover and must be simple enough to be used for control as well. In our work, we adopt the complex

Fig. 2. Coordinate frame representation [6]

B. Forces and Torques

The rigid body dynamic equations with respect to CoG are

derived using Newtonian mechanics and are given in body

ﬁxed frame as,

d

(

)

F = [m v] = m v˙ + Ω × v , dt

(1)

M

=

d dt

[ I

] Ω

=

I

Ω˙

+

Ω

×

(I

Ω),

(2)

where F and M are external force and moment acting at the

centre of the mass respectively, I is body inertia tensor, v =

[u, v, w]T is velocity vector, Ω = [p, q, r]T is angular rate

vector and m is the total mass of helicopter. Using (1), we

derive the differential equation for velocities of the helicopter

in the body ﬁxed frame and is denoted as,





u˙  v˙ 
w˙

=

1F m

−

s1 s2 ,
s3

(3)

where s1, s2, s3 are the scalar components of the vector

obtained from the cross product of vectors Ω and v, as follows:

 



s1

qw − rv

s2 = ru − pw .

(4)

s3

pv − uq

54

The differential equation corresponding to the angular rates of

the helicopter in the body ﬁxed frame is given as,

 p˙

(

 p

 p

)

q˙ = I−1 M − q × I q .

(5)

r˙

r

r

The forces acting at the CoG of the helicopter are thrust from the upper rotor Tup and the lower rotor Tdw, gravitational force G and the body drag force Wfus. The resultant force F is given as

F = Tup + Tdw + G + Wfus

(6)

The aerodynamic fuselage drag force Wfus due to the incident

velocity of air is very low compared to other forces and hence

neglected. The rotor thrust is deﬁned as, Ti = Ti · nT,i with

i ∈ {up, dw} for the upper and down rotor. The thrust

magnitude is,

Ti = cT,iπρR4Ω2i ,

(7)

where rCi is the vector from CoG to the rotor hub. The other

terms used in the above equation are deﬁned as follows.

The magnitude of rotor drag torque Qi acting in opposite

directions for the upper and lower rotors along the z-axis is

given by

Qi = cQ,iπρR5Ω2i ,

(11)

where cQ,i is the rotor drag coefﬁcient and Qreact,i is the reaction torque experienced while acceleration and deceleration of the rotors acting in the rotor axis direction with the magnitude given by,

Qreact,i = Jrot,i Ω˙ i,

(12)

where Jrot,i is the inertia of rotating parts such as stabilizer bar, rotor blades etc. Mflap,i is the ﬂapping torque, which can be simpliﬁed as a ﬂapping hinge with a torsion spring, which exerts torque depending on the deﬂection of Tip path plane(TPP) as follows.

where cT,i is the thrust coefﬁcient, R is the radius of the rotor and Ωi is the rotor speed in rad/sec. The normalized direction

Mflap,x = ksprg α

(13)

of thrust vector nT,i is perpendicular to the Tip Path Plane

Mflap,y = ksprg β,

(14)

(TPP) and can be expressed as a rotation α about the x-axis,

and a rotation β about y-axis of the body ﬁxed frame as shown with blade stiffness factor, ksprg.

in Figure 3.

C. Dynamic Elements

Finally, the dynamic elements of the helicopter, the stabilizing bar and the swash plate equations are derived. The stabilizer bar for its roll/pitch movement can be modeled as ﬁrst order element as in [3].

1

η˙bar

=

(ϕ − τf,up

ηbar )

(15)

ζ˙bar

=

1 τf,up (θ − ζbar),

(16)

Fig. 3. Direction of Thrust vector [6]





− cos α sin β

nT,i = − sin α cos β  .

(8)

− cos α cos β

The last force is the gravitational force G caused by the mass

of the helicopter. The gravitational force vector in the body

ﬁxed frame and is given by,





− sin θ

G = mg cos θ sin ϕ .

(9)

cos θ cos ϕ

The torque vector M acting on the body sums up to,

∑ M = Qi + rC,i × Ti + Qreact,i + Mflap,i,

(10)

i

with roll and pitch angles ϕ and θ. Here, ηbar and ζbar represent the deﬂection angles of the stabilizer bar relative to the inertial reference frame, respectively. The time constant τf,up covers the combined system of the upper rotor and the stabilizer bar. The tilt angle of thrust vector is the difference of two angles, ηbar and ζbar with mechanical linkage factor, lup which are given by,

αup = lup(ηbar − ϕ),

(17)

βup = lup(ζbar − θ),

(18)

The modelling of a coaxial helicopter presented in [3] was mainly focused near hovering point and coupling effect was neglected. The coupling effects in lateral and longitudinal direction presented in [4] make the helicopter to move off-axis. The modelling of the coupling effect is based on non-corrected phase lag between upper rotor and stabilizer bar and coupling between longitudinal and lateral dynamics. In this work, we consider all the forces contributing to the coupling, and the design of the controller is aimed at nullifying the effect. The

55

cyclic input is controlled by the servo motors mechanically attached to the swash plate.

1(

α˙ dw = τf,dw

− αdw+ (

ldw uservo1 cos ∆ζdw − uservo2 sin ∆ζdw)

− aα,vv2sign()v) − aα,uu2sign(u)− aα,pp2sign(p) ,

(19)

β˙dw

=

1( τf,dw

− βdw+ (

ldw − uservo2 cos ∆ζdw + uservo1 sin ∆ζdw)

+aβ,uu2sign(u))− aβ,vv2sign(v)− aβ,q q2 sign(q)

(20)

α and β are the tilt angles formed by the blades about x and y

axes respectively with the time constant τf,dw, scaling factor

ldw and servo inputs uservo,i. ∆ζdw is the in-angle between

servo motor and main axis [4].

D. Model Summary

The dynamic model of helicopter contains 18 state variable x and four inputs u (2 motors and 2 servo motors), and are represented by,

x

=

[ ...q,

x, y, z, u, v, r, αdw, βdw,

w, ϕ, θ, ψ, p, ... ηbar, ζbar, Ωdw,

]T Ωup

,

(21)

A. Force Model

The decoupling controller proposed in this paper uses the

measurement of linear acceleration using IMU to generate

control input. The error in the calculation of force is of the

order of 10−3g which is about 0.001%. The methodology

for the estimation of force using the accelerometer data is

provided in [9]. The data is acquired from both x and y axes

of the accelerometer. This is done based on the assumption that

the whole movement of the helicopter is due to the resultant

force vector acting on the centre of mass. The force vector in

component form is given by,

  

Fx

ax

Fy = m ay ,

(23)

Fz

az

where m is the total mass of helicopter. The acceleration data

from the sensor is biased and in order to minimize the effect of

noise, it needs to be ﬁltered. The bias voltage can be identiﬁed

during calibration. The force vector with bias is given by,

 



Fx

ax − nx

Fy = m ay − ny  ,

(24)

Fz

az − nz

where ni is the total error in data acquisition. The acceleration data is generated using a MATLAB program for the sensor and the off-axis force is modelled with this acceleration output. The measurement of body rotation angles from the gyroscope is updated while generating the controller input during the decoupling process. A Butterworth ﬁlter with cutoff frequency of 10 Hz is used to smoothen the accelerometer response.

u = [umot,up, umot,dw, uservo1, uservo2]T .

(22)

IV. DECOUPLING CONTROLLER

The aim of the controller developed is to decouple the dynamics of the helicopter in order to enable easier and more precise operation. The three coupling effect as provided in [4] is the coupling between the roll/pitch dynamics and the altitude dynamics, the coupling due to a non-corrected phase lag of the upper rotor and the stabilizer bar, and the coupling between longitudinal and lateral dynamics. We focus on the coupling between longitudinal and lateral dynamics because it causes the largest ﬂuctuations in horizontal trajectories. The reason for coupling is, if positioning of the servo motors to the actual phase lag of the lower rotor is not adjusted, the helicopter will follow distorted trajectories on steering inputs. The off-dynamics are stimulated due to the different airﬂow on the rotor blades at high velocities. These effects manifest themselves in an insufﬁcient directional consistency.
Suppose we command the helicopter to move along the x-axis, then a force is generated in off-axis which would result in undesired movement along the y-axis. The force feedback controller proposed here generates active input to the swash plate in order to limit the off-axis movement within the desirable limit.

B. Controller Design
The active decoupling uses the thrust vector from the lower rotor which is controlled through tilt of the swash plate. The force generation in lateral and longitudinal direction is due to a component of thrust vector along the direction of the corresponding axis. The thrust of the lower rotor (7) is decomposed into body reference frame as follows:

Fx = −cT πρR4Ω2 sin β cos α,

(25)

Fy = −cT πρR4Ω2 cos β sin α.

(26)

The tilt angle to be provided as input for creating decoupling

effect can be derived from the (25) and (26).

β

=

tan−1

( Fx

tan

) α

Fy

(27)

α

=

tan−1

( Fy

) tan β

(28)

Fx

The tilt of the swash plate is created by a link which is attached to the servo motor. The linear movement required to be provided by the servomotor is shown in Figure 4. The relationship between the tilt angles α and β and the respective linear movements is given by Lα = rs α and Lβ = rs β respectively, where rs is the radius of swash plate.

56

Fig. 4. Swash plate angle conversion

Suppose uservo1fb , uservo2fb are the inputs to the servo motor which are mapped from maximum possible swash plate

tilt angles [-30 , 30] to [-1 , 1]. Then, the required input for
decoupling is given by uservo1fb and uservo2fb , which are the functions of inverse tangent of α and β as follows.

uservo1f b

=

rs α αmax

tan−1 ( Fx Fy

) tan α

(29)

uservo2f b

=

rs β βmax

tan−1 ( Fy Fx

) tan β

(30)

The uservo1fb and uservo2fb are the signal which are negated from the current input uservo1 and uservo2, respectively.

V. SIMULATION AND RESULTS
Simulation is carried out for the helicopter model, with and without the application of decoupling control. The physical parameters for the helicopter are taken from [3] and [4] as the in-house helicopter is still under construction. The noise and bias of sensors were based on IMU sensor MPU6050 module in MATLAB. The Butterworth ﬁlter with cutoff frequency 10 Hz allows smoothening of the force curve. The density and gravitational force were adapted from [8].
The simulation without decoupling controller shows an offaxis (in this case y-axis) force being developed as shown in Figure 5. As observed from the ﬁgure, the force oscillates and drifts causing off-axis motion of the helicopter. Even though the magnitude of oscillation is of the order of 0.2 N, the drift causes signiﬁcant movement of the helicopter along negative y-axis over a period of time. Figure 8 shows the trajectory followed by the helicopter on an X − Y plane. The results show that with the application of the controller, a drift of 0.25 m along the y-axis is brought down to 2.5 cm over a travel distance of 2 m along the x-axis. The controller actively compensates for the coupling in the longitudinal and lateral dynamics and produces a satisfactory precision in the motion of the helicopter.
The control input to the two servos of the swash plate are plotted in Figure 9 and Figure 10. The input to the tilt angle β is constant where as input against the tilt angle α oscillates over time.

VI. CONCLUSION
The paper discusses the off-axis coupling observed in a coaxial helicopter. An active decoupling based on the force feedback in off-axis is developed. The feedback model uses the measurement of acceleration for calculating the control

Fig. 5. Component of force along y-axis without decoupling controller

Fig. 6. Component of force along y-axis with decoupling controller

Fig. 7. Velocity component along x-axis with time for the case of with and without decoupling controller

Y (m)

Force along y-axis with decoupling 0.05

0

-0.05

-0.1

-0.15

-0.2

-0.25

-0.3

With Decoupling

Without Decoupling

-0.35

0 0.5 1 1.5 2 2.5 3 3.5 4

X (m)

Fig. 8. XY motion of helicopter

57

Fig. 9. Servo motor input to x direction

[9] Roisin Howard, Richard Conway, Andrew J Harrison, Estimation of Force during Vertical Jumps using Body Fixed Accelerometers, IET Irish Signals & Systems Conference, 2014.
[10] Thanh Phuoc Hong, Jun-ya Takayama, Shinji Ohyama, A novel RF time-of-ﬂight estimation method for asynchronous wireless sensor network nodes Proceedings of SICE Annual Conference (SICE), 2012.
[11] Seimens, NX Software 8.5. Plano, Texas, USA, 2012, Computer Software. https://www.plm.automation.siemens.com/global/en/products/nx/

Fig. 10. Servo motor input to y direction
input rather than complex vision based tracking system. The simulations carried out to demonstrate the effectiveness of the controller to correct this coupling by giving a tilt in the tip path plane of the rotor. The off-axis drift of the helicopter is signiﬁcantly reduced by the application of the controller. This helps to track the desired trajectories even on external disturbances due to winds on Mars’ surface. We plan to incorporate the developed controller in the in-house microhelicopter being developed.
REFERENCES
[1] David W. Hall, Robert W. Parks, On the Development of Airborne Science Platforms for Martian Exploration, Proceedings of the Foundation of the Mars Society, Univelt, San Diego, 1998.
[2] Landau, Elizabet, Helicopter Could Be ‘Scout’ for Mars Rovers., 2015 url: https://www.jpl.nasa.gov/news/news.php?feature=4457.
[3] D. Schafroth, C. Bermes, S. Bouabdallah, R. Siegwart, Modelling and System Identiﬁcation of the muFly Micro Helicopter, Journal of Intelligent and Robotic Systems, 2009.
[4] Peter Fankhauser ,Samir Bouabdallah, Stefan Leutenegger, Roland Siegwart, Modeling and decoupling control of the coax micro helicopter, IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), 2011.
[5] J Gordon Leishman, Principle of helicopter Aerodynamics, 2rd ed. Cambridge University press, 2006.
[6] D. Schafroth, Aerodynamics, modelling and control of an autonomous micro helicopter, Doctoral Thesis, ETH Zurich 2010.
[7] Daniel Neamtu, Razvan Deac, Robin De Keyser, Clara Ionescu, Ioan Nascu, Identiﬁcation and control of a miniature rotorcraft Unmanned Aerial Vehicle (UAV), IEEE International Conference on Automation Quality and Testing Robotics (AQTR), 2010.
[8] Larry A. Young, Edwin W. Aiken, M.R. Derby, J.L.Johnson, J.Navarrete, J.Klem, R.Demblewski, J. Andrews, R.Torres, Engineering Studies into Vertical Lift Planetary Aerial Vehicles, AHS International Meeting on Advanced Rotorcraft Technology and Life Saving Activities, Utsunomiya, November 11-13, 2002.
58

