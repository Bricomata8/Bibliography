Social-Aware Routing for Multi-hop D2D Communication in Relay Cellular Networks

Sai Wang School of Electronic Engineering
Soongsil University Seoul, Korea
wangsai@soongsil.ac.kr

Oh-Soon Shin School of Electronic Engineering
Soongsil University Seoul, Korea
osshin@ssu.ac.kr

Yoan Shin† School of Electronic Engineering
Soongsil University Seoul, Korea
yashin@ssu.ac.kr

Abstract—Device-to-device (D2D) communication is a promising technology for 5G mobile communication networks due to several beneﬁts such as highly increased spectral efﬁciency, extended coverage, reduced latency, and enhanced cost and power efﬁciency. However, the multi-hop routing protocol faces many challenges in the D2D communication. In this paper, a socialaware routing algorithm is proposed to design the multi-hop path in the cellular network. Based on the Friis transmission equation, we drive the received power distribution and construct a relay cellular network. In addition, the congested ratio and average congested intensity are important indices to measure network congestion. To investigate the impact of network congestion on the end-to-end delay, we evaluate the performance of the proposed algorithm in three different congested ratio networks. Simulation results show that the proposed algorithm outperforms the conventional algorithm in terms of reducing the end-to-end delay.
Index Terms—5G, relay cellular network, device-to-device (D2D) communication, social-aware routing protocol

Fig. 1. An illustration of D2D communication in a relay cellular network.

I. INTRODUCTION
In the future ﬁfth generation (5G) mobile communication system, the internet of things (IoT) is expected to construct an interconnected network of all things and provide new services through the network-controlled direct device-to-device (D2D) communication [1]. In this way, it can remove the load burden on the backhaul and reduce the necessary effort for managing trafﬁc. For the multi-hop D2D communication, the use of relay base station (BS) and relay device can efﬁciently extend the coverage of the cellular network and make it easier to access the cellular network when some infrastructure devices malfunction. Fig. 1 shows an illustration of the D2D communication in a relay cellular network where several relay BSs are distributed around the main BS (In the relay cellular network, the dashed line is the control link and the solid line is the direct link).
In the multi-hop D2D communication, routing is a critical issue since a user communicates with the others in a single-hop or a multi-hop manner. When the routing protocol
†Corresponding author. This work was partly supported by the NRF grant funded by the Korea government (MSIT) (2016R1A2B2014497), and by the IITP grant funded by the Korea government (MSIT) (No. 2017-0-00724, Development of Beyond 5G Mobile Communication Technologies (Ultra-Reliable, Low-Latency, and Massive Connectivity) and Combined Access Technologies for Cellular-based Industrial Automation Systems).

designs a wrong path, the multi-hop D2D communication performs worse than the traditional cellular network. A lot of works [2]–[5] investigate the routing protocols to improve the quality of service and reduce the end-to-end delay. In [2], the authors analyzed the characteristics of routing protocols for the integration of the cellular and the multi-hop D2D communication. This result would help researchers choose an appropriate routing protocol based on their requirements. To determine the optimal single-copy multipath transmission strategy, a planned opportunistic routing scheme was proposed [3]. For the future cyber-physical system, [4] proposed an interference-controlled D2D routing algorithm with low complexity. An important problem in multi-hop D2D network is to design a cost-efﬁcient routing protocol that aims to transmit data with high delivery ratio and low overhead. Via investigating group meetings’ properties, [5] introduced a forwarding algorithm for multi-hop D2D networks. In addition, [6]–[9] considered different aspects (i.e., dynamic matching resource, trusted connectivity probability, combination of social and spatial awareness, and serving large-scale network) to design multi-hop routing protocols. To avoid the violation of tolerable interference, the authors of [10] proposed an interference-aware routing based on the minimum hop-count. The aforementioned researches give some ideas on the routing protocols, while there are

978-1-7281-1340-1/19/$31.00 ©2019 IEEE

169

ICUFN 2019

Fig. 2. Overview of a D2D operating framework.

2) End-to-end delay: In the D2D-based cellular system, the end-to-end delay mainly comes from both link control process and direct communication process. In the link control process, it costs the total time of requesting the BS and waiting for the designed path Td,B. On the other hand, the source device communicates with the destination device through n hops, which can be represented as nTd,d. In addition, considering the data transmission time Ttran, we can calculate the total end-to-end delay as

Td = Td,B + nTd,d + Ttran.

(3)

still many challenges such as the devices not maintaining the routing table and the BS handling huge amount of information and managing the interference between devices. To tackle these issues, we propose in this paper a fast-connection path selection (FCPS) routing algorithm based on small hops and network delay.

II. PROPOSED PATH SELECTION STRATEGY
In this section, we ﬁrst introduce some technical backgrounds of D2D communication including the power distribution and the end-to-end delay. Based on small hop-count and end-to-end delay, we propose the FCPS routing algorithm. Fig. 2 shows the operating framework including three parts: i) a source device sends a data request to the BS through the control link; ii) the BS searches for the destination devices and plans the paths according to the type of the data request; iii) the proposed routing algorithm is used to select the optimal path.

Fig. 3. An example of the received power distribution.

A. Technical Background

1) Power distribution: For reﬂection and polarization-

matched antennas aligned for maximum directional radiation

and reception, the Friis transmission equation is represented

by [11]

Pr = Pt

λ2 4πR G0t · G0r,

(1)

where Pr is the received power in watts, Pt is the transmitted power in watts, λ is the operating wavelength in meters, R is the antenna separation in meters, G0t and G0r are the gains of the transmitting antenna and the receiving antenna, respectively. The factor (λ/4πR)2 represents the free-space loss which considers the energy loss of the spherical propagation.
According to (1), the received power can be written in a logarithmic decibel form as

−10log10Pr = 20log10 (4πf R/c) − 10log10Pt (2) − (G0t)dB − (G0r)dB,

where c is the speed of light. To show the received power
distribution, we consider a D2D communication system without gain, where the operating frequency f = 2345 MHz, the power of the BS PtB = 80 W and the power of the relay BS PtR = 30 W, as illustrated in Fig. 3.

B. Proposed FCPS Routing Algorithm
In this paper, to reduce the end-to-end delay and the energy consumption, we consider a “small-hops” strategy to design the routing protocol. At the same time, the network congestion (i.e., the state of devices) is an important factor for managing network resources in the social-aware network. For a socialaware routing protocol, it must be able to control the overall allocation of resources and to respond quickly. For a given area, devices {D1, · · · , Dm} are randomly distributed in a cellular network. When the BS (or relay BS) receives the request from the source device Ds, the BS ﬁrst searches for those devices that storage the requested information. And then, we choose w nearest devices as candidate devices. Of course, only one of these candidate devices is selected as the target device Dt, which depends on the amount of the end-to-end delay. Based on the coordinate of devices and the maximum communication distance Rcom, the BS calculates the distance between any two devices and the table of the next hopping device Setm to construct the topology of the network. If a device Di wants to communicate with anther one Di+1, they must satisfy the certain condition dist(Di, Di+1) ≤ Rcom. To obtain the small hops, we take the hops of the shortest path as the maximum hops N .

170

Fig. 4. An example of designing paths based on the proposed algorithm. The pink area represents the source device; the blue areas represent destination device; the yellow areas represent that devices are in a busy state; the green areas represent that devices are in a standby state.

In the proposed algorithm, we adopt two steps (i.e., accessible-connection paths and connection time) to optimize the path. Speciﬁc steps are elaborated in the Algorithm 1.
1) Accessible-connection paths: To quickly ﬁnd these paths with small hops, we add a distance restriction condition. The distance from the next hopping device Di+1 to the target device is smaller than the device Di (i.e., dist(Di+1, Dt) ≤ dist(Di, Dt)), where these devices are represented as a set Ad. However, when some devices do not meet this condition, all devices that can communicate with Di are added to Ad. In addition, we use two conditions to limit the number of the rounds. The ﬁrst one is that the number of cycles per round does not exceed N . Another one is that when the next hopping device is the target device Dt, it will terminate the execution of the while loop. In this process, we choose the next hopping device from Ad with an equal probability. Finally, we select these paths that satisfy the above conditions to evaluate their connection time.
2) Connection time: For each path, we calculate the connection time (i.e., end-to-end delay) Vk based on the state of the passing device. And then, the path with the least connection time T is selected as the optimal path by comparing the length of the connection time. To investigate the relationship between the network congestion ratio and the proposed algorithm, we introduce two indicators: congestion ratio (Cratio) and average congestion intensity (AC-intensity). When the sum of the waiting time and the transmission time Tc is greater than or equal to the threshold time Tth, i.e., Tc ≥ Tth, we call the congested device Tc. The congestion ratio is deﬁned as the ratio of the number of congested devices g to the total number of devices m, Cratio = g/m. The average congested intensity is deﬁned based on the congested devices, ACintensity = sum(Tc)/g. Fig. 4 shows an example of designing paths where we use different color areas to represent different state of devices. The pink area is the location of the source device. The blue area is the location of the candidate devices (i.e., destination devices). The green and yellow areas represent the standby and busy state, respectively. Fig. 4(a) shows that the proposed algorithm designs the path for the shortest distance between the source device and the destination

device. We observe that the path looks like a spoon due to the

Algorithm 1: Proposed FCPS routing algorithm

Input: Devices {D1, · · · , Dm}, source device Ds,

waiting time Td,d, transmission time Ttran and

maximum communication distance Rcom.

Output: P ath and connection time T .

1 % Initialization phase;

2 Select w nearby devices → candidate target devices;

3 Calculate the table of next hopping devices based on

Rcom: Setm;

4 Use the Dijkstra algorithm to calculate hops of the

shortest path: N ;

5 % Accessible-connection paths;

6 for j = 1 : iteration do

7 while i < N (i = 1; i + +) do

8

Ad = f ind(dist(Ds, Dt) > dist(Di, Dt));

9

if isempty(Ad) then

10

Ad = Setn;

11

end

12

Select randomly one device in Ad: Di;

13

Pi ← Ds & Ds ← Di;

14

if Pi == Dt then

15

Listp ← P ;

16

break;

17

end

18 end

19 end

20 Delete the same path in Listp & calculate the number

of paths M ;

21 % Calculate connection time;

22 for k = 1 : M do

23 Calculate the number of devices n for the k-path;

24

Vk ← n · Td,d + sum(Ttran);

25 if k == 1 then

26

T ← Vk & P ath ← Listkp;

27 else

28

if Vk < T then

29

T ← Vk & P ath ← Listkp;

30

end

31 end

32 end

33 % Output the result;

34 return P ath and T ;

171

Fig. 5. The end-to-end delay versus the number of paths. (a) Cratio = 0.3, (b) Cratio = 0.5, (c) Cratio = 0.8.

void area. However, the designed paths approach a straight line in Figs. 4(b) and (c). In addition, the hops of the designed paths are almost the smallest. The proposed algorithm tries to select the green area as the next hopping device.
III. PERFORMANCE EVALUATION AND ANALYSIS
In this section, we numerically evaluate the performance of the proposed FCPS routing algorithm. We also compare the proposed routing algorithm with the Dijkstra algorithm [12] in terms of the end-to-end delay. Since it quickly ﬁnds the optimal solution of the shortest path for a small-scale network.
A. Simulation Setting
We consider a D2D communication network of 100 m×100 m where 40 devices are randomly distributed. In the ﬁrst step of the proposed algorithm, the number of candidate devices w is set to 3. To satisfy the communication condition dist(Di, Di+1) ≤ Rcom, we set the maximum communication distance to 20 m. The waiting time Td,d between two devices is set to 1 sec. Due to the time of queuing, the transmission time Ttran is equal to a random number in a set {1, 2, 3, 4}. Besides, the congested threshold time Tth is equal to 2 sec.
B. Results Analysis
To simplify the complexity of the simulation, we only examine the end-to-end delay in the designing-path process, that is, we do not consider the waiting time Td,B. And then, we randomly generate 50 paths to test the universality of the proposed FCPS algorithm. Fig. 5 compares the end-toend delay of the proposed algorithm to that of the Dijkstra algorithm in the different congested ratios (C-ratio = 0.3, 0.5 and 0.8). We observe that the proposed algorithm outperforms the Dijkstra algorithm in terms of the end-to-end delay. As the congested ratio increases, the overall end-to-end delay rises. As illustrated in the ﬁgure, we can see that they are almost growing in a straight line when we arrange the end-to-end delay in an ascending order. Figs. 5(a) and 5(b) show that the proposed algorithm has an obvious advantage in reducing the end-to-end delay when the congested ratio is not high. Fig. 5(c) shows that the proposed algorithm has the same performance as the Dijkstra algorithm when designing short or long paths in the highly congested ratio network. This is because that

the high congestion ratio leads to an increase in overall delay.
Moreover, the short path limits its performance.
IV. CONCLUSION
In this paper, a social-aware routing protocol has been
proposed for the D2D communication in the relay cellular
networks. To reduce the end-to-end delay, we use a distance
restriction condition to ensure that the proposed algorithm
converges quickly to the target device, and ﬁnds the minimum
end-to-end delay based on the small hops.We also investigate
the impact of the congested ratio on the performance of the
end-to-end delay. Compared to the Dijkstra algorithm, the
proposed routing protocol can design a path with low end-
to-end delay for the D2D communication. In addition, due to
the different states, the smallest hops is not always the optimal
path. In the future, we will focus on ﬁnding the critical number
of hops to design the path with the minimum delay.
REFERENCES
[1] A. Osseiran, J. F. Monserrat, and P. Marsch, “Device-to-device (D2D) communications,” 5G Mobile and Wireless Communications Technology, Cambridge University Press: Cambridge, UK, June 2016.
[2] F. S. Shaikh and R. Wismller, “Routing in multi-hop cellular device-todevice (D2D) networks: A survey,” IEEE Commun. Surveys & Tutorials, vol. 20, no. 4, pp. 2622-2657, June 2018.
[3] Y. Han, H. Wu, Z. Yang, and D. Li, “A new data transmission strategy in mobile D2D networks−Deterministic, greedy, or planned opportunistic routing?” IEEE Trans. Technol., vol. 66, no. 1, pp. 594-609, Jan. 2017.
[4] Q. Du, H. Song, Q. Xu, P. Ren, and L. Sun, “Interference-controlled D2D routing aided by knowledge extraction at cellular infrastructure towards ubiquitous CPS,” Pers. Ubiquitous Comput., vol. 19, no. 7, pp. 1033-1043, Oct. 2015.
[5] I. O. Nunes, C. Celes, P. O. S. V. de Melo, and A. A. F. Loureiro, “GROUPS-NET: Group meetings aware routing in multi-hop D2D networks,” Comput. Networks, vol. 127, pp. 94-08, Nov. 2017.
[6] L. Wang, H. Wu, Z. Han, P. Zhang, and H. V. Poor, “Multi-hop cooperative caching in Social IoT using matching theory,” IEEE Trans. Wireless Commun., vol. 17, no. 4, pp. 2127-2145, Apr. 2018.
[7] G. Chen, J. Tang, and J. P. Coon, “Optimal routing for multihop socialbased D2D communications in the Internet of Things,” IEEE Internet Things Jour., vol. 5, no. 3, pp. 1880-1889, June 2018.
[8] I. O. Nunes, C. Celes, I. Nunes, P. O.S. V. de Melo, and A. A.F. Loureiro, “Combining spatial and social awareness in D2D opportunistic routing,” IEEE Commun. Mag., vol. 56, no. 1, pp. 128-135, Jan. 2018.
[9] R. Rashtchi, R. H. Gohary, and H. Yanikomeroglu, “Conjoint routing and resource allocation in OFDMA-based D2D wireless networks,” IEEE Access, vol. 6, pp. 18868-18882, Mar. 2018.
[10] P. Ren, Q. Du, and L. Sun, “Interference-aware routing for hop-count minimization in wireless D2D networks,” Proc. IEEE Int’l Workshop Internet of Things, pp. 65-70, Xi’an, China, Aug. 2013.
[11] C. A. Balanis, Antenna Theory: Analysis and Design, WileyInterscience: Hoboken, USA, 2005.
[12] A. S. Tanenbaum, Computer Networks, 5th Ed., Prentice Hall: Upper Saddle River, USA, 2011.

172

