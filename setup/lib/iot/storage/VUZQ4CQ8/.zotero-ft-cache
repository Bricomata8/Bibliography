TP	  IMS	  	  
(IP	  Multimedia	  Subsystem)	  
	  
	  
	  
I. Préparation	  de	  l’environnement	  
	   -­‐ Ouvrir	  un	  terminal	  et	  lancer	  l’image	  virtuelle	  par	  la	  commande	  
$ Vbox OpenIMS -­‐ Login	  :	  root	  -­‐	  Password	  :	  pqsszord	   -­‐ Configurer	  le	  clavier	  français	  
o Aller	  à	  System	  à	  Preferences	  à	  Keyboard	  à	  Layouts	  à	  Add	  à	  Country	  =France	  à	   Add	  à	  Choisir	  «	  France	  »	  comme	  «	  Default	  »	  à	  Close	  
-­‐ Ajouter	  la	  translation	  Nom	  DNS	  -­‐	  Adresse	  IP	  pour	  le	  PCSCF	   o Ouvrir	  un	  Terminal	   o $ echo 127.0.0.1 pcscf.open-ims.test >> /etc/hosts o $ ping pcscf.open-ims.test
-­‐ Changer	  le	  contenu	  du	  fichier	  /etc/resolv.conf	  comme	  suivant	  :	   nameserver 127.0.0.1 search open-ims.test domain open-ims.test
-­‐ Ovrir	  Wireshark,	  Capture	  à	  Interfaces	  à	  lo	  (127.0.0.1)	  à	  Start,	  Filter	  =	  sip	   	   	  
II. Démarrer	  la	  plate-­‐forme	  IMS	  
	   -­‐ Ouvrir	  un	  Terminal	  
o /opt/OpenIMSCore/FHoSS/deploy/startup.sh	  	  	  	  (deploy	  FHoSS)	   o /opt/OpenIMSCore/bin/start.pcscf.sh o /opt/OpenIMSCore/bin/start.icscf.sh o /opt/OpenIMSCore/bin/start.scscf.sh o /opt/OpenIC/bin/start.Bob.sh	   -­‐ Ouvrir	  un	  autre	  terminal	   o /opt/OpenIC/bin/start.Alice.sh	  
	   	  
III. Analyser	  l’enregistrement	  d’utilisateur	  
	   -­‐ Dans	  le	  telephone	  de	  Bob	  
o >	  r	   o Analyser	  la	  capture	  des	  trames	  dans	  Wireshark	  
1	   	  

Question	  1	  :	  Faire	  un	  chronogramme	  des	  	  messages	  exchanges	  entre	  Bob	  et	  les	  différentes	   entités	  d’	  IMS	  durant	  l’enregistrement	  d’utilisateur.	   	  	   -­‐ Dans	  le	  telephone	  d’	  Alice	  
o >	  r	  	   o Analyser	  la	  capture	  des	  trames	  dans	  Wireshark	   Question	  2	  :	  Faire	  un	  chronogramme	  des	  	  messages	  exchanges	  entre	  Bob	  et	  les	  différentes	  entités	   d’	  IMS	  durant	  l’enregistrement	  d’utilisateur.	  
	  
IV. Analyser	  la	  signalisation	  d’appel	   	  
-­‐ Dans	  le	  téléphone	  d’Alice,	  appeler	  Bob	   o >	  c	  bob	   	  
-­‐ Dans	  le	  téléphone	  de	  Bob	   o Accepter	  l’appel	  par	  «	  yes	  0	  »	   o Attendre	  un	  peu	  	   o Arrêter	  l’appel	  par	  «	  hang	  0	  »	   o Analyse	  la	  capture	  
	   Question	  3	  :	  Faire	  un	  chronogramme	  des	  	  messages	  exchanges	  entre	  Bob	  et	  Alice	  pendant	   l’établissement	  d’appel	  et	  la	  terminaison	  d’appel.	   Question	  4	  :	  Vérifier	  les	  concepts	  du	  protocole	  SIP	  par	  l’analyse	  des	  trames	  dans	  Wireshark	  (via,	   Max-­‐Forward,	  contact,	  transaction	  ID,	  etc.)	   	   	   	   	   	   	  
2	   	  

