See discussions, stats, and author profiles for this publication at: https://www.researchgate.net/publication/287210281
On the Coverage of LPWANs: Range Evaluation and Channel Attenuation Model for LoRa Technology
Conference Paper · December 2015
DOI: 10.1109/ITST.2015.7377400

CITATIONS
183
5 authors, including: Juha Petajajarvi University of Oulu 34 PUBLICATIONS 510 CITATIONS
SEE PROFILE
Antti Roivainen Keysight Technologies Finland Oy 29 PUBLICATIONS 449 CITATIONS
SEE PROFILE

READS
2,845
Konstantin Mikhaylov University of Oulu 69 PUBLICATIONS 875 CITATIONS
SEE PROFILE

Some of the authors of this publication are also working on these related projects: H2020 project P2P-SmarTest View project juha petäjäjärvi View project

All content following this page was uploaded by Konstantin Mikhaylov on 16 January 2016.
The user has requested enhancement of the downloaded file.

2015 14th International Conference on ITS Telecommunications (ITST)

On the Coverage of LPWANs: Range Evaluation and Channel Attenuation Model
for LoRa Technology

Juha Petäjäjärvi, Konstantin Mikhaylov, Antti Roivainen, Tuomo Hänninen
Centre for Wireless Communications DCE, University of Oulu, Finland {firstname.lastname}@ee.oulu.fi

Marko Pettissalo
Nokia Technologies Oulu, Finland
{firstname.lastname}@nokia.com

Abstract— In addition to long battery life and low cost, coverage is one of the most critical performance metrics for the low power wide area networks (LPWAN). In this work we study the coverage of the recently developed LoRa LPWAN technology via real-life measurements. The experiments were conducted in the city of Oulu, Finland, using the commercially available equipment. The measurements were executed for cases when a node located on ground (attached on the roof rack of a car) or on water (attached to the radio mast of a boat) reporting their data to a base station. For a node operating in the 868 MHz ISM band using 14 dBm transmit power and the maximum spreading factor, we have observed the maximum communication range of over 15 km on ground and close to 30 km on water. Besides the actual measurements, in the paper we also present a channel attenuation model derived from the measurement data. The model can be used to estimate the path loss in 868 MHz ISM band in an area similar to Oulu, Finland.
Keywords—IoT; LPWAN; WSN; coverage; range; car; boat; path loss exponent; path loss intercept;
I. INTRODUCTION
The interest of the industry towards the low power wide area networks (LPWAN) is gradually increasing. At a time, several competing technology providers are pushing their products into global markets. E.g., Sigfox, which operates both as the technology and a service provider for LPWAN, already today covers nine countries of the central Europe [1]. Another big players in the field are Long range (LoRa) alliance [2], which was officially established in Mobile World Congress 2015 and the Weightless special interest group [3]. Each of these organizations already has an own technology which has either been or about to be standardized. In addition to these proprietary or to be standardized LPWA technologies, telecom industry is driving towards Cellular IoT, specifically LTE-M Rel13 standard is targeted to be ready early 2016. Further optimizations on device cost, battery lifetime and coverage are introduced for LTE-M: lower bandwidth and thus lower data rate, longer paging times, reduced transmit power in addition to power spectral density improvement and repetition for coverage enhancements. In general, over LPWA technologies, future Cellular IoT can be seen having benefits also from mature worldwide standards with large number of vendors and

operators, robust inter-operability, features for security, policy for charging and managed quality of service.
Among the major applications foreseen for LPWAN are the automotive and intelligent transportation systems (fleet management, vehicle to infrastructure communication, smart traffic, real time traffic information to the vehicle, security and incident alerts and reporting,) and various metering cases (e.g., electricity, water and gas consumption monitoring, medical metering and alerts) as well as smart home (e.g., thermostat control and security systems) [4-5]. Although there is much in common between the traditional wireless sensor network (WSN) and an LPWAN, especially in respect to the requirements for networks and devices, there are few critical differences in their approaches. The first and the major difference is that unlike the traditional WSN which employ mesh or ad-hoc topology, all the current LPWAN technologies require setting up the base stations (concentrator/gateway) to serve the end-devices. The latter communicate only to the base stations, thus forming a star network around them. Depending on the technology, the coverage area of one base station may span over dozens of kilometers.
The three typical key challenges for LPWANs are [4]:  nodes should be cheap (chip price 1-2 €),  nodes should have lifetime of up to ten years when powered
from a battery (~2500 mAh) and  the distance between the base station and a node may
exceed 10 km.
Among these goals, probably the two former ones are most easy to reach. The presence of a stationary base station enables one to move all the complexity to its side, thus making the nodes sufficiently simple and cheap in mass production. The lifetime of ten years can be achieved by limiting the number of messages sent by each node per day, although this naturally limits the range of applications.
Therefore, in the current research we focus on the third problem, namely the coverage. For our study we have chosen the LoRa technology and conducted a set of real-life experiments using the commercially available hardware to define the coverage.

978-1-4673-9382-9/15/$31.00 ©2015 IEEE

55

2015 14th International Conference on ITS Telecommunications (ITST)

from the base station. In Class B, end devices have more receive windows in addition to the slots of Class A. Extra slots are scheduled by the base station which periodically transmits time synchronized beacons. Low-latency can be achieved in Class C where end devices continuously stay in receive, unless they need to transmit something. Implementation of Class B and C is optional. [7]

Fig. 1. The LoRa node mounted on the roof-rack of a car.
II. BASICS OF LORA TECHNOLOGY
For all three discussed LPWAN technologies, the long range of communication is achieved by using the sub-GHz radio bands and very low data rates to improve the sensitivity of receivers. Sigfox and Weightless utilize the ultra-narrow band radio signals [1-2]. This enables designing highly sensitive radio receivers and increases the number of available channels.
Meanwhile, the LoRa modulation is a proprietary spread spectrum method based on chirp spread spectrum modulation, which uses wideband linear frequency modulated pulses whose frequency increases or decreases over a certain amount of time. First of all, this makes LoRa resistant against multipath fading and Doppler effect. Also this improves receiver’s sensitivity due to the respective processing gain of the spread spectrum technology and gives tolerance to the frequency mismatch between a transmitter and a receiver. The chip rate is equal to the programmed bandwidth (chip-per-second-per-Hertz) and can take values of 125, 250 or 500 kHz. Moreover, the spreading factor (SF) for a LoRa link may be varied depending on the communication distance and desired on-air time. Since the spreading codes for different SFs are orthogonal, the simultaneous transmission in the same frequency channel using different SFs is possible. Interference problems are mitigated by employing the forward error correcting codes in combination with frequency hopping spread spectrum (FHSS). In total, ten channels with different bandwidths are available for LoRa in the EU 868-870 MHz ISM band [6].
The communication model targeted by LoRa assumes high asymmetry of the traffic with the dominance of uplink over downlink. The end devices may transmit on any supported channel at any time without using listen before talk (LBT). In practice, the channel should be selected in pseudo-random fashion honoring the duty cycle restrictions of frequency regulations. The LoRa MAC is divided into Classes that implement different functionalities. All LoRa end devices must support at least Class A functionality, i.e., each end device must open two receive slots after transmitting a packet which may be used to get an acknowledgement or receive the data

III. MEASUREMENT SETUP
The measurements took place in the city of Oulu, Finland, during 14 days in spring and summer of 2015 in different weather conditions. Population of Oulu is almost 200 000 and highest residential buildings are 12 floors high. There are no large differences in geographical elevation in the region so landform in mainly flat. Since the city is located at the sea shore and has several harbors with commercial freight and leisure traffic, part of the measurements was done on the water.
During all the measurements the position of the base station was fixed. An end device was operating on a moving car (or a boat for the measurements on water) and was periodically sending a packet to the base station. Each packet included a sequence number and GPS coordinates, which were used to estimate the packet loss rate and the position of a node respectively. During the on ground measurements the car was driven along the major roads following speed limits (40-100 km/h).
A. Base station
Kerlink’s LoRa IoT station was connected to the biconical D100-1000 antenna from Aerial [8], which is located at the University of Oulu antenna tower. The antenna is 24 m from sea-level, and provides 2 dBi gain over the band from 100 MHz to 1 GHz.
B. End device
As end devices in our measurements we have used LoRaMote, which are equipped with a Semtech SX1272 transceiver [9] with Planar-F type printed circuit board antenna. Firmware version programmed to the node was 3.1. Besides the SX1272 transceiver, each node included a receiver for GPS and a set of sensors. During the measurements, the nodes were powered by 9V batteries. For on-ground measurements, the node was attached to the roof-rack of the car as shown in Fig. 1, approximately at 2 m height of the ground. The node was attached to the radio mast of the boat in the measurements that took place in the sea, as shown in Fig 2.
Since the goal of the measurements was to find the maximum communication range, the nodes were configured to use the largest possible spreading factor, i.e. 12. This resulted in the over-the-air data rate of mere 293 bps, but improved the base station sensitivity to -137 dBm. The bandwidth of the LoRa signal was set to 125 kHz.

56

2015 14th International Conference on ITS Telecommunications (ITST)

TABLE I.

FREQUENCY CHANNELS AND REGULATIONS

fc [MHz] 868.100

Regulations [10]

Max. Tx power [dBm]

Spectrum access

14 dBm

1 % or LBT AFA

868.300

14 dBm

1 % or LBT AFA

868.500

14 dBm

1 % or LBT AFA

868.850

14 dBm

0.1% or LBT AFA

869.050

14 dBm

0.1% or LBT AFA

869.525

27 dBm

10% or LBT AFA

TABLE II.

RESULTS OF MEASUREMENTS WITH CAR

Range 0-2 km

Number of transmitted packets
894

Number of received packets
788

Packet loss ratio
12 %

2-5 km

1215

1030

15 %

5-10 km

3898

2625

33 %

10-15 km

932

238

74 %

Total

6813

4506

34 %

Fig. 2. The LoRa node mounted to the boat’s radio mast.
During the measurements, each node periodically transmitted to the base station a packet including a sequence number, node’s status and GPS coordinates. No mechanisms for delivery control and automatic retransmissions were used. The period of sending the packets was set to 5 seconds, although this packet rate has never been achieved due to the restrictions of the frequency regulations in the 868 MHz ISM band [10]. Depending on the band, the maximum duty cycle permitted if no LBT is used varies from 0.1 to 10%. Taking a conservative requirement (i.e., 1% duty cycle) it can be calculated that a node may be on a channel for only 36 s in an hour. If the size of the packet is, e.g., 50 bytes and the data rate is 293 bps, it takes 1.365 s to transmit a single packet. This also means that only 26 packets can be sent in such a channel in an hour. During the experiments, a node was randomly choosing between one of six channels to send each packet. The used channels and the respective restrictions from the EU frequency access regulations [10] are listed in Table I. Note, that each node automatically counts own on-air time for each radio channel and follows the imposed duty cycle restrictions.
The transmit power for a node was set to 14 dBm (25 mW). Although a node supports the transmit power of up to 20 dBm (100 mW), according to frequency regulation [9] such power is permitted for only one frequency channel, whilst 14 dBm can be used in any of six channels. Even though, the maximum transmit distance calculated with the Friis transmission equation for 14 dBm power gives us the theoretical range of more than 300 km.

TABLE III. RESULTS OF MEASUREMENTS WITH BOAT

Range 5-15 km

Number of transmitted packets
2998

Number of received packets
2076

Packet loss ratio
31 %

15-30 km

690

430

38 %

Total

3688

2506

32 %

IV. RESULTS
A radio signal heat map laid on the satellite image of the Oulu region is presented in Fig. 3. The received radio power of the packets originating from different points was used to generate the heat map. The heat map was made using Google Maps JavaScript API. The five circles are centered at the position of the base station in the University of Oulu and divide the area in five zones, namely 0-2 km, 2-5 km, 5-10 km, 10-15 km and 1530 km.
Tables II and III show the total number of transmitted packets, the number of received packets and the packet loss ratio for the node installed on a car and on a boat, respectively. Note, that the total number of packets transmitted during the experiment campaign was in the order of 10 000. Definitely this is not enough to get the results which will be statistically meaningful. Unfortunately, the low data rate and limitations of the spectrum usage regulations on the duty cycle significantly hamper the measurements. Nonetheless, we think that even the presented results can be useful and provide insight into the capabilities and limitations of the LoRa technology.
The presented results reveal that within 2 km range from the base station, signal mostly exceeds -100 dBm. However, 12 % of the 894 transmitted packets were lost. Among the reasons which may have caused this are: a line of sight

57

2015 14th International Conference on ITS Telecommunications (ITST)

Fig. 3. Received signal strength from different locations in Oulu, Finland, centered at the location of the base station (PTX = 14 dBm, GRX = 2 dBi, R = 293 bps, hTX = 2m, hRX = 24m).

blockade by some obstacles and the interferences from other radio systems (note, that no packets originating from the LoRa devices other than the ones used for testing were ever received during the experiments). In the 2-5 km range, the packet loss

A. Data analysis
First, we used the measured received signal strength indicator (RSSI) to calculate path loss (PL)

ratio does not increase significantly and stayed below 15 %. For the measurements made on the ground, the amount of radio

PL  | RSSI | SNR  PTX  GRX

(1)

packets lost from a distance of 5-10 km was about one third. Finally, 74% of the packets transmitted from the ground from 10-15 km range were lost. Note, that few packets were also received from the distances exceeding 15 km (e.g., from Kempele area), but the communication at such distances is very opportunistic.

where SNR stands for the signal-to-noise-ratio, PTX is the effective isotropic radiated power and GRX is receiver’s antenna gain. The linear polynomial fit was used to derive the expected path loss from the measured data using logarithmic link distance. The expected PL is calculated as [11]

The starting point for the on-water measurements was in the harbor located 5.1 km southwest from the base station. The most distant point from which the communication on water was still possible was almost 30 km to the west from the base station. On water, in the 15-30 km range 62 % of the packets

EPL  B  10n log10 (d / d0 )

(2)

where B is the path loss, n is the path loss exponent, d is the distance between the node and the base station and d0 is the 1 km reference distance.

were successfully delivered. In the range of 5-15 km, success

The standard deviation (std) of shadow fading (SF)

rate was 69 %.

describes a deviation between measured PL and expected PL

and is calculated as follows

V. CHANNEL ATTENUATION MODEL In our measurements the LoRaMote was configured to hop

 SF  std(PL  EPL)

(3)

between six frequency channels listed in Table I. Since all used frequency channels are located within 1.4 MHz band and for B. Results

all the channels only few thousands of packets were received, we decided not to come up with the channel attenuation model for each particular channel, but to make a model for the mean frequency, i.e. 868.67 MHz. The proposed model can be used for briefly estimating the communication distance for LoRa technology in the areas similar to Oulu.

Fig. 4 and Fig. 5 show the measured path loss (marked with black dots) and the expected path loss (solid red curve) for onground and on-water cases, respectively. For reference, the free space path loss is shown with dashed blue curve. Note that the presented results were obtained for the uplink connection, i.e.

58

2015 14th International Conference on ITS Telecommunications (ITST)

TABLE IV.
Metric Path loss exponent (n) Path loss intercept (B) Shadow fading (σSF)

CHANNEL CHARACTERISTICS

Measurement scenario

Car

Boat

2.32

1.76

Free space 2.00

128.95 126.43

91.22

7.8 dB 8.0 dB

-

Fig. 4. Path loss for on-ground measurements.
Fig. 5. Path loss for on-water measurements.
for the data transfer from a node to the base station. Table IV lists the calculated path loss exponents and
intercepts for both cases. For the on-ground case the path loss exponent is larger than the free space path loss exponent. We expect that this may be caused by buildings and other obstacles blocking the path between the end device and the base station. When the node was in the boat and had basically free path to the base station, the path loss exponent equals to 1.76 and is below the exponent of the free space model.
VI. CONCLUSIONS Together with the long lifetime and low cost, the wide coverage is one of the most critical requirements for the LPWAN networks. In this paper we studied by the means of real-life measurements the coverage for the recently presented LoRa technology. The measurements were conducted using LoRaMote and Kerlink’s base station for a mobile node moving over the ground (on the roof-rack of a car) and over the water (on the radio mast of a boat). The base station was connected to an antenna located in antenna tower on the roof of

University of Oulu at a height of 24 m over the sea level. The LoRa node was configured to transmit using the maximum signal spreading factor to obtain the maximum range. The transmit power was set to 14 dBm (25 mW).
The reported results of the measurements show that on the ground on the distances up to 5 km the amount of successfully delivered packets exceeds 80%. More than 60% of the packets were received correctly at the distances of 5 to 10 km. On the distances exceeding 10 km the majority of sent packets were lost. On the water, almost 30 km communication range was reached with about 70% of the packets delivered successfully at the distances below 15 km. The channel attenuation model was derived from the presented measurements results. The model can be used by network providers to estimate the required base station density and may enable more accurate analysis of the LoRa performance.
In the future, we plan to continue the work in two directions. First we will provide a more detailed description of the LoRa technology, compare it with other perspective LPWAN technologies, and present the new results for LoRa scalability analysis in a journal paper format. Second, once other LPWAN radio solutions will become available, we plan to conduct similar measurements for them and compare their performance with the results obtained for LoRa.
REFERENCES
[1] Sigfox, http://www.sigfox.com/en/.
[2] LoRa alliance, https://www.lora-alliance.org/.
[3] Weightless, http://www.weightless.org/.
[4] Nokia, “Nokia LTE M2M - Optimizing LTE for the Internet of Things”, White paper, 2014.
[5] S. Andreev, O. Galinina, A. Pyattaev, M. Gerasimenko, T. Tirronen, J. Torsner, J. Sachs, M. Dohler, Y. Koucheryavy. “Understanding the IoT connectivity landscape: a contemporary M2M radio technology roadmap”, IEEE Com. Mag., vol. 53, issue 9, pp. 32 – 40, Sept. 2015.
[6] Semtech, “SX1272/3/6/7/8 LoRa Modem Design Guide, AN1200.13, Revision 1”, July 2013.
[7] Semtech, “LoRaWAN Specification v1.0”, Jan. 2015.
[8] Aerial, “Biconical antenna D100-1000”, brochure, http://aerial.fi/wpcontent/uploads/2014/08/aerial_special.pdf, Aug. 2014.
[9] Semtech, “SX1272/73 - 860 MHz to 1020 MHz low power long range transceiver”, datasheet, http://www.semtech.com/images/datasheet/ sx1272.pdf, March 2015.
[10] Finnish Communications Regulatory Authority, “15AH/2015M Määräys luvasta vapaiden radiolähettimien yhteistaajuuksista ja käytöstä”, Feb. 2015.
[11] P. Heino et al., “Deliverable D5.3, WINNER+ Final Channel Models V1.0, CELTIC CP5–026 WINNER+ Project”, http://projects. celtic-initiative.org/winner+/deliverables_winnerplus.html, June 2010.

View publication stats

59

