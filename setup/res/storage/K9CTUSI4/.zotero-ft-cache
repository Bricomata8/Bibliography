Proceedings of the IEEE ITSC 2006 2006 IEEE Intelligent Transportation Systems Conference Toronto, Canada, September 17-20, 2006

WA7.2

Trafﬁc-responsive signalling control through a modular/switching model represented via DTPN

Angela Di Febbraro and Davide Giglio

Abstract— Urban signalized trafﬁc areas are considered in this paper, with the aim of minimizing congestion situations via a trafﬁc-responsive signalling control procedure founded on a hierarchical Petri net (PN) representation of the system. The higher level of the PN representation consists of net modules, each one representing an intersection, a road, a signal staging, etc.; the description of each module in terms of deterministictimed Petri nets (DTPN) is given at the lower level. Such a representation leads to a corresponding two-level control procedure. The high-level control system, which acts over the modular representation, switches among internal module structures so as to modify some parts of the model of the trafﬁc system (e.g., signal plans, turning rates, etc.), depending on both state and time. The low-level control system, which acts over the DTPN representation, optimizes the performances of the trafﬁc system, by solving a mathematical programming problem which minimizes the number of vehicles in the system. In the paper, the adopted model of the signalized urban area is brieﬂy presented, and the two-level representation and the control system are described in details.
I. INTRODUCTION
Trafﬁc signalling control [1] of coordinated urban areas is often implemented in connection with two kinds of strategies. Fixed-time strategies consider a given time of a day and determine the optimal splits, the optimal cycle time, or even the optimal staging, based on historical values of trafﬁc demand in the considered area. On the contrary, trafﬁcresponsive strategies make use of real-time measurements to compute the suitable signal settings.
The control strategy here proposed belongs to this latter class, and is deﬁned with reference to a hierarchical PNbased representation of the trafﬁc area. In particular, two levels of representation are provided: the high-level representation consists of net modules, where each module represents an intersection, a road, a signal staging, etc.; the low-level representation is provided in terms of deterministic-timed Petri nets (DTPNs) [2]. A major advantage in using modules to build the DTPN representation of the system is the independence of the modules from their internal representation, that is, it is possible to obtain different low-level nets by simply switching the internal representation of a module from a certain structure (in terms of places, transitions, arcs, and tokens) to another one. The importance of this issue stands in the fact that the high-level representation maintains its validity throughout the day, whereas the low-level one
Angela Di Febbraro is with DIMSET – University of Genova, Via Montallegro 1, 16145 – Genova, Italy. angela.difebbraro@unige.it
Davide Giglio is with DIST – University of Genova, Via Opera Pia 13, 16145 – Genova, Italy. davide.giglio@unige.it

switches in order to take into account different signal plans, or different turning rates at intersections.
Such a “time-invariance” property of the high-level representation results to be fruitful for the relevant control system, which again consists of two parts. A high-level control system switches among the internal module representations in order to modify the representation of the trafﬁc system according to the system state, that is, the state of the DTPN, and/or based on some external variables; a low-level control system optimizes the performances of the trafﬁc system by solving a mathematical programming problem which minimizes the number of vehicles in the considered area, that is, the number of tokens in the DTPN. The decision variables of the optimization problem are the area stages, that is, the time intervals during which a given combination of green and red lights does not change in a signalized area with several trafﬁc signals. The optimization is accomplished over the low-level representation of the trafﬁc area.
II. THE SIGNALIZED TRAFFIC AREA
The trafﬁc area consists of nI intersections Ii, i = 1, . . . , nI, and nR roads R j, j = 1, . . . , nR. Each road is characterized by its number of lanes s j and its capacity c j, that is, the maximum number of vehicles which can stay at once in the road itself. Let R j(k), k = 1, . . . , s j, be the k-th lane in road R j. Moreover, eastbound and westbound directions, as well as southbound and northbound, are separately considered, that is, each direction is modelled by a road. An example of a trafﬁc area which includes 2 intersections and 12 roads is in Fig. 1.
Let IN(Ii) and OUT (Ii) be the sets of incoming roads and outgoing roads, respectively, of intersection Ii. A turning rate value α j(k),l(h), with 0 ≤ α j(k),l(h) ≤ 1, is associated with each ordered pair (R j(k), Rl(h)), with R j ∈ IN(Ii), k = 1, . . . , s j, and Rl ∈ OUT (Ii), h = 1, . . . , sl. Such a value expresses the percentage of vehicles coming from the k-th lane in road R j, that is R j(k), and going to the h-th lane in road Rl, that is Rl(h). A value α j(k),l(h) = 0 means that direction Rl(h) is forbidden for vehicles coming from R j(k), whereas α j(k),l(h) = 1 represents a mandatory direction. To guarantee the ﬂow conservation, the condition ∑l:Rl∈OUT (Ii) ∑shl=1 α j(k),l(h) = 1, ∀ R j ∈ IN(Ii), ∀ k = 1, . . . , s j, must always be veriﬁed for any signalized intersection Ii. In multi-lane roads, vehicles are allowed to change lane according to the relevant trafﬁc rules. In this connection, let β j(k) be the percentages of vehicles, with 0 ≤ β j(k) ≤ 1, which exit from road R j using lane R j(k), k = 1, . . . , s j. Obviously, it must be ∑sk=j 1 β j(k) = 1, ∀ R j : s j > 1.

1-4244-0094-5/06/$20.00 ©2006 IEEE

1430

In order to model the behaviour of vehicles when crossing
an intersection, the whole intersection area is divided into
a ﬁnite number of parts (crossing sections), so as to take
into account the physical space that a vehicle crossing
the intersection occupies [2]. In this connection, let CSi,q, q = 1, . . . , Qi, be the q-th crossing section of signalized intersection Ii. The number of crossing sections within an intersection mainly depends on the geometry of the intersec-
tion itself (as an example, intersection I1 in Fig. 1 is divided into 8 crossing sections whereas I2 in only 4). The choice of using crossing sections allows an efﬁcient management of macroscopic entities (turning rates α j(k),l(h) and percentages β j(k)) within a microscopic representation tool (the DTPN).

R12(1)

R7(1) R8(1)

R1(1) R1(2) R2(2) R2(1)

I1 S1,1 S1,5 S1,2 S1,6 S1,3 S1,7 S1,4 S1,8

R6(1) R6(2) R5(2) R5(1)

I2 S2,1 S2,2 S2,3 S2,4

R11(1) R11(2) R10(2) R10(1)

N

W

E

S

R9(1)

R4(1) R3(1)

Fig. 1. An urban trafﬁc area.
A multi-stage trafﬁc signal can be associated with a signalized intersection. All trafﬁc signals in the considered trafﬁc area are here grouped in a ﬁnite number V of signalized areas SAv, v = 1, . . . ,V . For each signalized area, one or more stage speciﬁcations can be deﬁned (as usually is in real trafﬁc systems). In this connection, let the h-th stage speciﬁcation, h = 1, . . . , Hvs, of the v-th signalized area, v = 1, . . . ,V , consist of Fv,h “area” stages, namely ψv,h, f , f = 1, . . . , Fv,h. The duration of each area stage is not ﬁxed, but constrained between a lower and an upper bound. Then, it can change in order to differently split the cycle, according to the trafﬁc conditions. However, a default value ψv,h, f is also associated with stage f of stage speciﬁcation h of the v-th signalized area, v = 1, . . . ,V , h = 1, . . . , Hvs, f = 1, . . . , Fv,h. On the contrary, the cycle time of each signalized area, and of each stage speciﬁcation, is assumed to be constant and equal to the ﬁxed value C, that is, a global cycle time exists in the proposed model (different cycle times could be considered by assuming decentralized control systems, each one acting on a given signalized area). Then, the following constraint must hold for any possible area stage speciﬁcation: ∑Ffv=,h1 ψv,h, f = C, v = 1, . . . ,V , h = 1, . . . , Hvs. For a detailed description of the model, the reader can refer to [2].
III. THE MODEL REPRESENTATION
The signalized trafﬁc area is microscopically represented by means of deterministic-timed Petri nets (DTPNs) [2]. The overall Petri net, namely, the DTPNo, is obtained by merging, through a suitable procedure (not reported here for the sake of brevity), the three following distinct nets:

• the DTPNa, representing signalized intersections and

roads. Tokens within such a net model either vehicles

in the urban area, or the availability of crossing sec-

tions within an intersection, or the available room of

roads. Such a net includes both immediate and timed

transitions: a timed transition represents the event of

traversing a crossing section, or the event of travelling

across a road; the ﬁring time of timed transitions is

assumed ﬁxed and represents the average time necessary

to traverse a crossing section or to travel across a

road. Note that, the DTPNa presents several conﬂicts

necessary to model all the allowed vehicle drivers’

behaviours in the trafﬁc system;

• the DTPNs, representing the staging of signalized areas.

Such a net models all the area stages, and includes

both immediate and timed transitions. A timed transition

represents the event of being in a speciﬁc area stage, that

is, the ﬁring time of a timed transition coincides with

the length of that area stage. The ﬁring time of such

timed transitions is not ﬁxed and ranges in the interval

[dmj in, dmj ax],

where

d

min j

and

dmj ax

are,

respectively,

the

minimum and the maximum green time of the area stage

represented by that timed transition. In this net, some

places are connected with certain immediate transitions

of the DTPNa, so that vehicles entering the intersections

act in accordance with green and red lights;

• the DTPNc, representing macroscopic entities manage-

ment. Such a net solves conﬂicts which are in the DTPNa, according with turning rates α or percentages

β . This is accomplished by connecting certain places of the DTPNc with certain conﬂicting transitions of the

DTPNa, thus preventing the ﬁring of one between two

or more conﬂicting transitions. Such a net only includes

immediate transitions.

A. High-level representation
The DTPN representing the trafﬁc area can be considered as composed of a ﬁnite number of DTPN-modules, each one intended to the representation of a particular element of the model (an intersection, a road, a signalized area, and so on). A DTPN-module is a DTPN itself, which may be regarded as delimited by some of its immediate intersections, which are named bound transitions. In this connection, a DTPN-module interacts with the other modules in the overall representation via its bound transitions, that is, each bound transition of a certain module coincides with one (or more than one) bound transition of another module. A formal deﬁnition of DTPN-module is the following.
Deﬁnition 1: A DTPN-module (NM) is a couple {B, I, F} where B is a ﬁnite set of p “bound” transitions, p > 0, I is the “internal representation” of the module, that is, a DTPN {P, T, Pre, Post, D, M0}, and F ⊂ (B × I) ∪ (I × B) is a set of directed arcs between the bound transitions and the internal representation.
In the considered trafﬁc model representation, ﬁve kinds of DTPN-modules are present, namely:

1431

NMa8,R NMc1,,C1 S

NMa7,R NMc1,,C5 S

NM2c,,C1 S

NMa1,2R

NMc1,,C2 S NMc1,R NMa1,R NMc2,R NMa2,R

NMc1,,C6 S

NMc6,R

NMc2,,C2 S

NMa1,I

NMa5,R NMa6,R

NMa1,1R NMc1,1R

NMa2,I

NMa1,0R NMc1,0R

NMc1,,C3 S NMc1,,C4 S

NMc1,,C7 S NMc1,,C8 S

NMc5,R

NMc2,,C3 S NMc2,,C4 S

NMa3,R

NMa4,R

NMs1

NMa9,R

Fig. 2. The high-level representation of the signalized trafﬁc area in Fig. 1.

• modules representing intersections: NMai ,I is the DTPNmodule representing Ii, i = 1, . . . , nI;
• modules representing roads: NMaj,R is the DTPNmodule representing R j, j = 1, . . . , nR;
• modules representing signalized areas: NMsv is the DTPN-module representing SAv, v = 1, . . . ,V ;
• modules representing the management of turning rate values associated with crossing sections: NMci,,qCS is the DTPN-module managing turning rate values in CSi,q, i = 1, . . . , nI, q = 1, . . . , Qi;
• modules representing the management of exiting percentages of roads: NMcj,R is the DTPN-module managing exiting percentages in R j, j : s j > 1, j = 1, . . . , nR.
The DTPNa, the DTPNs, and the DTPNc can be deter-
mined by suitably merging the modules (the details about
the merging procedure are here omitted for brevity). In particular, the DTPNa can be determined through a procedure f a which suitably merges modules NMai ,I, i = 1, . . . , nI, and NMaj,R, j = 1, . . . , nR, that is

DTPNa = f a NMai ,I, i = 1, . . . , nI, NMaj,,Rh , j = 1, . . . , nR (1)
In the same way, the DTPNs and the DTPNc can be determined by respectively merging modules NMsv, v = 1, . . . ,V , and modules NMci,,qCS, i = 1, . . . , nI, q = 1, . . . , Qi, and NMcj,R, j = 1, . . . , nR, that is

DTPNs = f s NMsv, v = 1, . . . ,V

(2)

DTPNc = f c NMci,,qCS, i = 1, . . . , nI, q = 1, . . . , Qi, NMcj,R, j = 1, . . . , nR

(3)

Finally, let Fo a procedure which builds the overall DTPN

representing the trafﬁc and transportation system, starting from nets DTPNa, DTPNs, and DTPNc, that is

DTPNo = Fo DTPNa, DTPNs, DTPNc

(4)

As an example, consider again the urban trafﬁc area in Fig. 1, which consists of 2 intersections and 12 roads (6 single-lane and 6 two-lanes roads). Intersection I1 has 8 crossing sections, whereas I2 has 4. Moreover, only one signalized area controls the trafﬁc ﬂows in the system. Then, the overall system can be represented by 33 DTPN-modules. By applying the merging procedures, the resulting module representation of the overall system is that of Fig. 2.

NMa1,I (a)

t12 t20

t36

p9

p7

p19

t13 t21

t26

p8

p20

t33

t14

p12

p10

p21

t11 t27
p22

t15

t22

t28

p11

p23

t7

t16 p15

p24 t29

t10

p25 p13

t23

t30

t17

p27

p14 t18 t8

p18 t31

p16

p28

p26 t35

t19 t24

t32

p17

p29

p30

t34

t25

t9

(b)

Fig. 3. (a) DTPN-module NMa1,I and (b) its internal representation (bound transitions are depicted as thick lines).

The module representing intersection I1, namely NMa1,I, has 22 bound transitions (see Fig. 3a), which interact with
the bound transitions of: the 8 modules representing the man-
agement of turning rate values associated with its crossing sections (NMc1,,CqS, q = 1, . . . , 8), the 4 modules representing its incoming roads (NMaj,R, j = 2, 4, 6, 8), the 4 modules

1432

NMc1,,C1 S (a)

p76

t78

t79

t80

t81

t82

t33

p78

p79

p80

p81

p82

p83

t83 p85

t84 p86

t85 p87

t86 p88

p77 t14 p84
t87 p89

(b)

Fig. 4. (a) DTPN-module NMc1,,C1S and (b) its internal representation.

representing its outgoing roads (NMaj,R, j = 1, 3, 5, 7), and

the module representing the adopted internal representation

soigf nNaMliza1e,IdisairneaFi(gN. M3bs1.).AsTahne

example of module representing the management of turning

rate values, the reader can refer to the module of Fig. 4 which

manages values associated with crossing section CS1,1. In

such a module, transitions t14 and t33 are alternately enabled

in order to force the ﬁring sequence t33t14t33t14t33, so that

transition t33 ﬁres in the 60% of the times, and t14 ﬁres in

the remaining 40% (obviously, by considering time intervals

long enough). An example of a module representing a road is in Fig. 5. Such a module (NMa6,R) represents the twolane road R6. It has 6 bound transitions, which interact with

two bound transitions of the module representing I1, that is, NMa1,I, with two bound transitions of NMa2,I, and with the two bound transitions of the module NMc6,R, which manages the exiting percentages β of such a road. Finally, the module in

Fig. 6 represents the signalized area SA1. In such a module,

bound transitions coincide with some of those transitions rep-

resenting I1 and I2. The stage speciﬁcation deﬁned through the internal representation of NMs1 (see Fig. 6b) consists of
ﬁve area stages: in the ﬁrst area stage, transitions t8, t11, and

t50 are enabled, so that vehicles approaching I1 from R2(1) and R6(1), and I2 from R12(1), ﬁnd green lights; in the second area stage, transitions t8, t11, t46, t47, t48, and t49 are enabled,

so that vehicles approaching I1 from R2(1) and R6(1), and I2 from R5(1), R5(2), R11(1), and R11(2), ﬁnd green lights; and so on. The durations of the ﬁve area stages are represented

through the ﬁring time (variable) of timed transitions t68, t70,

t72, t74, and t76.

A major advantage in using modules to build the DTPN

representing the overall system is the independence of the

modules from their internal representation, that is, their

bound transitions do not change whenever their internal

representations are modiﬁed. That results in the possibility

of providing, by means of the deﬁnition of different internal

representations of a same DTPN-module, different DTPNo

representing the overall system. In particular, in the proposed

approach, it is assumed that different internal representa-

tions exist for modules representing signalized areas, the

management of turning rate values associated with crossing

sections, and the management of exiting percentages of

roads, whereas only one internal representation is assumed

for modules representing intersections and roads (however,

different internal representations could be deﬁned also for

NMa6R (a)

c6

p38

t11

p5 t5

t63 p56

t58

p4 t4

p37

t64 p57

t10

(b)

t59

Fig. 5. (a) DTPN-module NMa6,R and (b) its internal representation.

modules NMai ,I and NMaj,R, so as to consider, for instance,

different travel times across a road or a crossing section). In

this

connection,

let

Hvs,

Hic,q,CS,

and

H

c,R j

be

the

number

of

internal representations provided for modules NMsv, NMci,,qCS,

and NMcj,R, respectively. Then, let

• NMsv,h, v = 1, . . . ,V , h ∈ {1, . . . , Hvs}, be the DTPN-

module representing SAv through the h-th internal rep-

resentation;

• NMci,,qC,hS, i = 1, . . . , nI, q = 1, . . . , Qi, h ∈ {1, . . . , Hic,q,CS},

be the DTPN-module representing the management of

turning rate values associated with CSi,q through the h-
th internal representation; • NMcj,,Rh , j = 1, . . . , nR, h ∈ {1, . . . , Hcj ,R}, be the DTPN-
module representing the management of exiting per-

centages of R j, j : s j > 1, through the h-th internal

representation.

In turn, the equations which provide DTPNs and DTPNc

are now functions of the internal representation h, that is, (2)

and (3) become

DTPNs = f s NMsv,h, v = 1, . . . ,V, h ∈ {1, . . . , Hvs} (5)

DTPNc = f c NMci,,qC,hS, i = 1, . . . , nI, q = 1, . . . , Qi,

h ∈ {1, . . . , Hic,q,CS},

(6)

NMcj,,Rh ,

j

=

1,

.

.

.

,

nR,

h

∈

{1,

.

.

.

,

H

c,R j

}

A different internal representation of a module representing the management of turning rate values or exiting percentages may represent different rate values or percentages. As an example, consider the net in Fig. 7. In such an internal representation, transitions t14 and t33 are alternately enabled, so as to force the ﬁring sequence t33t14t33t33t33t14t33t33t14t33, so that transition t33 ﬁres in the 70% of the times, and t14 ﬁres in the remaining 30%. Then, it is possible to adopt different internal representations in order to take into consideration different percentages to use, for instance, within particular day time intervals. Analogously, a different internal representation of a module representing a signalized area may be

1433

t8

t11

t7

t10

NMs1 (a)

t9

t12

t46 t47 t48 t49

t50

p71

p72

p73

p74

p75

p61 t68 p62 t69 p63 t70 p64 t71

t77 p70 t76 p69 t75 p68 t74 p67 t73 p66 t72 p65
(b) Fig. 6. (a) DTPN-module NMs1 and (b) its internal representation.

a time unit equal to one second, and, moreover, the slow dynamics of urban trafﬁc systems does not seem to require a shorter time unit. Then, a sampling interval equal to one second is adopted, even though a shorter interval, e.g., 1 millisecond, could be adopted, if necessary. The assumption of integrity allows the analytic representation of the DTPN system state evolution. The DTPN system state, at a given (integer) time instant, is represented by the joint information consisting of both the marking of the net and the residual ﬁring times of transitions. The state evolution takes place by considering alternately zero-length time intervals, in which only immediate transitions ﬁre, and one-second-length time intervals, in which only timed transitions ﬁre or “burn” one time unit of their ﬁring [3].
IV. THE TRAFFIC CONTROL
The characteristics of modularity proper to the proposed model allow to conceive a two-level trafﬁc control structure. The higher level acts by changing the model of the trafﬁc system whenever it moves to some speciﬁed condition, i.e., whenever the system state reaches a-priori ﬁxed threshold values (the model may also change when speciﬁc time instants are reached). In fact, such an event enables a suitable switching condition, which, in turn, makes the internal structures of some modules change accordingly. On the other hand, the lower level optimizes the performances of the trafﬁc system, represented by a DTPN-based model whose structure keeps ﬁxed at this level, since it can only be changed by the higher level. The performance optimization is carried out by solving a mathematical programming problem which minimizes the number of vehicles in the system itself.

p122 t33
p134

t116 p124

t117 p125

t118 p126

t119 p127

t120 p128

t121 p129

t122 p130

t123 p131

t124 p132

t125 p133

p123 t14 p135

CONTROL SYSTEM

TRAFFIC MODEL

time

High−level switching

modular

control system

DTPN

t126 p136

t127 p137

t128 p138

t129 p139

t130 p140

t131 p141

t132 p142

t133 p143

t134 p144

t135 p145

Low−level optimization control system

DTPN

system state

Fig. 7. Alternate internal representation for DTPN-module NMc1,,C1S.
used to adopt, within speciﬁc time intervals, a different area staging.
B. Low-level representation
The low-level representation of the signalized trafﬁc area can be obtained from the high-level one by simply substituting the modules with their own internal representations. The resulting net is a DTPN.
The low-level net dynamics is expressed by its state equations. The DTPN state equations can be written assuming that the ﬁring times of all timed transitions in the net are integer numbers with reference to a particular time unit δ (sampling interval). Such an assumption introduces a certain degree of approximation in the representation of a real trafﬁc system. However, trafﬁc signal plans are usually deﬁned adopting

# of vehicles entering the system

on−field devices
TRAFFIC SYSTEM

Fig. 8. The control system
The overall structure of the proposed trafﬁc control system is depicted in Fig. 8, where the interactions of the control system itself with both the trafﬁc model and the trafﬁc system are put into evidence.
A. High-level control system
The high-level control system deﬁnes the structure of the Petri net representing the trafﬁc model. In particular, the high-level control system provides the best internal representation of some Petri net modules on the basis of the current time instant and of the trafﬁc system state. The meaning of such a choice is to allow the trafﬁc system to

1434

switch from a set of signal stage speciﬁcations to another set, and to switch from a set of turning rates α and β to another

set, then making the DTPN representation valid during the

whole of the day (and not only during a speciﬁc time interval,

e.g., the morning peak hour, where stages and turning rates

are assumed ﬁxed).
Let δvs(τk), v = 1, . . . ,V , be the switching variable, at time instant τk, of the module representing the staging of the vth signalized area. Then, δvs(τk) assumes integer values 1 to Hvs. Such a variable determines which internal representation, among the Hvs available, has to be used during the (k + 1)th cycle. Moreover, let gsv, v = 1, . . . ,V , be the switching
function to apply to the marking of the DTPN and to the
time instant, in order to compute variable δvs(τk), that is

δvs(τk) = gsv Mo(τk), τk

v = 1, . . . ,V

(7)

Analogously,

δic,q,CS(τk) = gci,,qCS Mo(τk), τk

i = 1, . . . , nI (8)

δ jc,R(τk) = gcj,R Mo(τk), τk

j = 1, . . . , nR (9)

The structures of switching functions are not reported in this paper. However, the DTPN is now a time-dependent system (more speciﬁcally, a switching system). Then, equations (5), (6), and (4) are respectively replaced by the following

DTPNs(τk) = f s NMsv,δvs(τk), v = 1, . . . ,V

(10)

DTPNc(τk) = f c NMci,,qC,δSic,q,CS(τk), i = 1, . . . , nI , q = 1, . . . , Qi, NMcj,,Rδ jc,R(τk), j = 1, . . . , nR (11)

DTPNo(τk) = Fo DTPNa, DTPNs(τk), DTPNc(τk) (12)

The net deﬁned by (12) is the DTPN considered by the low-level control system, in the time interval [τk, τk+1), to optimize the lengths of stages.

B. Low-level control system
In the proposed model of an urban area, the duration of area stages may vary according with trafﬁc conditions. This is modelled by deterministic-timed transitions of the DTPNs, whose ﬁring times may range within a given interval. In this connection, the objective of the low-level control system is to solve an optimization problem which determines the optimal stages (that is, the optimal ﬁring times in the DTPNs).

k−th cycle
τ k−1
input parameter
count phase

(k+1)−th cycle

(k+2)−th cycle

τk

τ k+1

optimization

optimal

algorithm

solution

computation

application

phase

phase

τ k+2

Fig. 9. Schematization of the optimization of area stages

Assume that the number of vehicles which enter the considered area, in the time interval [τk−1, τk) (k-th cycle), can be counted (through, for instance, suitable counter devices

such as electromagnetic induction loops and/or visual recognizers). This represents the input parameter count phase (Fig. 9). Moreover, assume that the trafﬁc system dynamics is “slow” (such an hypothesis is usually fulﬁlled by urban trafﬁc systems), then such a number can be considered to be an estimate of the number of the vehicles which will enter the considered area in the subsequent time interval, that is, in [τk, τk+1) ((k + 1)-th cycle). Then, at τk, it is possible to set the ﬁring time of “input” (or “source”) transitions (in the proposed Petri net representation, an input transition is a timed transition having no incoming arcs), so that the number of tokens generated by their ﬁrings during the time interval [τk, τk+1) is equal to the number of counted vehicles during the interval [τk−1, τk).
The optimal area stages ψk◦,v,h, f , v = 1, . . . ,V , h = δvs(τk), f = 1, . . . , F, are determined in the time interval [τk, τk+1) through the solution of an optimization problem whose objective function minimizes the number of tokens within the net (note that, as the numbers of tokens within the DTPNs and the DTPNc are constant, it is sufﬁcient to minimize the number of tokens within the DTPNa), by optimizing the ﬁring times of the timed transitions of the DTPNs. This corresponds to minimize the number of vehicles which are in the area at the end of the considered time interval, that is, at τk+1, by suitably setting the lengths of stages. The value of the objective function is constrained by both the cycle length, and the DTPNo state equations (not reported here for the sake of brevity), initialized by the marking vector Mo(τk). This represents the optimization algorithm computation phase. Then, the computed optimal area stages are applied to the real system from time τk+1, that is, within the (k +2)-th semaphoric cycle, which is the optimal solution application phase. Note that, if the higher-level control system changes, at τk+1, one or more internal representations, then the computed optimal values can not be used, since they have been determined over a net which is no more the actual one; in this case, the default values for stages are adopted (see [4] for a detailed description of the control methodology).
V. CONCLUSIONS
In this paper, a two-level representation of urban signalized trafﬁc areas has been introduced and discussed in details. The high modularity of the proposed PN-based model turns out to be a valuable feature, since it makes possible to use the same modular/switching system to rule the trafﬁc ﬂows through the considered signalized intersections during the whole day.
REFERENCES
[1] M. Papageorgiou, C. Diakaki, V. Dinopoulou, A. Kotsialos, and Y. Wang, “Review of Road Trafﬁc Control Strategies,” Proceedings of the IEEE, vol. 91, no. 12, pp. 2043–2067, 2003.
[2] A. Di Febbraro and D. Giglio, “On representing signalized urban areas by means of deterministic-timed Petri-nets,” in Proc. IEEE ITSC’04, Washington, DC, USA, 2004, pp. 372–377.
[3] ——, “Trafﬁc-responsive signalling control through timed Petri nets,” in Proc. IFAC World Congress, Prague, Czech Republic, 2005.
[4] ——, “Urban trafﬁc control in modular/switching deterministic-timed Petri nets,” in Proc. IFAC Symposium on Control in Transportation Systems, Delft, The Netherlands, 2006.

1435

