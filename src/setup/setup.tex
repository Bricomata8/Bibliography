\usepackage{multirow}
\usepackage{tabulary}
\usepackage{tabularx}
\usepackage{pdfpages}
\usepackage{amsmath,amssymb,stmaryrd}   
\usepackage{anyfontsize}
\usepackage{multicol}
\usepackage{booktabs}
% \usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{listings}
\usepackage{wrapfig}
% \usepackage{placeins}
\usepackage{float}
\usepackage{algorithm2e}
\usepackage{longtable}

\usepackage{etoolbox}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{adjustbox}
\usepackage{siunitx}
\usepackage{enumitem}
\usepackage{subcaption}
\usepackage{url}
\usepackage{lscape,lipsum}
\usepackage{everypage}
\usepackage{eurosym} % euro s


\usepackage{bytefield}
  \newcommand{\y}[2]{\bitbox{#1}{#2}}


\usepackage{xparse}

\ExplSyntaxOn
\NewDocumentCommand{\xinput}{m}{%
  \azimut_xinput:n { #1 }
}

\ior_new:N \g_azimut_xinput_stream

\cs_new_protected:Nn \azimut_xinput:n
 {
  \ior_open:Nn \g_azimut_xinput_stream { "|ls ~ #1" }
  \ior_map_inline:Nn \g_azimut_xinput_stream { \file_input:n { \tl_trim_spaces:n {##1} } }
 }
\ExplSyntaxOff


\input{setup/setup_rgb}

\def\blue#1{\textcolor{beamer@blendedblue}{#1}}
\def\violet#1{\textcolor{violet}{#1}}
\def\yellow#1{\textcolor{yellow}{#1}}
\def\red#1{\textcolor{red}{#1}}
\def\green#1{\textcolor{green}{#1}}
\def\black#1{\textcolor{black}{#1}}

%\renewcommand{\arraystretch}{1.5}


\usepackage{array}
\usepackage{ragged2e}
% \usepackage{array}
% \newcolumntype{lj}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
% \newcolumntype{j}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
% \newcolumntype{rj}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{P}{@{\hspace{1pt}}>{\RaggedLeft}m{0.22cm}}



\newcommand\Mark[1]{\textsuperscript#1}
\def\res{../res}
\def\plot{setup/plot}

%\begin{figure}
%\begin{center}
%\begin{tabular}{cc}
%\resizebox{60mm}{!}{\includegraphics{test1.eps}} &
%\resizebox{60mm}{!}{\includegraphics{test2.eps}} \\
%\resizebox{60mm}{!}{\includegraphics{test3.eps}} &
%\resizebox{60mm}{!}{\includegraphics{test4.eps}} \\
%\end{tabular}
%\caption{This is sample figures.}
%\label{test4}
%\end{center}
%\end{figure}

\usepackage{pgfplots}
\usepackage{filecontents}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{patchplots}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{
	table/search path={\res/data/},
}
\usetikzlibrary{backgrounds}
\usetikzlibrary{graphs, graphs.standard, graphdrawing}

\newcommand{\shaded}[1]{\textcolor{gray!30}{#1}}
\usepackage{pifont}
	\newcommand{\ok}{\textcolor{green}{\ding{51}}}
	\newcommand{\ko}{\textcolor{red}{\ding{55}}}

\newcolumntype{?}{!{\vrule width 1pt}}

\newcommand\addchapter[1]{
	\addcontentsline{toc}{chapter}{#1}
}

\newcommand\Printbibliography[9]{
% \addcontentsline{toc}{chapter}{Bibliography}
\ifthenelse{\equal{\thepart}{0}}{}{\printbibheading}
\epigraph{"A quote in a speech, article or book is like a gun in the hands of a soldier. It speaks with authority."}{}
	\aghiles{#1}
	\aghiles{#2}
	\aghiles{#3}
	\aghiles{#4}
	\aghiles{#5}
	\aghiles{#6}
	\aghiles{#7}
	\aghiles{#8}
	\aghiles{#9}
	\printbibliography[heading=subbibliography,%
	notkeyword={#1},%
	notkeyword={#2},%
	notkeyword={#3},%
	notkeyword={#4},%
	notkeyword={#5},%
	notkeyword={#6},%
	notkeyword={#7},%
	notkeyword={#8},%
	notkeyword={#9},% 
	title=Others]
}


\usepackage{hyperref}
\hypersetup{
%	pdftex,
%	pdfpagemode=FullScreen,
    pdftoolbar=true,        % show Acrobat’s toolbar?
%    pdfborder={0 0 0},
    pdfmenubar=true,        % show Acrobat’s menu?
    pdffitwindow=true,     % window fit to page when opened
    pdfstartview={FitH},    % fits the width of the page to the window
%    pdftitle={title},    % title
%    pdfauthor={Salvatore Mazzarino},     % author
%    pdfsubject={Subject},   % subject of the document
%    pdfcreator={Salvatore Mazzarino},   % creator of the document
%    pdfproducer={Salvatore Mazzarino}, % producer of the document
%    pdfkeywords={Green Networking} {Mobile Cloud} {Network Coding} {Energy}, % list of keywords
    pdfnewwindow=true,      % links in new window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=beamer@blendedblue,          % color of internal links (change box color with linkbordercolor)
    citecolor=beamer@blendedblue,        % color of links to bibliography
    filecolor=beamer@blendedblue,      % color of file links
    urlcolor=beamer@blendedblue           % color of external links
}
    
%    hyperfootnotes=true,
%	breaklinks=true,
%	bookmarksopen=true,
%	backref=page

% sudo apt-get install biber
\usepackage[sorting=none,backref=false,backend=biber, doi=false,url=false,isbn=false, style=numeric]{biblatex}%sorting=nyt, sorting=rasha
%\usepackage[sorting=none,backref=true,backend=biber,sorting=rasha, doi=false,url=false,isbn=false, citetracker,pagetracker=page]{biblatex}%sorting=nyt
	%\setbeamertemplate{bibliography item}{\insertbiblabel}
	%Comme back from citation backref=true
	\addbibresource{/home/aghiles/Aghiles/Redaction/lib/iot.bib}%
	\addbibresource{/home/aghiles/Aghiles/Redaction/lib/iotbis.bib}%
	\addbibresource{/home/aghiles/Aghiles/Redaction/lib/privacy.bib}%
	% \addbibresource{/home/aghiles/Aghiles/Redaction/lib/privacybis.bib}
	\def\bibfont{\small}
	\DefineBibliographyStrings{english}{%
		backrefpage = {p.},% originally "cited on page"
		backrefpages = {p.},% originally "cited on pages"
	}
	% Define new format that applies a hypertext reference
	\DeclareFieldFormat{linked}{%
		\ifboolexpr{ test {\ifhyperref} and not test {\ifentrytype{online}}}{
			\iffieldundef{file}{
				\iffieldundef{url}{#1}{\href{run:\thefield{url}}{#1}}
			}{%
				\StrCount{\thefield{file}}{:}[\nbmatch]%
				\StrCut[\nbmatch]{\thefield{file}}{:}\strfirst\strsecond%
				\StrCount{\strfirst}{:}[\nbmatch]%
				\StrCut[\nbmatch]{\strfirst}{:}\strfirst\strsecond%
				\href[pdfnewwindow]{run:\strsecond}{#1}
%				\href{run:\thefield{file}}{#1}
			}
		}{#1}
	}
	% Based on generic definition from biblatex.def
	\renewbibmacro{title}{%
		\ifboolexpr{ test {\iffieldundef{title}} }{}{
			\printtext[title]{
				\printtext[linked]{\printfield[titlecase]{title}}
			}
			\newunit
		}%
		\printfield{titleaddon}%
	}
	% %
	% \DeclareSourcemap{
	%   \maps[datatype=bibtex]{
	%     \map[overwrite]{
	%        \step[fieldsource=groups,]
	%        \step[fieldset=keywords, fieldvalue={,}, append]
	%        \step[fieldset=keywords, origfieldval, append]
	%     }
	%   }
	% }

	\DeclareSourcemap{
	\maps[datatype=bibtex]{
			\map[overwrite=true]{
		       \step[fieldsource=groups,]
		       \step[fieldset=keywords, fieldvalue={,}, append]
		       \step[fieldset=keywords, origfieldval, append]
			}
		}
	}
	%
%	\DeclareSortingTemplate{rasha}{
%		\sort[direction=ascending]{
%			\field{year}}
%		\sort{\field{presort}}
%	}
	
	\newcommand{\aghiles}[1]{\printbibliography[heading=subbibliography, keyword={#1}, title={#1}]}

%Todo
\newcounter{todo}
\usepackage{tcolorbox}
	\newtcbox{\mytodobox}{colback=white,colframe=white!75!white}
\newcommand\todo[1]{
	\refstepcounter{todo}
	\mytodobox{\hypertarget{todo\thetodo}{#1}}
	\addcontentsline{tod}{subsection}{\protect\hyperlink{todo\thetodo}{\thetodo~#1}\par} }
\makeatletter
\newcommand\listoftodos{
	\@starttoc{tod}}
\makeatother

\usepackage{graphicx}
	\graphicspath{ {\res/} {\res/diagram/} {\res/icon/} {\res/plot/} {\res/stat/} {\res/tikz/} {\res/tmp/} {../plot/} }

\newcommand{\towFigure}[5]{
	\medskip
	\begin{figure}
		\includegraphics[width=#1\columnwidth]{#2} \\
		\includegraphics[width=#1\columnwidth]{#3}
		\caption{#5.}\label{fig:#4}
	\end{figure}
	\medskip
}

\newcommand{\towFigureT}[5]{
	\medskip
	\begin{figure}
		\includegraphics[width=#1\columnwidth]{#2} \\
		\includegraphics[width=#1\columnwidth]{#3}
		\caption*{\blue{Figure} \ref{fig:#4}: #5.}
%		\caption{#5.}\label{fig:#4}
	\end{figure}
	\medskip
}

\newcommand{\Figure}[4]{
	\begin{figure}[#1]
	\centering
	\includegraphics[width=#2\columnwidth]{#3}
	\caption{#4.}\label{fig:#3}
	\end{figure}
}

\newcommand{\Tickz}[4]{
	\medskip
	\begin{figure}[#1]
			\centering
			\begin{tikzpicture}[scale=#2,line width=1pt]
				\input{\plot/#3}
			\end{tikzpicture}
	\caption{#4.}\label{fig:#3}
	\end{figure}
	\medskip
}

\newcommand{\FigureS}[4]{
	\medskip
	\begin{figure}[#1]
	\centering
	\includegraphics[width=#2\columnwidth]{#3}
	\caption*{\blue{Figure \ref{fig:#3}:} #4.}
	\end{figure}
	\medskip
}

\newcommand{\FigureT}[3]{
	\medskip
	\begin{figure}[#1]
	\centering
	\includegraphics[width=#2\columnwidth]{#3}
	\end{figure}
	\medskip
}

\usepackage{subcaption}
	\captionsetup{justification=centering}
	\captionsetup[table]{skip=10pt}
%	\captionsetup{labelfont=it,textfont={bf,it},justification=centering}
	
\renewcommand{\thesubfigure}{\alph{subfigure}}
\renewcommand{\thefigure}{\arabic{figure}}

\newcommand{\FigureH}[8]{
%	\medskip
	\begin{figure}
		\centering
		\begin{subfigure}[#1]{#2\columnwidth}
			\centering
			\includegraphics[width=\columnwidth]{#3}
			\caption{#4.}\label{fig:#3}
		\end{subfigure}
		~ % \quad, \qquad, \hfill
		\begin{subfigure}[#1]{#2\columnwidth}
			\centering
			\includegraphics[width=\columnwidth]{#5}
			\caption{#6.}\label{fig:#5}
		\end{subfigure}
		
		\caption{#8.}\label{fig:#7}
	\end{figure}
%	\medskip
}

\newcommand{\FigureV}[8]{
%	\medskip
	\begin{figure}
		\centering
		\begin{subfigure}[#1]{\columnwidth}
			\centering
			\includegraphics[width=#2\columnwidth]{#3}
			\caption{#4.}\label{fig:#3}
		\end{subfigure}
		~ % \quad, \qquad, \hfill
		\begin{subfigure}[#1]{\columnwidth}
			\centering
			\includegraphics[width=#2\columnwidth]{#5}
			\caption{#6.}\label{fig:#5}
		\end{subfigure}
		
		\caption{#8.}\label{fig:#7}
	\end{figure}
%	\medskip
}

\newcommand{\TickzH}[9]{
%	\medskip
	\begin{figure}
	\begin{center}
		\begin{subfigure}[#1]{#2\columnwidth}
			\centering
			\begin{tikzpicture}[scale=#9,line width=1pt]
				\input{\plot/#3}
			\end{tikzpicture}
			\caption{#4.}\label{fig:#3}
		\end{subfigure}
		~ % \quad, \qquad, \hfill
		\begin{subfigure}[#1]{#2\columnwidth}
			\centering
			\begin{tikzpicture}[scale=#9,line width=1pt]
				\input{\plot/#5}
			\end{tikzpicture}
			\caption{#6.}\label{fig:#5}
		\end{subfigure}
		\caption{#8.}\label{fig:#7}
	\end{center}
	\end{figure}
%	\medskip
}

\newcommand{\TickzV}[8]{
%	\medskip
	\begin{figure}
		\centering
		\begin{subfigure}[#1]{\columnwidth}
			\centering
			\begin{tikzpicture}[scale=#2,line width=1pt]
				\input{\plot/#3}
			\end{tikzpicture}
			\caption{#4.}\label{fig:#3}
		\end{subfigure}
		~ % \quad, \qquad, \hfill
		\begin{subfigure}[#1]{\columnwidth}
			\centering
			\begin{tikzpicture}[scale=#2,line width=1pt]
				\input{\plot/#5}
			\end{tikzpicture}
			\caption{#6.}\label{fig:#5}
		\end{subfigure}
		
		\caption{#8.}\label{fig:#7}
	\end{figure}
%	\medskip
}


\newcommand{\Equation}[2]{
	\begin{equation}\label{eq:#1}
		#2
	\end{equation}
}

\newcommand{\EquationT}[2]{
	\begin{equation*}\tag{\ref{eq:#1}}
		#2
	\end{equation*}
}

\newcommand{\EquationS}[1]{
	\begin{equation*}
		#1
	\end{equation*}
}

% \newcommand{\Center}[1]{
% 	\begin{center}
% 		#1
% 	\end{center}
% }

\newcommand{\Itemize}[1]{
	\begin{itemize}
		#1
		\bigskip
	\end{itemize}
	\medskip
}

\newcommand{\Enumerate}[1]{
	\begin{enumerate}
		#1
		\bigskip
	\end{enumerate}
	\medskip
}

\newcommand{\Columns}[4]{
	\begin{columns}
		\begin{column}{#1\textwidth}
		#3
		\end{column}
		\begin{column}{#2\textwidth}
		#4
		\end{column}
	\end{columns}
}

\newcommand{\Table}[4]{
	\begin{table}[h!]
		\centering
		\begin{tabulary}{\textwidth}{#1}
			#4
		\end{tabulary}
		\caption{\label{table:#2} #3.}
	\end{table}
}

\newcommand{\TableT}[4]{
	\begin{table}[h!]
	\centering
		\begin{tabular}{#1}
			#4
		\end{tabular}
		\caption*{\blue{Table \ref{table:#2}:~} #3.}
	\end{table}
}

\usepackage{bytefield}


% \usepackage{enumitem}
% \setlistdepth{9}
% \setlist[itemize,1]{label=\violet{\ding{224}}}
% \setlist[itemize,2]{label=\violet{\ding{223}}}
% \setlist[itemize,3]{label=\violet{\ding{84}}}
% \setlist[itemize,4]{label=\violet{\Rightarrow}}
% \setlist[itemize,5]{label=\violet{$\gg$}}
% \setlist[itemize,6]{label=\violet{$\leadsto$}}


% % \setlist[itemize,1]{label=\violet{$\bullet$}}
% % \setlist[itemize,2]{label=\violet{$\bullet$}}
% % \setlist[itemize,3]{label=\violet{$\bullet$}}
% % \setlist[itemize,4]{label=\violet{$\bullet$}}
% % \setlist[itemize,5]{label=\violet{$\bullet$}}
% % \setlist[itemize,6]{label=\violet{$\bullet$}}
% \setlist[itemize,7]{label=\violet{$\bullet$}}
% \setlist[itemize,8]{label=\violet{$\bullet$}}
% \setlist[itemize,9]{label=\violet{$\bullet$}}
% \renewlist{itemize}{itemize}{9}

\usepackage{enumitem}
\setlistdepth{9}
\setlist[itemize,1]{label=\violet{\ding{224}}}
\setlist[itemize,2]{label=\violet{\ding{223}}}
\setlist[itemize,3]{label=\violet{\ding{84}}}
\setlist[itemize,4]{label=\violet{\Rightarrow}}
\setlist[itemize,5]{label=\violet{$\gg$}}
\setlist[itemize,6]{label=\violet{$\leadsto$}}
\setlist[itemize,7]{label=\violet{$\bullet$}}
\setlist[itemize,8]{label=\violet{$\bullet$}}
\setlist[itemize,9]{label=\violet{$\bullet$}}
\renewlist{itemize}{itemize}{9}


\AtBeginDocument{% ...if you're using hyperref
  \let\oldlabel\label% Copy original version of \label
  \let\oldref\ref% Copy original version of \ref
}

\newcommand{\addlabelprefix}[1]{%
  \renewcommand{\label}[1]{\oldlabel{#1-##1}}% Update \label
  \renewcommand{\ref}[1]{\oldref{#1-##1}}% Update \ref
}
\newcommand{\removelabelprefix}{%
  \renewcommand{\label}{\oldlabel}% Restore \label
  \renewcommand{\ref}{\oldref}% Restore \ref
}

% Accronime et abriviation
\usepackage{acro}
%first-long-format=\itshape
\acsetup{hyperref=true}
	\newcommand{\addac}[2]{
		\DeclareAcronym{#1}{
			short = \ensuremath{#1},
			long  = {#2},
			sort  = {#1},
			class = nomencl
		}
	}
	\newcommand{\addab}[2]{
		\DeclareAcronym{#1}{
			short = {#1} ,
			long  = {#2},
			sort  = {#1},
			class = abbrev
		}
	}
	
\input{setup/nomenclature}



% \usepackage[titles]{tocloft}
% \newlistentry[subparagraph]{subsubparagraph}{toc}{5}

%\newcounter{subsubparagraph}

% \titleclass{\subparagraph}{straight}[\paragraph]
% \titleclass{\subsubparagraph}{straight}[\subparagraph]

% \renewcommand{\thesubparagraph}{\arabic{paragraph}.\arabic{subparagraph})}
% \renewcommand{\thesubsubparagraph}{\Alph{subsubparagraph})}

% \titleformat*{\subparagraph}{\normalfont\color{violet}}
% \titleformat{\subsubparagraph}[runin]{\normalfont\normalsize\bfseries}{\thesubsubparagraph}{1em}{}
% \titleformat*{\subsubparagraph}{\normalfont\color{violet}}


\newcommand{\compresslist}{%
    \setlength{\itemsep}{0pt}%
    \setlength{\parskip}{1pt}%
    \setlength{\parsep}{0pt}%
}


% \usepackage{lmodern}
% 	\selectcolormodel{cmyk}


\def\d{$\downarrow$}
\def\u{$\uparrow$}
