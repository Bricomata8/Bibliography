\usepackage{fourier} % txtbf

\usepackage{hyperref}
% \hypersetup{pdfpagemode=FullScreen}

\setbeamertemplate{bibliography item}{\insertbiblabel}
	
% Beamer
\usetheme{default}
\usecolortheme{default}
\usefonttheme{default}

% Video
\usepackage{multimedia}
\RequirePackage{luatex85}

\usepackage{scrextend}
	\changefontsizes{7.5pt}

%Notes
\usepackage{pgfpages}
\usepackage{palatino}
	\setbeamertemplate{note page}{\pagecolor{lightgray!40}\insertnote}

	\AtBeginNote{
		\hspace*{-20pt}\addtolength\leftmargini{-20pt}
%		\let\itemize\enumerate
%		\let\enditemize\endenumerate
	}
	
%% Foot note
%\makeatletter
%\def\@makefnmark{\hbox{{{%
%	\usebeamercolor[fg]{footnote mark}%
%	\usebeamerfont{footnote mark}%
%	\black{[}\blue{\@thefnmark}\black{]}}%
%}}}
%\def\@makefntext#1{%
%	\def\insertfootnotetext{ #1}%
%	\def\insertfootnotemark{\@makefnmark}%
%	\usebeamertemplate***{footnote}%
%}
%\makeatother

%\setbeamertemplate{bibliography item}{\insertbiblabel}

\makeatletter
\newcommand*{\mkblankfootnote}[1]{%
\begingroup
\renewcommand\thefootnote{}%
\footnotetext{\bibfootnotewrapper{#1}}%
\endgroup
}
\newcommand*{\mkbibsupercite}[1]{%
\def\cbx@savedcites{\cbx@footfullcite}%
%\mkbibsuperscript{\mkbibbrackets{#1}}%
%\blue{\mkbibbrackets{#1}}%
\mkbibbrackets{#1}%
\cbx@savedcites%
}
\DeclareCiteCommand{\supercite}[\mkbibsupercite]
{\gdef\cbx@savedkeys{}}
{\usebibmacro{citeindex}%
\usebibmacro{cite}%
{}%
\xappto\cbx@savedkeys{\thefield{entrykey},}}
{\supercitedelim}
{\protected@xappto\cbx@savedcites{%
[\thefield{prenote}][\thefield{postnote}]{\cbx@savedkeys}}}

\DeclareCiteCommand{\cbx@footfullcite}
{}
{\mkblankfootnote{%
\printtext[labelnumberwidth]{%
\usebibmacro{cite}%
}%
\setunit{\addspace}%
\usedriver
{\DeclareNameAlias{sortname}{default}}
{\thefield{entrytype}}}}
{}
{}
\makeatother

\renewcommand\footcite[1]{\footfullcite{#1}}
%\renewcommand{\thefootnote}{\arabic{footnote}}
\setbeamercolor{footnote}{fg=blue}
\setbeamercolor{footnote mark}{fg=blue}
\setbeamercolor{footline}{fg=blue}
\setbeamercolor{normal text}{fg=black,bg=white}
\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{example text}{fg=green!50!black}
\setbeamercolor{structure}{{fg=beamer@blendedblue}, bg=white}
\setbeamercolor{background canvas}{bg=white}
%\setbeamercolor{page number in head/foot}{fg=blue}

\setbeamerfont{footnote}{size=\tiny}
\setbeamerfont{footline}{series=\bfseries}
%\setbeamerfont{page number in head/foot}{series=\bfseries}

\setbeamertemplate{blocks}[rounded][shadow=true] 
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{caption}[numbered]
%\setbeamertemplate{footline}[frame number]
%\setbeamertemplate{background canvas}[vertical shading][top=structure.fg!05,bottom=structure.fg!90] 
\setbeamertemplate{section in toc}{\inserttocsectionnumber.~\inserttocsection}
\setbeamertemplate{subsection in toc}{\ \ \ \textcolor{beamer@blendedblue}{\inserttocsubsectionnumber.~\inserttocsubsection} \\}
\setbeamertemplate{frametitle continuation}{}

\setbeamertemplate{itemize item}{\textcolor{blue}{\ding{224}}}
\setbeamertemplate{itemize subitem}{\textcolor{blue}{\ding{223}}}
\setbeamertemplate{itemize subsubitem}{\textcolor{blue}{\ding{84}}}
\setbeamertemplate{itemize subsubsubitem}{\textcolor{blue}{\leadsto}}

%\setbeamertemplate{bibliography item}{\insertbiblabel}

\usepackage{algorithm2e}
\makeatletter
\setbeamertemplate{footline}{
	\leavevmode%
	\hbox{%
	\begin{beamercolorbox}[wd=.75\paperwidth,ht=2.25ex,dp=1ex,left]{author in head/foot}%
		\hspace{1em}
		\ifthenelse{\equal{\@arabic\c@section}{0}}{}{\@arabic\c@section .~\insertsectionhead}
		\ifx
			\insertsubsectionhead\@empty\relax
		\else$\quad\mid\quad$
			\@arabic\c@subsection.~ \insertsubsectionhead
		\fi
		\ifx
			\insertsubsubsectionhead\@empty\relax
		\else$\quad\mid\quad$
			\@arabic\c@subsubsection.~ \insertsubsubsectionhead
		\fi
		%\usebeamerfont{author in head/foot}\insertsection
	\end{beamercolorbox}%
%	\begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
%		\usebeamerfont{title in head/foot}\insertsubsection
%	\end{beamercolorbox}%
	\begin{beamercolorbox}[wd=.25\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
%		\usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
		\insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
	\end{beamercolorbox}}%
	\vskip0pt%
}
\makeatother

\setbeamersize{text margin left=2pt}
\setbeamersize{text margin right=2pt}
\setbeamersize{sidebar width left=2pt}
\setbeamersize{sidebar width right=2pt}

\addtobeamertemplate{navigation symbols}{}{
    \usebeamerfont{footline}%
    \usebeamercolor[fg]{footline}%
    \hspace{1em}%
    %\insertslidenavigationsymbol
	%\insertframenavigationsymbol
	%\insertsubsectionnavigationsymbol
	%\insertsectionnavigationsymbol
	%\insertdocnavigationsymbol
	%\insertbackfindforwardnavigationsymbol
	%\insertframenumber/\inserttotalframenumber
}

\defbeamertemplate{subsubsection in toc}{subsubsections numbered}{
	\leavevmode\leftskip=4.2em
	\normalsize{\rlap{
		\hskip-1.2em \textcolor{beamer@blendedblue}{\inserttocsubsubsectionnumber.}
	}}
	\textcolor{beamer@blendedblue}{\inserttocsubsubsection}\par
}
\setbeamertemplate{subsubsection in toc}[subsubsections numbered]

\defbeamertemplate*{background canvas}{mydefault}{
	\ifbeamercolorempty[bg]{background canvas}{}{\color{bg}\vrule width\paperwidth height\paperheight}
}

\defbeamertemplate*{background canvas}{bg}{
	\color{lightgray!40}\vrule width\paperwidth height\paperheight
}

\BeforeBeginEnvironment{frame}{
	\setbeamertemplate{background canvas}[mydefault]
	\setbeamercolor{frametitle}{bg=white}
}

\makeatletter
\define@key{beamerframe}{bg}[true]{
	\setbeamertemplate{background canvas}[bg]
	\setbeamercolor{frametitle}{bg=lightgray!40}
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\tableofcontent}{
	\setcounter{tocdepth}{4}
	\setcounter{secnumdepth}{4}
	\begin{frame}[plain,noframenumbering]{Outline}{}
		\begin{columns}
			\begin{column}{0.33\textwidth}
				\setlength{\parindent}{10pt}
				\tableofcontents[sectionstyle=shaded/show,subsectionstyle=hide/hide/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\setbeamertemplate{section in toc shaded}[default][0]
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=show/show/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=hide/hide/hide, subsubsectionstyle=show/show/hide]
			\end{column}
		\end{columns}
	\end{frame}
}

\newcommand{\transitionsection}{
	\setcounter{tocdepth}{4}
	\setcounter{secnumdepth}{4}
	\begin{frame}[plain,noframenumbering]{Outline}{}
		\begin{columns}
			\begin{column}{0.33\textwidth}
				\setlength{\parindent}{10pt}
				\tableofcontents[sectionstyle=show/shaded,subsectionstyle=hide/hide/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\setbeamertemplate{section in toc shaded}[default][0]
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=show/show/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=hide/hide/hide, subsubsectionstyle=show/show/hide]
			\end{column}
		\end{columns}
	\end{frame}
}

\newcommand{\transitionsubsection}{
	\setcounter{tocdepth}{4}
	\setcounter{secnumdepth}{4}
	\begin{frame}[plain,noframenumbering]{Outline}{}
		\begin{columns}
			\begin{column}{0.33\textwidth}
				\setlength{\parindent}{10pt}
				\tableofcontents[sectionstyle=show/shaded,subsectionstyle=hide/hide/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\setbeamertemplate{section in toc shaded}[default][0]
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=show/shaded/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=hide/hide/hide, subsubsectionstyle=show/show/hide]
			\end{column}
		\end{columns}
	\end{frame}
}

\newcommand{\transitionsubsubsection}{
	\setcounter{tocdepth}{4}
	\setcounter{secnumdepth}{4}
	\begin{frame}[plain,noframenumbering]{Outline}{}
		\begin{columns}
			\begin{column}{0.33\textwidth}
				\setlength{\parindent}{10pt}
				\tableofcontents[sectionstyle=show/shaded,subsectionstyle=hide/hide/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\setbeamertemplate{section in toc shaded}[default][0]
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=show/shaded/hide, subsubsectionstyle=hide/hide/hide]
			\end{column}
			\begin{column}{0.33\textwidth}
				\tableofcontents[sectionstyle=shaded/hide,subsectionstyle=hide/hide/hide, subsubsectionstyle=show/shaded/hide]
			\end{column}
		\end{columns}
	\end{frame}
}

\AtBeginSection[]{\transitionsection}
\AtBeginSubsection[]{\transitionsubsection}
\AtBeginSubsubsection[]{\transitionsubsubsection}

\usepackage{multicol}
	\newcommand{\alltableofcontent}{
		\begin{frame}[plain,noframenumbering]{Outline}
			\setlength{\parindent}{10pt}
			\begin{multicols}{2}
				\tableofcontents[sectionstyle=show/show,subsectionstyle=show/show/show, subsubsectionstyle=show/show/show]
			\end{multicols}
		\end{frame}
	}

\newcommand{\firstpage}{
	\begin{frame}[plain,noframenumbering]
		\titlepage
			\note[item]{
				Good morning every one, ladies and gentlemen, distinguished guests and supervisors.
				\begin{itemize}
					\item Thank you all for your presence.
					\item ...
				\end{itemize}
			}
		
			\note[item]{My name is DJOUDI Aghiles
				\begin{itemize}
					\item I am a Phd student at Paris-est university and particularly at ESIEE school.
					\item ...
				\end{itemize}
			}
			
			\note[item]{My talk is gonna be on ...
			}
			
			
	\end{frame}
}

\newcommand{\frameBibliography}{
	\newcounter{framenumberappendix}
	\setcounter{framenumberappendix}{\value{framenumber}}

	\begin{frame}[allowframebreaks, plain, noframenumbering]{References}
		\changefontsizes{4pt}
%		\addcontentsline{toc}{chapter}{Bibliography}
		%\printbibheading
		
%		\aghiles{Privacy score}
%		\aghiles{Trust score centrality}
%		\aghiles{Trust score propagation}
%		\aghiles{Trust score capital}
%		\aghiles{Trust score classification}
%		\aghiles{Trust score collaborative}
%		\aghiles{Trust score services}
%		\aghiles{Trust score survey}
%		\aghiles{Trust score visibility}
%		\aghiles{Trust score inference}
%		\aghiles{Trust score divers1}
%		\aghiles{Trust score divers2}
		
		\printbibliography[heading=subbibliography,
%			notkeyword={Privacy score},
%			notkeyword={Trust score centrality},
%			notkeyword={Trust score propagation},
%			notkeyword={Trust score capital},
%			notkeyword={Trust score classification},
%			notkeyword={Trust score collaborative},
%			notkeyword={Trust score services},
%			notkeyword={Trust score survey},
%			notkeyword={Trust score visibility},
%			notkeyword={Trust score inference},
%			notkeyword={Trust score divers1},
%			notkeyword={Trust score divers2},
			title=Others
		]
	\end{frame}

	\addtocounter{framenumberappendix}{-\value{framenumber}}
	\addtocounter{framenumber}{\value{framenumberappendix}} 
}

\newcommand{\bey}[1]{
	\pause
	\begin{tikzpicture}[remember picture, overlay]
		\node[] at (24em, 0ex) {\color{blue!100}\Huge#1};
	\end{tikzpicture}

	% \center{\Huge{Thank you !}}
}

\newcommand{\stamp}[1]{
	\onslide<2->{
	\begin{tikzpicture}[remember picture, overlay]
		\node[draw=red, rotate=30] at (24em, 30ex) {\color{red!90}\huge #1};
	\end{tikzpicture}
	}
}

