with special guest:

OpenWSN: Building the Internet of (Important) Things

Thomas Watteyne Inria-EVA

Xavier Vilajosana Universitat Oberta de Catalunya

Equipex FIT IoT-lab Workshop @ Inria-Lille

Grand Challenge

“A wireless network that performs like a wired network”

Determinism • <1ppm packet loss • <10ppm latency miss ratio • <100uA average current

Manageability • Flow isolation • Scheduling • Resource management

Ease of use • Off-the-shelf hardware • No installation • No programming

Industry 4.0, “Factory of the Future”, urban, building, environmental applications

Research Challenges • What are the limits (throughput, latency, reliability, power consumption)? • Which scheduling approach: Centralized? Distributed? Hybrid?

standardization

open-source implementation

large-scale experimentation

Equipex FIT IoT-lab Workshop @ Inria-Lille

2

1

Time Synchronized Channel Hopping

• Motes are synchronized

• Communication follows a schedule

• Schedule gives tunable trade-off between

• packets/second

• latency

…and energy consumption

• robustness

A

C

B

E

D

G

F

I

e.g. 33 time slots

H J
3

Equipex FIT IoT-lab Workshop @ Inria-Lille

3

16 channel offsets

We Want The Best of Both Worlds!

CoAP RPL 6LoWPAN

Ease-of-use of IPv6
• global addressing • web-like interactions

IEEE802.15.4e Time Slotted Channel Hopping

Industrial Performance
• wire-like reliability • “deploy and forget” lifetimes

Equipex FIT IoT-lab Workshop @ Inria-Lille

4

2

90% hardware independent

www.OpenWSN.org

• modular: • a port simply means implementing a new BSP (81 functions) • 11 platforms supported
• community-based: • 60+ direct contributors • catalyst for research around TSCH networks.
• Open-source (BSD license)

Internet

…

software

firmware

AApAppplpipclilacictaiaotitnoiosnn

CoAP

HTTP

UDP

TCP

RPL

6LoWPAN

6top (6TiSCH)

IEEE802.15.4e TSCH IEEE802.15.4 (PHY)
APplaptfliocramtison

Equipex FIT IoT-lab Workshop @ Inria-Lille

5

10% BSP

Architecture
Internet

DAGroot motes

OpenVisualizer

serial

software

firmware

Equipex FIT IoT-lab Workshop @ Inria-Lille

6

3

7
A

C

B

e.g. 33 time slots

E

D

G

F

I
H J

16 channel offsets

4

Synchronization

clocks drift (10ppm typical)

Periodic realignment (within a clock tick)

9

∆t

Architecture
board

mspgcc armgcc gcc
toolchain
OpenWSN Build System

project

binary scons board=<board> toolchain=<toolchain> <project>
10

5

OpenWSN ports

AApAppplpipclilacictaiaotitnoiosnn

CoAP

HTTP

UDP

TCP

RPL

6LoWPAN

6top (6TiSCH)

IEEE802.15.4e TSCH IEEE802.15.4 (PHY)
APplaptfliocramtison

10% BSP

90% hardware independent

OpenMote-CC2538

GINA

WSN430v13b

WSN430v14

Z1

TelosB

OpenMoteSTM SAM R21

IoT-LAB_M3

11

Equipex FIT IoT-lab Workshop @ Inria-Lille

AgileFox
11

OpenSim Emulator

AApAppplpipclilacictaiaotitnoiosnn

CoAP

HTTP

UDP

TCP

RPL

6LoWPAN

6top (6TiSCH)

IEEE802.15.4e TSCH IEEE802.15.4 (PHY)

APplaptfliocramtison

10% BSP

90% hardware independent

OpenVisualizer

propagation model

emulated mote … emulated mote

(Python extension module)

(Python extension module)

• same interface as real motes • omniscient debugging:
• see all packets (Wireshark) • see all pin activity (logic analyzer) • models: • clock • propagation/topology
scons board=python toolchain=gcc oos_openwsn
openVisualizerWeb.py --sim --simCount=3

Equipex FIT IoT-lab Workshop @ Inria-Lille

12

6

Internet Integration

AApAppplpipclilacictaiaotitnoiosnn

CoAP

HTTP

UDP

TCP

RPL

6LoWPAN

6top (6TiSCH)

IEEE802.15.4e TSCH IEEE802.15.4 (PHY)
APplaptfliocramtison

Internet

CoAP is the “HTTP for motes”

Equipex FIT IoT-lab Workshop @ Inria-Lille

13

OpenWSN on IoT-lab

https://openwsn.atlassian.net/wiki/display/OW/OpenWSN+on+IoT-LAB https://github.com/openwsn-berkeley/openwsn-on-iotlab

Equipex FIT IoT-lab Workshop @ Inria-Lille

14

7

OpenPi

OpenVM

openpi

• OpenVisualizer pre-installed on Raspberry Pi image • built nightly with latest OpenVisualizer
openpi.openwsn.org

• run with (free) vmware Player • all toolchains pre-installed
openvm.openwsn.org

Open Source Collaboration Tools

source code (GitHub)

documentation
openwsn.berkeley.edu

ticketing

continuous integration (Travis-CI and Jenkins-CI)

source code documentation

Equipex FIT IoT-lab Workshop @ Inria-Lille

16

8

{Open}Projects
• Entrepreneurial • Academic • Standardization

Equipex FIT IoT-lab Workshop @ Inria-Lille

17

OpenMote

OpenBattery

OpenBase

OpenBase

Open-Source Prototyping Platform for the Industrial IoT http://www.openmote.com/

Equipex FIT IoT-lab Workshop @ Inria-Lille

18

9

Univ. Science Tech. Beijing testbed

Tengfei Chang

Qin Wang

Equipex FIT IoT-lab Workshop @ Inria-Lille

19

Plugtests

IETF89, London, March 2014

IETF90, Toronto, July 2014

Equipex FIT IoT-lab Workshop @ Inria-Lille

20

10

6TiSCH/OpenWSN hackathon
19 July 2015, Prague

1. Distributed blacklisting for improving FHSS 7. 6TiSCH Scheduler-free prototype in Contiki

• Pedro Henrique Gomes (Univ. Southern

• Simon Duquennoy (SICS)

California)

8. Dust Networks/Linear Technology’s

2. 6top-to-6top 6TiSCH negotiation in OpenWSN

SmartMesh IP

• Tengfei Chang, Qin Wang (Univ. Sc.

• Thomas Watteyne (Linear Technology/Dust)

Techno. Beijing) 3. OpenWSN on the IoT-lab
• Nicola Accettura (UC Berkeley)

9. uPnP: Automatic recognition of connected sensors
• Prof. Danny Hughes (KU Leuven)

4. Contiki 6TiSCH implementation and hardcell allocation • Sedat Gormus, YiChao Jin
5. IEEE802.15.4e/6TiSCH dissectors • Jonathan Munoz, Guillaume Gaillard, Dominique Barthel (Orange Labs)

10. Flexible HW/SW CCM* security implementations in OpenWSN • Malisa Vucinic (ST Micro)
11. 6TiSCH layer-2 security implementation in OpenWSN • Savio Sciancalepore, Giuseppe Piro (U. Bari)

6. Node Monitoring framework

• Dominique Barthel, Quentin Lampin (Orange

Labs)

Equipex FIT IoT-lab Workshop @ Inria-Lille

21

ETSI 6TiSCH interop event

17-18 July 2015, Prague 2-4 February 2016, Paris July 2016, Berlin

organizer: sponsors:

Preparation • OpenWSN selected as reference implementation • “Golden Device” Participation and Tests • 15 participating companies* • 23 total test pairings, each 1:30 hours in duration • 12 single-hop tests • 8 multi-hop tests

Outcome • 221 test cases performed • 93.7% overall compliance!
* list of participants under NDA

Equipex FIT IoT-lab Workshop @ Inria-Lille

22

11

Equipex FIT IoT-lab Wo2r3kshop @ Inria-Lille

Flexibility & Customization

Application Domains
Smart Factory
Control loops in a wireless process control network, in which high reliability and a fully deterministic behavior are required.
• Bounded latency • Ultra-high reliability
Smart Building
Service Provider networks transporting data from different independent clients, and for which an operator needs flow isolation and traffic shaping.
• Flow isolation • Traffic Engineering
Environmental Monitoring
Networks comprising energy harvesting nodes, which require an extremely low and predictable power consumption.
• Ultra low power operation • Predictable battery lifetime

Equipex FIT IoT-lab Workshop @ Inria-Lille

24

12

Road Ahead & Opportunities

REALMS team

Research
Next steps:
• conduct a rigorous study on the capabilities of TSCH technology, identify its performance bounds (latency, throughput, reliability, power consumption)
• Compare different scheduling approaches. • Large-scale experimentation in environmental
sensing and smart building applications.
Engineering
[Q2 2015] 6TiSCH minimal support [Q3 2015] FreeRTOS support [Q4 2015] 6TiSCH dynamin support [Q1 2016] ETSI interop [Q2 2016] Cloud-based (re)programming
Standardization
Second ETSI 6TiSCH interop event • Organized by ETSI • 2-4 February 2016 • Hosted at Inria Paris (tentative)

Collaboration
• Research partners • Complementary technology
• Pilot deployments • Access to testbeds or environments for tests/pilots
• Grow the user base • End users (Smart City, Industrial, Building, Environmental) • Contributors

Equipex FIT IoT-lab Workshop @ Inria-Lille

25

OpenWSN Tutorial!
Getting started Where to get information OpenVM Virtual Machine Cloning & Compiling
OpenWSN in simulation OpenSim Emulator CoAP interaction with nodes
OpenWSN on the OpenMote Compiling/Loading OpenMote (real hardware) Code Development with Eclipse+JTAG toolchain
Developing code and tuning the stack Adding a new application Changing the IEEE802.15.4e TSCH schedule Enable/Disabling Channel Hopping
OpenWSN on the IoT-lab

Equipex FIT IoT-lab Workshop @ Inria-Lille

26

13

Contributors
• https://openwsn.atlassian.net/wiki/display/OW/Team
• Adilla Susungi, Ahmad Dehwah, Alaeddine Weslati, Andrew Pullin, Ankur Mehta, Anita Flynn, Boyang Zhang, Branko Kerkez, Constanza Pérez García, Cedric Adjih, Charles McParland, Chol Su Kang, Christopher Snyder, Chuang Qian, David Burnett, David Stanislowski, Diego Dujovne, Dominique Barthel, Edmund Ye, Emmanuel Baccelli, Emily Chen, Fabien Chraim, Fabrice Theoleyre, Franck Rousseau, Giuseppe Piro, Giuseppe Ribezzo, Guillaume Gaillard, Hilfi Alkaff, Isabel Vergara, Jonathan Simon, Jonathan Muñoz, Kazushi Muraoka, Ken Bannister, Keoma Brun, Kevin Weekly, Kris Pister, Laura Keys, Leonid Keselman, Marcelo Barros de Almeida, Mališa Vučinić, Mathivanan, Michael Lin, Min Ting, Nahir Sarmicanic, Nicola Accettura, Oleksiy Budilovsky, Oliver Hahm, Pascal Thubert, Pedro Issa Helou, Peng Du, Pere Tuset, Qin Wang, Quentin Lampin, Ricardo Cervera-Navarro, Russ Tremain, Sahar Mesri, Tengfei Chang, Thomas Eichinger, Thomas Watteyne, Vinoth Kumar, Vincent LadevezeVitor Garbellini, Xavi Vilajosana.
• if I left you off the list, send me an email! It wasn't intentional.

Equipex FIT IoT-lab Workshop @ Inria-Lille

27

Thank you!

Thomas Watteyne
Research Scientist & Innovator Inria-Paris, EVA team thomas.watteyne@inria.fr
Xavi Vilajosana
Professor Universitat Oberta de Catalunya xvilajosana@uoc.edu
www.openwsn.org

Equipex FIT IoT-lab Workshop @ Inria-Lille

28

14

About the Speakers

Thomas Watteyne (http://www.thomaswatteyne.com/) is an insatiable enthusiast of low-power wireless mesh technologies. He is a researcher at Inria in Paris, in the new EVA research team, where he designs, models and builds networking solutions based on a variety of Internet-of-Things (IoT) standards. He is Senior Networking Design Engineer at Linear Technology, in the Dust Networks product group, the undisputed leader in supplying low power wireless mesh networks for demanding industrial process automation applications. Since 2013, he co-chairs the IETF 6TiSCH working group, which standardizes how to use IEEE802.15.4e TSCH in IPv6-enabled mesh networks, and recently joined the IETF Internet-of-Things Directorate. Prior to that, Thomas was a postdoctoral research lead in Prof. Kristofer Pister’s team at the University of California, Berkeley. He founded and coleads Berkeley’s OpenWSN project, an open-source initiative to promote the use of fully standards-based protocol stacks for the IoT. Between 2005 and 2008, he was a research engineer at France Telecom, Orange Labs. He holds a PhD in Computer Science (2008), an MSc in Networking (2005) and an MEng in Telecommunications (2005) from INSA Lyon, France. He is Senior member of IEEE. He is fluent in 4 languages.

Xavier Vilajosana (http://xvilajosana.org/), Entrepreneur and co-founder of Worldsensing. He is currently associate
professor at the Open University of Catalonia (UOC), and senior firmware architect at the HP R&D labs. From January
2012 to January 2014, Xavier was visiting Professor at the University of California Berkeley holding a prestigious
Fulbright fellowship. In 2008, he was visiting researcher of France Telecom R&D Labs, Paris. Xavier has been one of the
main promoters of low power wireless technologies, coleading the OpenWSN.org initiative at UC Berkeley, and promoting the use of low power wireless standards for the emerging Industrial Internet paradigm. He is also author of
different Internet Drafts and RFCs, as part of his standardization activities for low power industrial networks. Xavier is contributing actively at the IETF 6TiSCH WG. He has an MsC degree on Computer Sciences from the Universitat
Politècnica de Catalunya (UPC) and a PhD on Computer Science from the Universitat Obertat de Catalunya. At the moment, he holds a patent, more than 20 high impact journal
publications and more than 40 International conference contributions. Technically Xavier has extensive experience in
Distributed Systems, Wireless Networks, Delay Tolerant Networks and Cloud Computing. He is an IEEE member, and founding member of the IEEE Sensors Council in Spain. Also Xavier is chair in several prestigious international conferences.
His research interests include low power communication protocols, routing, scheduling and optimization problems in
distributed systems at large.

Equipex FIT IoT-lab Workshop @ Inria-Lille

29

15

