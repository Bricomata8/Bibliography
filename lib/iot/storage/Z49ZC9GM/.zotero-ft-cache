Adaptive relaying for wireless sensor networks leveraging wake-up receiver
Nour El Hoda Djidi, Antoine Courtay, Matthieu Gautier, Oliver Berder
To cite this version:
Nour El Hoda Djidi, Antoine Courtay, Matthieu Gautier, Oliver Berder. Adaptive relaying for wireless sensor networks leveraging wake-up receiver. IEEE International Conference on Electronics Circuits and Systems (ICECS), Dec 2018, Bordeaux, France. ￿hal-01900670￿

HAL Id: hal-01900670 https://hal.inria.fr/hal-01900670
Submitted on 22 Oct 2018

HAL is a multi-disciplinary open access archive for the deposit and dissemination of scientific research documents, whether they are published or not. The documents may come from teaching and research institutions in France or abroad, or from public or private research centers.

L’archive ouverte pluridisciplinaire HAL, est destinée au dépôt et à la diffusion de documents scientifiques de niveau recherche, publiés ou non, émanant des établissements d’enseignement et de recherche français ou étrangers, des laboratoires publics ou privés.

Adaptive relaying for wireless sensor networks leveraging wake-up receiver
Nour El Hoda Djidi, Antoine Courtay, Matthieu Gautier, Oliver Berder Univ Rennes, CNRS, IRISA ﬁrstname.lastname@irisa.fr

Abstract—Energy management is a perennial issue in the design of wireless sensor networks that require long-term sustainability. Radio transmissions being the main energy consuming tasks, adaptive transmission power and relaying protocols represent promising solutions to increase network lifetime. In this work, a novel MAC protocol leveraging emerging wake up receivers is proposed for multihop wireless sensor networks. It uses energy-based back-off mechanism to allow nodes to choose the best transmission schemes (relay or not) and corresponding transmission powers. The proposed approach has been implemented on a real hardware platform. Performance evaluation combining analytical models and microbenchmarks demonstrates a potential lifetime gain up to 1.7 when two relays are used.
Index Terms—Wireless sensor networks, Adaptive MAC protocol, Wake-up radio
I. INTRODUCTION
Billions of communicating objects have already been deployed throughout the world in the recent years, and emerging applications will dramatically increase this phenomenon. Energy is the main concern of wireless sensor designers and operators, since they are often placed in harsh environments, and obviously the more sensors you deploy, the less often you want to change the batteries. As radio transmissions represent the main source of energy consumption, the challenge is twofold: (i) reduce the transmission power, adapting the latter to the distance between nodes [1], using channel coding or cooperation between nodes [2], (ii) decrease radio activity thanks to efﬁcient Medium Access Control (MAC) protocols [3], [4] or emerging technologies at radio front-end level.
When the addressee is far from the source node (eventually out of the radio range of the latter) multi-hop routing is commonly used, which consists in using one or several relays to help forwarding information. Since several relays are generally available at each step on the route to the destination, there is however a need of protocol overhead to choose the best relay (regarding criteria as local or global energy, latency . . . ) and even to choose relaying rather than direct transmission if the destination is directly reachable.
Some recent advances in ultra low power radio receivers made it possible to let the node awake and continuously listen to the wireless channel while consuming few microwatts. These devices, so-called Wake-up Receivers (WuRx), represent a real breakthrough in wireless protocols since the latency is quasi reduced to nothing with very low energy consumption [5]. The main transceiver wakes up only when a speciﬁc signal, called Wake-Up Beacon (WUB), is received

by the WuRx. Protocol overhead is also severely decreased, and furthermore it can be used to select the best relay among a certain set, e.g. based on a back-off with energy information.
Among the recent MAC protocols leveraging WuRx, OPWUM (Opportunistic MAC Protocol Leveraging Wake up Receivers) uses timer-based contention to allow nodes to opportunistically select a receiver among their potential receivers at each packet sending [6]. On the other hand T-ROME and CTP-WUR are a cross-layer multi-hop wake-up routing protocols that combine wake-up and communication radios, especially taking into account the smaller range of wake-up receivers [7], [8]. In the present paper we present the design of a novel cross-layer protocol, called WARP (WuRx-based Adaptive Relaying Protocols) that combines the advantages of opportunistic relay selection and multi-hop schemes, both leveraging WuRx. This protocol is evaluated in terms of energy consumption conducting real experiments. Energy traces are extracted to feed an energy model that highlights the interest of our protocol and veriﬁes its scalability.
The rest of the paper is structured as follows. Section II describes our adaptive protocol and details the relaying policy, mainly based on energy consumption. Experimental validations with real wake-up receivers are proposed in Section III, before conclusions are drawn in Section IV.
II. ADAPTIVE RELAYING MAC PROTOCOL
A. Relaying policy
The network is composed of a transmitting node, the sender, that sends data packet to the destination node and a set of N potential relay nodes. The decision to relay or not a packet is done by the sender considering relaying capability of the relay nodes. The sender also adapts its transmitting power according to the chosen strategy, resulting in a power consumption pSender: PSR, the power consumption needed by the sender to reach the relay or PSD to reach the destination. In the same manner, the destination power consumption pDest can be either PSD or PRD, the power consumption needed to link the relay and the destination. This study clearly depends on power proﬁle of the radio transceivers: indeed, depending on the used circuits, the power consumption can vary of a factor 1.5 to 4 between the minimum and the maximum transmitting power levels [1]. If the transmission energy needed for PSR is in the same range than the energy for PSD, relaying will never be an interesting scheme.

We denote η a variable that is equal to 0 if direct transmission is chosen and η = 1 if relaying is considered. The total energy transmission to send a packet is equal to:

ETot(pSender, η, pDest) = ESender(pSender)+ERelay(η)+EDest(pDest), (1)
with ESender, ERelay and EDest the energy consumed by the sender, the relay and the destination respectively.
In the case of direct transmission, the total energy is ETDot = ETot(PSD, 0, PSD) while sending a packet requires ETRot = ETot(PSR, 1, PRD) using relaying.

(a) MAC protocol while relaying is decided.

Different policies can be applied to decide to use one solution or another depending on the metric to optimize e.g. network lifetime, fair packet rate among all senders . . . This issue is not fully explored in this paper and a basic policy is proposed to evaluate the feasibility of the protocol. In this study, the goal is to maximize the sender lifetime i.e. until its residual energy is over a hardware failing threshold ESfail. To this aim, the sender ﬁrstly uses all the relays to decrease its energy consumption. Afterwards, it uses direct transmission if he is still alive while all the relays are in a distress state i.e. their residual energy ES(i), ∀i ∈ {1, . . . , N } is below a critical threshold ESempty. Consequently, the sender chooses relaying scheme if these two conditions are true:

ESender(PSR) < ESender(PSD),

(2)

and

∃ i ∈ {1, . . . , N } / ES(i) > ESempty.

(3)

The lifetime TLife of the sender is thus composed of two phases: the ﬁrst of duration TRelay with relaying transmission and the second lasting TDirect with direct transmission:

TLife = TRelay + TDirect.

(4)

The ﬁrst term depends on which type of nodes reaches the ﬁrst
its energy lower bound i.e. the sender is in power failure or all
relays are in a distress state. The energy storage device of all nodes is assumed to have a ﬁnite capacity ESfull. Considering a uniform use of the N relays, the relaying time is computed
by:

TRelay

=

min

( ESfull − ESfail , N PSender(PSR)

ESfull − ESempty PRelay(1)

),

(5)

with PSender(PSR) and PRelay(1) the average power consumption of the sender and a relay when relaying is used.
The second phase dedicated to direct transmission is computed by:

TDirect

=

ESfull

− TRelayPSender(PSR) − ESfail , PSender (PS D )

(6)

with PSender(PSD) the average power consumption of the sender in the case of direct transmission.

(b) MAC protocol while direct transmission is decided.
Fig. 1: Packet transmission using WARP. Red color is used to represent WUB transmission, gray color is used to represent DATA and ACK frames transmission, and white color is used to represent reception. CS are not represented before each transmission. Background color gives the transmission powers pSender and pDest of the sender and destination nodes.
B. WARP protocol design
The WARP protocol enables a node to opportunistically select the best communication strategy between direct transmission or choosing among a set of potential relays. In order to implement the previously introduced strategy, the sender needs to know the residual energy ES(i) of the best relay.
Fig. 1 shows an example of packet transmission using WARP for both relaying (Fig. 1a) and direct transmission (Fig. 1b) schemes. In this example, the sender has two potential relays. When a node wants to send a packet, it sends a Request To Send (RTS) WUB frame. Then, a contention window begins, during which a set of potential receivers answers by sending a Clear To Send (CTS) WUB frame using a backoff, called contention backoff. The backoff is computed from a state metric, i.e. the residual energy of the relay in this study. The more residual energy the node has, the smaller the backoff should be. In this example, the relay 1 computes the shortest backoff, and is thus the ﬁrst one to answer by sending a CTS WUB.
According to conditions (2) and (3), the sender chooses the best communication scheme. If relaying is decided (Fig. 1a), the sender sends an About To Send (ATS) WUB in order to inform the remaining nodes still competing that the next hop relay was already chosen. In this example, the relay 2 receives the ATS and thus cancels its backoff. Then, the data exchange

takes place, ﬁrstly between the sender and the ﬁrst receiver using the main transceiver with a transmission power PSR. Secondly, the relay forwards the packet to the destination using a transmission power PRD.
If direct transmission is chosen (Fig. 1b), the sender sends an ATS WUB at a transmission power PSD in order to inform both relay nodes and the destination that the packet will be directly transmitted to the destination. Finally, the data exchange takes place between the sender and the destination.

C. WARP energy model
The average power consumption of WARP is derived in this section. Let χT be the rate at which the sender transmits packets and we suppose that the relays only forward packets, they do not generate local data.
The energetic costs of transmitting and receiving a single packet (ATS, DATA and ACK) are respectively denoted ET and ER and are computed as follows:

ET (pT ) = pT Twub + pT Tdata + PRTack,

(7)

(a) Relay backoff sets to 3 ms, relaying is decided.

ER(pT ) = PRTdata + pT Tack,

(8)

where Twub, Tdata and Tack are respectively the transmission durations of any WUB (RTS, CTS or ATS), a DATA frame and an ACK frame. pT and PR are the power consumed by the main transceiver when sending frames and listening respectively. Hence, the average power consumptions of the sender PSender, the destination PDest and the relay PRelay are:
PSender(pT ) = PW + χT PSRTwub + χT ET (pT ) + (1 − χT Twub − χT TT x) PS, (9)
PDest(pT ) = PW + χT ER(pT ) + (1 − χT TRx) PS, (10)

PRelay(η) = PW + χT PSRTwub + (1 − χT Twub) PS , + η[χT ER(PSR) + χT ET (PRD) − (χT TT x + χT TRx) PS], (11)

where PW is the power consumed by the WuRx, PS is the power consumed by the main transceiver in sleep state, and TT x and TRx are the durations during which the main transceiver is active when transmitting and receiving a single packet respectively. They can be computed as follows:

TT x = Twub + Tdata + Tack,

(12)

TRx = Tdata + Tack.

(13)

(b) Relay backoff sets to 12 ms, direct transmission is decided.
Fig. 2: Current consumption using WARP.
III. EXPERIMENTAL VALIDATIONS
A. Experimental setup
Experimentations were realized using the PowWow platform [4] and the WuRx from [5]. PowWow is a modular platform that is equipped with a CC1120 radio chip and a MSP430 low power micro-controller, both from Texas Instruments. The data is sent with a bitrate of 20 kbps. The WuRx receives data with On-Off Keying modulation (OOK) and works in the 868 MHz frequency band with a bitrate of 1 kbps. The sensitivity in these conditions was measured to be −55dBm. The WuRx embeds a ULP MCU, the PIC12LF1552 from Microchip, that can process address matching. The power consumption of the whole WuRx was measured to be 1.83µW in continuous listening mode and 284µW when receiving data with the ULP MCU active to process them.
The experimental setup consisted in three nodes: one source, one relay node and a destination. The RTS and CTS WUB were always sent at -11dBm. The ATS WUB, DATA and ACK frames were sent at -11 dBm when relaying is decided, and were sent at 14 dBm when direct communication is decided.
B. Microbenchmarks
Fig. 2 shows the current consumptions of the sender, the selected relay and the destination for two different backoffs of the relay, 3 ms and 12 ms. Each backoff leads to a different decision, relaying in Fig. 2a and direct transmission in Fig. 2b.

Frame duration

and power consumption

Twub TCT S TACK TData

11 ms 4 ms 4 ms 7.7 ms

Ps PR PSR PSD

0.12 mW 73.5 mW 73.05 mW 141.36 mW

Energy per packet per node type

and per mode

Relaying

ESender (PS R ) ERelay (1)
EDest(PRD )

2.57 mJ 2.989 mJ 1.023 mJ

Direct transmission

ESender(PSD ) ERelay (0)
EDest(PSD )

4.21 mJ 0.289 mJ 1.29 mJ

TABLE I: Energy, power consumption and time duration extracted from the microbenchmarks.

These measurements were obtained using a Keysight N6705 DC analyzer. The different stages of the proposed MAC protocol, detailed in Section II-B, can be seen in the ﬁgure. The main transceiver also offers Channel Sensing (CS) capabilities that are used in this experiment before sending any packet.
These microbenchmarks show the feasibility of the switching mechanism. In Fig. 2a when the WuRx of the relay node receives the RTS WUB, it computes a backoff of 3ms, meaning that the relay node has enough energy to forward the data to the destination, so the source decides to send data to the relay. In the contrary, in Fig. 2b, the back-off is set to 12ms, meaning that the relay has not enough energy to forward data to the destination, so the source decides to directly send data.
From the microbenchmarks, Table I gives measured values in term of energy, power consumption and time duration. These results show that the used transceiver has a PSD value around twice the one of PSR. Even if it is not a favorable case for relaying, ESender(PSR) is still lower than ESender(PSD) so relaying will be chosen until either the sender or the relays are in distress states.

C. Analytical evaluation of the sender lifetime

The sender lifetime is analytically evaluated by including

experimental measurements given in Table I in the theoretical

lifetime (4)-(6) and the energy models of WARP introduced

in Section II-C. The lifetime is evaluated in both direct

transmission and relaying cases. WARP is also compared to

simple direct transmission with no adaptation mechanism in

order to evaluate the protocol overhead. The energy storage

device is a 0.9 F super-capacitor with a maximum voltage of

5.0 V, and the minimum voltage required to power the node

irses2p.e8cVti.veTlyh.usEESemSfuplltyanisd

ESfail are equal to 11.25 J and 3.528 J set to 3.534 J so that a relay can still

rely twice. The results are shown in Fig. 3.

As PSender(PSD) is higher than PRelay(1), the sender will die earlier when using direct transmission than when using

relaying. The lifetime increases up to 1.3 times when one relay

is used and up to 1.7 times with two relays. However, the

sender lifetime will not increase when using more than two

relays, in this case it depends on PSender(PSR) and the sender will die before the relays. At sender death, 40 % of the energy

has been used per relay for N =2. Comparing WARP to direct

transmission, one can notice the energy overhead due to the

adaptation mechanism.

Fig. 3: Sender lifetime as a function of packet rate χT .
IV. CONCLUSION
This paper presents WARP, a MAC protocol that adapts the communication schemes, relaying or direct transmission, according to the residual energy of the nodes. The protocol leverages WuRx to opportunistically select the best relay and uses time backoff to send residual energy information to the sender node. The WuRx allows to signiﬁcantly reduce energy consumption overhead due to the protocol to decide the best strategy. However, the protocol performance clearly depends on the power proﬁle of the radio transceiver. With our setup, a 1.7 lifetime gain compared to direct transmission can be achieved when 2 relays are used. Future works are to use other transceivers and to extend the protocol to multi-hop multisender networks and associated decision policies.
REFERENCES
[1] M. M. Alam, O. Berder, D. Menard, and O. Sentieys, “On the energy savings of adaptive transmit power for wireless sensor networks radio transceivers,” in International Conference on Architecture of Computing Systems (ARCS), Prague, Czech Republic, February 2013.
[2] D. Zhang, Z. Chen, H. Zhou, L. Chen, and X. S. Shen, “Energy-balanced cooperative transmission based on relay selection and power control in energy harvesting wireless sensor network,” Computer Networks, vol. 104, pp. 189 – 197, 2016.
[3] A. Bachir, M. Dohler, T. Watteyne, and K. K. Leung, “MAC Essentials for Wireless Sensor Networks,” IEEE Communications Surveys Tutorials, vol. 12, no. 2, pp. 222–248, Second 2010.
[4] F. Ait Aoudia, M. Gautier, M. Magno, O. Berder, and L. Benini, “A Generic Framework for Modeling MAC Protocols in Wireless Sensor Networks,” IEEE/ACM Transactions on Networking, vol. 25, no. 3, pp. 1 – 12, Jun. 2017.
[5] M. Magno and L. Benini, “An ultra low power high sensitivity wakeup radio receiver with addressing capability,” in IEEE International Conference on Wireless and Mobile Computing, Networking and Communications (WiMob), Oct 2014.
[6] F. Ait Aoudia, M. Gautier, and O. Berder, “OPWUM: Opportunistic MAC Protocol Leveraging Wake-Up Receivers in WSNs,” Journal of Sensors, vol. 2016, pp. 1–9, 2016.
[7] T. Kumberg, M. Schink, L. Reindl, and C. Schindelhauer, “T-ROME: A simple and energy efﬁcient tree routing protocol for low-power wake-up receivers,” Ad Hoc Networks, vol. 59, pp. 97 – 115, 2017.
[8] S. Basagni, C. Petrioli, and D. Spenza, “CTP-WUR: The collection tree protocol in wake-up radio WSNs for critical applications,” in IEEE International Conference on Computing, Networking and Communications (ICNC), 2016, pp. 1–6.

