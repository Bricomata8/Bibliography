The 2018 IEEE International Conference on Internet of Things and Intelligence System (IoTaIS)

Mobile LoRa Gateway for Smart Livestock Monitoring System

Mukhammad Gufron Ikhsan Department of Electrical Engineering
University of Indonesia Jakarta, Indonesia
mukh.gufron@ui.ac.id
Ruki Harwahyu Department of Electrical Engineering
University of Indonesia Jakarta, Indonesia ruki.h@ui.ac.id

Muhammad Yanuar Ary Saputro Department of Electrical Engineering
University of Indonesia Jakarta, Indonesia
m.yanuar71@ui.ac.id
Riri Fitri Sari Department of Electrical Engineering
University of Indonesia Jakarta, Indonesia riri@ui.ac.id

Dian Abadi Arji Department of Electrical Engineering
University of Indonesia
Jakarta, Indonesia dian.abadi@ui.ac.id

Abstract—Livestock is an essential commodity, especially in Indonesia, an agricultural country located in the Asia Pacific. Indonesia has vaster Greenland area than any other ASEAN countries. One way to increase livestock production is by implementing Smart Livestock Monitoring System which relies on Internet of Things technology such as LoRa. LoRa and other Low Power Wide Area (LPWA) technologies offer great advantages such as extended transmission range, extended node's battery life, and a massive number of nodes per gateway support. However, LoRa utilizes sub 1 GHz unlicensed spectrum which has been very crowded since the last decades and will be even more crowded soon following IoT trends. We propose to use mobile LoRa gateway to mitigate this issue. This paper simulates and compares deployments of LoRa using one mobile gateway with one and multiple static gateways. LoRa is simulated using one mobile gateway and compared with one and multiple static gateway deployments. Simulation result shows that one static gateway is better for narrow livestock area because it gives sufficient Data Extraction Rate (DER) value required for data transmission and lowest Network Energy Consumption (NEC) value. Otherwise, for vast livestock area, one mobile gateway is better because of smaller deployment cost and more than sufficient DER value.
Keywords—LoRa, Smart Livestock Monitoring System, Mobile Gateway
I. INTRODUCTION
Livestock is an essential commodity, especially in Indonesia, an agricultural country located in The Asia Pacific. Livestock subsector in Indonesia is an important economic activity to provide essential nutrition to people. Indonesia’s position based on livestock production was at the fourth rank for beef, third for sheep and goat, and fourth for broiler compared to other ASEAN member countries [1]. Despite the rank, livestock’s potential in Indonesia can still be improved to fulfill necessity since commonly high-quality meat is still imported from outside Indonesia.
Technology can be useful to support this improvement, that is by implementing the Internet of Things (IoT) in livestock monitoring. For example, an implanted sensor or smart collar in cows’ neck can monitor their health condition like blood pressure, temperature, and heartbeat. Data received from the sensor are transmitted using wireless communication to a base station that acts as a gateway to transmit data to the application via a higher layer network.

This kind of technological investment may be considered necessary for high-quality meat production.
There are many wireless technologies such as ZigBee, LoRa, and NB-IoT to connect IoT nodes. The advantages of LoRa are the fact that it operates with low power and much longer range compared to ZigBee, and requires low-cost deployment compared with any other IoT technologies such as NB-IoT and Sigfox, mainly due to its community in the LoRa Alliance and the use of unlicensed frequency band. For livestock areas, LoRa is more suitable than NB-IoT [2] because they are mostly located in a rural area which is not well-covered by cellular system [3] and is normally managed by a single company.
We propose the use of one mobile LoRa gateway for smart livestock monitoring system in the medium to the large livestock area. Although LoRa does not support handover mechanism, with the small data generated by the livestock's end node, LoRa can still be used with slow mobility. Mobility is usually considered in MANETs, such as the one studied in [4]. Implementing one mobile LoRa gateway has multiple benefits over implementing one or multiple static gateways conventionally. With a mobile gateway, LoRa transmission range can be decreased. This can potentially minimize TX-RX power which saves the node’s energy and reduces interference. Reducing power consumption has been an issue since the introduction of heterogeneous networks (HetNets), which may employ several battery-powered small base stations [5]. Reducing interference is important since LoRa uses sub 1 GHz unlicensed spectrum which has been very crowded today and will be even more crowded in the near future of IoT trends. Mobile LoRa gateway can also reduce deployment cost since it utilizes only one gateway to cover the whole service area. Mobile LoRa gateway is a viable solution for livestock monitoring system since the nodes send small data with a long-scheduled interval. Furthermore, livestock’s location or gateway’s traveling route can be adjusted, e.g. to minimize the required duration for data retrieval.
This paper simulates LoRa by using one mobile gateway to retrieve livestock’s data from all LoRa nodes in various livestock areas. The performance results are then compared to similar environments with one static gateway and multiple static gateways. The simulator that used for this study is Lorasim [6]. The purpose of this comparison is to find the

97X8X-1X--5X3-8X6X-X7X35-X8X-4X/X18-X/$/X3X1/.$0X0X©.020 0©1280XIEXEIEEEE

46

The 2018 IEEE International Conference on Internet of Things and Intelligence System (IoTaIS)

best solution for large livestock conditions in saving energy and reducing operational costs.
The rest of the paper contains literature review on section II and simulation scenario and result are described in Section III and IV, respectively.
II. LITERATURE REVIEW
A. LoRa LoRa is an improved solution for M2M infrastructure
(Machine to Machine) provider and provides advantages with very low power consumption, very long range and can be operated with battery (i.e. low power consumption). By combining LoRa RF transceiver with LoRa gateway concentrator, we can create a network with a large range to connect millions of M2M nodes.
The frequency used by LoRa is sub 1 GHz unlicensed frequency. It varies according to the region, for example in Asia the frequency used is 433 MHz, in Europe the value used is 868 MHZ, whereas in North America the frequency used is 915 MHZ.
The features available in LoRa are as follows [7]: • Geolocation, this function allows us to detect the
location of the existing node without charge or free. • Low Cost, the cost of LoRa deployment is cheaper in
infrastructure, operational, and sensors that have their own network compared to other IoT platforms. • Standardized, specially made to easily interact and work with other products or systems, so that it can quickly adapt to other IoT network and applications. • Low Power, the required power consumption only ranging from 13MA to 15MA. Therefore, the battery can last from 10 to 20 years. • Long Range, one LoRa unit can radiate up to 100KM. • Secure, embedded end-to-end AES128 encryption. • High Capacity, it supports millions of messages per gateway, ideal for public network operators that serve many customers. LoRa has five transmission parameters that can be arranged in such a way, namely: • Transmission Power (TP): Energy / Power required to transmit signal, can be set between -4 dBm to 20 dBm, depending on regulation and hardware. Higher TP increases the immunity from interference under greater transmission distance, which is desirable in most of the situation but is bad for coexistence with other ISM-band users. • Carrier Frequency (CF): The frequency of the transmitted signal, its value between 137 MHz to 1020 MHz. • Spreading Factor (SF): the number of chips encoded on each symbol, can be set between 6 or 12. The higher the SF, the higher the range, the higher the SNR and the higher the power/energy consumption.

• Bandwidth (BW): frequency band, can be set between 7.8 kHz to 500 kHz. The general configuration of LoRa uses BW between 125 kHz, 250 kHz or 500 kHz. Higher BW may increase data rate but usually requires more complex DSP and may increase nodes’ cost.
• Coding Rate (CR): the number of Forward Error Correction (FEC) applied to the messages to increase the immunity from interferences. The higher the CR, increase the time in the air (airtime) and extend the message.
LoRaWan consists of LoRa network (nodes and gateways) as well as a network server and application server. A network server exclusively handles and re-route the requests, whereas an application server serves business logic to application programs through any number of protocols.
A node can connect to more than one gateway and send the same messages. When multiple gateways may send the same messages to the network server. In this case, the network server can compare the received messages so that it will only forward one message to the application server. This solves the problem of redundancy and reliability that is commonly faced in designing a distributed system [8]. B. Smart Livestock Monitoring System
As the movement toward Industry 4.0, the livestock industry around the world needs a better system. The livestock industry in Indonesia also needs to be improved. Currently, Indonesia still imports meat and milk to meet domestic needs which cannot be supported by domestic production.
Countries that have fertile soils and vast grasslands have the potential to develop the livestock sector. With high demand for foodstuffs, and with sophisticated livestock technology being implemented, improvements gained from livestock can be substantial.
Farmers in some countries have adopted information technology in their farming systems and have increased dramatically in recent years, such as the implementation of technology in agricultural systems in Kansas [9], the USA that appears in Fig. 1.
Fig. 1. The proportion of Kansas farms which use precision agriculture technology
IoT can provide changes to the livestock supply chain and provide technology that makes the livestock sector more productive and efficient. The implementation of LoRa on smart livestock monitoring systems is expected to increase the production by minimizing energy use (Low Power Consumption) on IoT to suppress capital and operational expenditures [10]. Installation of Smart Livestock sensors installed in the nodes in each of the animals will facilitate the

978-1-5386-7358-4/18/$31.00 ©2018 IEEE

47

The 2018 IEEE International Conference on Internet of Things and Intelligence System (IoTaIS)

breeder in obtaining information quickly and in real time, both animal health management, animal age, pain/illness, and pregnancy detection.
The system works by using a sensor collar, hanged in the cow’s necks. The collar consists of a heartbeat sensor, a temperature sensor, a respiration sensor, and a humidity sensor. Among these devices, power management is the most important one [11] and vulnerable to cyber-attacks [12]. Data collected by the sensor, transmitted to the gateway. And then, from gateway, the data is transmitted to smart monitoring application managed by the farmers or breeders.

III. LORA FOR SMART LIVESTOCK MONITORING SYSTEM
A. Simulation Parameter The simulation is carried out with the assumption that a
gateway moves horizontally following a straight track and stop at some points across the track. The parameters used in the simulation are similar to the one used in [6] with dynamic SF, BW, CR, and with minimized TP and average send time 100 seconds. As for other settings, we are using a 20-byte packet that is sent by each node with CF 868 MHz. Nodes transmit data simultaneously to one gateway. Nodes are randomly scattered along the tracks, as illustrated below:

Fig. 2. Illustration of Smart Livestock Monitoring System with a mobile gateway

C. LoRaSim LoRaSim [6] is a python-based simulator developed by
Martin Bor and Thiemo Voigt using Simpy simulator that is used to analyze the scalability and collision levels of LoRa networks. Basic LoRaSim consists of four programs, which are loraDir, loraDirMulBS, directionalLoraIntf, and oneDirectionalLoraIntf.

The loraDir program was developed to support research on [6] in 2016. Meanwhile, the other three programs were developed later to support research on [13]. In the second scenario of the loraDir program, the use of dynamic parameters proved to have an enormous influence on the increase in DER value (Data Extraction Rate) as well as give a significant effect on the decrease of Network Energy Consumption (NEC). Data Extraction Rate (DER) was the ratio of all messages in the LoRa that are delivered to the server/backend for a certain time. As for NEC defined as the amount of energy/power consumption of the LoRa node to transmit.

= (∑

∑

∑

)

(1)

=∑ (

∗

∗∗

)

(2)

LoRaSim is designed based on the XRange SX1272 LoRa module from NetBlocks1, which consists of a lowpower STM32L151CC ARM Cortex-M3 microcontroller (32 MHz CPU, 32 kB RAM, 256 kB flash) and a Semtech SX1272 LoRa transceiver [6].
Based on the concept of loraDir program on the LoRaSim has the potential to be developed in further research related to the implementation of mobile gateways on the IoT-based smart livestock monitoring system that is described in Section III.

Fig. 3. Mobile Gateway Simulation Scenario
In the simulation, we fully consider the ‘capture effect’, whereby one of the two colliding messages may still be decoded successfully depending on the relative timing and difference in receive power. Notice that the simulations performed in this study do not calculate the energy used by the mobile gateway in moving from one stop-point to another stop-point.
B. Simulation Scenario In the mobile gateway simulation, a new program was
made based on loraDir program, called loraMobileX, a simulation of mobile gateway that moves horizontally. The parameters of the simulation usage are as follows:
./loramobileX.py <nodes> <avgsend> <simtime> <bsMoving> [collision] while bsMoving indicates the number of times the moving gateway stops at its track, and the other parameters are similar to [3]. Mobile gateway simulation is implemented with three scenarios, there are LoRa simulation with one static gateway using existing loraDir program [6], LoRa simulation with multiple static gateways using existing loraDirMulBS program [13], and LoRa simulation with one mobile gateway using a new loraMobileX program.

TABLE I.

PARAMETERS SETTING FOR EACH EXPERIMENT

Parameters Type of Gateway Number of Gateway Number of stops
Simtime (ms) Avgsend (ms)

Experiment 1 Static
1, 2, 4, 6 & 8 0
1.000.000 100.000

Experiment 2 Mobile 1
1, 2, 4, 6 & 8 1.000.000 100.000

978-1-5386-7358-4/18/$31.00 ©2018 IEEE

48

The 2018 IEEE International Conference on Internet of Things and Intelligence System (IoTaIS)

Parameters SF
BW (kHz) CR ƛ
B (byte)

Experiment 1 Dynamic Dynamic Dynamic 0,000001 20

Experiment 2 Dynamic Dynamic Dynamic 0,000001 20

DER and NEC values from each scenario are compared. For DER, when all messages are delivered to the backend, the DER value will be 1 and when all message is not delivered, the DER value will be 0. The DER value is between 0 and 1 and is calculated using equation (1). NEC is calculated using equation (2) with Joule as the unit.
IV. SIMULATION RESULT AND EVALUATION
A. Simulation Result
1) Experiment 1: Static Gateway. In the first scenario, we use dynamic SF, BW, and CR with 20-byte packet that is sent every 100 seconds for 1000 seconds, and the number of nodes between 100 to 1500. DER and NEC value can be seen in Fig. 4 and Fig. 5, respectively. In static gateway scenario, the result shows that when the number of nodes increases, the NEC value also increases, while the DER value decreases. As for NEC, the graph in Fig. 4 shows that the difference in term of NEC of scenarios with 2 to 8 static gateways is small. Hence, using one static gateway is better and can be more efficient rather than using multiple static gateways that use a lot of energy, although in general increasing the number of the gateway can lead to higher DER values.

Fig. 5. DER for Scenario 1 for various number of nodes
The number of data packets and how many of them are received when using the static gateway is shown in Fig. 6. Fig. 6 shows that the addition of the number of gateways can reduce the missing packets.

Fig. 4. NEC for Scenario 1 for various number of nodes
Fig. 5 shows that the use of one static gateway in packet data transmitted has the lowest DER value than the others. Through the graph on Fig.5, we know that the use of more than one static gateway can increase the value of DER. The more gateways, the higher the DER.

Fig. 6. The number of packet data transmitted in simulation using the static gateway
2) Experiment 2: Mobile Gateway. In this scenario, we use similar settings to those of Experiment 1, but with one mobile gateway which stops at some points across the track horizontally. DER and NEC value can be seen in Fig. 7 and Fig. 8, respectively.

978-1-5386-7358-4/18/$31.00 ©2018 IEEE

Fig. 7. NEC for Scenario 2 for various number of nodes
49

The 2018 IEEE International Conference on Internet of Things and Intelligence System (IoTaIS)

Fig. 7 shows an interesting simulation result. It is shown that the use of one mobile gateway that stops once requires the highest energy than the others. It is also shown that the use of one mobile gateway that stops twice is the most efficient in terms of energy consumption.
Fig. 8 shows that the use of one mobile gateway that stops once, in addition, to require the highest energy consumption than others, also has the lowest DER value than others. From Fig. 8, we can observe that the use of a mobile gateway that stops more than once has a DER value that is not much different.
Fig. 9 shows the number of transmitted and received packets. From this figure, we can observe that the use of one mobile gateway that stops two or more times has packet loss that is not much different.

the track has the lowest DER value. The use of one mobile gateway that stops twice or more have a quite similar DER. This shows that the use of one mobile gateway that stops more than two times in the data transmission process is more efficient.
Fig. 11 shows the comparison of NEC of all cases in the experiments. In this figure, the lowest NEC is obtained by one static gateway and one mobile gateway that stops twice. The highest NEC is obtained by one mobile gateway that stops once. One mobile gateway with one stop is basically similar to one static gateway in term of network topology. Referring to equation (2), although each node’s transmission power is the same as that in one static base station, the number of successful packets is lower. Hence, NEC is higher.
On the case of reducing capital expenditure in the vast livestock area, using one mobile station is better than using many static gateways, the NEC used by nodes to reach mobile gateway is fewer than the NEC used by multiple gateways. If the livestock area is not too vast, using one static gateway is better for energy consumption.

Fig. 8. DER for Scenario 2 for various number of nodes

Fig. 10. DER value comparison for each scenario

Fig. 9. The number of packet data transmitted in simulation using one mobile gateway

B. Evaluation Based on the results described in the previous subsection,
all DER values decrease with the addition of the number of nodes. From all experiments, we can compare the DER values of each experiment and can be seen in Fig. 10.
Fig. 10 and 11 show that the use of 8 static gateways has the highest DER value than the others, but requires the highest NEC values based on the graph in Fig. 11. The use of one static gateway and one mobile gateway that stops once at

Fig. 11. NEC value comparison for each scenario

978-1-5386-7358-4/18/$31.00 ©2018 IEEE

50

The 2018 IEEE International Conference on Internet of Things and Intelligence System (IoTaIS)

CONCLUSION LoRa is one of the many IoT platforms that can be deployed in the livestock area for Smart Livestock Monitoring System, but it is better due to its long range and low power consumption. There are many ways to optimize LoRa network deployment, such as by using multiple gateways or by using one mobile gateway. The solution can be chosen according to the situation in the livestock area.
According to our study, if the livestock area is narrow or not too vast, using one static gateway is better, because the DER value needed for data transmission is high enough and the NEC value is the lowest instead of using multiple static gateways or one mobile gateway. But for the vast livestock area, using one mobile gateway that moves along the track is better than using one or multiple static gateways.
Using one mobile gateway that stops at more than two stop points is more efficient than using multiple static gateways so as to reduce capital expenditure (gateway procurement costs). At last, we hope that this simulation can be tried in a real system to get more accurate data and environment model. This simulation can still be improved by using a directional antenna, or by using a dynamic algorithm for the nodes to automatically search the nearest gateway to get higher DER value.
ACKNOWLEDGMENT This research/article’s publication is supported by the United States Agency for International Development (USAID) through the Sustainable Higher Education Research Alliance (SHERA) Program for Universitas Indonesia’s Scientific Modeling, Application, Research and Training for City-centered Innovation and Technology (SMART CITY) Project, Grant #AID-497-A-1600004, Sub Grant #IIE00000078-UI-1.
REFERENCES [1] T. D. Soedjana and A. Priyanti, “Competitiveness of
Indonesian Livestock Production among ASEAN Countries,” Wartazoa, vol. 27, no. 1, pp. 1–14, 2017. [2] R. Harwahyu, R. G. Cheng, C. H. Wei, and R. F. Sari, “Optimization of Random Access Channel in NB-IoT,” IEEE Internet Things J., vol. 5, no. 1, pp. 391–402,

2018.

[3] K. Mekki, E. Bajic, F. Chaxel, and F. Meyer, “A

comparative study of LPWAN technologies for large-

scale IoT deployment,” ICT Express, 2018.

[4] R. F. Sari, A. Syarif, and B. Budiardjo, “Analisis

Kinerja Protocol Routing Ad Hoc On-Demand Distance

Vector ( Aodv ) Pada Jaringan Ad Hoc Hybrid :

Perbandingan Hasil Simulasi Dengan Ns-2 Dan

Implementasi,” Makara J. Technol., vol. 12, no. 1, pp.

7–18, 2008.

[5] Y. Wang, W. Hardjawana, Y. Li, B. Vucetic, and J. Shi,

“Discrete Power Control in Heterogeneous Networks,”

Makara J. Technol., vol. 20, no. 1, pp. 3–8, 2016.

[6] M. C. Bor, U. Roedig, T. Voigt, and J. M. Alonso, “Do

LoRa Low-Power Wide-Area Networks Scale?,” Proc.

19th ACM Int. Conf. Model. Anal. Simul. Wirel. Mob.

Syst. - MSWiM ’16, no. November, pp. 59–67, 2016.

[7] Semtech-Corporation, “What is LoRa© ?,” 2016.

[Online].

Available:

https://www.semtech.com/technology/lora/what-is-lora.

[Accessed: 20-Mar-2018].

[8] R. Harwahyu, Misbahuddin, and R. F. Sari,

“Performance evaluation of LTE random access

procedure under distributed location data mining for

road traffic monitoring,” Int. J. Commun. Networks Inf.

Secur., vol. 8, no. 3, pp. 171–178, 2016.

[9] K. H. Coble, A. K. Mishra, S. Ferrell, and T. Griffin,

“Big data in agriculture: A challenge for the future,”

Appl. Econ. Perspect. Policy, vol. 40, no. 1, pp. 79–96,

2018.

[10] S. W. Paper, “Revolutionizing Smart Agriculture Using

Semtech ’ s LoRa Technology.”

[11] L. A. T. Vergin Raja Sarobin M.1*, “Improved Leach

Algorithm For Energy Efficient Clustering Of Wireless

Sensor Network (WSN),” Int. J. Technol., no. 2016, pp.

50–60, 2016.

[12] S. Qaboos and A. Khoudh, “Improving The Resilience

of Wireless Sensor Networks Against Security Threats:

A Survey and Open Research Issues,” Int. J. Technol.,

no. 2018, pp. 828–839, 2018.

[13] T. Voigt, M. Bor, U. Roedig, and J. Alonso, “Mitigating

Inter-network Interference in LoRa Networks,” 2016.

978-1-5386-7358-4/18/$31.00 ©2018 IEEE

51

